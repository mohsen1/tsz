[package]
name = "wasm"
version = "0.1.0"
edition = "2024"

[lib]
crate-type = ["cdylib", "rlib"]

[[bin]]
name = "tsz"
path = "src/bin/tsz.rs"

[dependencies]
anyhow = "1.0"
clap = { version = "4.5", features = ["derive"] }
colored = "2.1"
globset = "0.4"
notify = "6.1"
wasm-bindgen = "0.2"
serde = { version = "1.0", features = ["derive"] }
serde_json = { version = "1.0", features = ["preserve_order"] }
serde-wasm-bindgen = "0.6"
rustc-hash = "2.0"  # Fast hashing for integer keys (FxHashMap)
rayon = "1.10"  # Parallel iteration for multi-file parsing
memchr = "2.7"  # SIMD byte searching for string escaping
walkdir = "2.5"
smallvec = "1.13"
# Phase 7.5: Query-based Structural Solver
# salsa = "0.25"  # Query-based incremental computation - disabled for now (requires nightly)
ena = "0.14"  # Union-Find for type unification
indexmap = "2.6"  # Deterministic iteration for structural keys (preserves insertion order)
bitflags = "2.6"  # Efficient TypeFlags for fast rejection

[dev-dependencies]
criterion = "0.5"

[[bench]]
name = "scanner_bench"
harness = false

[[bench]]
name = "parser_bench"
harness = false

[[bench]]
name = "emitter_bench"
harness = false

[[bench]]
name = "real_world_bench"
harness = false

[[bench]]
name = "solver_bench"
harness = false

[[bench]]
name = "cfa_bench"
harness = false
