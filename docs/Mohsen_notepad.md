stuff like this is not good. we should not care about file name 

```
.and_then(|s| s.strip_prefix("lib."))
                .and_then(|s| s.strip_suffix(".generated"))

```


---

file name extension checks should be unified. there are so many crazy extensions like mjs etc

---