ECMAScript® 2026 Language Specification  

-   Toggle shortcuts help`?`
-   Toggle "can call user code" annotations`u`
-   Navigate to/from multipage`m`
-   Jump to search box`/`
-   Toggle pinning of the current clause`p`
-   Jump to the *n*<sup>th</sup> pin`1-9`
-   Jump to the 10<sup>th</sup> pin`0`
-   Jump to the most recent link target`` ` ``

Menu

Pinsclear

Table of Contents

1.  [Introduction](#sec-intro "Introduction")
2.  [1 Scope](#sec-scope "Scope")
3.  +[2 Conformance](#sec-conformance "Conformance")
    1.  [2.1 Example Normative Optional Clause Heading](#sec-conformance-normative-optional "Example Normative Optional Clause Heading")
    2.  [2.2 Example Legacy Clause Heading](#sec-conformance-legacy "Example Legacy Clause Heading")
    3.  [2.3 Example Legacy Normative Optional Clause Heading](#sec-conformance-legacy-normative-optional "Example Legacy Normative Optional Clause Heading")
4.  [3 Normative References](#sec-normative-references "Normative References")
5.  +[4 Overview](#sec-overview "Overview")
    1.  [4.1 Web Scripting](#sec-web-scripting "Web Scripting")
    2.  [4.2 Hosts and Implementations](#sec-hosts-and-implementations "Hosts and Implementations")
    3.  +[4.3 ECMAScript Overview](#sec-ecmascript-overview "ECMAScript Overview")
        1.  [4.3.1 Objects](#sec-objects "Objects")
        2.  [4.3.2 The Strict Variant of ECMAScript](#sec-strict-variant-of-ecmascript "The Strict Variant of ECMAScript")
    4.  +[4.4 Terms and Definitions](#sec-terms-and-definitions "Terms and Definitions")
        1.  [4.4.1 implementation-approximated](#sec-terms-and-definitions-implementation-approximated "implementation-approximated")
        2.  [4.4.2 implementation-defined](#sec-terms-and-definitions-implementation-defined "implementation-defined")
        3.  [4.4.3 host-defined](#sec-terms-and-definitions-host-defined "host-defined")
        4.  [4.4.4 type](#sec-type "type")
        5.  [4.4.5 primitive value](#sec-primitive-value "primitive value")
        6.  [4.4.6 object](#sec-terms-and-definitions-object "object")
        7.  [4.4.7 constructor](#sec-constructor "constructor")
        8.  [4.4.8 prototype](#sec-terms-and-definitions-prototype "prototype")
        9.  [4.4.9 ordinary object](#sec-ordinary-object "ordinary object")
        10.  [4.4.10 exotic object](#sec-exotic-object "exotic object")
        11.  [4.4.11 standard object](#sec-standard-object "standard object")
        12.  [4.4.12 built-in object](#sec-built-in-object "built-in object")
        13.  [4.4.13 undefined value](#sec-undefined-value "undefined value")
        14.  [4.4.14 Undefined type](#sec-terms-and-definitions-undefined-type "Undefined type")
        15.  [4.4.15 null value](#sec-null-value "null value")
        16.  [4.4.16 Null type](#sec-terms-and-definitions-null-type "Null type")
        17.  [4.4.17 Boolean value](#sec-terms-and-definitions-boolean-value "Boolean value")
        18.  [4.4.18 Boolean type](#sec-terms-and-definitions-boolean-type "Boolean type")
        19.  [4.4.19 Boolean object](#sec-boolean-object "Boolean object")
        20.  [4.4.20 String value](#sec-terms-and-definitions-string-value "String value")
        21.  [4.4.21 String type](#sec-terms-and-definitions-string-type "String type")
        22.  [4.4.22 String object](#sec-string-object "String object")
        23.  [4.4.23 Number value](#sec-terms-and-definitions-number-value "Number value")
        24.  [4.4.24 Number type](#sec-terms-and-definitions-number-type "Number type")
        25.  [4.4.25 Number object](#sec-number-object "Number object")
        26.  [4.4.26 Infinity](#sec-terms-and-definitions-infinity "Infinity")
        27.  [4.4.27 NaN](#sec-terms-and-definitions-nan "NaN")
        28.  [4.4.28 BigInt value](#sec-terms-and-definitions-bigint-value "BigInt value")
        29.  [4.4.29 BigInt type](#sec-terms-and-definitions-bigint-type "BigInt type")
        30.  [4.4.30 BigInt object](#sec-bigint-object "BigInt object")
        31.  [4.4.31 Symbol value](#sec-symbol-value "Symbol value")
        32.  [4.4.32 Symbol type](#sec-terms-and-definitions-symbol-type "Symbol type")
        33.  [4.4.33 Symbol object](#sec-symbol-object "Symbol object")
        34.  [4.4.34 function](#sec-terms-and-definitions-function "function")
        35.  [4.4.35 built-in function](#sec-built-in-function "built-in function")
        36.  [4.4.36 built-in constructor](#sec-built-in-constructor "built-in constructor")
        37.  [4.4.37 property](#sec-property "property")
        38.  [4.4.38 method](#sec-method "method")
        39.  [4.4.39 built-in method](#sec-built-in-method "built-in method")
        40.  [4.4.40 attribute](#sec-attribute "attribute")
        41.  [4.4.41 own property](#sec-own-property "own property")
        42.  [4.4.42 inherited property](#sec-inherited-property "inherited property")
    5.  [4.5 Organization of This Specification](#sec-organization-of-this-specification "Organization of This Specification")
6.  +[5 Notational Conventions](#sec-notational-conventions "Notational Conventions")
    1.  +[5.1 Syntactic and Lexical Grammars](#sec-syntactic-and-lexical-grammars "Syntactic and Lexical Grammars")
        1.  [5.1.1 Context-Free Grammars](#sec-context-free-grammars "Context-Free Grammars")
        2.  [5.1.2 The Lexical and RegExp Grammars](#sec-lexical-and-regexp-grammars "The Lexical and RegExp Grammars")
        3.  [5.1.3 The Numeric String Grammar](#sec-numeric-string-grammar "The Numeric String Grammar")
        4.  [5.1.4 The Syntactic Grammar](#sec-syntactic-grammar "The Syntactic Grammar")
        5.  +[5.1.5 Grammar Notation](#sec-grammar-notation "Grammar Notation")
            1.  [5.1.5.1 Terminal Symbols](#sec-terminal-symbols "Terminal Symbols")
            2.  [5.1.5.2 Nonterminal Symbols and Productions](#sec-nonterminal-symbols-and-productions "Nonterminal Symbols and Productions")
            3.  [5.1.5.3 Optional Symbols](#sec-optional-symbols "Optional Symbols")
            4.  [5.1.5.4 Grammatical Parameters](#sec-grammatical-parameters "Grammatical Parameters")
            5.  [5.1.5.5 one of](#sec-one-of "one of")
            6.  [5.1.5.6 \[empty\]](#sec-empty "[empty]")
            7.  [5.1.5.7 Lookahead Restrictions](#sec-lookahead-restrictions "Lookahead Restrictions")
            8.  [5.1.5.8 \[no LineTerminator here\]](#sec-no-lineterminator-here "[no LineTerminator here]")
            9.  [5.1.5.9 but not](#sec-but-not "but not")
            10.  [5.1.5.10 Descriptive Phrases](#sec-descriptive-phrases "Descriptive Phrases")
    2.  +[5.2 Algorithm Conventions](#sec-algorithm-conventions "Algorithm Conventions")
        1.  [5.2.1 Evaluation Order](#sec-evaluation-order "Evaluation Order")
        2.  [5.2.2 Abstract Operations](#sec-algorithm-conventions-abstract-operations "Abstract Operations")
        3.  [5.2.3 Syntax-Directed Operations](#sec-algorithm-conventions-syntax-directed-operations "Syntax-Directed Operations")
        4.  +[5.2.4 Runtime Semantics](#sec-runtime-semantics "Runtime Semantics")
            1.  [5.2.4.1 Completion ( _completionRecord_ )](#sec-completion-ao "Completion ( completionRecord )")
            2.  [5.2.4.2 Throw an Exception](#sec-throw-an-exception "Throw an Exception")
            3.  [5.2.4.3 Shorthands for Unwrapping Completion Records](#sec-shorthands-for-unwrapping-completion-records "Shorthands for Unwrapping Completion Records")
            4.  [5.2.4.4 Implicit Normal Completion](#sec-implicit-normal-completion "Implicit Normal Completion")
        5.  [5.2.5 Static Semantics](#sec-static-semantic-rules "Static Semantics")
        6.  [5.2.6 Mathematical Operations](#sec-mathematical-operations "Mathematical Operations")
        7.  [5.2.7 Value Notation](#sec-value-notation "Value Notation")
        8.  [5.2.8 Identity](#sec-identity "Identity")
7.  +[6 ECMAScript Data Types and Values](#sec-ecmascript-data-types-and-values "ECMAScript Data Types and Values")
    1.  +[6.1 ECMAScript Language Types](#sec-ecmascript-language-types "ECMAScript Language Types")
        1.  [6.1.1 The Undefined Type](#sec-ecmascript-language-types-undefined-type "The Undefined Type")
        2.  [6.1.2 The Null Type](#sec-ecmascript-language-types-null-type "The Null Type")
        3.  [6.1.3 The Boolean Type](#sec-ecmascript-language-types-boolean-type "The Boolean Type")
        4.  +[6.1.4 The String Type](#sec-ecmascript-language-types-string-type "The String Type")
            1.  [6.1.4.1 StringIndexOf ( _string_, _searchValue_, _fromIndex_ )](#sec-stringindexof "StringIndexOf ( string, searchValue, fromIndex )")
            2.  [6.1.4.2 StringLastIndexOf ( _string_, _searchValue_, _fromIndex_ )](#sec-stringlastindexof "StringLastIndexOf ( string, searchValue, fromIndex )")
        5.  +[6.1.5 The Symbol Type](#sec-ecmascript-language-types-symbol-type "The Symbol Type")
            1.  [6.1.5.1 Well-Known Symbols](#sec-well-known-symbols "Well-Known Symbols")
        6.  +[6.1.6 Numeric Types](#sec-numeric-types "Numeric Types")
            1.  +[6.1.6.1 The Number Type](#sec-ecmascript-language-types-number-type "The Number Type")
                1.  [6.1.6.1.1 Number::unaryMinus ( _x_ )](#sec-numeric-types-number-unaryMinus "Number::unaryMinus ( x )")
                2.  [6.1.6.1.2 Number::bitwiseNOT ( _x_ )](#sec-numeric-types-number-bitwiseNOT "Number::bitwiseNOT ( x )")
                3.  [6.1.6.1.3 Number::exponentiate ( _base_, _exponent_ )](#sec-numeric-types-number-exponentiate "Number::exponentiate ( base, exponent )")
                4.  [6.1.6.1.4 Number::multiply ( _x_, _y_ )](#sec-numeric-types-number-multiply "Number::multiply ( x, y )")
                5.  [6.1.6.1.5 Number::divide ( _x_, _y_ )](#sec-numeric-types-number-divide "Number::divide ( x, y )")
                6.  [6.1.6.1.6 Number::remainder ( _n_, _d_ )](#sec-numeric-types-number-remainder "Number::remainder ( n, d )")
                7.  [6.1.6.1.7 Number::add ( _x_, _y_ )](#sec-numeric-types-number-add "Number::add ( x, y )")
                8.  [6.1.6.1.8 Number::subtract ( _x_, _y_ )](#sec-numeric-types-number-subtract "Number::subtract ( x, y )")
                9.  [6.1.6.1.9 Number::leftShift ( _x_, _y_ )](#sec-numeric-types-number-leftShift "Number::leftShift ( x, y )")
                10.  [6.1.6.1.10 Number::signedRightShift ( _x_, _y_ )](#sec-numeric-types-number-signedRightShift "Number::signedRightShift ( x, y )")
                11.  [6.1.6.1.11 Number::unsignedRightShift ( _x_, _y_ )](#sec-numeric-types-number-unsignedRightShift "Number::unsignedRightShift ( x, y )")
                12.  [6.1.6.1.12 Number::lessThan ( _x_, _y_ )](#sec-numeric-types-number-lessThan "Number::lessThan ( x, y )")
                13.  [6.1.6.1.13 Number::equal ( _x_, _y_ )](#sec-numeric-types-number-equal "Number::equal ( x, y )")
                14.  [6.1.6.1.14 Number::sameValue ( _x_, _y_ )](#sec-numeric-types-number-sameValue "Number::sameValue ( x, y )")
                15.  [6.1.6.1.15 Number::sameValueZero ( _x_, _y_ )](#sec-numeric-types-number-sameValueZero "Number::sameValueZero ( x, y )")
                16.  [6.1.6.1.16 NumberBitwiseOp ( _op_, _x_, _y_ )](#sec-numberbitwiseop "NumberBitwiseOp ( op, x, y )")
                17.  [6.1.6.1.17 Number::bitwiseAND ( _x_, _y_ )](#sec-numeric-types-number-bitwiseAND "Number::bitwiseAND ( x, y )")
                18.  [6.1.6.1.18 Number::bitwiseXOR ( _x_, _y_ )](#sec-numeric-types-number-bitwiseXOR "Number::bitwiseXOR ( x, y )")
                19.  [6.1.6.1.19 Number::bitwiseOR ( _x_, _y_ )](#sec-numeric-types-number-bitwiseOR "Number::bitwiseOR ( x, y )")
                20.  [6.1.6.1.20 Number::toString ( _x_, _radix_ )](#sec-numeric-types-number-tostring "Number::toString ( x, radix )")
            2.  +[6.1.6.2 The BigInt Type](#sec-ecmascript-language-types-bigint-type "The BigInt Type")
                1.  [6.1.6.2.1 BigInt::unaryMinus ( _x_ )](#sec-numeric-types-bigint-unaryMinus "BigInt::unaryMinus ( x )")
                2.  [6.1.6.2.2 BigInt::bitwiseNOT ( _x_ )](#sec-numeric-types-bigint-bitwiseNOT "BigInt::bitwiseNOT ( x )")
                3.  [6.1.6.2.3 BigInt::exponentiate ( _base_, _exponent_ )](#sec-numeric-types-bigint-exponentiate "BigInt::exponentiate ( base, exponent )")
                4.  [6.1.6.2.4 BigInt::multiply ( _x_, _y_ )](#sec-numeric-types-bigint-multiply "BigInt::multiply ( x, y )")
                5.  [6.1.6.2.5 BigInt::divide ( _x_, _y_ )](#sec-numeric-types-bigint-divide "BigInt::divide ( x, y )")
                6.  [6.1.6.2.6 BigInt::remainder ( _n_, _d_ )](#sec-numeric-types-bigint-remainder "BigInt::remainder ( n, d )")
                7.  [6.1.6.2.7 BigInt::add ( _x_, _y_ )](#sec-numeric-types-bigint-add "BigInt::add ( x, y )")
                8.  [6.1.6.2.8 BigInt::subtract ( _x_, _y_ )](#sec-numeric-types-bigint-subtract "BigInt::subtract ( x, y )")
                9.  [6.1.6.2.9 BigInt::leftShift ( _x_, _y_ )](#sec-numeric-types-bigint-leftShift "BigInt::leftShift ( x, y )")
                10.  [6.1.6.2.10 BigInt::signedRightShift ( _x_, _y_ )](#sec-numeric-types-bigint-signedRightShift "BigInt::signedRightShift ( x, y )")
                11.  [6.1.6.2.11 BigInt::unsignedRightShift ( _x_, _y_ )](#sec-numeric-types-bigint-unsignedRightShift "BigInt::unsignedRightShift ( x, y )")
                12.  [6.1.6.2.12 BigInt::lessThan ( _x_, _y_ )](#sec-numeric-types-bigint-lessThan "BigInt::lessThan ( x, y )")
                13.  [6.1.6.2.13 BigInt::equal ( _x_, _y_ )](#sec-numeric-types-bigint-equal "BigInt::equal ( x, y )")
                14.  [6.1.6.2.14 BinaryAnd ( _x_, _y_ )](#sec-binaryand "BinaryAnd ( x, y )")
                15.  [6.1.6.2.15 BinaryOr ( _x_, _y_ )](#sec-binaryor "BinaryOr ( x, y )")
                16.  [6.1.6.2.16 BinaryXor ( _x_, _y_ )](#sec-binaryxor "BinaryXor ( x, y )")
                17.  [6.1.6.2.17 BigIntBitwiseOp ( _op_, _x_, _y_ )](#sec-bigintbitwiseop "BigIntBitwiseOp ( op, x, y )")
                18.  [6.1.6.2.18 BigInt::bitwiseAND ( _x_, _y_ )](#sec-numeric-types-bigint-bitwiseAND "BigInt::bitwiseAND ( x, y )")
                19.  [6.1.6.2.19 BigInt::bitwiseXOR ( _x_, _y_ )](#sec-numeric-types-bigint-bitwiseXOR "BigInt::bitwiseXOR ( x, y )")
                20.  [6.1.6.2.20 BigInt::bitwiseOR ( _x_, _y_ )](#sec-numeric-types-bigint-bitwiseOR "BigInt::bitwiseOR ( x, y )")
                21.  [6.1.6.2.21 BigInt::toString ( _x_, _radix_ )](#sec-numeric-types-bigint-tostring "BigInt::toString ( x, radix )")
        7.  +[6.1.7 The Object Type](#sec-object-type "The Object Type")
            1.  [6.1.7.1 Property Attributes](#sec-property-attributes "Property Attributes")
            2.  [6.1.7.2 Object Internal Methods and Internal Slots](#sec-object-internal-methods-and-internal-slots "Object Internal Methods and Internal Slots")
            3.  [6.1.7.3 Invariants of the Essential Internal Methods](#sec-invariants-of-the-essential-internal-methods "Invariants of the Essential Internal Methods")
            4.  [6.1.7.4 Well-Known Intrinsic Objects](#sec-well-known-intrinsic-objects "Well-Known Intrinsic Objects")
    2.  +[6.2 ECMAScript Specification Types](#sec-ecmascript-specification-types "ECMAScript Specification Types")
        1.  [6.2.1 The Enum Specification Type](#sec-enum-specification-type "The Enum Specification Type")
        2.  [6.2.2 The List and Record Specification Types](#sec-list-and-record-specification-type "The List and Record Specification Types")
        3.  [6.2.3 The Set and Relation Specification Types](#sec-set-and-relation-specification-type "The Set and Relation Specification Types")
        4.  +[6.2.4 The Completion Record Specification Type](#sec-completion-record-specification-type "The Completion Record Specification Type")
            1.  [6.2.4.1 NormalCompletion ( _value_ )](#sec-normalcompletion "NormalCompletion ( value )")
            2.  [6.2.4.2 ThrowCompletion ( _value_ )](#sec-throwcompletion "ThrowCompletion ( value )")
            3.  [6.2.4.3 ReturnCompletion ( _value_ )](#sec-returncompletion "ReturnCompletion ( value )")
            4.  [6.2.4.4 UpdateEmpty ( _completionRecord_, _value_ )](#sec-updateempty "UpdateEmpty ( completionRecord, value )")
        5.  +[6.2.5 The Reference Record Specification Type](#sec-reference-record-specification-type "The Reference Record Specification Type")
            1.  [6.2.5.1 IsPropertyReference ( _V_ )](#sec-ispropertyreference "IsPropertyReference ( V )")
            2.  [6.2.5.2 IsUnresolvableReference ( _V_ )](#sec-isunresolvablereference "IsUnresolvableReference ( V )")
            3.  [6.2.5.3 IsSuperReference ( _V_ )](#sec-issuperreference "IsSuperReference ( V )")
            4.  [6.2.5.4 IsPrivateReference ( _V_ )](#sec-isprivatereference "IsPrivateReference ( V )")
            5.  [6.2.5.5 GetValue ( _V_ )](#sec-getvalue "GetValue ( V )")
            6.  [6.2.5.6 PutValue ( _V_, _W_ )](#sec-putvalue "PutValue ( V, W )")
            7.  [6.2.5.7 GetThisValue ( _V_ )](#sec-getthisvalue "GetThisValue ( V )")
            8.  [6.2.5.8 InitializeReferencedBinding ( _V_, _W_ )](#sec-initializereferencedbinding "InitializeReferencedBinding ( V, W )")
            9.  [6.2.5.9 MakePrivateReference ( _baseValue_, _privateIdentifier_ )](#sec-makeprivatereference "MakePrivateReference ( baseValue, privateIdentifier )")
        6.  +[6.2.6 The Property Descriptor Specification Type](#sec-property-descriptor-specification-type "The Property Descriptor Specification Type")
            1.  [6.2.6.1 IsAccessorDescriptor ( _Desc_ )](#sec-isaccessordescriptor "IsAccessorDescriptor ( Desc )")
            2.  [6.2.6.2 IsDataDescriptor ( _Desc_ )](#sec-isdatadescriptor "IsDataDescriptor ( Desc )")
            3.  [6.2.6.3 IsGenericDescriptor ( _Desc_ )](#sec-isgenericdescriptor "IsGenericDescriptor ( Desc )")
            4.  [6.2.6.4 FromPropertyDescriptor ( _Desc_ )](#sec-frompropertydescriptor "FromPropertyDescriptor ( Desc )")
            5.  [6.2.6.5 ToPropertyDescriptor ( _Obj_ )](#sec-topropertydescriptor "ToPropertyDescriptor ( Obj )")
            6.  [6.2.6.6 CompletePropertyDescriptor ( _Desc_ )](#sec-completepropertydescriptor "CompletePropertyDescriptor ( Desc )")
        7.  [6.2.7 The Environment Record Specification Type](#sec-lexical-environment-and-environment-record-specification-types "The Environment Record Specification Type")
        8.  [6.2.8 The Abstract Closure Specification Type](#sec-abstract-closure "The Abstract Closure Specification Type")
        9.  +[6.2.9 Data Blocks](#sec-data-blocks "Data Blocks")
            1.  [6.2.9.1 CreateByteDataBlock ( _size_ )](#sec-createbytedatablock "CreateByteDataBlock ( size )")
            2.  [6.2.9.2 CreateSharedByteDataBlock ( _size_ )](#sec-createsharedbytedatablock "CreateSharedByteDataBlock ( size )")
            3.  [6.2.9.3 CopyDataBlockBytes ( _toBlock_, _toIndex_, _fromBlock_, _fromIndex_, _count_ )](#sec-copydatablockbytes "CopyDataBlockBytes ( toBlock, toIndex, fromBlock, fromIndex, count )")
        10.  [6.2.10 The PrivateElement Specification Type](#sec-privateelement-specification-type "The PrivateElement Specification Type")
        11.  [6.2.11 The ClassFieldDefinition Record Specification Type](#sec-classfielddefinition-record-specification-type "The ClassFieldDefinition Record Specification Type")
        12.  [6.2.12 Private Names](#sec-private-names "Private Names")
        13.  [6.2.13 The ClassStaticBlockDefinition Record Specification Type](#sec-classstaticblockdefinition-record-specification-type "The ClassStaticBlockDefinition Record Specification Type")
8.  +[7 Abstract Operations](#sec-abstract-operations "Abstract Operations")
    1.  +[7.1 Type Conversion](#sec-type-conversion "Type Conversion")
        1.  +[7.1.1 ToPrimitive ( _input_ \[, _preferredType_ \] )](#sec-toprimitive "ToPrimitive ( input [, preferredType] )")
            1.  [7.1.1.1 OrdinaryToPrimitive ( _O_, _hint_ )](#sec-ordinarytoprimitive "OrdinaryToPrimitive ( O, hint )")
        2.  [7.1.2 ToBoolean ( _argument_ )](#sec-toboolean "ToBoolean ( argument )")
        3.  [7.1.3 ToNumeric ( _value_ )](#sec-tonumeric "ToNumeric ( value )")
        4.  +[7.1.4 ToNumber ( _argument_ )](#sec-tonumber "ToNumber ( argument )")
            1.  +[7.1.4.1 ToNumber Applied to the String Type](#sec-tonumber-applied-to-the-string-type "ToNumber Applied to the String Type")
                1.  [7.1.4.1.1 StringToNumber ( _str_ )](#sec-stringtonumber "StringToNumber ( str )")
                2.  [7.1.4.1.2 RS: StringNumericValue](#sec-runtime-semantics-stringnumericvalue "Runtime Semantics: StringNumericValue")
                3.  [7.1.4.1.3 RoundMVResult ( _n_ )](#sec-roundmvresult "RoundMVResult ( n )")
        5.  [7.1.5 ToIntegerOrInfinity ( _argument_ )](#sec-tointegerorinfinity "ToIntegerOrInfinity ( argument )")
        6.  [7.1.6 ToInt32 ( _argument_ )](#sec-toint32 "ToInt32 ( argument )")
        7.  [7.1.7 ToUint32 ( _argument_ )](#sec-touint32 "ToUint32 ( argument )")
        8.  [7.1.8 ToInt16 ( _argument_ )](#sec-toint16 "ToInt16 ( argument )")
        9.  [7.1.9 ToUint16 ( _argument_ )](#sec-touint16 "ToUint16 ( argument )")
        10.  [7.1.10 ToInt8 ( _argument_ )](#sec-toint8 "ToInt8 ( argument )")
        11.  [7.1.11 ToUint8 ( _argument_ )](#sec-touint8 "ToUint8 ( argument )")
        12.  [7.1.12 ToUint8Clamp ( _argument_ )](#sec-touint8clamp "ToUint8Clamp ( argument )")
        13.  [7.1.13 ToBigInt ( _argument_ )](#sec-tobigint "ToBigInt ( argument )")
        14.  +[7.1.14 StringToBigInt ( _str_ )](#sec-stringtobigint "StringToBigInt ( str )")
             1.  [7.1.14.1 StringIntegerLiteral Grammar](#sec-stringintegerliteral-grammar "StringIntegerLiteral Grammar")
             2.  [7.1.14.2 RS: MV](#sec-runtime-semantics-mv-for-stringintegerliteral "Runtime Semantics: MV")
        15.  [7.1.15 ToBigInt64 ( _argument_ )](#sec-tobigint64 "ToBigInt64 ( argument )")
        16.  [7.1.16 ToBigUint64 ( _argument_ )](#sec-tobiguint64 "ToBigUint64 ( argument )")
        17.  [7.1.17 ToString ( _argument_ )](#sec-tostring "ToString ( argument )")
        18.  [7.1.18 ToObject ( _argument_ )](#sec-toobject "ToObject ( argument )")
        19.  [7.1.19 ToPropertyKey ( _argument_ )](#sec-topropertykey "ToPropertyKey ( argument )")
        20.  [7.1.20 ToLength ( _argument_ )](#sec-tolength "ToLength ( argument )")
        21.  [7.1.21 CanonicalNumericIndexString ( _argument_ )](#sec-canonicalnumericindexstring "CanonicalNumericIndexString ( argument )")
        22.  [7.1.22 ToIndex ( _value_ )](#sec-toindex "ToIndex ( value )")
    2.  +[7.2 Testing and Comparison Operations](#sec-testing-and-comparison-operations "Testing and Comparison Operations")
        1.  [7.2.1 RequireObjectCoercible ( _argument_ )](#sec-requireobjectcoercible "RequireObjectCoercible ( argument )")
        2.  [7.2.2 IsArray ( _argument_ )](#sec-isarray "IsArray ( argument )")
        3.  [7.2.3 IsCallable ( _argument_ )](#sec-iscallable "IsCallable ( argument )")
        4.  [7.2.4 IsConstructor ( _argument_ )](#sec-isconstructor "IsConstructor ( argument )")
        5.  [7.2.5 IsExtensible ( _O_ )](#sec-isextensible-o "IsExtensible ( O )")
        6.  [7.2.6 IsRegExp ( _argument_ )](#sec-isregexp "IsRegExp ( argument )")
        7.  [7.2.7 SS: IsStringWellFormedUnicode ( _string_ )](#sec-isstringwellformedunicode "Static Semantics: IsStringWellFormedUnicode ( string )")
        8.  [7.2.8 SameType ( _x_, _y_ )](#sec-sametype "SameType ( x, y )")
        9.  [7.2.9 SameValue ( _x_, _y_ )](#sec-samevalue "SameValue ( x, y )")
        10.  [7.2.10 SameValueZero ( _x_, _y_ )](#sec-samevaluezero "SameValueZero ( x, y )")
        11.  [7.2.11 SameValueNonNumber ( _x_, _y_ )](#sec-samevaluenonnumber "SameValueNonNumber ( x, y )")
        12.  [7.2.12 IsLessThan ( _x_, _y_, _LeftFirst_ )](#sec-islessthan "IsLessThan ( x, y, LeftFirst )")
        13.  [7.2.13 IsLooselyEqual ( _x_, _y_ )](#sec-islooselyequal "IsLooselyEqual ( x, y )")
        14.  [7.2.14 IsStrictlyEqual ( _x_, _y_ )](#sec-isstrictlyequal "IsStrictlyEqual ( x, y )")
    3.  +[7.3 Operations on Objects](#sec-operations-on-objects "Operations on Objects")
        1.  [7.3.1 MakeBasicObject ( _internalSlotsList_ )](#sec-makebasicobject "MakeBasicObject ( internalSlotsList )")
        2.  [7.3.2 Get ( _O_, _P_ )](#sec-get-o-p "Get ( O, P )")
        3.  [7.3.3 GetV ( _V_, _P_ )](#sec-getv "GetV ( V, P )")
        4.  [7.3.4 Set ( _O_, _P_, _V_, _Throw_ )](#sec-set-o-p-v-throw "Set ( O, P, V, Throw )")
        5.  [7.3.5 CreateDataProperty ( _O_, _P_, _V_ )](#sec-createdataproperty "CreateDataProperty ( O, P, V )")
        6.  [7.3.6 CreateDataPropertyOrThrow ( _O_, _P_, _V_ )](#sec-createdatapropertyorthrow "CreateDataPropertyOrThrow ( O, P, V )")
        7.  [7.3.7 CreateNonEnumerableDataPropertyOrThrow ( _O_, _P_, _V_ )](#sec-createnonenumerabledatapropertyorthrow "CreateNonEnumerableDataPropertyOrThrow ( O, P, V )")
        8.  [7.3.8 DefinePropertyOrThrow ( _O_, _P_, _desc_ )](#sec-definepropertyorthrow "DefinePropertyOrThrow ( O, P, desc )")
        9.  [7.3.9 DeletePropertyOrThrow ( _O_, _P_ )](#sec-deletepropertyorthrow "DeletePropertyOrThrow ( O, P )")
        10.  [7.3.10 GetMethod ( _V_, _P_ )](#sec-getmethod "GetMethod ( V, P )")
        11.  [7.3.11 HasProperty ( _O_, _P_ )](#sec-hasproperty "HasProperty ( O, P )")
        12.  [7.3.12 HasOwnProperty ( _O_, _P_ )](#sec-hasownproperty "HasOwnProperty ( O, P )")
        13.  [7.3.13 Call ( _F_, _V_ \[, _argumentsList_ \] )](#sec-call "Call ( F, V [, argumentsList] )")
        14.  [7.3.14 Construct ( _F_ \[, _argumentsList_ \[, _newTarget_ \] \] )](#sec-construct "Construct ( F [, argumentsList [, newTarget]] )")
        15.  [7.3.15 SetIntegrityLevel ( _O_, _level_ )](#sec-setintegritylevel "SetIntegrityLevel ( O, level )")
        16.  [7.3.16 TestIntegrityLevel ( _O_, _level_ )](#sec-testintegritylevel "TestIntegrityLevel ( O, level )")
        17.  [7.3.17 CreateArrayFromList ( _elements_ )](#sec-createarrayfromlist "CreateArrayFromList ( elements )")
        18.  [7.3.18 LengthOfArrayLike ( _obj_ )](#sec-lengthofarraylike "LengthOfArrayLike ( obj )")
        19.  [7.3.19 CreateListFromArrayLike ( _obj_ \[, _validElementTypes_ \] )](#sec-createlistfromarraylike "CreateListFromArrayLike ( obj [, validElementTypes] )")
        20.  [7.3.20 Invoke ( _V_, _P_ \[, _argumentsList_ \] )](#sec-invoke "Invoke ( V, P [, argumentsList] )")
        21.  [7.3.21 OrdinaryHasInstance ( _C_, _O_ )](#sec-ordinaryhasinstance "OrdinaryHasInstance ( C, O )")
        22.  [7.3.22 SpeciesConstructor ( _O_, _defaultConstructor_ )](#sec-speciesconstructor "SpeciesConstructor ( O, defaultConstructor )")
        23.  [7.3.23 EnumerableOwnProperties ( _O_, _kind_ )](#sec-enumerableownproperties "EnumerableOwnProperties ( O, kind )")
        24.  [7.3.24 GetFunctionRealm ( _obj_ )](#sec-getfunctionrealm "GetFunctionRealm ( obj )")
        25.  [7.3.25 CopyDataProperties ( _target_, _source_, _excludedItems_ )](#sec-copydataproperties "CopyDataProperties ( target, source, excludedItems )")
        26.  [7.3.26 PrivateElementFind ( _O_, _P_ )](#sec-privateelementfind "PrivateElementFind ( O, P )")
        27.  [7.3.27 PrivateFieldAdd ( _O_, _P_, _value_ )](#sec-privatefieldadd "PrivateFieldAdd ( O, P, value )")
        28.  [7.3.28 PrivateMethodOrAccessorAdd ( _O_, _method_ )](#sec-privatemethodoraccessoradd "PrivateMethodOrAccessorAdd ( O, method )")
        29.  [7.3.29 HostEnsureCanAddPrivateElement ( _O_ )](#sec-hostensurecanaddprivateelement "HostEnsureCanAddPrivateElement ( O )")
        30.  [7.3.30 PrivateGet ( _O_, _P_ )](#sec-privateget "PrivateGet ( O, P )")
        31.  [7.3.31 PrivateSet ( _O_, _P_, _value_ )](#sec-privateset "PrivateSet ( O, P, value )")
        32.  [7.3.32 DefineField ( _receiver_, _fieldRecord_ )](#sec-definefield "DefineField ( receiver, fieldRecord )")
        33.  [7.3.33 InitializeInstanceElements ( _O_, _constructor_ )](#sec-initializeinstanceelements "InitializeInstanceElements ( O, constructor )")
        34.  [7.3.34 AddValueToKeyedGroup ( _groups_, _key_, _value_ )](#sec-add-value-to-keyed-group "AddValueToKeyedGroup ( groups, key, value )")
        35.  [7.3.35 GroupBy ( _items_, _callback_, _keyCoercion_ )](#sec-groupby "GroupBy ( items, callback, keyCoercion )")
        36.  [7.3.36 GetOptionsObject ( _options_ )](#sec-getoptionsobject "GetOptionsObject ( options )")
        37.  [7.3.37 SetterThatIgnoresPrototypeProperties ( _thisValue_, _home_, _p_, _v_ )](#sec-SetterThatIgnoresPrototypeProperties "SetterThatIgnoresPrototypeProperties ( thisValue, home, p, v )")
    4.  +[7.4 Operations on Iterator Objects](#sec-operations-on-iterator-objects "Operations on Iterator Objects")
        1.  [7.4.1 Iterator Records](#sec-iterator-records "Iterator Records")
        2.  [7.4.2 GetIteratorDirect ( _obj_ )](#sec-getiteratordirect "GetIteratorDirect ( obj )")
        3.  [7.4.3 GetIteratorFromMethod ( _obj_, _method_ )](#sec-getiteratorfrommethod "GetIteratorFromMethod ( obj, method )")
        4.  [7.4.4 GetIterator ( _obj_, _kind_ )](#sec-getiterator "GetIterator ( obj, kind )")
        5.  [7.4.5 GetIteratorFlattenable ( _obj_, _primitiveHandling_ )](#sec-getiteratorflattenable "GetIteratorFlattenable ( obj, primitiveHandling )")
        6.  [7.4.6 IteratorNext ( _iteratorRecord_ \[, _value_ \] )](#sec-iteratornext "IteratorNext ( iteratorRecord [, value] )")
        7.  [7.4.7 IteratorComplete ( _iteratorResult_ )](#sec-iteratorcomplete "IteratorComplete ( iteratorResult )")
        8.  [7.4.8 IteratorValue ( _iteratorResult_ )](#sec-iteratorvalue "IteratorValue ( iteratorResult )")
        9.  [7.4.9 IteratorStep ( _iteratorRecord_ )](#sec-iteratorstep "IteratorStep ( iteratorRecord )")
        10.  [7.4.10 IteratorStepValue ( _iteratorRecord_ )](#sec-iteratorstepvalue "IteratorStepValue ( iteratorRecord )")
        11.  [7.4.11 IteratorClose ( _iteratorRecord_, _completion_ )](#sec-iteratorclose "IteratorClose ( iteratorRecord, completion )")
        12.  [7.4.12 IteratorCloseAll ( _iters_, _completion_ )](#sec-iteratorcloseall "IteratorCloseAll ( iters, completion )")
        13.  [7.4.13 IfAbruptCloseIterator ( _value_, _iteratorRecord_ )](#sec-ifabruptcloseiterator "IfAbruptCloseIterator ( value, iteratorRecord )")
        14.  [7.4.14 AsyncIteratorClose ( _iteratorRecord_, _completion_ )](#sec-asynciteratorclose "AsyncIteratorClose ( iteratorRecord, completion )")
        15.  [7.4.15 IfAbruptCloseAsyncIterator ( _value_, _iteratorRecord_ )](#sec-ifabruptcloseasynciterator "IfAbruptCloseAsyncIterator ( value, iteratorRecord )")
        16.  [7.4.16 CreateIteratorResultObject ( _value_, _done_ )](#sec-createiterresultobject "CreateIteratorResultObject ( value, done )")
        17.  [7.4.17 CreateListIteratorRecord ( _list_ )](#sec-createlistiteratorRecord "CreateListIteratorRecord ( list )")
        18.  [7.4.18 IteratorToList ( _iteratorRecord_ )](#sec-iteratortolist "IteratorToList ( iteratorRecord )")
9.  +[8 Syntax-Directed Operations](#sec-syntax-directed-operations "Syntax-Directed Operations")
    1.  [8.1 RS: Evaluation](#sec-evaluation "Runtime Semantics: Evaluation")
    2.  +[8.2 Scope Analysis](#sec-syntax-directed-operations-scope-analysis "Scope Analysis")
        1.  [8.2.1 SS: BoundNames](#sec-static-semantics-boundnames "Static Semantics: BoundNames")
        2.  [8.2.2 SS: DeclarationPart](#sec-static-semantics-declarationpart "Static Semantics: DeclarationPart")
        3.  [8.2.3 SS: IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration "Static Semantics: IsConstantDeclaration")
        4.  [8.2.4 SS: LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames "Static Semantics: LexicallyDeclaredNames")
        5.  [8.2.5 SS: LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations "Static Semantics: LexicallyScopedDeclarations")
        6.  [8.2.6 SS: VarDeclaredNames](#sec-static-semantics-vardeclarednames "Static Semantics: VarDeclaredNames")
        7.  [8.2.7 SS: VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations "Static Semantics: VarScopedDeclarations")
        8.  [8.2.8 SS: TopLevelLexicallyDeclaredNames](#sec-static-semantics-toplevellexicallydeclarednames "Static Semantics: TopLevelLexicallyDeclaredNames")
        9.  [8.2.9 SS: TopLevelLexicallyScopedDeclarations](#sec-static-semantics-toplevellexicallyscopeddeclarations "Static Semantics: TopLevelLexicallyScopedDeclarations")
        10.  [8.2.10 SS: TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames "Static Semantics: TopLevelVarDeclaredNames")
        11.  [8.2.11 SS: TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations "Static Semantics: TopLevelVarScopedDeclarations")
    3.  +[8.3 Labels](#sec-syntax-directed-operations-labels "Labels")
        1.  [8.3.1 SS: ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels "Static Semantics: ContainsDuplicateLabels")
        2.  [8.3.2 SS: ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget "Static Semantics: ContainsUndefinedBreakTarget")
        3.  [8.3.3 SS: ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget "Static Semantics: ContainsUndefinedContinueTarget")
    4.  +[8.4 Function Name Inference](#sec-syntax-directed-operations-function-name-inference "Function Name Inference")
        1.  [8.4.1 SS: HasName](#sec-static-semantics-hasname "Static Semantics: HasName")
        2.  [8.4.2 SS: IsFunctionDefinition](#sec-static-semantics-isfunctiondefinition "Static Semantics: IsFunctionDefinition")
        3.  [8.4.3 SS: IsAnonymousFunctionDefinition ( _expr_ )](#sec-isanonymousfunctiondefinition "Static Semantics: IsAnonymousFunctionDefinition ( expr )")
        4.  [8.4.4 SS: IsIdentifierRef](#sec-static-semantics-isidentifierref "Static Semantics: IsIdentifierRef")
        5.  [8.4.5 RS: NamedEvaluation](#sec-runtime-semantics-namedevaluation "Runtime Semantics: NamedEvaluation")
    5.  +[8.5 Contains](#sec-syntax-directed-operations-contains "Contains")
        1.  [8.5.1 SS: Contains](#sec-static-semantics-contains "Static Semantics: Contains")
        2.  [8.5.2 SS: ComputedPropertyContains](#sec-static-semantics-computedpropertycontains "Static Semantics: ComputedPropertyContains")
    6.  +[8.6 Miscellaneous](#sec-syntax-directed-operations-miscellaneous "Miscellaneous")
        1.  [8.6.1 RS: InstantiateFunctionObject](#sec-runtime-semantics-instantiatefunctionobject "Runtime Semantics: InstantiateFunctionObject")
        2.  +[8.6.2 RS: BindingInitialization](#sec-runtime-semantics-bindinginitialization "Runtime Semantics: BindingInitialization")
            1.  [8.6.2.1 InitializeBoundName ( _name_, _value_, _environment_ )](#sec-initializeboundname "InitializeBoundName ( name, value, environment )")
        3.  [8.6.3 RS: IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization "Runtime Semantics: IteratorBindingInitialization")
        4.  [8.6.4 SS: AssignmentTargetType](#sec-static-semantics-assignmenttargettype "Static Semantics: AssignmentTargetType")
        5.  [8.6.5 SS: PropName](#sec-static-semantics-propname "Static Semantics: PropName")
10.  +[9 Executable Code and Execution Contexts](#sec-executable-code-and-execution-contexts "Executable Code and Execution Contexts")
     1.  +[9.1 Environment Records](#sec-environment-records "Environment Records")
         1.  +[9.1.1 The Environment Record Type Hierarchy](#sec-the-environment-record-type-hierarchy "The Environment Record Type Hierarchy")
             1.  +[9.1.1.1 Declarative Environment Records](#sec-declarative-environment-records "Declarative Environment Records")
                 1.  [9.1.1.1.1 HasBinding ( _N_ )](#sec-declarative-environment-records-hasbinding-n "HasBinding ( N )")
                 2.  [9.1.1.1.2 CreateMutableBinding ( _N_, _D_ )](#sec-declarative-environment-records-createmutablebinding-n-d "CreateMutableBinding ( N, D )")
                 3.  [9.1.1.1.3 CreateImmutableBinding ( _N_, _S_ )](#sec-declarative-environment-records-createimmutablebinding-n-s "CreateImmutableBinding ( N, S )")
                 4.  [9.1.1.1.4 InitializeBinding ( _N_, _V_ )](#sec-declarative-environment-records-initializebinding-n-v "InitializeBinding ( N, V )")
                 5.  [9.1.1.1.5 SetMutableBinding ( _N_, _V_, _S_ )](#sec-declarative-environment-records-setmutablebinding-n-v-s "SetMutableBinding ( N, V, S )")
                 6.  [9.1.1.1.6 GetBindingValue ( _N_, _S_ )](#sec-declarative-environment-records-getbindingvalue-n-s "GetBindingValue ( N, S )")
                 7.  [9.1.1.1.7 DeleteBinding ( _N_ )](#sec-declarative-environment-records-deletebinding-n "DeleteBinding ( N )")
                 8.  [9.1.1.1.8 HasThisBinding ( )](#sec-declarative-environment-records-hasthisbinding "HasThisBinding ( )")
                 9.  [9.1.1.1.9 HasSuperBinding ( )](#sec-declarative-environment-records-hassuperbinding "HasSuperBinding ( )")
                 10.  [9.1.1.1.10 WithBaseObject ( )](#sec-declarative-environment-records-withbaseobject "WithBaseObject ( )")
             2.  +[9.1.1.2 Object Environment Records](#sec-object-environment-records "Object Environment Records")
                 1.  [9.1.1.2.1 HasBinding ( _N_ )](#sec-object-environment-records-hasbinding-n "HasBinding ( N )")
                 2.  [9.1.1.2.2 CreateMutableBinding ( _N_, _D_ )](#sec-object-environment-records-createmutablebinding-n-d "CreateMutableBinding ( N, D )")
                 3.  [9.1.1.2.3 CreateImmutableBinding ( _N_, _S_ )](#sec-object-environment-records-createimmutablebinding-n-s "CreateImmutableBinding ( N, S )")
                 4.  [9.1.1.2.4 InitializeBinding ( _N_, _V_ )](#sec-object-environment-records-initializebinding-n-v "InitializeBinding ( N, V )")
                 5.  [9.1.1.2.5 SetMutableBinding ( _N_, _V_, _S_ )](#sec-object-environment-records-setmutablebinding-n-v-s "SetMutableBinding ( N, V, S )")
                 6.  [9.1.1.2.6 GetBindingValue ( _N_, _S_ )](#sec-object-environment-records-getbindingvalue-n-s "GetBindingValue ( N, S )")
                 7.  [9.1.1.2.7 DeleteBinding ( _N_ )](#sec-object-environment-records-deletebinding-n "DeleteBinding ( N )")
                 8.  [9.1.1.2.8 HasThisBinding ( )](#sec-object-environment-records-hasthisbinding "HasThisBinding ( )")
                 9.  [9.1.1.2.9 HasSuperBinding ( )](#sec-object-environment-records-hassuperbinding "HasSuperBinding ( )")
                 10.  [9.1.1.2.10 WithBaseObject ( )](#sec-object-environment-records-withbaseobject "WithBaseObject ( )")
             3.  +[9.1.1.3 Function Environment Records](#sec-function-environment-records "Function Environment Records")
                 1.  [9.1.1.3.1 BindThisValue ( _envRec_, _V_ )](#sec-bindthisvalue "BindThisValue ( envRec, V )")
                 2.  [9.1.1.3.2 HasThisBinding ( )](#sec-function-environment-records-hasthisbinding "HasThisBinding ( )")
                 3.  [9.1.1.3.3 HasSuperBinding ( )](#sec-function-environment-records-hassuperbinding "HasSuperBinding ( )")
                 4.  [9.1.1.3.4 GetThisBinding ( )](#sec-function-environment-records-getthisbinding "GetThisBinding ( )")
                 5.  [9.1.1.3.5 GetSuperBase ( _envRec_ )](#sec-getsuperbase "GetSuperBase ( envRec )")
             4.  +[9.1.1.4 Global Environment Records](#sec-global-environment-records "Global Environment Records")
                 1.  [9.1.1.4.1 HasBinding ( _N_ )](#sec-global-environment-records-hasbinding-n "HasBinding ( N )")
                 2.  [9.1.1.4.2 CreateMutableBinding ( _N_, _D_ )](#sec-global-environment-records-createmutablebinding-n-d "CreateMutableBinding ( N, D )")
                 3.  [9.1.1.4.3 CreateImmutableBinding ( _N_, _S_ )](#sec-global-environment-records-createimmutablebinding-n-s "CreateImmutableBinding ( N, S )")
                 4.  [9.1.1.4.4 InitializeBinding ( _N_, _V_ )](#sec-global-environment-records-initializebinding-n-v "InitializeBinding ( N, V )")
                 5.  [9.1.1.4.5 SetMutableBinding ( _N_, _V_, _S_ )](#sec-global-environment-records-setmutablebinding-n-v-s "SetMutableBinding ( N, V, S )")
                 6.  [9.1.1.4.6 GetBindingValue ( _N_, _S_ )](#sec-global-environment-records-getbindingvalue-n-s "GetBindingValue ( N, S )")
                 7.  [9.1.1.4.7 DeleteBinding ( _N_ )](#sec-global-environment-records-deletebinding-n "DeleteBinding ( N )")
                 8.  [9.1.1.4.8 HasThisBinding ( )](#sec-global-environment-records-hasthisbinding "HasThisBinding ( )")
                 9.  [9.1.1.4.9 HasSuperBinding ( )](#sec-global-environment-records-hassuperbinding "HasSuperBinding ( )")
                 10.  [9.1.1.4.10 WithBaseObject ( )](#sec-global-environment-records-withbaseobject "WithBaseObject ( )")
                 11.  [9.1.1.4.11 GetThisBinding ( )](#sec-global-environment-records-getthisbinding "GetThisBinding ( )")
                 12.  [9.1.1.4.12 HasLexicalDeclaration ( _envRec_, _N_ )](#sec-haslexicaldeclaration "HasLexicalDeclaration ( envRec, N )")
                 13.  [9.1.1.4.13 HasRestrictedGlobalProperty ( _envRec_, _N_ )](#sec-hasrestrictedglobalproperty "HasRestrictedGlobalProperty ( envRec, N )")
                 14.  [9.1.1.4.14 CanDeclareGlobalVar ( _envRec_, _N_ )](#sec-candeclareglobalvar "CanDeclareGlobalVar ( envRec, N )")
                 15.  [9.1.1.4.15 CanDeclareGlobalFunction ( _envRec_, _N_ )](#sec-candeclareglobalfunction "CanDeclareGlobalFunction ( envRec, N )")
                 16.  [9.1.1.4.16 CreateGlobalVarBinding ( _envRec_, _N_, _D_ )](#sec-createglobalvarbinding "CreateGlobalVarBinding ( envRec, N, D )")
                 17.  [9.1.1.4.17 CreateGlobalFunctionBinding ( _envRec_, _N_, _V_, _D_ )](#sec-createglobalfunctionbinding "CreateGlobalFunctionBinding ( envRec, N, V, D )")
             5.  +[9.1.1.5 Module Environment Records](#sec-module-environment-records "Module Environment Records")
                 1.  [9.1.1.5.1 GetBindingValue ( _N_, _S_ )](#sec-module-environment-records-getbindingvalue-n-s "GetBindingValue ( N, S )")
                 2.  [9.1.1.5.2 DeleteBinding ( _N_ )](#sec-module-environment-records-deletebinding-n "DeleteBinding ( N )")
                 3.  [9.1.1.5.3 HasThisBinding ( )](#sec-module-environment-records-hasthisbinding "HasThisBinding ( )")
                 4.  [9.1.1.5.4 GetThisBinding ( )](#sec-module-environment-records-getthisbinding "GetThisBinding ( )")
                 5.  [9.1.1.5.5 CreateImportBinding ( _envRec_, _N_, _M_, _N2_ )](#sec-createimportbinding "CreateImportBinding ( envRec, N, M, N2 )")
         2.  +[9.1.2 Environment Record Operations](#sec-environment-record-operations "Environment Record Operations")
             1.  [9.1.2.1 GetIdentifierReference ( _env_, _name_, _strict_ )](#sec-getidentifierreference "GetIdentifierReference ( env, name, strict )")
             2.  [9.1.2.2 NewDeclarativeEnvironment ( _E_ )](#sec-newdeclarativeenvironment "NewDeclarativeEnvironment ( E )")
             3.  [9.1.2.3 NewObjectEnvironment ( _O_, _W_, _E_ )](#sec-newobjectenvironment "NewObjectEnvironment ( O, W, E )")
             4.  [9.1.2.4 NewFunctionEnvironment ( _F_, _newTarget_ )](#sec-newfunctionenvironment "NewFunctionEnvironment ( F, newTarget )")
             5.  [9.1.2.5 NewGlobalEnvironment ( _G_, _thisValue_ )](#sec-newglobalenvironment "NewGlobalEnvironment ( G, thisValue )")
             6.  [9.1.2.6 NewModuleEnvironment ( _E_ )](#sec-newmoduleenvironment "NewModuleEnvironment ( E )")
     2.  +[9.2 PrivateEnvironment Records](#sec-privateenvironment-records "PrivateEnvironment Records")
         1.  +[9.2.1 PrivateEnvironment Record Operations](#sec-privateenvironment-record-operations "PrivateEnvironment Record Operations")
             1.  [9.2.1.1 NewPrivateEnvironment ( _outerPrivateEnv_ )](#sec-newprivateenvironment "NewPrivateEnvironment ( outerPrivateEnv )")
             2.  [9.2.1.2 ResolvePrivateIdentifier ( _privateEnv_, _identifier_ )](#sec-resolve-private-identifier "ResolvePrivateIdentifier ( privateEnv, identifier )")
     3.  +[9.3 Realms](#sec-code-realms "Realms")
         1.  [9.3.1 InitializeHostDefinedRealm ( )](#sec-initializehostdefinedrealm "InitializeHostDefinedRealm ( )")
         2.  [9.3.2 CreateIntrinsics ( _realmRec_ )](#sec-createintrinsics "CreateIntrinsics ( realmRec )")
         3.  [9.3.3 SetDefaultGlobalBindings ( _realmRec_ )](#sec-setdefaultglobalbindings "SetDefaultGlobalBindings ( realmRec )")
     4.  +[9.4 Execution Contexts](#sec-execution-contexts "Execution Contexts")
         1.  [9.4.1 GetActiveScriptOrModule ( )](#sec-getactivescriptormodule "GetActiveScriptOrModule ( )")
         2.  [9.4.2 ResolveBinding ( _name_ \[, _env_ \] )](#sec-resolvebinding "ResolveBinding ( name [, env] )")
         3.  [9.4.3 GetThisEnvironment ( )](#sec-getthisenvironment "GetThisEnvironment ( )")
         4.  [9.4.4 ResolveThisBinding ( )](#sec-resolvethisbinding "ResolveThisBinding ( )")
         5.  [9.4.5 GetNewTarget ( )](#sec-getnewtarget "GetNewTarget ( )")
         6.  [9.4.6 GetGlobalObject ( )](#sec-getglobalobject "GetGlobalObject ( )")
     5.  +[9.5 Jobs and Host Operations to Enqueue Jobs](#sec-jobs "Jobs and Host Operations to Enqueue Jobs")
         1.  [9.5.1 JobCallback Records](#sec-jobcallback-records "JobCallback Records")
         2.  [9.5.2 HostMakeJobCallback ( _callback_ )](#sec-hostmakejobcallback "HostMakeJobCallback ( callback )")
         3.  [9.5.3 HostCallJobCallback ( _jobCallback_, _V_, _argumentsList_ )](#sec-hostcalljobcallback "HostCallJobCallback ( jobCallback, V, argumentsList )")
         4.  [9.5.4 HostEnqueueGenericJob ( _job_, _realm_ )](#sec-hostenqueuegenericjob "HostEnqueueGenericJob ( job, realm )")
         5.  [9.5.5 HostEnqueuePromiseJob ( _job_, _realm_ )](#sec-hostenqueuepromisejob "HostEnqueuePromiseJob ( job, realm )")
         6.  [9.5.6 HostEnqueueTimeoutJob ( _timeoutJob_, _realm_, _milliseconds_ )](#sec-hostenqueuetimeoutjob "HostEnqueueTimeoutJob ( timeoutJob, realm, milliseconds )")
     6.  +[9.6 Agents](#sec-agents "Agents")
         1.  [9.6.1 AgentSignifier ( )](#sec-agentsignifier "AgentSignifier ( )")
         2.  [9.6.2 AgentCanSuspend ( )](#sec-agentcansuspend "AgentCanSuspend ( )")
         3.  [9.6.3 IncrementModuleAsyncEvaluationCount ( )](#sec-IncrementModuleAsyncEvaluationCount "IncrementModuleAsyncEvaluationCount ( )")
     7.  [9.7 Agent Clusters](#sec-agent-clusters "Agent Clusters")
     8.  [9.8 Forward Progress](#sec-forward-progress "Forward Progress")
     9.  +[9.9 Processing Model of WeakRef and FinalizationRegistry Targets](#sec-weakref-processing-model "Processing Model of WeakRef and FinalizationRegistry Targets")
         1.  [9.9.1 Objectives](#sec-weakref-invariants "Objectives")
         2.  [9.9.2 Liveness](#sec-liveness "Liveness")
         3.  [9.9.3 Execution](#sec-weakref-execution "Execution")
         4.  +[9.9.4 Host Hooks](#sec-weakref-host-hooks "Host Hooks")
             1.  [9.9.4.1 HostEnqueueFinalizationRegistryCleanupJob ( _finalizationRegistry_ )](#sec-host-cleanup-finalization-registry "HostEnqueueFinalizationRegistryCleanupJob ( finalizationRegistry )")
     10.  [9.10 ClearKeptObjects ( )](#sec-clear-kept-objects "ClearKeptObjects ( )")
     11.  [9.11 AddToKeptObjects ( _value_ )](#sec-addtokeptobjects "AddToKeptObjects ( value )")
     12.  [9.12 CleanupFinalizationRegistry ( _finalizationRegistry_ )](#sec-cleanup-finalization-registry "CleanupFinalizationRegistry ( finalizationRegistry )")
     13.  [9.13 CanBeHeldWeakly ( _v_ )](#sec-canbeheldweakly "CanBeHeldWeakly ( v )")
11.  +[10 Ordinary and Exotic Objects Behaviours](#sec-ordinary-and-exotic-objects-behaviours "Ordinary and Exotic Objects Behaviours")
     1.  +[10.1 Ordinary Object Internal Methods and Internal Slots](#sec-ordinary-object-internal-methods-and-internal-slots "Ordinary Object Internal Methods and Internal Slots")
         1.  +[10.1.1 _\[\[GetPrototypeOf\]\]_ ( )](#sec-ordinary-object-internal-methods-and-internal-slots-getprototypeof "[[GetPrototypeOf]] ( )")
             1.  [10.1.1.1 OrdinaryGetPrototypeOf ( _O_ )](#sec-ordinarygetprototypeof "OrdinaryGetPrototypeOf ( O )")
         2.  +[10.1.2 _\[\[SetPrototypeOf\]\]_ ( _V_ )](#sec-ordinary-object-internal-methods-and-internal-slots-setprototypeof-v "[[SetPrototypeOf]] ( V )")
             1.  [10.1.2.1 OrdinarySetPrototypeOf ( _O_, _V_ )](#sec-ordinarysetprototypeof "OrdinarySetPrototypeOf ( O, V )")
         3.  +[10.1.3 _\[\[IsExtensible\]\]_ ( )](#sec-ordinary-object-internal-methods-and-internal-slots-isextensible "[[IsExtensible]] ( )")
             1.  [10.1.3.1 OrdinaryIsExtensible ( _O_ )](#sec-ordinaryisextensible "OrdinaryIsExtensible ( O )")
         4.  +[10.1.4 _\[\[PreventExtensions\]\]_ ( )](#sec-ordinary-object-internal-methods-and-internal-slots-preventextensions "[[PreventExtensions]] ( )")
             1.  [10.1.4.1 OrdinaryPreventExtensions ( _O_ )](#sec-ordinarypreventextensions "OrdinaryPreventExtensions ( O )")
         5.  +[10.1.5 _\[\[GetOwnProperty\]\]_ ( _P_ )](#sec-ordinary-object-internal-methods-and-internal-slots-getownproperty-p "[[GetOwnProperty]] ( P )")
             1.  [10.1.5.1 OrdinaryGetOwnProperty ( _O_, _P_ )](#sec-ordinarygetownproperty "OrdinaryGetOwnProperty ( O, P )")
         6.  +[10.1.6 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )](#sec-ordinary-object-internal-methods-and-internal-slots-defineownproperty-p-desc "[[DefineOwnProperty]] ( P, Desc )")
             1.  [10.1.6.1 OrdinaryDefineOwnProperty ( _O_, _P_, _Desc_ )](#sec-ordinarydefineownproperty "OrdinaryDefineOwnProperty ( O, P, Desc )")
             2.  [10.1.6.2 IsCompatiblePropertyDescriptor ( _Extensible_, _Desc_, _Current_ )](#sec-iscompatiblepropertydescriptor "IsCompatiblePropertyDescriptor ( Extensible, Desc, Current )")
             3.  [10.1.6.3 ValidateAndApplyPropertyDescriptor ( _O_, _P_, _extensible_, _Desc_, _current_ )](#sec-validateandapplypropertydescriptor "ValidateAndApplyPropertyDescriptor ( O, P, extensible, Desc, current )")
         7.  +[10.1.7 _\[\[HasProperty\]\]_ ( _P_ )](#sec-ordinary-object-internal-methods-and-internal-slots-hasproperty-p "[[HasProperty]] ( P )")
             1.  [10.1.7.1 OrdinaryHasProperty ( _O_, _P_ )](#sec-ordinaryhasproperty "OrdinaryHasProperty ( O, P )")
         8.  +[10.1.8 _\[\[Get\]\]_ ( _P_, _Receiver_ )](#sec-ordinary-object-internal-methods-and-internal-slots-get-p-receiver "[[Get]] ( P, Receiver )")
             1.  [10.1.8.1 OrdinaryGet ( _O_, _P_, _Receiver_ )](#sec-ordinaryget "OrdinaryGet ( O, P, Receiver )")
         9.  +[10.1.9 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )](#sec-ordinary-object-internal-methods-and-internal-slots-set-p-v-receiver "[[Set]] ( P, V, Receiver )")
             1.  [10.1.9.1 OrdinarySet ( _O_, _P_, _V_, _Receiver_ )](#sec-ordinaryset "OrdinarySet ( O, P, V, Receiver )")
             2.  [10.1.9.2 OrdinarySetWithOwnDescriptor ( _O_, _P_, _V_, _Receiver_, _ownDesc_ )](#sec-ordinarysetwithowndescriptor "OrdinarySetWithOwnDescriptor ( O, P, V, Receiver, ownDesc )")
         10.  +[10.1.10 _\[\[Delete\]\]_ ( _P_ )](#sec-ordinary-object-internal-methods-and-internal-slots-delete-p "[[Delete]] ( P )")
              1.  [10.1.10.1 OrdinaryDelete ( _O_, _P_ )](#sec-ordinarydelete "OrdinaryDelete ( O, P )")
         11.  +[10.1.11 _\[\[OwnPropertyKeys\]\]_ ( )](#sec-ordinary-object-internal-methods-and-internal-slots-ownpropertykeys "[[OwnPropertyKeys]] ( )")
              1.  [10.1.11.1 OrdinaryOwnPropertyKeys ( _O_ )](#sec-ordinaryownpropertykeys "OrdinaryOwnPropertyKeys ( O )")
         12.  [10.1.12 OrdinaryObjectCreate ( _proto_ \[, _additionalInternalSlotsList_ \] )](#sec-ordinaryobjectcreate "OrdinaryObjectCreate ( proto [, additionalInternalSlotsList] )")
         13.  [10.1.13 OrdinaryCreateFromConstructor ( _constructor_, _intrinsicDefaultProto_ \[, _internalSlotsList_ \] )](#sec-ordinarycreatefromconstructor "OrdinaryCreateFromConstructor ( constructor, intrinsicDefaultProto [, internalSlotsList] )")
         14.  [10.1.14 GetPrototypeFromConstructor ( _constructor_, _intrinsicDefaultProto_ )](#sec-getprototypefromconstructor "GetPrototypeFromConstructor ( constructor, intrinsicDefaultProto )")
         15.  [10.1.15 RequireInternalSlot ( _O_, _internalSlot_ )](#sec-requireinternalslot "RequireInternalSlot ( O, internalSlot )")
     2.  +[10.2 ECMAScript Function Objects](#sec-ecmascript-function-objects "ECMAScript Function Objects")
         1.  +[10.2.1 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )](#sec-ecmascript-function-objects-call-thisargument-argumentslist "[[Call]] ( thisArgument, argumentsList )")
             1.  [10.2.1.1 PrepareForOrdinaryCall ( _F_, _newTarget_ )](#sec-prepareforordinarycall "PrepareForOrdinaryCall ( F, newTarget )")
             2.  [10.2.1.2 OrdinaryCallBindThis ( _F_, _calleeContext_, _thisArgument_ )](#sec-ordinarycallbindthis "OrdinaryCallBindThis ( F, calleeContext, thisArgument )")
             3.  [10.2.1.3 RS: EvaluateBody](#sec-runtime-semantics-evaluatebody "Runtime Semantics: EvaluateBody")
             4.  [10.2.1.4 OrdinaryCallEvaluateBody ( _F_, _argumentsList_ )](#sec-ordinarycallevaluatebody "OrdinaryCallEvaluateBody ( F, argumentsList )")
         2.  [10.2.2 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )](#sec-ecmascript-function-objects-construct-argumentslist-newtarget "[[Construct]] ( argumentsList, newTarget )")
         3.  [10.2.3 OrdinaryFunctionCreate ( _functionPrototype_, _sourceText_, _ParameterList_, _Body_, _thisMode_, _env_, _privateEnv_ )](#sec-ordinaryfunctioncreate "OrdinaryFunctionCreate ( functionPrototype, sourceText, ParameterList, Body, thisMode, env, privateEnv )")
         4.  +[10.2.4 AddRestrictedFunctionProperties ( _F_, _realm_ )](#sec-addrestrictedfunctionproperties "AddRestrictedFunctionProperties ( F, realm )")
             1.  [10.2.4.1 %ThrowTypeError% ( )](#sec-%throwtypeerror% "%ThrowTypeError% ( )")
         5.  [10.2.5 MakeConstructor ( _F_ \[, _writablePrototype_ \[, _prototype_ \] \] )](#sec-makeconstructor "MakeConstructor ( F [, writablePrototype [, prototype]] )")
         6.  [10.2.6 MakeClassConstructor ( _F_ )](#sec-makeclassconstructor "MakeClassConstructor ( F )")
         7.  [10.2.7 MakeMethod ( _F_, _homeObject_ )](#sec-makemethod "MakeMethod ( F, homeObject )")
         8.  [10.2.8 DefineMethodProperty ( _homeObject_, _key_, _closure_, _enumerable_ )](#sec-definemethodproperty "DefineMethodProperty ( homeObject, key, closure, enumerable )")
         9.  [10.2.9 SetFunctionName ( _F_, _name_ \[, _prefix_ \] )](#sec-setfunctionname "SetFunctionName ( F, name [, prefix] )")
         10.  [10.2.10 SetFunctionLength ( _F_, _length_ )](#sec-setfunctionlength "SetFunctionLength ( F, length )")
         11.  [10.2.11 FunctionDeclarationInstantiation ( _func_, _argumentsList_ )](#sec-functiondeclarationinstantiation "FunctionDeclarationInstantiation ( func, argumentsList )")
     3.  +[10.3 Built-in Function Objects](#sec-built-in-function-objects "Built-in Function Objects")
         1.  [10.3.1 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )](#sec-built-in-function-objects-call-thisargument-argumentslist "[[Call]] ( thisArgument, argumentsList )")
         2.  [10.3.2 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )](#sec-built-in-function-objects-construct-argumentslist-newtarget "[[Construct]] ( argumentsList, newTarget )")
         3.  [10.3.3 BuiltinCallOrConstruct ( _F_, _thisArgument_, _argumentsList_, _newTarget_ )](#sec-builtincallorconstruct "BuiltinCallOrConstruct ( F, thisArgument, argumentsList, newTarget )")
         4.  [10.3.4 CreateBuiltinFunction ( _behaviour_, _length_, _name_, _additionalInternalSlotsList_ \[, _realm_ \[, _prototype_ \[, _prefix_ \[, _async_ \] \] \] \] )](#sec-createbuiltinfunction "CreateBuiltinFunction ( behaviour, length, name, additionalInternalSlotsList [, realm [, prototype [, prefix [, async]]]] )")
     4.  +[10.4 Built-in Exotic Object Internal Methods and Slots](#sec-built-in-exotic-object-internal-methods-and-slots "Built-in Exotic Object Internal Methods and Slots")
         1.  +[10.4.1 Bound Function Exotic Objects](#sec-bound-function-exotic-objects "Bound Function Exotic Objects")
             1.  [10.4.1.1 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )](#sec-bound-function-exotic-objects-call-thisargument-argumentslist "[[Call]] ( thisArgument, argumentsList )")
             2.  [10.4.1.2 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )](#sec-bound-function-exotic-objects-construct-argumentslist-newtarget "[[Construct]] ( argumentsList, newTarget )")
             3.  [10.4.1.3 BoundFunctionCreate ( _targetFunction_, _boundThis_, _boundArgs_ )](#sec-boundfunctioncreate "BoundFunctionCreate ( targetFunction, boundThis, boundArgs )")
         2.  +[10.4.2 Array Exotic Objects](#sec-array-exotic-objects "Array Exotic Objects")
             1.  [10.4.2.1 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )](#sec-array-exotic-objects-defineownproperty-p-desc "[[DefineOwnProperty]] ( P, Desc )")
             2.  [10.4.2.2 ArrayCreate ( _length_ \[, _proto_ \] )](#sec-arraycreate "ArrayCreate ( length [, proto] )")
             3.  [10.4.2.3 ArraySpeciesCreate ( _originalArray_, _length_ )](#sec-arrayspeciescreate "ArraySpeciesCreate ( originalArray, length )")
             4.  [10.4.2.4 ArraySetLength ( _A_, _Desc_ )](#sec-arraysetlength "ArraySetLength ( A, Desc )")
         3.  +[10.4.3 String Exotic Objects](#sec-string-exotic-objects "String Exotic Objects")
             1.  [10.4.3.1 _\[\[GetOwnProperty\]\]_ ( _P_ )](#sec-string-exotic-objects-getownproperty-p "[[GetOwnProperty]] ( P )")
             2.  [10.4.3.2 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )](#sec-string-exotic-objects-defineownproperty-p-desc "[[DefineOwnProperty]] ( P, Desc )")
             3.  [10.4.3.3 _\[\[OwnPropertyKeys\]\]_ ( )](#sec-string-exotic-objects-ownpropertykeys "[[OwnPropertyKeys]] ( )")
             4.  [10.4.3.4 StringCreate ( _value_, _prototype_ )](#sec-stringcreate "StringCreate ( value, prototype )")
             5.  [10.4.3.5 StringGetOwnProperty ( _S_, _P_ )](#sec-stringgetownproperty "StringGetOwnProperty ( S, P )")
         4.  +[10.4.4 Arguments Exotic Objects](#sec-arguments-exotic-objects "Arguments Exotic Objects")
             1.  [10.4.4.1 _\[\[GetOwnProperty\]\]_ ( _P_ )](#sec-arguments-exotic-objects-getownproperty-p "[[GetOwnProperty]] ( P )")
             2.  [10.4.4.2 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )](#sec-arguments-exotic-objects-defineownproperty-p-desc "[[DefineOwnProperty]] ( P, Desc )")
             3.  [10.4.4.3 _\[\[Get\]\]_ ( _P_, _Receiver_ )](#sec-arguments-exotic-objects-get-p-receiver "[[Get]] ( P, Receiver )")
             4.  [10.4.4.4 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )](#sec-arguments-exotic-objects-set-p-v-receiver "[[Set]] ( P, V, Receiver )")
             5.  [10.4.4.5 _\[\[Delete\]\]_ ( _P_ )](#sec-arguments-exotic-objects-delete-p "[[Delete]] ( P )")
             6.  [10.4.4.6 CreateUnmappedArgumentsObject ( _argumentsList_ )](#sec-createunmappedargumentsobject "CreateUnmappedArgumentsObject ( argumentsList )")
             7.  +[10.4.4.7 CreateMappedArgumentsObject ( _func_, _formals_, _argumentsList_, _env_ )](#sec-createmappedargumentsobject "CreateMappedArgumentsObject ( func, formals, argumentsList, env )")
                 1.  [10.4.4.7.1 MakeArgGetter ( _name_, _env_ )](#sec-makearggetter "MakeArgGetter ( name, env )")
                 2.  [10.4.4.7.2 MakeArgSetter ( _name_, _env_ )](#sec-makeargsetter "MakeArgSetter ( name, env )")
         5.  +[10.4.5 TypedArray Exotic Objects](#sec-typedarray-exotic-objects "TypedArray Exotic Objects")
             1.  [10.4.5.1 _\[\[PreventExtensions\]\]_ ( )](#sec-typedarray-preventextensions "[[PreventExtensions]] ( )")
             2.  [10.4.5.2 _\[\[GetOwnProperty\]\]_ ( _P_ )](#sec-typedarray-getownproperty "[[GetOwnProperty]] ( P )")
             3.  [10.4.5.3 _\[\[HasProperty\]\]_ ( _P_ )](#sec-typedarray-hasproperty "[[HasProperty]] ( P )")
             4.  [10.4.5.4 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )](#sec-typedarray-defineownproperty "[[DefineOwnProperty]] ( P, Desc )")
             5.  [10.4.5.5 _\[\[Get\]\]_ ( _P_, _Receiver_ )](#sec-typedarray-get "[[Get]] ( P, Receiver )")
             6.  [10.4.5.6 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )](#sec-typedarray-set "[[Set]] ( P, V, Receiver )")
             7.  [10.4.5.7 _\[\[Delete\]\]_ ( _P_ )](#sec-typedarray-delete "[[Delete]] ( P )")
             8.  [10.4.5.8 _\[\[OwnPropertyKeys\]\]_ ( )](#sec-typedarray-ownpropertykeys "[[OwnPropertyKeys]] ( )")
             9.  [10.4.5.9 TypedArray With Buffer Witness Records](#sec-typedarray-with-buffer-witness-records "TypedArray With Buffer Witness Records")
             10.  [10.4.5.10 MakeTypedArrayWithBufferWitnessRecord ( _obj_, _order_ )](#sec-maketypedarraywithbufferwitnessrecord "MakeTypedArrayWithBufferWitnessRecord ( obj, order )")
             11.  [10.4.5.11 TypedArrayCreate ( _prototype_ )](#sec-typedarraycreate "TypedArrayCreate ( prototype )")
             12.  [10.4.5.12 TypedArrayByteLength ( _taRecord_ )](#sec-typedarraybytelength "TypedArrayByteLength ( taRecord )")
             13.  [10.4.5.13 TypedArrayLength ( _taRecord_ )](#sec-typedarraylength "TypedArrayLength ( taRecord )")
             14.  [10.4.5.14 IsTypedArrayOutOfBounds ( _taRecord_ )](#sec-istypedarrayoutofbounds "IsTypedArrayOutOfBounds ( taRecord )")
             15.  [10.4.5.15 IsTypedArrayFixedLength ( _O_ )](#sec-istypedarrayfixedlength "IsTypedArrayFixedLength ( O )")
             16.  [10.4.5.16 IsValidIntegerIndex ( _O_, _index_ )](#sec-isvalidintegerindex "IsValidIntegerIndex ( O, index )")
             17.  [10.4.5.17 TypedArrayGetElement ( _O_, _index_ )](#sec-typedarraygetelement "TypedArrayGetElement ( O, index )")
             18.  [10.4.5.18 TypedArraySetElement ( _O_, _index_, _value_ )](#sec-typedarraysetelement "TypedArraySetElement ( O, index, value )")
             19.  [10.4.5.19 IsArrayBufferViewOutOfBounds ( _O_ )](#sec-isarraybufferviewoutofbounds "IsArrayBufferViewOutOfBounds ( O )")
         6.  +[10.4.6 Module Namespace Exotic Objects](#sec-module-namespace-exotic-objects "Module Namespace Exotic Objects")
             1.  [10.4.6.1 _\[\[GetPrototypeOf\]\]_ ( )](#sec-module-namespace-exotic-objects-getprototypeof "[[GetPrototypeOf]] ( )")
             2.  [10.4.6.2 _\[\[SetPrototypeOf\]\]_ ( _V_ )](#sec-module-namespace-exotic-objects-setprototypeof-v "[[SetPrototypeOf]] ( V )")
             3.  [10.4.6.3 _\[\[IsExtensible\]\]_ ( )](#sec-module-namespace-exotic-objects-isextensible "[[IsExtensible]] ( )")
             4.  [10.4.6.4 _\[\[PreventExtensions\]\]_ ( )](#sec-module-namespace-exotic-objects-preventextensions "[[PreventExtensions]] ( )")
             5.  [10.4.6.5 _\[\[GetOwnProperty\]\]_ ( _P_ )](#sec-module-namespace-exotic-objects-getownproperty-p "[[GetOwnProperty]] ( P )")
             6.  [10.4.6.6 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )](#sec-module-namespace-exotic-objects-defineownproperty-p-desc "[[DefineOwnProperty]] ( P, Desc )")
             7.  [10.4.6.7 _\[\[HasProperty\]\]_ ( _P_ )](#sec-module-namespace-exotic-objects-hasproperty-p "[[HasProperty]] ( P )")
             8.  [10.4.6.8 _\[\[Get\]\]_ ( _P_, _Receiver_ )](#sec-module-namespace-exotic-objects-get-p-receiver "[[Get]] ( P, Receiver )")
             9.  [10.4.6.9 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )](#sec-module-namespace-exotic-objects-set-p-v-receiver "[[Set]] ( P, V, Receiver )")
             10.  [10.4.6.10 _\[\[Delete\]\]_ ( _P_ )](#sec-module-namespace-exotic-objects-delete-p "[[Delete]] ( P )")
             11.  [10.4.6.11 _\[\[OwnPropertyKeys\]\]_ ( )](#sec-module-namespace-exotic-objects-ownpropertykeys "[[OwnPropertyKeys]] ( )")
             12.  [10.4.6.12 ModuleNamespaceCreate ( _module_, _exports_ )](#sec-modulenamespacecreate "ModuleNamespaceCreate ( module, exports )")
         7.  +[10.4.7 Immutable Prototype Exotic Objects](#sec-immutable-prototype-exotic-objects "Immutable Prototype Exotic Objects")
             1.  [10.4.7.1 _\[\[SetPrototypeOf\]\]_ ( _V_ )](#sec-immutable-prototype-exotic-objects-setprototypeof-v "[[SetPrototypeOf]] ( V )")
             2.  [10.4.7.2 SetImmutablePrototype ( _O_, _V_ )](#sec-set-immutable-prototype "SetImmutablePrototype ( O, V )")
     5.  +[10.5 Proxy Object Internal Methods and Internal Slots](#sec-proxy-object-internal-methods-and-internal-slots "Proxy Object Internal Methods and Internal Slots")
         1.  [10.5.1 _\[\[GetPrototypeOf\]\]_ ( )](#sec-proxy-object-internal-methods-and-internal-slots-getprototypeof "[[GetPrototypeOf]] ( )")
         2.  [10.5.2 _\[\[SetPrototypeOf\]\]_ ( _V_ )](#sec-proxy-object-internal-methods-and-internal-slots-setprototypeof-v "[[SetPrototypeOf]] ( V )")
         3.  [10.5.3 _\[\[IsExtensible\]\]_ ( )](#sec-proxy-object-internal-methods-and-internal-slots-isextensible "[[IsExtensible]] ( )")
         4.  [10.5.4 _\[\[PreventExtensions\]\]_ ( )](#sec-proxy-object-internal-methods-and-internal-slots-preventextensions "[[PreventExtensions]] ( )")
         5.  [10.5.5 _\[\[GetOwnProperty\]\]_ ( _P_ )](#sec-proxy-object-internal-methods-and-internal-slots-getownproperty-p "[[GetOwnProperty]] ( P )")
         6.  [10.5.6 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )](#sec-proxy-object-internal-methods-and-internal-slots-defineownproperty-p-desc "[[DefineOwnProperty]] ( P, Desc )")
         7.  [10.5.7 _\[\[HasProperty\]\]_ ( _P_ )](#sec-proxy-object-internal-methods-and-internal-slots-hasproperty-p "[[HasProperty]] ( P )")
         8.  [10.5.8 _\[\[Get\]\]_ ( _P_, _Receiver_ )](#sec-proxy-object-internal-methods-and-internal-slots-get-p-receiver "[[Get]] ( P, Receiver )")
         9.  [10.5.9 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )](#sec-proxy-object-internal-methods-and-internal-slots-set-p-v-receiver "[[Set]] ( P, V, Receiver )")
         10.  [10.5.10 _\[\[Delete\]\]_ ( _P_ )](#sec-proxy-object-internal-methods-and-internal-slots-delete-p "[[Delete]] ( P )")
         11.  [10.5.11 _\[\[OwnPropertyKeys\]\]_ ( )](#sec-proxy-object-internal-methods-and-internal-slots-ownpropertykeys "[[OwnPropertyKeys]] ( )")
         12.  [10.5.12 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )](#sec-proxy-object-internal-methods-and-internal-slots-call-thisargument-argumentslist "[[Call]] ( thisArgument, argumentsList )")
         13.  [10.5.13 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )](#sec-proxy-object-internal-methods-and-internal-slots-construct-argumentslist-newtarget "[[Construct]] ( argumentsList, newTarget )")
         14.  [10.5.14 ValidateNonRevokedProxy ( _proxy_ )](#sec-validatenonrevokedproxy "ValidateNonRevokedProxy ( proxy )")
         15.  [10.5.15 ProxyCreate ( _target_, _handler_ )](#sec-proxycreate "ProxyCreate ( target, handler )")
12.  +[11 ECMAScript Language: Source Text](#sec-ecmascript-language-source-code "ECMAScript Language: Source Text")
     1.  +[11.1 Source Text](#sec-source-text "Source Text")
         1.  [11.1.1 SS: UTF16EncodeCodePoint ( _cp_ )](#sec-utf16encodecodepoint "Static Semantics: UTF16EncodeCodePoint ( cp )")
         2.  [11.1.2 SS: CodePointsToString ( _text_ )](#sec-codepointstostring "Static Semantics: CodePointsToString ( text )")
         3.  [11.1.3 SS: UTF16SurrogatePairToCodePoint ( _lead_, _trail_ )](#sec-utf16decodesurrogatepair "Static Semantics: UTF16SurrogatePairToCodePoint ( lead, trail )")
         4.  [11.1.4 SS: CodePointAt ( _string_, _position_ )](#sec-codepointat "Static Semantics: CodePointAt ( string, position )")
         5.  [11.1.5 SS: StringToCodePoints ( _string_ )](#sec-stringtocodepoints "Static Semantics: StringToCodePoints ( string )")
         6.  [11.1.6 SS: ParseText ( _sourceText_, _goalSymbol_ )](#sec-parsetext "Static Semantics: ParseText ( sourceText, goalSymbol )")
     2.  +[11.2 Types of Source Code](#sec-types-of-source-code "Types of Source Code")
         1.  [11.2.1 Directive Prologues and the Use Strict Directive](#sec-directive-prologues-and-the-use-strict-directive "Directive Prologues and the Use Strict Directive")
         2.  +[11.2.2 Strict Mode Code](#sec-strict-mode-code "Strict Mode Code")
             1.  [11.2.2.1 SS: IsStrict ( _node_ )](#sec-isstrict "Static Semantics: IsStrict ( node )")
         3.  [11.2.3 Non-ECMAScript Functions](#sec-non-ecmascript-functions "Non-ECMAScript Functions")
13.  +[12 ECMAScript Language: Lexical Grammar](#sec-ecmascript-language-lexical-grammar "ECMAScript Language: Lexical Grammar")
     1.  [12.1 Unicode Format-Control Characters](#sec-unicode-format-control-characters "Unicode Format-Control Characters")
     2.  [12.2 White Space](#sec-white-space "White Space")
     3.  [12.3 Line Terminators](#sec-line-terminators "Line Terminators")
     4.  [12.4 Comments](#sec-comments "Comments")
     5.  [12.5 Hashbang Comments](#sec-hashbang "Hashbang Comments")
     6.  [12.6 Tokens](#sec-tokens "Tokens")
     7.  +[12.7 Names and Keywords](#sec-names-and-keywords "Names and Keywords")
         1.  +[12.7.1 Identifier Names](#sec-identifier-names "Identifier Names")
             1.  [12.7.1.1 SS: Early Errors](#sec-identifier-names-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [12.7.1.2 SS: IdentifierCodePoints](#sec-identifiercodepoints "Static Semantics: IdentifierCodePoints")
             3.  [12.7.1.3 SS: IdentifierCodePoint](#sec-identifiercodepoint "Static Semantics: IdentifierCodePoint")
         2.  [12.7.2 Keywords and Reserved Words](#sec-keywords-and-reserved-words "Keywords and Reserved Words")
     8.  [12.8 Punctuators](#sec-punctuators "Punctuators")
     9.  +[12.9 Literals](#sec-ecmascript-language-lexical-grammar-literals "Literals")
         1.  [12.9.1 Null Literals](#sec-null-literals "Null Literals")
         2.  [12.9.2 Boolean Literals](#sec-boolean-literals "Boolean Literals")
         3.  +[12.9.3 Numeric Literals](#sec-literals-numeric-literals "Numeric Literals")
             1.  [12.9.3.1 SS: Early Errors](#sec-numeric-literals-early-errors "Static Semantics: Early Errors")
             2.  [12.9.3.2 SS: MV](#sec-static-semantics-mv "Static Semantics: MV")
             3.  [12.9.3.3 SS: NumericValue](#sec-numericvalue "Static Semantics: NumericValue")
         4.  +[12.9.4 String Literals](#sec-literals-string-literals "String Literals")
             1.  [12.9.4.1 SS: Early Errors](#sec-string-literals-early-errors "Static Semantics: Early Errors")
             2.  [12.9.4.2 SS: SV](#sec-static-semantics-sv "Static Semantics: SV")
             3.  [12.9.4.3 SS: MV](#sec-string-literals-static-semantics-mv "Static Semantics: MV")
         5.  +[12.9.5 Regular Expression Literals](#sec-literals-regular-expression-literals "Regular Expression Literals")
             1.  [12.9.5.1 SS: BodyText](#sec-static-semantics-bodytext "Static Semantics: BodyText")
             2.  [12.9.5.2 SS: FlagText](#sec-static-semantics-flagtext "Static Semantics: FlagText")
         6.  +[12.9.6 Template Literal Lexical Components](#sec-template-literal-lexical-components "Template Literal Lexical Components")
             1.  [12.9.6.1 SS: TV](#sec-static-semantics-tv "Static Semantics: TV")
             2.  [12.9.6.2 SS: TRV](#sec-static-semantics-trv "Static Semantics: TRV")
     10.  +[12.10 Automatic Semicolon Insertion](#sec-automatic-semicolon-insertion "Automatic Semicolon Insertion")
          1.  [12.10.1 Rules of Automatic Semicolon Insertion](#sec-rules-of-automatic-semicolon-insertion "Rules of Automatic Semicolon Insertion")
          2.  [12.10.2 Examples of Automatic Semicolon Insertion](#sec-examples-of-automatic-semicolon-insertion "Examples of Automatic Semicolon Insertion")
          3.  +[12.10.3 Interesting Cases of Automatic Semicolon Insertion](#sec-interesting-cases-of-automatic-semicolon-insertion "Interesting Cases of Automatic Semicolon Insertion")
              1.  [12.10.3.1 Interesting Cases of Automatic Semicolon Insertion in Statement Lists](#sec-asi-interesting-cases-in-statement-lists "Interesting Cases of Automatic Semicolon Insertion in Statement Lists")
              2.  +[12.10.3.2 Cases of Automatic Semicolon Insertion and “\[no LineTerminator here\]”](#sec-asi-cases-with-no-lineterminator-here "Cases of Automatic Semicolon Insertion and “[no LineTerminator here]”")
                  1.  [12.10.3.2.1 List of Grammar Productions with Optional Operands and “\[no LineTerminator here\]”](#sec-no-lineterminator-here-automatic-semicolon-insertion-list "List of Grammar Productions with Optional Operands and “[no LineTerminator here]”")
14.  +[13 ECMAScript Language: Expressions](#sec-ecmascript-language-expressions "ECMAScript Language: Expressions")
     1.  +[13.1 Identifiers](#sec-identifiers "Identifiers")
         1.  [13.1.1 SS: Early Errors](#sec-identifiers-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [13.1.2 SS: StringValue](#sec-static-semantics-stringvalue "Static Semantics: StringValue")
         3.  [13.1.3 RS: Evaluation](#sec-identifiers-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     2.  +[13.2 Primary Expression](#sec-primary-expression "Primary Expression")
         1.  +[13.2.1 The `this` Keyword](#sec-this-keyword "The this Keyword")
             1.  [13.2.1.1 RS: Evaluation](#sec-this-keyword-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         2.  [13.2.2 Identifier Reference](#sec-identifier-reference "Identifier Reference")
         3.  +[13.2.3 Literals](#sec-primary-expression-literals "Literals")
             1.  [13.2.3.1 RS: Evaluation](#sec-literals-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         4.  +[13.2.4 Array Initializer](#sec-array-initializer "Array Initializer")
             1.  [13.2.4.1 RS: ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation "Runtime Semantics: ArrayAccumulation")
             2.  [13.2.4.2 RS: Evaluation](#sec-array-initializer-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         5.  +[13.2.5 Object Initializer](#sec-object-initializer "Object Initializer")
             1.  [13.2.5.1 SS: Early Errors](#sec-object-initializer-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [13.2.5.2 SS: IsComputedPropertyKey](#sec-static-semantics-iscomputedpropertykey "Static Semantics: IsComputedPropertyKey")
             3.  [13.2.5.3 SS: PropertyNameList](#sec-static-semantics-propertynamelist "Static Semantics: PropertyNameList")
             4.  [13.2.5.4 RS: Evaluation](#sec-object-initializer-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
             5.  [13.2.5.5 RS: PropertyDefinitionEvaluation](#sec-runtime-semantics-propertydefinitionevaluation "Runtime Semantics: PropertyDefinitionEvaluation")
         6.  [13.2.6 Function Defining Expressions](#sec-function-defining-expressions "Function Defining Expressions")
         7.  +[13.2.7 Regular Expression Literals](#sec-primary-expression-regular-expression-literals "Regular Expression Literals")
             1.  [13.2.7.1 SS: Early Errors](#sec-primary-expression-regular-expression-literals-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [13.2.7.2 SS: IsValidRegularExpressionLiteral ( _literal_ )](#sec-isvalidregularexpressionliteral "Static Semantics: IsValidRegularExpressionLiteral ( literal )")
             3.  [13.2.7.3 RS: Evaluation](#sec-regular-expression-literals-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         8.  +[13.2.8 Template Literals](#sec-template-literals "Template Literals")
             1.  [13.2.8.1 SS: Early Errors](#sec-static-semantics-template-early-errors "Static Semantics: Early Errors")
             2.  [13.2.8.2 SS: TemplateStrings](#sec-static-semantics-templatestrings "Static Semantics: TemplateStrings")
             3.  [13.2.8.3 SS: TemplateString ( _templateToken_, _raw_ )](#sec-templatestring "Static Semantics: TemplateString ( templateToken, raw )")
             4.  [13.2.8.4 GetTemplateObject ( _templateLiteral_ )](#sec-gettemplateobject "GetTemplateObject ( templateLiteral )")
             5.  [13.2.8.5 RS: SubstitutionEvaluation](#sec-runtime-semantics-substitutionevaluation "Runtime Semantics: SubstitutionEvaluation")
             6.  [13.2.8.6 RS: Evaluation](#sec-template-literals-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         9.  +[13.2.9 The Grouping Operator](#sec-grouping-operator "The Grouping Operator")
             1.  [13.2.9.1 SS: Early Errors](#sec-grouping-operator-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [13.2.9.2 RS: Evaluation](#sec-grouping-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     3.  +[13.3 Left-Hand-Side Expressions](#sec-left-hand-side-expressions "Left-Hand-Side Expressions")
         1.  +[13.3.1 Static Semantics](#sec-static-semantics "Static Semantics")
             1.  [13.3.1.1 SS: Early Errors](#sec-left-hand-side-expressions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  +[13.3.2 Property Accessors](#sec-property-accessors "Property Accessors")
             1.  [13.3.2.1 RS: Evaluation](#sec-property-accessors-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         3.  [13.3.3 EvaluatePropertyAccessWithExpressionKey ( _baseValue_, _expression_, _strict_ )](#sec-evaluate-property-access-with-expression-key "EvaluatePropertyAccessWithExpressionKey ( baseValue, expression, strict )")
         4.  [13.3.4 EvaluatePropertyAccessWithIdentifierKey ( _baseValue_, _identifierName_, _strict_ )](#sec-evaluate-property-access-with-identifier-key "EvaluatePropertyAccessWithIdentifierKey ( baseValue, identifierName, strict )")
         5.  +[13.3.5 The `new` Operator](#sec-new-operator "The new Operator")
             1.  +[13.3.5.1 RS: Evaluation](#sec-new-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
                 1.  [13.3.5.1.1 EvaluateNew ( _constructExpr_, _arguments_ )](#sec-evaluatenew "EvaluateNew ( constructExpr, arguments )")
         6.  +[13.3.6 Function Calls](#sec-function-calls "Function Calls")
             1.  [13.3.6.1 RS: Evaluation](#sec-function-calls-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
             2.  [13.3.6.2 EvaluateCall ( _func_, _ref_, _arguments_, _tailPosition_ )](#sec-evaluatecall "EvaluateCall ( func, ref, arguments, tailPosition )")
         7.  +[13.3.7 The `super` Keyword](#sec-super-keyword "The super Keyword")
             1.  [13.3.7.1 RS: Evaluation](#sec-super-keyword-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
             2.  [13.3.7.2 GetSuperConstructor ( )](#sec-getsuperconstructor "GetSuperConstructor ( )")
             3.  [13.3.7.3 MakeSuperPropertyReference ( _actualThis_, _propertyKey_, _strict_ )](#sec-makesuperpropertyreference "MakeSuperPropertyReference ( actualThis, propertyKey, strict )")
         8.  +[13.3.8 Argument Lists](#sec-argument-lists "Argument Lists")
             1.  [13.3.8.1 RS: ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation "Runtime Semantics: ArgumentListEvaluation")
         9.  +[13.3.9 Optional Chains](#sec-optional-chains "Optional Chains")
             1.  [13.3.9.1 RS: Evaluation](#sec-optional-chaining-evaluation "Runtime Semantics: Evaluation")
             2.  [13.3.9.2 RS: ChainEvaluation](#sec-optional-chaining-chain-evaluation "Runtime Semantics: ChainEvaluation")
         10.  +[13.3.10 Import Calls](#sec-import-calls "Import Calls")
              1.  [13.3.10.1 RS: Evaluation](#sec-import-call-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
              2.  [13.3.10.2 EvaluateImportCall ( _specifierExpression_ \[, _optionsExpression_ \] )](#sec-evaluate-import-call "EvaluateImportCall ( specifierExpression [, optionsExpression] )")
              3.  [13.3.10.3 ContinueDynamicImport ( _promiseCapability_, _moduleCompletion_ )](#sec-ContinueDynamicImport "ContinueDynamicImport ( promiseCapability, moduleCompletion )")
         11.  +[13.3.11 Tagged Templates](#sec-tagged-templates "Tagged Templates")
              1.  [13.3.11.1 RS: Evaluation](#sec-tagged-templates-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         12.  +[13.3.12 Meta Properties](#sec-meta-properties "Meta Properties")
              1.  +[13.3.12.1 RS: Evaluation](#sec-meta-properties-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
                  1.  [13.3.12.1.1 HostGetImportMetaProperties ( _moduleRecord_ )](#sec-hostgetimportmetaproperties "HostGetImportMetaProperties ( moduleRecord )")
                  2.  [13.3.12.1.2 HostFinalizeImportMeta ( _importMeta_, _moduleRecord_ )](#sec-hostfinalizeimportmeta "HostFinalizeImportMeta ( importMeta, moduleRecord )")
     4.  +[13.4 Update Expressions](#sec-update-expressions "Update Expressions")
         1.  [13.4.1 SS: Early Errors](#sec-update-expressions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  +[13.4.2 Postfix Increment Operator](#sec-postfix-increment-operator "Postfix Increment Operator")
             1.  [13.4.2.1 RS: Evaluation](#sec-postfix-increment-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         3.  +[13.4.3 Postfix Decrement Operator](#sec-postfix-decrement-operator "Postfix Decrement Operator")
             1.  [13.4.3.1 RS: Evaluation](#sec-postfix-decrement-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         4.  +[13.4.4 Prefix Increment Operator](#sec-prefix-increment-operator "Prefix Increment Operator")
             1.  [13.4.4.1 RS: Evaluation](#sec-prefix-increment-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         5.  +[13.4.5 Prefix Decrement Operator](#sec-prefix-decrement-operator "Prefix Decrement Operator")
             1.  [13.4.5.1 RS: Evaluation](#sec-prefix-decrement-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     5.  +[13.5 Unary Operators](#sec-unary-operators "Unary Operators")
         1.  +[13.5.1 The `delete` Operator](#sec-delete-operator "The delete Operator")
             1.  [13.5.1.1 SS: Early Errors](#sec-delete-operator-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [13.5.1.2 RS: Evaluation](#sec-delete-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         2.  +[13.5.2 The `void` Operator](#sec-void-operator "The void Operator")
             1.  [13.5.2.1 RS: Evaluation](#sec-void-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         3.  +[13.5.3 The `typeof` Operator](#sec-typeof-operator "The typeof Operator")
             1.  [13.5.3.1 RS: Evaluation](#sec-typeof-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         4.  +[13.5.4 Unary `+` Operator](#sec-unary-plus-operator "Unary + Operator")
             1.  [13.5.4.1 RS: Evaluation](#sec-unary-plus-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         5.  +[13.5.5 Unary `-` Operator](#sec-unary-minus-operator "Unary - Operator")
             1.  [13.5.5.1 RS: Evaluation](#sec-unary-minus-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         6.  +[13.5.6 Bitwise NOT Operator ( `~` )](#sec-bitwise-not-operator "Bitwise NOT Operator ( ~ )")
             1.  [13.5.6.1 RS: Evaluation](#sec-bitwise-not-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         7.  +[13.5.7 Logical NOT Operator ( `!` )](#sec-logical-not-operator "Logical NOT Operator ( ! )")
             1.  [13.5.7.1 RS: Evaluation](#sec-logical-not-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     6.  +[13.6 Exponentiation Operator](#sec-exp-operator "Exponentiation Operator")
         1.  [13.6.1 RS: Evaluation](#sec-exp-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     7.  +[13.7 Multiplicative Operators](#sec-multiplicative-operators "Multiplicative Operators")
         1.  [13.7.1 RS: Evaluation](#sec-multiplicative-operators-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     8.  +[13.8 Additive Operators](#sec-additive-operators "Additive Operators")
         1.  +[13.8.1 The Addition Operator ( `+` )](#sec-addition-operator-plus "The Addition Operator ( + )")
             1.  [13.8.1.1 RS: Evaluation](#sec-addition-operator-plus-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         2.  +[13.8.2 The Subtraction Operator ( `-` )](#sec-subtraction-operator-minus "The Subtraction Operator ( - )")
             1.  [13.8.2.1 RS: Evaluation](#sec-subtraction-operator-minus-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     9.  +[13.9 Bitwise Shift Operators](#sec-bitwise-shift-operators "Bitwise Shift Operators")
         1.  +[13.9.1 The Left Shift Operator ( `<<` )](#sec-left-shift-operator "The Left Shift Operator ( << )")
             1.  [13.9.1.1 RS: Evaluation](#sec-left-shift-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         2.  +[13.9.2 The Signed Right Shift Operator ( `>>` )](#sec-signed-right-shift-operator "The Signed Right Shift Operator ( >> )")
             1.  [13.9.2.1 RS: Evaluation](#sec-signed-right-shift-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         3.  +[13.9.3 The Unsigned Right Shift Operator ( `>>>` )](#sec-unsigned-right-shift-operator "The Unsigned Right Shift Operator ( >>> )")
             1.  [13.9.3.1 RS: Evaluation](#sec-unsigned-right-shift-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     10.  +[13.10 Relational Operators](#sec-relational-operators "Relational Operators")
          1.  [13.10.1 RS: Evaluation](#sec-relational-operators-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
          2.  [13.10.2 InstanceofOperator ( _V_, _target_ )](#sec-instanceofoperator "InstanceofOperator ( V, target )")
     11.  +[13.11 Equality Operators](#sec-equality-operators "Equality Operators")
          1.  [13.11.1 RS: Evaluation](#sec-equality-operators-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     12.  +[13.12 Binary Bitwise Operators](#sec-binary-bitwise-operators "Binary Bitwise Operators")
          1.  [13.12.1 RS: Evaluation](#sec-binary-bitwise-operators-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     13.  +[13.13 Binary Logical Operators](#sec-binary-logical-operators "Binary Logical Operators")
          1.  [13.13.1 RS: Evaluation](#sec-binary-logical-operators-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     14.  +[13.14 Conditional Operator ( `? :` )](#sec-conditional-operator "Conditional Operator ( ? : )")
          1.  [13.14.1 RS: Evaluation](#sec-conditional-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     15.  +[13.15 Assignment Operators](#sec-assignment-operators "Assignment Operators")
          1.  [13.15.1 SS: Early Errors](#sec-assignment-operators-static-semantics-early-errors "Static Semantics: Early Errors")
          2.  [13.15.2 RS: Evaluation](#sec-assignment-operators-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
          3.  [13.15.3 ApplyStringOrNumericBinaryOperator ( _lVal_, _opText_, _rVal_ )](#sec-applystringornumericbinaryoperator "ApplyStringOrNumericBinaryOperator ( lVal, opText, rVal )")
          4.  [13.15.4 EvaluateStringOrNumericBinaryExpression ( _leftOperand_, _opText_, _rightOperand_ )](#sec-evaluatestringornumericbinaryexpression "EvaluateStringOrNumericBinaryExpression ( leftOperand, opText, rightOperand )")
          5.  +[13.15.5 Destructuring Assignment](#sec-destructuring-assignment "Destructuring Assignment")
              1.  [13.15.5.1 SS: Early Errors](#sec-destructuring-assignment-static-semantics-early-errors "Static Semantics: Early Errors")
              2.  [13.15.5.2 RS: DestructuringAssignmentEvaluation](#sec-runtime-semantics-destructuringassignmentevaluation "Runtime Semantics: DestructuringAssignmentEvaluation")
              3.  [13.15.5.3 RS: PropertyDestructuringAssignmentEvaluation](#sec-runtime-semantics-propertydestructuringassignmentevaluation "Runtime Semantics: PropertyDestructuringAssignmentEvaluation")
              4.  [13.15.5.4 RS: RestDestructuringAssignmentEvaluation](#sec-runtime-semantics-restdestructuringassignmentevaluation "Runtime Semantics: RestDestructuringAssignmentEvaluation")
              5.  [13.15.5.5 RS: IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation "Runtime Semantics: IteratorDestructuringAssignmentEvaluation")
              6.  [13.15.5.6 RS: KeyedDestructuringAssignmentEvaluation](#sec-runtime-semantics-keyeddestructuringassignmentevaluation "Runtime Semantics: KeyedDestructuringAssignmentEvaluation")
     16.  +[13.16 Comma Operator ( `,` )](#sec-comma-operator "Comma Operator ( , )")
          1.  [13.16.1 RS: Evaluation](#sec-comma-operator-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
15.  +[14 ECMAScript Language: Statements and Declarations](#sec-ecmascript-language-statements-and-declarations "ECMAScript Language: Statements and Declarations")
     1.  +[14.1 Statement Semantics](#sec-statement-semantics "Statement Semantics")
         1.  [14.1.1 RS: Evaluation](#sec-statement-semantics-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     2.  +[14.2 Block](#sec-block "Block")
         1.  [14.2.1 SS: Early Errors](#sec-block-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [14.2.2 RS: Evaluation](#sec-block-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         3.  [14.2.3 BlockDeclarationInstantiation ( _code_, _env_ )](#sec-blockdeclarationinstantiation "BlockDeclarationInstantiation ( code, env )")
     3.  +[14.3 Declarations and the Variable Statement](#sec-declarations-and-the-variable-statement "Declarations and the Variable Statement")
         1.  +[14.3.1 Let and Const Declarations](#sec-let-and-const-declarations "Let and Const Declarations")
             1.  [14.3.1.1 SS: Early Errors](#sec-let-and-const-declarations-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [14.3.1.2 RS: Evaluation](#sec-let-and-const-declarations-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         2.  +[14.3.2 Variable Statement](#sec-variable-statement "Variable Statement")
             1.  [14.3.2.1 RS: Evaluation](#sec-variable-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         3.  +[14.3.3 Destructuring Binding Patterns](#sec-destructuring-binding-patterns "Destructuring Binding Patterns")
             1.  [14.3.3.1 RS: PropertyBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-propertybindinginitialization "Runtime Semantics: PropertyBindingInitialization")
             2.  [14.3.3.2 RS: RestBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-restbindinginitialization "Runtime Semantics: RestBindingInitialization")
             3.  [14.3.3.3 RS: KeyedBindingInitialization](#sec-runtime-semantics-keyedbindinginitialization "Runtime Semantics: KeyedBindingInitialization")
     4.  +[14.4 Empty Statement](#sec-empty-statement "Empty Statement")
         1.  [14.4.1 RS: Evaluation](#sec-empty-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     5.  +[14.5 Expression Statement](#sec-expression-statement "Expression Statement")
         1.  [14.5.1 RS: Evaluation](#sec-expression-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     6.  +[14.6 The `if` Statement](#sec-if-statement "The if Statement")
         1.  [14.6.1 SS: Early Errors](#sec-if-statement-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [14.6.2 RS: Evaluation](#sec-if-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     7.  +[14.7 Iteration Statements](#sec-iteration-statements "Iteration Statements")
         1.  +[14.7.1 Semantics](#sec-iteration-statements-semantics "Semantics")
             1.  [14.7.1.1 LoopContinues ( _completion_, _labelSet_ )](#sec-loopcontinues "LoopContinues ( completion, labelSet )")
             2.  [14.7.1.2 RS: LoopEvaluation](#sec-runtime-semantics-loopevaluation "Runtime Semantics: LoopEvaluation")
         2.  +[14.7.2 The `do`\-`while` Statement](#sec-do-while-statement "The do-while Statement")
             1.  [14.7.2.1 SS: Early Errors](#sec-do-while-statement-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [14.7.2.2 RS: DoWhileLoopEvaluation](#sec-runtime-semantics-dowhileloopevaluation "Runtime Semantics: DoWhileLoopEvaluation")
         3.  +[14.7.3 The `while` Statement](#sec-while-statement "The while Statement")
             1.  [14.7.3.1 SS: Early Errors](#sec-while-statement-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [14.7.3.2 RS: WhileLoopEvaluation](#sec-runtime-semantics-whileloopevaluation "Runtime Semantics: WhileLoopEvaluation")
         4.  +[14.7.4 The `for` Statement](#sec-for-statement "The for Statement")
             1.  [14.7.4.1 SS: Early Errors](#sec-for-statement-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [14.7.4.2 RS: ForLoopEvaluation](#sec-runtime-semantics-forloopevaluation "Runtime Semantics: ForLoopEvaluation")
             3.  [14.7.4.3 ForBodyEvaluation ( _test_, _increment_, _stmt_, _perIterationBindings_, _labelSet_ )](#sec-forbodyevaluation "ForBodyEvaluation ( test, increment, stmt, perIterationBindings, labelSet )")
             4.  [14.7.4.4 CreatePerIterationEnvironment ( _perIterationBindings_ )](#sec-createperiterationenvironment "CreatePerIterationEnvironment ( perIterationBindings )")
         5.  +[14.7.5 The `for`\-`in`, `for`\-`of`, and `for`\-`await`\-`of` Statements](#sec-for-in-and-for-of-statements "The for-in, for-of, and for-await-of Statements")
             1.  [14.7.5.1 SS: Early Errors](#sec-for-in-and-for-of-statements-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [14.7.5.2 SS: IsDestructuring](#sec-static-semantics-isdestructuring "Static Semantics: IsDestructuring")
             3.  [14.7.5.3 RS: ForDeclarationBindingInitialization](#sec-runtime-semantics-fordeclarationbindinginitialization "Runtime Semantics: ForDeclarationBindingInitialization")
             4.  [14.7.5.4 RS: ForDeclarationBindingInstantiation](#sec-runtime-semantics-fordeclarationbindinginstantiation "Runtime Semantics: ForDeclarationBindingInstantiation")
             5.  [14.7.5.5 RS: ForInOfLoopEvaluation](#sec-runtime-semantics-forinofloopevaluation "Runtime Semantics: ForInOfLoopEvaluation")
             6.  [14.7.5.6 ForIn/OfHeadEvaluation ( _uninitializedBoundNames_, _expr_, _iterationKind_ )](#sec-runtime-semantics-forinofheadevaluation "ForIn/OfHeadEvaluation ( uninitializedBoundNames, expr, iterationKind )")
             7.  [14.7.5.7 ForIn/OfBodyEvaluation ( _lhs_, _stmt_, _iteratorRecord_, _iterationKind_, _lhsKind_, _labelSet_ \[, _iteratorKind_ \] )](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset "ForIn/OfBodyEvaluation ( lhs, stmt, iteratorRecord, iterationKind, lhsKind, labelSet [, iteratorKind] )")
             8.  [14.7.5.8 RS: Evaluation](#sec-for-in-and-for-of-statements-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
             9.  [14.7.5.9 EnumerateObjectProperties ( _O_ )](#sec-enumerate-object-properties "EnumerateObjectProperties ( O )")
             10.  +[14.7.5.10 For-In Iterator Objects](#sec-for-in-iterator-objects "For-In Iterator Objects")
                  1.  [14.7.5.10.1 CreateForInIterator ( _object_ )](#sec-createforiniterator "CreateForInIterator ( object )")
                  2.  +[14.7.5.10.2 The %ForInIteratorPrototype% Object](#sec-%foriniteratorprototype%-object "The %ForInIteratorPrototype% Object")
                      1.  [14.7.5.10.2.1 %ForInIteratorPrototype%.next ( )](#sec-%foriniteratorprototype%.next "%ForInIteratorPrototype%.next ( )")
                  3.  [14.7.5.10.3 Properties of For-In Iterator Instances](#sec-properties-of-for-in-iterator-instances "Properties of For-In Iterator Instances")
     8.  +[14.8 The `continue` Statement](#sec-continue-statement "The continue Statement")
         1.  [14.8.1 SS: Early Errors](#sec-continue-statement-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [14.8.2 RS: Evaluation](#sec-continue-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     9.  +[14.9 The `break` Statement](#sec-break-statement "The break Statement")
         1.  [14.9.1 SS: Early Errors](#sec-break-statement-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [14.9.2 RS: Evaluation](#sec-break-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     10.  +[14.10 The `return` Statement](#sec-return-statement "The return Statement")
          1.  [14.10.1 RS: Evaluation](#sec-return-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     11.  +[14.11 The `with` Statement](#sec-with-statement "The with Statement")
          1.  [14.11.1 SS: Early Errors](#sec-with-statement-static-semantics-early-errors "Static Semantics: Early Errors")
          2.  [14.11.2 RS: Evaluation](#sec-with-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     12.  +[14.12 The `switch` Statement](#sec-switch-statement "The switch Statement")
          1.  [14.12.1 SS: Early Errors](#sec-switch-statement-static-semantics-early-errors "Static Semantics: Early Errors")
          2.  [14.12.2 RS: CaseBlockEvaluation](#sec-runtime-semantics-caseblockevaluation "Runtime Semantics: CaseBlockEvaluation")
          3.  [14.12.3 CaseClauseIsSelected ( _C_, _input_ )](#sec-runtime-semantics-caseclauseisselected "CaseClauseIsSelected ( C, input )")
          4.  [14.12.4 RS: Evaluation](#sec-switch-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     13.  +[14.13 Labelled Statements](#sec-labelled-statements "Labelled Statements")
          1.  [14.13.1 SS: Early Errors](#sec-labelled-statements-static-semantics-early-errors "Static Semantics: Early Errors")
          2.  [14.13.2 SS: IsLabelledFunction ( _stmt_ )](#sec-islabelledfunction "Static Semantics: IsLabelledFunction ( stmt )")
          3.  [14.13.3 RS: Evaluation](#sec-labelled-statements-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
          4.  [14.13.4 RS: LabelledEvaluation](#sec-runtime-semantics-labelledevaluation "Runtime Semantics: LabelledEvaluation")
     14.  +[14.14 The `throw` Statement](#sec-throw-statement "The throw Statement")
          1.  [14.14.1 RS: Evaluation](#sec-throw-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     15.  +[14.15 The `try` Statement](#sec-try-statement "The try Statement")
          1.  [14.15.1 SS: Early Errors](#sec-try-statement-static-semantics-early-errors "Static Semantics: Early Errors")
          2.  [14.15.2 RS: CatchClauseEvaluation](#sec-runtime-semantics-catchclauseevaluation "Runtime Semantics: CatchClauseEvaluation")
          3.  [14.15.3 RS: Evaluation](#sec-try-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     16.  +[14.16 The `debugger` Statement](#sec-debugger-statement "The debugger Statement")
          1.  [14.16.1 RS: Evaluation](#sec-debugger-statement-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
16.  +[15 ECMAScript Language: Functions and Classes](#sec-ecmascript-language-functions-and-classes "ECMAScript Language: Functions and Classes")
     1.  +[15.1 Parameter Lists](#sec-parameter-lists "Parameter Lists")
         1.  [15.1.1 SS: Early Errors](#sec-parameter-lists-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.1.2 SS: ContainsExpression](#sec-static-semantics-containsexpression "Static Semantics: ContainsExpression")
         3.  [15.1.3 SS: IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist "Static Semantics: IsSimpleParameterList")
         4.  [15.1.4 SS: HasInitializer](#sec-static-semantics-hasinitializer "Static Semantics: HasInitializer")
         5.  [15.1.5 SS: ExpectedArgumentCount](#sec-static-semantics-expectedargumentcount "Static Semantics: ExpectedArgumentCount")
     2.  +[15.2 Function Definitions](#sec-function-definitions "Function Definitions")
         1.  [15.2.1 SS: Early Errors](#sec-function-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.2.2 SS: FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict "Static Semantics: FunctionBodyContainsUseStrict")
         3.  [15.2.3 RS: EvaluateFunctionBody](#sec-runtime-semantics-evaluatefunctionbody "Runtime Semantics: EvaluateFunctionBody")
         4.  [15.2.4 RS: InstantiateOrdinaryFunctionObject](#sec-runtime-semantics-instantiateordinaryfunctionobject "Runtime Semantics: InstantiateOrdinaryFunctionObject")
         5.  [15.2.5 RS: InstantiateOrdinaryFunctionExpression](#sec-runtime-semantics-instantiateordinaryfunctionexpression "Runtime Semantics: InstantiateOrdinaryFunctionExpression")
         6.  [15.2.6 RS: Evaluation](#sec-function-definitions-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     3.  +[15.3 Arrow Function Definitions](#sec-arrow-function-definitions "Arrow Function Definitions")
         1.  [15.3.1 SS: Early Errors](#sec-arrow-function-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.3.2 SS: ConciseBodyContainsUseStrict](#sec-static-semantics-concisebodycontainsusestrict "Static Semantics: ConciseBodyContainsUseStrict")
         3.  [15.3.3 RS: EvaluateConciseBody](#sec-runtime-semantics-evaluateconcisebody "Runtime Semantics: EvaluateConciseBody")
         4.  [15.3.4 RS: InstantiateArrowFunctionExpression](#sec-runtime-semantics-instantiatearrowfunctionexpression "Runtime Semantics: InstantiateArrowFunctionExpression")
         5.  [15.3.5 RS: Evaluation](#sec-arrow-function-definitions-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     4.  +[15.4 Method Definitions](#sec-method-definitions "Method Definitions")
         1.  [15.4.1 SS: Early Errors](#sec-method-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.4.2 SS: HasDirectSuper](#sec-static-semantics-hasdirectsuper "Static Semantics: HasDirectSuper")
         3.  [15.4.3 SS: SpecialMethod](#sec-static-semantics-specialmethod "Static Semantics: SpecialMethod")
         4.  [15.4.4 RS: DefineMethod](#sec-runtime-semantics-definemethod "Runtime Semantics: DefineMethod")
         5.  [15.4.5 RS: MethodDefinitionEvaluation](#sec-runtime-semantics-methoddefinitionevaluation "Runtime Semantics: MethodDefinitionEvaluation")
     5.  +[15.5 Generator Function Definitions](#sec-generator-function-definitions "Generator Function Definitions")
         1.  [15.5.1 SS: Early Errors](#sec-generator-function-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.5.2 RS: EvaluateGeneratorBody](#sec-runtime-semantics-evaluategeneratorbody "Runtime Semantics: EvaluateGeneratorBody")
         3.  [15.5.3 RS: InstantiateGeneratorFunctionObject](#sec-runtime-semantics-instantiategeneratorfunctionobject "Runtime Semantics: InstantiateGeneratorFunctionObject")
         4.  [15.5.4 RS: InstantiateGeneratorFunctionExpression](#sec-runtime-semantics-instantiategeneratorfunctionexpression "Runtime Semantics: InstantiateGeneratorFunctionExpression")
         5.  [15.5.5 RS: Evaluation](#sec-generator-function-definitions-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     6.  +[15.6 Async Generator Function Definitions](#sec-async-generator-function-definitions "Async Generator Function Definitions")
         1.  [15.6.1 SS: Early Errors](#sec-async-generator-function-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.6.2 RS: EvaluateAsyncGeneratorBody](#sec-runtime-semantics-evaluateasyncgeneratorbody "Runtime Semantics: EvaluateAsyncGeneratorBody")
         3.  [15.6.3 RS: InstantiateAsyncGeneratorFunctionObject](#sec-runtime-semantics-instantiateasyncgeneratorfunctionobject "Runtime Semantics: InstantiateAsyncGeneratorFunctionObject")
         4.  [15.6.4 RS: InstantiateAsyncGeneratorFunctionExpression](#sec-runtime-semantics-instantiateasyncgeneratorfunctionexpression "Runtime Semantics: InstantiateAsyncGeneratorFunctionExpression")
         5.  [15.6.5 RS: Evaluation](#sec-asyncgenerator-definitions-evaluation "Runtime Semantics: Evaluation")
     7.  +[15.7 Class Definitions](#sec-class-definitions "Class Definitions")
         1.  [15.7.1 SS: Early Errors](#sec-class-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.7.2 SS: ClassElementKind](#sec-static-semantics-classelementkind "Static Semantics: ClassElementKind")
         3.  [15.7.3 SS: ConstructorMethod](#sec-static-semantics-constructormethod "Static Semantics: ConstructorMethod")
         4.  [15.7.4 SS: IsStatic](#sec-static-semantics-isstatic "Static Semantics: IsStatic")
         5.  [15.7.5 SS: NonConstructorElements](#sec-static-semantics-nonconstructorelements "Static Semantics: NonConstructorElements")
         6.  [15.7.6 SS: PrototypePropertyNameList](#sec-static-semantics-prototypepropertynamelist "Static Semantics: PrototypePropertyNameList")
         7.  [15.7.7 SS: AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid "Static Semantics: AllPrivateIdentifiersValid")
         8.  [15.7.8 SS: PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers "Static Semantics: PrivateBoundIdentifiers")
         9.  [15.7.9 SS: ContainsArguments](#sec-static-semantics-containsarguments "Static Semantics: ContainsArguments")
         10.  [15.7.10 RS: ClassFieldDefinitionEvaluation](#sec-runtime-semantics-classfielddefinitionevaluation "Runtime Semantics: ClassFieldDefinitionEvaluation")
         11.  [15.7.11 RS: ClassStaticBlockDefinitionEvaluation](#sec-runtime-semantics-classstaticblockdefinitionevaluation "Runtime Semantics: ClassStaticBlockDefinitionEvaluation")
         12.  [15.7.12 RS: EvaluateClassStaticBlockBody](#sec-runtime-semantics-evaluateclassstaticblockbody "Runtime Semantics: EvaluateClassStaticBlockBody")
         13.  [15.7.13 RS: ClassElementEvaluation](#sec-static-semantics-classelementevaluation "Runtime Semantics: ClassElementEvaluation")
         14.  [15.7.14 RS: ClassDefinitionEvaluation](#sec-runtime-semantics-classdefinitionevaluation "Runtime Semantics: ClassDefinitionEvaluation")
         15.  [15.7.15 RS: BindingClassDeclarationEvaluation](#sec-runtime-semantics-bindingclassdeclarationevaluation "Runtime Semantics: BindingClassDeclarationEvaluation")
         16.  [15.7.16 RS: Evaluation](#sec-class-definitions-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     8.  +[15.8 Async Function Definitions](#sec-async-function-definitions "Async Function Definitions")
         1.  [15.8.1 SS: Early Errors](#sec-async-function-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.8.2 RS: InstantiateAsyncFunctionObject](#sec-runtime-semantics-instantiateasyncfunctionobject "Runtime Semantics: InstantiateAsyncFunctionObject")
         3.  [15.8.3 RS: InstantiateAsyncFunctionExpression](#sec-runtime-semantics-instantiateasyncfunctionexpression "Runtime Semantics: InstantiateAsyncFunctionExpression")
         4.  [15.8.4 RS: EvaluateAsyncFunctionBody](#sec-runtime-semantics-evaluateasyncfunctionbody "Runtime Semantics: EvaluateAsyncFunctionBody")
         5.  [15.8.5 RS: Evaluation](#sec-async-function-definitions-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     9.  +[15.9 Async Arrow Function Definitions](#sec-async-arrow-function-definitions "Async Arrow Function Definitions")
         1.  [15.9.1 SS: Early Errors](#sec-async-arrow-function-definitions-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [15.9.2 SS: AsyncConciseBodyContainsUseStrict](#sec-static-semantics-asyncconcisebodycontainsusestrict "Static Semantics: AsyncConciseBodyContainsUseStrict")
         3.  [15.9.3 RS: EvaluateAsyncConciseBody](#sec-runtime-semantics-evaluateasyncconcisebody "Runtime Semantics: EvaluateAsyncConciseBody")
         4.  [15.9.4 RS: InstantiateAsyncArrowFunctionExpression](#sec-runtime-semantics-instantiateasyncarrowfunctionexpression "Runtime Semantics: InstantiateAsyncArrowFunctionExpression")
         5.  [15.9.5 RS: Evaluation](#sec-async-arrow-function-definitions-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
     10.  +[15.10 Tail Position Calls](#sec-tail-position-calls "Tail Position Calls")
          1.  [15.10.1 SS: IsInTailPosition ( _call_ )](#sec-isintailposition "Static Semantics: IsInTailPosition ( call )")
          2.  [15.10.2 SS: HasCallInTailPosition](#sec-static-semantics-hascallintailposition "Static Semantics: HasCallInTailPosition")
          3.  [15.10.3 PrepareForTailCall ( )](#sec-preparefortailcall "PrepareForTailCall ( )")
17.  +[16 ECMAScript Language: Scripts and Modules](#sec-ecmascript-language-scripts-and-modules "ECMAScript Language: Scripts and Modules")
     1.  +[16.1 Scripts](#sec-scripts "Scripts")
         1.  [16.1.1 SS: Early Errors](#sec-scripts-static-semantics-early-errors "Static Semantics: Early Errors")
         2.  [16.1.2 SS: ScriptIsStrict](#sec-scriptisstrict "Static Semantics: ScriptIsStrict")
         3.  [16.1.3 RS: Evaluation](#sec-script-semantics-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         4.  [16.1.4 Script Records](#sec-script-records "Script Records")
         5.  [16.1.5 ParseScript ( _sourceText_, _realm_, _hostDefined_ )](#sec-parse-script "ParseScript ( sourceText, realm, hostDefined )")
         6.  [16.1.6 ScriptEvaluation ( _scriptRecord_ )](#sec-runtime-semantics-scriptevaluation "ScriptEvaluation ( scriptRecord )")
         7.  [16.1.7 GlobalDeclarationInstantiation ( _script_, _env_ )](#sec-globaldeclarationinstantiation "GlobalDeclarationInstantiation ( script, env )")
     2.  +[16.2 Modules](#sec-modules "Modules")
         1.  +[16.2.1 Module Semantics](#sec-module-semantics "Module Semantics")
             1.  [16.2.1.1 SS: Early Errors](#sec-module-semantics-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [16.2.1.2 SS: ImportedLocalNames ( _importEntries_ )](#sec-importedlocalnames "Static Semantics: ImportedLocalNames ( importEntries )")
             3.  +[16.2.1.3 ModuleRequest Records](#sec-modulerequest-record "ModuleRequest Records")
                 1.  [16.2.1.3.1 ModuleRequestsEqual ( _left_, _right_ )](#sec-ModuleRequestsEqual "ModuleRequestsEqual ( left, right )")
             4.  [16.2.1.4 SS: ModuleRequests](#sec-static-semantics-modulerequests "Static Semantics: ModuleRequests")
             5.  +[16.2.1.5 Abstract Module Records](#sec-abstract-module-records "Abstract Module Records")
                 1.  [16.2.1.5.1 EvaluateModuleSync ( _module_ )](#sec-EvaluateModuleSync "EvaluateModuleSync ( module )")
             6.  +[16.2.1.6 Cyclic Module Records](#sec-cyclic-module-records "Cyclic Module Records")
                 1.  +[16.2.1.6.1 Implementation of Module Record Abstract Methods](#sec-cyclic-module-record-module-record-methods "Implementation of Module Record Abstract Methods")
                     1.  +[16.2.1.6.1.1 LoadRequestedModules ( \[_hostDefined_ \] )](#sec-LoadRequestedModules "LoadRequestedModules ( [hostDefined] )")
                         1.  [16.2.1.6.1.1.1 InnerModuleLoading ( _state_, _module_ )](#sec-InnerModuleLoading "InnerModuleLoading ( state, module )")
                         2.  [16.2.1.6.1.1.2 ContinueModuleLoading ( _state_, _moduleCompletion_ )](#sec-ContinueModuleLoading "ContinueModuleLoading ( state, moduleCompletion )")
                     2.  +[16.2.1.6.1.2 Link ( )](#sec-moduledeclarationlinking "Link ( )")
                         1.  [16.2.1.6.1.2.1 InnerModuleLinking ( _module_, _stack_, _index_ )](#sec-InnerModuleLinking "InnerModuleLinking ( module, stack, index )")
                     3.  +[16.2.1.6.1.3 Evaluate ( )](#sec-moduleevaluation "Evaluate ( )")
                         1.  [16.2.1.6.1.3.1 InnerModuleEvaluation ( _module_, _stack_, _index_ )](#sec-innermoduleevaluation "InnerModuleEvaluation ( module, stack, index )")
                         2.  [16.2.1.6.1.3.2 ExecuteAsyncModule ( _module_ )](#sec-execute-async-module "ExecuteAsyncModule ( module )")
                         3.  [16.2.1.6.1.3.3 GatherAvailableAncestors ( _module_, _execList_ )](#sec-gather-available-ancestors "GatherAvailableAncestors ( module, execList )")
                         4.  [16.2.1.6.1.3.4 AsyncModuleExecutionFulfilled ( _module_ )](#sec-async-module-execution-fulfilled "AsyncModuleExecutionFulfilled ( module )")
                         5.  [16.2.1.6.1.3.5 AsyncModuleExecutionRejected ( _module_, _error_ )](#sec-async-module-execution-rejected "AsyncModuleExecutionRejected ( module, error )")
                 2.  [16.2.1.6.2 Example Cyclic Module Record Graphs](#sec-example-cyclic-module-record-graphs "Example Cyclic Module Record Graphs")
             7.  +[16.2.1.7 Source Text Module Records](#sec-source-text-module-records "Source Text Module Records")
                 1.  [16.2.1.7.1 ParseModule ( _sourceText_, _realm_, _hostDefined_ )](#sec-parsemodule "ParseModule ( sourceText, realm, hostDefined )")
                 2.  +[16.2.1.7.2 Implementation of Module Record Abstract Methods](#sec-source-text-module-record-module-record-methods "Implementation of Module Record Abstract Methods")
                     1.  [16.2.1.7.2.1 GetExportedNames ( \[_exportStarSet_ \] )](#sec-getexportednames "GetExportedNames ( [exportStarSet] )")
                     2.  [16.2.1.7.2.2 ResolveExport ( _exportName_ \[, _resolveSet_ \] )](#sec-resolveexport "ResolveExport ( exportName [, resolveSet] )")
                 3.  +[16.2.1.7.3 Implementation of Cyclic Module Record Abstract Methods](#sec-source-text-module-record-cyclic-module-record-methods "Implementation of Cyclic Module Record Abstract Methods")
                     1.  [16.2.1.7.3.1 InitializeEnvironment ( )](#sec-source-text-module-record-initialize-environment "InitializeEnvironment ( )")
                     2.  [16.2.1.7.3.2 ExecuteModule ( \[_capability_ \] )](#sec-source-text-module-record-execute-module "ExecuteModule ( [capability] )")
             8.  +[16.2.1.8 Synthetic Module Records](#sec-synthetic-module-records "Synthetic Module Records")
                 1.  [16.2.1.8.1 CreateDefaultExportSyntheticModule ( _defaultExport_ )](#sec-create-default-export-synthetic-module "CreateDefaultExportSyntheticModule ( defaultExport )")
                 2.  [16.2.1.8.2 ParseJSONModule ( _source_ )](#sec-parse-json-module "ParseJSONModule ( source )")
                 3.  [16.2.1.8.3 SetSyntheticModuleExport ( _module_, _exportName_, _exportValue_ )](#sec-setsyntheticmoduleexport "SetSyntheticModuleExport ( module, exportName, exportValue )")
                 4.  +[16.2.1.8.4 Implementation of Module Record Abstract Methods](#sec-smr-module-record-methods "Implementation of Module Record Abstract Methods")
                     1.  [16.2.1.8.4.1 LoadRequestedModules ( )](#sec-smr-LoadRequestedModules "LoadRequestedModules ( )")
                     2.  [16.2.1.8.4.2 GetExportedNames ( )](#sec-smr-getexportednames "GetExportedNames ( )")
                     3.  [16.2.1.8.4.3 ResolveExport ( _exportName_ )](#sec-smr-resolveexport "ResolveExport ( exportName )")
                     4.  [16.2.1.8.4.4 Link ( )](#sec-smr-Link "Link ( )")
                     5.  [16.2.1.8.4.5 Evaluate ( )](#sec-smr-Evaluate "Evaluate ( )")
             9.  [16.2.1.9 GetImportedModule ( _referrer_, _request_ )](#sec-GetImportedModule "GetImportedModule ( referrer, request )")
             10.  [16.2.1.10 HostLoadImportedModule ( _referrer_, _moduleRequest_, _hostDefined_, _payload_ )](#sec-HostLoadImportedModule "HostLoadImportedModule ( referrer, moduleRequest, hostDefined, payload )")
             11.  [16.2.1.11 FinishLoadingImportedModule ( _referrer_, _moduleRequest_, _payload_, _result_ )](#sec-FinishLoadingImportedModule "FinishLoadingImportedModule ( referrer, moduleRequest, payload, result )")
             12.  +[16.2.1.12 AllImportAttributesSupported ( _attributes_ )](#sec-AllImportAttributesSupported "AllImportAttributesSupported ( attributes )")
                  1.  [16.2.1.12.1 HostGetSupportedImportAttributes ( )](#sec-hostgetsupportedimportattributes "HostGetSupportedImportAttributes ( )")
             13.  [16.2.1.13 GetModuleNamespace ( _module_ )](#sec-getmodulenamespace "GetModuleNamespace ( module )")
             14.  [16.2.1.14 RS: Evaluation](#sec-module-semantics-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
         2.  +[16.2.2 Imports](#sec-imports "Imports")
             1.  [16.2.2.1 SS: Early Errors](#sec-imports-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [16.2.2.2 SS: ImportEntries](#sec-static-semantics-importentries "Static Semantics: ImportEntries")
             3.  [16.2.2.3 SS: ImportEntriesForModule](#sec-static-semantics-importentriesformodule "Static Semantics: ImportEntriesForModule")
             4.  [16.2.2.4 SS: WithClauseToAttributes](#sec-withclausetoattributes "Static Semantics: WithClauseToAttributes")
         3.  +[16.2.3 Exports](#sec-exports "Exports")
             1.  [16.2.3.1 SS: Early Errors](#sec-exports-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [16.2.3.2 SS: ExportedBindings](#sec-static-semantics-exportedbindings "Static Semantics: ExportedBindings")
             3.  [16.2.3.3 SS: ExportedNames](#sec-static-semantics-exportednames "Static Semantics: ExportedNames")
             4.  [16.2.3.4 SS: ExportEntries](#sec-static-semantics-exportentries "Static Semantics: ExportEntries")
             5.  [16.2.3.5 SS: ExportEntriesForModule](#sec-static-semantics-exportentriesformodule "Static Semantics: ExportEntriesForModule")
             6.  [16.2.3.6 SS: ReferencedBindings](#sec-static-semantics-referencedbindings "Static Semantics: ReferencedBindings")
             7.  [16.2.3.7 RS: Evaluation](#sec-exports-runtime-semantics-evaluation "Runtime Semantics: Evaluation")
18.  +[17 Error Handling and Language Extensions](#sec-error-handling-and-language-extensions "Error Handling and Language Extensions")
     1.  [17.1 Forbidden Extensions](#sec-forbidden-extensions "Forbidden Extensions")
19.  [18 ECMAScript Standard Built-in Objects](#sec-ecmascript-standard-built-in-objects "ECMAScript Standard Built-in Objects")
20.  +[19 The Global Object](#sec-global-object "The Global Object")
     1.  +[19.1 Value Properties of the Global Object](#sec-value-properties-of-the-global-object "Value Properties of the Global Object")
         1.  [19.1.1 globalThis](#sec-globalthis "globalThis")
         2.  [19.1.2 Infinity](#sec-value-properties-of-the-global-object-infinity "Infinity")
         3.  [19.1.3 NaN](#sec-value-properties-of-the-global-object-nan "NaN")
         4.  [19.1.4 undefined](#sec-undefined "undefined")
     2.  +[19.2 Function Properties of the Global Object](#sec-function-properties-of-the-global-object "Function Properties of the Global Object")
         1.  +[19.2.1 eval ( _x_ )](#sec-eval-x "eval ( x )")
             1.  [19.2.1.1 PerformEval ( _x_, _strictCaller_, _direct_ )](#sec-performeval "PerformEval ( x, strictCaller, direct )")
             2.  [19.2.1.2 HostEnsureCanCompileStrings ( _calleeRealm_, _parameterStrings_, _bodyString_, _direct_ )](#sec-hostensurecancompilestrings "HostEnsureCanCompileStrings ( calleeRealm, parameterStrings, bodyString, direct )")
             3.  [19.2.1.3 EvalDeclarationInstantiation ( _body_, _varEnv_, _lexEnv_, _privateEnv_, _strict_ )](#sec-evaldeclarationinstantiation "EvalDeclarationInstantiation ( body, varEnv, lexEnv, privateEnv, strict )")
         2.  [19.2.2 isFinite ( _number_ )](#sec-isfinite-number "isFinite ( number )")
         3.  [19.2.3 isNaN ( _number_ )](#sec-isnan-number "isNaN ( number )")
         4.  [19.2.4 parseFloat ( _string_ )](#sec-parsefloat-string "parseFloat ( string )")
         5.  [19.2.5 parseInt ( _string_, _radix_ )](#sec-parseint-string-radix "parseInt ( string, radix )")
         6.  +[19.2.6 URI Handling Functions](#sec-uri-handling-functions "URI Handling Functions")
             1.  [19.2.6.1 decodeURI ( _encodedURI_ )](#sec-decodeuri-encodeduri "decodeURI ( encodedURI )")
             2.  [19.2.6.2 decodeURIComponent ( _encodedURIComponent_ )](#sec-decodeuricomponent-encodeduricomponent "decodeURIComponent ( encodedURIComponent )")
             3.  [19.2.6.3 encodeURI ( _uri_ )](#sec-encodeuri-uri "encodeURI ( uri )")
             4.  [19.2.6.4 encodeURIComponent ( _uriComponent_ )](#sec-encodeuricomponent-uricomponent "encodeURIComponent ( uriComponent )")
             5.  [19.2.6.5 Encode ( _string_, _extraUnescaped_ )](#sec-encode "Encode ( string, extraUnescaped )")
             6.  [19.2.6.6 Decode ( _string_, _preserveEscapeSet_ )](#sec-decode "Decode ( string, preserveEscapeSet )")
             7.  [19.2.6.7 ParseHexOctet ( _string_, _position_ )](#sec-parsehexoctet "ParseHexOctet ( string, position )")
     3.  +[19.3 Constructor Properties of the Global Object](#sec-constructor-properties-of-the-global-object "Constructor Properties of the Global Object")
         1.  [19.3.1 AggregateError ( . . . )](#sec-constructor-properties-of-the-global-object-aggregate-error "AggregateError ( . . . )")
         2.  [19.3.2 Array ( . . . )](#sec-constructor-properties-of-the-global-object-array "Array ( . . . )")
         3.  [19.3.3 ArrayBuffer ( . . . )](#sec-constructor-properties-of-the-global-object-arraybuffer "ArrayBuffer ( . . . )")
         4.  [19.3.4 BigInt ( . . . )](#sec-constructor-properties-of-the-global-object-bigint "BigInt ( . . . )")
         5.  [19.3.5 BigInt64Array ( . . . )](#sec-constructor-properties-of-the-global-object-bigint64array "BigInt64Array ( . . . )")
         6.  [19.3.6 BigUint64Array ( . . . )](#sec-constructor-properties-of-the-global-object-biguint64array "BigUint64Array ( . . . )")
         7.  [19.3.7 Boolean ( . . . )](#sec-constructor-properties-of-the-global-object-boolean "Boolean ( . . . )")
         8.  [19.3.8 DataView ( . . . )](#sec-constructor-properties-of-the-global-object-dataview "DataView ( . . . )")
         9.  [19.3.9 Date ( . . . )](#sec-constructor-properties-of-the-global-object-date "Date ( . . . )")
         10.  [19.3.10 Error ( . . . )](#sec-constructor-properties-of-the-global-object-error "Error ( . . . )")
         11.  [19.3.11 EvalError ( . . . )](#sec-constructor-properties-of-the-global-object-evalerror "EvalError ( . . . )")
         12.  [19.3.12 FinalizationRegistry ( . . . )](#sec-constructor-properties-of-the-global-object-finalization-registry "FinalizationRegistry ( . . . )")
         13.  [19.3.13 Float16Array ( . . . )](#sec-float16array "Float16Array ( . . . )")
         14.  [19.3.14 Float32Array ( . . . )](#sec-float32array "Float32Array ( . . . )")
         15.  [19.3.15 Float64Array ( . . . )](#sec-float64array "Float64Array ( . . . )")
         16.  [19.3.16 Function ( . . . )](#sec-constructor-properties-of-the-global-object-function "Function ( . . . )")
         17.  [19.3.17 Int8Array ( . . . )](#sec-int8array "Int8Array ( . . . )")
         18.  [19.3.18 Int16Array ( . . . )](#sec-int16array "Int16Array ( . . . )")
         19.  [19.3.19 Int32Array ( . . . )](#sec-int32array "Int32Array ( . . . )")
         20.  [19.3.20 Iterator ( . . . )](#sec-constructor-properties-of-the-global-object-iterator "Iterator ( . . . )")
         21.  [19.3.21 Map ( . . . )](#sec-map "Map ( . . . )")
         22.  [19.3.22 Number ( . . . )](#sec-constructor-properties-of-the-global-object-number "Number ( . . . )")
         23.  [19.3.23 Object ( . . . )](#sec-constructor-properties-of-the-global-object-object "Object ( . . . )")
         24.  [19.3.24 Promise ( . . . )](#sec-constructor-properties-of-the-global-object-promise "Promise ( . . . )")
         25.  [19.3.25 Proxy ( . . . )](#sec-constructor-properties-of-the-global-object-proxy "Proxy ( . . . )")
         26.  [19.3.26 RangeError ( . . . )](#sec-constructor-properties-of-the-global-object-rangeerror "RangeError ( . . . )")
         27.  [19.3.27 ReferenceError ( . . . )](#sec-constructor-properties-of-the-global-object-referenceerror "ReferenceError ( . . . )")
         28.  [19.3.28 RegExp ( . . . )](#sec-constructor-properties-of-the-global-object-regexp "RegExp ( . . . )")
         29.  [19.3.29 Set ( . . . )](#sec-set "Set ( . . . )")
         30.  [19.3.30 SharedArrayBuffer ( . . . )](#sec-constructor-properties-of-the-global-object-sharedarraybuffer "SharedArrayBuffer ( . . . )")
         31.  [19.3.31 String ( . . . )](#sec-constructor-properties-of-the-global-object-string "String ( . . . )")
         32.  [19.3.32 Symbol ( . . . )](#sec-constructor-properties-of-the-global-object-symbol "Symbol ( . . . )")
         33.  [19.3.33 SyntaxError ( . . . )](#sec-constructor-properties-of-the-global-object-syntaxerror "SyntaxError ( . . . )")
         34.  [19.3.34 TypeError ( . . . )](#sec-constructor-properties-of-the-global-object-typeerror "TypeError ( . . . )")
         35.  [19.3.35 Uint8Array ( . . . )](#sec-constructor-properties-of-the-global-object-uint8array "Uint8Array ( . . . )")
         36.  [19.3.36 Uint8ClampedArray ( . . . )](#sec-uint8clampedarray "Uint8ClampedArray ( . . . )")
         37.  [19.3.37 Uint16Array ( . . . )](#sec-uint16array "Uint16Array ( . . . )")
         38.  [19.3.38 Uint32Array ( . . . )](#sec-uint32array "Uint32Array ( . . . )")
         39.  [19.3.39 URIError ( . . . )](#sec-constructor-properties-of-the-global-object-urierror "URIError ( . . . )")
         40.  [19.3.40 WeakMap ( . . . )](#sec-constructor-properties-of-the-global-object-weakmap "WeakMap ( . . . )")
         41.  [19.3.41 WeakRef ( . . . )](#sec-constructor-properties-of-the-global-object-weakref "WeakRef ( . . . )")
         42.  [19.3.42 WeakSet ( . . . )](#sec-constructor-properties-of-the-global-object-weakset "WeakSet ( . . . )")
     4.  +[19.4 Other Properties of the Global Object](#sec-other-properties-of-the-global-object "Other Properties of the Global Object")
         1.  [19.4.1 Atomics](#sec-atomics "Atomics")
         2.  [19.4.2 JSON](#sec-json "JSON")
         3.  [19.4.3 Math](#sec-math "Math")
         4.  [19.4.4 Reflect](#sec-reflect "Reflect")
21.  +[20 Fundamental Objects](#sec-fundamental-objects "Fundamental Objects")
     1.  +[20.1 Object Objects](#sec-object-objects "Object Objects")
         1.  +[20.1.1 The Object Constructor](#sec-object-constructor "The Object Constructor")
             1.  [20.1.1.1 Object ( _value_ )](#sec-object-value "Object ( value )")
         2.  +[20.1.2 Properties of the Object Constructor](#sec-properties-of-the-object-constructor "Properties of the Object Constructor")
             1.  [20.1.2.1 Object.assign ( _target_, ..._sources_ )](#sec-object.assign "Object.assign ( target, ...sources )")
             2.  [20.1.2.2 Object.create ( _O_, _Properties_ )](#sec-object.create "Object.create ( O, Properties )")
             3.  +[20.1.2.3 Object.defineProperties ( _O_, _Properties_ )](#sec-object.defineproperties "Object.defineProperties ( O, Properties )")
                 1.  [20.1.2.3.1 ObjectDefineProperties ( _O_, _Properties_ )](#sec-objectdefineproperties "ObjectDefineProperties ( O, Properties )")
             4.  [20.1.2.4 Object.defineProperty ( _O_, _P_, _Attributes_ )](#sec-object.defineproperty "Object.defineProperty ( O, P, Attributes )")
             5.  [20.1.2.5 Object.entries ( _O_ )](#sec-object.entries "Object.entries ( O )")
             6.  [20.1.2.6 Object.freeze ( _O_ )](#sec-object.freeze "Object.freeze ( O )")
             7.  [20.1.2.7 Object.fromEntries ( _iterable_ )](#sec-object.fromentries "Object.fromEntries ( iterable )")
             8.  [20.1.2.8 Object.getOwnPropertyDescriptor ( _O_, _P_ )](#sec-object.getownpropertydescriptor "Object.getOwnPropertyDescriptor ( O, P )")
             9.  [20.1.2.9 Object.getOwnPropertyDescriptors ( _O_ )](#sec-object.getownpropertydescriptors "Object.getOwnPropertyDescriptors ( O )")
             10.  [20.1.2.10 Object.getOwnPropertyNames ( _O_ )](#sec-object.getownpropertynames "Object.getOwnPropertyNames ( O )")
             11.  +[20.1.2.11 Object.getOwnPropertySymbols ( _O_ )](#sec-object.getownpropertysymbols "Object.getOwnPropertySymbols ( O )")
                  1.  [20.1.2.11.1 GetOwnPropertyKeys ( _O_, _type_ )](#sec-getownpropertykeys "GetOwnPropertyKeys ( O, type )")
             12.  [20.1.2.12 Object.getPrototypeOf ( _O_ )](#sec-object.getprototypeof "Object.getPrototypeOf ( O )")
             13.  [20.1.2.13 Object.groupBy ( _items_, _callback_ )](#sec-object.groupby "Object.groupBy ( items, callback )")
             14.  [20.1.2.14 Object.hasOwn ( _O_, _P_ )](#sec-object.hasown "Object.hasOwn ( O, P )")
             15.  [20.1.2.15 Object.is ( _value1_, _value2_ )](#sec-object.is "Object.is ( value1, value2 )")
             16.  [20.1.2.16 Object.isExtensible ( _O_ )](#sec-object.isextensible "Object.isExtensible ( O )")
             17.  [20.1.2.17 Object.isFrozen ( _O_ )](#sec-object.isfrozen "Object.isFrozen ( O )")
             18.  [20.1.2.18 Object.isSealed ( _O_ )](#sec-object.issealed "Object.isSealed ( O )")
             19.  [20.1.2.19 Object.keys ( _O_ )](#sec-object.keys "Object.keys ( O )")
             20.  [20.1.2.20 Object.preventExtensions ( _O_ )](#sec-object.preventextensions "Object.preventExtensions ( O )")
             21.  [20.1.2.21 Object.prototype](#sec-object.prototype "Object.prototype")
             22.  [20.1.2.22 Object.seal ( _O_ )](#sec-object.seal "Object.seal ( O )")
             23.  [20.1.2.23 Object.setPrototypeOf ( _O_, _proto_ )](#sec-object.setprototypeof "Object.setPrototypeOf ( O, proto )")
             24.  [20.1.2.24 Object.values ( _O_ )](#sec-object.values "Object.values ( O )")
         3.  +[20.1.3 Properties of the Object Prototype Object](#sec-properties-of-the-object-prototype-object "Properties of the Object Prototype Object")
             1.  [20.1.3.1 Object.prototype.constructor](#sec-object.prototype.constructor "Object.prototype.constructor")
             2.  [20.1.3.2 Object.prototype.hasOwnProperty ( _V_ )](#sec-object.prototype.hasownproperty "Object.prototype.hasOwnProperty ( V )")
             3.  [20.1.3.3 Object.prototype.isPrototypeOf ( _V_ )](#sec-object.prototype.isprototypeof "Object.prototype.isPrototypeOf ( V )")
             4.  [20.1.3.4 Object.prototype.propertyIsEnumerable ( _V_ )](#sec-object.prototype.propertyisenumerable "Object.prototype.propertyIsEnumerable ( V )")
             5.  [20.1.3.5 Object.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-object.prototype.tolocalestring "Object.prototype.toLocaleString ( [reserved1 [, reserved2]] )")
             6.  [20.1.3.6 Object.prototype.toString ( )](#sec-object.prototype.tostring "Object.prototype.toString ( )")
             7.  [20.1.3.7 Object.prototype.valueOf ( )](#sec-object.prototype.valueof "Object.prototype.valueOf ( )")
             8.  +[20.1.3.8 Object.prototype.\_\_proto\_\_](#sec-object.prototype.__proto__ "Object.prototype.__proto__")
                 1.  [20.1.3.8.1 get Object.prototype.\_\_proto\_\_](#sec-get-object.prototype.__proto__ "get Object.prototype.__proto__")
                 2.  [20.1.3.8.2 set Object.prototype.\_\_proto\_\_](#sec-set-object.prototype.__proto__ "set Object.prototype.__proto__")
             9.  +[20.1.3.9 Legacy Object.prototype Accessor Methods](#sec-object.prototype-legacy-accessor-methods "Legacy Object.prototype Accessor Methods")
                 1.  [20.1.3.9.1 Object.prototype.\_\_defineGetter\_\_ ( _P_, _getter_ )](#sec-object.prototype.__defineGetter__ "Object.prototype.__defineGetter__ ( P, getter )")
                 2.  [20.1.3.9.2 Object.prototype.\_\_defineSetter\_\_ ( _P_, _setter_ )](#sec-object.prototype.__defineSetter__ "Object.prototype.__defineSetter__ ( P, setter )")
                 3.  [20.1.3.9.3 Object.prototype.\_\_lookupGetter\_\_ ( _P_ )](#sec-object.prototype.__lookupGetter__ "Object.prototype.__lookupGetter__ ( P )")
                 4.  [20.1.3.9.4 Object.prototype.\_\_lookupSetter\_\_ ( _P_ )](#sec-object.prototype.__lookupSetter__ "Object.prototype.__lookupSetter__ ( P )")
         4.  [20.1.4 Properties of Object Instances](#sec-properties-of-object-instances "Properties of Object Instances")
     2.  +[20.2 Function Objects](#sec-function-objects "Function Objects")
         1.  +[20.2.1 The Function Constructor](#sec-function-constructor "The Function Constructor")
             1.  +[20.2.1.1 Function ( ..._parameterArgs_, _bodyArg_ )](#sec-function-p1-p2-pn-body "Function ( ...parameterArgs, bodyArg )")
                 1.  [20.2.1.1.1 CreateDynamicFunction ( _constructor_, _newTarget_, _kind_, _parameterArgs_, _bodyArg_ )](#sec-createdynamicfunction "CreateDynamicFunction ( constructor, newTarget, kind, parameterArgs, bodyArg )")
         2.  +[20.2.2 Properties of the Function Constructor](#sec-properties-of-the-function-constructor "Properties of the Function Constructor")
             1.  [20.2.2.1 Function.prototype](#sec-function.prototype "Function.prototype")
         3.  +[20.2.3 Properties of the Function Prototype Object](#sec-properties-of-the-function-prototype-object "Properties of the Function Prototype Object")
             1.  [20.2.3.1 Function.prototype.apply ( _thisArg_, _argArray_ )](#sec-function.prototype.apply "Function.prototype.apply ( thisArg, argArray )")
             2.  [20.2.3.2 Function.prototype.bind ( _thisArg_, ..._args_ )](#sec-function.prototype.bind "Function.prototype.bind ( thisArg, ...args )")
             3.  [20.2.3.3 Function.prototype.call ( _thisArg_, ..._args_ )](#sec-function.prototype.call "Function.prototype.call ( thisArg, ...args )")
             4.  [20.2.3.4 Function.prototype.constructor](#sec-function.prototype.constructor "Function.prototype.constructor")
             5.  [20.2.3.5 Function.prototype.toString ( )](#sec-function.prototype.tostring "Function.prototype.toString ( )")
             6.  [20.2.3.6 Function.prototype \[%Symbol.hasInstance% \] ( _V_ )](#sec-function.prototype-%symbol.hasinstance% "Function.prototype [%Symbol.hasInstance%] ( V )")
         4.  +[20.2.4 Function Instances](#sec-function-instances "Function Instances")
             1.  [20.2.4.1 length](#sec-function-instances-length "length")
             2.  [20.2.4.2 name](#sec-function-instances-name "name")
             3.  [20.2.4.3 prototype](#sec-function-instances-prototype "prototype")
         5.  [20.2.5 HostHasSourceTextAvailable ( _func_ )](#sec-hosthassourcetextavailable "HostHasSourceTextAvailable ( func )")
     3.  +[20.3 Boolean Objects](#sec-boolean-objects "Boolean Objects")
         1.  +[20.3.1 The Boolean Constructor](#sec-boolean-constructor "The Boolean Constructor")
             1.  [20.3.1.1 Boolean ( _value_ )](#sec-boolean-constructor-boolean-value "Boolean ( value )")
         2.  +[20.3.2 Properties of the Boolean Constructor](#sec-properties-of-the-boolean-constructor "Properties of the Boolean Constructor")
             1.  [20.3.2.1 Boolean.prototype](#sec-boolean.prototype "Boolean.prototype")
         3.  +[20.3.3 Properties of the Boolean Prototype Object](#sec-properties-of-the-boolean-prototype-object "Properties of the Boolean Prototype Object")
             1.  [20.3.3.1 Boolean.prototype.constructor](#sec-boolean.prototype.constructor "Boolean.prototype.constructor")
             2.  [20.3.3.2 Boolean.prototype.toString ( )](#sec-boolean.prototype.tostring "Boolean.prototype.toString ( )")
             3.  +[20.3.3.3 Boolean.prototype.valueOf ( )](#sec-boolean.prototype.valueof "Boolean.prototype.valueOf ( )")
                 1.  [20.3.3.3.1 ThisBooleanValue ( _value_ )](#sec-thisbooleanvalue "ThisBooleanValue ( value )")
         4.  [20.3.4 Properties of Boolean Instances](#sec-properties-of-boolean-instances "Properties of Boolean Instances")
     4.  +[20.4 Symbol Objects](#sec-symbol-objects "Symbol Objects")
         1.  +[20.4.1 The Symbol Constructor](#sec-symbol-constructor "The Symbol Constructor")
             1.  [20.4.1.1 Symbol ( \[_description_ \] )](#sec-symbol-description "Symbol ( [description] )")
         2.  +[20.4.2 Properties of the Symbol Constructor](#sec-properties-of-the-symbol-constructor "Properties of the Symbol Constructor")
             1.  [20.4.2.1 Symbol.asyncIterator](#sec-symbol.asynciterator "Symbol.asyncIterator")
             2.  [20.4.2.2 Symbol.for ( _key_ )](#sec-symbol.for "Symbol.for ( key )")
             3.  [20.4.2.3 Symbol.hasInstance](#sec-symbol.hasinstance "Symbol.hasInstance")
             4.  [20.4.2.4 Symbol.isConcatSpreadable](#sec-symbol.isconcatspreadable "Symbol.isConcatSpreadable")
             5.  [20.4.2.5 Symbol.iterator](#sec-symbol.iterator "Symbol.iterator")
             6.  [20.4.2.6 Symbol.keyFor ( _sym_ )](#sec-symbol.keyfor "Symbol.keyFor ( sym )")
             7.  [20.4.2.7 Symbol.match](#sec-symbol.match "Symbol.match")
             8.  [20.4.2.8 Symbol.matchAll](#sec-symbol.matchall "Symbol.matchAll")
             9.  [20.4.2.9 Symbol.prototype](#sec-symbol.prototype "Symbol.prototype")
             10.  [20.4.2.10 Symbol.replace](#sec-symbol.replace "Symbol.replace")
             11.  [20.4.2.11 Symbol.search](#sec-symbol.search "Symbol.search")
             12.  [20.4.2.12 Symbol.species](#sec-symbol.species "Symbol.species")
             13.  [20.4.2.13 Symbol.split](#sec-symbol.split "Symbol.split")
             14.  [20.4.2.14 Symbol.toPrimitive](#sec-symbol.toprimitive "Symbol.toPrimitive")
             15.  [20.4.2.15 Symbol.toStringTag](#sec-symbol.tostringtag "Symbol.toStringTag")
             16.  [20.4.2.16 Symbol.unscopables](#sec-symbol.unscopables "Symbol.unscopables")
         3.  +[20.4.3 Properties of the Symbol Prototype Object](#sec-properties-of-the-symbol-prototype-object "Properties of the Symbol Prototype Object")
             1.  [20.4.3.1 Symbol.prototype.constructor](#sec-symbol.prototype.constructor "Symbol.prototype.constructor")
             2.  [20.4.3.2 get Symbol.prototype.description](#sec-symbol.prototype.description "get Symbol.prototype.description")
             3.  +[20.4.3.3 Symbol.prototype.toString ( )](#sec-symbol.prototype.tostring "Symbol.prototype.toString ( )")
                 1.  [20.4.3.3.1 SymbolDescriptiveString ( _sym_ )](#sec-symboldescriptivestring "SymbolDescriptiveString ( sym )")
             4.  +[20.4.3.4 Symbol.prototype.valueOf ( )](#sec-symbol.prototype.valueof "Symbol.prototype.valueOf ( )")
                 1.  [20.4.3.4.1 ThisSymbolValue ( _value_ )](#sec-thissymbolvalue "ThisSymbolValue ( value )")
             5.  [20.4.3.5 Symbol.prototype \[%Symbol.toPrimitive% \] ( _hint_ )](#sec-symbol.prototype-%symbol.toprimitive% "Symbol.prototype [%Symbol.toPrimitive%] ( hint )")
             6.  [20.4.3.6 Symbol.prototype \[%Symbol.toStringTag% \]](#sec-symbol.prototype-%symbol.tostringtag% "Symbol.prototype [%Symbol.toStringTag%]")
         4.  [20.4.4 Properties of Symbol Instances](#sec-properties-of-symbol-instances "Properties of Symbol Instances")
         5.  +[20.4.5 Abstract Operations for Symbols](#sec-abstract-operations-for-symbols "Abstract Operations for Symbols")
             1.  [20.4.5.1 KeyForSymbol ( _sym_ )](#sec-keyforsymbol "KeyForSymbol ( sym )")
     5.  +[20.5 Error Objects](#sec-error-objects "Error Objects")
         1.  +[20.5.1 The Error Constructor](#sec-error-constructor "The Error Constructor")
             1.  [20.5.1.1 Error ( _message_ \[, _options_ \] )](#sec-error-message "Error ( message [, options] )")
         2.  +[20.5.2 Properties of the Error Constructor](#sec-properties-of-the-error-constructor "Properties of the Error Constructor")
             1.  [20.5.2.1 Error.isError ( _arg_ )](#sec-error.iserror "Error.isError ( arg )")
             2.  [20.5.2.2 Error.prototype](#sec-error.prototype "Error.prototype")
         3.  +[20.5.3 Properties of the Error Prototype Object](#sec-properties-of-the-error-prototype-object "Properties of the Error Prototype Object")
             1.  [20.5.3.1 Error.prototype.constructor](#sec-error.prototype.constructor "Error.prototype.constructor")
             2.  [20.5.3.2 Error.prototype.message](#sec-error.prototype.message "Error.prototype.message")
             3.  [20.5.3.3 Error.prototype.name](#sec-error.prototype.name "Error.prototype.name")
             4.  [20.5.3.4 Error.prototype.toString ( )](#sec-error.prototype.tostring "Error.prototype.toString ( )")
         4.  [20.5.4 Properties of Error Instances](#sec-properties-of-error-instances "Properties of Error Instances")
         5.  +[20.5.5 Native Error Types Used in This Standard](#sec-native-error-types-used-in-this-standard "Native Error Types Used in This Standard")
             1.  [20.5.5.1 EvalError](#sec-native-error-types-used-in-this-standard-evalerror "EvalError")
             2.  [20.5.5.2 RangeError](#sec-native-error-types-used-in-this-standard-rangeerror "RangeError")
             3.  [20.5.5.3 ReferenceError](#sec-native-error-types-used-in-this-standard-referenceerror "ReferenceError")
             4.  [20.5.5.4 SyntaxError](#sec-native-error-types-used-in-this-standard-syntaxerror "SyntaxError")
             5.  [20.5.5.5 TypeError](#sec-native-error-types-used-in-this-standard-typeerror "TypeError")
             6.  [20.5.5.6 URIError](#sec-native-error-types-used-in-this-standard-urierror "URIError")
         6.  +[20.5.6 _NativeError_ Object Structure](#sec-nativeerror-object-structure "NativeError Object Structure")
             1.  +[20.5.6.1 The _NativeError_ Constructors](#sec-nativeerror-constructors "The NativeError Constructors")
                 1.  [20.5.6.1.1 _NativeError_ ( _message_ \[, _options_ \] )](#sec-nativeerror "NativeError ( message [, options] )")
             2.  +[20.5.6.2 Properties of the _NativeError_ Constructors](#sec-properties-of-the-nativeerror-constructors "Properties of the NativeError Constructors")
                 1.  [20.5.6.2.1 _NativeError_.prototype](#sec-nativeerror.prototype "NativeError.prototype")
             3.  +[20.5.6.3 Properties of the _NativeError_ Prototype Objects](#sec-properties-of-the-nativeerror-prototype-objects "Properties of the NativeError Prototype Objects")
                 1.  [20.5.6.3.1 _NativeError_.prototype.constructor](#sec-nativeerror.prototype.constructor "NativeError.prototype.constructor")
                 2.  [20.5.6.3.2 _NativeError_.prototype.message](#sec-nativeerror.prototype.message "NativeError.prototype.message")
                 3.  [20.5.6.3.3 _NativeError_.prototype.name](#sec-nativeerror.prototype.name "NativeError.prototype.name")
             4.  [20.5.6.4 Properties of _NativeError_ Instances](#sec-properties-of-nativeerror-instances "Properties of NativeError Instances")
         7.  +[20.5.7 AggregateError Objects](#sec-aggregate-error-objects "AggregateError Objects")
             1.  +[20.5.7.1 The AggregateError Constructor](#sec-aggregate-error-constructor "The AggregateError Constructor")
                 1.  [20.5.7.1.1 AggregateError ( _errors_, _message_ \[, _options_ \] )](#sec-aggregate-error "AggregateError ( errors, message [, options] )")
             2.  +[20.5.7.2 Properties of the AggregateError Constructor](#sec-properties-of-the-aggregate-error-constructors "Properties of the AggregateError Constructor")
                 1.  [20.5.7.2.1 AggregateError.prototype](#sec-aggregate-error.prototype "AggregateError.prototype")
             3.  +[20.5.7.3 Properties of the AggregateError Prototype Object](#sec-properties-of-the-aggregate-error-prototype-objects "Properties of the AggregateError Prototype Object")
                 1.  [20.5.7.3.1 AggregateError.prototype.constructor](#sec-aggregate-error.prototype.constructor "AggregateError.prototype.constructor")
                 2.  [20.5.7.3.2 AggregateError.prototype.message](#sec-aggregate-error.prototype.message "AggregateError.prototype.message")
                 3.  [20.5.7.3.3 AggregateError.prototype.name](#sec-aggregate-error.prototype.name "AggregateError.prototype.name")
             4.  [20.5.7.4 Properties of AggregateError Instances](#sec-properties-of-aggregate-error-instances "Properties of AggregateError Instances")
         8.  +[20.5.8 Abstract Operations for Error Objects](#sec-abstract-operations-for-error-objects "Abstract Operations for Error Objects")
             1.  [20.5.8.1 InstallErrorCause ( _O_, _options_ )](#sec-installerrorcause "InstallErrorCause ( O, options )")
22.  +[21 Numbers and Dates](#sec-numbers-and-dates "Numbers and Dates")
     1.  +[21.1 Number Objects](#sec-number-objects "Number Objects")
         1.  +[21.1.1 The Number Constructor](#sec-number-constructor "The Number Constructor")
             1.  [21.1.1.1 Number ( _value_ )](#sec-number-constructor-number-value "Number ( value )")
         2.  +[21.1.2 Properties of the Number Constructor](#sec-properties-of-the-number-constructor "Properties of the Number Constructor")
             1.  [21.1.2.1 Number.EPSILON](#sec-number.epsilon "Number.EPSILON")
             2.  [21.1.2.2 Number.isFinite ( _number_ )](#sec-number.isfinite "Number.isFinite ( number )")
             3.  [21.1.2.3 Number.isInteger ( _number_ )](#sec-number.isinteger "Number.isInteger ( number )")
             4.  [21.1.2.4 Number.isNaN ( _number_ )](#sec-number.isnan "Number.isNaN ( number )")
             5.  [21.1.2.5 Number.isSafeInteger ( _number_ )](#sec-number.issafeinteger "Number.isSafeInteger ( number )")
             6.  [21.1.2.6 Number.MAX\_SAFE\_INTEGER](#sec-number.max_safe_integer "Number.MAX_SAFE_INTEGER")
             7.  [21.1.2.7 Number.MAX\_VALUE](#sec-number.max_value "Number.MAX_VALUE")
             8.  [21.1.2.8 Number.MIN\_SAFE\_INTEGER](#sec-number.min_safe_integer "Number.MIN_SAFE_INTEGER")
             9.  [21.1.2.9 Number.MIN\_VALUE](#sec-number.min_value "Number.MIN_VALUE")
             10.  [21.1.2.10 Number.NaN](#sec-number.nan "Number.NaN")
             11.  [21.1.2.11 Number.NEGATIVE\_INFINITY](#sec-number.negative_infinity "Number.NEGATIVE_INFINITY")
             12.  [21.1.2.12 Number.parseFloat ( _string_ )](#sec-number.parsefloat "Number.parseFloat ( string )")
             13.  [21.1.2.13 Number.parseInt ( _string_, _radix_ )](#sec-number.parseint "Number.parseInt ( string, radix )")
             14.  [21.1.2.14 Number.POSITIVE\_INFINITY](#sec-number.positive_infinity "Number.POSITIVE_INFINITY")
             15.  [21.1.2.15 Number.prototype](#sec-number.prototype "Number.prototype")
         3.  +[21.1.3 Properties of the Number Prototype Object](#sec-properties-of-the-number-prototype-object "Properties of the Number Prototype Object")
             1.  [21.1.3.1 Number.prototype.constructor](#sec-number.prototype.constructor "Number.prototype.constructor")
             2.  [21.1.3.2 Number.prototype.toExponential ( _fractionDigits_ )](#sec-number.prototype.toexponential "Number.prototype.toExponential ( fractionDigits )")
             3.  [21.1.3.3 Number.prototype.toFixed ( _fractionDigits_ )](#sec-number.prototype.tofixed "Number.prototype.toFixed ( fractionDigits )")
             4.  [21.1.3.4 Number.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-number.prototype.tolocalestring "Number.prototype.toLocaleString ( [reserved1 [, reserved2]] )")
             5.  [21.1.3.5 Number.prototype.toPrecision ( _precision_ )](#sec-number.prototype.toprecision "Number.prototype.toPrecision ( precision )")
             6.  [21.1.3.6 Number.prototype.toString ( \[_radix_ \] )](#sec-number.prototype.tostring "Number.prototype.toString ( [radix] )")
             7.  +[21.1.3.7 Number.prototype.valueOf ( )](#sec-number.prototype.valueof "Number.prototype.valueOf ( )")
                 1.  [21.1.3.7.1 ThisNumberValue ( _value_ )](#sec-thisnumbervalue "ThisNumberValue ( value )")
         4.  [21.1.4 Properties of Number Instances](#sec-properties-of-number-instances "Properties of Number Instances")
     2.  +[21.2 BigInt Objects](#sec-bigint-objects "BigInt Objects")
         1.  +[21.2.1 The BigInt Constructor](#sec-bigint-constructor "The BigInt Constructor")
             1.  +[21.2.1.1 BigInt ( _value_ )](#sec-bigint-constructor-number-value "BigInt ( value )")
                 1.  [21.2.1.1.1 NumberToBigInt ( _number_ )](#sec-numbertobigint "NumberToBigInt ( number )")
         2.  +[21.2.2 Properties of the BigInt Constructor](#sec-properties-of-the-bigint-constructor "Properties of the BigInt Constructor")
             1.  [21.2.2.1 BigInt.asIntN ( _bits_, _bigint_ )](#sec-bigint.asintn "BigInt.asIntN ( bits, bigint )")
             2.  [21.2.2.2 BigInt.asUintN ( _bits_, _bigint_ )](#sec-bigint.asuintn "BigInt.asUintN ( bits, bigint )")
             3.  [21.2.2.3 BigInt.prototype](#sec-bigint.prototype "BigInt.prototype")
         3.  +[21.2.3 Properties of the BigInt Prototype Object](#sec-properties-of-the-bigint-prototype-object "Properties of the BigInt Prototype Object")
             1.  [21.2.3.1 BigInt.prototype.constructor](#sec-bigint.prototype.constructor "BigInt.prototype.constructor")
             2.  [21.2.3.2 BigInt.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-bigint.prototype.tolocalestring "BigInt.prototype.toLocaleString ( [reserved1 [, reserved2]] )")
             3.  [21.2.3.3 BigInt.prototype.toString ( \[_radix_ \] )](#sec-bigint.prototype.tostring "BigInt.prototype.toString ( [radix] )")
             4.  +[21.2.3.4 BigInt.prototype.valueOf ( )](#sec-bigint.prototype.valueof "BigInt.prototype.valueOf ( )")
                 1.  [21.2.3.4.1 ThisBigIntValue ( _value_ )](#sec-thisbigintvalue "ThisBigIntValue ( value )")
             5.  [21.2.3.5 BigInt.prototype \[%Symbol.toStringTag% \]](#sec-bigint.prototype-%symbol.tostringtag% "BigInt.prototype [%Symbol.toStringTag%]")
         4.  [21.2.4 Properties of BigInt Instances](#sec-properties-of-bigint-instances "Properties of BigInt Instances")
     3.  +[21.3 The Math Object](#sec-math-object "The Math Object")
         1.  +[21.3.1 Value Properties of the Math Object](#sec-value-properties-of-the-math-object "Value Properties of the Math Object")
             1.  [21.3.1.1 Math.E](#sec-math.e "Math.E")
             2.  [21.3.1.2 Math.LN10](#sec-math.ln10 "Math.LN10")
             3.  [21.3.1.3 Math.LN2](#sec-math.ln2 "Math.LN2")
             4.  [21.3.1.4 Math.LOG10E](#sec-math.log10e "Math.LOG10E")
             5.  [21.3.1.5 Math.LOG2E](#sec-math.log2e "Math.LOG2E")
             6.  [21.3.1.6 Math.PI](#sec-math.pi "Math.PI")
             7.  [21.3.1.7 Math.SQRT1\_2](#sec-math.sqrt1_2 "Math.SQRT1_2")
             8.  [21.3.1.8 Math.SQRT2](#sec-math.sqrt2 "Math.SQRT2")
             9.  [21.3.1.9 Math \[%Symbol.toStringTag% \]](#sec-math-%symbol.tostringtag% "Math [%Symbol.toStringTag%]")
         2.  +[21.3.2 Function Properties of the Math Object](#sec-function-properties-of-the-math-object "Function Properties of the Math Object")
             1.  [21.3.2.1 Math.abs ( _x_ )](#sec-math.abs "Math.abs ( x )")
             2.  [21.3.2.2 Math.acos ( _x_ )](#sec-math.acos "Math.acos ( x )")
             3.  [21.3.2.3 Math.acosh ( _x_ )](#sec-math.acosh "Math.acosh ( x )")
             4.  [21.3.2.4 Math.asin ( _x_ )](#sec-math.asin "Math.asin ( x )")
             5.  [21.3.2.5 Math.asinh ( _x_ )](#sec-math.asinh "Math.asinh ( x )")
             6.  [21.3.2.6 Math.atan ( _x_ )](#sec-math.atan "Math.atan ( x )")
             7.  [21.3.2.7 Math.atanh ( _x_ )](#sec-math.atanh "Math.atanh ( x )")
             8.  [21.3.2.8 Math.atan2 ( _y_, _x_ )](#sec-math.atan2 "Math.atan2 ( y, x )")
             9.  [21.3.2.9 Math.cbrt ( _x_ )](#sec-math.cbrt "Math.cbrt ( x )")
             10.  [21.3.2.10 Math.ceil ( _x_ )](#sec-math.ceil "Math.ceil ( x )")
             11.  [21.3.2.11 Math.clz32 ( _x_ )](#sec-math.clz32 "Math.clz32 ( x )")
             12.  [21.3.2.12 Math.cos ( _x_ )](#sec-math.cos "Math.cos ( x )")
             13.  [21.3.2.13 Math.cosh ( _x_ )](#sec-math.cosh "Math.cosh ( x )")
             14.  [21.3.2.14 Math.exp ( _x_ )](#sec-math.exp "Math.exp ( x )")
             15.  [21.3.2.15 Math.expm1 ( _x_ )](#sec-math.expm1 "Math.expm1 ( x )")
             16.  [21.3.2.16 Math.floor ( _x_ )](#sec-math.floor "Math.floor ( x )")
             17.  [21.3.2.17 Math.fround ( _x_ )](#sec-math.fround "Math.fround ( x )")
             18.  [21.3.2.18 Math.f16round ( _x_ )](#sec-math.f16round "Math.f16round ( x )")
             19.  [21.3.2.19 Math.hypot ( ..._args_ )](#sec-math.hypot "Math.hypot ( ...args )")
             20.  [21.3.2.20 Math.imul ( _x_, _y_ )](#sec-math.imul "Math.imul ( x, y )")
             21.  [21.3.2.21 Math.log ( _x_ )](#sec-math.log "Math.log ( x )")
             22.  [21.3.2.22 Math.log1p ( _x_ )](#sec-math.log1p "Math.log1p ( x )")
             23.  [21.3.2.23 Math.log10 ( _x_ )](#sec-math.log10 "Math.log10 ( x )")
             24.  [21.3.2.24 Math.log2 ( _x_ )](#sec-math.log2 "Math.log2 ( x )")
             25.  [21.3.2.25 Math.max ( ..._args_ )](#sec-math.max "Math.max ( ...args )")
             26.  [21.3.2.26 Math.min ( ..._args_ )](#sec-math.min "Math.min ( ...args )")
             27.  [21.3.2.27 Math.pow ( _base_, _exponent_ )](#sec-math.pow "Math.pow ( base, exponent )")
             28.  [21.3.2.28 Math.random ( )](#sec-math.random "Math.random ( )")
             29.  [21.3.2.29 Math.round ( _x_ )](#sec-math.round "Math.round ( x )")
             30.  [21.3.2.30 Math.sign ( _x_ )](#sec-math.sign "Math.sign ( x )")
             31.  [21.3.2.31 Math.sin ( _x_ )](#sec-math.sin "Math.sin ( x )")
             32.  [21.3.2.32 Math.sinh ( _x_ )](#sec-math.sinh "Math.sinh ( x )")
             33.  [21.3.2.33 Math.sqrt ( _x_ )](#sec-math.sqrt "Math.sqrt ( x )")
             34.  [21.3.2.34 Math.sumPrecise ( _items_ )](#sec-math.sumprecise "Math.sumPrecise ( items )")
             35.  [21.3.2.35 Math.tan ( _x_ )](#sec-math.tan "Math.tan ( x )")
             36.  [21.3.2.36 Math.tanh ( _x_ )](#sec-math.tanh "Math.tanh ( x )")
             37.  [21.3.2.37 Math.trunc ( _x_ )](#sec-math.trunc "Math.trunc ( x )")
     4.  +[21.4 Date Objects](#sec-date-objects "Date Objects")
         1.  +[21.4.1 Overview of Date Objects and Definitions of Abstract Operations](#sec-overview-of-date-objects-and-definitions-of-abstract-operations "Overview of Date Objects and Definitions of Abstract Operations")
             1.  [21.4.1.1 Time Values and Time Range](#sec-time-values-and-time-range "Time Values and Time Range")
             2.  [21.4.1.2 Time-related Constants](#sec-time-related-constants "Time-related Constants")
             3.  [21.4.1.3 Day ( _t_ )](#sec-day "Day ( t )")
             4.  [21.4.1.4 TimeWithinDay ( _t_ )](#sec-timewithinday "TimeWithinDay ( t )")
             5.  [21.4.1.5 DaysInYear ( _y_ )](#sec-daysinyear "DaysInYear ( y )")
             6.  [21.4.1.6 DayFromYear ( _y_ )](#sec-dayfromyear "DayFromYear ( y )")
             7.  [21.4.1.7 TimeFromYear ( _y_ )](#sec-timefromyear "TimeFromYear ( y )")
             8.  [21.4.1.8 YearFromTime ( _t_ )](#sec-yearfromtime "YearFromTime ( t )")
             9.  [21.4.1.9 DayWithinYear ( _t_ )](#sec-daywithinyear "DayWithinYear ( t )")
             10.  [21.4.1.10 InLeapYear ( _t_ )](#sec-inleapyear "InLeapYear ( t )")
             11.  [21.4.1.11 MonthFromTime ( _t_ )](#sec-monthfromtime "MonthFromTime ( t )")
             12.  [21.4.1.12 DateFromTime ( _t_ )](#sec-datefromtime "DateFromTime ( t )")
             13.  [21.4.1.13 WeekDay ( _t_ )](#sec-weekday "WeekDay ( t )")
             14.  [21.4.1.14 HourFromTime ( _t_ )](#sec-hourfromtime "HourFromTime ( t )")
             15.  [21.4.1.15 MinFromTime ( _t_ )](#sec-minfromtime "MinFromTime ( t )")
             16.  [21.4.1.16 SecFromTime ( _t_ )](#sec-secfromtime "SecFromTime ( t )")
             17.  [21.4.1.17 msFromTime ( _t_ )](#sec-msfromtime "msFromTime ( t )")
             18.  [21.4.1.18 GetUTCEpochNanoseconds ( _year_, _month_, _day_, _hour_, _minute_, _second_, _millisecond_, _microsecond_, _nanosecond_ )](#sec-getutcepochnanoseconds "GetUTCEpochNanoseconds ( year, month, day, hour, minute, second, millisecond, microsecond, nanosecond )")
             19.  [21.4.1.19 Time Zone Identifiers](#sec-time-zone-identifiers "Time Zone Identifiers")
             20.  [21.4.1.20 GetNamedTimeZoneEpochNanoseconds ( _timeZoneIdentifier_, _year_, _month_, _day_, _hour_, _minute_, _second_, _millisecond_, _microsecond_, _nanosecond_ )](#sec-getnamedtimezoneepochnanoseconds "GetNamedTimeZoneEpochNanoseconds ( timeZoneIdentifier, year, month, day, hour, minute, second, millisecond, microsecond, nanosecond )")
             21.  [21.4.1.21 GetNamedTimeZoneOffsetNanoseconds ( _timeZoneIdentifier_, _epochNanoseconds_ )](#sec-getnamedtimezoneoffsetnanoseconds "GetNamedTimeZoneOffsetNanoseconds ( timeZoneIdentifier, epochNanoseconds )")
             22.  [21.4.1.22 Time Zone Identifier Record](#sec-time-zone-identifier-record "Time Zone Identifier Record")
             23.  [21.4.1.23 AvailableNamedTimeZoneIdentifiers ( )](#sec-availablenamedtimezoneidentifiers "AvailableNamedTimeZoneIdentifiers ( )")
             24.  [21.4.1.24 SystemTimeZoneIdentifier ( )](#sec-systemtimezoneidentifier "SystemTimeZoneIdentifier ( )")
             25.  [21.4.1.25 LocalTime ( _t_ )](#sec-localtime "LocalTime ( t )")
             26.  [21.4.1.26 UTC ( _t_ )](#sec-utc-t "UTC ( t )")
             27.  [21.4.1.27 MakeTime ( _hour_, _min_, _sec_, _ms_ )](#sec-maketime "MakeTime ( hour, min, sec, ms )")
             28.  [21.4.1.28 MakeDay ( _year_, _month_, _date_ )](#sec-makeday "MakeDay ( year, month, date )")
             29.  [21.4.1.29 MakeDate ( _day_, _time_ )](#sec-makedate "MakeDate ( day, time )")
             30.  [21.4.1.30 MakeFullYear ( _year_ )](#sec-makefullyear "MakeFullYear ( year )")
             31.  [21.4.1.31 TimeClip ( _time_ )](#sec-timeclip "TimeClip ( time )")
             32.  +[21.4.1.32 Date Time String Format](#sec-date-time-string-format "Date Time String Format")
                  1.  [21.4.1.32.1 Expanded Years](#sec-expanded-years "Expanded Years")
             33.  +[21.4.1.33 Time Zone Offset String Format](#sec-time-zone-offset-strings "Time Zone Offset String Format")
                  1.  [21.4.1.33.1 IsTimeZoneOffsetString ( _offsetString_ )](#sec-istimezoneoffsetstring "IsTimeZoneOffsetString ( offsetString )")
                  2.  [21.4.1.33.2 ParseTimeZoneOffsetString ( _offsetString_ )](#sec-parsetimezoneoffsetstring "ParseTimeZoneOffsetString ( offsetString )")
         2.  +[21.4.2 The Date Constructor](#sec-date-constructor "The Date Constructor")
             1.  [21.4.2.1 Date ( ..._values_ )](#sec-date "Date ( ...values )")
         3.  +[21.4.3 Properties of the Date Constructor](#sec-properties-of-the-date-constructor "Properties of the Date Constructor")
             1.  [21.4.3.1 Date.now ( )](#sec-date.now "Date.now ( )")
             2.  [21.4.3.2 Date.parse ( _string_ )](#sec-date.parse "Date.parse ( string )")
             3.  [21.4.3.3 Date.prototype](#sec-date.prototype "Date.prototype")
             4.  [21.4.3.4 Date.UTC ( _year_ \[, _month_ \[, _date_ \[, _hours_ \[, _minutes_ \[, _seconds_ \[, _ms_ \] \] \] \] \] \] )](#sec-date.utc "Date.UTC ( year [, month [, date [, hours [, minutes [, seconds [, ms]]]]]] )")
         4.  +[21.4.4 Properties of the Date Prototype Object](#sec-properties-of-the-date-prototype-object "Properties of the Date Prototype Object")
             1.  [21.4.4.1 Date.prototype.constructor](#sec-date.prototype.constructor "Date.prototype.constructor")
             2.  [21.4.4.2 Date.prototype.getDate ( )](#sec-date.prototype.getdate "Date.prototype.getDate ( )")
             3.  [21.4.4.3 Date.prototype.getDay ( )](#sec-date.prototype.getday "Date.prototype.getDay ( )")
             4.  [21.4.4.4 Date.prototype.getFullYear ( )](#sec-date.prototype.getfullyear "Date.prototype.getFullYear ( )")
             5.  [21.4.4.5 Date.prototype.getHours ( )](#sec-date.prototype.gethours "Date.prototype.getHours ( )")
             6.  [21.4.4.6 Date.prototype.getMilliseconds ( )](#sec-date.prototype.getmilliseconds "Date.prototype.getMilliseconds ( )")
             7.  [21.4.4.7 Date.prototype.getMinutes ( )](#sec-date.prototype.getminutes "Date.prototype.getMinutes ( )")
             8.  [21.4.4.8 Date.prototype.getMonth ( )](#sec-date.prototype.getmonth "Date.prototype.getMonth ( )")
             9.  [21.4.4.9 Date.prototype.getSeconds ( )](#sec-date.prototype.getseconds "Date.prototype.getSeconds ( )")
             10.  [21.4.4.10 Date.prototype.getTime ( )](#sec-date.prototype.gettime "Date.prototype.getTime ( )")
             11.  [21.4.4.11 Date.prototype.getTimezoneOffset ( )](#sec-date.prototype.gettimezoneoffset "Date.prototype.getTimezoneOffset ( )")
             12.  [21.4.4.12 Date.prototype.getUTCDate ( )](#sec-date.prototype.getutcdate "Date.prototype.getUTCDate ( )")
             13.  [21.4.4.13 Date.prototype.getUTCDay ( )](#sec-date.prototype.getutcday "Date.prototype.getUTCDay ( )")
             14.  [21.4.4.14 Date.prototype.getUTCFullYear ( )](#sec-date.prototype.getutcfullyear "Date.prototype.getUTCFullYear ( )")
             15.  [21.4.4.15 Date.prototype.getUTCHours ( )](#sec-date.prototype.getutchours "Date.prototype.getUTCHours ( )")
             16.  [21.4.4.16 Date.prototype.getUTCMilliseconds ( )](#sec-date.prototype.getutcmilliseconds "Date.prototype.getUTCMilliseconds ( )")
             17.  [21.4.4.17 Date.prototype.getUTCMinutes ( )](#sec-date.prototype.getutcminutes "Date.prototype.getUTCMinutes ( )")
             18.  [21.4.4.18 Date.prototype.getUTCMonth ( )](#sec-date.prototype.getutcmonth "Date.prototype.getUTCMonth ( )")
             19.  [21.4.4.19 Date.prototype.getUTCSeconds ( )](#sec-date.prototype.getutcseconds "Date.prototype.getUTCSeconds ( )")
             20.  [21.4.4.20 Date.prototype.setDate ( _date_ )](#sec-date.prototype.setdate "Date.prototype.setDate ( date )")
             21.  [21.4.4.21 Date.prototype.setFullYear ( _year_ \[, _month_ \[, _date_ \] \] )](#sec-date.prototype.setfullyear "Date.prototype.setFullYear ( year [, month [, date]] )")
             22.  [21.4.4.22 Date.prototype.setHours ( _hour_ \[, _min_ \[, _sec_ \[, _ms_ \] \] \] )](#sec-date.prototype.sethours "Date.prototype.setHours ( hour [, min [, sec [, ms]]] )")
             23.  [21.4.4.23 Date.prototype.setMilliseconds ( _ms_ )](#sec-date.prototype.setmilliseconds "Date.prototype.setMilliseconds ( ms )")
             24.  [21.4.4.24 Date.prototype.setMinutes ( _min_ \[, _sec_ \[, _ms_ \] \] )](#sec-date.prototype.setminutes "Date.prototype.setMinutes ( min [, sec [, ms]] )")
             25.  [21.4.4.25 Date.prototype.setMonth ( _month_ \[, _date_ \] )](#sec-date.prototype.setmonth "Date.prototype.setMonth ( month [, date] )")
             26.  [21.4.4.26 Date.prototype.setSeconds ( _sec_ \[, _ms_ \] )](#sec-date.prototype.setseconds "Date.prototype.setSeconds ( sec [, ms] )")
             27.  [21.4.4.27 Date.prototype.setTime ( _time_ )](#sec-date.prototype.settime "Date.prototype.setTime ( time )")
             28.  [21.4.4.28 Date.prototype.setUTCDate ( _date_ )](#sec-date.prototype.setutcdate "Date.prototype.setUTCDate ( date )")
             29.  [21.4.4.29 Date.prototype.setUTCFullYear ( _year_ \[, _month_ \[, _date_ \] \] )](#sec-date.prototype.setutcfullyear "Date.prototype.setUTCFullYear ( year [, month [, date]] )")
             30.  [21.4.4.30 Date.prototype.setUTCHours ( _hour_ \[, _min_ \[, _sec_ \[, _ms_ \] \] \] )](#sec-date.prototype.setutchours "Date.prototype.setUTCHours ( hour [, min [, sec [, ms]]] )")
             31.  [21.4.4.31 Date.prototype.setUTCMilliseconds ( _ms_ )](#sec-date.prototype.setutcmilliseconds "Date.prototype.setUTCMilliseconds ( ms )")
             32.  [21.4.4.32 Date.prototype.setUTCMinutes ( _min_ \[, _sec_ \[, _ms_ \] \] )](#sec-date.prototype.setutcminutes "Date.prototype.setUTCMinutes ( min [, sec [, ms]] )")
             33.  [21.4.4.33 Date.prototype.setUTCMonth ( _month_ \[, _date_ \] )](#sec-date.prototype.setutcmonth "Date.prototype.setUTCMonth ( month [, date] )")
             34.  [21.4.4.34 Date.prototype.setUTCSeconds ( _sec_ \[, _ms_ \] )](#sec-date.prototype.setutcseconds "Date.prototype.setUTCSeconds ( sec [, ms] )")
             35.  [21.4.4.35 Date.prototype.toDateString ( )](#sec-date.prototype.todatestring "Date.prototype.toDateString ( )")
             36.  [21.4.4.36 Date.prototype.toISOString ( )](#sec-date.prototype.toisostring "Date.prototype.toISOString ( )")
             37.  [21.4.4.37 Date.prototype.toJSON ( _key_ )](#sec-date.prototype.tojson "Date.prototype.toJSON ( key )")
             38.  [21.4.4.38 Date.prototype.toLocaleDateString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-date.prototype.tolocaledatestring "Date.prototype.toLocaleDateString ( [reserved1 [, reserved2]] )")
             39.  [21.4.4.39 Date.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-date.prototype.tolocalestring "Date.prototype.toLocaleString ( [reserved1 [, reserved2]] )")
             40.  [21.4.4.40 Date.prototype.toLocaleTimeString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-date.prototype.tolocaletimestring "Date.prototype.toLocaleTimeString ( [reserved1 [, reserved2]] )")
             41.  +[21.4.4.41 Date.prototype.toString ( )](#sec-date.prototype.tostring "Date.prototype.toString ( )")
                  1.  [21.4.4.41.1 TimeString ( _tv_ )](#sec-timestring "TimeString ( tv )")
                  2.  [21.4.4.41.2 DateString ( _tv_ )](#sec-datestring "DateString ( tv )")
                  3.  [21.4.4.41.3 TimeZoneString ( _tv_ )](#sec-timezoneestring "TimeZoneString ( tv )")
                  4.  [21.4.4.41.4 ToDateString ( _tv_ )](#sec-todatestring "ToDateString ( tv )")
             42.  [21.4.4.42 Date.prototype.toTimeString ( )](#sec-date.prototype.totimestring "Date.prototype.toTimeString ( )")
             43.  [21.4.4.43 Date.prototype.toUTCString ( )](#sec-date.prototype.toutcstring "Date.prototype.toUTCString ( )")
             44.  [21.4.4.44 Date.prototype.valueOf ( )](#sec-date.prototype.valueof "Date.prototype.valueOf ( )")
             45.  [21.4.4.45 Date.prototype \[%Symbol.toPrimitive% \] ( _hint_ )](#sec-date.prototype-%symbol.toprimitive% "Date.prototype [%Symbol.toPrimitive%] ( hint )")
         5.  [21.4.5 Properties of Date Instances](#sec-properties-of-date-instances "Properties of Date Instances")
23.  +[22 Text Processing](#sec-text-processing "Text Processing")
     1.  +[22.1 String Objects](#sec-string-objects "String Objects")
         1.  +[22.1.1 The String Constructor](#sec-string-constructor "The String Constructor")
             1.  [22.1.1.1 String ( _value_ )](#sec-string-constructor-string-value "String ( value )")
         2.  +[22.1.2 Properties of the String Constructor](#sec-properties-of-the-string-constructor "Properties of the String Constructor")
             1.  [22.1.2.1 String.fromCharCode ( ..._codeUnits_ )](#sec-string.fromcharcode "String.fromCharCode ( ...codeUnits )")
             2.  [22.1.2.2 String.fromCodePoint ( ..._codePoints_ )](#sec-string.fromcodepoint "String.fromCodePoint ( ...codePoints )")
             3.  [22.1.2.3 String.prototype](#sec-string.prototype "String.prototype")
             4.  [22.1.2.4 String.raw ( _template_, ..._substitutions_ )](#sec-string.raw "String.raw ( template, ...substitutions )")
         3.  +[22.1.3 Properties of the String Prototype Object](#sec-properties-of-the-string-prototype-object "Properties of the String Prototype Object")
             1.  [22.1.3.1 String.prototype.at ( _index_ )](#sec-string.prototype.at "String.prototype.at ( index )")
             2.  [22.1.3.2 String.prototype.charAt ( _pos_ )](#sec-string.prototype.charat "String.prototype.charAt ( pos )")
             3.  [22.1.3.3 String.prototype.charCodeAt ( _pos_ )](#sec-string.prototype.charcodeat "String.prototype.charCodeAt ( pos )")
             4.  [22.1.3.4 String.prototype.codePointAt ( _pos_ )](#sec-string.prototype.codepointat "String.prototype.codePointAt ( pos )")
             5.  [22.1.3.5 String.prototype.concat ( ..._args_ )](#sec-string.prototype.concat "String.prototype.concat ( ...args )")
             6.  [22.1.3.6 String.prototype.constructor](#sec-string.prototype.constructor "String.prototype.constructor")
             7.  [22.1.3.7 String.prototype.endsWith ( _searchString_ \[, _endPosition_ \] )](#sec-string.prototype.endswith "String.prototype.endsWith ( searchString [, endPosition] )")
             8.  [22.1.3.8 String.prototype.includes ( _searchString_ \[, _position_ \] )](#sec-string.prototype.includes "String.prototype.includes ( searchString [, position] )")
             9.  [22.1.3.9 String.prototype.indexOf ( _searchString_ \[, _position_ \] )](#sec-string.prototype.indexof "String.prototype.indexOf ( searchString [, position] )")
             10.  [22.1.3.10 String.prototype.isWellFormed ( )](#sec-string.prototype.iswellformed "String.prototype.isWellFormed ( )")
             11.  [22.1.3.11 String.prototype.lastIndexOf ( _searchString_ \[, _position_ \] )](#sec-string.prototype.lastindexof "String.prototype.lastIndexOf ( searchString [, position] )")
             12.  [22.1.3.12 String.prototype.localeCompare ( _that_ \[, _reserved1_ \[, _reserved2_ \] \] )](#sec-string.prototype.localecompare "String.prototype.localeCompare ( that [, reserved1 [, reserved2]] )")
             13.  [22.1.3.13 String.prototype.match ( _regexp_ )](#sec-string.prototype.match "String.prototype.match ( regexp )")
             14.  [22.1.3.14 String.prototype.matchAll ( _regexp_ )](#sec-string.prototype.matchall "String.prototype.matchAll ( regexp )")
             15.  [22.1.3.15 String.prototype.normalize ( \[_form_ \] )](#sec-string.prototype.normalize "String.prototype.normalize ( [form] )")
             16.  [22.1.3.16 String.prototype.padEnd ( _maxLength_ \[, _fillString_ \] )](#sec-string.prototype.padend "String.prototype.padEnd ( maxLength [, fillString] )")
             17.  +[22.1.3.17 String.prototype.padStart ( _maxLength_ \[, _fillString_ \] )](#sec-string.prototype.padstart "String.prototype.padStart ( maxLength [, fillString] )")
                  1.  [22.1.3.17.1 StringPaddingBuiltinsImpl ( _O_, _maxLength_, _fillString_, _placement_ )](#sec-stringpaddingbuiltinsimpl "StringPaddingBuiltinsImpl ( O, maxLength, fillString, placement )")
                  2.  [22.1.3.17.2 StringPad ( _S_, _maxLength_, _fillString_, _placement_ )](#sec-stringpad "StringPad ( S, maxLength, fillString, placement )")
                  3.  [22.1.3.17.3 ToZeroPaddedDecimalString ( _n_, _minLength_ )](#sec-tozeropaddeddecimalstring "ToZeroPaddedDecimalString ( n, minLength )")
             18.  [22.1.3.18 String.prototype.repeat ( _count_ )](#sec-string.prototype.repeat "String.prototype.repeat ( count )")
             19.  +[22.1.3.19 String.prototype.replace ( _searchValue_, _replaceValue_ )](#sec-string.prototype.replace "String.prototype.replace ( searchValue, replaceValue )")
                  1.  [22.1.3.19.1 GetSubstitution ( _matched_, _str_, _position_, _captures_, _namedCaptures_, _replacementTemplate_ )](#sec-getsubstitution "GetSubstitution ( matched, str, position, captures, namedCaptures, replacementTemplate )")
             20.  [22.1.3.20 String.prototype.replaceAll ( _searchValue_, _replaceValue_ )](#sec-string.prototype.replaceall "String.prototype.replaceAll ( searchValue, replaceValue )")
             21.  [22.1.3.21 String.prototype.search ( _regexp_ )](#sec-string.prototype.search "String.prototype.search ( regexp )")
             22.  [22.1.3.22 String.prototype.slice ( _start_, _end_ )](#sec-string.prototype.slice "String.prototype.slice ( start, end )")
             23.  [22.1.3.23 String.prototype.split ( _separator_, _limit_ )](#sec-string.prototype.split "String.prototype.split ( separator, limit )")
             24.  [22.1.3.24 String.prototype.startsWith ( _searchString_ \[, _position_ \] )](#sec-string.prototype.startswith "String.prototype.startsWith ( searchString [, position] )")
             25.  [22.1.3.25 String.prototype.substring ( _start_, _end_ )](#sec-string.prototype.substring "String.prototype.substring ( start, end )")
             26.  [22.1.3.26 String.prototype.toLocaleLowerCase ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-string.prototype.tolocalelowercase "String.prototype.toLocaleLowerCase ( [reserved1 [, reserved2]] )")
             27.  [22.1.3.27 String.prototype.toLocaleUpperCase ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-string.prototype.tolocaleuppercase "String.prototype.toLocaleUpperCase ( [reserved1 [, reserved2]] )")
             28.  [22.1.3.28 String.prototype.toLowerCase ( )](#sec-string.prototype.tolowercase "String.prototype.toLowerCase ( )")
             29.  [22.1.3.29 String.prototype.toString ( )](#sec-string.prototype.tostring "String.prototype.toString ( )")
             30.  [22.1.3.30 String.prototype.toUpperCase ( )](#sec-string.prototype.touppercase "String.prototype.toUpperCase ( )")
             31.  [22.1.3.31 String.prototype.toWellFormed ( )](#sec-string.prototype.towellformed "String.prototype.toWellFormed ( )")
             32.  +[22.1.3.32 String.prototype.trim ( )](#sec-string.prototype.trim "String.prototype.trim ( )")
                  1.  [22.1.3.32.1 TrimString ( _string_, _where_ )](#sec-trimstring "TrimString ( string, where )")
             33.  [22.1.3.33 String.prototype.trimEnd ( )](#sec-string.prototype.trimend "String.prototype.trimEnd ( )")
             34.  [22.1.3.34 String.prototype.trimStart ( )](#sec-string.prototype.trimstart "String.prototype.trimStart ( )")
             35.  +[22.1.3.35 String.prototype.valueOf ( )](#sec-string.prototype.valueof "String.prototype.valueOf ( )")
                  1.  [22.1.3.35.1 ThisStringValue ( _value_ )](#sec-thisstringvalue "ThisStringValue ( value )")
             36.  [22.1.3.36 String.prototype \[%Symbol.iterator% \] ( )](#sec-string.prototype-%symbol.iterator% "String.prototype [%Symbol.iterator%] ( )")
         4.  +[22.1.4 Properties of String Instances](#sec-properties-of-string-instances "Properties of String Instances")
             1.  [22.1.4.1 length](#sec-properties-of-string-instances-length "length")
         5.  +[22.1.5 String Iterator Objects](#sec-string-iterator-objects "String Iterator Objects")
             1.  +[22.1.5.1 The %StringIteratorPrototype% Object](#sec-%stringiteratorprototype%-object "The %StringIteratorPrototype% Object")
                 1.  [22.1.5.1.1 %StringIteratorPrototype%.next ( )](#sec-%stringiteratorprototype%.next "%StringIteratorPrototype%.next ( )")
                 2.  [22.1.5.1.2 %StringIteratorPrototype% \[%Symbol.toStringTag% \]](#sec-%stringiteratorprototype%-%symbol.tostringtag% "%StringIteratorPrototype% [%Symbol.toStringTag%]")
     2.  +[22.2 RegExp (Regular Expression) Objects](#sec-regexp-regular-expression-objects "RegExp (Regular Expression) Objects")
         1.  +[22.2.1 Patterns](#sec-patterns "Patterns")
             1.  [22.2.1.1 SS: Early Errors](#sec-patterns-static-semantics-early-errors "Static Semantics: Early Errors")
             2.  [22.2.1.2 SS: CountLeftCapturingParensWithin ( _node_ )](#sec-countleftcapturingparenswithin "Static Semantics: CountLeftCapturingParensWithin ( node )")
             3.  [22.2.1.3 SS: CountLeftCapturingParensBefore ( _node_ )](#sec-countleftcapturingparensbefore "Static Semantics: CountLeftCapturingParensBefore ( node )")
             4.  [22.2.1.4 SS: MightBothParticipate ( _x_, _y_ )](#sec-mightbothparticipate "Static Semantics: MightBothParticipate ( x, y )")
             5.  [22.2.1.5 SS: CapturingGroupNumber](#sec-patterns-static-semantics-capturing-group-number "Static Semantics: CapturingGroupNumber")
             6.  [22.2.1.6 SS: IsCharacterClass](#sec-patterns-static-semantics-is-character-class "Static Semantics: IsCharacterClass")
             7.  [22.2.1.7 SS: CharacterValue](#sec-patterns-static-semantics-character-value "Static Semantics: CharacterValue")
             8.  [22.2.1.8 SS: MayContainStrings](#sec-static-semantics-maycontainstrings "Static Semantics: MayContainStrings")
             9.  [22.2.1.9 SS: GroupSpecifiersThatMatch ( _thisGroupName_ )](#sec-groupspecifiersthatmatch "Static Semantics: GroupSpecifiersThatMatch ( thisGroupName )")
             10.  [22.2.1.10 SS: CapturingGroupName](#sec-static-semantics-capturinggroupname "Static Semantics: CapturingGroupName")
             11.  [22.2.1.11 SS: RegExpIdentifierCodePoints](#sec-regexpidentifiercodepoints "Static Semantics: RegExpIdentifierCodePoints")
             12.  [22.2.1.12 SS: RegExpIdentifierCodePoint](#sec-regexpidentifiercodepoint "Static Semantics: RegExpIdentifierCodePoint")
         2.  +[22.2.2 Pattern Semantics](#sec-pattern-semantics "Pattern Semantics")
             1.  +[22.2.2.1 Notation](#sec-pattern-notation "Notation")
                 1.  [22.2.2.1.1 RegExp Records](#sec-regexp-records "RegExp Records")
             2.  [22.2.2.2 RS: CompilePattern](#sec-compilepattern "Runtime Semantics: CompilePattern")
             3.  +[22.2.2.3 RS: CompileSubpattern](#sec-compilesubpattern "Runtime Semantics: CompileSubpattern")
                 1.  [22.2.2.3.1 RepeatMatcher ( _m_, _min_, _max_, _greedy_, _x_, _c_, _parenIndex_, _parenCount_ )](#sec-runtime-semantics-repeatmatcher-abstract-operation "RepeatMatcher ( m, min, max, greedy, x, c, parenIndex, parenCount )")
                 2.  [22.2.2.3.2 EmptyMatcher ( )](#sec-emptymatcher "EmptyMatcher ( )")
                 3.  [22.2.2.3.3 MatchTwoAlternatives ( _m1_, _m2_ )](#sec-matchtwoalternatives "MatchTwoAlternatives ( m1, m2 )")
                 4.  [22.2.2.3.4 MatchSequence ( _m1_, _m2_, _direction_ )](#sec-matchsequence "MatchSequence ( m1, m2, direction )")
             4.  +[22.2.2.4 RS: CompileAssertion](#sec-compileassertion "Runtime Semantics: CompileAssertion")
                 1.  [22.2.2.4.1 IsWordChar ( _rer_, _Input_, _e_ )](#sec-runtime-semantics-iswordchar-abstract-operation "IsWordChar ( rer, Input, e )")
             5.  [22.2.2.5 RS: CompileQuantifier](#sec-compilequantifier "Runtime Semantics: CompileQuantifier")
             6.  [22.2.2.6 RS: CompileQuantifierPrefix](#sec-compilequantifierprefix "Runtime Semantics: CompileQuantifierPrefix")
             7.  +[22.2.2.7 RS: CompileAtom](#sec-compileatom "Runtime Semantics: CompileAtom")
                 1.  [22.2.2.7.1 CharacterSetMatcher ( _rer_, _A_, _invert_, _direction_ )](#sec-runtime-semantics-charactersetmatcher-abstract-operation "CharacterSetMatcher ( rer, A, invert, direction )")
                 2.  [22.2.2.7.2 BackreferenceMatcher ( _rer_, _ns_, _direction_ )](#sec-backreference-matcher "BackreferenceMatcher ( rer, ns, direction )")
                 3.  [22.2.2.7.3 Canonicalize ( _rer_, _ch_ )](#sec-runtime-semantics-canonicalize-ch "Canonicalize ( rer, ch )")
                 4.  [22.2.2.7.4 UpdateModifiers ( _rer_, _add_, _remove_ )](#sec-updatemodifiers "UpdateModifiers ( rer, add, remove )")
             8.  [22.2.2.8 RS: CompileCharacterClass](#sec-compilecharacterclass "Runtime Semantics: CompileCharacterClass")
             9.  +[22.2.2.9 RS: CompileToCharSet](#sec-compiletocharset "Runtime Semantics: CompileToCharSet")
                 1.  [22.2.2.9.1 CharacterRange ( _A_, _B_ )](#sec-runtime-semantics-characterrange-abstract-operation "CharacterRange ( A, B )")
                 2.  [22.2.2.9.2 HasEitherUnicodeFlag ( _rer_ )](#sec-runtime-semantics-haseitherunicodeflag-abstract-operation "HasEitherUnicodeFlag ( rer )")
                 3.  [22.2.2.9.3 WordCharacters ( _rer_ )](#sec-wordcharacters "WordCharacters ( rer )")
                 4.  [22.2.2.9.4 AllCharacters ( _rer_ )](#sec-allcharacters "AllCharacters ( rer )")
                 5.  [22.2.2.9.5 MaybeSimpleCaseFolding ( _rer_, _A_ )](#sec-maybesimplecasefolding "MaybeSimpleCaseFolding ( rer, A )")
                 6.  [22.2.2.9.6 CharacterComplement ( _rer_, _S_ )](#sec-charactercomplement "CharacterComplement ( rer, S )")
                 7.  [22.2.2.9.7 UnicodeMatchProperty ( _rer_, _p_ )](#sec-runtime-semantics-unicodematchproperty-p "UnicodeMatchProperty ( rer, p )")
                 8.  [22.2.2.9.8 UnicodeMatchPropertyValue ( _p_, _v_ )](#sec-runtime-semantics-unicodematchpropertyvalue-p-v "UnicodeMatchPropertyValue ( p, v )")
             10.  [22.2.2.10 RS: CompileClassSetString](#sec-compileclasssetstring "Runtime Semantics: CompileClassSetString")
         3.  +[22.2.3 Abstract Operations for RegExp Creation](#sec-abstract-operations-for-regexp-creation "Abstract Operations for RegExp Creation")
             1.  [22.2.3.1 RegExpCreate ( _P_, _F_ )](#sec-regexpcreate "RegExpCreate ( P, F )")
             2.  [22.2.3.2 RegExpAlloc ( _newTarget_ )](#sec-regexpalloc "RegExpAlloc ( newTarget )")
             3.  [22.2.3.3 RegExpInitialize ( _obj_, _pattern_, _flags_ )](#sec-regexpinitialize "RegExpInitialize ( obj, pattern, flags )")
             4.  [22.2.3.4 SS: ParsePattern ( _patternText_, _u_, _v_ )](#sec-parsepattern "Static Semantics: ParsePattern ( patternText, u, v )")
         4.  +[22.2.4 The RegExp Constructor](#sec-regexp-constructor "The RegExp Constructor")
             1.  [22.2.4.1 RegExp ( _pattern_, _flags_ )](#sec-regexp-pattern-flags "RegExp ( pattern, flags )")
         5.  +[22.2.5 Properties of the RegExp Constructor](#sec-properties-of-the-regexp-constructor "Properties of the RegExp Constructor")
             1.  +[22.2.5.1 RegExp.escape ( _S_ )](#sec-regexp.escape "RegExp.escape ( S )")
                 1.  [22.2.5.1.1 EncodeForRegExpEscape ( _cp_ )](#sec-encodeforregexpescape "EncodeForRegExpEscape ( cp )")
             2.  [22.2.5.2 RegExp.prototype](#sec-regexp.prototype "RegExp.prototype")
             3.  [22.2.5.3 get RegExp \[%Symbol.species% \]](#sec-get-regexp-%symbol.species% "get RegExp [%Symbol.species%]")
         6.  +[22.2.6 Properties of the RegExp Prototype Object](#sec-properties-of-the-regexp-prototype-object "Properties of the RegExp Prototype Object")
             1.  [22.2.6.1 RegExp.prototype.constructor](#sec-regexp.prototype.constructor "RegExp.prototype.constructor")
             2.  [22.2.6.2 RegExp.prototype.exec ( _string_ )](#sec-regexp.prototype.exec "RegExp.prototype.exec ( string )")
             3.  [22.2.6.3 get RegExp.prototype.dotAll](#sec-get-regexp.prototype.dotAll "get RegExp.prototype.dotAll")
             4.  +[22.2.6.4 get RegExp.prototype.flags](#sec-get-regexp.prototype.flags "get RegExp.prototype.flags")
                 1.  [22.2.6.4.1 RegExpHasFlag ( _R_, _codeUnit_ )](#sec-regexphasflag "RegExpHasFlag ( R, codeUnit )")
             5.  [22.2.6.5 get RegExp.prototype.global](#sec-get-regexp.prototype.global "get RegExp.prototype.global")
             6.  [22.2.6.6 get RegExp.prototype.hasIndices](#sec-get-regexp.prototype.hasIndices "get RegExp.prototype.hasIndices")
             7.  [22.2.6.7 get RegExp.prototype.ignoreCase](#sec-get-regexp.prototype.ignorecase "get RegExp.prototype.ignoreCase")
             8.  [22.2.6.8 RegExp.prototype \[%Symbol.match% \] ( _string_ )](#sec-regexp.prototype-%symbol.match% "RegExp.prototype [%Symbol.match%] ( string )")
             9.  [22.2.6.9 RegExp.prototype \[%Symbol.matchAll% \] ( _string_ )](#sec-regexp-prototype-%symbol.matchall% "RegExp.prototype [%Symbol.matchAll%] ( string )")
             10.  [22.2.6.10 get RegExp.prototype.multiline](#sec-get-regexp.prototype.multiline "get RegExp.prototype.multiline")
             11.  [22.2.6.11 RegExp.prototype \[%Symbol.replace% \] ( _string_, _replaceValue_ )](#sec-regexp.prototype-%symbol.replace% "RegExp.prototype [%Symbol.replace%] ( string, replaceValue )")
             12.  [22.2.6.12 RegExp.prototype \[%Symbol.search% \] ( _string_ )](#sec-regexp.prototype-%symbol.search% "RegExp.prototype [%Symbol.search%] ( string )")
             13.  +[22.2.6.13 get RegExp.prototype.source](#sec-get-regexp.prototype.source "get RegExp.prototype.source")
                  1.  [22.2.6.13.1 EscapeRegExpPattern ( _P_, _F_ )](#sec-escaperegexppattern "EscapeRegExpPattern ( P, F )")
             14.  [22.2.6.14 RegExp.prototype \[%Symbol.split% \] ( _string_, _limit_ )](#sec-regexp.prototype-%symbol.split% "RegExp.prototype [%Symbol.split%] ( string, limit )")
             15.  [22.2.6.15 get RegExp.prototype.sticky](#sec-get-regexp.prototype.sticky "get RegExp.prototype.sticky")
             16.  [22.2.6.16 RegExp.prototype.test ( _S_ )](#sec-regexp.prototype.test "RegExp.prototype.test ( S )")
             17.  [22.2.6.17 RegExp.prototype.toString ( )](#sec-regexp.prototype.tostring "RegExp.prototype.toString ( )")
             18.  [22.2.6.18 get RegExp.prototype.unicode](#sec-get-regexp.prototype.unicode "get RegExp.prototype.unicode")
             19.  [22.2.6.19 get RegExp.prototype.unicodeSets](#sec-get-regexp.prototype.unicodesets "get RegExp.prototype.unicodeSets")
         7.  +[22.2.7 Abstract Operations for RegExp Matching](#sec-abstract-operations-for-regexp-matching "Abstract Operations for RegExp Matching")
             1.  [22.2.7.1 RegExpExec ( _R_, _S_ )](#sec-regexpexec "RegExpExec ( R, S )")
             2.  [22.2.7.2 RegExpBuiltinExec ( _R_, _S_ )](#sec-regexpbuiltinexec "RegExpBuiltinExec ( R, S )")
             3.  [22.2.7.3 AdvanceStringIndex ( _S_, _index_, _unicode_ )](#sec-advancestringindex "AdvanceStringIndex ( S, index, unicode )")
             4.  [22.2.7.4 GetStringIndex ( _S_, _codePointIndex_ )](#sec-getstringindex "GetStringIndex ( S, codePointIndex )")
             5.  [22.2.7.5 Match Records](#sec-match-records "Match Records")
             6.  [22.2.7.6 GetMatchString ( _S_, _match_ )](#sec-getmatchstring "GetMatchString ( S, match )")
             7.  [22.2.7.7 GetMatchIndexPair ( _S_, _match_ )](#sec-getmatchindexpair "GetMatchIndexPair ( S, match )")
             8.  [22.2.7.8 MakeMatchIndicesIndexPairArray ( _S_, _indices_, _groupNames_, _hasGroups_ )](#sec-makematchindicesindexpairarray "MakeMatchIndicesIndexPairArray ( S, indices, groupNames, hasGroups )")
         8.  +[22.2.8 Properties of RegExp Instances](#sec-properties-of-regexp-instances "Properties of RegExp Instances")
             1.  [22.2.8.1 lastIndex](#sec-lastindex "lastIndex")
         9.  +[22.2.9 RegExp String Iterator Objects](#sec-regexp-string-iterator-objects "RegExp String Iterator Objects")
             1.  [22.2.9.1 CreateRegExpStringIterator ( _R_, _S_, _global_, _fullUnicode_ )](#sec-createregexpstringiterator "CreateRegExpStringIterator ( R, S, global, fullUnicode )")
             2.  +[22.2.9.2 The %RegExpStringIteratorPrototype% Object](#sec-%regexpstringiteratorprototype%-object "The %RegExpStringIteratorPrototype% Object")
                 1.  [22.2.9.2.1 %RegExpStringIteratorPrototype%.next ( )](#sec-%regexpstringiteratorprototype%.next "%RegExpStringIteratorPrototype%.next ( )")
                 2.  [22.2.9.2.2 %RegExpStringIteratorPrototype% \[%Symbol.toStringTag% \]](#sec-%regexpstringiteratorprototype%-%symbol.tostringtag% "%RegExpStringIteratorPrototype% [%Symbol.toStringTag%]")
             3.  [22.2.9.3 Properties of RegExp String Iterator Instances](#sec-properties-of-regexp-string-iterator-instances "Properties of RegExp String Iterator Instances")
24.  +[23 Indexed Collections](#sec-indexed-collections "Indexed Collections")
     1.  +[23.1 Array Objects](#sec-array-objects "Array Objects")
         1.  +[23.1.1 The Array Constructor](#sec-array-constructor "The Array Constructor")
             1.  [23.1.1.1 Array ( ..._values_ )](#sec-array "Array ( ...values )")
         2.  +[23.1.2 Properties of the Array Constructor](#sec-properties-of-the-array-constructor "Properties of the Array Constructor")
             1.  [23.1.2.1 Array.from ( _items_ \[, _mapper_ \[, _thisArg_ \] \] )](#sec-array.from "Array.from ( items [, mapper [, thisArg]] )")
             2.  [23.1.2.2 Array.fromAsync ( _items_ \[, _mapper_ \[, _thisArg_ \] \] )](#sec-array.fromasync "Array.fromAsync ( items [, mapper [, thisArg]] )")
             3.  [23.1.2.3 Array.isArray ( _arg_ )](#sec-array.isarray "Array.isArray ( arg )")
             4.  [23.1.2.4 Array.of ( ..._items_ )](#sec-array.of "Array.of ( ...items )")
             5.  [23.1.2.5 Array.prototype](#sec-array.prototype "Array.prototype")
             6.  [23.1.2.6 get Array \[%Symbol.species% \]](#sec-get-array-%symbol.species% "get Array [%Symbol.species%]")
         3.  +[23.1.3 Properties of the Array Prototype Object](#sec-properties-of-the-array-prototype-object "Properties of the Array Prototype Object")
             1.  [23.1.3.1 Array.prototype.at ( _index_ )](#sec-array.prototype.at "Array.prototype.at ( index )")
             2.  +[23.1.3.2 Array.prototype.concat ( ..._items_ )](#sec-array.prototype.concat "Array.prototype.concat ( ...items )")
                 1.  [23.1.3.2.1 IsConcatSpreadable ( _O_ )](#sec-isconcatspreadable "IsConcatSpreadable ( O )")
             3.  [23.1.3.3 Array.prototype.constructor](#sec-array.prototype.constructor "Array.prototype.constructor")
             4.  [23.1.3.4 Array.prototype.copyWithin ( _target_, _start_ \[, _end_ \] )](#sec-array.prototype.copywithin "Array.prototype.copyWithin ( target, start [, end] )")
             5.  [23.1.3.5 Array.prototype.entries ( )](#sec-array.prototype.entries "Array.prototype.entries ( )")
             6.  [23.1.3.6 Array.prototype.every ( _callback_ \[, _thisArg_ \] )](#sec-array.prototype.every "Array.prototype.every ( callback [, thisArg] )")
             7.  [23.1.3.7 Array.prototype.fill ( _value_ \[, _start_ \[, _end_ \] \] )](#sec-array.prototype.fill "Array.prototype.fill ( value [, start [, end]] )")
             8.  [23.1.3.8 Array.prototype.filter ( _callback_ \[, _thisArg_ \] )](#sec-array.prototype.filter "Array.prototype.filter ( callback [, thisArg] )")
             9.  [23.1.3.9 Array.prototype.find ( _predicate_ \[, _thisArg_ \] )](#sec-array.prototype.find "Array.prototype.find ( predicate [, thisArg] )")
             10.  [23.1.3.10 Array.prototype.findIndex ( _predicate_ \[, _thisArg_ \] )](#sec-array.prototype.findindex "Array.prototype.findIndex ( predicate [, thisArg] )")
             11.  [23.1.3.11 Array.prototype.findLast ( _predicate_ \[, _thisArg_ \] )](#sec-array.prototype.findlast "Array.prototype.findLast ( predicate [, thisArg] )")
             12.  +[23.1.3.12 Array.prototype.findLastIndex ( _predicate_ \[, _thisArg_ \] )](#sec-array.prototype.findlastindex "Array.prototype.findLastIndex ( predicate [, thisArg] )")
                  1.  [23.1.3.12.1 FindViaPredicate ( _O_, _len_, _direction_, _predicate_, _thisArg_ )](#sec-findviapredicate "FindViaPredicate ( O, len, direction, predicate, thisArg )")
             13.  +[23.1.3.13 Array.prototype.flat ( \[_depth_ \] )](#sec-array.prototype.flat "Array.prototype.flat ( [depth] )")
                  1.  [23.1.3.13.1 FlattenIntoArray ( _target_, _source_, _sourceLen_, _start_, _depth_ \[, _mapperFunction_ \[, _thisArg_ \] \] )](#sec-flattenintoarray "FlattenIntoArray ( target, source, sourceLen, start, depth [, mapperFunction [, thisArg]] )")
             14.  [23.1.3.14 Array.prototype.flatMap ( _mapperFunction_ \[, _thisArg_ \] )](#sec-array.prototype.flatmap "Array.prototype.flatMap ( mapperFunction [, thisArg] )")
             15.  [23.1.3.15 Array.prototype.forEach ( _callback_ \[, _thisArg_ \] )](#sec-array.prototype.foreach "Array.prototype.forEach ( callback [, thisArg] )")
             16.  [23.1.3.16 Array.prototype.includes ( _searchElement_ \[, _fromIndex_ \] )](#sec-array.prototype.includes "Array.prototype.includes ( searchElement [, fromIndex] )")
             17.  [23.1.3.17 Array.prototype.indexOf ( _searchElement_ \[, _fromIndex_ \] )](#sec-array.prototype.indexof "Array.prototype.indexOf ( searchElement [, fromIndex] )")
             18.  [23.1.3.18 Array.prototype.join ( _separator_ )](#sec-array.prototype.join "Array.prototype.join ( separator )")
             19.  [23.1.3.19 Array.prototype.keys ( )](#sec-array.prototype.keys "Array.prototype.keys ( )")
             20.  [23.1.3.20 Array.prototype.lastIndexOf ( _searchElement_ \[, _fromIndex_ \] )](#sec-array.prototype.lastindexof "Array.prototype.lastIndexOf ( searchElement [, fromIndex] )")
             21.  [23.1.3.21 Array.prototype.map ( _callback_ \[, _thisArg_ \] )](#sec-array.prototype.map "Array.prototype.map ( callback [, thisArg] )")
             22.  [23.1.3.22 Array.prototype.pop ( )](#sec-array.prototype.pop "Array.prototype.pop ( )")
             23.  [23.1.3.23 Array.prototype.push ( ..._items_ )](#sec-array.prototype.push "Array.prototype.push ( ...items )")
             24.  [23.1.3.24 Array.prototype.reduce ( _callback_ \[, _initialValue_ \] )](#sec-array.prototype.reduce "Array.prototype.reduce ( callback [, initialValue] )")
             25.  [23.1.3.25 Array.prototype.reduceRight ( _callback_ \[, _initialValue_ \] )](#sec-array.prototype.reduceright "Array.prototype.reduceRight ( callback [, initialValue] )")
             26.  [23.1.3.26 Array.prototype.reverse ( )](#sec-array.prototype.reverse "Array.prototype.reverse ( )")
             27.  [23.1.3.27 Array.prototype.shift ( )](#sec-array.prototype.shift "Array.prototype.shift ( )")
             28.  [23.1.3.28 Array.prototype.slice ( _start_, _end_ )](#sec-array.prototype.slice "Array.prototype.slice ( start, end )")
             29.  [23.1.3.29 Array.prototype.some ( _callback_ \[, _thisArg_ \] )](#sec-array.prototype.some "Array.prototype.some ( callback [, thisArg] )")
             30.  +[23.1.3.30 Array.prototype.sort ( _comparator_ )](#sec-array.prototype.sort "Array.prototype.sort ( comparator )")
                  1.  [23.1.3.30.1 SortIndexedProperties ( _obj_, _len_, _SortCompare_, _holes_ )](#sec-sortindexedproperties "SortIndexedProperties ( obj, len, SortCompare, holes )")
                  2.  [23.1.3.30.2 CompareArrayElements ( _x_, _y_, _comparator_ )](#sec-comparearrayelements "CompareArrayElements ( x, y, comparator )")
             31.  [23.1.3.31 Array.prototype.splice ( _start_, _deleteCount_, ..._items_ )](#sec-array.prototype.splice "Array.prototype.splice ( start, deleteCount, ...items )")
             32.  [23.1.3.32 Array.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-array.prototype.tolocalestring "Array.prototype.toLocaleString ( [reserved1 [, reserved2]] )")
             33.  [23.1.3.33 Array.prototype.toReversed ( )](#sec-array.prototype.toreversed "Array.prototype.toReversed ( )")
             34.  [23.1.3.34 Array.prototype.toSorted ( _comparator_ )](#sec-array.prototype.tosorted "Array.prototype.toSorted ( comparator )")
             35.  [23.1.3.35 Array.prototype.toSpliced ( _start_, _skipCount_, ..._items_ )](#sec-array.prototype.tospliced "Array.prototype.toSpliced ( start, skipCount, ...items )")
             36.  [23.1.3.36 Array.prototype.toString ( )](#sec-array.prototype.tostring "Array.prototype.toString ( )")
             37.  [23.1.3.37 Array.prototype.unshift ( ..._items_ )](#sec-array.prototype.unshift "Array.prototype.unshift ( ...items )")
             38.  [23.1.3.38 Array.prototype.values ( )](#sec-array.prototype.values "Array.prototype.values ( )")
             39.  [23.1.3.39 Array.prototype.with ( _index_, _value_ )](#sec-array.prototype.with "Array.prototype.with ( index, value )")
             40.  [23.1.3.40 Array.prototype \[%Symbol.iterator% \] ( )](#sec-array.prototype-%symbol.iterator% "Array.prototype [%Symbol.iterator%] ( )")
             41.  [23.1.3.41 Array.prototype \[%Symbol.unscopables% \]](#sec-array.prototype-%symbol.unscopables% "Array.prototype [%Symbol.unscopables%]")
         4.  +[23.1.4 Properties of Array Instances](#sec-properties-of-array-instances "Properties of Array Instances")
             1.  [23.1.4.1 length](#sec-properties-of-array-instances-length "length")
         5.  +[23.1.5 Array Iterator Objects](#sec-array-iterator-objects "Array Iterator Objects")
             1.  [23.1.5.1 CreateArrayIterator ( _array_, _kind_ )](#sec-createarrayiterator "CreateArrayIterator ( array, kind )")
             2.  +[23.1.5.2 The %ArrayIteratorPrototype% Object](#sec-%arrayiteratorprototype%-object "The %ArrayIteratorPrototype% Object")
                 1.  [23.1.5.2.1 %ArrayIteratorPrototype%.next ( )](#sec-%arrayiteratorprototype%.next "%ArrayIteratorPrototype%.next ( )")
                 2.  [23.1.5.2.2 %ArrayIteratorPrototype% \[%Symbol.toStringTag% \]](#sec-%arrayiteratorprototype%-%symbol.tostringtag% "%ArrayIteratorPrototype% [%Symbol.toStringTag%]")
             3.  [23.1.5.3 Properties of Array Iterator Instances](#sec-properties-of-array-iterator-instances "Properties of Array Iterator Instances")
     2.  +[23.2 TypedArray Objects](#sec-typedarray-objects "TypedArray Objects")
         1.  +[23.2.1 The %TypedArray% Intrinsic Object](#sec-%typedarray%-intrinsic-object "The %TypedArray% Intrinsic Object")
             1.  [23.2.1.1 %TypedArray% ( )](#sec-%typedarray% "%TypedArray% ( )")
         2.  +[23.2.2 Properties of the %TypedArray% Intrinsic Object](#sec-properties-of-the-%typedarray%-intrinsic-object "Properties of the %TypedArray% Intrinsic Object")
             1.  [23.2.2.1 %TypedArray%.from ( _source_ \[, _mapper_ \[, _thisArg_ \] \] )](#sec-%typedarray%.from "%TypedArray%.from ( source [, mapper [, thisArg]] )")
             2.  [23.2.2.2 %TypedArray%.of ( ..._items_ )](#sec-%typedarray%.of "%TypedArray%.of ( ...items )")
             3.  [23.2.2.3 %TypedArray%.prototype](#sec-%typedarray%.prototype "%TypedArray%.prototype")
             4.  [23.2.2.4 get %TypedArray% \[%Symbol.species% \]](#sec-get-%typedarray%-%symbol.species% "get %TypedArray% [%Symbol.species%]")
         3.  +[23.2.3 Properties of the %TypedArray% Prototype Object](#sec-properties-of-the-%typedarrayprototype%-object "Properties of the %TypedArray% Prototype Object")
             1.  [23.2.3.1 %TypedArray%.prototype.at ( _index_ )](#sec-%typedarray%.prototype.at "%TypedArray%.prototype.at ( index )")
             2.  [23.2.3.2 get %TypedArray%.prototype.buffer](#sec-get-%typedarray%.prototype.buffer "get %TypedArray%.prototype.buffer")
             3.  [23.2.3.3 get %TypedArray%.prototype.byteLength](#sec-get-%typedarray%.prototype.bytelength "get %TypedArray%.prototype.byteLength")
             4.  [23.2.3.4 get %TypedArray%.prototype.byteOffset](#sec-get-%typedarray%.prototype.byteoffset "get %TypedArray%.prototype.byteOffset")
             5.  [23.2.3.5 %TypedArray%.prototype.constructor](#sec-%typedarray%.prototype.constructor "%TypedArray%.prototype.constructor")
             6.  [23.2.3.6 %TypedArray%.prototype.copyWithin ( _target_, _start_ \[, _end_ \] )](#sec-%typedarray%.prototype.copywithin "%TypedArray%.prototype.copyWithin ( target, start [, end] )")
             7.  [23.2.3.7 %TypedArray%.prototype.entries ( )](#sec-%typedarray%.prototype.entries "%TypedArray%.prototype.entries ( )")
             8.  [23.2.3.8 %TypedArray%.prototype.every ( _callback_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.every "%TypedArray%.prototype.every ( callback [, thisArg] )")
             9.  [23.2.3.9 %TypedArray%.prototype.fill ( _value_ \[, _start_ \[, _end_ \] \] )](#sec-%typedarray%.prototype.fill "%TypedArray%.prototype.fill ( value [, start [, end]] )")
             10.  [23.2.3.10 %TypedArray%.prototype.filter ( _callback_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.filter "%TypedArray%.prototype.filter ( callback [, thisArg] )")
             11.  [23.2.3.11 %TypedArray%.prototype.find ( _predicate_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.find "%TypedArray%.prototype.find ( predicate [, thisArg] )")
             12.  [23.2.3.12 %TypedArray%.prototype.findIndex ( _predicate_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.findindex "%TypedArray%.prototype.findIndex ( predicate [, thisArg] )")
             13.  [23.2.3.13 %TypedArray%.prototype.findLast ( _predicate_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.findlast "%TypedArray%.prototype.findLast ( predicate [, thisArg] )")
             14.  [23.2.3.14 %TypedArray%.prototype.findLastIndex ( _predicate_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.findlastindex "%TypedArray%.prototype.findLastIndex ( predicate [, thisArg] )")
             15.  [23.2.3.15 %TypedArray%.prototype.forEach ( _callback_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.foreach "%TypedArray%.prototype.forEach ( callback [, thisArg] )")
             16.  [23.2.3.16 %TypedArray%.prototype.includes ( _searchElement_ \[, _fromIndex_ \] )](#sec-%typedarray%.prototype.includes "%TypedArray%.prototype.includes ( searchElement [, fromIndex] )")
             17.  [23.2.3.17 %TypedArray%.prototype.indexOf ( _searchElement_ \[, _fromIndex_ \] )](#sec-%typedarray%.prototype.indexof "%TypedArray%.prototype.indexOf ( searchElement [, fromIndex] )")
             18.  [23.2.3.18 %TypedArray%.prototype.join ( _separator_ )](#sec-%typedarray%.prototype.join "%TypedArray%.prototype.join ( separator )")
             19.  [23.2.3.19 %TypedArray%.prototype.keys ( )](#sec-%typedarray%.prototype.keys "%TypedArray%.prototype.keys ( )")
             20.  [23.2.3.20 %TypedArray%.prototype.lastIndexOf ( _searchElement_ \[, _fromIndex_ \] )](#sec-%typedarray%.prototype.lastindexof "%TypedArray%.prototype.lastIndexOf ( searchElement [, fromIndex] )")
             21.  [23.2.3.21 get %TypedArray%.prototype.length](#sec-get-%typedarray%.prototype.length "get %TypedArray%.prototype.length")
             22.  [23.2.3.22 %TypedArray%.prototype.map ( _callback_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.map "%TypedArray%.prototype.map ( callback [, thisArg] )")
             23.  [23.2.3.23 %TypedArray%.prototype.reduce ( _callback_ \[, _initialValue_ \] )](#sec-%typedarray%.prototype.reduce "%TypedArray%.prototype.reduce ( callback [, initialValue] )")
             24.  [23.2.3.24 %TypedArray%.prototype.reduceRight ( _callback_ \[, _initialValue_ \] )](#sec-%typedarray%.prototype.reduceright "%TypedArray%.prototype.reduceRight ( callback [, initialValue] )")
             25.  [23.2.3.25 %TypedArray%.prototype.reverse ( )](#sec-%typedarray%.prototype.reverse "%TypedArray%.prototype.reverse ( )")
             26.  +[23.2.3.26 %TypedArray%.prototype.set ( _source_ \[, _offset_ \] )](#sec-%typedarray%.prototype.set "%TypedArray%.prototype.set ( source [, offset] )")
                  1.  [23.2.3.26.1 SetTypedArrayFromArrayLike ( _target_, _targetOffset_, _source_ )](#sec-settypedarrayfromarraylike "SetTypedArrayFromArrayLike ( target, targetOffset, source )")
                  2.  [23.2.3.26.2 SetTypedArrayFromTypedArray ( _target_, _targetOffset_, _source_ )](#sec-settypedarrayfromtypedarray "SetTypedArrayFromTypedArray ( target, targetOffset, source )")
             27.  [23.2.3.27 %TypedArray%.prototype.slice ( _start_, _end_ )](#sec-%typedarray%.prototype.slice "%TypedArray%.prototype.slice ( start, end )")
             28.  [23.2.3.28 %TypedArray%.prototype.some ( _callback_ \[, _thisArg_ \] )](#sec-%typedarray%.prototype.some "%TypedArray%.prototype.some ( callback [, thisArg] )")
             29.  [23.2.3.29 %TypedArray%.prototype.sort ( _comparator_ )](#sec-%typedarray%.prototype.sort "%TypedArray%.prototype.sort ( comparator )")
             30.  [23.2.3.30 %TypedArray%.prototype.subarray ( _start_, _end_ )](#sec-%typedarray%.prototype.subarray "%TypedArray%.prototype.subarray ( start, end )")
             31.  [23.2.3.31 %TypedArray%.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )](#sec-%typedarray%.prototype.tolocalestring "%TypedArray%.prototype.toLocaleString ( [reserved1 [, reserved2]] )")
             32.  [23.2.3.32 %TypedArray%.prototype.toReversed ( )](#sec-%typedarray%.prototype.toreversed "%TypedArray%.prototype.toReversed ( )")
             33.  [23.2.3.33 %TypedArray%.prototype.toSorted ( _comparator_ )](#sec-%typedarray%.prototype.tosorted "%TypedArray%.prototype.toSorted ( comparator )")
             34.  [23.2.3.34 %TypedArray%.prototype.toString ( )](#sec-%typedarray%.prototype.tostring "%TypedArray%.prototype.toString ( )")
             35.  [23.2.3.35 %TypedArray%.prototype.values ( )](#sec-%typedarray%.prototype.values "%TypedArray%.prototype.values ( )")
             36.  [23.2.3.36 %TypedArray%.prototype.with ( _index_, _value_ )](#sec-%typedarray%.prototype.with "%TypedArray%.prototype.with ( index, value )")
             37.  [23.2.3.37 %TypedArray%.prototype \[%Symbol.iterator% \] ( )](#sec-%typedarray%.prototype-%symbol.iterator% "%TypedArray%.prototype [%Symbol.iterator%] ( )")
             38.  [23.2.3.38 get %TypedArray%.prototype \[%Symbol.toStringTag% \]](#sec-get-%typedarray%.prototype-%symbol.tostringtag% "get %TypedArray%.prototype [%Symbol.toStringTag%]")
         4.  +[23.2.4 Abstract Operations for TypedArray Objects](#sec-abstract-operations-for-typedarray-objects "Abstract Operations for TypedArray Objects")
             1.  [23.2.4.1 TypedArrayCreateFromConstructor ( _constructor_, _argumentList_ )](#sec-typedarraycreatefromconstructor "TypedArrayCreateFromConstructor ( constructor, argumentList )")
             2.  [23.2.4.2 TypedArrayCreateSameType ( _exemplar_, _length_ )](#sec-typedarray-create-same-type "TypedArrayCreateSameType ( exemplar, length )")
             3.  [23.2.4.3 TypedArraySpeciesCreate ( _exemplar_, _argumentList_ )](#typedarray-species-create "TypedArraySpeciesCreate ( exemplar, argumentList )")
             4.  [23.2.4.4 ValidateTypedArray ( _O_, _order_ )](#sec-validatetypedarray "ValidateTypedArray ( O, order )")
             5.  [23.2.4.5 TypedArrayElementSize ( _O_ )](#sec-typedarrayelementsize "TypedArrayElementSize ( O )")
             6.  [23.2.4.6 TypedArrayElementType ( _O_ )](#sec-typedarrayelementtype "TypedArrayElementType ( O )")
             7.  [23.2.4.7 CompareTypedArrayElements ( _x_, _y_, _comparator_ )](#sec-comparetypedarrayelements "CompareTypedArrayElements ( x, y, comparator )")
         5.  +[23.2.5 The _TypedArray_ Constructors](#sec-typedarray-constructors "The TypedArray Constructors")
             1.  +[23.2.5.1 _TypedArray_ ( ..._args_ )](#sec-typedarray "TypedArray ( ...args )")
                 1.  [23.2.5.1.1 AllocateTypedArray ( _constructorName_, _newTarget_, _defaultProto_ \[, _length_ \] )](#sec-allocatetypedarray "AllocateTypedArray ( constructorName, newTarget, defaultProto [, length] )")
                 2.  [23.2.5.1.2 InitializeTypedArrayFromTypedArray ( _O_, _srcArray_ )](#sec-initializetypedarrayfromtypedarray "InitializeTypedArrayFromTypedArray ( O, srcArray )")
                 3.  [23.2.5.1.3 InitializeTypedArrayFromArrayBuffer ( _O_, _buffer_, _byteOffset_, _length_ )](#sec-initializetypedarrayfromarraybuffer "InitializeTypedArrayFromArrayBuffer ( O, buffer, byteOffset, length )")
                 4.  [23.2.5.1.4 InitializeTypedArrayFromList ( _O_, _values_ )](#sec-initializetypedarrayfromlist "InitializeTypedArrayFromList ( O, values )")
                 5.  [23.2.5.1.5 InitializeTypedArrayFromArrayLike ( _O_, _arrayLike_ )](#sec-initializetypedarrayfromarraylike "InitializeTypedArrayFromArrayLike ( O, arrayLike )")
                 6.  [23.2.5.1.6 AllocateTypedArrayBuffer ( _O_, _length_ )](#sec-allocatetypedarraybuffer "AllocateTypedArrayBuffer ( O, length )")
         6.  +[23.2.6 Properties of the _TypedArray_ Constructors](#sec-properties-of-the-typedarray-constructors "Properties of the TypedArray Constructors")
             1.  [23.2.6.1 _TypedArray_.BYTES\_PER\_ELEMENT](#sec-typedarray.bytes_per_element "TypedArray.BYTES_PER_ELEMENT")
             2.  [23.2.6.2 _TypedArray_.prototype](#sec-typedarray.prototype "TypedArray.prototype")
         7.  +[23.2.7 Properties of the _TypedArray_ Prototype Objects](#sec-properties-of-typedarray-prototype-objects "Properties of the TypedArray Prototype Objects")
             1.  [23.2.7.1 _TypedArray_.prototype.BYTES\_PER\_ELEMENT](#sec-typedarray.prototype.bytes_per_element "TypedArray.prototype.BYTES_PER_ELEMENT")
             2.  [23.2.7.2 _TypedArray_.prototype.constructor](#sec-typedarray.prototype.constructor "TypedArray.prototype.constructor")
         8.  [23.2.8 Properties of _TypedArray_ Instances](#sec-properties-of-typedarray-instances "Properties of TypedArray Instances")
     3.  +[23.3 Uint8Array Objects](#sec-uint8array "Uint8Array Objects")
         1.  +[23.3.1 Additional Properties of the Uint8Array Constructor](#sec-additional-properties-of-the-uint8array-constructor "Additional Properties of the Uint8Array Constructor")
             1.  [23.3.1.1 Uint8Array.fromBase64 ( _string_ \[, _options_ \] )](#sec-uint8array.frombase64 "Uint8Array.fromBase64 ( string [, options] )")
             2.  [23.3.1.2 Uint8Array.fromHex ( _string_ )](#sec-uint8array.fromhex "Uint8Array.fromHex ( string )")
         2.  +[23.3.2 Additional Properties of the Uint8Array Prototype Object](#sec-additional-properties-of-the-uint8array-prototype-object "Additional Properties of the Uint8Array Prototype Object")
             1.  [23.3.2.1 Uint8Array.prototype.setFromBase64 ( _string_ \[, _options_ \] )](#sec-uint8array.prototype.setfrombase64 "Uint8Array.prototype.setFromBase64 ( string [, options] )")
             2.  [23.3.2.2 Uint8Array.prototype.setFromHex ( _string_ )](#sec-uint8array.prototype.setfromhex "Uint8Array.prototype.setFromHex ( string )")
             3.  [23.3.2.3 Uint8Array.prototype.toBase64 ( \[_options_ \] )](#sec-uint8array.prototype.tobase64 "Uint8Array.prototype.toBase64 ( [options] )")
             4.  [23.3.2.4 Uint8Array.prototype.toHex ( )](#sec-uint8array.prototype.tohex "Uint8Array.prototype.toHex ( )")
         3.  +[23.3.3 Abstract Operations for Uint8Array Objects](#sec-abstract-operations-for-uint8array-objects "Abstract Operations for Uint8Array Objects")
             1.  [23.3.3.1 ValidateUint8Array ( _ta_ )](#sec-validateuint8array "ValidateUint8Array ( ta )")
             2.  [23.3.3.2 GetUint8ArrayBytes ( _ta_ )](#sec-getuint8arraybytes "GetUint8ArrayBytes ( ta )")
             3.  [23.3.3.3 SetUint8ArrayBytes ( _into_, _bytes_ )](#sec-setuint8arraybytes "SetUint8ArrayBytes ( into, bytes )")
             4.  [23.3.3.4 SkipAsciiWhitespace ( _string_, _index_ )](#sec-skipasciiwhitespace "SkipAsciiWhitespace ( string, index )")
             5.  [23.3.3.5 DecodeFinalBase64Chunk ( _chunk_, _throwOnExtraBits_ )](#sec-decodefinalbase64chunk "DecodeFinalBase64Chunk ( chunk, throwOnExtraBits )")
             6.  [23.3.3.6 DecodeFullLengthBase64Chunk ( _chunk_ )](#sec-decodefulllengthbase64chunk "DecodeFullLengthBase64Chunk ( chunk )")
             7.  [23.3.3.7 FromBase64 ( _string_, _alphabet_, _lastChunkHandling_ \[, _maxLength_ \] )](#sec-frombase64 "FromBase64 ( string, alphabet, lastChunkHandling [, maxLength] )")
             8.  [23.3.3.8 FromHex ( _string_ \[, _maxLength_ \] )](#sec-fromhex "FromHex ( string [, maxLength] )")
25.  +[24 Keyed Collections](#sec-keyed-collections "Keyed Collections")
     1.  +[24.1 Map Objects](#sec-map-objects "Map Objects")
         1.  +[24.1.1 The Map Constructor](#sec-map-constructor "The Map Constructor")
             1.  [24.1.1.1 Map ( \[_iterable_ \] )](#sec-map-iterable "Map ( [iterable] )")
             2.  [24.1.1.2 AddEntriesFromIterable ( _target_, _iterable_, _adder_ )](#sec-add-entries-from-iterable "AddEntriesFromIterable ( target, iterable, adder )")
         2.  +[24.1.2 Properties of the Map Constructor](#sec-properties-of-the-map-constructor "Properties of the Map Constructor")
             1.  [24.1.2.1 Map.groupBy ( _items_, _callback_ )](#sec-map.groupby "Map.groupBy ( items, callback )")
             2.  [24.1.2.2 Map.prototype](#sec-map.prototype "Map.prototype")
             3.  [24.1.2.3 get Map \[%Symbol.species% \]](#sec-get-map-%symbol.species% "get Map [%Symbol.species%]")
         3.  +[24.1.3 Properties of the Map Prototype Object](#sec-properties-of-the-map-prototype-object "Properties of the Map Prototype Object")
             1.  [24.1.3.1 Map.prototype.clear ( )](#sec-map.prototype.clear "Map.prototype.clear ( )")
             2.  [24.1.3.2 Map.prototype.constructor](#sec-map.prototype.constructor "Map.prototype.constructor")
             3.  [24.1.3.3 Map.prototype.delete ( _key_ )](#sec-map.prototype.delete "Map.prototype.delete ( key )")
             4.  [24.1.3.4 Map.prototype.entries ( )](#sec-map.prototype.entries "Map.prototype.entries ( )")
             5.  [24.1.3.5 Map.prototype.forEach ( _callback_ \[, _thisArg_ \] )](#sec-map.prototype.foreach "Map.prototype.forEach ( callback [, thisArg] )")
             6.  [24.1.3.6 Map.prototype.get ( _key_ )](#sec-map.prototype.get "Map.prototype.get ( key )")
             7.  [24.1.3.7 Map.prototype.has ( _key_ )](#sec-map.prototype.has "Map.prototype.has ( key )")
             8.  [24.1.3.8 Map.prototype.keys ( )](#sec-map.prototype.keys "Map.prototype.keys ( )")
             9.  [24.1.3.9 Map.prototype.set ( _key_, _value_ )](#sec-map.prototype.set "Map.prototype.set ( key, value )")
             10.  [24.1.3.10 get Map.prototype.size](#sec-get-map.prototype.size "get Map.prototype.size")
             11.  [24.1.3.11 Map.prototype.values ( )](#sec-map.prototype.values "Map.prototype.values ( )")
             12.  [24.1.3.12 Map.prototype \[%Symbol.iterator% \] ( )](#sec-map.prototype-%symbol.iterator% "Map.prototype [%Symbol.iterator%] ( )")
             13.  [24.1.3.13 Map.prototype \[%Symbol.toStringTag% \]](#sec-map.prototype-%symbol.tostringtag% "Map.prototype [%Symbol.toStringTag%]")
         4.  [24.1.4 Properties of Map Instances](#sec-properties-of-map-instances "Properties of Map Instances")
         5.  +[24.1.5 Map Iterator Objects](#sec-map-iterator-objects "Map Iterator Objects")
             1.  [24.1.5.1 CreateMapIterator ( _map_, _kind_ )](#sec-createmapiterator "CreateMapIterator ( map, kind )")
             2.  +[24.1.5.2 The %MapIteratorPrototype% Object](#sec-%mapiteratorprototype%-object "The %MapIteratorPrototype% Object")
                 1.  [24.1.5.2.1 %MapIteratorPrototype%.next ( )](#sec-%mapiteratorprototype%.next "%MapIteratorPrototype%.next ( )")
                 2.  [24.1.5.2.2 %MapIteratorPrototype% \[%Symbol.toStringTag% \]](#sec-%mapiteratorprototype%-%symbol.tostringtag% "%MapIteratorPrototype% [%Symbol.toStringTag%]")
     2.  +[24.2 Set Objects](#sec-set-objects "Set Objects")
         1.  +[24.2.1 Abstract Operations For Set Objects](#sec-abstract-operations-for-set-objects "Abstract Operations For Set Objects")
             1.  [24.2.1.1 Set Records](#sec-set-records "Set Records")
             2.  [24.2.1.2 GetSetRecord ( _obj_ )](#sec-getsetrecord "GetSetRecord ( obj )")
             3.  [24.2.1.3 SetDataHas ( _setData_, _value_ )](#sec-setdatahas "SetDataHas ( setData, value )")
             4.  [24.2.1.4 SetDataIndex ( _setData_, _value_ )](#sec-setdataindex "SetDataIndex ( setData, value )")
             5.  [24.2.1.5 SetDataSize ( _setData_ )](#sec-setdatasize "SetDataSize ( setData )")
         2.  +[24.2.2 The Set Constructor](#sec-set-constructor "The Set Constructor")
             1.  [24.2.2.1 Set ( \[_iterable_ \] )](#sec-set-iterable "Set ( [iterable] )")
         3.  +[24.2.3 Properties of the Set Constructor](#sec-properties-of-the-set-constructor "Properties of the Set Constructor")
             1.  [24.2.3.1 Set.prototype](#sec-set.prototype "Set.prototype")
             2.  [24.2.3.2 get Set \[%Symbol.species% \]](#sec-get-set-%symbol.species% "get Set [%Symbol.species%]")
         4.  +[24.2.4 Properties of the Set Prototype Object](#sec-properties-of-the-set-prototype-object "Properties of the Set Prototype Object")
             1.  [24.2.4.1 Set.prototype.add ( _value_ )](#sec-set.prototype.add "Set.prototype.add ( value )")
             2.  [24.2.4.2 Set.prototype.clear ( )](#sec-set.prototype.clear "Set.prototype.clear ( )")
             3.  [24.2.4.3 Set.prototype.constructor](#sec-set.prototype.constructor "Set.prototype.constructor")
             4.  [24.2.4.4 Set.prototype.delete ( _value_ )](#sec-set.prototype.delete "Set.prototype.delete ( value )")
             5.  [24.2.4.5 Set.prototype.difference ( _other_ )](#sec-set.prototype.difference "Set.prototype.difference ( other )")
             6.  [24.2.4.6 Set.prototype.entries ( )](#sec-set.prototype.entries "Set.prototype.entries ( )")
             7.  [24.2.4.7 Set.prototype.forEach ( _callback_ \[, _thisArg_ \] )](#sec-set.prototype.foreach "Set.prototype.forEach ( callback [, thisArg] )")
             8.  [24.2.4.8 Set.prototype.has ( _value_ )](#sec-set.prototype.has "Set.prototype.has ( value )")
             9.  [24.2.4.9 Set.prototype.intersection ( _other_ )](#sec-set.prototype.intersection "Set.prototype.intersection ( other )")
             10.  [24.2.4.10 Set.prototype.isDisjointFrom ( _other_ )](#sec-set.prototype.isdisjointfrom "Set.prototype.isDisjointFrom ( other )")
             11.  [24.2.4.11 Set.prototype.isSubsetOf ( _other_ )](#sec-set.prototype.issubsetof "Set.prototype.isSubsetOf ( other )")
             12.  [24.2.4.12 Set.prototype.isSupersetOf ( _other_ )](#sec-set.prototype.issupersetof "Set.prototype.isSupersetOf ( other )")
             13.  [24.2.4.13 Set.prototype.keys ( )](#sec-set.prototype.keys "Set.prototype.keys ( )")
             14.  [24.2.4.14 get Set.prototype.size](#sec-get-set.prototype.size "get Set.prototype.size")
             15.  [24.2.4.15 Set.prototype.symmetricDifference ( _other_ )](#sec-set.prototype.symmetricdifference "Set.prototype.symmetricDifference ( other )")
             16.  [24.2.4.16 Set.prototype.union ( _other_ )](#sec-set.prototype.union "Set.prototype.union ( other )")
             17.  [24.2.4.17 Set.prototype.values ( )](#sec-set.prototype.values "Set.prototype.values ( )")
             18.  [24.2.4.18 Set.prototype \[%Symbol.iterator% \] ( )](#sec-set.prototype-%symbol.iterator% "Set.prototype [%Symbol.iterator%] ( )")
             19.  [24.2.4.19 Set.prototype \[%Symbol.toStringTag% \]](#sec-set.prototype-%symbol.tostringtag% "Set.prototype [%Symbol.toStringTag%]")
         5.  [24.2.5 Properties of Set Instances](#sec-properties-of-set-instances "Properties of Set Instances")
         6.  +[24.2.6 Set Iterator Objects](#sec-set-iterator-objects "Set Iterator Objects")
             1.  [24.2.6.1 CreateSetIterator ( _set_, _kind_ )](#sec-createsetiterator "CreateSetIterator ( set, kind )")
             2.  +[24.2.6.2 The %SetIteratorPrototype% Object](#sec-%setiteratorprototype%-object "The %SetIteratorPrototype% Object")
                 1.  [24.2.6.2.1 %SetIteratorPrototype%.next ( )](#sec-%setiteratorprototype%.next "%SetIteratorPrototype%.next ( )")
                 2.  [24.2.6.2.2 %SetIteratorPrototype% \[%Symbol.toStringTag% \]](#sec-%setiteratorprototype%-%symbol.tostringtag% "%SetIteratorPrototype% [%Symbol.toStringTag%]")
     3.  +[24.3 WeakMap Objects](#sec-weakmap-objects "WeakMap Objects")
         1.  +[24.3.1 The WeakMap Constructor](#sec-weakmap-constructor "The WeakMap Constructor")
             1.  [24.3.1.1 WeakMap ( \[_iterable_ \] )](#sec-weakmap-iterable "WeakMap ( [iterable] )")
         2.  +[24.3.2 Properties of the WeakMap Constructor](#sec-properties-of-the-weakmap-constructor "Properties of the WeakMap Constructor")
             1.  [24.3.2.1 WeakMap.prototype](#sec-weakmap.prototype "WeakMap.prototype")
         3.  +[24.3.3 Properties of the WeakMap Prototype Object](#sec-properties-of-the-weakmap-prototype-object "Properties of the WeakMap Prototype Object")
             1.  [24.3.3.1 WeakMap.prototype.constructor](#sec-weakmap.prototype.constructor "WeakMap.prototype.constructor")
             2.  [24.3.3.2 WeakMap.prototype.delete ( _key_ )](#sec-weakmap.prototype.delete "WeakMap.prototype.delete ( key )")
             3.  [24.3.3.3 WeakMap.prototype.get ( _key_ )](#sec-weakmap.prototype.get "WeakMap.prototype.get ( key )")
             4.  [24.3.3.4 WeakMap.prototype.has ( _key_ )](#sec-weakmap.prototype.has "WeakMap.prototype.has ( key )")
             5.  [24.3.3.5 WeakMap.prototype.set ( _key_, _value_ )](#sec-weakmap.prototype.set "WeakMap.prototype.set ( key, value )")
             6.  [24.3.3.6 WeakMap.prototype \[%Symbol.toStringTag% \]](#sec-weakmap.prototype-%symbol.tostringtag% "WeakMap.prototype [%Symbol.toStringTag%]")
         4.  [24.3.4 Properties of WeakMap Instances](#sec-properties-of-weakmap-instances "Properties of WeakMap Instances")
     4.  +[24.4 WeakSet Objects](#sec-weakset-objects "WeakSet Objects")
         1.  +[24.4.1 The WeakSet Constructor](#sec-weakset-constructor "The WeakSet Constructor")
             1.  [24.4.1.1 WeakSet ( \[_iterable_ \] )](#sec-weakset-iterable "WeakSet ( [iterable] )")
         2.  +[24.4.2 Properties of the WeakSet Constructor](#sec-properties-of-the-weakset-constructor "Properties of the WeakSet Constructor")
             1.  [24.4.2.1 WeakSet.prototype](#sec-weakset.prototype "WeakSet.prototype")
         3.  +[24.4.3 Properties of the WeakSet Prototype Object](#sec-properties-of-the-weakset-prototype-object "Properties of the WeakSet Prototype Object")
             1.  [24.4.3.1 WeakSet.prototype.add ( _value_ )](#sec-weakset.prototype.add "WeakSet.prototype.add ( value )")
             2.  [24.4.3.2 WeakSet.prototype.constructor](#sec-weakset.prototype.constructor "WeakSet.prototype.constructor")
             3.  [24.4.3.3 WeakSet.prototype.delete ( _value_ )](#sec-weakset.prototype.delete "WeakSet.prototype.delete ( value )")
             4.  [24.4.3.4 WeakSet.prototype.has ( _value_ )](#sec-weakset.prototype.has "WeakSet.prototype.has ( value )")
             5.  [24.4.3.5 WeakSet.prototype \[%Symbol.toStringTag% \]](#sec-weakset.prototype-%symbol.tostringtag% "WeakSet.prototype [%Symbol.toStringTag%]")
         4.  [24.4.4 Properties of WeakSet Instances](#sec-properties-of-weakset-instances "Properties of WeakSet Instances")
     5.  +[24.5 Abstract Operations for Keyed Collections](#sec-abstract-operations-for-keyed-collections "Abstract Operations for Keyed Collections")
         1.  [24.5.1 CanonicalizeKeyedCollectionKey ( _key_ )](#sec-canonicalizekeyedcollectionkey "CanonicalizeKeyedCollectionKey ( key )")
26.  +[25 Structured Data](#sec-structured-data "Structured Data")
     1.  +[25.1 ArrayBuffer Objects](#sec-arraybuffer-objects "ArrayBuffer Objects")
         1.  [25.1.1 Notation](#sec-arraybuffer-notation "Notation")
         2.  [25.1.2 Fixed-length and Resizable ArrayBuffer Objects](#sec-fixed-length-and-resizable-arraybuffer-objects "Fixed-length and Resizable ArrayBuffer Objects")
         3.  +[25.1.3 Abstract Operations For ArrayBuffer Objects](#sec-abstract-operations-for-arraybuffer-objects "Abstract Operations For ArrayBuffer Objects")
             1.  [25.1.3.1 AllocateArrayBuffer ( _constructor_, _byteLength_ \[, _maxByteLength_ \] )](#sec-allocatearraybuffer "AllocateArrayBuffer ( constructor, byteLength [, maxByteLength] )")
             2.  [25.1.3.2 ArrayBufferByteLength ( _arrayBuffer_, _order_ )](#sec-arraybufferbytelength "ArrayBufferByteLength ( arrayBuffer, order )")
             3.  [25.1.3.3 ArrayBufferCopyAndDetach ( _arrayBuffer_, _newLength_, _preserveResizability_ )](#sec-arraybuffercopyanddetach "ArrayBufferCopyAndDetach ( arrayBuffer, newLength, preserveResizability )")
             4.  [25.1.3.4 IsDetachedBuffer ( _arrayBuffer_ )](#sec-isdetachedbuffer "IsDetachedBuffer ( arrayBuffer )")
             5.  [25.1.3.5 DetachArrayBuffer ( _arrayBuffer_ \[, _key_ \] )](#sec-detacharraybuffer "DetachArrayBuffer ( arrayBuffer [, key] )")
             6.  [25.1.3.6 CloneArrayBuffer ( _srcBuffer_, _srcByteOffset_, _srcLength_ )](#sec-clonearraybuffer "CloneArrayBuffer ( srcBuffer, srcByteOffset, srcLength )")
             7.  [25.1.3.7 GetArrayBufferMaxByteLengthOption ( _options_ )](#sec-getarraybuffermaxbytelengthoption "GetArrayBufferMaxByteLengthOption ( options )")
             8.  [25.1.3.8 HostResizeArrayBuffer ( _buffer_, _newByteLength_ )](#sec-hostresizearraybuffer "HostResizeArrayBuffer ( buffer, newByteLength )")
             9.  [25.1.3.9 IsFixedLengthArrayBuffer ( _arrayBuffer_ )](#sec-isfixedlengtharraybuffer "IsFixedLengthArrayBuffer ( arrayBuffer )")
             10.  [25.1.3.10 IsUnsignedElementType ( _type_ )](#sec-isunsignedelementtype "IsUnsignedElementType ( type )")
             11.  [25.1.3.11 IsUnclampedIntegerElementType ( _type_ )](#sec-isunclampedintegerelementtype "IsUnclampedIntegerElementType ( type )")
             12.  [25.1.3.12 IsBigIntElementType ( _type_ )](#sec-isbigintelementtype "IsBigIntElementType ( type )")
             13.  [25.1.3.13 IsNoTearConfiguration ( _type_, _order_ )](#sec-isnotearconfiguration "IsNoTearConfiguration ( type, order )")
             14.  [25.1.3.14 RawBytesToNumeric ( _type_, _rawBytes_, _isLittleEndian_ )](#sec-rawbytestonumeric "RawBytesToNumeric ( type, rawBytes, isLittleEndian )")
             15.  [25.1.3.15 GetRawBytesFromSharedBlock ( _block_, _byteIndex_, _type_, _isTypedArray_, _order_ )](#sec-getrawbytesfromsharedblock "GetRawBytesFromSharedBlock ( block, byteIndex, type, isTypedArray, order )")
             16.  [25.1.3.16 GetValueFromBuffer ( _arrayBuffer_, _byteIndex_, _type_, _isTypedArray_, _order_ \[, _isLittleEndian_ \] )](#sec-getvaluefrombuffer "GetValueFromBuffer ( arrayBuffer, byteIndex, type, isTypedArray, order [, isLittleEndian] )")
             17.  [25.1.3.17 NumericToRawBytes ( _type_, _value_, _isLittleEndian_ )](#sec-numerictorawbytes "NumericToRawBytes ( type, value, isLittleEndian )")
             18.  [25.1.3.18 SetValueInBuffer ( _arrayBuffer_, _byteIndex_, _type_, _value_, _isTypedArray_, _order_ \[, _isLittleEndian_ \] )](#sec-setvalueinbuffer "SetValueInBuffer ( arrayBuffer, byteIndex, type, value, isTypedArray, order [, isLittleEndian] )")
             19.  [25.1.3.19 GetModifySetValueInBuffer ( _arrayBuffer_, _byteIndex_, _type_, _value_, _op_ )](#sec-getmodifysetvalueinbuffer "GetModifySetValueInBuffer ( arrayBuffer, byteIndex, type, value, op )")
         4.  +[25.1.4 The ArrayBuffer Constructor](#sec-arraybuffer-constructor "The ArrayBuffer Constructor")
             1.  [25.1.4.1 ArrayBuffer ( _length_ \[, _options_ \] )](#sec-arraybuffer-length "ArrayBuffer ( length [, options] )")
         5.  +[25.1.5 Properties of the ArrayBuffer Constructor](#sec-properties-of-the-arraybuffer-constructor "Properties of the ArrayBuffer Constructor")
             1.  [25.1.5.1 ArrayBuffer.isView ( _arg_ )](#sec-arraybuffer.isview "ArrayBuffer.isView ( arg )")
             2.  [25.1.5.2 ArrayBuffer.prototype](#sec-arraybuffer.prototype "ArrayBuffer.prototype")
             3.  [25.1.5.3 get ArrayBuffer \[%Symbol.species% \]](#sec-get-arraybuffer-%symbol.species% "get ArrayBuffer [%Symbol.species%]")
         6.  +[25.1.6 Properties of the ArrayBuffer Prototype Object](#sec-properties-of-the-arraybuffer-prototype-object "Properties of the ArrayBuffer Prototype Object")
             1.  [25.1.6.1 get ArrayBuffer.prototype.byteLength](#sec-get-arraybuffer.prototype.bytelength "get ArrayBuffer.prototype.byteLength")
             2.  [25.1.6.2 ArrayBuffer.prototype.constructor](#sec-arraybuffer.prototype.constructor "ArrayBuffer.prototype.constructor")
             3.  [25.1.6.3 get ArrayBuffer.prototype.detached](#sec-get-arraybuffer.prototype.detached "get ArrayBuffer.prototype.detached")
             4.  [25.1.6.4 get ArrayBuffer.prototype.maxByteLength](#sec-get-arraybuffer.prototype.maxbytelength "get ArrayBuffer.prototype.maxByteLength")
             5.  [25.1.6.5 get ArrayBuffer.prototype.resizable](#sec-get-arraybuffer.prototype.resizable "get ArrayBuffer.prototype.resizable")
             6.  [25.1.6.6 ArrayBuffer.prototype.resize ( _newLength_ )](#sec-arraybuffer.prototype.resize "ArrayBuffer.prototype.resize ( newLength )")
             7.  [25.1.6.7 ArrayBuffer.prototype.slice ( _start_, _end_ )](#sec-arraybuffer.prototype.slice "ArrayBuffer.prototype.slice ( start, end )")
             8.  [25.1.6.8 ArrayBuffer.prototype.transfer ( \[_newLength_ \] )](#sec-arraybuffer.prototype.transfer "ArrayBuffer.prototype.transfer ( [newLength] )")
             9.  [25.1.6.9 ArrayBuffer.prototype.transferToFixedLength ( \[_newLength_ \] )](#sec-arraybuffer.prototype.transfertofixedlength "ArrayBuffer.prototype.transferToFixedLength ( [newLength] )")
             10.  [25.1.6.10 ArrayBuffer.prototype \[%Symbol.toStringTag% \]](#sec-arraybuffer.prototype-%symbol.tostringtag% "ArrayBuffer.prototype [%Symbol.toStringTag%]")
         7.  [25.1.7 Properties of ArrayBuffer Instances](#sec-properties-of-the-arraybuffer-instances "Properties of ArrayBuffer Instances")
         8.  [25.1.8 Resizable ArrayBuffer Guidelines](#sec-resizable-arraybuffer-guidelines "Resizable ArrayBuffer Guidelines")
     2.  +[25.2 SharedArrayBuffer Objects](#sec-sharedarraybuffer-objects "SharedArrayBuffer Objects")
         1.  [25.2.1 Fixed-length and Growable SharedArrayBuffer Objects](#sec-fixed-length-and-growable-sharedarraybuffer-objects "Fixed-length and Growable SharedArrayBuffer Objects")
         2.  +[25.2.2 Abstract Operations for SharedArrayBuffer Objects](#sec-abstract-operations-for-sharedarraybuffer-objects "Abstract Operations for SharedArrayBuffer Objects")
             1.  [25.2.2.1 AllocateSharedArrayBuffer ( _constructor_, _byteLength_ \[, _maxByteLength_ \] )](#sec-allocatesharedarraybuffer "AllocateSharedArrayBuffer ( constructor, byteLength [, maxByteLength] )")
             2.  [25.2.2.2 IsSharedArrayBuffer ( _obj_ )](#sec-issharedarraybuffer "IsSharedArrayBuffer ( obj )")
             3.  [25.2.2.3 IsGrowableSharedArrayBuffer ( _obj_ )](#sec-isgrowablesharedarraybuffer "IsGrowableSharedArrayBuffer ( obj )")
             4.  [25.2.2.4 HostGrowSharedArrayBuffer ( _buffer_, _newByteLength_ )](#sec-hostgrowsharedarraybuffer "HostGrowSharedArrayBuffer ( buffer, newByteLength )")
         3.  +[25.2.3 The SharedArrayBuffer Constructor](#sec-sharedarraybuffer-constructor "The SharedArrayBuffer Constructor")
             1.  [25.2.3.1 SharedArrayBuffer ( _length_ \[, _options_ \] )](#sec-sharedarraybuffer-length "SharedArrayBuffer ( length [, options] )")
         4.  +[25.2.4 Properties of the SharedArrayBuffer Constructor](#sec-properties-of-the-sharedarraybuffer-constructor "Properties of the SharedArrayBuffer Constructor")
             1.  [25.2.4.1 SharedArrayBuffer.prototype](#sec-sharedarraybuffer.prototype "SharedArrayBuffer.prototype")
             2.  [25.2.4.2 get SharedArrayBuffer \[%Symbol.species% \]](#sec-sharedarraybuffer-%symbol.species% "get SharedArrayBuffer [%Symbol.species%]")
         5.  +[25.2.5 Properties of the SharedArrayBuffer Prototype Object](#sec-properties-of-the-sharedarraybuffer-prototype-object "Properties of the SharedArrayBuffer Prototype Object")
             1.  [25.2.5.1 get SharedArrayBuffer.prototype.byteLength](#sec-get-sharedarraybuffer.prototype.bytelength "get SharedArrayBuffer.prototype.byteLength")
             2.  [25.2.5.2 SharedArrayBuffer.prototype.constructor](#sec-sharedarraybuffer.prototype.constructor "SharedArrayBuffer.prototype.constructor")
             3.  [25.2.5.3 SharedArrayBuffer.prototype.grow ( _newLength_ )](#sec-sharedarraybuffer.prototype.grow "SharedArrayBuffer.prototype.grow ( newLength )")
             4.  [25.2.5.4 get SharedArrayBuffer.prototype.growable](#sec-get-sharedarraybuffer.prototype.growable "get SharedArrayBuffer.prototype.growable")
             5.  [25.2.5.5 get SharedArrayBuffer.prototype.maxByteLength](#sec-get-sharedarraybuffer.prototype.maxbytelength "get SharedArrayBuffer.prototype.maxByteLength")
             6.  [25.2.5.6 SharedArrayBuffer.prototype.slice ( _start_, _end_ )](#sec-sharedarraybuffer.prototype.slice "SharedArrayBuffer.prototype.slice ( start, end )")
             7.  [25.2.5.7 SharedArrayBuffer.prototype \[%Symbol.toStringTag% \]](#sec-sharedarraybuffer.prototype-%symbol.tostringtag% "SharedArrayBuffer.prototype [%Symbol.toStringTag%]")
         6.  [25.2.6 Properties of SharedArrayBuffer Instances](#sec-properties-of-the-sharedarraybuffer-instances "Properties of SharedArrayBuffer Instances")
         7.  [25.2.7 Growable SharedArrayBuffer Guidelines](#sec-growable-sharedarraybuffer-guidelines "Growable SharedArrayBuffer Guidelines")
     3.  +[25.3 DataView Objects](#sec-dataview-objects "DataView Objects")
         1.  +[25.3.1 Abstract Operations For DataView Objects](#sec-abstract-operations-for-dataview-objects "Abstract Operations For DataView Objects")
             1.  [25.3.1.1 DataView With Buffer Witness Records](#sec-dataview-with-buffer-witness-records "DataView With Buffer Witness Records")
             2.  [25.3.1.2 MakeDataViewWithBufferWitnessRecord ( _obj_, _order_ )](#sec-makedataviewwithbufferwitnessrecord "MakeDataViewWithBufferWitnessRecord ( obj, order )")
             3.  [25.3.1.3 GetViewByteLength ( _viewRecord_ )](#sec-getviewbytelength "GetViewByteLength ( viewRecord )")
             4.  [25.3.1.4 IsViewOutOfBounds ( _viewRecord_ )](#sec-isviewoutofbounds "IsViewOutOfBounds ( viewRecord )")
             5.  [25.3.1.5 GetViewValue ( _view_, _requestIndex_, _isLittleEndian_, _type_ )](#sec-getviewvalue "GetViewValue ( view, requestIndex, isLittleEndian, type )")
             6.  [25.3.1.6 SetViewValue ( _view_, _requestIndex_, _isLittleEndian_, _type_, _value_ )](#sec-setviewvalue "SetViewValue ( view, requestIndex, isLittleEndian, type, value )")
         2.  +[25.3.2 The DataView Constructor](#sec-dataview-constructor "The DataView Constructor")
             1.  [25.3.2.1 DataView ( _buffer_ \[, _byteOffset_ \[, _byteLength_ \] \] )](#sec-dataview-buffer-byteoffset-bytelength "DataView ( buffer [, byteOffset [, byteLength]] )")
         3.  +[25.3.3 Properties of the DataView Constructor](#sec-properties-of-the-dataview-constructor "Properties of the DataView Constructor")
             1.  [25.3.3.1 DataView.prototype](#sec-dataview.prototype "DataView.prototype")
         4.  +[25.3.4 Properties of the DataView Prototype Object](#sec-properties-of-the-dataview-prototype-object "Properties of the DataView Prototype Object")
             1.  [25.3.4.1 get DataView.prototype.buffer](#sec-get-dataview.prototype.buffer "get DataView.prototype.buffer")
             2.  [25.3.4.2 get DataView.prototype.byteLength](#sec-get-dataview.prototype.bytelength "get DataView.prototype.byteLength")
             3.  [25.3.4.3 get DataView.prototype.byteOffset](#sec-get-dataview.prototype.byteoffset "get DataView.prototype.byteOffset")
             4.  [25.3.4.4 DataView.prototype.constructor](#sec-dataview.prototype.constructor "DataView.prototype.constructor")
             5.  [25.3.4.5 DataView.prototype.getBigInt64 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getbigint64 "DataView.prototype.getBigInt64 ( byteOffset [, littleEndian] )")
             6.  [25.3.4.6 DataView.prototype.getBigUint64 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getbiguint64 "DataView.prototype.getBigUint64 ( byteOffset [, littleEndian] )")
             7.  [25.3.4.7 DataView.prototype.getFloat16 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getfloat16 "DataView.prototype.getFloat16 ( byteOffset [, littleEndian] )")
             8.  [25.3.4.8 DataView.prototype.getFloat32 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getfloat32 "DataView.prototype.getFloat32 ( byteOffset [, littleEndian] )")
             9.  [25.3.4.9 DataView.prototype.getFloat64 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getfloat64 "DataView.prototype.getFloat64 ( byteOffset [, littleEndian] )")
             10.  [25.3.4.10 DataView.prototype.getInt8 ( _byteOffset_ )](#sec-dataview.prototype.getint8 "DataView.prototype.getInt8 ( byteOffset )")
             11.  [25.3.4.11 DataView.prototype.getInt16 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getint16 "DataView.prototype.getInt16 ( byteOffset [, littleEndian] )")
             12.  [25.3.4.12 DataView.prototype.getInt32 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getint32 "DataView.prototype.getInt32 ( byteOffset [, littleEndian] )")
             13.  [25.3.4.13 DataView.prototype.getUint8 ( _byteOffset_ )](#sec-dataview.prototype.getuint8 "DataView.prototype.getUint8 ( byteOffset )")
             14.  [25.3.4.14 DataView.prototype.getUint16 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getuint16 "DataView.prototype.getUint16 ( byteOffset [, littleEndian] )")
             15.  [25.3.4.15 DataView.prototype.getUint32 ( _byteOffset_ \[, _littleEndian_ \] )](#sec-dataview.prototype.getuint32 "DataView.prototype.getUint32 ( byteOffset [, littleEndian] )")
             16.  [25.3.4.16 DataView.prototype.setBigInt64 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setbigint64 "DataView.prototype.setBigInt64 ( byteOffset, value [, littleEndian] )")
             17.  [25.3.4.17 DataView.prototype.setBigUint64 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setbiguint64 "DataView.prototype.setBigUint64 ( byteOffset, value [, littleEndian] )")
             18.  [25.3.4.18 DataView.prototype.setFloat16 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setfloat16 "DataView.prototype.setFloat16 ( byteOffset, value [, littleEndian] )")
             19.  [25.3.4.19 DataView.prototype.setFloat32 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setfloat32 "DataView.prototype.setFloat32 ( byteOffset, value [, littleEndian] )")
             20.  [25.3.4.20 DataView.prototype.setFloat64 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setfloat64 "DataView.prototype.setFloat64 ( byteOffset, value [, littleEndian] )")
             21.  [25.3.4.21 DataView.prototype.setInt8 ( _byteOffset_, _value_ )](#sec-dataview.prototype.setint8 "DataView.prototype.setInt8 ( byteOffset, value )")
             22.  [25.3.4.22 DataView.prototype.setInt16 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setint16 "DataView.prototype.setInt16 ( byteOffset, value [, littleEndian] )")
             23.  [25.3.4.23 DataView.prototype.setInt32 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setint32 "DataView.prototype.setInt32 ( byteOffset, value [, littleEndian] )")
             24.  [25.3.4.24 DataView.prototype.setUint8 ( _byteOffset_, _value_ )](#sec-dataview.prototype.setuint8 "DataView.prototype.setUint8 ( byteOffset, value )")
             25.  [25.3.4.25 DataView.prototype.setUint16 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setuint16 "DataView.prototype.setUint16 ( byteOffset, value [, littleEndian] )")
             26.  [25.3.4.26 DataView.prototype.setUint32 ( _byteOffset_, _value_ \[, _littleEndian_ \] )](#sec-dataview.prototype.setuint32 "DataView.prototype.setUint32 ( byteOffset, value [, littleEndian] )")
             27.  [25.3.4.27 DataView.prototype \[%Symbol.toStringTag% \]](#sec-dataview.prototype-%symbol.tostringtag% "DataView.prototype [%Symbol.toStringTag%]")
         5.  [25.3.5 Properties of DataView Instances](#sec-properties-of-dataview-instances "Properties of DataView Instances")
     4.  +[25.4 The Atomics Object](#sec-atomics-object "The Atomics Object")
         1.  [25.4.1 Waiter Record](#sec-waiter-record "Waiter Record")
         2.  [25.4.2 WaiterList Records](#sec-waiterlist-records "WaiterList Records")
         3.  +[25.4.3 Abstract Operations for Atomics](#sec-abstract-operations-for-atomics "Abstract Operations for Atomics")
             1.  [25.4.3.1 ValidateIntegerTypedArray ( _typedArray_, _waitable_ )](#sec-validateintegertypedarray "ValidateIntegerTypedArray ( typedArray, waitable )")
             2.  [25.4.3.2 ValidateAtomicAccess ( _taRecord_, _requestIndex_ )](#sec-validateatomicaccess "ValidateAtomicAccess ( taRecord, requestIndex )")
             3.  [25.4.3.3 ValidateAtomicAccessOnIntegerTypedArray ( _typedArray_, _requestIndex_ )](#sec-validateatomicaccessonintegertypedarray "ValidateAtomicAccessOnIntegerTypedArray ( typedArray, requestIndex )")
             4.  [25.4.3.4 RevalidateAtomicAccess ( _typedArray_, _byteIndexInBuffer_ )](#sec-revalidateatomicaccess "RevalidateAtomicAccess ( typedArray, byteIndexInBuffer )")
             5.  [25.4.3.5 GetWaiterList ( _block_, _i_ )](#sec-getwaiterlist "GetWaiterList ( block, i )")
             6.  [25.4.3.6 EnterCriticalSection ( _WL_ )](#sec-entercriticalsection "EnterCriticalSection ( WL )")
             7.  [25.4.3.7 LeaveCriticalSection ( _WL_ )](#sec-leavecriticalsection "LeaveCriticalSection ( WL )")
             8.  [25.4.3.8 AddWaiter ( _WL_, _waiterRecord_ )](#sec-addwaiter "AddWaiter ( WL, waiterRecord )")
             9.  [25.4.3.9 RemoveWaiter ( _WL_, _waiterRecord_ )](#sec-removewaiter "RemoveWaiter ( WL, waiterRecord )")
             10.  [25.4.3.10 RemoveWaiters ( _WL_, _c_ )](#sec-removewaiters "RemoveWaiters ( WL, c )")
             11.  [25.4.3.11 SuspendThisAgent ( _WL_, _waiterRecord_ )](#sec-suspendthisagent "SuspendThisAgent ( WL, waiterRecord )")
             12.  [25.4.3.12 NotifyWaiter ( _WL_, _waiterRecord_ )](#sec-notifywaiter "NotifyWaiter ( WL, waiterRecord )")
             13.  [25.4.3.13 EnqueueResolveInAgentJob ( _agentSignifier_, _promiseCapability_, _resolution_ )](#sec-enqueueresolveinagentjob "EnqueueResolveInAgentJob ( agentSignifier, promiseCapability, resolution )")
             14.  [25.4.3.14 DoWait ( _mode_, _typedArray_, _index_, _value_, _timeout_ )](#sec-dowait "DoWait ( mode, typedArray, index, value, timeout )")
             15.  [25.4.3.15 EnqueueAtomicsWaitAsyncTimeoutJob ( _WL_, _waiterRecord_ )](#sec-enqueueatomicswaitasynctimeoutjob "EnqueueAtomicsWaitAsyncTimeoutJob ( WL, waiterRecord )")
             16.  [25.4.3.16 AtomicCompareExchangeInSharedBlock ( _block_, _byteIndexInBuffer_, _elementSize_, _expectedBytes_, _replacementBytes_ )](#sec-atomiccompareexchangeinsharedblock "AtomicCompareExchangeInSharedBlock ( block, byteIndexInBuffer, elementSize, expectedBytes, replacementBytes )")
             17.  [25.4.3.17 AtomicReadModifyWrite ( _typedArray_, _index_, _value_, _op_ )](#sec-atomicreadmodifywrite "AtomicReadModifyWrite ( typedArray, index, value, op )")
             18.  [25.4.3.18 ByteListBitwiseOp ( _op_, _xBytes_, _yBytes_ )](#sec-bytelistbitwiseop "ByteListBitwiseOp ( op, xBytes, yBytes )")
             19.  [25.4.3.19 ByteListEqual ( _xBytes_, _yBytes_ )](#sec-bytelistequal "ByteListEqual ( xBytes, yBytes )")
         4.  [25.4.4 Atomics.add ( _typedArray_, _index_, _value_ )](#sec-atomics.add "Atomics.add ( typedArray, index, value )")
         5.  [25.4.5 Atomics.and ( _typedArray_, _index_, _value_ )](#sec-atomics.and "Atomics.and ( typedArray, index, value )")
         6.  [25.4.6 Atomics.compareExchange ( _typedArray_, _index_, _expectedValue_, _replacementValue_ )](#sec-atomics.compareexchange "Atomics.compareExchange ( typedArray, index, expectedValue, replacementValue )")
         7.  [25.4.7 Atomics.exchange ( _typedArray_, _index_, _value_ )](#sec-atomics.exchange "Atomics.exchange ( typedArray, index, value )")
         8.  [25.4.8 Atomics.isLockFree ( _size_ )](#sec-atomics.islockfree "Atomics.isLockFree ( size )")
         9.  [25.4.9 Atomics.load ( _typedArray_, _index_ )](#sec-atomics.load "Atomics.load ( typedArray, index )")
         10.  [25.4.10 Atomics.or ( _typedArray_, _index_, _value_ )](#sec-atomics.or "Atomics.or ( typedArray, index, value )")
         11.  [25.4.11 Atomics.store ( _typedArray_, _index_, _value_ )](#sec-atomics.store "Atomics.store ( typedArray, index, value )")
         12.  [25.4.12 Atomics.sub ( _typedArray_, _index_, _value_ )](#sec-atomics.sub "Atomics.sub ( typedArray, index, value )")
         13.  [25.4.13 Atomics.wait ( _typedArray_, _index_, _value_, _timeout_ )](#sec-atomics.wait "Atomics.wait ( typedArray, index, value, timeout )")
         14.  [25.4.14 Atomics.waitAsync ( _typedArray_, _index_, _value_, _timeout_ )](#sec-atomics.waitasync "Atomics.waitAsync ( typedArray, index, value, timeout )")
         15.  [25.4.15 Atomics.notify ( _typedArray_, _index_, _count_ )](#sec-atomics.notify "Atomics.notify ( typedArray, index, count )")
         16.  [25.4.16 Atomics.xor ( _typedArray_, _index_, _value_ )](#sec-atomics.xor "Atomics.xor ( typedArray, index, value )")
         17.  [25.4.17 Atomics \[%Symbol.toStringTag% \]](#sec-atomics-%symbol.tostringtag% "Atomics [%Symbol.toStringTag%]")
     5.  +[25.5 The JSON Object](#sec-json-object "The JSON Object")
         1.  +[25.5.1 JSON.parse ( _text_ \[, _reviver_ \] )](#sec-json.parse "JSON.parse ( text [, reviver] )")
             1.  [25.5.1.1 ParseJSON ( _text_ )](#sec-ParseJSON "ParseJSON ( text )")
             2.  [25.5.1.2 InternalizeJSONProperty ( _holder_, _name_, _reviver_ )](#sec-internalizejsonproperty "InternalizeJSONProperty ( holder, name, reviver )")
         2.  +[25.5.2 JSON.stringify ( _value_ \[, _replacer_ \[, _space_ \] \] )](#sec-json.stringify "JSON.stringify ( value [, replacer [, space]] )")
             1.  [25.5.2.1 JSON Serialization Record](#sec-json-serialization-record "JSON Serialization Record")
             2.  [25.5.2.2 SerializeJSONProperty ( _state_, _key_, _holder_ )](#sec-serializejsonproperty "SerializeJSONProperty ( state, key, holder )")
             3.  [25.5.2.3 QuoteJSONString ( _value_ )](#sec-quotejsonstring "QuoteJSONString ( value )")
             4.  [25.5.2.4 UnicodeEscape ( _C_ )](#sec-unicodeescape "UnicodeEscape ( C )")
             5.  [25.5.2.5 SerializeJSONObject ( _state_, _value_ )](#sec-serializejsonobject "SerializeJSONObject ( state, value )")
             6.  [25.5.2.6 SerializeJSONArray ( _state_, _value_ )](#sec-serializejsonarray "SerializeJSONArray ( state, value )")
         3.  [25.5.3 JSON \[%Symbol.toStringTag% \]](#sec-json-%symbol.tostringtag% "JSON [%Symbol.toStringTag%]")
27.  +[26 Managing Memory](#sec-managing-memory "Managing Memory")
     1.  +[26.1 WeakRef Objects](#sec-weak-ref-objects "WeakRef Objects")
         1.  +[26.1.1 The WeakRef Constructor](#sec-weak-ref-constructor "The WeakRef Constructor")
             1.  [26.1.1.1 WeakRef ( _target_ )](#sec-weak-ref-target "WeakRef ( target )")
         2.  +[26.1.2 Properties of the WeakRef Constructor](#sec-properties-of-the-weak-ref-constructor "Properties of the WeakRef Constructor")
             1.  [26.1.2.1 WeakRef.prototype](#sec-weak-ref.prototype "WeakRef.prototype")
         3.  +[26.1.3 Properties of the WeakRef Prototype Object](#sec-properties-of-the-weak-ref-prototype-object "Properties of the WeakRef Prototype Object")
             1.  [26.1.3.1 WeakRef.prototype.constructor](#sec-weak-ref.prototype.constructor "WeakRef.prototype.constructor")
             2.  [26.1.3.2 WeakRef.prototype.deref ( )](#sec-weak-ref.prototype.deref "WeakRef.prototype.deref ( )")
             3.  [26.1.3.3 WeakRef.prototype \[%Symbol.toStringTag% \]](#sec-weak-ref.prototype-%symbol.tostringtag% "WeakRef.prototype [%Symbol.toStringTag%]")
         4.  +[26.1.4 WeakRef Abstract Operations](#sec-weakref-abstract-operations "WeakRef Abstract Operations")
             1.  [26.1.4.1 WeakRefDeref ( _weakRef_ )](#sec-weakrefderef "WeakRefDeref ( weakRef )")
         5.  [26.1.5 Properties of WeakRef Instances](#sec-properties-of-weak-ref-instances "Properties of WeakRef Instances")
     2.  +[26.2 FinalizationRegistry Objects](#sec-finalization-registry-objects "FinalizationRegistry Objects")
         1.  +[26.2.1 The FinalizationRegistry Constructor](#sec-finalization-registry-constructor "The FinalizationRegistry Constructor")
             1.  [26.2.1.1 FinalizationRegistry ( _cleanupCallback_ )](#sec-finalization-registry-cleanup-callback "FinalizationRegistry ( cleanupCallback )")
         2.  +[26.2.2 Properties of the FinalizationRegistry Constructor](#sec-properties-of-the-finalization-registry-constructor "Properties of the FinalizationRegistry Constructor")
             1.  [26.2.2.1 FinalizationRegistry.prototype](#sec-finalization-registry.prototype "FinalizationRegistry.prototype")
         3.  +[26.2.3 Properties of the FinalizationRegistry Prototype Object](#sec-properties-of-the-finalization-registry-prototype-object "Properties of the FinalizationRegistry Prototype Object")
             1.  [26.2.3.1 FinalizationRegistry.prototype.constructor](#sec-finalization-registry.prototype.constructor "FinalizationRegistry.prototype.constructor")
             2.  [26.2.3.2 FinalizationRegistry.prototype.register ( _target_, _heldValue_ \[, _unregisterToken_ \] )](#sec-finalization-registry.prototype.register "FinalizationRegistry.prototype.register ( target, heldValue [, unregisterToken] )")
             3.  [26.2.3.3 FinalizationRegistry.prototype.unregister ( _unregisterToken_ )](#sec-finalization-registry.prototype.unregister "FinalizationRegistry.prototype.unregister ( unregisterToken )")
             4.  [26.2.3.4 FinalizationRegistry.prototype \[%Symbol.toStringTag% \]](#sec-finalization-registry.prototype-%symbol.tostringtag% "FinalizationRegistry.prototype [%Symbol.toStringTag%]")
         4.  [26.2.4 Properties of FinalizationRegistry Instances](#sec-properties-of-finalization-registry-instances "Properties of FinalizationRegistry Instances")
28.  +[27 Control Abstraction Objects](#sec-control-abstraction-objects "Control Abstraction Objects")
     1.  +[27.1 Iteration](#sec-iteration "Iteration")
         1.  +[27.1.1 Common Iteration Interfaces](#sec-common-iteration-interfaces "Common Iteration Interfaces")
             1.  [27.1.1.1 The Iterable Interface](#sec-iterable-interface "The Iterable Interface")
             2.  [27.1.1.2 The Iterator Interface](#sec-iterator-interface "The Iterator Interface")
             3.  [27.1.1.3 The Async Iterable Interface](#sec-asynciterable-interface "The Async Iterable Interface")
             4.  [27.1.1.4 The Async Iterator Interface](#sec-asynciterator-interface "The Async Iterator Interface")
             5.  [27.1.1.5 The IteratorResult Interface](#sec-iteratorresult-interface "The IteratorResult Interface")
         2.  +[27.1.2 Iterator Helper Objects](#sec-iterator-helper-objects "Iterator Helper Objects")
             1.  +[27.1.2.1 The %IteratorHelperPrototype% Object](#sec-%iteratorhelperprototype%-object "The %IteratorHelperPrototype% Object")
                 1.  [27.1.2.1.1 %IteratorHelperPrototype%.next ( )](#sec-%iteratorhelperprototype%.next "%IteratorHelperPrototype%.next ( )")
                 2.  [27.1.2.1.2 %IteratorHelperPrototype%.return ( )](#sec-%iteratorhelperprototype%.return "%IteratorHelperPrototype%.return ( )")
                 3.  [27.1.2.1.3 %IteratorHelperPrototype% \[%Symbol.toStringTag% \]](#sec-%iteratorhelperprototype%-%symbol.tostringtag% "%IteratorHelperPrototype% [%Symbol.toStringTag%]")
         3.  +[27.1.3 Iterator Objects](#sec-iterator-objects "Iterator Objects")
             1.  +[27.1.3.1 The Iterator Constructor](#sec-iterator-constructor "The Iterator Constructor")
                 1.  [27.1.3.1.1 Iterator ( )](#sec-iterator "Iterator ( )")
             2.  +[27.1.3.2 Properties of the Iterator Constructor](#sec-properties-of-the-iterator-constructor "Properties of the Iterator Constructor")
                 1.  [27.1.3.2.1 Iterator.concat ( ..._items_ )](#sec-iterator.concat "Iterator.concat ( ...items )")
                 2.  +[27.1.3.2.2 Iterator.from ( _O_ )](#sec-iterator.from "Iterator.from ( O )")
                     1.  +[27.1.3.2.2.1 The %WrapForValidIteratorPrototype% Object](#sec-%wrapforvaliditeratorprototype%-object "The %WrapForValidIteratorPrototype% Object")
                         1.  [27.1.3.2.2.1.1 %WrapForValidIteratorPrototype%.next ( )](#sec-%wrapforvaliditeratorprototype%.next "%WrapForValidIteratorPrototype%.next ( )")
                         2.  [27.1.3.2.2.1.2 %WrapForValidIteratorPrototype%.return ( )](#sec-%wrapforvaliditeratorprototype%.return "%WrapForValidIteratorPrototype%.return ( )")
                 3.  [27.1.3.2.3 Iterator.prototype](#sec-iterator.prototype "Iterator.prototype")
             3.  +[27.1.3.3 Properties of the Iterator Prototype Object](#sec-%iterator.prototype%-object "Properties of the Iterator Prototype Object")
                 1.  +[27.1.3.3.1 Iterator.prototype.constructor](#sec-iterator.prototype.constructor "Iterator.prototype.constructor")
                     1.  [27.1.3.3.1.1 get Iterator.prototype.constructor](#sec-get-iterator.prototype.constructor "get Iterator.prototype.constructor")
                     2.  [27.1.3.3.1.2 set Iterator.prototype.constructor](#sec-set-iterator.prototype.constructor "set Iterator.prototype.constructor")
                 2.  [27.1.3.3.2 Iterator.prototype.drop ( _limit_ )](#sec-iterator.prototype.drop "Iterator.prototype.drop ( limit )")
                 3.  [27.1.3.3.3 Iterator.prototype.every ( _predicate_ )](#sec-iterator.prototype.every "Iterator.prototype.every ( predicate )")
                 4.  [27.1.3.3.4 Iterator.prototype.filter ( _predicate_ )](#sec-iterator.prototype.filter "Iterator.prototype.filter ( predicate )")
                 5.  [27.1.3.3.5 Iterator.prototype.find ( _predicate_ )](#sec-iterator.prototype.find "Iterator.prototype.find ( predicate )")
                 6.  [27.1.3.3.6 Iterator.prototype.flatMap ( _mapper_ )](#sec-iterator.prototype.flatmap "Iterator.prototype.flatMap ( mapper )")
                 7.  [27.1.3.3.7 Iterator.prototype.forEach ( _procedure_ )](#sec-iterator.prototype.foreach "Iterator.prototype.forEach ( procedure )")
                 8.  [27.1.3.3.8 Iterator.prototype.map ( _mapper_ )](#sec-iterator.prototype.map "Iterator.prototype.map ( mapper )")
                 9.  [27.1.3.3.9 Iterator.prototype.reduce ( _reducer_ \[, _initialValue_ \] )](#sec-iterator.prototype.reduce "Iterator.prototype.reduce ( reducer [, initialValue] )")
                 10.  [27.1.3.3.10 Iterator.prototype.some ( _predicate_ )](#sec-iterator.prototype.some "Iterator.prototype.some ( predicate )")
                 11.  [27.1.3.3.11 Iterator.prototype.take ( _limit_ )](#sec-iterator.prototype.take "Iterator.prototype.take ( limit )")
                 12.  [27.1.3.3.12 Iterator.prototype.toArray ( )](#sec-iterator.prototype.toarray "Iterator.prototype.toArray ( )")
                 13.  [27.1.3.3.13 Iterator.prototype \[%Symbol.iterator% \] ( )](#sec-iterator.prototype-%symbol.iterator% "Iterator.prototype [%Symbol.iterator%] ( )")
                 14.  +[27.1.3.3.14 Iterator.prototype \[%Symbol.toStringTag% \]](#sec-iterator.prototype-%symbol.tostringtag% "Iterator.prototype [%Symbol.toStringTag%]")
                      1.  [27.1.3.3.14.1 get Iterator.prototype \[%Symbol.toStringTag% \]](#sec-get-iterator.prototype-%symbol.tostringtag% "get Iterator.prototype [%Symbol.toStringTag%]")
                      2.  [27.1.3.3.14.2 set Iterator.prototype \[%Symbol.toStringTag% \]](#sec-set-iterator.prototype-%symbol.tostringtag% "set Iterator.prototype [%Symbol.toStringTag%]")
         4.  +[27.1.4 The %AsyncIteratorPrototype% Object](#sec-asynciteratorprototype "The %AsyncIteratorPrototype% Object")
             1.  [27.1.4.1 %AsyncIteratorPrototype% \[%Symbol.asyncIterator% \] ( )](#sec-%asynciteratorprototype%-%symbol.asynciterator% "%AsyncIteratorPrototype% [%Symbol.asyncIterator%] ( )")
         5.  +[27.1.5 Async-from-Sync Iterator Objects](#sec-async-from-sync-iterator-objects "Async-from-Sync Iterator Objects")
             1.  [27.1.5.1 CreateAsyncFromSyncIterator ( _syncIteratorRecord_ )](#sec-createasyncfromsynciterator "CreateAsyncFromSyncIterator ( syncIteratorRecord )")
             2.  +[27.1.5.2 The %AsyncFromSyncIteratorPrototype% Object](#sec-%asyncfromsynciteratorprototype%-object "The %AsyncFromSyncIteratorPrototype% Object")
                 1.  [27.1.5.2.1 %AsyncFromSyncIteratorPrototype%.next ( \[_value_ \] )](#sec-%asyncfromsynciteratorprototype%.next "%AsyncFromSyncIteratorPrototype%.next ( [value] )")
                 2.  [27.1.5.2.2 %AsyncFromSyncIteratorPrototype%.return ( \[_value_ \] )](#sec-%asyncfromsynciteratorprototype%.return "%AsyncFromSyncIteratorPrototype%.return ( [value] )")
                 3.  [27.1.5.2.3 %AsyncFromSyncIteratorPrototype%.throw ( \[_value_ \] )](#sec-%asyncfromsynciteratorprototype%.throw "%AsyncFromSyncIteratorPrototype%.throw ( [value] )")
             3.  [27.1.5.3 Properties of Async-from-Sync Iterator Instances](#sec-properties-of-async-from-sync-iterator-instances "Properties of Async-from-Sync Iterator Instances")
             4.  [27.1.5.4 AsyncFromSyncIteratorContinuation ( _result_, _promiseCapability_, _syncIteratorRecord_, _closeOnRejection_ )](#sec-asyncfromsynciteratorcontinuation "AsyncFromSyncIteratorContinuation ( result, promiseCapability, syncIteratorRecord, closeOnRejection )")
     2.  +[27.2 Promise Objects](#sec-promise-objects "Promise Objects")
         1.  +[27.2.1 Promise Abstract Operations](#sec-promise-abstract-operations "Promise Abstract Operations")
             1.  +[27.2.1.1 PromiseCapability Records](#sec-promisecapability-records "PromiseCapability Records")
                 1.  [27.2.1.1.1 IfAbruptRejectPromise ( _value_, _capability_ )](#sec-ifabruptrejectpromise "IfAbruptRejectPromise ( value, capability )")
             2.  [27.2.1.2 PromiseReaction Records](#sec-promisereaction-records "PromiseReaction Records")
             3.  [27.2.1.3 CreateResolvingFunctions ( _promise_ )](#sec-createresolvingfunctions "CreateResolvingFunctions ( promise )")
             4.  [27.2.1.4 FulfillPromise ( _promise_, _value_ )](#sec-fulfillpromise "FulfillPromise ( promise, value )")
             5.  [27.2.1.5 NewPromiseCapability ( _C_ )](#sec-newpromisecapability "NewPromiseCapability ( C )")
             6.  [27.2.1.6 IsPromise ( _x_ )](#sec-ispromise "IsPromise ( x )")
             7.  [27.2.1.7 RejectPromise ( _promise_, _reason_ )](#sec-rejectpromise "RejectPromise ( promise, reason )")
             8.  [27.2.1.8 TriggerPromiseReactions ( _reactions_, _argument_ )](#sec-triggerpromisereactions "TriggerPromiseReactions ( reactions, argument )")
             9.  [27.2.1.9 HostPromiseRejectionTracker ( _promise_, _operation_ )](#sec-host-promise-rejection-tracker "HostPromiseRejectionTracker ( promise, operation )")
         2.  +[27.2.2 Promise Jobs](#sec-promise-jobs "Promise Jobs")
             1.  [27.2.2.1 NewPromiseReactionJob ( _reaction_, _argument_ )](#sec-newpromisereactionjob "NewPromiseReactionJob ( reaction, argument )")
             2.  [27.2.2.2 NewPromiseResolveThenableJob ( _promiseToResolve_, _thenable_, _then_ )](#sec-newpromiseresolvethenablejob "NewPromiseResolveThenableJob ( promiseToResolve, thenable, then )")
         3.  +[27.2.3 The Promise Constructor](#sec-promise-constructor "The Promise Constructor")
             1.  [27.2.3.1 Promise ( _executor_ )](#sec-promise-executor "Promise ( executor )")
         4.  +[27.2.4 Properties of the Promise Constructor](#sec-properties-of-the-promise-constructor "Properties of the Promise Constructor")
             1.  +[27.2.4.1 Promise.all ( _iterable_ )](#sec-promise.all "Promise.all ( iterable )")
                 1.  [27.2.4.1.1 GetPromiseResolve ( _promiseConstructor_ )](#sec-getpromiseresolve "GetPromiseResolve ( promiseConstructor )")
                 2.  [27.2.4.1.2 PerformPromiseAll ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )](#sec-performpromiseall "PerformPromiseAll ( iteratorRecord, constructor, resultCapability, promiseResolve )")
             2.  +[27.2.4.2 Promise.allSettled ( _iterable_ )](#sec-promise.allsettled "Promise.allSettled ( iterable )")
                 1.  [27.2.4.2.1 PerformPromiseAllSettled ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )](#sec-performpromiseallsettled "PerformPromiseAllSettled ( iteratorRecord, constructor, resultCapability, promiseResolve )")
             3.  +[27.2.4.3 Promise.any ( _iterable_ )](#sec-promise.any "Promise.any ( iterable )")
                 1.  [27.2.4.3.1 PerformPromiseAny ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )](#sec-performpromiseany "PerformPromiseAny ( iteratorRecord, constructor, resultCapability, promiseResolve )")
             4.  [27.2.4.4 Promise.prototype](#sec-promise.prototype "Promise.prototype")
             5.  +[27.2.4.5 Promise.race ( _iterable_ )](#sec-promise.race "Promise.race ( iterable )")
                 1.  [27.2.4.5.1 PerformPromiseRace ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )](#sec-performpromiserace "PerformPromiseRace ( iteratorRecord, constructor, resultCapability, promiseResolve )")
             6.  [27.2.4.6 Promise.reject ( _r_ )](#sec-promise.reject "Promise.reject ( r )")
             7.  +[27.2.4.7 Promise.resolve ( _x_ )](#sec-promise.resolve "Promise.resolve ( x )")
                 1.  [27.2.4.7.1 PromiseResolve ( _C_, _x_ )](#sec-promise-resolve "PromiseResolve ( C, x )")
             8.  [27.2.4.8 Promise.try ( _callback_, ..._args_ )](#sec-promise.try "Promise.try ( callback, ...args )")
             9.  [27.2.4.9 Promise.withResolvers ( )](#sec-promise.withResolvers "Promise.withResolvers ( )")
             10.  [27.2.4.10 get Promise \[%Symbol.species% \]](#sec-get-promise-%symbol.species% "get Promise [%Symbol.species%]")
         5.  +[27.2.5 Properties of the Promise Prototype Object](#sec-properties-of-the-promise-prototype-object "Properties of the Promise Prototype Object")
             1.  [27.2.5.1 Promise.prototype.catch ( _onRejected_ )](#sec-promise.prototype.catch "Promise.prototype.catch ( onRejected )")
             2.  [27.2.5.2 Promise.prototype.constructor](#sec-promise.prototype.constructor "Promise.prototype.constructor")
             3.  [27.2.5.3 Promise.prototype.finally ( _onFinally_ )](#sec-promise.prototype.finally "Promise.prototype.finally ( onFinally )")
             4.  +[27.2.5.4 Promise.prototype.then ( _onFulfilled_, _onRejected_ )](#sec-promise.prototype.then "Promise.prototype.then ( onFulfilled, onRejected )")
                 1.  [27.2.5.4.1 PerformPromiseThen ( _promise_, _onFulfilled_, _onRejected_ \[, _resultCapability_ \] )](#sec-performpromisethen "PerformPromiseThen ( promise, onFulfilled, onRejected [, resultCapability] )")
             5.  [27.2.5.5 Promise.prototype \[%Symbol.toStringTag% \]](#sec-promise.prototype-%symbol.tostringtag% "Promise.prototype [%Symbol.toStringTag%]")
         6.  [27.2.6 Properties of Promise Instances](#sec-properties-of-promise-instances "Properties of Promise Instances")
     3.  +[27.3 GeneratorFunction Objects](#sec-generatorfunction-objects "GeneratorFunction Objects")
         1.  +[27.3.1 The GeneratorFunction Constructor](#sec-generatorfunction-constructor "The GeneratorFunction Constructor")
             1.  [27.3.1.1 GeneratorFunction ( ..._parameterArgs_, _bodyArg_ )](#sec-generatorfunction "GeneratorFunction ( ...parameterArgs, bodyArg )")
         2.  +[27.3.2 Properties of the GeneratorFunction Constructor](#sec-properties-of-the-generatorfunction-constructor "Properties of the GeneratorFunction Constructor")
             1.  [27.3.2.1 GeneratorFunction.prototype](#sec-generatorfunction.prototype "GeneratorFunction.prototype")
         3.  +[27.3.3 Properties of the GeneratorFunction Prototype Object](#sec-properties-of-the-generatorfunction-prototype-object "Properties of the GeneratorFunction Prototype Object")
             1.  [27.3.3.1 GeneratorFunction.prototype.constructor](#sec-generatorfunction.prototype.constructor "GeneratorFunction.prototype.constructor")
             2.  [27.3.3.2 GeneratorFunction.prototype.prototype](#sec-generatorfunction.prototype.prototype "GeneratorFunction.prototype.prototype")
             3.  [27.3.3.3 GeneratorFunction.prototype \[%Symbol.toStringTag% \]](#sec-generatorfunction.prototype-%symbol.tostringtag% "GeneratorFunction.prototype [%Symbol.toStringTag%]")
         4.  +[27.3.4 GeneratorFunction Instances](#sec-generatorfunction-instances "GeneratorFunction Instances")
             1.  [27.3.4.1 length](#sec-generatorfunction-instances-length "length")
             2.  [27.3.4.2 name](#sec-generatorfunction-instances-name "name")
             3.  [27.3.4.3 prototype](#sec-generatorfunction-instances-prototype "prototype")
     4.  +[27.4 AsyncGeneratorFunction Objects](#sec-asyncgeneratorfunction-objects "AsyncGeneratorFunction Objects")
         1.  +[27.4.1 The AsyncGeneratorFunction Constructor](#sec-asyncgeneratorfunction-constructor "The AsyncGeneratorFunction Constructor")
             1.  [27.4.1.1 AsyncGeneratorFunction ( ..._parameterArgs_, _bodyArg_ )](#sec-asyncgeneratorfunction "AsyncGeneratorFunction ( ...parameterArgs, bodyArg )")
         2.  +[27.4.2 Properties of the AsyncGeneratorFunction Constructor](#sec-properties-of-asyncgeneratorfunction "Properties of the AsyncGeneratorFunction Constructor")
             1.  [27.4.2.1 AsyncGeneratorFunction.prototype](#sec-asyncgeneratorfunction-prototype "AsyncGeneratorFunction.prototype")
         3.  +[27.4.3 Properties of the AsyncGeneratorFunction Prototype Object](#sec-properties-of-asyncgeneratorfunction-prototype "Properties of the AsyncGeneratorFunction Prototype Object")
             1.  [27.4.3.1 AsyncGeneratorFunction.prototype.constructor](#sec-asyncgeneratorfunction-prototype-constructor "AsyncGeneratorFunction.prototype.constructor")
             2.  [27.4.3.2 AsyncGeneratorFunction.prototype.prototype](#sec-asyncgeneratorfunction-prototype-prototype "AsyncGeneratorFunction.prototype.prototype")
             3.  [27.4.3.3 AsyncGeneratorFunction.prototype \[%Symbol.toStringTag% \]](#sec-asyncgeneratorfunction-prototype-%symbol.tostringtag% "AsyncGeneratorFunction.prototype [%Symbol.toStringTag%]")
         4.  +[27.4.4 AsyncGeneratorFunction Instances](#sec-asyncgeneratorfunction-instances "AsyncGeneratorFunction Instances")
             1.  [27.4.4.1 length](#sec-asyncgeneratorfunction-instance-length "length")
             2.  [27.4.4.2 name](#sec-asyncgeneratorfunction-instance-name "name")
             3.  [27.4.4.3 prototype](#sec-asyncgeneratorfunction-instance-prototype "prototype")
     5.  +[27.5 Generator Objects](#sec-generator-objects "Generator Objects")
         1.  +[27.5.1 The %GeneratorPrototype% Object](#sec-properties-of-generator-prototype "The %GeneratorPrototype% Object")
             1.  [27.5.1.1 %GeneratorPrototype%.constructor](#sec-generator.prototype.constructor "%GeneratorPrototype%.constructor")
             2.  [27.5.1.2 %GeneratorPrototype%.next ( _value_ )](#sec-generator.prototype.next "%GeneratorPrototype%.next ( value )")
             3.  [27.5.1.3 %GeneratorPrototype%.return ( _value_ )](#sec-generator.prototype.return "%GeneratorPrototype%.return ( value )")
             4.  [27.5.1.4 %GeneratorPrototype%.throw ( _exception_ )](#sec-generator.prototype.throw "%GeneratorPrototype%.throw ( exception )")
             5.  [27.5.1.5 %GeneratorPrototype% \[%Symbol.toStringTag% \]](#sec-generator.prototype-%symbol.tostringtag% "%GeneratorPrototype% [%Symbol.toStringTag%]")
         2.  [27.5.2 Properties of Generator Instances](#sec-properties-of-generator-instances "Properties of Generator Instances")
         3.  +[27.5.3 Generator Abstract Operations](#sec-generator-abstract-operations "Generator Abstract Operations")
             1.  [27.5.3.1 GeneratorStart ( _generator_, _generatorBody_ )](#sec-generatorstart "GeneratorStart ( generator, generatorBody )")
             2.  [27.5.3.2 GeneratorValidate ( _generator_, _generatorBrand_ )](#sec-generatorvalidate "GeneratorValidate ( generator, generatorBrand )")
             3.  [27.5.3.3 GeneratorResume ( _generator_, _value_, _generatorBrand_ )](#sec-generatorresume "GeneratorResume ( generator, value, generatorBrand )")
             4.  [27.5.3.4 GeneratorResumeAbrupt ( _generator_, _abruptCompletion_, _generatorBrand_ )](#sec-generatorresumeabrupt "GeneratorResumeAbrupt ( generator, abruptCompletion, generatorBrand )")
             5.  [27.5.3.5 GetGeneratorKind ( )](#sec-getgeneratorkind "GetGeneratorKind ( )")
             6.  [27.5.3.6 GeneratorYield ( _iteratorResult_ )](#sec-generatoryield "GeneratorYield ( iteratorResult )")
             7.  [27.5.3.7 Yield ( _value_ )](#sec-yield "Yield ( value )")
             8.  [27.5.3.8 CreateIteratorFromClosure ( _closure_, _generatorBrand_, _generatorPrototype_ \[, _extraSlots_ \] )](#sec-createiteratorfromclosure "CreateIteratorFromClosure ( closure, generatorBrand, generatorPrototype [, extraSlots] )")
     6.  +[27.6 AsyncGenerator Objects](#sec-asyncgenerator-objects "AsyncGenerator Objects")
         1.  +[27.6.1 The %AsyncGeneratorPrototype% Object](#sec-properties-of-asyncgenerator-prototype "The %AsyncGeneratorPrototype% Object")
             1.  [27.6.1.1 %AsyncGeneratorPrototype%.constructor](#sec-asyncgenerator-prototype-constructor "%AsyncGeneratorPrototype%.constructor")
             2.  [27.6.1.2 %AsyncGeneratorPrototype%.next ( _value_ )](#sec-asyncgenerator-prototype-next "%AsyncGeneratorPrototype%.next ( value )")
             3.  [27.6.1.3 %AsyncGeneratorPrototype%.return ( _value_ )](#sec-asyncgenerator-prototype-return "%AsyncGeneratorPrototype%.return ( value )")
             4.  [27.6.1.4 %AsyncGeneratorPrototype%.throw ( _exception_ )](#sec-asyncgenerator-prototype-throw "%AsyncGeneratorPrototype%.throw ( exception )")
             5.  [27.6.1.5 %AsyncGeneratorPrototype% \[%Symbol.toStringTag% \]](#sec-asyncgenerator-prototype-%symbol.tostringtag% "%AsyncGeneratorPrototype% [%Symbol.toStringTag%]")
         2.  [27.6.2 Properties of AsyncGenerator Instances](#sec-properties-of-asyncgenerator-intances "Properties of AsyncGenerator Instances")
         3.  +[27.6.3 AsyncGenerator Abstract Operations](#sec-asyncgenerator-abstract-operations "AsyncGenerator Abstract Operations")
             1.  [27.6.3.1 AsyncGeneratorRequest Records](#sec-asyncgeneratorrequest-records "AsyncGeneratorRequest Records")
             2.  [27.6.3.2 AsyncGeneratorStart ( _generator_, _generatorBody_ )](#sec-asyncgeneratorstart "AsyncGeneratorStart ( generator, generatorBody )")
             3.  [27.6.3.3 AsyncGeneratorValidate ( _generator_, _generatorBrand_ )](#sec-asyncgeneratorvalidate "AsyncGeneratorValidate ( generator, generatorBrand )")
             4.  [27.6.3.4 AsyncGeneratorEnqueue ( _generator_, _completion_, _promiseCapability_ )](#sec-asyncgeneratorenqueue "AsyncGeneratorEnqueue ( generator, completion, promiseCapability )")
             5.  [27.6.3.5 AsyncGeneratorCompleteStep ( _generator_, _completion_, _done_ \[, _realm_ \] )](#sec-asyncgeneratorcompletestep "AsyncGeneratorCompleteStep ( generator, completion, done [, realm] )")
             6.  [27.6.3.6 AsyncGeneratorResume ( _generator_, _completion_ )](#sec-asyncgeneratorresume "AsyncGeneratorResume ( generator, completion )")
             7.  [27.6.3.7 AsyncGeneratorUnwrapYieldResumption ( _resumptionValue_ )](#sec-asyncgeneratorunwrapyieldresumption "AsyncGeneratorUnwrapYieldResumption ( resumptionValue )")
             8.  [27.6.3.8 AsyncGeneratorYield ( _value_ )](#sec-asyncgeneratoryield "AsyncGeneratorYield ( value )")
             9.  [27.6.3.9 AsyncGeneratorAwaitReturn ( _generator_ )](#sec-asyncgeneratorawaitreturn "AsyncGeneratorAwaitReturn ( generator )")
             10.  [27.6.3.10 AsyncGeneratorDrainQueue ( _generator_ )](#sec-asyncgeneratordrainqueue "AsyncGeneratorDrainQueue ( generator )")
     7.  +[27.7 AsyncFunction Objects](#sec-async-function-objects "AsyncFunction Objects")
         1.  +[27.7.1 The AsyncFunction Constructor](#sec-async-function-constructor "The AsyncFunction Constructor")
             1.  [27.7.1.1 AsyncFunction ( ..._parameterArgs_, _bodyArg_ )](#sec-async-function-constructor-arguments "AsyncFunction ( ...parameterArgs, bodyArg )")
         2.  +[27.7.2 Properties of the AsyncFunction Constructor](#sec-async-function-constructor-properties "Properties of the AsyncFunction Constructor")
             1.  [27.7.2.1 AsyncFunction.prototype](#sec-async-function-constructor-prototype "AsyncFunction.prototype")
         3.  +[27.7.3 Properties of the AsyncFunction Prototype Object](#sec-async-function-prototype-properties "Properties of the AsyncFunction Prototype Object")
             1.  [27.7.3.1 AsyncFunction.prototype.constructor](#sec-async-function-prototype-properties-constructor "AsyncFunction.prototype.constructor")
             2.  [27.7.3.2 AsyncFunction.prototype \[%Symbol.toStringTag% \]](#sec-async-function-prototype-%symbol.tostringtag% "AsyncFunction.prototype [%Symbol.toStringTag%]")
         4.  +[27.7.4 AsyncFunction Instances](#sec-async-function-instances "AsyncFunction Instances")
             1.  [27.7.4.1 length](#sec-async-function-instances-length "length")
             2.  [27.7.4.2 name](#sec-async-function-instances-name "name")
         5.  +[27.7.5 Async Functions Abstract Operations](#sec-async-functions-abstract-operations "Async Functions Abstract Operations")
             1.  [27.7.5.1 AsyncFunctionStart ( _promiseCapability_, _asyncFunctionBody_ )](#sec-async-functions-abstract-operations-async-function-start "AsyncFunctionStart ( promiseCapability, asyncFunctionBody )")
             2.  [27.7.5.2 AsyncBlockStart ( _promiseCapability_, _asyncBody_, _asyncContext_ )](#sec-asyncblockstart "AsyncBlockStart ( promiseCapability, asyncBody, asyncContext )")
             3.  [27.7.5.3 Await ( _value_ )](#await "Await ( value )")
29.  +[28 Reflection](#sec-reflection "Reflection")
     1.  +[28.1 The Reflect Object](#sec-reflect-object "The Reflect Object")
         1.  [28.1.1 Reflect.apply ( _target_, _thisArgument_, _argumentsList_ )](#sec-reflect.apply "Reflect.apply ( target, thisArgument, argumentsList )")
         2.  [28.1.2 Reflect.construct ( _target_, _argumentsList_ \[, _newTarget_ \] )](#sec-reflect.construct "Reflect.construct ( target, argumentsList [, newTarget] )")
         3.  [28.1.3 Reflect.defineProperty ( _target_, _propertyKey_, _attributes_ )](#sec-reflect.defineproperty "Reflect.defineProperty ( target, propertyKey, attributes )")
         4.  [28.1.4 Reflect.deleteProperty ( _target_, _propertyKey_ )](#sec-reflect.deleteproperty "Reflect.deleteProperty ( target, propertyKey )")
         5.  [28.1.5 Reflect.get ( _target_, _propertyKey_ \[, _receiver_ \] )](#sec-reflect.get "Reflect.get ( target, propertyKey [, receiver] )")
         6.  [28.1.6 Reflect.getOwnPropertyDescriptor ( _target_, _propertyKey_ )](#sec-reflect.getownpropertydescriptor "Reflect.getOwnPropertyDescriptor ( target, propertyKey )")
         7.  [28.1.7 Reflect.getPrototypeOf ( _target_ )](#sec-reflect.getprototypeof "Reflect.getPrototypeOf ( target )")
         8.  [28.1.8 Reflect.has ( _target_, _propertyKey_ )](#sec-reflect.has "Reflect.has ( target, propertyKey )")
         9.  [28.1.9 Reflect.isExtensible ( _target_ )](#sec-reflect.isextensible "Reflect.isExtensible ( target )")
         10.  [28.1.10 Reflect.ownKeys ( _target_ )](#sec-reflect.ownkeys "Reflect.ownKeys ( target )")
         11.  [28.1.11 Reflect.preventExtensions ( _target_ )](#sec-reflect.preventextensions "Reflect.preventExtensions ( target )")
         12.  [28.1.12 Reflect.set ( _target_, _propertyKey_, _V_ \[, _receiver_ \] )](#sec-reflect.set "Reflect.set ( target, propertyKey, V [, receiver] )")
         13.  [28.1.13 Reflect.setPrototypeOf ( _target_, _proto_ )](#sec-reflect.setprototypeof "Reflect.setPrototypeOf ( target, proto )")
         14.  [28.1.14 Reflect \[%Symbol.toStringTag% \]](#sec-reflect-%symbol.tostringtag% "Reflect [%Symbol.toStringTag%]")
     2.  +[28.2 Proxy Objects](#sec-proxy-objects "Proxy Objects")
         1.  +[28.2.1 The Proxy Constructor](#sec-proxy-constructor "The Proxy Constructor")
             1.  [28.2.1.1 Proxy ( _target_, _handler_ )](#sec-proxy-target-handler "Proxy ( target, handler )")
         2.  +[28.2.2 Properties of the Proxy Constructor](#sec-properties-of-the-proxy-constructor "Properties of the Proxy Constructor")
             1.  [28.2.2.1 Proxy.revocable ( _target_, _handler_ )](#sec-proxy.revocable "Proxy.revocable ( target, handler )")
     3.  +[28.3 Module Namespace Objects](#sec-module-namespace-objects "Module Namespace Objects")
         1.  [28.3.1 %Symbol.toStringTag%](#sec-%symbol.tostringtag% "%Symbol.toStringTag%")
30.  +[29 Memory Model](#sec-memory-model "Memory Model")
     1.  [29.1 Memory Model Fundamentals](#sec-memory-model-fundamentals "Memory Model Fundamentals")
     2.  [29.2 Agent Events Records](#sec-agent-event-records "Agent Events Records")
     3.  [29.3 Chosen Value Records](#sec-chosen-value-records "Chosen Value Records")
     4.  [29.4 Candidate Executions](#sec-candidate-executions "Candidate Executions")
     5.  +[29.5 Abstract Operations for the Memory Model](#sec-abstract-operations-for-the-memory-model "Abstract Operations for the Memory Model")
         1.  [29.5.1 EventSet ( _execution_ )](#sec-event-set "EventSet ( execution )")
         2.  [29.5.2 SharedDataBlockEventSet ( _execution_ )](#sec-sharedatablockeventset "SharedDataBlockEventSet ( execution )")
         3.  [29.5.3 HostEventSet ( _execution_ )](#sec-hosteventset "HostEventSet ( execution )")
         4.  [29.5.4 ComposeWriteEventBytes ( _execution_, _byteIndex_, _Ws_ )](#sec-composewriteeventbytes "ComposeWriteEventBytes ( execution, byteIndex, Ws )")
         5.  [29.5.5 ValueOfReadEvent ( _execution_, _R_ )](#sec-valueofreadevent "ValueOfReadEvent ( execution, R )")
     6.  +[29.6 Relations of Candidate Executions](#sec-relations-of-candidate-executions "Relations of Candidate Executions")
         1.  [29.6.1 is-agent-order-before](#sec-agent-order "is-agent-order-before")
         2.  [29.6.2 reads-bytes-from](#sec-reads-bytes-from "reads-bytes-from")
         3.  [29.6.3 reads-from](#sec-reads-from "reads-from")
         4.  [29.6.4 host-synchronizes-with](#sec-host-synchronizes-with "host-synchronizes-with")
         5.  [29.6.5 synchronizes-with](#sec-synchronizes-with "synchronizes-with")
         6.  [29.6.6 happens-before](#sec-happens-before "happens-before")
     7.  +[29.7 Properties of Valid Executions](#sec-properties-of-valid-executions "Properties of Valid Executions")
         1.  [29.7.1 Valid Chosen Reads](#sec-valid-chosen-reads "Valid Chosen Reads")
         2.  [29.7.2 Coherent Reads](#sec-coherent-reads "Coherent Reads")
         3.  [29.7.3 Tear Free Reads](#sec-tear-free-aligned-reads "Tear Free Reads")
         4.  [29.7.4 Sequentially Consistent Atomics](#sec-memory-order "Sequentially Consistent Atomics")
         5.  [29.7.5 Valid Executions](#sec-valid-executions "Valid Executions")
     8.  [29.8 Races](#sec-races "Races")
     9.  [29.9 Data Races](#sec-data-races "Data Races")
     10.  [29.10 Data Race Freedom](#sec-data-race-freedom "Data Race Freedom")
     11.  [29.11 Shared Memory Guidelines](#sec-shared-memory-guidelines "Shared Memory Guidelines")
31.  +[Annex A (informative) Grammar Summary](#sec-grammar-summary "Grammar Summary")
     1.  [A.1 Lexical Grammar](#sec-lexical-grammar "Lexical Grammar")
     2.  [A.2 Expressions](#sec-expressions "Expressions")
     3.  [A.3 Statements](#sec-statements "Statements")
     4.  [A.4 Functions and Classes](#sec-functions-and-classes "Functions and Classes")
     5.  [A.5 Scripts and Modules](#sec-scripts-and-modules "Scripts and Modules")
     6.  [A.6 Number Conversions](#sec-number-conversions "Number Conversions")
     7.  [A.7 Time Zone Offset String Format](#sec-time-zone-offset-string-format "Time Zone Offset String Format")
     8.  [A.8 Regular Expressions](#sec-regular-expressions "Regular Expressions")
32.  +[Annex B (normative) Additional ECMAScript Features for Web Browsers](#sec-additional-ecmascript-features-for-web-browsers "Additional ECMAScript Features for Web Browsers")
     1.  +[B.1 Additional Syntax](#sec-additional-syntax "Additional Syntax")
         1.  [B.1.1 HTML-like Comments](#sec-html-like-comments "HTML-like Comments")
         2.  +[B.1.2 Regular Expressions Patterns](#sec-regular-expressions-patterns "Regular Expressions Patterns")
             1.  [B.1.2.1 SS: Early Errors](#sec-patterns-static-semantics-early-errors-annexb "Static Semantics: Early Errors")
             2.  [B.1.2.2 SS: CountLeftCapturingParensWithin and CountLeftCapturingParensBefore](#sec-countleftcapturingparens-annexb "Static Semantics: CountLeftCapturingParensWithin and CountLeftCapturingParensBefore")
             3.  [B.1.2.3 SS: IsCharacterClass](#sec-patterns-static-semantics-is-character-class-annexb "Static Semantics: IsCharacterClass")
             4.  [B.1.2.4 SS: CharacterValue](#sec-patterns-static-semantics-character-value-annexb "Static Semantics: CharacterValue")
             5.  [B.1.2.5 RS: CompileSubpattern](#sec-compilesubpattern-annexb "Runtime Semantics: CompileSubpattern")
             6.  [B.1.2.6 RS: CompileAssertion](#sec-compileassertion-annexb "Runtime Semantics: CompileAssertion")
             7.  [B.1.2.7 RS: CompileAtom](#sec-compileatom-annexb "Runtime Semantics: CompileAtom")
             8.  +[B.1.2.8 RS: CompileToCharSet](#sec-compiletocharset-annexb "Runtime Semantics: CompileToCharSet")
                 1.  [B.1.2.8.1 CharacterRangeOrUnion ( _rer_, _A_, _B_ )](#sec-runtime-semantics-characterrangeorunion-abstract-operation "CharacterRangeOrUnion ( rer, A, B )")
             9.  [B.1.2.9 SS: ParsePattern ( _patternText_, _u_, _v_ )](#sec-parsepattern-annexb "Static Semantics: ParsePattern ( patternText, u, v )")
     2.  +[B.2 Additional Built-in Properties](#sec-additional-built-in-properties "Additional Built-in Properties")
         1.  +[B.2.1 Additional Properties of the Global Object](#sec-additional-properties-of-the-global-object "Additional Properties of the Global Object")
             1.  [B.2.1.1 escape ( _string_ )](#sec-escape-string "escape ( string )")
             2.  [B.2.1.2 unescape ( _string_ )](#sec-unescape-string "unescape ( string )")
         2.  +[B.2.2 Additional Properties of the String.prototype Object](#sec-additional-properties-of-the-string.prototype-object "Additional Properties of the String.prototype Object")
             1.  [B.2.2.1 String.prototype.substr ( _start_, _length_ )](#sec-string.prototype.substr "String.prototype.substr ( start, length )")
             2.  +[B.2.2.2 String.prototype.anchor ( _name_ )](#sec-string.prototype.anchor "String.prototype.anchor ( name )")
                 1.  [B.2.2.2.1 CreateHTML ( _string_, _tag_, _attribute_, _value_ )](#sec-createhtml "CreateHTML ( string, tag, attribute, value )")
             3.  [B.2.2.3 String.prototype.big ( )](#sec-string.prototype.big "String.prototype.big ( )")
             4.  [B.2.2.4 String.prototype.blink ( )](#sec-string.prototype.blink "String.prototype.blink ( )")
             5.  [B.2.2.5 String.prototype.bold ( )](#sec-string.prototype.bold "String.prototype.bold ( )")
             6.  [B.2.2.6 String.prototype.fixed ( )](#sec-string.prototype.fixed "String.prototype.fixed ( )")
             7.  [B.2.2.7 String.prototype.fontcolor ( _colour_ )](#sec-string.prototype.fontcolor "String.prototype.fontcolor ( colour )")
             8.  [B.2.2.8 String.prototype.fontsize ( _size_ )](#sec-string.prototype.fontsize "String.prototype.fontsize ( size )")
             9.  [B.2.2.9 String.prototype.italics ( )](#sec-string.prototype.italics "String.prototype.italics ( )")
             10.  [B.2.2.10 String.prototype.link ( _url_ )](#sec-string.prototype.link "String.prototype.link ( url )")
             11.  [B.2.2.11 String.prototype.small ( )](#sec-string.prototype.small "String.prototype.small ( )")
             12.  [B.2.2.12 String.prototype.strike ( )](#sec-string.prototype.strike "String.prototype.strike ( )")
             13.  [B.2.2.13 String.prototype.sub ( )](#sec-string.prototype.sub "String.prototype.sub ( )")
             14.  [B.2.2.14 String.prototype.sup ( )](#sec-string.prototype.sup "String.prototype.sup ( )")
             15.  [B.2.2.15 String.prototype.trimLeft ( )](#String.prototype.trimleft "String.prototype.trimLeft ( )")
             16.  [B.2.2.16 String.prototype.trimRight ( )](#String.prototype.trimright "String.prototype.trimRight ( )")
         3.  +[B.2.3 Additional Properties of the Date.prototype Object](#sec-additional-properties-of-the-date.prototype-object "Additional Properties of the Date.prototype Object")
             1.  [B.2.3.1 Date.prototype.getYear ( )](#sec-date.prototype.getyear "Date.prototype.getYear ( )")
             2.  [B.2.3.2 Date.prototype.setYear ( _year_ )](#sec-date.prototype.setyear "Date.prototype.setYear ( year )")
             3.  [B.2.3.3 Date.prototype.toGMTString ( )](#sec-date.prototype.togmtstring "Date.prototype.toGMTString ( )")
         4.  +[B.2.4 Additional Properties of the RegExp.prototype Object](#sec-additional-properties-of-the-regexp.prototype-object "Additional Properties of the RegExp.prototype Object")
             1.  [B.2.4.1 RegExp.prototype.compile ( _pattern_, _flags_ )](#sec-regexp.prototype.compile "RegExp.prototype.compile ( pattern, flags )")
     3.  +[B.3 Other Additional Features](#sec-other-additional-features "Other Additional Features")
         1.  [B.3.1 Labelled Function Declarations](#sec-labelled-function-declarations "Labelled Function Declarations")
         2.  [B.3.2 Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics "Block-Level Function Declarations Web Legacy Compatibility Semantics")
         3.  [B.3.3 FunctionDeclarations in IfStatement Statement Clauses](#sec-functiondeclarations-in-ifstatement-statement-clauses "FunctionDeclarations in IfStatement Statement Clauses")
         4.  [B.3.4 VariableStatements in Catch Blocks](#sec-variablestatements-in-catch-blocks "VariableStatements in Catch Blocks")
         5.  [B.3.5 Initializers in ForIn Statement Heads](#sec-initializers-in-forin-statement-heads "Initializers in ForIn Statement Heads")
         6.  [B.3.6 The _\[\[IsHTMLDDA\]\]_ Internal Slot](#sec-IsHTMLDDA-internal-slot "The [[IsHTMLDDA]] Internal Slot")
         7.  [B.3.7 Non-default behaviour in HostMakeJobCallback](#sec-web-compat-host-make-job-callback "Non-default behaviour in HostMakeJobCallback")
         8.  [B.3.8 Non-default behaviour in HostEnsureCanAddPrivateElement](#sec-web-compat-host-ensure-can-add-private-field "Non-default behaviour in HostEnsureCanAddPrivateElement")
         9.  [B.3.9 Runtime Errors for Function Call Assignment Targets](#sec-runtime-errors-for-function-call-assignment-targets "Runtime Errors for Function Call Assignment Targets")
33.  [Annex C (informative) The Strict Mode of ECMAScript](#sec-strict-mode-of-ecmascript "The Strict Mode of ECMAScript")
34.  +[Annex D (informative) Host Layering Points](#sec-host-layering-points "Host Layering Points")
     1.  [D.1 Host Hooks](#sec-host-hooks-summary "Host Hooks")
     2.  [D.2 Host-defined Fields](#sec-host-defined-fields-summary "Host-defined Fields")
     3.  [D.3 Host-defined Objects](#sec-host-defined-objects-summary "Host-defined Objects")
     4.  [D.4 Running Jobs](#sec-host-running-jobs "Running Jobs")
     5.  [D.5 Internal Methods of Exotic Objects](#sec-host-internal-methods-of-exotic-objects "Internal Methods of Exotic Objects")
     6.  [D.6 Built-in Objects and Methods](#sec-host-built-in-objects-and-methods "Built-in Objects and Methods")
35.  [Annex E (informative) Corrections and Clarifications in ECMAScript 2015 with Possible Compatibility Impact](#sec-corrections-and-clarifications-in-ecmascript-2015-with-possible-compatibility-impact "Corrections and Clarifications in ECMAScript 2015 with Possible Compatibility Impact")
36.  [Annex F (informative) Additions and Changes That Introduce Incompatibilities with Prior Editions](#sec-additions-and-changes-that-introduce-incompatibilities-with-prior-editions "Additions and Changes That Introduce Incompatibilities with Prior Editions")
37.  [Bibliography](#sec-bibliography "Bibliography")
38.  [Colophon](#sec-colophon "Colophon")
39.  [Copyright & Software License](#sec-copyright-and-software-license "Copyright & Software License")


# Draft ECMA-262 / December 18, 2025


# ECMAScript® 2026 Language Specification

![Ecma International logo](img/ecma-logo.svg)


# About this Specification

The document at [https://tc39.es/ecma262/](https://tc39.es/ecma262/) is the most accurate and up-to-date ECMAScript specification. It contains the content of the most recent yearly snapshot plus any [finished proposals](https://github.com/tc39/proposals/blob/HEAD/finished-proposals.md) — those that have reached Stage 4 in the [proposal process](https://tc39.es/process-document/) and thus are implemented in several implementations and will be included in the next yearly snapshot. Historical snapshots are available at [https://ecma-international.org/publications-and-standards/standards/ecma-262/](https://ecma-international.org/publications-and-standards/standards/ecma-262/).

This document is available as a single page and as [multiple pages](multipage/).


# Contributing to this Specification

This specification is developed on GitHub with the help of the ECMAScript community. There are a number of ways to contribute to the development of this specification:

-   GitHub Repository: [https://github.com/tc39/ecma262](https://github.com/tc39/ecma262)
-   Issues: [All Issues](https://github.com/tc39/ecma262/issues), [File a New Issue](https://github.com/tc39/ecma262/issues/new)
-   Pull Requests: [All Pull Requests](https://github.com/tc39/ecma262/pulls), [Create a New Pull Request](https://github.com/tc39/ecma262/pulls/new)
-   Test Suite: [Test262](https://github.com/tc39/test262)
-   Editors:
    -   [Shu-yu Guo](mailto:shu at rfrn dot org)
    -   [Michael Ficarra](mailto:ecma262-editor-list at michael dot ficarra dot me) ([@michael.ficarra.me](https://bsky.app/profile/michael.ficarra.me))
    -   [Kevin Gibbons](mailto:bakkot at gmail dot com)
-   Community:
    -   Discourse: [https://es.discourse.group/](https://es.discourse.group)
    -   Chat: [Matrix](https://github.com/tc39/how-we-work/blob/HEAD/matrix-guide.md)
    -   Mailing List Archives: [https://esdiscuss.org/](https://esdiscuss.org)

Refer to the [colophon](#sec-colophon) for more information on how this document is created.


# Introduction

This Ecma Standard defines the ECMAScript 2026 Language. It is the seventeenth edition of the ECMAScript Language Specification. ECMAScript is based on several originating technologies, the most well-known being JavaScript (Netscape) and JScript (Microsoft). The language was invented by Brendan Eich at Netscape and first appeared in that company's Navigator 2.0 browser. Though best known as the language embedded in web browsers, it has also been widely adopted for use outside the browser, including server and embedded applications, and has grown to be one of the world's most widely used general-purpose programming languages.

The development of the ECMAScript Language Specification started in November 1996. The first edition of this Ecma Standard was adopted by the Ecma General Assembly of June 1997.

That Ecma Standard was submitted to ISO/IEC JTC 1 for adoption under the fast-track procedure, and approved as international standard ISO/IEC 16262, in April 1998. The Ecma General Assembly of June 1998 approved the second edition of ECMA-262 to keep it fully aligned with ISO/IEC 16262. Changes between the first and the second edition are editorial in nature.

The third edition of the Standard introduced powerful regular expressions, better string handling, new control statements, try/catch exception handling, tighter definition of errors, formatting for numeric output and minor changes in anticipation of future language growth. The third edition of the ECMAScript standard was adopted by the Ecma General Assembly of December 1999 and published as ISO/IEC 16262:2002 in June 2002.

After publication of the third edition, ECMAScript achieved massive adoption in conjunction with the World Wide Web where it has become the programming language that is supported by essentially all web browsers. Significant work was done to develop a fourth edition of ECMAScript. However, that work was not completed and not published as the fourth edition of ECMAScript but some of it was incorporated into the development of the sixth edition.

The fifth edition of ECMAScript (published as ECMA-262 5<sup>th</sup> edition) codified de facto interpretations of the language specification that have become common among browser implementations and added support for new features that had emerged since the publication of the third edition. Such features include [accessor properties](#sec-object-type), reflective creation and inspection of objects, program control of property attributes, additional array manipulation functions, support for the JSON object encoding format, and a strict mode that provides enhanced error checking and program security. The fifth edition was adopted by the Ecma General Assembly of December 2009.

The fifth edition was submitted to ISO/IEC JTC 1 for adoption under the fast-track procedure, and approved as international standard ISO/IEC 16262:2011. Edition 5.1 of the ECMAScript Standard incorporated minor corrections and is the same text as ISO/IEC 16262:2011. The 5.1 Edition was adopted by the Ecma General Assembly of June 2011.

Focused development of the sixth edition started in 2009, as the fifth edition was being prepared for publication. However, this was preceded by significant experimentation and language enhancement design efforts dating to the publication of the third edition in 1999. In a very real sense, the completion of the sixth edition is the culmination of a fifteen year effort. The goals for this edition included providing better support for large applications, library creation, and for use of ECMAScript as a compilation target for other languages. Some of its major enhancements included modules, class declarations, lexical block scoping, [iterators](#sec-iterator-interface) and generators, promises for asynchronous programming, destructuring patterns, and proper tail calls. The ECMAScript library of built-ins was expanded to support additional data abstractions including maps, sets, and arrays of binary numeric values as well as additional support for Unicode supplementary characters in strings and regular expressions. The built-ins were also made extensible via subclassing. The sixth edition provides the foundation for regular, incremental language and library enhancements. The sixth edition was adopted by the General Assembly of June 2015.

ECMAScript 2016 was the first ECMAScript edition released under Ecma TC39's new yearly release cadence and open development process. A plain-text source document was built from the ECMAScript 2015 source document to serve as the base for further development entirely on GitHub. Over the year of this standard's development, hundreds of pull requests and issues were filed representing thousands of bug fixes, editorial fixes and other improvements. Additionally, numerous software tools were developed to aid in this effort including Ecmarkup, Ecmarkdown, and Grammarkdown. ES2016 also included support for a new exponentiation operator and adds a new method to `Array.prototype` called `includes`.

ECMAScript 2017 introduced Async Functions, Shared Memory, and Atomics along with smaller language and library enhancements, bug fixes, and editorial updates. Async functions improve the asynchronous programming experience by providing syntax for promise-returning functions. Shared Memory and Atomics introduce a new [memory model](#sec-memory-model) that allows multi-[agent](#agent) programs to communicate using atomic operations that ensure a well-defined execution order even on parallel CPUs. It also included new static methods on Object: `Object.values`, `Object.entries`, and `Object.getOwnPropertyDescriptors`.

ECMAScript 2018 introduced support for asynchronous iteration via the [async iterator](#sec-asynciterator-interface) protocol and async generators. It also included four new regular expression features: the `dotAll` flag, named capture groups, Unicode property escapes, and look-behind assertions. Lastly it included object rest and spread properties.

ECMAScript 2019 introduced a few new built-in functions: `flat` and `flatMap` on `Array.prototype` for flattening arrays, `Object.fromEntries` for directly turning the return value of `Object.entries` into a new Object, and `trimStart` and `trimEnd` on `String.prototype` as better-named alternatives to the widely implemented but non-standard `String.prototype.trimLeft` and `trimRight` built-ins. In addition, it included a few minor updates to syntax and semantics. Updated syntax included optional catch binding parameters and allowing U+2028 (LINE SEPARATOR) and U+2029 (PARAGRAPH SEPARATOR) in string literals to align with JSON. Other updates included requiring that `Array.prototype.sort` be a stable sort, requiring that `JSON.stringify` return well-formed UTF-8 regardless of input, and clarifying `Function.prototype.toString` by requiring that it either return the corresponding original source text or a standard placeholder.

ECMAScript 2020, the 11<sup>th</sup> edition, introduced the `matchAll` method for Strings, to produce an [iterator](#sec-iterator-interface) for all match objects generated by a global regular expression; `import()`, a syntax to asynchronously import Modules with a dynamic specifier; `BigInt`, a new number primitive for working with arbitrary precision [integers](#integer); `Promise.allSettled`, a new Promise combinator that does not short-circuit; `globalThis`, a universal way to access the global `this` value; dedicated `export * as ns from 'module'` syntax for use within modules; increased standardization of `for-in` enumeration order; `import.meta`, a [host](#host)\-populated object available in Modules that may contain contextual information about the Module; as well as adding two new syntax features to improve working with “nullish” values (undefined or null): nullish coalescing, a value selection operator; and optional chaining, a property access and function invocation operator that short-circuits if the value to access/invoke is nullish.

ECMAScript 2021, the 12<sup>th</sup> edition, introduced the `replaceAll` method for Strings; `Promise.any`, a Promise combinator that short-circuits when an input value is fulfilled; `AggregateError`, a new Error type to represent multiple errors at once; logical assignment operators (`??=`, `&&=`, `||=`); `WeakRef`, for referring to a target object without preserving it from garbage collection, and `FinalizationRegistry`, to manage registration and unregistration of cleanup operations performed when target objects are garbage collected; separators for numeric literals (`1_000`); and `Array.prototype.sort` was made more precise, reducing the amount of cases that result in an [implementation-defined](#implementation-defined) [sort order](#sort-order).

ECMAScript 2022, the 13<sup>th</sup> edition, introduced top-level `await`, allowing the [keyword](#sec-keywords-and-reserved-words) to be used at the top level of modules; new class elements: public and private instance fields, public and private static fields, private instance methods and accessors, and private static methods and accessors; static blocks inside classes, to perform per-class evaluation initialization; the `#x in obj` syntax, to test for presence of private fields on objects; regular expression match indices via the `/d` flag, which provides start and end indices for matched substrings; the `cause` property on `Error` objects, which can be used to record a causation chain in errors; the `at` method for Strings, Arrays, and [TypedArrays](#typedarray), which allows relative indexing; and `Object.hasOwn`, a convenient alternative to `Object.prototype.hasOwnProperty`.

ECMAScript 2023, the 14<sup>th</sup> edition, introduced the `toSorted`, `toReversed`, `with`, `findLast`, and `findLastIndex` methods on `Array.prototype` and `TypedArray.prototype`, as well as the `toSpliced` method on `Array.prototype`; added support for `#!` comments at the beginning of files to better facilitate executable ECMAScript files; and allowed the use of most Symbols as keys in weak collections.

ECMAScript 2024, the 15<sup>th</sup> edition, added facilities for resizing and transferring ArrayBuffers and SharedArrayBuffers; added a new RegExp `/v` flag for creating RegExps with more advanced features for working with sets of strings; and introduced the `Promise.withResolvers` convenience method for constructing Promises, the `Object.groupBy` and `Map.groupBy` methods for aggregating data, the `Atomics.waitAsync` method for asynchronously waiting for a change to shared memory, and the `String.prototype.isWellFormed` and `String.prototype.toWellFormed` methods for checking and ensuring that strings contain only well-formed Unicode.

ECMAScript 2025, the 16<sup>th</sup> edition, added a new `Iterator` global with associated static and prototype methods for working with [iterators](#sec-iterator-interface); added methods to `Set.prototype` for performing common operations on Sets; added support for importing JSON modules as well as syntax for declaring attributes of imported modules; added the `RegExp.escape` method for escaping a string to be safely used in a regular expression; added syntax for enabling and disabling modifier flags inline within regular expressions; added the `Promise.try` method for calling functions which may or may not return a `Promise` and ensuring the result is always a `Promise`; and added a new `Float16Array` [TypedArray](#typedarray) kind as well as the related `DataView.prototype.getFloat16`, `DataView.prototype.setFloat16`, and `Math.f16round` methods.

Dozens of individuals representing many organizations have made very significant contributions within Ecma TC39 to the development of this edition and to the prior editions. In addition, a vibrant community has emerged supporting TC39's ECMAScript efforts. This community has reviewed numerous drafts, filed thousands of bug reports, performed implementation experiments, contributed test suites, and educated the world-wide developer community about ECMAScript. Unfortunately, it is impossible to identify and acknowledge every person and organization who has contributed to this effort.

Allen Wirfs-Brock  
ECMA-262, Project Editor, 6<sup>th</sup> Edition

Brian Terlson  
ECMA-262, Project Editor, 7<sup>th</sup> through 10<sup>th</sup> Editions

Jordan Harband  
ECMA-262, Project Editor, 10<sup>th</sup> through 12<sup>th</sup> Editions

Shu-yu Guo  
ECMA-262, Project Editor, 12<sup>th</sup> through 16<sup>th</sup> Editions

Michael Ficarra  
ECMA-262, Project Editor, 12<sup>th</sup> through 16<sup>th</sup> Editions

Kevin Gibbons  
ECMA-262, Project Editor, 12<sup>th</sup> through 16<sup>th</sup> Editions


# 1 Scope

This Standard defines the ECMAScript 2026 general-purpose programming language.


# 2 Conformance

A conforming implementation of ECMAScript must provide and support all the types, values, objects, properties, functions, and program syntax and semantics described in this specification.

A conforming implementation of ECMAScript must interpret source text input in conformance with the latest version of the Unicode Standard and ISO/IEC 10646.

A conforming implementation of ECMAScript that provides an application programming interface (API) that supports programs that need to adapt to the linguistic and cultural conventions used by different human languages and countries must implement the interface defined by the most recent edition of ECMA-402 that is compatible with this specification.

A conforming implementation of ECMAScript may provide additional types, values, objects, properties, and functions beyond those described in this specification. In particular, a conforming implementation of ECMAScript may provide properties not described in this specification, and values for those properties, for objects that are described in this specification.

A conforming implementation of ECMAScript may support program and regular expression syntax not described in this specification. In particular, a conforming implementation of ECMAScript may support program syntax that makes use of any “future [reserved words](#sec-keywords-and-reserved-words)” noted in subclause [12.7.2](#sec-keywords-and-reserved-words) of this specification.

A conforming implementation of ECMAScript must not implement any extension that is listed as a Forbidden Extension in subclause [17.1](#sec-forbidden-extensions).

A conforming implementation of ECMAScript must not redefine any facilities that are not [implementation-defined](#implementation-defined), [implementation-approximated](#implementation-approximated), or [host-defined](#host-defined).

A conforming implementation of ECMAScript may choose to implement or not implement Normative Optional subclauses, unless otherwise indicated. Web browsers are generally required to implement all normative optional subclauses. (See Annex [B](#sec-additional-ecmascript-features-for-web-browsers).) If any Normative Optional behaviour is implemented, all of the behaviour in the containing Normative Optional clause must be implemented. A Normative Optional clause is denoted in this specification with the words "Normative Optional" in a coloured box, as shown below.

[Normative Optional](#sec-conformance)


# 2.1 Example Normative Optional Clause Heading

Example clause contents.

A conforming implementation of ECMAScript must implement Legacy subclauses, unless they are also marked as Normative Optional. All of the language features and behaviours specified within Legacy subclauses have one or more undesirable characteristics. However, their continued usage in existing applications prevents their removal from this specification. These features are not considered part of the core ECMAScript language. Programmers should not use or assume the existence of these features and behaviours when writing new ECMAScript code.

[Legacy](#sec-conformance)


# 2.2 Example Legacy Clause Heading

Example clause contents.

[Normative Optional](#sec-conformance), [Legacy](#sec-conformance)


# 2.3 Example Legacy Normative Optional Clause Heading

Example clause contents.


# 3 Normative References

The following referenced documents are indispensable for the application of this document. For dated references, only the edition cited applies. For undated references, the latest edition of the referenced document (including any amendments) applies.

[IEEE 754-2019](#sec-bibliography), *IEEE Standard for Floating-Point Arithmetic*.

The Unicode Standard.  
[https://unicode.org/versions/latest](https://unicode.org/versions/latest)

ISO/IEC 10646, *Information Technology — Universal Multiple-Octet Coded Character Set (UCS)* plus Amendment 1:2005, Amendment 2:2006, Amendment 3:2008, Amendment 4:2008, and additional amendments and corrigenda, or successor.

ECMA-402, *ECMAScript Internationalization API Specification*, specifically the annual edition corresponding to this edition of this specification.  
[https://www.ecma-international.org/publications-and-standards/standards/ecma-402/](https://www.ecma-international.org/publications-and-standards/standards/ecma-402/)

ECMA-404, *The JSON Data Interchange Format*.  
[https://www.ecma-international.org/publications-and-standards/standards/ecma-404/](https://www.ecma-international.org/publications-and-standards/standards/ecma-404/)


# 4 Overview

This section contains a non-normative overview of the ECMAScript language.

ECMAScript is an object-oriented programming language for performing computations and manipulating computational objects within a [host environment](#host-environment). ECMAScript as defined here is not intended to be computationally self-sufficient; indeed, there are no provisions in this specification for input of external data or output of computed results. Instead, it is expected that the computational environment of an ECMAScript program will provide not only the objects and other facilities described in this specification but also certain environment-specific objects, whose description and behaviour are beyond the scope of this specification except to indicate that they may provide certain properties that can be accessed and certain functions that can be called from an ECMAScript program.

ECMAScript was originally designed to be used as a scripting language, but has become widely used as a general-purpose programming language. A *scripting language* is a programming language that is used to manipulate, customize, and automate the facilities of an existing system. In such systems, useful functionality is already available through a user interface, and the scripting language is a mechanism for exposing that functionality to program control. In this way, the existing system is said to provide a [host environment](#host-environment) of objects and facilities, which completes the capabilities of the scripting language. A scripting language is intended for use by both professional and non-professional programmers.

ECMAScript was originally designed to be a *Web scripting language*, providing a mechanism to enliven Web pages in browsers and to perform server computation as part of a Web-based client-server architecture. ECMAScript is now used to provide core scripting capabilities for a variety of [host environments](#host-environment). Therefore the core language is specified in this document apart from any particular [host environment](#host-environment).

ECMAScript usage has moved beyond simple scripting and it is now used for the full spectrum of programming tasks in many different environments and scales. As the usage of ECMAScript has expanded, so have the features and facilities it provides. ECMAScript is now a fully featured general-purpose programming language.


# 4.1 Web Scripting

A web browser provides an ECMAScript [host environment](#host-environment) for client-side computation including, for instance, objects that represent windows, menus, pop-ups, dialog boxes, text areas, anchors, frames, history, cookies, and input/output. Further, the [host environment](#host-environment) provides a means to attach scripting code to events such as change of focus, page and image loading, unloading, error and abort, selection, form submission, and mouse actions. Scripting code appears within the HTML and the displayed page is a combination of user interface elements and fixed and computed text and images. The scripting code is reactive to user interaction, and there is no need for a main program.

A web server provides a different [host environment](#host-environment) for server-side computation including objects representing requests, clients, and files; and mechanisms to lock and share data. By using browser-side and server-side scripting together, it is possible to distribute computation between the client and server while providing a customized user interface for a Web-based application.

Each Web browser and server that supports ECMAScript supplies its own [host environment](#host-environment), completing the ECMAScript execution environment.


# 4.2 Hosts and Implementations

To aid integrating ECMAScript into [host environments](#host-environment), this specification defers the definition of certain facilities (e.g., [abstract operations](#sec-algorithm-conventions-abstract-operations)), either in whole or in part, to a source outside of this specification. Editorially, this specification distinguishes the following kinds of deferrals.

An *implementation* is an external source that further defines facilities enumerated in Annex [D](#sec-host-layering-points) or those that are marked as [implementation-defined](#implementation-defined) or [implementation-approximated](#implementation-approximated). In informal use, an implementation refers to a concrete artefact, such as a particular web browser.

An implementation-defined facility is one that defers its definition to an external source without further qualification. This specification does not make any recommendations for particular behaviours, and conforming implementations are free to choose any behaviour within the constraints put forth by this specification.

An implementation-approximated facility is one that defers its definition to an external source while recommending an ideal behaviour. While conforming implementations are free to choose any behaviour within the constraints put forth by this specification, they are encouraged to strive to approximate the ideal. Some mathematical operations, such as [`Math.exp`](#sec-math.exp), are [implementation-approximated](#implementation-approximated).

A host is an external source that further defines facilities listed in Annex [D](#sec-host-layering-points) but does not further define other [implementation-defined](#implementation-defined) or [implementation-approximated](#implementation-approximated) facilities. In informal use, a [host](#host) refers to the set of all implementations, such as the set of all web browsers, that interface with this specification in the same way via Annex [D](#sec-host-layering-points). A [host](#host) is often an external specification, such as WHATWG HTML ([https://html.spec.whatwg.org/](https://html.spec.whatwg.org/)). In other words, facilities that are [host-defined](#host-defined) are often further defined in external specifications.

A host hook is an abstract operation that is defined in whole or in part by an external source. All [host hooks](#host-hook) must be listed in Annex [D](#sec-host-layering-points). A [host hook](#host-hook) must conform to at least the following requirements:

-   It must return either a [normal completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type).

A host-defined facility is one that defers its definition to an external source without further qualification and is listed in Annex [D](#sec-host-layering-points). Implementations that are not [hosts](#host) may also provide definitions for [host-defined](#host-defined) facilities.

A host environment is a particular choice of definition for all [host-defined](#host-defined) facilities. A [host environment](#host-environment) typically includes objects or functions which allow obtaining input and providing output as [host-defined](#host-defined) properties of the [global object](#sec-global-object).

This specification follows the editorial convention of always using the most specific term. For example, if a facility is [host-defined](#host-defined), it should not be referred to as [implementation-defined](#implementation-defined).

Both [hosts](#host) and implementations may interface with this specification via the language types, specification types, [abstract operations](#sec-algorithm-conventions-abstract-operations), grammar productions, intrinsic objects, and intrinsic symbols defined herein.


# 4.3 ECMAScript Overview

The following is an informal overview of ECMAScript—not all parts of the language are described. This overview is not part of the standard proper.

ECMAScript is object-based: basic language and [host](#host) facilities are provided by objects, and an ECMAScript program is a cluster of communicating objects. In ECMAScript, an *object* is a collection of zero or more *properties* each with *attributes* that determine how each property can be used—for example, when the Writable attribute for a property is set to false, any attempt by executed ECMAScript code to assign a different value to the property fails. Properties are containers that hold other objects, *primitive values*, or *functions*. A primitive value is a member of one of the following built-in types: **Undefined**, **Null**, **Boolean**, **Number**, **BigInt**, **String**, and **Symbol;** an object is a member of the built-in type **Object**; and a function is a callable object. A function that is associated with an object via a property is called a *method*.

ECMAScript defines a collection of *built-in objects* that round out the definition of ECMAScript entities. These built-in objects include the [global object](#sec-global-object); objects that are fundamental to the [runtime semantics](#sec-runtime-semantics) of the language including `Object`, `Function`, `Boolean`, `Symbol`, and various `Error` objects; objects that represent and manipulate numeric values including `Math`, `Number`, and `Date`; the text processing objects `String` and `RegExp`; objects that are indexed collections of values including `Array` and nine different kinds of Typed Arrays whose elements all have a specific numeric data representation; keyed collections including `Map` and `Set` objects; objects supporting structured data including the `JSON` object, `ArrayBuffer`, `SharedArrayBuffer`, and `DataView`; objects supporting control abstractions including generator functions and `Promise` objects; and reflection objects including `Proxy` and `Reflect`.

ECMAScript also defines a set of built-in *operators*. ECMAScript operators include various unary operations, multiplicative operators, additive operators, bitwise shift operators, relational operators, equality operators, binary bitwise operators, binary logical operators, assignment operators, and the comma operator.

Large ECMAScript programs are supported by *modules* which allow a program to be divided into multiple sequences of statements and declarations. Each module explicitly identifies declarations it uses that need to be provided by other modules and which of its declarations are available for use by other modules.

ECMAScript syntax intentionally resembles Java syntax. ECMAScript syntax is relaxed to enable it to serve as an easy-to-use scripting language. For example, a variable is not required to have its type declared nor are types associated with properties, and defined functions are not required to have their declarations appear textually before calls to them.


# 4.3.1 Objects

Even though ECMAScript includes syntax for class definitions, ECMAScript objects are not fundamentally class-based such as those in C++, Smalltalk, or Java. Instead objects may be created in various ways including via a literal notation or via *[constructors](#constructor)* which create objects and then execute code that initializes all or part of them by assigning initial values to their properties. Each [constructor](#constructor) is a function that has a property named "prototype" that is used to implement *prototype-based inheritance* and *shared properties*. Objects are created by using [constructors](#constructor) in **new** expressions; for example, `new Date(2009, 11)` creates a new Date object. Invoking a [constructor](#constructor) without using **new** has consequences that depend on the [constructor](#constructor). For example, `Date()` produces a string representation of the current date and time rather than an object.

Every object created by a [constructor](#constructor) has an implicit reference (called the object's *prototype*) to the value of its [constructor](#constructor)'s "prototype" property. Furthermore, a prototype may have a non-null implicit reference to its prototype, and so on; this is called the *prototype chain*. When a reference is made to a property in an object, that reference is to the property of that name in the first object in the prototype chain that contains a property of that name. In other words, first the object mentioned directly is examined for such a property; if that object contains the named property, that is the property to which the reference refers; if that object does not contain the named property, the prototype for that object is examined next; and so on.

Figure 1: Object/Prototype Relationships

![An image of lots of boxes and arrows.](img/figure-1.svg)

In a class-based object-oriented language, in general, state is carried by instances, methods are carried by classes, and inheritance is only of structure and behaviour. In ECMAScript, the state and methods are carried by objects, while structure, behaviour, and state are all inherited.

All objects that do not directly contain a particular property that their prototype contains share that property and its value. Figure 1 illustrates this:

**CF** is a [constructor](#constructor) (and also an object). Five objects have been created by using `new` expressions: **cf<sub>1</sub>**, **cf<sub>2</sub>**, **cf<sub>3</sub>**, **cf<sub>4</sub>**, and **cf<sub>5</sub>**. Each of these objects contains properties named "q1" and "q2". The dashed lines represent the implicit prototype relationship; so, for example, **cf<sub>3</sub>**'s prototype is **CF<sub>p</sub>**. The [constructor](#constructor), **CF**, has two properties itself, named "P1" and "P2", which are not visible to **CF<sub>p</sub>**, **cf<sub>1</sub>**, **cf<sub>2</sub>**, **cf<sub>3</sub>**, **cf<sub>4</sub>**, or **cf<sub>5</sub>**. The property named "CFP1" in **CF<sub>p</sub>** is shared by **cf<sub>1</sub>**, **cf<sub>2</sub>**, **cf<sub>3</sub>**, **cf<sub>4</sub>**, and **cf<sub>5</sub>** (but not by **CF**), as are any properties found in **CF<sub>p</sub>**'s implicit prototype chain that are not named "q1", "q2", or "CFP1". Notice that there is no implicit prototype link between **CF** and **CF<sub>p</sub>**.

Unlike most class-based object languages, properties can be added to objects dynamically by assigning values to them. That is, [constructors](#constructor) are not required to name or assign values to all or any of the constructed object's properties. In the above diagram, one could add a new shared property for **cf<sub>1</sub>**, **cf<sub>2</sub>**, **cf<sub>3</sub>**, **cf<sub>4</sub>**, and **cf<sub>5</sub>** by assigning a new value to the property in **CF<sub>p</sub>**.

Although ECMAScript objects are not inherently class-based, it is often convenient to define class-like abstractions based upon a common pattern of [constructor](#constructor) functions, prototype objects, and methods. The ECMAScript built-in objects themselves follow such a class-like pattern. Beginning with ECMAScript 2015, the ECMAScript language includes syntactic class definitions that permit programmers to concisely define objects that conform to the same class-like abstraction pattern used by the built-in objects.


# 4.3.2 The Strict Variant of ECMAScript

The ECMAScript Language recognizes the possibility that some users of the language may wish to restrict their usage of some features available in the language. They might do so in the interests of security, to avoid what they consider to be error-prone features, to get enhanced error checking, or for other reasons of their choosing. In support of this possibility, ECMAScript defines a strict variant of the language. The strict variant of the language excludes some specific syntactic and semantic features of the regular ECMAScript language and modifies the detailed semantics of some features. The strict variant also specifies additional error conditions that must be reported by throwing error exceptions in situations that are not specified as errors by the non-strict form of the language.

The strict variant of ECMAScript is commonly referred to as the *strict mode* of the language. Strict mode selection and use of the strict mode syntax and semantics of ECMAScript is explicitly made at the level of individual [ECMAScript source text](#sec-source-text) units as described in [11.2.2](#sec-strict-mode-code). Because strict mode is selected at the level of a syntactic source text unit, strict mode only imposes restrictions that have local effect within such a source text unit. Strict mode does not restrict or modify any aspect of the ECMAScript semantics that must operate consistently across multiple source text units. A complete ECMAScript program may be composed of both strict mode and non-strict mode [ECMAScript source text](#sec-source-text) units. In this case, strict mode only applies when actually executing code that is defined within a strict mode source text unit.

In order to conform to this specification, an ECMAScript implementation must implement both the full unrestricted ECMAScript language and the strict variant of the ECMAScript language as defined by this specification. In addition, an implementation must support the combination of unrestricted and strict mode source text units into a single composite program.


# 4.4 Terms and Definitions

For the purposes of this document, the following terms and definitions apply.


# 4.4.1 implementation-approximated

an [implementation-approximated](#implementation-approximated) facility is defined in whole or in part by an external source but has a recommended, ideal behaviour in this specification


# 4.4.2 implementation-defined

an [implementation-defined](#implementation-defined) facility is defined in whole or in part by an external source to this specification


# 4.4.3 host-defined

same as [implementation-defined](#implementation-defined)

Note

Editorially, see clause [4.2](#sec-hosts-and-implementations).


# 4.4.4 type

set of data values as defined in clause [6](#sec-ecmascript-data-types-and-values)


# 4.4.5 primitive value

member of one of the types Undefined, Null, Boolean, Number, BigInt, Symbol, or String as defined in clause [6](#sec-ecmascript-data-types-and-values)

Note

A primitive value is a datum that is represented directly at the lowest level of the language implementation.


# 4.4.6 object

member of the type Object

Note

An object is a collection of properties and has a single prototype object. The prototype may be null.


# 4.4.7 constructor

[function object](#function-object) that creates and initializes objects

Note

The value of a [constructor](#constructor)'s "prototype" property is a prototype object that is used to implement inheritance and shared properties.


# 4.4.8 prototype

object that provides shared properties for other objects

Note

When a [constructor](#constructor) creates an object, that object implicitly references the [constructor](#constructor)'s "prototype" property for the purpose of resolving property references. The [constructor](#constructor)'s "prototype" property can be referenced by the program expression `_constructor_.prototype`, and properties added to an object's prototype are shared, through inheritance, by all objects sharing the prototype. Alternatively, a new object may be created with an explicitly specified prototype by using the `Object.create` built-in function.


# 4.4.9 ordinary object

object that has the default behaviour for the essential internal methods that must be supported by all objects


# 4.4.10 exotic object

object that does not have the default behaviour for one or more of the essential internal methods

Note

Any object that is not an [ordinary object](#ordinary-object) is an [exotic object](#exotic-object).


# 4.4.11 standard object

object whose semantics are defined by this specification


# 4.4.12 built-in object

object specified and supplied by an ECMAScript implementation

Note

Standard built-in objects are defined in this specification. An ECMAScript implementation may specify and supply additional kinds of built-in objects.


# 4.4.13 undefined value

primitive value used when a variable has not been assigned a value


# 4.4.14 Undefined type

type whose sole value is the undefined value


# 4.4.15 null value

primitive value that represents the intentional absence of any object value


# 4.4.16 Null type

type whose sole value is the null value


# 4.4.17 Boolean value

member of the [Boolean type](#sec-ecmascript-language-types-boolean-type)

Note

There are only two Boolean values, true and false.


# 4.4.18 Boolean type

type consisting of the primitive values true and false


# 4.4.19 Boolean object

member of the [Object type](#sec-object-type) that is an instance of the standard built-in Boolean [constructor](#constructor)

Note

A Boolean object is created by using the Boolean [constructor](#constructor) in a `new` expression, supplying a Boolean value as an argument. The resulting object has an internal slot whose value is the Boolean value. A Boolean object can be coerced to a Boolean value.


# 4.4.20 String value

primitive value that is a [finite](#finite) ordered sequence of zero or more 16-bit unsigned [integer](#integer) values

Note

A String value is a member of the [String type](#sec-ecmascript-language-types-string-type). Each [integer](#integer) value in the sequence usually represents a single 16-bit unit of UTF-16 text. However, ECMAScript does not place any restrictions or requirements on the values except that they must be 16-bit unsigned [integers](#integer).


# 4.4.21 String type

set of all possible String values


# 4.4.22 String object

member of the [Object type](#sec-object-type) that is an instance of the standard built-in String [constructor](#constructor)

Note

A String object is created by using the String [constructor](#constructor) in a `new` expression, supplying a String value as an argument. The resulting object has an internal slot whose value is the String value. A String object can be coerced to a String value by calling the String [constructor](#constructor) as a function ([22.1.1.1](#sec-string-constructor-string-value)).


# 4.4.23 Number value

primitive value corresponding to a double-precision 64-bit binary format [IEEE 754-2019](#sec-bibliography) value

Note

A Number value is a member of the [Number type](#sec-ecmascript-language-types-number-type) and is a direct representation of a number.


# 4.4.24 Number type

set of all possible Number values including NaN (“not a number”), +∞<sub>𝔽</sub> (positive infinity), and \-∞<sub>𝔽</sub> (negative infinity)


# 4.4.25 Number object

member of the [Object type](#sec-object-type) that is an instance of the standard built-in Number [constructor](#constructor)

Note

A Number object is created by using the Number [constructor](#constructor) in a `new` expression, supplying a Number value as an argument. The resulting object has an internal slot whose value is the Number value. A Number object can be coerced to a Number value by calling the Number [constructor](#constructor) as a function ([21.1.1.1](#sec-number-constructor-number-value)).


# 4.4.26 Infinity

Number value that is the positive infinite Number value


# 4.4.27 NaN

Number value that is an [IEEE 754-2019](#sec-bibliography) NaN (“not a number”) value


# 4.4.28 BigInt value

primitive value corresponding to an arbitrary-precision [integer](#integer) value


# 4.4.29 BigInt type

set of all possible BigInt values


# 4.4.30 BigInt object

member of the [Object type](#sec-object-type) that is an instance of the standard built-in BigInt [constructor](#constructor)


# 4.4.31 Symbol value

primitive value that represents a unique, non-String Object [property key](#property-key)


# 4.4.32 Symbol type

set of all possible Symbol values


# 4.4.33 Symbol object

member of the [Object type](#sec-object-type) that is an instance of the standard built-in Symbol [constructor](#constructor)


# 4.4.34 function

member of the [Object type](#sec-object-type) that may be invoked as a subroutine

Note

In addition to its properties, a function contains executable code and state that determine how it behaves when invoked. A function's code may or may not be written in ECMAScript.


# 4.4.35 built-in function

built-in object that is a function

Note

Examples of built-in functions include `parseInt` and `Math.exp`. A [host](#host) or implementation may provide additional built-in functions that are not described in this specification.


# 4.4.36 built-in constructor

built-in function that is a [constructor](#constructor)

Note

Examples of built-in [constructors](#constructor) include `Object` and `Function`. A [host](#host) or implementation may provide additional built-in [constructors](#constructor) that are not described in this specification.


# 4.4.37 property

part of an object that associates a key (either a String value or a Symbol value) and a value

Note

Depending upon the form of the property the value may be represented either directly as a data value (a primitive value, an object, or a [function object](#function-object)) or indirectly by a pair of accessor functions.


# 4.4.38 method

function that is the value of a property

Note

When a function is called as a method of an object, the object is passed to the function as its this value.


# 4.4.39 built-in method

method that is a built-in function

Note

Standard built-in methods are defined in this specification. A [host](#host) or implementation may provide additional built-in methods that are not described in this specification.


# 4.4.40 attribute

internal value that defines some characteristic of a property


# 4.4.41 own property

property that is directly contained by its object


# 4.4.42 inherited property

property of an object that is not an own property but is a property (either own or inherited) of the object's prototype


# 4.5 Organization of This Specification

The remainder of this specification is organized as follows:

Clause [5](#sec-notational-conventions) defines the notational conventions used throughout the specification.

Clauses [6](#sec-ecmascript-data-types-and-values) through [10](#sec-ordinary-and-exotic-objects-behaviours) define the execution environment within which ECMAScript programs operate.

Clauses [11](#sec-ecmascript-language-source-code) through [17](#sec-error-handling-and-language-extensions) define the actual ECMAScript programming language including its syntactic encoding and the execution semantics of all language features.

Clauses [18](#sec-ecmascript-standard-built-in-objects) through [28](#sec-reflection) define the ECMAScript standard library. They include the definitions of all of the standard objects that are available for use by ECMAScript programs as they execute.

Clause [29](#sec-memory-model) describes the memory consistency model of accesses on SharedArrayBuffer-backed memory and methods of the Atomics object.


# 5 Notational Conventions


# 5.1 Syntactic and Lexical Grammars


# 5.1.1 Context-Free Grammars

A *context-free grammar* consists of a number of *productions*. Each production has an abstract symbol called a *nonterminal* as its *left-hand side*, and a sequence of zero or more nonterminal and *terminal* symbols as its *right-hand side*. For each grammar, the terminal symbols are drawn from a specified alphabet.

A chain production is a production that has exactly one nonterminal symbol on its right-hand side along with zero or more terminal symbols.

Starting from a sentence consisting of a single distinguished nonterminal, called the goal symbol, a given context-free grammar specifies a *language*, namely, the (perhaps infinite) set of possible sequences of terminal symbols that can result from repeatedly replacing any nonterminal in the sequence with a right-hand side of a production for which the nonterminal is the left-hand side.


# 5.1.2 The Lexical and RegExp Grammars

A *lexical grammar* for ECMAScript is given in clause [12](#sec-ecmascript-language-lexical-grammar). This grammar has as its terminal symbols Unicode code points that conform to the rules for [SourceCharacter](#prod-SourceCharacter) defined in [11.1](#sec-source-text). It defines a set of productions, starting from the [goal symbol](#sec-context-free-grammars) [InputElementDiv](#prod-InputElementDiv), [InputElementTemplateTail](#prod-InputElementTemplateTail), [InputElementRegExp](#prod-InputElementRegExp), [InputElementRegExpOrTemplateTail](#prod-InputElementRegExpOrTemplateTail), or [InputElementHashbangOrRegExp](#prod-InputElementHashbangOrRegExp), that describe how sequences of such code points are translated into a sequence of input elements.

Input elements other than white space and comments form the terminal symbols for the syntactic grammar for ECMAScript and are called ECMAScript *tokens*. These tokens are the [reserved words](#sec-keywords-and-reserved-words), identifiers, literals, and punctuators of the ECMAScript language. Moreover, line terminators, although not considered to be tokens, also become part of the stream of input elements and guide the process of automatic semicolon insertion ([12.10](#sec-automatic-semicolon-insertion)). Simple white space and single-line comments are discarded and do not appear in the stream of input elements for the syntactic grammar. A [MultiLineComment](#prod-MultiLineComment) (that is, a comment of the form `/*`…`*/` regardless of whether it spans more than one line) is likewise simply discarded if it contains no line terminator; but if a [MultiLineComment](#prod-MultiLineComment) contains one or more line terminators, then it is replaced by a single line terminator, which becomes part of the stream of input elements for the syntactic grammar.

A *RegExp grammar* for ECMAScript is given in [22.2.1](#sec-patterns). This grammar also has as its terminal symbols the code points as defined by [SourceCharacter](#prod-SourceCharacter). It defines a set of productions, starting from the [goal symbol](#sec-context-free-grammars) [Pattern](#prod-Pattern), that describe how sequences of code points are translated into regular expression patterns.

Productions of the lexical and RegExp grammars are distinguished by having two colons “**::**” as separating punctuation. The lexical and RegExp grammars share some productions.


# 5.1.3 The Numeric String Grammar

A *numeric string grammar* appears in [7.1.4.1](#sec-tonumber-applied-to-the-string-type). It has as its terminal symbols [SourceCharacter](#prod-SourceCharacter), and is used for translating Strings into numeric values starting from the [goal symbol](#sec-context-free-grammars) [StringNumericLiteral](#prod-StringNumericLiteral) (which is similar to but distinct from the [lexical grammar for numeric literals](#sec-literals-numeric-literals)).

Productions of the numeric string grammar are distinguished by having three colons “**:::**” as punctuation, and are never used for parsing source text.


# 5.1.4 The Syntactic Grammar

The *syntactic grammar* for ECMAScript is given in clauses [13](#sec-ecmascript-language-expressions) through [16](#sec-ecmascript-language-scripts-and-modules). This grammar has ECMAScript tokens defined by the lexical grammar as its terminal symbols ([5.1.2](#sec-lexical-and-regexp-grammars)). It defines a set of productions, starting from two alternative [goal symbols](#sec-context-free-grammars) [Script](#prod-Script) and [Module](#prod-Module), that describe how sequences of tokens form syntactically correct independent components of ECMAScript programs.

When a stream of code points is to be parsed as an ECMAScript [Script](#prod-Script) or [Module](#prod-Module), it is first converted to a stream of input elements by repeated application of the lexical grammar; this stream of input elements is then parsed by a single application of the syntactic grammar. The input stream is syntactically in error if the tokens in the stream of input elements cannot be parsed as a single instance of the goal nonterminal ([Script](#prod-Script) or [Module](#prod-Module)), with no tokens left over.

When a parse is successful, it constructs a *parse tree*, a rooted tree structure in which each node is a Parse Node. Each Parse Node is an *instance* of a symbol in the grammar; it represents a span of the source text that can be derived from that symbol. The root node of the parse tree, representing the whole of the source text, is an instance of the parse's [goal symbol](#sec-context-free-grammars). When a Parse Node is an instance of a nonterminal, it is also an instance of some production that has that nonterminal as its left-hand side. Moreover, it has zero or more *children*, one for each symbol on the production's right-hand side: each child is a Parse Node that is an instance of the corresponding symbol.

New Parse Nodes are instantiated for each invocation of the parser and never reused between parses even of identical source text. Parse Nodes are considered the same Parse Node if and only if they represent the same span of source text, are instances of the same grammar symbol, and resulted from the same parser invocation.

Note 1

Parsing the same String multiple times will lead to different Parse Nodes. For example, consider:

```
let str = "1 + 1;";
eval(str);
eval(str);
```

Each call to `eval` converts the value of `str` into [ECMAScript source text](#sec-source-text) and performs an independent parse that creates its own separate tree of Parse Nodes. The trees are distinct even though each parse operates upon a source text that was derived from the same String value.

Note 2

Parse Nodes are specification artefacts, and implementations are not required to use an analogous data structure.

Productions of the syntactic grammar are distinguished by having just one colon “**:**” as punctuation.

The syntactic grammar as presented in clauses [13](#sec-ecmascript-language-expressions) through [16](#sec-ecmascript-language-scripts-and-modules) is not a complete account of which token sequences are accepted as a correct ECMAScript [Script](#prod-Script) or [Module](#prod-Module). Certain additional token sequences are also accepted, namely, those that would be described by the grammar if only semicolons were added to the sequence in certain places (such as before line terminator characters). Furthermore, certain token sequences that are described by the grammar are not considered acceptable if a line terminator character appears in certain “awkward” places.

In certain cases, in order to avoid ambiguities, the syntactic grammar uses generalized productions that permit token sequences that do not form a valid ECMAScript [Script](#prod-Script) or [Module](#prod-Module). For example, this technique is used for object literals and object destructuring patterns. In such cases a more restrictive *supplemental grammar* is provided that further restricts the acceptable token sequences. Typically, an [early error](#early-error) rule will then state that, in certain contexts, "_P_ must cover an _N_", where _P_ is a Parse Node (an instance of the generalized production) and _N_ is a nonterminal from the supplemental grammar. This means:

1.  The sequence of tokens originally matched by _P_ is parsed again using _N_ as the [goal symbol](#sec-context-free-grammars). If _N_ takes grammatical parameters, then they are set to the same values used when _P_ was originally parsed.
2.  If the sequence of tokens can be parsed as a single instance of _N_, with no tokens left over, then:
    1.  We refer to that instance of _N_ (a Parse Node, unique for a given _P_) as "the _N_ that is covered by _P_".
    2.  All Early Error rules for _N_ and its derived productions also apply to the _N_ that is covered by _P_.
3.  Otherwise (if the parse fails), it is an early Syntax Error.


# 5.1.5 Grammar Notation


# 5.1.5.1 Terminal Symbols

In the ECMAScript grammars, some terminal symbols are shown in `fixed-width` font. These are to appear in a source text exactly as written. All terminal symbol code points specified in this way are to be understood as the appropriate Unicode code points from the Basic Latin block, as opposed to any similar-looking code points from other Unicode ranges. A code point in a terminal symbol cannot be expressed by a `\` [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence).

In grammars whose terminal symbols are individual Unicode code points (i.e., the lexical, RegExp, and numeric string grammars), a contiguous run of multiple fixed-width code points appearing in a production is a simple shorthand for the same sequence of code points, written as standalone terminal symbols.

For example, the production:

[HexIntegerLiteral](#prod-grammar-notation-HexIntegerLiteral) :: 0x [HexDigits](#prod-HexDigits)

is a shorthand for:

[HexIntegerLiteral](#prod-grammar-notation-HexIntegerLiteral) :: 0 x [HexDigits](#prod-HexDigits)

In contrast, in the syntactic grammar, a contiguous run of fixed-width code points is a single terminal symbol.

Terminal symbols come in two other forms:

-   In the lexical and RegExp grammars, Unicode code points without a conventional printed representation are instead shown in the form "<ABBREV>" where "ABBREV" is a mnemonic for the code point or set of code points. These forms are defined in [Unicode Format-Control Characters](#sec-unicode-format-control-characters), [White Space](#sec-white-space), and [Line Terminators](#sec-line-terminators).
-   In the syntactic grammar, certain terminal symbols (e.g. [IdentifierName](#prod-IdentifierName) and [RegularExpressionLiteral](#prod-RegularExpressionLiteral)) are shown in italics, as they refer to the nonterminals of the same name in the lexical grammar.


# 5.1.5.2 Nonterminal Symbols and Productions

Nonterminal symbols are shown in *italic* type. The definition of a nonterminal (also called a “production”) is introduced by the name of the nonterminal being defined followed by one or more colons. (The number of colons indicates to which grammar the production belongs.) One or more alternative right-hand sides for the nonterminal then follow on succeeding lines. For example, the syntactic definition:

[WhileStatement](#prod-grammar-notation-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

states that the nonterminal [WhileStatement](#prod-grammar-notation-WhileStatement) represents the token `while`, followed by a left parenthesis token, followed by an [Expression](#prod-Expression), followed by a right parenthesis token, followed by a [Statement](#prod-Statement). The occurrences of [Expression](#prod-Expression) and [Statement](#prod-Statement) are themselves nonterminals. As another example, the syntactic definition:

[ArgumentList](#prod-grammar-notation-ArgumentList) : [AssignmentExpression](#prod-AssignmentExpression) [ArgumentList](#prod-grammar-notation-ArgumentList) , [AssignmentExpression](#prod-AssignmentExpression)

states that an [ArgumentList](#prod-grammar-notation-ArgumentList) may represent either a single [AssignmentExpression](#prod-AssignmentExpression) or an [ArgumentList](#prod-grammar-notation-ArgumentList), followed by a comma, followed by an [AssignmentExpression](#prod-AssignmentExpression). This definition of [ArgumentList](#prod-grammar-notation-ArgumentList) is recursive, that is, it is defined in terms of itself. The result is that an [ArgumentList](#prod-grammar-notation-ArgumentList) may contain any positive number of arguments, separated by commas, where each argument expression is an [AssignmentExpression](#prod-AssignmentExpression). Such recursive definitions of nonterminals are common.


# 5.1.5.3 Optional Symbols

The subscripted suffix “<sub>opt</sub>”, which may appear after a terminal or nonterminal, indicates an optional symbol. The alternative containing the optional symbol actually specifies two right-hand sides, one that omits the optional element and one that includes it. This means that:

[VariableDeclaration](#prod-grammar-notation-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)opt

is a convenient abbreviation for:

[VariableDeclaration](#prod-grammar-notation-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier) [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)

and that:

[ForStatement](#prod-grammar-notation-ForStatement) : for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

is a convenient abbreviation for:

[ForStatement](#prod-grammar-notation-ForStatement) : for ( [LexicalDeclaration](#prod-LexicalDeclaration) ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression) ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

which in turn is an abbreviation for:

[ForStatement](#prod-grammar-notation-ForStatement) : for ( [LexicalDeclaration](#prod-LexicalDeclaration) ; ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) ; [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression) ; ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression) ; [Expression](#prod-Expression) ) [Statement](#prod-Statement)

so, in this example, the nonterminal [ForStatement](#prod-grammar-notation-ForStatement) actually has four alternative right-hand sides.


# 5.1.5.4 Grammatical Parameters

A production may be parameterized by a subscripted annotation of the form “<sub>\[parameters\]</sub>”, which may appear as a suffix to the nonterminal symbol defined by the production. “<sub>parameters</sub>” may be either a single name or a comma separated list of names. A parameterized production is shorthand for a set of productions defining all combinations of the parameter names, preceded by an underscore, appended to the parameterized nonterminal symbol. This means that:

[StatementList](#prod-grammar-notation-StatementList)\[Return\] : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

is a convenient abbreviation for:

[StatementList](#prod-grammar-notation-StatementList) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement) [StatementList\_Return](#prod-grammar-notation-StatementList_Return) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

and that:

[StatementList](#prod-grammar-notation-StatementList)\[Return, In\] : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

is an abbreviation for:

[StatementList](#prod-grammar-notation-StatementList) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement) [StatementList\_Return](#prod-grammar-notation-StatementList_Return) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement) [StatementList\_In](#prod-grammar-notation-StatementList_In) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement) [StatementList\_Return\_In](#prod-grammar-notation-StatementList_Return_In) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

Multiple parameters produce a combinatoric number of productions, not all of which are necessarily referenced in a complete grammar.

References to nonterminals on the right-hand side of a production can also be parameterized. For example:

[StatementList](#prod-grammar-notation-StatementList) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)\[+In\]

is equivalent to saying:

[StatementList](#prod-grammar-notation-StatementList) : [ReturnStatement](#prod-ReturnStatement) ExpressionStatement\_In

and:

[StatementList](#prod-grammar-notation-StatementList) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)\[~In\]

is equivalent to:

[StatementList](#prod-grammar-notation-StatementList) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

A nonterminal reference may have both a parameter list and an “<sub>opt</sub>” suffix. For example:

[VariableDeclaration](#prod-grammar-notation-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)\[+In\]opt

is an abbreviation for:

[VariableDeclaration](#prod-grammar-notation-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier) [BindingIdentifier](#prod-BindingIdentifier) Initializer\_In

Prefixing a parameter name with “<sub>?</sub>” on a right-hand side nonterminal reference makes that parameter value dependent upon the occurrence of the parameter name on the reference to the current production's left-hand side symbol. For example:

[VariableDeclaration](#prod-grammar-notation-VariableDeclaration)\[In\] : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)\[?In\]

is an abbreviation for:

[VariableDeclaration](#prod-grammar-notation-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer) [VariableDeclaration\_In](#prod-grammar-notation-VariableDeclaration_In) : [BindingIdentifier](#prod-BindingIdentifier) Initializer\_In

If a right-hand side alternative is prefixed with “\[+parameter\]” that alternative is only available if the named parameter was used in referencing the production's nonterminal symbol. If a right-hand side alternative is prefixed with “\[~parameter\]” that alternative is only available if the named parameter was *not* used in referencing the production's nonterminal symbol. This means that:

[StatementList](#prod-grammar-notation-StatementList)\[Return\] : \[+Return\] [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

is an abbreviation for:

[StatementList](#prod-grammar-notation-StatementList) : [ExpressionStatement](#prod-ExpressionStatement) [StatementList\_Return](#prod-grammar-notation-StatementList_Return) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

and that:

[StatementList](#prod-grammar-notation-StatementList)\[Return\] : \[~Return\] [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement)

is an abbreviation for:

[StatementList](#prod-grammar-notation-StatementList) : [ReturnStatement](#prod-ReturnStatement) [ExpressionStatement](#prod-ExpressionStatement) [StatementList\_Return](#prod-grammar-notation-StatementList_Return) : [ExpressionStatement](#prod-ExpressionStatement)


# 5.1.5.5 one of

When the words “**one of**” follow the colon(s) in a grammar definition, they signify that each of the terminal symbols on the following line or lines is an alternative definition. For example, the lexical grammar for ECMAScript contains the production:

[NonZeroDigit](#prod-grammar-notation-NonZeroDigit) :: one of 1 2 3 4 5 6 7 8 9

which is merely a convenient abbreviation for:

[NonZeroDigit](#prod-grammar-notation-NonZeroDigit) :: 1 2 3 4 5 6 7 8 9


# 5.1.5.6 \[empty\]

If the phrase “\[empty\]” appears as the right-hand side of a production, it indicates that the production's right-hand side contains no terminals or nonterminals.


# 5.1.5.7 Lookahead Restrictions

If the phrase “\[lookahead = _seq_\]” appears in the right-hand side of a production, it indicates that the production may only be used if the token sequence _seq_ is a prefix of the immediately following input token sequence. Similarly, “\[lookahead ∈ _set_\]”, where _set_ is a [finite](#finite) non-empty set of token sequences, indicates that the production may only be used if some element of _set_ is a prefix of the immediately following token sequence. For convenience, the set can also be written as a nonterminal, in which case it represents the set of all token sequences to which that nonterminal could expand. It is considered an editorial error if the nonterminal could expand to infinitely many distinct token sequences.

These conditions may be negated. “\[lookahead ≠ _seq_\]” indicates that the containing production may only be used if _seq_ is *not* a prefix of the immediately following input token sequence, and “\[lookahead ∉ _set_\]” indicates that the production may only be used if *no* element of _set_ is a prefix of the immediately following token sequence.

As an example, given the definitions:

[DecimalDigit](#prod-grammar-notation-DecimalDigit) :: one of 0 1 2 3 4 5 6 7 8 9 [DecimalDigits](#prod-grammar-notation-DecimalDigits) :: [DecimalDigit](#prod-grammar-notation-DecimalDigit) [DecimalDigits](#prod-grammar-notation-DecimalDigits) [DecimalDigit](#prod-grammar-notation-DecimalDigit)

the definition:

[LookaheadExample](#prod-grammar-notation-LookaheadExample) :: n \[lookahead ∉ { 1, 3, 5, 7, 9 }\] [DecimalDigits](#prod-grammar-notation-DecimalDigits) [DecimalDigit](#prod-grammar-notation-DecimalDigit) \[lookahead ∉ [DecimalDigit](#prod-grammar-notation-DecimalDigit)\]

matches either the letter `n` followed by one or more decimal digits the first of which is even, or a decimal digit not followed by another decimal digit.

Note that when these phrases are used in the syntactic grammar, it may not be possible to unambiguously identify the immediately following token sequence because determining later tokens requires knowing which lexical [goal symbol](#sec-context-free-grammars) to use at later positions. As such, when these are used in the syntactic grammar, it is considered an editorial error for a token sequence _seq_ to appear in a lookahead restriction (including as part of a set of sequences) if the choices of lexical [goal symbols](#sec-context-free-grammars) to use could change whether or not _seq_ would be a prefix of the resulting token sequence.


# 5.1.5.8 \[no [LineTerminator](#prod-LineTerminator) here\]

If the phrase “\[no [LineTerminator](#prod-LineTerminator) here\]” appears in the right-hand side of a production of the syntactic grammar, it indicates that the production is *a restricted production*: it may not be used if a [LineTerminator](#prod-LineTerminator) occurs in the input stream at the indicated position. For example, the production:

[ThrowStatement](#prod-grammar-notation-ThrowStatement) : throw \[no [LineTerminator](#prod-LineTerminator) here\] [Expression](#prod-Expression) ;

indicates that the production may not be used if a [LineTerminator](#prod-LineTerminator) occurs in the script between the `throw` token and the [Expression](#prod-Expression).

Unless the presence of a [LineTerminator](#prod-LineTerminator) is forbidden by a restricted production, any number of occurrences of [LineTerminator](#prod-LineTerminator) may appear between any two consecutive tokens in the stream of input elements without affecting the syntactic acceptability of the script.


# 5.1.5.9 but not

The right-hand side of a production may specify that certain expansions are not permitted by using the phrase “**but not**” and then indicating the expansions to be excluded. For example, the production:

[Identifier](#prod-grammar-notation-Identifier) :: [IdentifierName](#prod-IdentifierName) but not [ReservedWord](#prod-ReservedWord)

means that the nonterminal [Identifier](#prod-grammar-notation-Identifier) may be replaced by any sequence of code points that could replace [IdentifierName](#prod-IdentifierName) provided that the same sequence of code points could not replace [ReservedWord](#prod-ReservedWord).


# 5.1.5.10 Descriptive Phrases

Finally, a few nonterminal symbols are described by a descriptive phrase in sans-serif type in cases where it would be impractical to list all the alternatives:

[SourceCharacter](#prod-grammar-notation-SourceCharacter) :: any Unicode code point


# 5.2 Algorithm Conventions

The specification often uses a numbered list to specify steps in an algorithm. These algorithms are used to precisely specify the required semantics of ECMAScript language constructs. The algorithms are not intended to imply the use of any specific implementation technique. In practice, there may be more efficient algorithms available to implement a given feature.

Algorithms may be explicitly parameterized with an ordered, comma-separated sequence of alias names which may be used within the algorithm steps to reference the argument passed in that position. Optional parameters are denoted with surrounding brackets (\[, _name_ \]) and are no different from required parameters within algorithm steps. A rest parameter may appear at the end of a parameter list, denoted with leading ellipsis (, ..._name_). The rest parameter captures all of the arguments provided following the required and optional parameters into a [List](#sec-list-and-record-specification-type). If there are no such additional arguments, that [List](#sec-list-and-record-specification-type) is empty.

Algorithm steps may be subdivided into sequential substeps. Substeps are indented and may themselves be further divided into indented substeps. Outline numbering conventions are used to identify substeps with the first level of substeps labelled with lowercase alphabetic characters and the second level of substeps labelled with lowercase roman numerals. If more than three levels are required these rules repeat with the fourth level using numeric labels. For example:

1.  Top-level step
    1.  Substep.
    2.  Substep.
        1.  Subsubstep.
            1.  Subsubsubstep
                1.  Subsubsubsubstep
                    1.  Subsubsubsubsubstep

A step or substep may be written as an “if” predicate that conditions its substeps. In this case, the substeps are only applied if the predicate is true. If a step or substep begins with the word “else”, it is a predicate that is the negation of the preceding “if” predicate step at the same level.

A step may specify the iterative application of its substeps.

A step that begins with “Assert:” asserts an invariant condition of its algorithm. Such assertions are used to make explicit algorithmic invariants that would otherwise be implicit. Such assertions add no additional semantic requirements and hence need not be checked by an implementation. They are used simply to clarify algorithms.

Algorithm steps may declare named aliases for any value using the form “Let _x_ be _someValue_”. These aliases are reference-like in that both _x_ and _someValue_ refer to the same underlying data and modifications to either are visible to both. Algorithm steps that want to avoid this reference-like behaviour should explicitly make a copy of the right-hand side: “Let _x_ be a copy of _someValue_” creates a shallow copy of _someValue_.

Once declared, an alias may be referenced in any subsequent steps and must not be referenced from steps prior to the alias's declaration. Aliases may be modified using the form “Set _x_ to _someOtherValue_”.


# 5.2.1 Evaluation Order

When complex expressions appear in algorithm steps, these are to be understood as being evaluated in a left-to-right, inside-to-outside order. For example, the step

1.  Return A(B(), C._\[\[D\]\]_) + E(F()).

is equivalent to

1.  Let _tmp1_ be B().
2.  Let _tmp2_ be C._\[\[D\]\]_.
3.  Let _tmp3_ be A(_tmp1_, _tmp2_).
4.  Let _tmp4_ be F().
5.  Let _tmp5_ be E(_tmp4_).
6.  Let _tmp6_ be _tmp3_ + _tmp5_.
7.  Return _tmp6_.

where the various _tmpN_ aliases are ephemeral and visible only in these steps.


# 5.2.2 Abstract Operations

In order to facilitate their use in multiple parts of this specification, some algorithms, called abstract operations, are named and written in parameterized functional form so that they may be referenced by name from within other algorithms. Abstract operations are typically referenced using a functional application style such as OperationName(_arg1_, _arg2_). Some abstract operations are treated as polymorphically dispatched methods of class-like specification abstractions. Such method-like abstract operations are typically referenced using a method application style such as _someValue_.OperationName(_arg1_, _arg2_).


# 5.2.3 Syntax-Directed Operations

A syntax-directed operation is a named operation whose definition consists of algorithms, each of which is associated with one or more productions from one of the ECMAScript grammars. A production that has multiple alternative definitions will typically have a distinct algorithm for each alternative. When an algorithm is associated with a grammar production, it may reference the terminal and nonterminal symbols of the production alternative as if they were parameters of the algorithm. When used in this manner, nonterminal symbols refer to the actual alternative definition that is matched when parsing the source text. The source text matched by a grammar production or [Parse Node](#sec-syntactic-grammar) derived from it is the portion of the source text that starts at the beginning of the first terminal that participated in the match and ends at the end of the last terminal that participated in the match.

When an algorithm is associated with a production alternative, the alternative is typically shown without any “\[\]” grammar annotations. Such annotations should only affect the syntactic recognition of the alternative and have no effect on the associated semantics for the alternative.

Syntax-directed operations are invoked with a parse node and, optionally, other parameters by using the conventions on steps [1](#step-sdo-invocation-example-1), [3](#step-sdo-invocation-example-2), and [4](#step-sdo-invocation-example-3) in the following algorithm:

1.  Let _status_ be SyntaxDirectedOperation of SomeNonTerminal.
2.  Let _someParseNode_ be the parse of some source text.
3.  Perform SyntaxDirectedOperation of _someParseNode_.
4.  Perform SyntaxDirectedOperation of _someParseNode_ with argument "value".

Unless explicitly specified otherwise, all [chain productions](#sec-context-free-grammars) have an implicit definition for every operation that might be applied to that production's left-hand side nonterminal. The implicit definition simply reapplies the same operation with the same parameters, if any, to the [chain production](#sec-context-free-grammars)'s sole right-hand side nonterminal and then returns the result. For example, assume that some algorithm has a step of the form: “Return [Evaluation](#sec-evaluation) of [Block](#prod-Block)” and that there is a production:

[Block](#prod-Block) : { [StatementList](#prod-StatementList) }

but the [Evaluation](#sec-evaluation) operation does not associate an algorithm with that production. In that case, the [Evaluation](#sec-evaluation) operation implicitly includes an association of the form:

**Runtime Semantics: [Evaluation](#sec-evaluation)**

[Block](#prod-Block) : { [StatementList](#prod-StatementList) }

1.  Return [Evaluation](#sec-evaluation) of [StatementList](#prod-StatementList).


# 5.2.4 Runtime Semantics

Algorithms which specify semantics that must be called at runtime are called runtime semantics. Runtime semantics are defined by [abstract operations](#sec-algorithm-conventions-abstract-operations) or [syntax-directed operations](#sec-algorithm-conventions-syntax-directed-operations).


# 5.2.4.1 Completion ( _completionRecord_ )

The abstract operation Completion takes argument _completionRecord_ (a [Completion Record](#sec-completion-record-specification-type)) and returns a [Completion Record](#sec-completion-record-specification-type). It is used to emphasize that a [Completion Record](#sec-completion-record-specification-type) is being returned. It performs the following steps when called:

1.  [Assert](#assert): _completionRecord_ is a [Completion Record](#sec-completion-record-specification-type).
2.  Return _completionRecord_.


# 5.2.4.2 Throw an Exception

Algorithms steps that say to throw an exception, such as

1.  Throw a TypeError exception.

mean the same things as:

1.  Return [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).


# 5.2.4.3 Shorthands for Unwrapping Completion Records

Prefix `?` and `!` are used as shorthands which unwrap [Completion Records](#sec-completion-record-specification-type). `?` is used to propagate an [abrupt completion](#sec-completion-record-specification-type) to the caller, or otherwise to unwrap a [normal completion](#sec-completion-record-specification-type). `!` is used to assert that a [Completion Record](#sec-completion-record-specification-type) is normal and unwrap it. Formally, the step

1.  Let _result_ be ? _record_.

is equivalent to

1.  [Assert](#assert): _record_ is a [Completion Record](#sec-completion-record-specification-type).
2.  If _record_ is an [abrupt completion](#sec-completion-record-specification-type), return _record_.
3.  Let _result_ be _record_._\[\[Value\]\]_.

Likewise, the step

1.  Let _result_ be ! _record_.

is equivalent to

1.  [Assert](#assert): _record_ is a [normal completion](#sec-completion-record-specification-type).
2.  Let _result_ be _record_._\[\[Value\]\]_.

When `?` or `!` is used in any other context, first apply the rewrite given in [Evaluation Order](#sec-evaluation-order) until this rule can be applied, then apply this rule. For example, the step

1.  Perform AO(? Other()).

can be rewritten to

1.  Let _tmp1_ be Other().
2.  Let _tmp2_ be ? _tmp1_.
3.  Perform AO(_tmp2_).

which in turn expands to

1.  Let _tmp1_ be Other().
2.  [Assert](#assert): _tmp1_ is a [Completion Record](#sec-completion-record-specification-type).
3.  If _tmp1_ is an [abrupt completion](#sec-completion-record-specification-type), return _tmp1_.
4.  Let _tmp2_ be _tmp1_._\[\[Value\]\]_.
5.  Perform AO(_tmp2_).


# 5.2.4.4 Implicit Normal Completion

In algorithms within [abstract operations](#sec-algorithm-conventions-abstract-operations) which are declared to return a [Completion Record](#sec-completion-record-specification-type), and within all built-in functions, the returned value is first passed to [NormalCompletion](#sec-normalcompletion), and the result is used instead. This rule does not apply within the [Completion](#sec-completion-ao) algorithm or when the value being returned is clearly marked as a [Completion Record](#sec-completion-record-specification-type) in that step; these cases are:

-   when the result of applying [Completion](#sec-completion-ao), [NormalCompletion](#sec-normalcompletion), [ThrowCompletion](#sec-throwcompletion), or [ReturnCompletion](#sec-returncompletion) is directly returned
-   when the result of constructing a [Completion Record](#sec-completion-record-specification-type) is directly returned

It is an editorial error if a [Completion Record](#sec-completion-record-specification-type) is returned from such an abstract operation through any other means. For example, within these [abstract operations](#sec-algorithm-conventions-abstract-operations),

1.  Return true.

means the same things as any of

1.  Return [NormalCompletion](#sec-normalcompletion)(true).

or

1.  Let _completion_ be [NormalCompletion](#sec-normalcompletion)(true).
2.  Return [Completion](#sec-completion-ao)(_completion_).

or

1.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: normal, _\[\[Value\]\]_: true, _\[\[Target\]\]_: empty }.

Note that, through the ReturnIfAbrupt expansion, the following example is allowed, as within the expanded steps, the result of applying [Completion](#sec-completion-ao) is returned directly in the abrupt case and the implicit [NormalCompletion](#sec-normalcompletion) application occurs after unwrapping in the normal case.

1.  Return ? _completion_.

The following example would be an editorial error because a [Completion Record](#sec-completion-record-specification-type) is being returned without being annotated in that step.

1.  Let _completion_ be [NormalCompletion](#sec-normalcompletion)(true).
2.  Return _completion_.


# 5.2.5 Static Semantics

Context-free grammars are not sufficiently powerful to express all the rules that define whether a stream of input elements form a valid ECMAScript [Script](#prod-Script) or [Module](#prod-Module) that may be evaluated. In some situations additional rules are needed that may be expressed using either ECMAScript algorithm conventions or prose requirements. Such rules are always associated with a production of a grammar and are called the static semantics of the production.

Static Semantic Rules have names and typically are defined using an algorithm. Named Static Semantic Rules are associated with grammar productions and a production that has multiple alternative definitions will typically have for each alternative a distinct algorithm for each applicable named static semantic rule.

A special kind of static semantic rule is an Early Error Rule. [Early error](#early-error) rules define [early error](#early-error) conditions (see clause [17](#sec-error-handling-and-language-extensions)) that are associated with specific grammar productions. [Evaluation](#sec-evaluation) of most [early error](#early-error) rules are not explicitly invoked within the algorithms of this specification. A conforming implementation must, prior to the first evaluation of a [Script](#prod-Script) or [Module](#prod-Module), validate all of the [early error](#early-error) rules of the productions used to parse that [Script](#prod-Script) or [Module](#prod-Module). If any of the [early error](#early-error) rules are violated the [Script](#prod-Script) or [Module](#prod-Module) is invalid and cannot be evaluated.


# 5.2.6 Mathematical Operations

This specification makes reference to these kinds of numeric values:

-   Mathematical values: Arbitrary real numbers, used as the default numeric type.
-   Extended mathematical values: [Mathematical values](#mathematical-value) together with +∞ and -∞.
-   *Numbers*: [IEEE 754-2019](#sec-bibliography) binary64 (double-precision floating point) values.
-   *BigInts*: [ECMAScript language values](#sec-ecmascript-language-types) representing arbitrary [integers](#integer) in a one-to-one correspondence.

In the language of this specification, numerical values are distinguished among different numeric kinds using subscript suffixes. The subscript <sub>𝔽</sub> refers to Numbers, and the subscript <sub>ℤ</sub> refers to BigInts. Numeric values without a subscript suffix refer to [mathematical values](#mathematical-value). This specification denotes most numeric values in base 10; it also uses numeric values of the form 0x followed by digits 0-9 or A-F as base-16 values.

In general, when this specification refers to a numerical value, such as in the phrase, "the length of _y_" or "the [integer](#integer) represented by the four hexadecimal digits ...", without explicitly specifying a numeric kind, the phrase refers to a [mathematical value](#mathematical-value). Phrases which refer to a Number or a BigInt value are explicitly annotated as such; for example, "the [Number value for](#number-value-for) the number of code points in …" or "the [BigInt value for](#bigint-value-for) …".

When the term integer is used in this specification, it refers to a [mathematical value](#mathematical-value) which is in the set of [integers](#integer), unless otherwise stated. When the term integral Number is used in this specification, it refers to a [finite](#finite) Number value whose [mathematical value](#mathematical-value) is in the set of [integers](#integer).

Numeric operators such as +, ×, =, and ≥ refer to those operations as determined by the type of the operands. When applied to [mathematical values](#mathematical-value), the operators refer to the usual mathematical operations. When applied to [extended mathematical values](#extended-mathematical-value), the operators refer to the usual mathematical operations over the extended real numbers; indeterminate forms are not defined and their use in this specification should be considered an editorial error. When applied to Numbers, the operators refer to the relevant operations within [IEEE 754-2019](#sec-bibliography). When applied to BigInts, the operators refer to the usual mathematical operations applied to the [mathematical value of](#mathematical-value-of) the BigInt. Numeric operators applied to mixed-type operands (such as a Number and a [mathematical value](#mathematical-value)) are not defined and should be considered an editorial error in this specification.

Conversions between [mathematical values](#mathematical-value) and Numbers or BigInts are always explicit in this document. A conversion from a [mathematical value](#mathematical-value) or [extended mathematical value](#extended-mathematical-value) _x_ to a Number is denoted as "the [Number value for](#number-value-for) _x_" or 𝔽(_x_), and is defined in [6.1.6.1](#sec-ecmascript-language-types-number-type). A conversion from an [integer](#integer) _x_ to a BigInt is denoted as "the BigInt value for _x_" or ℤ(_x_). A conversion from a Number or BigInt _x_ to a [mathematical value](#mathematical-value) is denoted as "the mathematical value of _x_", or ℝ(_x_). The [mathematical value of](#mathematical-value-of) +0<sub>𝔽</sub> and \-0<sub>𝔽</sub> is the [mathematical value](#mathematical-value) 0. The [mathematical value of](#mathematical-value-of) non-[finite](#finite) values is not defined. The extended mathematical value of _x_ is the [mathematical value of](#mathematical-value-of) _x_ for [finite](#finite) values, and is +∞ and -∞ for +∞<sub>𝔽</sub> and \-∞<sub>𝔽</sub> respectively; it is not defined for NaN.

The mathematical function abs(_x_) produces the absolute value of _x_, which is \-_x_ if _x_ < 0 and otherwise is _x_ itself.

The mathematical function min(_x1_, _x2_, … , _xN_) produces the mathematically smallest of _x1_ through _xN_. The mathematical function max(_x1_, _x2_, ..., _xN_) produces the mathematically largest of _x1_ through _xN_. The domain and range of these mathematical functions are the [extended mathematical values](#extended-mathematical-value).

The notation “_x_ modulo _y_” (_y_ must be [finite](#finite) and non-zero) computes a value _k_ of the same sign as _y_ (or zero) such that [abs](#eqn-abs)(_k_) < [abs](#eqn-abs)(_y_) and _x_ - _k_ = _q_ × _y_ for some [integer](#integer) _q_.

The phrase "the result of clamping _x_ between _lower_ and _upper_" (where _x_ is an [extended mathematical value](#extended-mathematical-value) and _lower_ and _upper_ are [mathematical values](#mathematical-value) such that _lower_ ≤ _upper_) produces _lower_ if _x_ < _lower_, produces _upper_ if _x_ > _upper_, and otherwise produces _x_.

The mathematical function floor(_x_) produces the largest [integer](#integer) (closest to +∞) that is not larger than _x_.

Note

[floor](#eqn-floor)(_x_) = _x_ - (_x_ [modulo](#eqn-modulo) 1).

The mathematical function truncate(_x_) removes the fractional part of _x_ by rounding towards zero, producing \-[floor](#eqn-floor)(-_x_) if _x_ < 0 and otherwise producing [floor](#eqn-floor)(_x_).

Mathematical functions [min](#eqn-min), [max](#eqn-max), [abs](#eqn-abs), [floor](#eqn-floor), and [truncate](#eqn-truncate) are not defined for Numbers and BigInts, and any usage of those methods that have non-[mathematical value](#mathematical-value) arguments would be an editorial error in this specification.

An interval from lower bound _a_ to upper bound _b_ is a possibly-infinite, possibly-empty set of numeric values of the same numeric type. Each bound will be described as either inclusive or exclusive, but not both. There are four kinds of intervals, as follows:

-   An [interval](#interval) from _a_ (inclusive) to _b_ (inclusive), also called an inclusive interval from _a_ to _b_, includes all values _x_ of the same numeric type such that _a_ ≤ _x_ ≤ _b_, and no others.
-   An [interval](#interval) from _a_ (inclusive) to _b_ (exclusive) includes all values _x_ of the same numeric type such that _a_ ≤ _x_ < _b_, and no others.
-   An [interval](#interval) from _a_ (exclusive) to _b_ (inclusive) includes all values _x_ of the same numeric type such that _a_ < _x_ ≤ _b_, and no others.
-   An [interval](#interval) from _a_ (exclusive) to _b_ (exclusive) includes all values _x_ of the same numeric type such that _a_ < _x_ < _b_, and no others.

For example, the [interval](#interval) from 1 (inclusive) to 2 (exclusive) consists of all [mathematical values](#mathematical-value) between 1 and 2, including 1 and not including 2. For the purpose of defining intervals, \-0<sub>𝔽</sub> < +0<sub>𝔽</sub>, so, for example, an [inclusive interval](#inclusive-interval) with a lower bound of +0<sub>𝔽</sub> includes +0<sub>𝔽</sub> but not \-0<sub>𝔽</sub>. NaN is never included in an [interval](#interval).


# 5.2.7 Value Notation

In this specification, [ECMAScript language values](#sec-ecmascript-language-types) are displayed in bold. Examples include null, true, or "hello". These are distinguished from [ECMAScript source text](#sec-source-text) such as `Function.prototype.apply` or `let n = 42;`.


# 5.2.8 Identity

In this specification, both specification values and [ECMAScript language values](#sec-ecmascript-language-types) are compared for equality. When comparing for equality, values fall into one of two categories. Values without identity are equal to other values without identity if all of their innate characteristics are the same — characteristics such as the magnitude of an [integer](#integer) or the length of a sequence. Values without identity may be manifest without prior reference by fully describing their characteristics. In contrast, each value with identity is unique and therefore only equal to itself. Values with identity are like values without identity but with an additional unguessable, unchangeable, universally-unique characteristic called *identity*. References to existing values with identity cannot be manifest simply by describing them, as the identity itself is indescribable; instead, references to these values must be explicitly passed from one place to another. Some values with identity are mutable and therefore can have their characteristics (except their identity) changed in-place, causing all holders of the value to observe the new characteristics. A value without identity is never equal to a value with identity.

From the perspective of this specification, the word “is” is used to compare two values for equality, as in “If _bool_ is true, then ...”, and the word “contains” is used to search for a value inside lists using equality comparisons, as in "If _list_ contains a [Record](#sec-list-and-record-specification-type) _r_ such that _r_._\[\[Foo\]\]_ is true, then ...". The *specification identity* of values determines the result of these comparisons and is axiomatic in this specification.

From the perspective of the ECMAScript language, language values are compared for equality using the [SameValue](#sec-samevalue) abstract operation and the [abstract operations](#sec-algorithm-conventions-abstract-operations) it transitively calls. The algorithms of these comparison [abstract operations](#sec-algorithm-conventions-abstract-operations) determine *language identity* of [ECMAScript language values](#sec-ecmascript-language-types).

For specification values, examples of values without specification identity include, but are not limited to: [mathematical values](#mathematical-value) and [extended mathematical values](#extended-mathematical-value); [ECMAScript source text](#sec-source-text), [surrogate pairs](#surrogate-pair), [Directive Prologues](#directive-prologue), etc; UTF-16 code units; Unicode code points; [enums](#sec-enum-specification-type); [abstract operations](#sec-algorithm-conventions-abstract-operations), including [syntax-directed operations](#sec-algorithm-conventions-syntax-directed-operations), [host hooks](#host-hook), etc; and ordered pairs. Examples of specification values with specification identity include, but are not limited to: any kind of [Records](#sec-list-and-record-specification-type), including [Property Descriptors](#sec-property-descriptor-specification-type), [PrivateElements](#sec-privateelement-specification-type), etc; [Parse Nodes](#sec-syntactic-grammar); [Lists](#sec-list-and-record-specification-type); [Sets](#sec-set-and-relation-specification-type) and [Relations](#sec-set-and-relation-specification-type); [Abstract Closures](#sec-abstract-closure); [Data Blocks](#sec-data-blocks); [Private Names](#sec-private-names); [execution contexts](#sec-execution-contexts) and [execution context stacks](#execution-context-stack); [agent signifiers](#sec-agents); and [WaiterList Records](#sec-waiterlist-records).

Specification identity agrees with language identity for all [ECMAScript language values](#sec-ecmascript-language-types) except Symbol values produced by [Symbol.for](#sec-symbol.for). The [ECMAScript language values](#sec-ecmascript-language-types) without specification identity and without language identity are [undefined](#sec-ecmascript-language-types-undefined-type), [null](#sec-ecmascript-language-types-null-type), [Booleans](#sec-ecmascript-language-types-boolean-type), [Strings](#sec-ecmascript-language-types-string-type), [Numbers](#sec-ecmascript-language-types-number-type), and [BigInts](#sec-ecmascript-language-types-bigint-type). The [ECMAScript language values](#sec-ecmascript-language-types) with specification identity and language identity are [Symbols](#sec-ecmascript-language-types-symbol-type) not produced by [Symbol.for](#sec-symbol.for) and [Objects](#sec-object-type). Symbol values produced by [Symbol.for](#sec-symbol.for) have specification identity, but not language identity.


# 6 ECMAScript Data Types and Values

Algorithms within this specification manipulate values each of which has an associated type. The possible value types are exactly those defined in this clause. Types are further classified into [ECMAScript language types](#sec-ecmascript-language-types) and specification types.


# 6.1 ECMAScript Language Types

An ECMAScript language type corresponds to values that are directly manipulated by an ECMAScript programmer using the ECMAScript language. The ECMAScript language types are Undefined, Null, Boolean, String, Symbol, Number, BigInt, and Object. An ECMAScript language value is a value that is characterized by an ECMAScript language type.


# 6.1.1 The Undefined Type

The Undefined type has exactly one value, called undefined. Any variable that has not been assigned a value has the value undefined.


# 6.1.2 The Null Type

The Null type has exactly one value, called null.


# 6.1.3 The Boolean Type

The Boolean type represents a logical entity having two values, called true and false.


# 6.1.4 The String Type

The String type is the set of all ordered sequences of zero or more 16-bit unsigned [integer](#integer) values (“elements”) up to a maximum length of 2<sup>53</sup> - 1 elements. The String type is generally used to represent textual data in a running ECMAScript program, in which case each element in the String is treated as a UTF-16 code unit value. Each element is regarded as occupying a position within the sequence. These positions are indexed with non-negative [integers](#integer). The first element (if any) is at index 0, the next element (if any) at index 1, and so on. The length of a String is the number of elements (i.e., 16-bit values) within it. The empty String has length zero and therefore contains no elements.

ECMAScript operations that do not interpret String contents apply no further semantics. Operations that do interpret String values treat each element as a single UTF-16 code unit. However, ECMAScript does not restrict the value of or relationships between these code units, so operations that further interpret String contents as sequences of Unicode code points encoded in UTF-16 must account for ill-formed subsequences. Such operations apply special treatment to every code unit with a numeric value in the [inclusive interval](#inclusive-interval) from 0xD800 to 0xDBFF (defined by the Unicode Standard as a leading surrogate, or more formally as a high-surrogate code unit) and every code unit with a numeric value in the [inclusive interval](#inclusive-interval) from 0xDC00 to 0xDFFF (defined as a trailing surrogate, or more formally as a low-surrogate code unit) using the following rules:

-   A code unit that is not a [leading surrogate](#leading-surrogate) and not a [trailing surrogate](#trailing-surrogate) is interpreted as a code point with the same value.
-   A sequence of two code units, where the first code unit _c1_ is a [leading surrogate](#leading-surrogate) and the second code unit _c2_ a [trailing surrogate](#trailing-surrogate), is a surrogate pair and is interpreted as a code point with the value (_c1_ - 0xD800) × 0x400 + (_c2_ - 0xDC00) + 0x10000. (See [11.1.3](#sec-utf16decodesurrogatepair))
-   A code unit that is a [leading surrogate](#leading-surrogate) or [trailing surrogate](#trailing-surrogate), but is not part of a [surrogate pair](#surrogate-pair), is interpreted as a code point with the same value.

The function `String.prototype.normalize` (see [22.1.3.15](#sec-string.prototype.normalize)) can be used to explicitly normalize a String value. `String.prototype.localeCompare` (see [22.1.3.12](#sec-string.prototype.localecompare)) internally normalizes String values, but no other operations implicitly normalize the strings upon which they operate. Operation results are not language- and/or locale-sensitive unless stated otherwise.

Note

The rationale behind this design was to keep the implementation of Strings as simple and high-performing as possible. If [ECMAScript source text](#sec-source-text) is in Normalized Form C, string literals are guaranteed to also be normalized, as long as they do not contain any Unicode escape sequences.

In this specification, the phrase "the string-concatenation of _A_, _B_, ..." (where each argument is a String value, a code unit, or a sequence of code units) denotes the String value whose sequence of code units is the concatenation of the code units (in order) of each of the arguments (in order).

The phrase "the substring of _S_ from _inclusiveStart_ to _exclusiveEnd_" (where _S_ is a String value or a sequence of code units and _inclusiveStart_ and _exclusiveEnd_ are [integers](#integer)) denotes the String value consisting of the consecutive code units of _S_ beginning at index _inclusiveStart_ and ending immediately before index _exclusiveEnd_ (which is the empty String when _inclusiveStart_ = _exclusiveEnd_). If the "to" suffix is omitted, the length of _S_ is used as the value of _exclusiveEnd_.

The phrase "the ASCII word characters" denotes the following String value, which consists solely of every letter and number in the Unicode Basic Latin block along with U+005F (LOW LINE):  
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\_".  
For historical reasons, it has significance to various algorithms.


# 6.1.4.1 StringIndexOf ( _string_, _searchValue_, _fromIndex_ )

The abstract operation StringIndexOf takes arguments _string_ (a String), _searchValue_ (a String), and _fromIndex_ (a non-negative [integer](#integer)) and returns a non-negative [integer](#integer) or not-found. It performs the following steps when called:

1.  Let _len_ be the length of _string_.
2.  If _searchValue_ is the empty String and _fromIndex_ ≤ _len_, return _fromIndex_.
3.  Let _searchLen_ be the length of _searchValue_.
4.  For each [integer](#integer) _i_ such that _fromIndex_ ≤ _i_ ≤ _len_ - _searchLen_, in ascending order, do
    1.  Let _candidate_ be the [substring](#substring) of _string_ from _i_ to _i_ + _searchLen_.
    2.  If _candidate_ is _searchValue_, return _i_.
5.  Return not-found.

Note 1

If _searchValue_ is the empty String and _fromIndex_ ≤ the length of _string_, this algorithm returns _fromIndex_. The empty String is effectively found at every position within a string, including after the last code unit.

Note 2

This algorithm always returns not-found if _fromIndex_ + the length of _searchValue_ > the length of _string_.


# 6.1.4.2 StringLastIndexOf ( _string_, _searchValue_, _fromIndex_ )

The abstract operation StringLastIndexOf takes arguments _string_ (a String), _searchValue_ (a String), and _fromIndex_ (a non-negative [integer](#integer)) and returns a non-negative [integer](#integer) or not-found. It performs the following steps when called:

1.  Let _len_ be the length of _string_.
2.  Let _searchLen_ be the length of _searchValue_.
3.  [Assert](#assert): _fromIndex_ + _searchLen_ ≤ _len_.
4.  For each [integer](#integer) _i_ such that 0 ≤ _i_ ≤ _fromIndex_, in descending order, do
    1.  Let _candidate_ be the [substring](#substring) of _string_ from _i_ to _i_ + _searchLen_.
    2.  If _candidate_ is _searchValue_, return _i_.
5.  Return not-found.

Note

If _searchValue_ is the empty String, this algorithm returns _fromIndex_. The empty String is effectively found at every position within a string, including after the last code unit.


# 6.1.5 The Symbol Type

The Symbol type is the set of all non-String values that may be used as the key of an Object property ([6.1.7](#sec-object-type)).

Each Symbol is unique and immutable.

Each Symbol has an immutable _\[\[Description\]\]_ internal slot whose value is either a String or undefined.


# 6.1.5.1 Well-Known Symbols

Well-known symbols are built-in Symbol values that are explicitly referenced by algorithms of this specification. They are typically used as the keys of properties whose values serve as extension points of a specification algorithm. Unless otherwise specified, well-known symbols values are shared by all [realms](#realm) ([9.3](#sec-code-realms)).

Within this specification a well-known symbol is referred to using the standard [intrinsic notation](#sec-well-known-intrinsic-objects) where the intrinsic is one of the values listed in [Table 1](#table-well-known-symbols).

Note

Previous editions of this specification used a notation of the form @@name, where the current edition would use `%Symbol.name%`. In particular, the following names were used: @@asyncIterator, @@hasInstance, @@isConcatSpreadable, @@iterator, @@match, @@matchAll, @@replace, @@search, @@species, @@split, @@toPrimitive, @@toStringTag, and @@unscopables.

Table 1: Well-known Symbols

<table><thead><tr><th>Specification Name</th><th><var class="field">[[Description]]</var></th><th>Value and Purpose</th></tr></thead><tbody><tr><td><dfn tabindex="-1">%Symbol.asyncIterator%</dfn></td><td><emu-val>"Symbol.asyncIterator"</emu-val></td><td>A method that returns the default <emu-xref href="#sec-asynciterator-interface" id="_ref_1291"><a href="#sec-asynciterator-interface">async iterator</a></emu-xref> for an object. Called by the semantics of the <code>for</code>-<code>await</code>-<code>of</code> statement.</td></tr><tr><td><dfn tabindex="-1">%Symbol.hasInstance%</dfn></td><td><emu-val>"Symbol.hasInstance"</emu-val></td><td>A method that determines if a <emu-xref href="#constructor" id="_ref_1292"><a href="#constructor">constructor</a></emu-xref> object recognizes an object as one of the <emu-xref href="#constructor" id="_ref_1293"><a href="#constructor">constructor</a></emu-xref>'s instances. Called by the semantics of the <code>instanceof</code> operator.</td></tr><tr><td><dfn tabindex="-1">%Symbol.isConcatSpreadable%</dfn></td><td><emu-val>"Symbol.isConcatSpreadable"</emu-val></td><td>A Boolean valued property that if true indicates that an object should be flattened to its array elements by <emu-xref href="#sec-array.prototype.concat" id="_ref_63"><a href="#sec-array.prototype.concat"><code>Array.prototype.concat</code></a></emu-xref>.</td></tr><tr><td><dfn tabindex="-1">%Symbol.iterator%</dfn></td><td><emu-val>"Symbol.iterator"</emu-val></td><td>A method that returns the default <emu-xref href="#sec-iterator-interface" id="_ref_1294"><a href="#sec-iterator-interface">iterator</a></emu-xref> for an object. Called by the semantics of the for-of statement.</td></tr><tr><td><dfn tabindex="-1">%Symbol.match%</dfn></td><td><emu-val>"Symbol.match"</emu-val></td><td>A regular expression method that matches the regular expression against a string. Called by the <emu-xref href="#sec-string.prototype.match" id="_ref_64"><a href="#sec-string.prototype.match"><code>String.prototype.match</code></a></emu-xref> method.</td></tr><tr><td><dfn tabindex="-1">%Symbol.matchAll%</dfn></td><td><emu-val>"Symbol.matchAll"</emu-val></td><td>A regular expression method that returns an <emu-xref href="#sec-iterator-interface" id="_ref_1295"><a href="#sec-iterator-interface">iterator</a></emu-xref> that yields matches of the regular expression against a string. Called by the <emu-xref href="#sec-string.prototype.matchall" id="_ref_65"><a href="#sec-string.prototype.matchall"><code>String.prototype.matchAll</code></a></emu-xref> method.</td></tr><tr><td><dfn tabindex="-1">%Symbol.replace%</dfn></td><td><emu-val>"Symbol.replace"</emu-val></td><td>A regular expression method that replaces matched substrings of a string. Called by the <emu-xref href="#sec-string.prototype.replace" id="_ref_66"><a href="#sec-string.prototype.replace"><code>String.prototype.replace</code></a></emu-xref> method.</td></tr><tr><td><dfn tabindex="-1">%Symbol.search%</dfn></td><td><emu-val>"Symbol.search"</emu-val></td><td>A regular expression method that returns the index within a string that matches the regular expression. Called by the <emu-xref href="#sec-string.prototype.search" id="_ref_67"><a href="#sec-string.prototype.search"><code>String.prototype.search</code></a></emu-xref> method.</td></tr><tr><td><dfn tabindex="-1">%Symbol.species%</dfn></td><td><emu-val>"Symbol.species"</emu-val></td><td>A function valued property that is the <emu-xref href="#constructor" id="_ref_1296"><a href="#constructor">constructor</a></emu-xref> function that is used to create derived objects.</td></tr><tr><td><dfn tabindex="-1">%Symbol.split%</dfn></td><td><emu-val>"Symbol.split"</emu-val></td><td>A regular expression method that splits a string at the indices that match the regular expression. Called by the <emu-xref href="#sec-string.prototype.split" id="_ref_68"><a href="#sec-string.prototype.split"><code>String.prototype.split</code></a></emu-xref> method.</td></tr><tr><td><dfn tabindex="-1">%Symbol.toPrimitive%</dfn></td><td><emu-val>"Symbol.toPrimitive"</emu-val></td><td>A method that converts an object to a corresponding primitive value. Called by the <emu-xref aoid="ToPrimitive" id="_ref_1297"><a href="#sec-toprimitive">ToPrimitive</a></emu-xref> abstract operation.</td></tr><tr><td><dfn tabindex="-1">%Symbol.toStringTag%</dfn></td><td><emu-val>"Symbol.toStringTag"</emu-val></td><td>A String valued property that is used in the creation of the default string description of an object. Accessed by the built-in method <emu-xref href="#sec-object.prototype.tostring" id="_ref_69"><a href="#sec-object.prototype.tostring"><code>Object.prototype.toString</code></a></emu-xref>.</td></tr><tr><td><dfn tabindex="-1">%Symbol.unscopables%</dfn></td><td><emu-val>"Symbol.unscopables"</emu-val></td><td>An object valued property whose own and inherited <emu-xref href="#property-name" id="_ref_1298"><a href="#property-name">property names</a></emu-xref> are <emu-xref href="#property-name" id="_ref_1299"><a href="#property-name">property names</a></emu-xref> that are excluded from the <code>with</code> environment bindings of the associated object.</td></tr></tbody></table>


# 6.1.6 Numeric Types

ECMAScript has two built-in numeric types: Number and BigInt. The following [abstract operations](#sec-algorithm-conventions-abstract-operations) are defined over these numeric types. The "Result" column shows the return type, along with an indication if it is possible for some invocations of the operation to return an [abrupt completion](#sec-completion-record-specification-type).

Table 2: Numeric Type Operations

<table><thead><tr><th>Operation</th><th>Example source</th><th>Invoked by the <emu-xref aoid="Evaluation" id="_ref_1302"><a href="#sec-evaluation">Evaluation</a></emu-xref> semantics of ...</th><th>Result</th></tr></thead><tbody><tr><td><emu-xref aoid="Number::unaryMinus" id="_ref_1303"><a href="#sec-numeric-types-number-unaryMinus">Number::unaryMinus</a></emu-xref></td><td rowspan="2"><code>-x</code></td><td rowspan="2"><emu-xref href="#sec-unary-minus-operator" title="" id="_ref_70"><a href="#sec-unary-minus-operator">Unary <code>-</code> Operator</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::unaryMinus" id="_ref_1304"><a href="#sec-numeric-types-bigint-unaryMinus">BigInt::unaryMinus</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::bitwiseNOT" id="_ref_1305"><a href="#sec-numeric-types-number-bitwiseNOT">Number::bitwiseNOT</a></emu-xref></td><td rowspan="2"><code>~x</code></td><td rowspan="2"><emu-xref href="#sec-bitwise-not-operator" title="" id="_ref_71"><a href="#sec-bitwise-not-operator">Bitwise NOT Operator ( <code>~</code> )</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::bitwiseNOT" id="_ref_1306"><a href="#sec-numeric-types-bigint-bitwiseNOT">BigInt::bitwiseNOT</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::exponentiate" id="_ref_1307"><a href="#sec-numeric-types-number-exponentiate">Number::exponentiate</a></emu-xref></td><td rowspan="2"><code>x&nbsp;**&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-exp-operator" title="" id="_ref_72"><a href="#sec-exp-operator">Exponentiation Operator</a></emu-xref> and <emu-xref href="#sec-math.pow" title="" id="_ref_73"><a href="#sec-math.pow">Math.pow ( <var>base</var>, <var>exponent</var> )</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::exponentiate" id="_ref_1308"><a href="#sec-numeric-types-bigint-exponentiate">BigInt::exponentiate</a></emu-xref></td><td>either a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1309"><a href="#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a BigInt or a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1310"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref></td></tr><tr><td><emu-xref aoid="Number::multiply" id="_ref_1311"><a href="#sec-numeric-types-number-multiply">Number::multiply</a></emu-xref></td><td rowspan="2"><code>x&nbsp;*&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-multiplicative-operators" title="" id="_ref_74"><a href="#sec-multiplicative-operators">Multiplicative Operators</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::multiply" id="_ref_1312"><a href="#sec-numeric-types-bigint-multiply">BigInt::multiply</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::divide" id="_ref_1313"><a href="#sec-numeric-types-number-divide">Number::divide</a></emu-xref></td><td rowspan="2"><code>x&nbsp;/&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-multiplicative-operators" title="" id="_ref_75"><a href="#sec-multiplicative-operators">Multiplicative Operators</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::divide" id="_ref_1314"><a href="#sec-numeric-types-bigint-divide">BigInt::divide</a></emu-xref></td><td>either a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1315"><a href="#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a BigInt or a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1316"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref></td></tr><tr><td><emu-xref aoid="Number::remainder" id="_ref_1317"><a href="#sec-numeric-types-number-remainder">Number::remainder</a></emu-xref></td><td rowspan="2"><code>x&nbsp;%&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-multiplicative-operators" title="" id="_ref_76"><a href="#sec-multiplicative-operators">Multiplicative Operators</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::remainder" id="_ref_1318"><a href="#sec-numeric-types-bigint-remainder">BigInt::remainder</a></emu-xref></td><td>either a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1319"><a href="#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a BigInt or a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1320"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref></td></tr><tr><td><emu-xref aoid="Number::add" id="_ref_1321"><a href="#sec-numeric-types-number-add">Number::add</a></emu-xref></td><td rowspan="2"><code>x ++</code><br><code>++ x</code><br><code>x&nbsp;+&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-postfix-increment-operator" title="" id="_ref_77"><a href="#sec-postfix-increment-operator">Postfix Increment Operator</a></emu-xref>, <emu-xref href="#sec-prefix-increment-operator" title="" id="_ref_78"><a href="#sec-prefix-increment-operator">Prefix Increment Operator</a></emu-xref>, and <emu-xref href="#sec-addition-operator-plus" title="" id="_ref_79"><a href="#sec-addition-operator-plus">The Addition Operator ( <code>+</code> )</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::add" id="_ref_1322"><a href="#sec-numeric-types-bigint-add">BigInt::add</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::subtract" id="_ref_1323"><a href="#sec-numeric-types-number-subtract">Number::subtract</a></emu-xref></td><td rowspan="2"><code>x --</code><br><code>-- x</code><br><code>x&nbsp;-&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-postfix-decrement-operator" title="" id="_ref_80"><a href="#sec-postfix-decrement-operator">Postfix Decrement Operator</a></emu-xref>, <emu-xref href="#sec-prefix-decrement-operator" title="" id="_ref_81"><a href="#sec-prefix-decrement-operator">Prefix Decrement Operator</a></emu-xref>, and <emu-xref href="#sec-subtraction-operator-minus" title="" id="_ref_82"><a href="#sec-subtraction-operator-minus">The Subtraction Operator ( <code>-</code> )</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::subtract" id="_ref_1324"><a href="#sec-numeric-types-bigint-subtract">BigInt::subtract</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::leftShift" id="_ref_1325"><a href="#sec-numeric-types-number-leftShift">Number::leftShift</a></emu-xref></td><td rowspan="2"><code>x&nbsp;&lt;&lt;&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-left-shift-operator" title="" id="_ref_83"><a href="#sec-left-shift-operator">The Left Shift Operator ( <code>&lt;&lt;</code> )</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::leftShift" id="_ref_1326"><a href="#sec-numeric-types-bigint-leftShift">BigInt::leftShift</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::signedRightShift" id="_ref_1327"><a href="#sec-numeric-types-number-signedRightShift">Number::signedRightShift</a></emu-xref></td><td rowspan="2"><code>x&nbsp;&gt;&gt;&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-signed-right-shift-operator" title="" id="_ref_84"><a href="#sec-signed-right-shift-operator">The Signed Right Shift Operator ( <code>&gt;&gt;</code> )</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::signedRightShift" id="_ref_1328"><a href="#sec-numeric-types-bigint-signedRightShift">BigInt::signedRightShift</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::unsignedRightShift" id="_ref_1329"><a href="#sec-numeric-types-number-unsignedRightShift">Number::unsignedRightShift</a></emu-xref></td><td rowspan="2"><code>x&nbsp;&gt;&gt;&gt;&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-unsigned-right-shift-operator" title="" id="_ref_85"><a href="#sec-unsigned-right-shift-operator">The Unsigned Right Shift Operator ( <code>&gt;&gt;&gt;</code> )</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::unsignedRightShift" id="_ref_1330"><a href="#sec-numeric-types-bigint-unsignedRightShift">BigInt::unsignedRightShift</a></emu-xref></td><td>a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1331"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref></td></tr><tr><td><emu-xref aoid="Number::lessThan" id="_ref_1332"><a href="#sec-numeric-types-number-lessThan">Number::lessThan</a></emu-xref></td><td rowspan="2"><code>x&nbsp;&lt;&nbsp;y</code><br><code>x&nbsp;&gt;&nbsp;y</code><br><code>x&nbsp;&lt;=&nbsp;y</code><br><code>x&nbsp;&gt;=&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-relational-operators" title="" id="_ref_86"><a href="#sec-relational-operators">Relational Operators</a></emu-xref>, via <emu-xref href="#sec-islessthan" title="" id="_ref_87"><a href="#sec-islessthan">IsLessThan ( <var>x</var>, <var>y</var>, <var>LeftFirst</var> )</a></emu-xref></td><td>Boolean or <emu-val>undefined</emu-val> (for unordered inputs)</td></tr><tr><td><emu-xref aoid="BigInt::lessThan" id="_ref_1333"><a href="#sec-numeric-types-bigint-lessThan">BigInt::lessThan</a></emu-xref></td><td>Boolean</td></tr><tr><td><emu-xref aoid="Number::equal" id="_ref_1334"><a href="#sec-numeric-types-number-equal">Number::equal</a></emu-xref></td><td rowspan="2"><code>x&nbsp;==&nbsp;y</code><br><code>x&nbsp;!=&nbsp;y</code><br><code>x&nbsp;===&nbsp;y</code><br><code>x&nbsp;!==&nbsp;y</code></td><td rowspan="2"><emu-xref href="#sec-equality-operators" title="" id="_ref_88"><a href="#sec-equality-operators">Equality Operators</a></emu-xref>, via <emu-xref href="#sec-isstrictlyequal" title="" id="_ref_89"><a href="#sec-isstrictlyequal">IsStrictlyEqual ( <var>x</var>, <var>y</var> )</a></emu-xref></td><td rowspan="2">Boolean</td></tr><tr><td><emu-xref aoid="BigInt::equal" id="_ref_1335"><a href="#sec-numeric-types-bigint-equal">BigInt::equal</a></emu-xref></td></tr><tr><td><emu-xref aoid="Number::sameValue" id="_ref_1336"><a href="#sec-numeric-types-number-sameValue">Number::sameValue</a></emu-xref></td><td><code>Object.is(x, y)</code></td><td>Object internal methods, via <emu-xref href="#sec-samevalue" title="" id="_ref_90"><a href="#sec-samevalue">SameValue ( <var>x</var>, <var>y</var> )</a></emu-xref>, to test exact value equality</td><td>Boolean</td></tr><tr><td><emu-xref aoid="Number::sameValueZero" id="_ref_1337"><a href="#sec-numeric-types-number-sameValueZero">Number::sameValueZero</a></emu-xref></td><td><code>[x].includes(y)</code></td><td>via <emu-xref href="#sec-samevaluezero" title="" id="_ref_91"><a href="#sec-samevaluezero">SameValueZero ( <var>x</var>, <var>y</var> )</a></emu-xref>, to test value equality, ignoring the difference between <emu-val>+0</emu-val><sub>𝔽</sub> and <emu-val>-0</emu-val><sub>𝔽</sub>, as in Array, Map, and Set methods</td><td>Boolean</td></tr><tr><td><emu-xref aoid="Number::bitwiseAND" id="_ref_1338"><a href="#sec-numeric-types-number-bitwiseAND">Number::bitwiseAND</a></emu-xref></td><td rowspan="2"><code>x&nbsp;&amp;&nbsp;y</code></td><td rowspan="6"><emu-xref href="#sec-binary-bitwise-operators" title="" id="_ref_92"><a href="#sec-binary-bitwise-operators">Binary Bitwise Operators</a></emu-xref></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::bitwiseAND" id="_ref_1339"><a href="#sec-numeric-types-bigint-bitwiseAND">BigInt::bitwiseAND</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::bitwiseXOR" id="_ref_1340"><a href="#sec-numeric-types-number-bitwiseXOR">Number::bitwiseXOR</a></emu-xref></td><td rowspan="2"><code>x&nbsp;^&nbsp;y</code></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::bitwiseXOR" id="_ref_1341"><a href="#sec-numeric-types-bigint-bitwiseXOR">BigInt::bitwiseXOR</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::bitwiseOR" id="_ref_1342"><a href="#sec-numeric-types-number-bitwiseOR">Number::bitwiseOR</a></emu-xref></td><td rowspan="2"><code>x&nbsp;|&nbsp;y</code></td><td>Number</td></tr><tr><td><emu-xref aoid="BigInt::bitwiseOR" id="_ref_1343"><a href="#sec-numeric-types-bigint-bitwiseOR">BigInt::bitwiseOR</a></emu-xref></td><td>BigInt</td></tr><tr><td><emu-xref aoid="Number::toString" id="_ref_1344"><a href="#sec-numeric-types-number-tostring">Number::toString</a></emu-xref></td><td rowspan="2"><code>String(x)</code></td><td rowspan="2">Many expressions and built-in functions, via <emu-xref href="#sec-tostring" title="" id="_ref_93"><a href="#sec-tostring">ToString ( <var>argument</var> )</a></emu-xref></td><td rowspan="2">String</td></tr><tr><td><emu-xref aoid="BigInt::toString" id="_ref_1345"><a href="#sec-numeric-types-bigint-tostring">BigInt::toString</a></emu-xref></td></tr></tbody></table>

Because the numeric types are in general not convertible without loss of precision or truncation, the ECMAScript language provides no implicit conversion among these types. Programmers must explicitly call `Number` and `BigInt` functions to convert among types when calling a function which requires another type.

Note

The first and subsequent editions of ECMAScript have provided, for certain operators, implicit numeric conversions that could lose precision or [truncate](#eqn-truncate). These legacy implicit conversions are maintained for backward compatibility, but not provided for BigInt in order to minimize opportunity for programmer error, and to leave open the option of generalized *value types* in a future edition.


# 6.1.6.1 The Number Type

The Number type has exactly 18,437,736,874,454,810,627 (that is, 2<sup>64</sup> - 2<sup>53</sup> + 3) values, representing the double-precision floating point [IEEE 754-2019](#sec-bibliography) binary64 values as specified in the IEEE Standard for Binary Floating-Point Arithmetic, except that the 9,007,199,254,740,990 (that is, 2<sup>53</sup> - 2) distinct NaN values of the IEEE Standard are represented in ECMAScript as a single special NaN value. (Note that the NaN value is produced by the program expression `NaN`.) In some implementations, external code might be able to detect a difference between various NaN values, but such behaviour is [implementation-defined](#implementation-defined); to ECMAScript code, all NaN values are indistinguishable from each other.

Note

The bit pattern that might be observed in an ArrayBuffer (see [25.1](#sec-arraybuffer-objects)) or a SharedArrayBuffer (see [25.2](#sec-sharedarraybuffer-objects)) after a Number value has been stored into it is not necessarily the same as the internal representation of that Number value used by the ECMAScript implementation.

There are two other special values, called positive Infinity and negative Infinity. For brevity, these values are also referred to for expository purposes by the symbols +∞<sub>𝔽</sub> and \-∞<sub>𝔽</sub>, respectively. (Note that these two infinite Number values are produced by the program expressions `+Infinity` (or simply `Infinity`) and `-Infinity`.)

The other 18,437,736,874,454,810,624 (that is, 2<sup>64</sup> - 2<sup>53</sup>) values are called the finite numbers. Half of these are positive numbers and half are negative numbers; for every [finite](#finite) positive Number value there is a corresponding negative value having the same magnitude.

Note that there is both a positive zero and a negative zero. For brevity, these values are also referred to for expository purposes by the symbols +0<sub>𝔽</sub> and \-0<sub>𝔽</sub>, respectively. (Note that these two different zero Number values are produced by the program expressions `+0` (or simply `0`) and `-0`.)

The 18,437,736,874,454,810,622 (that is, 2<sup>64</sup> - 2<sup>53</sup> - 2) [finite](#finite) non-zero values are of two kinds:

18,428,729,675,200,069,632 (that is, 2<sup>64</sup> - 2<sup>54</sup>) of them are normalized, having the form

_s_ × _m_ × 2<sup>_e_</sup>

where _s_ is 1 or -1, _m_ is an [integer](#integer) in the [interval](#interval) from 2<sup>52</sup> (inclusive) to 2<sup>53</sup> (exclusive), and _e_ is an [integer](#integer) in the [inclusive interval](#inclusive-interval) from -1074 to 971.

The remaining 9,007,199,254,740,990 (that is, 2<sup>53</sup> - 2) values are denormalized, having the form

_s_ × _m_ × 2<sup>_e_</sup>

where _s_ is 1 or -1, _m_ is an [integer](#integer) in the [interval](#interval) from 0 (exclusive) to 2<sup>52</sup> (exclusive), and _e_ is -1074.

Note that all the positive and negative [integers](#integer) whose magnitude is no greater than 2<sup>53</sup> are representable in the Number type. The [integer](#integer) 0 has two representations in the Number type: +0<sub>𝔽</sub> and \-0<sub>𝔽</sub>.

A [finite](#finite) number has an *odd significand* if it is non-zero and the [integer](#integer) _m_ used to express it (in one of the two forms shown above) is odd. Otherwise, it has an *even significand*.

In this specification, the phrase “the Number value for _x_” where _x_ represents an exact real mathematical quantity (which might even be an irrational number such as π) means a Number value chosen in the following manner. Consider the set of all [finite](#finite) values of the Number type, with \-0<sub>𝔽</sub> removed and with two additional values added to it that are not representable in the Number type, namely 2<sup>1024</sup> (which is +1 × 2<sup>53</sup> × 2<sup>971</sup>) and \-2<sup>1024</sup> (which is \-1 × 2<sup>53</sup> × 2<sup>971</sup>). Choose the member of this set that is closest in value to _x_. If two values of the set are equally close, then the one with an even significand is chosen; for this purpose, the two extra values 2<sup>1024</sup> and \-2<sup>1024</sup> are considered to have even significands. Finally, if 2<sup>1024</sup> was chosen, replace it with +∞<sub>𝔽</sub>; if \-2<sup>1024</sup> was chosen, replace it with \-∞<sub>𝔽</sub>; if +0<sub>𝔽</sub> was chosen, replace it with \-0<sub>𝔽</sub> if and only if _x_ < 0; any other chosen value is used unchanged. The result is the [Number value for](#number-value-for) _x_. (This procedure corresponds exactly to the behaviour of the [IEEE 754-2019](#sec-bibliography) roundTiesToEven mode.)

The [Number value for](#number-value-for) +∞ is +∞<sub>𝔽</sub>, and the [Number value for](#number-value-for) -∞ is \-∞<sub>𝔽</sub>.

Some ECMAScript operators deal only with [integers](#integer) in specific ranges such as the [inclusive interval](#inclusive-interval) from \-2<sup>31</sup> to 2<sup>31</sup> - 1 or the [inclusive interval](#inclusive-interval) from 0 to 2<sup>16</sup> - 1. These operators accept any value of the Number type but first convert each such value to an [integer](#integer) value in the expected range. See the descriptions of the numeric conversion operations in [7.1](#sec-type-conversion).


# 6.1.6.1.1 Number::unaryMinus ( _x_ )

The abstract operation Number::unaryMinus takes argument _x_ (a Number) and returns a Number. It performs the following steps when called:

1.  If _x_ is NaN, return NaN.
2.  Return the negation of _x_; that is, compute a Number with the same magnitude but opposite sign.


# 6.1.6.1.2 Number::bitwiseNOT ( _x_ )

The abstract operation Number::bitwiseNOT takes argument _x_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Let _oldValue_ be ! [ToInt32](#sec-toint32)(_x_).
2.  Return the bitwise complement of _oldValue_. The [mathematical value of](#mathematical-value-of) the result is exactly representable as a 32-bit two's complement bit string.


# 6.1.6.1.3 Number::exponentiate ( _base_, _exponent_ )

The abstract operation Number::exponentiate takes arguments _base_ (a Number) and _exponent_ (a Number) and returns a Number. It returns an [implementation-approximated](#implementation-approximated) value representing the result of raising _base_ to the _exponent_ power. It performs the following steps when called:

1.  If _exponent_ is NaN, return NaN.
2.  If _exponent_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return 1<sub>𝔽</sub>.
3.  If _base_ is NaN, return NaN.
4.  If _base_ is +∞<sub>𝔽</sub>, then
    1.  If _exponent_ > +0<sub>𝔽</sub>, return +∞<sub>𝔽</sub>; otherwise return +0<sub>𝔽</sub>.
5.  If _base_ is \-∞<sub>𝔽</sub>, then
    1.  If _exponent_ > +0<sub>𝔽</sub>, then
        1.  If _exponent_ is an odd [integral Number](#integral-number), return \-∞<sub>𝔽</sub>; otherwise return +∞<sub>𝔽</sub>.
    2.  Else,
        1.  If _exponent_ is an odd [integral Number](#integral-number), return \-0<sub>𝔽</sub>; otherwise return +0<sub>𝔽</sub>.
6.  If _base_ is +0<sub>𝔽</sub>, then
    1.  If _exponent_ > +0<sub>𝔽</sub>, return +0<sub>𝔽</sub>; otherwise return +∞<sub>𝔽</sub>.
7.  If _base_ is \-0<sub>𝔽</sub>, then
    1.  If _exponent_ > +0<sub>𝔽</sub>, then
        1.  If _exponent_ is an odd [integral Number](#integral-number), return \-0<sub>𝔽</sub>; otherwise return +0<sub>𝔽</sub>.
    2.  Else,
        1.  If _exponent_ is an odd [integral Number](#integral-number), return \-∞<sub>𝔽</sub>; otherwise return +∞<sub>𝔽</sub>.
8.  [Assert](#assert): _base_ is [finite](#finite) and is neither +0<sub>𝔽</sub> nor \-0<sub>𝔽</sub>.
9.  If _exponent_ is +∞<sub>𝔽</sub>, then
    1.  If [abs](#eqn-abs)([ℝ](#ℝ)(_base_)) > 1, return +∞<sub>𝔽</sub>.
    2.  If [abs](#eqn-abs)([ℝ](#ℝ)(_base_)) = 1, return NaN.
    3.  If [abs](#eqn-abs)([ℝ](#ℝ)(_base_)) < 1, return +0<sub>𝔽</sub>.
10.  If _exponent_ is \-∞<sub>𝔽</sub>, then
     1.  If [abs](#eqn-abs)([ℝ](#ℝ)(_base_)) > 1, return +0<sub>𝔽</sub>.
     2.  If [abs](#eqn-abs)([ℝ](#ℝ)(_base_)) = 1, return NaN.
     3.  If [abs](#eqn-abs)([ℝ](#ℝ)(_base_)) < 1, return +∞<sub>𝔽</sub>.
11.  [Assert](#assert): _exponent_ is [finite](#finite) and is neither +0<sub>𝔽</sub> nor \-0<sub>𝔽</sub>.
12.  If _base_ < \-0<sub>𝔽</sub> and _exponent_ is not an [integral Number](#integral-number), return NaN.
13.  Return an [implementation-approximated](#implementation-approximated) Number value representing the result of raising [ℝ](#ℝ)(_base_) to the [ℝ](#ℝ)(_exponent_) power.

Note

The result of _base_ `**` _exponent_ when _base_ is 1<sub>𝔽</sub> or \-1<sub>𝔽</sub> and _exponent_ is +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, or when _base_ is 1<sub>𝔽</sub> and _exponent_ is NaN, differs from [IEEE 754-2019](#sec-bibliography). The first edition of ECMAScript specified a result of NaN for this operation, whereas later revisions of IEEE 754 specified 1<sub>𝔽</sub>. The historical ECMAScript behaviour is preserved for compatibility reasons.


# 6.1.6.1.4 Number::multiply ( _x_, _y_ )

The abstract operation Number::multiply takes arguments _x_ (a Number) and _y_ (a Number) and returns a Number. It performs multiplication according to the rules of [IEEE 754-2019](#sec-bibliography) binary double-precision arithmetic, producing the product of _x_ and _y_. It performs the following steps when called:

1.  If _x_ is NaN or _y_ is NaN, return NaN.
2.  If _x_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, then
    1.  If _y_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return NaN.
    2.  If _y_ > +0<sub>𝔽</sub>, return _x_.
    3.  Return -_x_.
3.  If _y_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, then
    1.  If _x_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return NaN.
    2.  If _x_ > +0<sub>𝔽</sub>, return _y_.
    3.  Return -_y_.
4.  If _x_ is \-0<sub>𝔽</sub>, then
    1.  If _y_ is \-0<sub>𝔽</sub> or _y_ < \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
    2.  Else, return \-0<sub>𝔽</sub>.
5.  If _y_ is \-0<sub>𝔽</sub>, then
    1.  If _x_ < \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
    2.  Else, return \-0<sub>𝔽</sub>.
6.  Return [𝔽](#𝔽)([ℝ](#ℝ)(_x_) × [ℝ](#ℝ)(_y_)).

Note

[Finite](#finite)\-precision multiplication is commutative, but not always associative.


# 6.1.6.1.5 Number::divide ( _x_, _y_ )

The abstract operation Number::divide takes arguments _x_ (a Number) and _y_ (a Number) and returns a Number. It performs division according to the rules of [IEEE 754-2019](#sec-bibliography) binary double-precision arithmetic, producing the quotient of _x_ and _y_ where _x_ is the dividend and _y_ is the divisor. It performs the following steps when called:

1.  If _x_ is NaN or _y_ is NaN, return NaN.
2.  If _x_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, then
    1.  If _y_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return NaN.
    2.  If _y_ is +0<sub>𝔽</sub> or _y_ > +0<sub>𝔽</sub>, return _x_.
    3.  Return -_x_.
3.  If _y_ is +∞<sub>𝔽</sub>, then
    1.  If _x_ is +0<sub>𝔽</sub> or _x_ > +0<sub>𝔽</sub>, return +0<sub>𝔽</sub>; otherwise return \-0<sub>𝔽</sub>.
4.  If _y_ is \-∞<sub>𝔽</sub>, then
    1.  If _x_ is +0<sub>𝔽</sub> or _x_ > +0<sub>𝔽</sub>, return \-0<sub>𝔽</sub>; otherwise return +0<sub>𝔽</sub>.
5.  If _x_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, then
    1.  If _y_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return NaN.
    2.  If _y_ > +0<sub>𝔽</sub>, return _x_.
    3.  Return -_x_.
6.  If _y_ is +0<sub>𝔽</sub>, then
    1.  If _x_ > +0<sub>𝔽</sub>, return +∞<sub>𝔽</sub>; otherwise return \-∞<sub>𝔽</sub>.
7.  If _y_ is \-0<sub>𝔽</sub>, then
    1.  If _x_ > +0<sub>𝔽</sub>, return \-∞<sub>𝔽</sub>; otherwise return +∞<sub>𝔽</sub>.
8.  Return [𝔽](#𝔽)([ℝ](#ℝ)(_x_) / [ℝ](#ℝ)(_y_)).


# 6.1.6.1.6 Number::remainder ( _n_, _d_ )

The abstract operation Number::remainder takes arguments _n_ (a Number) and _d_ (a Number) and returns a Number. It yields the remainder from an implied division of its operands where _n_ is the dividend and _d_ is the divisor. It performs the following steps when called:

1.  If _n_ is NaN or _d_ is NaN, return NaN.
2.  If _n_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return NaN.
3.  If _d_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return _n_.
4.  If _d_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return NaN.
5.  If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return _n_.
6.  [Assert](#assert): _n_ and _d_ are [finite](#finite) and non-zero.
7.  Let _quotient_ be [ℝ](#ℝ)(_n_) / [ℝ](#ℝ)(_d_).
8.  Let _q_ be [truncate](#eqn-truncate)(_quotient_).
9.  Let _r_ be [ℝ](#ℝ)(_n_) - ([ℝ](#ℝ)(_d_) × _q_).
10.  If _r_ = 0 and _n_ < \-0<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
11.  Return [𝔽](#𝔽)(_r_).

Note 1

In C and C++, the remainder operator accepts only integral operands; in ECMAScript, it also accepts floating-point operands.

Note 2

The result of a floating-point remainder operation as computed by the `%` operator is not the same as the “remainder” operation defined by [IEEE 754-2019](#sec-bibliography). The [IEEE 754-2019](#sec-bibliography) “remainder” operation computes the remainder from a rounding division, not a truncating division, and so its behaviour is not analogous to that of the usual integer remainder operator. Instead the ECMAScript language defines `%` on floating-point operations to behave in a manner analogous to that of the Java integer remainder operator; this may be compared with the C library function fmod.


# 6.1.6.1.7 Number::add ( _x_, _y_ )

The abstract operation Number::add takes arguments _x_ (a Number) and _y_ (a Number) and returns a Number. It performs addition according to the rules of [IEEE 754-2019](#sec-bibliography) binary double-precision arithmetic, producing the sum of its arguments. It performs the following steps when called:

1.  If _x_ is NaN or _y_ is NaN, return NaN.
2.  If _x_ is +∞<sub>𝔽</sub> and _y_ is \-∞<sub>𝔽</sub>, return NaN.
3.  If _x_ is \-∞<sub>𝔽</sub> and _y_ is +∞<sub>𝔽</sub>, return NaN.
4.  If _x_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return _x_.
5.  If _y_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return _y_.
6.  [Assert](#assert): _x_ and _y_ are both [finite](#finite).
7.  If _x_ is \-0<sub>𝔽</sub> and _y_ is \-0<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
8.  Return [𝔽](#𝔽)([ℝ](#ℝ)(_x_) + [ℝ](#ℝ)(_y_)).

Note

[Finite](#finite)\-precision addition is commutative, but not always associative.


# 6.1.6.1.8 Number::subtract ( _x_, _y_ )

The abstract operation Number::subtract takes arguments _x_ (a Number) and _y_ (a Number) and returns a Number. It performs subtraction, producing the difference of its operands; _x_ is the minuend and _y_ is the subtrahend. It performs the following steps when called:

1.  Return [Number::add](#sec-numeric-types-number-add)(_x_, [Number::unaryMinus](#sec-numeric-types-number-unaryMinus)(_y_)).

Note

It is always the case that `x - y` produces the same result as `x + (-y)`.


# 6.1.6.1.9 Number::leftShift ( _x_, _y_ )

The abstract operation Number::leftShift takes arguments _x_ (a Number) and _y_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Let _lNum_ be ! [ToInt32](#sec-toint32)(_x_).
2.  Let _rNum_ be ! [ToUint32](#sec-touint32)(_y_).
3.  Let _shiftCount_ be [ℝ](#ℝ)(_rNum_) [modulo](#eqn-modulo) 32.
4.  Return the result of left shifting _lNum_ by _shiftCount_ bits. The [mathematical value of](#mathematical-value-of) the result is exactly representable as a 32-bit two's complement bit string.


# 6.1.6.1.10 Number::signedRightShift ( _x_, _y_ )

The abstract operation Number::signedRightShift takes arguments _x_ (a Number) and _y_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Let _lNum_ be ! [ToInt32](#sec-toint32)(_x_).
2.  Let _rNum_ be ! [ToUint32](#sec-touint32)(_y_).
3.  Let _shiftCount_ be [ℝ](#ℝ)(_rNum_) [modulo](#eqn-modulo) 32.
4.  Return the result of performing a sign-extending right shift of _lNum_ by _shiftCount_ bits. The most significant bit is propagated. The [mathematical value of](#mathematical-value-of) the result is exactly representable as a 32-bit two's complement bit string.


# 6.1.6.1.11 Number::unsignedRightShift ( _x_, _y_ )

The abstract operation Number::unsignedRightShift takes arguments _x_ (a Number) and _y_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Let _lNum_ be ! [ToUint32](#sec-touint32)(_x_).
2.  Let _rNum_ be ! [ToUint32](#sec-touint32)(_y_).
3.  Let _shiftCount_ be [ℝ](#ℝ)(_rNum_) [modulo](#eqn-modulo) 32.
4.  Return the result of performing a zero-filling right shift of _lNum_ by _shiftCount_ bits. Vacated bits are filled with zero. The [mathematical value of](#mathematical-value-of) the result is exactly representable as a 32-bit unsigned bit string.


# 6.1.6.1.12 Number::lessThan ( _x_, _y_ )

The abstract operation Number::lessThan takes arguments _x_ (a Number) and _y_ (a Number) and returns a Boolean or undefined. It performs the following steps when called:

1.  If _x_ is NaN, return undefined.
2.  If _y_ is NaN, return undefined.
3.  If _x_ is _y_, return false.
4.  If _x_ is +0<sub>𝔽</sub> and _y_ is \-0<sub>𝔽</sub>, return false.
5.  If _x_ is \-0<sub>𝔽</sub> and _y_ is +0<sub>𝔽</sub>, return false.
6.  If _x_ is +∞<sub>𝔽</sub>, return false.
7.  If _y_ is +∞<sub>𝔽</sub>, return true.
8.  If _y_ is \-∞<sub>𝔽</sub>, return false.
9.  If _x_ is \-∞<sub>𝔽</sub>, return true.
10.  [Assert](#assert): _x_ and _y_ are [finite](#finite).
11.  If [ℝ](#ℝ)(_x_) < [ℝ](#ℝ)(_y_), return true; otherwise return false.


# 6.1.6.1.13 Number::equal ( _x_, _y_ )

The abstract operation Number::equal takes arguments _x_ (a Number) and _y_ (a Number) and returns a Boolean. It performs the following steps when called:

1.  If _x_ is NaN, return false.
2.  If _y_ is NaN, return false.
3.  If _x_ is _y_, return true.
4.  If _x_ is +0<sub>𝔽</sub> and _y_ is \-0<sub>𝔽</sub>, return true.
5.  If _x_ is \-0<sub>𝔽</sub> and _y_ is +0<sub>𝔽</sub>, return true.
6.  Return false.


# 6.1.6.1.14 Number::sameValue ( _x_, _y_ )

The abstract operation Number::sameValue takes arguments _x_ (a Number) and _y_ (a Number) and returns a Boolean. It performs the following steps when called:

1.  If _x_ is NaN and _y_ is NaN, return true.
2.  If _x_ is +0<sub>𝔽</sub> and _y_ is \-0<sub>𝔽</sub>, return false.
3.  If _x_ is \-0<sub>𝔽</sub> and _y_ is +0<sub>𝔽</sub>, return false.
4.  If _x_ is _y_, return true.
5.  Return false.


# 6.1.6.1.15 Number::sameValueZero ( _x_, _y_ )

The abstract operation Number::sameValueZero takes arguments _x_ (a Number) and _y_ (a Number) and returns a Boolean. It performs the following steps when called:

1.  If _x_ is NaN and _y_ is NaN, return true.
2.  If _x_ is +0<sub>𝔽</sub> and _y_ is \-0<sub>𝔽</sub>, return true.
3.  If _x_ is \-0<sub>𝔽</sub> and _y_ is +0<sub>𝔽</sub>, return true.
4.  If _x_ is _y_, return true.
5.  Return false.


# 6.1.6.1.16 NumberBitwiseOp ( _op_, _x_, _y_ )

The abstract operation NumberBitwiseOp takes arguments _op_ (`&`, `^`, or `|`), _x_ (a Number), and _y_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Let _lNum_ be ! [ToInt32](#sec-toint32)(_x_).
2.  Let _rNum_ be ! [ToInt32](#sec-toint32)(_y_).
3.  Let _lBits_ be the 32-bit two's complement bit string representing [ℝ](#ℝ)(_lNum_).
4.  Let _rBits_ be the 32-bit two's complement bit string representing [ℝ](#ℝ)(_rNum_).
5.  If _op_ is `&`, then
    1.  Let _result_ be the result of applying the bitwise AND operation to _lBits_ and _rBits_.
6.  Else if _op_ is `^`, then
    1.  Let _result_ be the result of applying the bitwise exclusive OR (XOR) operation to _lBits_ and _rBits_.
7.  Else,
    1.  [Assert](#assert): _op_ is `|`.
    2.  Let _result_ be the result of applying the bitwise inclusive OR operation to _lBits_ and _rBits_.
8.  Return the [Number value for](#number-value-for) the [integer](#integer) represented by the 32-bit two's complement bit string _result_.


# 6.1.6.1.17 Number::bitwiseAND ( _x_, _y_ )

The abstract operation Number::bitwiseAND takes arguments _x_ (a Number) and _y_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Return [NumberBitwiseOp](#sec-numberbitwiseop)(`&`, _x_, _y_).


# 6.1.6.1.18 Number::bitwiseXOR ( _x_, _y_ )

The abstract operation Number::bitwiseXOR takes arguments _x_ (a Number) and _y_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Return [NumberBitwiseOp](#sec-numberbitwiseop)(`^`, _x_, _y_).


# 6.1.6.1.19 Number::bitwiseOR ( _x_, _y_ )

The abstract operation Number::bitwiseOR takes arguments _x_ (a Number) and _y_ (a Number) and returns an [integral Number](#integral-number). It performs the following steps when called:

1.  Return [NumberBitwiseOp](#sec-numberbitwiseop)(`|`, _x_, _y_).


# 6.1.6.1.20 Number::toString ( _x_, _radix_ )

The abstract operation Number::toString takes arguments _x_ (a Number) and _radix_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 2 to 36) and returns a String. It represents _x_ as a String using a positional numeral system with radix _radix_. The digits used in the representation of a number using radix _r_ are taken from the first _r_ code units of "0123456789abcdefghijklmnopqrstuvwxyz" in order. The representation of numbers with magnitude greater than or equal to 1<sub>𝔽</sub> never includes leading zeroes. It performs the following steps when called:

1.  If _x_ is NaN, return "NaN".
2.  If _x_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return "0".
3.  If _x_ < \-0<sub>𝔽</sub>, return the [string-concatenation](#string-concatenation) of "-" and [Number::toString](#sec-numeric-types-number-tostring)(-_x_, _radix_).
4.  If _x_ is +∞<sub>𝔽</sub>, return "Infinity".
5.  Let _n_, _k_, and _s_ be [integers](#integer) such that _k_ ≥ 1, _radix_<sup>_k_ - 1</sup> ≤ _s_ < _radix_<sup>_k_</sup>, [𝔽](#𝔽)(_s_ × _radix_<sup>_n_ - _k_</sup>) is _x_, and _k_ is as small as possible. Note that _k_ is the number of digits in the representation of _s_ using radix _radix_, that _s_ is not divisible by _radix_, and that the least significant digit of _s_ is not necessarily uniquely determined by these criteria.
6.  If _radix_ ≠ 10 or _n_ is in the [inclusive interval](#inclusive-interval) from -5 to 21, then
    1.  If _n_ ≥ _k_, then
        1.  Return the [string-concatenation](#string-concatenation) of:
            -   the code units of the _k_ digits of the representation of _s_ using radix _radix_
            -   _n_ - _k_ occurrences of the code unit 0x0030 (DIGIT ZERO)
    2.  Else if _n_ > 0, then
        1.  Return the [string-concatenation](#string-concatenation) of:
            -   the code units of the most significant _n_ digits of the representation of _s_ using radix _radix_
            -   the code unit 0x002E (FULL STOP)
            -   the code units of the remaining _k_ - _n_ digits of the representation of _s_ using radix _radix_
    3.  Else,
        1.  [Assert](#assert): _n_ ≤ 0.
        2.  Return the [string-concatenation](#string-concatenation) of:
            -   the code unit 0x0030 (DIGIT ZERO)
            -   the code unit 0x002E (FULL STOP)
            -   \-_n_ occurrences of the code unit 0x0030 (DIGIT ZERO)
            -   the code units of the _k_ digits of the representation of _s_ using radix _radix_
7.  NOTE: In this case, the input will be represented using scientific E notation, such as `1.2e+3`.
8.  [Assert](#assert): _radix_ is 10.
9.  If _n_ < 0, then
    1.  Let _exponentSign_ be the code unit 0x002D (HYPHEN-MINUS).
10.  Else,
     1.  Let _exponentSign_ be the code unit 0x002B (PLUS SIGN).
11.  If _k_ = 1, then
     1.  Return the [string-concatenation](#string-concatenation) of:
         -   the code unit of the single digit of _s_
         -   the code unit 0x0065 (LATIN SMALL LETTER E)
         -   _exponentSign_
         -   the code units of the decimal representation of [abs](#eqn-abs)(_n_ - 1)
12.  Return the [string-concatenation](#string-concatenation) of:
     -   the code unit of the most significant digit of the decimal representation of _s_
     -   the code unit 0x002E (FULL STOP)
     -   the code units of the remaining _k_ - 1 digits of the decimal representation of _s_
     -   the code unit 0x0065 (LATIN SMALL LETTER E)
     -   _exponentSign_
     -   the code units of the decimal representation of [abs](#eqn-abs)(_n_ - 1)

Note 1

The following observations may be useful as guidelines for implementations, but are not part of the normative requirements of this Standard:

-   If x is any Number value other than \-0<sub>𝔽</sub>, then [ToNumber](#sec-tonumber)([ToString](#sec-tostring)(x)) is x.
-   The least significant digit of s is not always uniquely determined by the requirements listed in step [5](#step-number-tostring-intermediate-values).

Note 2

For implementations that provide more accurate conversions than required by the rules above, it is recommended that the following alternative version of step [5](#step-number-tostring-intermediate-values) be used as a guideline:

5.  Let _n_, _k_, and _s_ be [integers](#integer) such that _k_ ≥ 1, _radix_<sup>_k_ - 1</sup> ≤ _s_ < _radix_<sup>_k_</sup>, [𝔽](#𝔽)(_s_ × _radix_<sup>_n_ - _k_</sup>) is _x_, and _k_ is as small as possible. If there are multiple possibilities for _s_, choose the value of _s_ for which _s_ × _radix_<sup>_n_ - _k_</sup> is closest in value to [ℝ](#ℝ)(_x_). If there are two such possible values of _s_, choose the one that is even. Note that _k_ is the number of digits in the representation of _s_ using radix _radix_ and that _s_ is not divisible by _radix_.

Note 3

Implementers of ECMAScript may find useful the paper and code written by David M. Gay for binary-to-decimal conversion of floating-point numbers:

Gay, David M. Correctly Rounded Binary-Decimal and Decimal-Binary Conversions. Numerical Analysis, Manuscript 90-10. AT&T Bell Laboratories (Murray Hill, New Jersey). 30 November 1990. Available as  
[https://ampl.com/\_archive/first-website/REFS/rounding.pdf](https://ampl.com/_archive/first-website/REFS/rounding.pdf). Associated code available as  
[http://netlib.sandia.gov/fp/dtoa.c](http://netlib.sandia.gov/fp/dtoa.c) and as  
[http://netlib.sandia.gov/fp/g\_fmt.c](http://netlib.sandia.gov/fp/g_fmt.c) and may also be found at the various `netlib` mirror sites.


# 6.1.6.2 The BigInt Type

The BigInt type represents an [integer](#integer) value. The value may be any size and is not limited to a particular bit-width. Generally, where not otherwise noted, operations are designed to return exact mathematically-based answers. For binary operations, BigInts act as two's complement binary strings, with negative numbers treated as having bits set infinitely to the left.


# 6.1.6.2.1 BigInt::unaryMinus ( _x_ )

The abstract operation BigInt::unaryMinus takes argument _x_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  If _x_ = 0<sub>ℤ</sub>, return 0<sub>ℤ</sub>.
2.  Return -_x_.


# 6.1.6.2.2 BigInt::bitwiseNOT ( _x_ )

The abstract operation BigInt::bitwiseNOT takes argument _x_ (a BigInt) and returns a BigInt. It returns the one's complement of _x_. It performs the following steps when called:

1.  Return -_x_ - 1<sub>ℤ</sub>.


# 6.1.6.2.3 BigInt::exponentiate ( _base_, _exponent_ )

The abstract operation BigInt::exponentiate takes arguments _base_ (a BigInt) and _exponent_ (a BigInt) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _exponent_ < 0<sub>ℤ</sub>, throw a RangeError exception.
2.  If _base_ = 0<sub>ℤ</sub> and _exponent_ = 0<sub>ℤ</sub>, return 1<sub>ℤ</sub>.
3.  Return _base_ raised to the power _exponent_.


# 6.1.6.2.4 BigInt::multiply ( _x_, _y_ )

The abstract operation BigInt::multiply takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Return _x_ × _y_.

Note

Even if the result has a much larger bit width than the input, the exact mathematical answer is given.


# 6.1.6.2.5 BigInt::divide ( _x_, _y_ )

The abstract operation BigInt::divide takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _y_ = 0<sub>ℤ</sub>, throw a RangeError exception.
2.  Let _quotient_ be [ℝ](#ℝ)(_x_) / [ℝ](#ℝ)(_y_).
3.  Return [ℤ](#ℤ)([truncate](#eqn-truncate)(_quotient_)).


# 6.1.6.2.6 BigInt::remainder ( _n_, _d_ )

The abstract operation BigInt::remainder takes arguments _n_ (a BigInt) and _d_ (a BigInt) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _d_ = 0<sub>ℤ</sub>, throw a RangeError exception.
2.  If _n_ = 0<sub>ℤ</sub>, return 0<sub>ℤ</sub>.
3.  Let _quotient_ be [ℝ](#ℝ)(_n_) / [ℝ](#ℝ)(_d_).
4.  Let _q_ be [ℤ](#ℤ)([truncate](#eqn-truncate)(_quotient_)).
5.  Return _n_ - (_d_ × _q_).

Note

The sign of the result is the sign of the dividend.


# 6.1.6.2.7 BigInt::add ( _x_, _y_ )

The abstract operation BigInt::add takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Return _x_ + _y_.


# 6.1.6.2.8 BigInt::subtract ( _x_, _y_ )

The abstract operation BigInt::subtract takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Return _x_ - _y_.


# 6.1.6.2.9 BigInt::leftShift ( _x_, _y_ )

The abstract operation BigInt::leftShift takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  If _y_ < 0<sub>ℤ</sub>, then
    1.  Return [ℤ](#ℤ)([floor](#eqn-floor)([ℝ](#ℝ)(_x_) / 2<sup>\-[ℝ](#ℝ)(_y_)</sup>)).
2.  Return _x_ × 2<sub>ℤ</sub><sup>_y_</sup>.

Note

Semantics here should be equivalent to a bitwise shift, treating the BigInt as an infinite length string of binary two's complement digits.


# 6.1.6.2.10 BigInt::signedRightShift ( _x_, _y_ )

The abstract operation BigInt::signedRightShift takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Return [BigInt::leftShift](#sec-numeric-types-bigint-leftShift)(_x_, -_y_).


# 6.1.6.2.11 BigInt::unsignedRightShift ( _x_, _y_ )

The abstract operation BigInt::unsignedRightShift takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Throw a TypeError exception.


# 6.1.6.2.12 BigInt::lessThan ( _x_, _y_ )

The abstract operation BigInt::lessThan takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a Boolean. It performs the following steps when called:

1.  If [ℝ](#ℝ)(_x_) < [ℝ](#ℝ)(_y_), return true; otherwise return false.


# 6.1.6.2.13 BigInt::equal ( _x_, _y_ )

The abstract operation BigInt::equal takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a Boolean. It performs the following steps when called:

1.  If [ℝ](#ℝ)(_x_) = [ℝ](#ℝ)(_y_), return true; otherwise return false.


# 6.1.6.2.14 BinaryAnd ( _x_, _y_ )

The abstract operation BinaryAnd takes arguments _x_ (0 or 1) and _y_ (0 or 1) and returns 0 or 1. It performs the following steps when called:

1.  If _x_ = 1 and _y_ = 1, return 1.
2.  Else, return 0.


# 6.1.6.2.15 BinaryOr ( _x_, _y_ )

The abstract operation BinaryOr takes arguments _x_ (0 or 1) and _y_ (0 or 1) and returns 0 or 1. It performs the following steps when called:

1.  If _x_ = 1 or _y_ = 1, return 1.
2.  Else, return 0.


# 6.1.6.2.16 BinaryXor ( _x_, _y_ )

The abstract operation BinaryXor takes arguments _x_ (0 or 1) and _y_ (0 or 1) and returns 0 or 1. It performs the following steps when called:

1.  If _x_ = 1 and _y_ = 0, return 1.
2.  Else if _x_ = 0 and _y_ = 1, return 1.
3.  Else, return 0.


# 6.1.6.2.17 BigIntBitwiseOp ( _op_, _x_, _y_ )

The abstract operation BigIntBitwiseOp takes arguments _op_ (`&`, `^`, or `|`), _x_ (a BigInt), and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Set _x_ to [ℝ](#ℝ)(_x_).
2.  Set _y_ to [ℝ](#ℝ)(_y_).
3.  Let _result_ be 0.
4.  Let _shift_ be 0.
5.  Repeat, until (_x_ = 0 or _x_ = -1) and (_y_ = 0 or _y_ = -1),
    1.  Let _xDigit_ be _x_ [modulo](#eqn-modulo) 2.
    2.  Let _yDigit_ be _y_ [modulo](#eqn-modulo) 2.
    3.  If _op_ is `&`, then
        1.  Set _result_ to _result_ + 2<sup>_shift_</sup> × [BinaryAnd](#sec-binaryand)(_xDigit_, _yDigit_).
    4.  Else if _op_ is `|`, then
        1.  Set _result_ to _result_ + 2<sup>_shift_</sup> × [BinaryOr](#sec-binaryor)(_xDigit_, _yDigit_).
    5.  Else,
        1.  [Assert](#assert): _op_ is `^`.
        2.  Set _result_ to _result_ + 2<sup>_shift_</sup> × [BinaryXor](#sec-binaryxor)(_xDigit_, _yDigit_).
    6.  Set _shift_ to _shift_ + 1.
    7.  Set _x_ to (_x_ - _xDigit_) / 2.
    8.  Set _y_ to (_y_ - _yDigit_) / 2.
6.  If _op_ is `&`, then
    1.  Let _tmp_ be [BinaryAnd](#sec-binaryand)(_x_ [modulo](#eqn-modulo) 2, _y_ [modulo](#eqn-modulo) 2).
7.  Else if _op_ is `|`, then
    1.  Let _tmp_ be [BinaryOr](#sec-binaryor)(_x_ [modulo](#eqn-modulo) 2, _y_ [modulo](#eqn-modulo) 2).
8.  Else,
    1.  [Assert](#assert): _op_ is `^`.
    2.  Let _tmp_ be [BinaryXor](#sec-binaryxor)(_x_ [modulo](#eqn-modulo) 2, _y_ [modulo](#eqn-modulo) 2).
9.  If _tmp_ ≠ 0, then
    1.  Set _result_ to _result_ - 2<sup>_shift_</sup>.
    2.  NOTE: This extends the sign.
10.  Return the [BigInt value for](#bigint-value-for) _result_.


# 6.1.6.2.18 BigInt::bitwiseAND ( _x_, _y_ )

The abstract operation BigInt::bitwiseAND takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Return [BigIntBitwiseOp](#sec-bigintbitwiseop)(`&`, _x_, _y_).


# 6.1.6.2.19 BigInt::bitwiseXOR ( _x_, _y_ )

The abstract operation BigInt::bitwiseXOR takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Return [BigIntBitwiseOp](#sec-bigintbitwiseop)(`^`, _x_, _y_).


# 6.1.6.2.20 BigInt::bitwiseOR ( _x_, _y_ )

The abstract operation BigInt::bitwiseOR takes arguments _x_ (a BigInt) and _y_ (a BigInt) and returns a BigInt. It performs the following steps when called:

1.  Return [BigIntBitwiseOp](#sec-bigintbitwiseop)(`|`, _x_, _y_).


# 6.1.6.2.21 BigInt::toString ( _x_, _radix_ )

The abstract operation BigInt::toString takes arguments _x_ (a BigInt) and _radix_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 2 to 36) and returns a String. It represents _x_ as a String using a positional numeral system with radix _radix_. The digits used in the representation of a BigInt using radix _r_ are taken from the first _r_ code units of "0123456789abcdefghijklmnopqrstuvwxyz" in order. The representation of BigInts other than 0<sub>ℤ</sub> never includes leading zeroes. It performs the following steps when called:

1.  If _x_ < 0<sub>ℤ</sub>, return the [string-concatenation](#string-concatenation) of "-" and [BigInt::toString](#sec-numeric-types-bigint-tostring)(-_x_, _radix_).
2.  Return the String value consisting of the representation of _x_ using radix _radix_.


# 6.1.7 The Object Type

Each instance of the Object type, also referred to simply as “an Object”, represents a collection of properties. Each property is either a data property, or an accessor property:

-   A data property associates a key value with an [ECMAScript language value](#sec-ecmascript-language-types) and a set of Boolean attributes.
-   An accessor property associates a key value with one or two accessor functions, and a set of Boolean attributes. The accessor functions are used to store or retrieve an [ECMAScript language value](#sec-ecmascript-language-types) that is associated with the property.

The properties of an object are uniquely identified using [property keys](#property-key). A property key is either a String or a Symbol. All Strings and Symbols, including the empty String, are valid as [property keys](#property-key). A property name is a [property key](#property-key) that [is a String](#sec-ecmascript-language-types-string-type).

An integer index is a [property name](#property-name) _n_ such that [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_n_) returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to [𝔽](#𝔽)(2<sup>53</sup> - 1). An array index is an [integer index](#integer-index) _n_ such that [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_n_) returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to [𝔽](#𝔽)(2<sup>32</sup> - 2).

Note

Every non-negative [safe integer](#safe-integer) has a corresponding [integer index](#integer-index). Every 32-bit unsigned [integer](#integer) except 2<sup>32</sup> - 1 has a corresponding [array index](#array-index). "-0" is neither an [integer index](#integer-index) nor an [array index](#array-index).

[Property keys](#property-key) are used to access properties and their values. There are two kinds of access for properties: *get* and *set*, corresponding to value retrieval and assignment, respectively. The properties accessible via get and set access includes both *own properties* that are a direct part of an object and *inherited properties* which are provided by another associated object via a property inheritance relationship. Inherited properties may be either own or inherited properties of the associated object. Each own property of an object must each have a key value that is distinct from the key values of the other own properties of that object.

All objects are logically collections of properties, but there are multiple forms of objects that differ in their semantics for accessing and manipulating their properties. Please see [6.1.7.2](#sec-object-internal-methods-and-internal-slots) for definitions of the multiple forms of objects.

In addition, some objects are callable; these are referred to as functions or [function objects](#function-object) and are described further below. All functions in ECMAScript are members of the Object type.


# 6.1.7.1 Property Attributes

Attributes are used in this specification to define and explain the state of Object properties as described in [Table 3](#table-object-property-attributes). Unless specified explicitly, the initial value of each attribute is its Default Value.

Table 3: Attributes of an Object property

<table><thead><tr><th>Attribute Name</th><th>Types of property for which it is present</th><th>Value Domain</th><th>Default Value</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[Value]]</var></td><td><emu-xref href="#sec-object-type" id="_ref_1559"><a href="#sec-object-type">data property</a></emu-xref></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_1560"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref></td><td><emu-val>undefined</emu-val></td><td>The value retrieved by a get access of the property.</td></tr><tr><td><var class="field">[[Writable]]</var></td><td><emu-xref href="#sec-object-type" id="_ref_1561"><a href="#sec-object-type">data property</a></emu-xref></td><td>a Boolean</td><td><emu-val>false</emu-val></td><td>If <emu-val>false</emu-val>, attempts by ECMAScript code to change the property's <var class="field">[[Value]]</var> attribute using <var class="field">[[Set]]</var> will not succeed.</td></tr><tr><td><var class="field">[[Get]]</var></td><td><emu-xref href="#sec-object-type" id="_ref_1562"><a href="#sec-object-type">accessor property</a></emu-xref></td><td>an Object or <emu-val>undefined</emu-val></td><td><emu-val>undefined</emu-val></td><td>If the value <emu-xref href="#sec-object-type" id="_ref_1563"><a href="#sec-object-type">is an Object</a></emu-xref> it must be a <emu-xref href="#function-object" id="_ref_1564"><a href="#function-object">function object</a></emu-xref>. The function's <var class="field">[[Call]]</var> internal method (<emu-xref href="#table-additional-essential-internal-methods-of-function-objects" id="_ref_101"><a href="#table-additional-essential-internal-methods-of-function-objects">Table 5</a></emu-xref>) is called with an empty arguments list to retrieve the property value each time a get access of the property is performed.</td></tr><tr><td><var class="field">[[Set]]</var></td><td><emu-xref href="#sec-object-type" id="_ref_1565"><a href="#sec-object-type">accessor property</a></emu-xref></td><td>an Object or <emu-val>undefined</emu-val></td><td><emu-val>undefined</emu-val></td><td>If the value <emu-xref href="#sec-object-type" id="_ref_1566"><a href="#sec-object-type">is an Object</a></emu-xref> it must be a <emu-xref href="#function-object" id="_ref_1567"><a href="#function-object">function object</a></emu-xref>. The function's <var class="field">[[Call]]</var> internal method (<emu-xref href="#table-additional-essential-internal-methods-of-function-objects" id="_ref_102"><a href="#table-additional-essential-internal-methods-of-function-objects">Table 5</a></emu-xref>) is called with an arguments list containing the assigned value as its sole argument each time a set access of the property is performed. The effect of a property's <var class="field">[[Set]]</var> internal method may, but is not required to, have an effect on the value returned by subsequent calls to the property's <var class="field">[[Get]]</var> internal method.</td></tr><tr><td><var class="field">[[Enumerable]]</var></td><td><emu-xref href="#sec-object-type" id="_ref_1568"><a href="#sec-object-type">data property</a></emu-xref> or <emu-xref href="#sec-object-type" id="_ref_1569"><a href="#sec-object-type">accessor property</a></emu-xref></td><td>a Boolean</td><td><emu-val>false</emu-val></td><td>If <emu-val>true</emu-val>, the property will be enumerated by a for-in enumeration (see <emu-xref href="#sec-for-in-and-for-of-statements" id="_ref_103"><a href="#sec-for-in-and-for-of-statements">14.7.5</a></emu-xref>). Otherwise, the property is said to be non-enumerable.</td></tr><tr><td><var class="field">[[Configurable]]</var></td><td><emu-xref href="#sec-object-type" id="_ref_1570"><a href="#sec-object-type">data property</a></emu-xref> or <emu-xref href="#sec-object-type" id="_ref_1571"><a href="#sec-object-type">accessor property</a></emu-xref></td><td>a Boolean</td><td><emu-val>false</emu-val></td><td>If <emu-val>false</emu-val>, attempts to delete the property, change it from a <emu-xref href="#sec-object-type" id="_ref_1572"><a href="#sec-object-type">data property</a></emu-xref> to an <emu-xref href="#sec-object-type" id="_ref_1573"><a href="#sec-object-type">accessor property</a></emu-xref> or from an <emu-xref href="#sec-object-type" id="_ref_1574"><a href="#sec-object-type">accessor property</a></emu-xref> to a <emu-xref href="#sec-object-type" id="_ref_1575"><a href="#sec-object-type">data property</a></emu-xref>, or make any changes to its attributes (other than replacing an existing <var class="field">[[Value]]</var> or setting <var class="field">[[Writable]]</var> to <emu-val>false</emu-val>) will fail.</td></tr></tbody></table>


# 6.1.7.2 Object Internal Methods and Internal Slots

The actual semantics of objects, in ECMAScript, are specified via algorithms called *internal methods*. Each object in an ECMAScript engine is associated with a set of internal methods that defines its runtime behaviour. These internal methods are not part of the ECMAScript language. They are defined by this specification purely for expository purposes. However, each object within an implementation of ECMAScript must behave as specified by the internal methods associated with it. The exact manner in which this is accomplished is determined by the implementation.

Internal method names are polymorphic. This means that different object values may perform different algorithms when a common internal method name is invoked upon them. That actual object upon which an internal method is invoked is the “target” of the invocation. If, at runtime, the implementation of an algorithm attempts to use an internal method of an object that the object does not support, a TypeError exception is thrown.

Internal slots correspond to internal state that is associated with objects, Symbols, or [Private Names](#sec-private-names) and used by various ECMAScript specification algorithms. Internal slots are not object properties and they are not inherited. Depending upon the specific internal slot specification, such state may consist of values of any [ECMAScript language type](#sec-ecmascript-language-types) or of specific ECMAScript specification type values. Unless explicitly specified otherwise, internal slots are allocated as part of the process of creating an object, Symbol, or [Private Name](#sec-private-names) and may not be dynamically added. Unless specified otherwise, the initial value of an internal slot is the value undefined. Various algorithms within this specification create values that have internal slots. However, the ECMAScript language provides no direct way to manipulate internal slots.

All objects have an internal slot named _\[\[PrivateElements\]\]_, which is a [List](#sec-list-and-record-specification-type) of [PrivateElements](#sec-privateelement-specification-type). This [List](#sec-list-and-record-specification-type) represents the values of the private fields, methods, and accessors for the object. Initially, it is an empty [List](#sec-list-and-record-specification-type).

Internal methods and internal slots are identified within this specification using names enclosed in double square brackets \[\[\]\].

[Table 4](#table-essential-internal-methods) summarizes the *essential internal methods* used by this specification that are applicable to all objects created or manipulated by ECMAScript code. Every object must have algorithms for all of the essential internal methods. However, all objects do not necessarily use the same algorithms for those methods.

An ordinary object is an object that satisfies all of the following criteria:

-   For the internal methods listed in [Table 4](#table-essential-internal-methods), the object uses those defined in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots).
-   If the object has a _\[\[Call\]\]_ internal method, it uses either the one defined in [10.2.1](#sec-ecmascript-function-objects-call-thisargument-argumentslist) or the one defined in [10.3.1](#sec-built-in-function-objects-call-thisargument-argumentslist).
-   If the object has a _\[\[Construct\]\]_ internal method, it uses either the one defined in [10.2.2](#sec-ecmascript-function-objects-construct-argumentslist-newtarget) or the one defined in [10.3.2](#sec-built-in-function-objects-construct-argumentslist-newtarget).

An exotic object is an object that is not an [ordinary object](#ordinary-object).

This specification recognizes different kinds of [exotic objects](#exotic-object) by those objects' internal methods. An object that is behaviourally equivalent to a particular kind of [exotic object](#exotic-object) (such as an [Array exotic object](#array-exotic-object) or a [bound function exotic object](#bound-function-exotic-object)), but does not have the same collection of internal methods specified for that kind, is not recognized as that kind of [exotic object](#exotic-object).

The “Signature” column of [Table 4](#table-essential-internal-methods) and other similar tables describes the invocation pattern for each internal method. The invocation pattern always includes a parenthesized list of descriptive parameter names. If a parameter name is the same as an ECMAScript type name then the name describes the required type of the parameter value. If an internal method explicitly returns a value, its parameter list is followed by the symbol “→” and the type name of the returned value. The type names used in signatures refer to the types defined in clause [6](#sec-ecmascript-data-types-and-values) augmented by the following additional names. “*any*” means the value may be any [ECMAScript language type](#sec-ecmascript-language-types).

In addition to its parameters, an internal method always has access to the object that is the target of the method invocation.

An internal method implicitly returns a [Completion Record](#sec-completion-record-specification-type), either a [normal completion](#sec-completion-record-specification-type) that wraps a value of the return type shown in its invocation pattern, or a [throw completion](#sec-completion-record-specification-type).

Table 4: Essential Internal Methods

<table><thead><tr><th>Internal Method</th><th>Signature</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[GetPrototypeOf]]</var></td><td>( ) <b>→</b> Object | Null</td><td>Determine the object that provides inherited properties for this object. A <emu-val>null</emu-val> value indicates that there are no inherited properties.</td></tr><tr><td><var class="field">[[SetPrototypeOf]]</var></td><td>(Object | Null) <b>→</b> Boolean</td><td>Associate this object with another object that provides inherited properties. Passing <emu-val>null</emu-val> indicates that there are no inherited properties. Returns <emu-val>true</emu-val> indicating that the operation was completed successfully or <emu-val>false</emu-val> indicating that the operation was not successful.</td></tr><tr><td><var class="field">[[IsExtensible]]</var></td><td>( ) <b>→</b> Boolean</td><td>Determine whether it is permitted to add additional properties to this object.</td></tr><tr><td><var class="field">[[PreventExtensions]]</var></td><td>( ) <b>→</b> Boolean</td><td>Control whether new properties may be added to this object. Returns <emu-val>true</emu-val> if the operation was successful or <emu-val>false</emu-val> if the operation was unsuccessful.</td></tr><tr><td><var class="field">[[GetOwnProperty]]</var></td><td>(<var>propertyKey</var>) <b>→</b> Undefined | <emu-xref href="#sec-property-descriptor-specification-type" id="_ref_1593"><a href="#sec-property-descriptor-specification-type">Property Descriptor</a></emu-xref></td><td>Return a <emu-xref href="#sec-property-descriptor-specification-type" id="_ref_1594"><a href="#sec-property-descriptor-specification-type">Property Descriptor</a></emu-xref> for the own property of this object whose key is <var>propertyKey</var>, or <emu-val>undefined</emu-val> if no such property exists.</td></tr><tr><td><var class="field">[[DefineOwnProperty]]</var></td><td>(<var>propertyKey</var>, <var>PropertyDescriptor</var>) <b>→</b> Boolean</td><td>Create or alter the own property, whose key is <var>propertyKey</var>, to have the state described by <var>PropertyDescriptor</var>. Return <emu-val>true</emu-val> if that property was successfully created/updated or <emu-val>false</emu-val> if the property could not be created or updated.</td></tr><tr><td><var class="field">[[HasProperty]]</var></td><td>(<var>propertyKey</var>) <b>→</b> Boolean</td><td>Return a Boolean value indicating whether this object already has either an own or inherited property whose key is <var>propertyKey</var>.</td></tr><tr><td><var class="field">[[Get]]</var></td><td>(<var>propertyKey</var>, <var>Receiver</var>) <b>→</b> <em>any</em></td><td>Return the value of the property whose key is <var>propertyKey</var> from this object. If any ECMAScript code must be executed to retrieve the property value, <var>Receiver</var> is used as the <emu-val>this</emu-val> value when evaluating the code.</td></tr><tr><td><var class="field">[[Set]]</var></td><td>(<var>propertyKey</var>, <var>value</var>, <var>Receiver</var>) <b>→</b> Boolean</td><td>Set the value of the property whose key is <var>propertyKey</var> to <var>value</var>. If any ECMAScript code must be executed to set the property value, <var>Receiver</var> is used as the <emu-val>this</emu-val> value when evaluating the code. Returns <emu-val>true</emu-val> if the property value was set or <emu-val>false</emu-val> if it could not be set.</td></tr><tr><td><var class="field">[[Delete]]</var></td><td>(<var>propertyKey</var>) <b>→</b> Boolean</td><td>Remove the own property whose key is <var>propertyKey</var> from this object. Return <emu-val>false</emu-val> if the property was not deleted and is still present. Return <emu-val>true</emu-val> if the property was deleted or is not present.</td></tr><tr><td><var class="field">[[OwnPropertyKeys]]</var></td><td>( ) <b>→</b> <emu-xref href="#sec-list-and-record-specification-type" id="_ref_1595"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#property-key" id="_ref_1596"><a href="#property-key">property keys</a></emu-xref></td><td>Return a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_1597"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> whose elements are all of the own <emu-xref href="#property-key" id="_ref_1598"><a href="#property-key">property keys</a></emu-xref> for the object.</td></tr></tbody></table>

[Table 5](#table-additional-essential-internal-methods-of-function-objects) summarizes additional essential internal methods that are supported by objects that may be called as functions. A function object is an object that supports the _\[\[Call\]\]_ internal method. A constructor is an object that supports the _\[\[Construct\]\]_ internal method. Every object that supports _\[\[Construct\]\]_ must support _\[\[Call\]\]_; that is, every [constructor](#constructor) must be a [function object](#function-object). Therefore, a [constructor](#constructor) may also be referred to as a *[constructor](#constructor) function* or *[constructor](#constructor) [function object](#function-object)*.

Table 5: Additional Essential Internal Methods of Function Objects

<table><thead><tr><th>Internal Method</th><th>Signature</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[Call]]</var></td><td>(<em>any</em>, a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_1605"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <em>any</em>) <b>→</b> <em>any</em></td><td>Executes code associated with this object. Invoked via a function call expression. The arguments to the internal method are a <emu-val>this</emu-val> value and a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_1606"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> whose elements are the arguments passed to the function by a call expression. Objects that implement this internal method are <em>callable</em>.</td></tr><tr><td><var class="field">[[Construct]]</var></td><td>(a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_1607"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <em>any</em>, Object) <b>→</b> Object</td><td>Creates an object. Invoked via the <code>new</code> operator or a <code>super</code> call. The first argument to the internal method is a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_1608"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> whose elements are the arguments of the <emu-xref href="#constructor" id="_ref_1609"><a href="#constructor">constructor</a></emu-xref> invocation or the <code>super</code> call. The second argument is the object to which the <code>new</code> operator was initially applied. Objects that implement this internal method are called <em><emu-xref href="#constructor" id="_ref_1610"><a href="#constructor">constructors</a></emu-xref></em>. A <emu-xref href="#function-object" id="_ref_1611"><a href="#function-object">function object</a></emu-xref> is not necessarily a <emu-xref href="#constructor" id="_ref_1612"><a href="#constructor">constructor</a></emu-xref> and such non-<emu-xref href="#constructor" id="_ref_1613"><a href="#constructor">constructor</a></emu-xref> <emu-xref href="#function-object" id="_ref_1614"><a href="#function-object">function objects</a></emu-xref> do not have a <var class="field">[[Construct]]</var> internal method.</td></tr></tbody></table>

The semantics of the essential internal methods for [ordinary objects](#ordinary-object) and standard [exotic objects](#exotic-object) are specified in clause [10](#sec-ordinary-and-exotic-objects-behaviours). If any specified use of an internal method of an [exotic object](#exotic-object) is not supported by an implementation, that usage must throw a TypeError exception when attempted.


# 6.1.7.3 Invariants of the Essential Internal Methods

The Internal Methods of Objects of an ECMAScript engine must conform to the list of invariants specified below. Ordinary ECMAScript Objects as well as all standard [exotic objects](#exotic-object) in this specification maintain these invariants. ECMAScript Proxy objects maintain these invariants by means of runtime checks on the result of traps invoked on the _\[\[ProxyHandler\]\]_ object.

Any implementation provided [exotic objects](#exotic-object) must also maintain these invariants for those objects. Violation of these invariants may cause ECMAScript code to have unpredictable behaviour and create security issues. However, violation of these invariants must never compromise the memory safety of an implementation.

An implementation must not allow these invariants to be circumvented in any manner such as by providing alternative interfaces that implement the functionality of the essential internal methods without enforcing their invariants.


## Definitions:

-   The *target* of an internal method is the object upon which the internal method is called.
-   A target is *non-extensible* if it has been observed to return false from its _\[\[IsExtensible\]\]_ internal method, or true from its _\[\[PreventExtensions\]\]_ internal method.
-   A *non-existent* property is a property that does not exist as an own property on a non-extensible target.
-   All references to *[SameValue](#sec-samevalue)* are according to the definition of the [SameValue](#sec-samevalue) algorithm.


## Return value:

The value returned by any internal method must be a [Completion Record](#sec-completion-record-specification-type) with either:

-   _\[\[Type\]\]_ = normal, _\[\[Target\]\]_ = empty, and _\[\[Value\]\]_ = a value of the "normal return type" shown below for that internal method, or
-   _\[\[Type\]\]_ = throw, _\[\[Target\]\]_ = empty, and _\[\[Value\]\]_ = any [ECMAScript language value](#sec-ecmascript-language-types).

Note 1

An internal method must not return a [continue completion](#sec-completion-record-specification-type), a [break completion](#sec-completion-record-specification-type), or a [return completion](#sec-completion-record-specification-type).


## _\[\[GetPrototypeOf\]\]_ ( )

-   The normal return type is either Object or Null.
-   If target is non-extensible, and _\[\[GetPrototypeOf\]\]_ returns a value _V_, then any future calls to _\[\[GetPrototypeOf\]\]_ should return the [SameValue](#sec-samevalue) as _V_.

Note 2

An object's prototype chain should have [finite](#finite) length (that is, starting from any object, recursively applying the _\[\[GetPrototypeOf\]\]_ internal method to its result should eventually lead to the value null). However, this requirement is not enforceable as an object level invariant if the prototype chain includes any [exotic objects](#exotic-object) that do not use the [ordinary object](#ordinary-object) definition of _\[\[GetPrototypeOf\]\]_. Such a circular prototype chain may result in infinite loops when accessing object properties.


## _\[\[SetPrototypeOf\]\]_ ( _V_ )

-   The normal return type is Boolean.
-   If target is non-extensible, _\[\[SetPrototypeOf\]\]_ must return false, unless _V_ is the [SameValue](#sec-samevalue) as the target's observed _\[\[GetPrototypeOf\]\]_ value.


## _\[\[IsExtensible\]\]_ ( )

-   The normal return type is Boolean.
-   If _\[\[IsExtensible\]\]_ returns false, all future calls to _\[\[IsExtensible\]\]_ on the target must return false.


## _\[\[PreventExtensions\]\]_ ( )

-   The normal return type is Boolean.
-   If _\[\[PreventExtensions\]\]_ returns true, all future calls to _\[\[IsExtensible\]\]_ on the target must return false and the target is now considered non-extensible.


## _\[\[GetOwnProperty\]\]_ ( _P_ )

-   The normal return type is either [Property Descriptor](#sec-property-descriptor-specification-type) or Undefined.
-   If the return value is a [Property Descriptor](#sec-property-descriptor-specification-type), it must be a [fully populated Property Descriptor](#sec-property-descriptor-specification-type).
-   If _P_ is described as a non-configurable, non-writable own [data property](#sec-object-type), all future calls to _\[\[GetOwnProperty\]\]_ ( _P_ ) must return [Property Descriptor](#sec-property-descriptor-specification-type) whose _\[\[Value\]\]_ is [SameValue](#sec-samevalue) as _P_'s _\[\[Value\]\]_ attribute.
-   If _P_'s attributes other than _\[\[Writable\]\]_ and _\[\[Value\]\]_ may change over time, or if the property might be deleted, then _P_'s _\[\[Configurable\]\]_ attribute must be true.
-   If the _\[\[Writable\]\]_ attribute may change from false to true, then the _\[\[Configurable\]\]_ attribute must be true.
-   If the target is non-extensible and _P_ is non-existent, then all future calls to _\[\[GetOwnProperty\]\]_ (_P_) on the target must describe _P_ as non-existent (i.e. _\[\[GetOwnProperty\]\]_ (_P_) must return undefined).

Note 3

As a consequence of the third invariant, if a property is described as a [data property](#sec-object-type) and it may return different values over time, then either or both of the _\[\[Writable\]\]_ and _\[\[Configurable\]\]_ attributes must be true even if no mechanism to change the value is exposed via the other essential internal methods.


## _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

-   The normal return type is Boolean.
-   _\[\[DefineOwnProperty\]\]_ must return false if _P_ has previously been observed as a non-configurable own property of the target, unless either:
    1.  _P_ is a writable [data property](#sec-object-type). A non-configurable writable [data property](#sec-object-type) can be changed into a non-configurable non-writable [data property](#sec-object-type).
    2.  All attributes of _Desc_ are the [SameValue](#sec-samevalue) as _P_'s attributes.
-   _\[\[DefineOwnProperty\]\]_ (_P_, _Desc_) must return false if target is non-extensible and _P_ is a non-existent own property. That is, a non-extensible target object cannot be extended with new properties.


## _\[\[HasProperty\]\]_ ( _P_ )

-   The normal return type is Boolean.
-   If _P_ was previously observed as a non-configurable own data or [accessor property](#sec-object-type) of the target, _\[\[HasProperty\]\]_ must return true.


## _\[\[Get\]\]_ ( _P_, _Receiver_ )

-   The normal return type is any [ECMAScript language type](#sec-ecmascript-language-types).
-   If _P_ was previously observed as a non-configurable, non-writable own [data property](#sec-object-type) of the target with value _V_, then _\[\[Get\]\]_ must return the [SameValue](#sec-samevalue) as _V_.
-   If _P_ was previously observed as a non-configurable own [accessor property](#sec-object-type) of the target whose _\[\[Get\]\]_ attribute is undefined, the _\[\[Get\]\]_ operation must return undefined.


## _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )

-   The normal return type is Boolean.
-   If _P_ was previously observed as a non-configurable, non-writable own [data property](#sec-object-type) of the target, then _\[\[Set\]\]_ must return false unless _V_ is the [SameValue](#sec-samevalue) as _P_'s _\[\[Value\]\]_ attribute.
-   If _P_ was previously observed as a non-configurable own [accessor property](#sec-object-type) of the target whose _\[\[Set\]\]_ attribute is undefined, the _\[\[Set\]\]_ operation must return false.


## _\[\[Delete\]\]_ ( _P_ )

-   The normal return type is Boolean.
-   If _P_ was previously observed as a non-configurable own data or [accessor property](#sec-object-type) of the target, _\[\[Delete\]\]_ must return false.


## _\[\[OwnPropertyKeys\]\]_ ( )

-   The normal return type is [List](#sec-list-and-record-specification-type).
-   The returned [List](#sec-list-and-record-specification-type) must not contain any duplicate entries.
-   Each element of the returned [List](#sec-list-and-record-specification-type) must be a [property key](#property-key).
-   The returned [List](#sec-list-and-record-specification-type) must contain at least the keys of all non-configurable own properties that have previously been observed.
-   If the target is non-extensible, the returned [List](#sec-list-and-record-specification-type) must contain only the keys of all own properties of the target that are observable using _\[\[GetOwnProperty\]\]_.


## _\[\[Call\]\]_ ( )

-   The normal return type is any [ECMAScript language type](#sec-ecmascript-language-types).


## _\[\[Construct\]\]_ ( )

-   The normal return type is Object.
-   The target must also have a _\[\[Call\]\]_ internal method.


# 6.1.7.4 Well-Known Intrinsic Objects

Well-known intrinsics are built-in objects that are explicitly referenced by the algorithms of this specification and which usually have [realm](#realm)\-specific identities. Unless otherwise specified each intrinsic object actually corresponds to a set of similar objects, one per [realm](#realm).

Within this specification a reference such as %name% means the intrinsic object, associated with the current [realm](#realm), corresponding to the name. A reference such as %name.a.b% means, as if the "b" property of the value of the "a" property of the intrinsic object %name% was accessed prior to any ECMAScript code being evaluated. Determination of the current [realm](#realm) and its intrinsics is described in [9.4](#sec-execution-contexts). The well-known intrinsics are listed in [Table 6](#table-well-known-intrinsic-objects).

Table 6: Well-Known Intrinsic Objects

<table><thead><tr><th>Intrinsic Name</th><th>Global Name</th><th>ECMAScript Language Association</th></tr></thead><tbody><tr><td><emu-xref href="#sec-aggregate-error-constructor" id="_ref_1663"><a href="#sec-aggregate-error-constructor">%AggregateError%</a></emu-xref></td><td><code>AggregateError</code></td><td>The <code>AggregateError</code> <emu-xref href="#constructor" id="_ref_1664"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-aggregate-error-constructor" id="_ref_117"><a href="#sec-aggregate-error-constructor">20.5.7.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-array-constructor" id="_ref_1665"><a href="#sec-array-constructor">%Array%</a></emu-xref></td><td><code>Array</code></td><td>The Array <emu-xref href="#constructor" id="_ref_1666"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-array-constructor" id="_ref_118"><a href="#sec-array-constructor">23.1.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-arraybuffer-constructor" id="_ref_1667"><a href="#sec-arraybuffer-constructor">%ArrayBuffer%</a></emu-xref></td><td><code>ArrayBuffer</code></td><td>The ArrayBuffer <emu-xref href="#constructor" id="_ref_1668"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-arraybuffer-constructor" id="_ref_119"><a href="#sec-arraybuffer-constructor">25.1.4</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%arrayiteratorprototype%-object" id="_ref_1669"><a href="#sec-%arrayiteratorprototype%-object">%ArrayIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-array-iterator-objects" id="_ref_1670"><a href="#sec-array-iterator-objects">Array Iterator objects</a></emu-xref> (<emu-xref href="#sec-array-iterator-objects" id="_ref_120"><a href="#sec-array-iterator-objects">23.1.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%asyncfromsynciteratorprototype%-object" id="_ref_1671"><a href="#sec-%asyncfromsynciteratorprototype%-object">%AsyncFromSyncIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-async-from-sync-iterator-objects" id="_ref_1672"><a href="#sec-async-from-sync-iterator-objects">Async-from-Sync Iterator objects</a></emu-xref> (<emu-xref href="#sec-async-from-sync-iterator-objects" id="_ref_121"><a href="#sec-async-from-sync-iterator-objects">27.1.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-async-function-constructor" id="_ref_1673"><a href="#sec-async-function-constructor">%AsyncFunction%</a></emu-xref></td><td></td><td>The <emu-xref href="#constructor" id="_ref_1674"><a href="#constructor">constructor</a></emu-xref> of async <emu-xref href="#function-object" id="_ref_1675"><a href="#function-object">function objects</a></emu-xref> (<emu-xref href="#sec-async-function-constructor" id="_ref_122"><a href="#sec-async-function-constructor">27.7.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-asyncgeneratorfunction-constructor" id="_ref_1676"><a href="#sec-asyncgeneratorfunction-constructor">%AsyncGeneratorFunction%</a></emu-xref></td><td></td><td>The <emu-xref href="#constructor" id="_ref_1677"><a href="#constructor">constructor</a></emu-xref> of async generator <emu-xref href="#function-object" id="_ref_1678"><a href="#function-object">function objects</a></emu-xref> (<emu-xref href="#sec-asyncgeneratorfunction-constructor" id="_ref_123"><a href="#sec-asyncgeneratorfunction-constructor">27.4.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-properties-of-asyncgenerator-prototype" id="_ref_1679"><a href="#sec-properties-of-asyncgenerator-prototype">%AsyncGeneratorPrototype%</a></emu-xref></td><td></td><td>The prototype of async generator objects (<emu-xref href="#sec-asyncgenerator-objects" id="_ref_124"><a href="#sec-asyncgenerator-objects">27.6</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-asynciteratorprototype" id="_ref_1680"><a href="#sec-asynciteratorprototype">%AsyncIteratorPrototype%</a></emu-xref></td><td></td><td>An object that all standard built-in <emu-xref href="#sec-asynciterator-interface" id="_ref_1681"><a href="#sec-asynciterator-interface">async iterator objects</a></emu-xref> indirectly inherit from</td></tr><tr><td><emu-xref href="#sec-atomics-object" id="_ref_1682"><a href="#sec-atomics-object">%Atomics%</a></emu-xref></td><td><code>Atomics</code></td><td>The <code>Atomics</code> object (<emu-xref href="#sec-atomics-object" id="_ref_125"><a href="#sec-atomics-object">25.4</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-bigint-constructor" id="_ref_1683"><a href="#sec-bigint-constructor">%BigInt%</a></emu-xref></td><td><code>BigInt</code></td><td>The BigInt <emu-xref href="#constructor" id="_ref_1684"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-bigint-constructor" id="_ref_126"><a href="#sec-bigint-constructor">21.2.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1685"><a href="#sec-typedarray-objects">%BigInt64Array%</a></emu-xref></td><td><code>BigInt64Array</code></td><td>The BigInt64Array <emu-xref href="#constructor" id="_ref_1686"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_127"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1687"><a href="#sec-typedarray-objects">%BigUint64Array%</a></emu-xref></td><td><code>BigUint64Array</code></td><td>The BigUint64Array <emu-xref href="#constructor" id="_ref_1688"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_128"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-boolean-constructor" id="_ref_1689"><a href="#sec-boolean-constructor">%Boolean%</a></emu-xref></td><td><code>Boolean</code></td><td>The Boolean <emu-xref href="#constructor" id="_ref_1690"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-boolean-constructor" id="_ref_129"><a href="#sec-boolean-constructor">20.3.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-dataview-constructor" id="_ref_1691"><a href="#sec-dataview-constructor">%DataView%</a></emu-xref></td><td><code>DataView</code></td><td>The DataView <emu-xref href="#constructor" id="_ref_1692"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-dataview-constructor" id="_ref_130"><a href="#sec-dataview-constructor">25.3.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-date-constructor" id="_ref_1693"><a href="#sec-date-constructor">%Date%</a></emu-xref></td><td><code>Date</code></td><td>The Date <emu-xref href="#constructor" id="_ref_1694"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-date-constructor" id="_ref_131"><a href="#sec-date-constructor">21.4.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-decodeuri-encodeduri" id="_ref_1695"><a href="#sec-decodeuri-encodeduri">%decodeURI%</a></emu-xref></td><td><code>decodeURI</code></td><td>The <code>decodeURI</code> function (<emu-xref href="#sec-decodeuri-encodeduri" id="_ref_132"><a href="#sec-decodeuri-encodeduri">19.2.6.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-decodeuricomponent-encodeduricomponent" id="_ref_1696"><a href="#sec-decodeuricomponent-encodeduricomponent">%decodeURIComponent%</a></emu-xref></td><td><code>decodeURIComponent</code></td><td>The <code>decodeURIComponent</code> function (<emu-xref href="#sec-decodeuricomponent-encodeduricomponent" id="_ref_133"><a href="#sec-decodeuricomponent-encodeduricomponent">19.2.6.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-encodeuri-uri" id="_ref_1697"><a href="#sec-encodeuri-uri">%encodeURI%</a></emu-xref></td><td><code>encodeURI</code></td><td>The <code>encodeURI</code> function (<emu-xref href="#sec-encodeuri-uri" id="_ref_134"><a href="#sec-encodeuri-uri">19.2.6.3</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-encodeuricomponent-uricomponent" id="_ref_1698"><a href="#sec-encodeuricomponent-uricomponent">%encodeURIComponent%</a></emu-xref></td><td><code>encodeURIComponent</code></td><td>The <code>encodeURIComponent</code> function (<emu-xref href="#sec-encodeuricomponent-uricomponent" id="_ref_135"><a href="#sec-encodeuricomponent-uricomponent">19.2.6.4</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-error-constructor" id="_ref_1699"><a href="#sec-error-constructor">%Error%</a></emu-xref></td><td><code>Error</code></td><td>The Error <emu-xref href="#constructor" id="_ref_1700"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-error-constructor" id="_ref_136"><a href="#sec-error-constructor">20.5.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-eval-x" id="_ref_1701"><a href="#sec-eval-x">%eval%</a></emu-xref></td><td><code>eval</code></td><td>The <code>eval</code> function (<emu-xref href="#sec-eval-x" id="_ref_137"><a href="#sec-eval-x">19.2.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-native-error-types-used-in-this-standard-evalerror" id="_ref_1702"><a href="#sec-native-error-types-used-in-this-standard-evalerror">%EvalError%</a></emu-xref></td><td><code>EvalError</code></td><td>The EvalError <emu-xref href="#constructor" id="_ref_1703"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-native-error-types-used-in-this-standard-evalerror" id="_ref_138"><a href="#sec-native-error-types-used-in-this-standard-evalerror">20.5.5.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-finalization-registry-constructor" id="_ref_1704"><a href="#sec-finalization-registry-constructor">%FinalizationRegistry%</a></emu-xref></td><td><code>FinalizationRegistry</code></td><td>The <emu-xref href="#sec-finalization-registry-constructor" id="_ref_1705"><a href="#sec-finalization-registry-constructor">FinalizationRegistry</a></emu-xref> <emu-xref href="#constructor" id="_ref_1706"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-finalization-registry-constructor" id="_ref_139"><a href="#sec-finalization-registry-constructor">26.2.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1707"><a href="#sec-typedarray-objects">%Float16Array%</a></emu-xref></td><td><code>Float16Array</code></td><td>The Float16Array <emu-xref href="#constructor" id="_ref_1708"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_140"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1709"><a href="#sec-typedarray-objects">%Float32Array%</a></emu-xref></td><td><code>Float32Array</code></td><td>The Float32Array <emu-xref href="#constructor" id="_ref_1710"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_141"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1711"><a href="#sec-typedarray-objects">%Float64Array%</a></emu-xref></td><td><code>Float64Array</code></td><td>The Float64Array <emu-xref href="#constructor" id="_ref_1712"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_142"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%foriniteratorprototype%-object" id="_ref_1713"><a href="#sec-%foriniteratorprototype%-object">%ForInIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-for-in-iterator-objects" id="_ref_1714"><a href="#sec-for-in-iterator-objects">For-In Iterator objects</a></emu-xref> (<emu-xref href="#sec-for-in-iterator-objects" id="_ref_143"><a href="#sec-for-in-iterator-objects">14.7.5.10</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-function-constructor" id="_ref_1715"><a href="#sec-function-constructor">%Function%</a></emu-xref></td><td><code>Function</code></td><td>The Function <emu-xref href="#constructor" id="_ref_1716"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-function-constructor" id="_ref_144"><a href="#sec-function-constructor">20.2.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-generatorfunction-constructor" id="_ref_1717"><a href="#sec-generatorfunction-constructor">%GeneratorFunction%</a></emu-xref></td><td></td><td>The <emu-xref href="#constructor" id="_ref_1718"><a href="#constructor">constructor</a></emu-xref> of generator <emu-xref href="#function-object" id="_ref_1719"><a href="#function-object">function objects</a></emu-xref> (<emu-xref href="#sec-generatorfunction-constructor" id="_ref_145"><a href="#sec-generatorfunction-constructor">27.3.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-properties-of-generator-prototype" id="_ref_1720"><a href="#sec-properties-of-generator-prototype">%GeneratorPrototype%</a></emu-xref></td><td></td><td>The prototype of generator objects (<emu-xref href="#sec-generator-objects" id="_ref_146"><a href="#sec-generator-objects">27.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1721"><a href="#sec-typedarray-objects">%Int8Array%</a></emu-xref></td><td><code>Int8Array</code></td><td>The Int8Array <emu-xref href="#constructor" id="_ref_1722"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_147"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1723"><a href="#sec-typedarray-objects">%Int16Array%</a></emu-xref></td><td><code>Int16Array</code></td><td>The Int16Array <emu-xref href="#constructor" id="_ref_1724"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_148"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1725"><a href="#sec-typedarray-objects">%Int32Array%</a></emu-xref></td><td><code>Int32Array</code></td><td>The Int32Array <emu-xref href="#constructor" id="_ref_1726"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_149"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-isfinite-number" id="_ref_1727"><a href="#sec-isfinite-number">%isFinite%</a></emu-xref></td><td><code>isFinite</code></td><td>The <code>isFinite</code> function (<emu-xref href="#sec-isfinite-number" id="_ref_150"><a href="#sec-isfinite-number">19.2.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-isnan-number" id="_ref_1728"><a href="#sec-isnan-number">%isNaN%</a></emu-xref></td><td><code>isNaN</code></td><td>The <code>isNaN</code> function (<emu-xref href="#sec-isnan-number" id="_ref_151"><a href="#sec-isnan-number">19.2.3</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-iterator-constructor" id="_ref_1729"><a href="#sec-iterator-constructor">%Iterator%</a></emu-xref></td><td><code>Iterator</code></td><td>The <code>Iterator</code> <emu-xref href="#constructor" id="_ref_1730"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-iterator-constructor" id="_ref_152"><a href="#sec-iterator-constructor">27.1.3.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_1731"><a href="#sec-%iteratorhelperprototype%-object">%IteratorHelperPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-iterator-helper-objects" id="_ref_1732"><a href="#sec-iterator-helper-objects">Iterator Helper objects</a></emu-xref> (<emu-xref href="#sec-%iteratorhelperprototype%-object" id="_ref_153"><a href="#sec-%iteratorhelperprototype%-object">27.1.2.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-json-object" id="_ref_1733"><a href="#sec-json-object">%JSON%</a></emu-xref></td><td><code>JSON</code></td><td>The <code>JSON</code> object (<emu-xref href="#sec-json-object" id="_ref_154"><a href="#sec-json-object">25.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-map-constructor" id="_ref_1734"><a href="#sec-map-constructor">%Map%</a></emu-xref></td><td><code>Map</code></td><td>The Map <emu-xref href="#constructor" id="_ref_1735"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-map-constructor" id="_ref_155"><a href="#sec-map-constructor">24.1.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%mapiteratorprototype%-object" id="_ref_1736"><a href="#sec-%mapiteratorprototype%-object">%MapIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-map-iterator-objects" id="_ref_1737"><a href="#sec-map-iterator-objects">Map Iterator objects</a></emu-xref> (<emu-xref href="#sec-map-iterator-objects" id="_ref_156"><a href="#sec-map-iterator-objects">24.1.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-math-object" id="_ref_1738"><a href="#sec-math-object">%Math%</a></emu-xref></td><td><code>Math</code></td><td>The <code>Math</code> object (<emu-xref href="#sec-math-object" id="_ref_157"><a href="#sec-math-object">21.3</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-number-constructor" id="_ref_1739"><a href="#sec-number-constructor">%Number%</a></emu-xref></td><td><code>Number</code></td><td>The Number <emu-xref href="#constructor" id="_ref_1740"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-number-constructor" id="_ref_158"><a href="#sec-number-constructor">21.1.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-object-constructor" id="_ref_1741"><a href="#sec-object-constructor">%Object%</a></emu-xref></td><td><code>Object</code></td><td>The Object <emu-xref href="#constructor" id="_ref_1742"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-object-constructor" id="_ref_159"><a href="#sec-object-constructor">20.1.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-parsefloat-string" id="_ref_1743"><a href="#sec-parsefloat-string">%parseFloat%</a></emu-xref></td><td><code>parseFloat</code></td><td>The <code>parseFloat</code> function (<emu-xref href="#sec-parsefloat-string" id="_ref_160"><a href="#sec-parsefloat-string">19.2.4</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-parseint-string-radix" id="_ref_1744"><a href="#sec-parseint-string-radix">%parseInt%</a></emu-xref></td><td><code>parseInt</code></td><td>The <code>parseInt</code> function (<emu-xref href="#sec-parseint-string-radix" id="_ref_161"><a href="#sec-parseint-string-radix">19.2.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-promise-constructor" id="_ref_1745"><a href="#sec-promise-constructor">%Promise%</a></emu-xref></td><td><code>Promise</code></td><td>The Promise <emu-xref href="#constructor" id="_ref_1746"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-promise-constructor" id="_ref_162"><a href="#sec-promise-constructor">27.2.3</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-proxy-constructor" id="_ref_1747"><a href="#sec-proxy-constructor">%Proxy%</a></emu-xref></td><td><code>Proxy</code></td><td>The Proxy <emu-xref href="#constructor" id="_ref_1748"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-proxy-constructor" id="_ref_163"><a href="#sec-proxy-constructor">28.2.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-native-error-types-used-in-this-standard-rangeerror" id="_ref_1749"><a href="#sec-native-error-types-used-in-this-standard-rangeerror">%RangeError%</a></emu-xref></td><td><code>RangeError</code></td><td>The RangeError <emu-xref href="#constructor" id="_ref_1750"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-native-error-types-used-in-this-standard-rangeerror" id="_ref_164"><a href="#sec-native-error-types-used-in-this-standard-rangeerror">20.5.5.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-native-error-types-used-in-this-standard-referenceerror" id="_ref_1751"><a href="#sec-native-error-types-used-in-this-standard-referenceerror">%ReferenceError%</a></emu-xref></td><td><code>ReferenceError</code></td><td>The ReferenceError <emu-xref href="#constructor" id="_ref_1752"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-native-error-types-used-in-this-standard-referenceerror" id="_ref_165"><a href="#sec-native-error-types-used-in-this-standard-referenceerror">20.5.5.3</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-reflect-object" id="_ref_1753"><a href="#sec-reflect-object">%Reflect%</a></emu-xref></td><td><code>Reflect</code></td><td>The <code>Reflect</code> object (<emu-xref href="#sec-reflect-object" id="_ref_166"><a href="#sec-reflect-object">28.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-regexp-constructor" id="_ref_1754"><a href="#sec-regexp-constructor">%RegExp%</a></emu-xref></td><td><code>RegExp</code></td><td>The RegExp <emu-xref href="#constructor" id="_ref_1755"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-regexp-constructor" id="_ref_167"><a href="#sec-regexp-constructor">22.2.4</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%regexpstringiteratorprototype%-object" id="_ref_1756"><a href="#sec-%regexpstringiteratorprototype%-object">%RegExpStringIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-regexp-string-iterator-objects" id="_ref_1757"><a href="#sec-regexp-string-iterator-objects">RegExp String Iterator objects</a></emu-xref> (<emu-xref href="#sec-regexp-string-iterator-objects" id="_ref_168"><a href="#sec-regexp-string-iterator-objects">22.2.9</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-set-constructor" id="_ref_1758"><a href="#sec-set-constructor">%Set%</a></emu-xref></td><td><code>Set</code></td><td>The Set <emu-xref href="#constructor" id="_ref_1759"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-set-constructor" id="_ref_169"><a href="#sec-set-constructor">24.2.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%setiteratorprototype%-object" id="_ref_1760"><a href="#sec-%setiteratorprototype%-object">%SetIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-set-iterator-objects" id="_ref_1761"><a href="#sec-set-iterator-objects">Set Iterator objects</a></emu-xref> (<emu-xref href="#sec-set-iterator-objects" id="_ref_170"><a href="#sec-set-iterator-objects">24.2.6</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-sharedarraybuffer-constructor" id="_ref_1762"><a href="#sec-sharedarraybuffer-constructor">%SharedArrayBuffer%</a></emu-xref></td><td><code>SharedArrayBuffer</code></td><td>The SharedArrayBuffer <emu-xref href="#constructor" id="_ref_1763"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-sharedarraybuffer-constructor" id="_ref_171"><a href="#sec-sharedarraybuffer-constructor">25.2.3</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-string-constructor" id="_ref_1764"><a href="#sec-string-constructor">%String%</a></emu-xref></td><td><code>String</code></td><td>The String <emu-xref href="#constructor" id="_ref_1765"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-string-constructor" id="_ref_172"><a href="#sec-string-constructor">22.1.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%stringiteratorprototype%-object" id="_ref_1766"><a href="#sec-%stringiteratorprototype%-object">%StringIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of <emu-xref href="#sec-string-iterator-objects" id="_ref_1767"><a href="#sec-string-iterator-objects">String Iterator objects</a></emu-xref> (<emu-xref href="#sec-string-iterator-objects" id="_ref_173"><a href="#sec-string-iterator-objects">22.1.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-symbol-constructor" id="_ref_1768"><a href="#sec-symbol-constructor">%Symbol%</a></emu-xref></td><td><code>Symbol</code></td><td>The Symbol <emu-xref href="#constructor" id="_ref_1769"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-symbol-constructor" id="_ref_174"><a href="#sec-symbol-constructor">20.4.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-native-error-types-used-in-this-standard-syntaxerror" id="_ref_1770"><a href="#sec-native-error-types-used-in-this-standard-syntaxerror">%SyntaxError%</a></emu-xref></td><td><code>SyntaxError</code></td><td>The SyntaxError <emu-xref href="#constructor" id="_ref_1771"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-native-error-types-used-in-this-standard-syntaxerror" id="_ref_175"><a href="#sec-native-error-types-used-in-this-standard-syntaxerror">20.5.5.4</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%throwtypeerror%" id="_ref_1772"><a href="#sec-%throwtypeerror%">%ThrowTypeError%</a></emu-xref></td><td></td><td>A <emu-xref href="#function-object" id="_ref_1773"><a href="#function-object">function object</a></emu-xref> that unconditionally throws a new instance of <emu-xref href="#sec-native-error-types-used-in-this-standard-typeerror" id="_ref_1774"><a href="#sec-native-error-types-used-in-this-standard-typeerror">%TypeError%</a></emu-xref></td></tr><tr><td><emu-xref href="#sec-%typedarray%-intrinsic-object" id="_ref_1775"><a href="#sec-%typedarray%-intrinsic-object">%TypedArray%</a></emu-xref></td><td></td><td>The super class of all typed Array <emu-xref href="#constructor" id="_ref_1776"><a href="#constructor">constructors</a></emu-xref> (<emu-xref href="#sec-%typedarray%-intrinsic-object" id="_ref_176"><a href="#sec-%typedarray%-intrinsic-object">23.2.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-native-error-types-used-in-this-standard-typeerror" id="_ref_1777"><a href="#sec-native-error-types-used-in-this-standard-typeerror">%TypeError%</a></emu-xref></td><td><code>TypeError</code></td><td>The TypeError <emu-xref href="#constructor" id="_ref_1778"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-native-error-types-used-in-this-standard-typeerror" id="_ref_177"><a href="#sec-native-error-types-used-in-this-standard-typeerror">20.5.5.5</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1779"><a href="#sec-typedarray-objects">%Uint8Array%</a></emu-xref></td><td><code>Uint8Array</code></td><td>The Uint8Array <emu-xref href="#constructor" id="_ref_1780"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_178"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1781"><a href="#sec-typedarray-objects">%Uint8ClampedArray%</a></emu-xref></td><td><code>Uint8ClampedArray</code></td><td>The Uint8ClampedArray <emu-xref href="#constructor" id="_ref_1782"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_179"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1783"><a href="#sec-typedarray-objects">%Uint16Array%</a></emu-xref></td><td><code>Uint16Array</code></td><td>The Uint16Array <emu-xref href="#constructor" id="_ref_1784"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_180"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-typedarray-objects" id="_ref_1785"><a href="#sec-typedarray-objects">%Uint32Array%</a></emu-xref></td><td><code>Uint32Array</code></td><td>The Uint32Array <emu-xref href="#constructor" id="_ref_1786"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-typedarray-objects" id="_ref_181"><a href="#sec-typedarray-objects">23.2</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-native-error-types-used-in-this-standard-urierror" id="_ref_1787"><a href="#sec-native-error-types-used-in-this-standard-urierror">%URIError%</a></emu-xref></td><td><code>URIError</code></td><td>The URIError <emu-xref href="#constructor" id="_ref_1788"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-native-error-types-used-in-this-standard-urierror" id="_ref_182"><a href="#sec-native-error-types-used-in-this-standard-urierror">20.5.5.6</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-weakmap-constructor" id="_ref_1789"><a href="#sec-weakmap-constructor">%WeakMap%</a></emu-xref></td><td><code>WeakMap</code></td><td>The WeakMap <emu-xref href="#constructor" id="_ref_1790"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-weakmap-constructor" id="_ref_183"><a href="#sec-weakmap-constructor">24.3.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-weak-ref-constructor" id="_ref_1791"><a href="#sec-weak-ref-constructor">%WeakRef%</a></emu-xref></td><td><code>WeakRef</code></td><td>The <emu-xref href="#sec-weak-ref-constructor" id="_ref_1792"><a href="#sec-weak-ref-constructor">WeakRef</a></emu-xref> <emu-xref href="#constructor" id="_ref_1793"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-weak-ref-constructor" id="_ref_184"><a href="#sec-weak-ref-constructor">26.1.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-weakset-constructor" id="_ref_1794"><a href="#sec-weakset-constructor">%WeakSet%</a></emu-xref></td><td><code>WeakSet</code></td><td>The WeakSet <emu-xref href="#constructor" id="_ref_1795"><a href="#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-weakset-constructor" id="_ref_185"><a href="#sec-weakset-constructor">24.4.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-%wrapforvaliditeratorprototype%-object" id="_ref_1796"><a href="#sec-%wrapforvaliditeratorprototype%-object">%WrapForValidIteratorPrototype%</a></emu-xref></td><td></td><td>The prototype of wrapped <emu-xref href="#sec-iterator-interface" id="_ref_1797"><a href="#sec-iterator-interface">iterator objects</a></emu-xref> returned by Iterator.from (<emu-xref href="#sec-%wrapforvaliditeratorprototype%-object" id="_ref_186"><a href="#sec-%wrapforvaliditeratorprototype%-object">27.1.3.2.2.1</a></emu-xref>)</td></tr></tbody></table>

Note

Additional entries in [Table 100](#table-additional-well-known-intrinsic-objects).


# 6.2 ECMAScript Specification Types

A specification type corresponds to meta-values that are used within algorithms to describe the semantics of ECMAScript language constructs and [ECMAScript language types](#sec-ecmascript-language-types). The specification types include [Reference Record](#sec-reference-record-specification-type), [List](#sec-list-and-record-specification-type), [Completion Record](#sec-completion-record-specification-type), [Property Descriptor](#sec-property-descriptor-specification-type), [Environment Record](#sec-environment-records), [Abstract Closure](#sec-abstract-closure), and [Data Block](#sec-data-blocks). Specification type values are specification artefacts that do not necessarily correspond to any specific entity within an ECMAScript implementation. Specification type values may be used to describe intermediate results of ECMAScript expression evaluation but such values cannot be stored as properties of objects or values of ECMAScript language variables.


# 6.2.1 The Enum Specification Type

Enums are values which are internal to the specification and not directly observable from ECMAScript code. Enums are denoted using a sans-serif typeface. For instance, a [Completion Record](#sec-completion-record-specification-type)'s _\[\[Type\]\]_ field takes on values like normal, return, or throw. Enums have no characteristics other than their name. The name of an enum serves no purpose other than to distinguish it from other enums, and implies nothing about its usage or meaning in context.


# 6.2.2 The List and Record Specification Types

The List type is used to explain the evaluation of argument lists (see [13.3.8](#sec-argument-lists)) in `new` expressions, in function calls, and in other algorithms where a simple ordered list of values is needed. Values of the List type are simply ordered sequences of list elements containing the individual values. These sequences may be of any length. The elements of a list may be randomly accessed using 0-origin indices. For notational convenience an array-like syntax can be used to access List elements. For example, _arguments_\[2\] is shorthand for saying the 3<sup>rd</sup> element of the List _arguments_.

When an algorithm iterates over the elements of a List without specifying an order, the order used is the order of the elements in the List.

For notational convenience within this specification, a literal syntax can be used to express a new List value. For example, « 1, 2 » defines a List value that has two elements each of which is initialized to a specific value. A new empty List can be expressed as « ».

In this specification, the phrase "the list-concatenation of _A_, _B_, ..." (where each argument is a possibly empty List) denotes a new List value whose elements are the concatenation of the elements (in order) of each of the arguments (in order).

As applied to a List of Strings, the phrase "sorted according to lexicographic code unit order" means sorting by the numeric value of each code unit up to the length of the shorter string, and sorting the shorter string before the longer string if all are equal, as described in the abstract operation [IsLessThan](#sec-islessthan).

The Record type is used to describe data aggregations within the algorithms of this specification. A Record type value consists of one or more named fields. The value of each field is an [ECMAScript language value](#sec-ecmascript-language-types) or specification value. Field names are always enclosed in double brackets, for example _\[\[Value\]\]_.

For notational convenience within this specification, an object literal-like syntax can be used to express a Record value. For example, { _\[\[Field1\]\]_: 42, _\[\[Field2\]\]_: false, _\[\[Field3\]\]_: empty } defines a Record value that has three fields, each of which is initialized to a specific value. Field name order is not significant. Any fields that are not explicitly listed are considered to be absent.

In specification text and algorithms, dot notation may be used to refer to a specific field of a Record value. For example, if R is the record shown in the previous paragraph then R._\[\[Field2\]\]_ is shorthand for “the field of R named _\[\[Field2\]\]_”.

Schema for commonly used Record field combinations may be named, and that name may be used as a prefix to a literal Record value to identify the specific kind of aggregations that is being described. For example: PropertyDescriptor { _\[\[Value\]\]_: 42, _\[\[Writable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 6.2.3 The Set and Relation Specification Types

The *Set* type is used to explain a collection of unordered elements for use in the [memory model](#sec-memory-model). It is distinct from the ECMAScript collection type of the same name. To disambiguate, instances of the ECMAScript collection are consistently referred to as "[Set objects](#sec-set-objects)" within this specification. Values of the Set type are simple collections of elements, where no element appears more than once. Elements may be added to and removed from Sets. Sets may be unioned, intersected, or subtracted from each other.

The Relation type is used to explain constraints on Sets. Values of the Relation type are Sets of ordered pairs of values from its value domain. For example, a Relation on [Memory events](#sec-memory-model-fundamentals) is a set of ordered pairs of [Memory events](#sec-memory-model-fundamentals). For a Relation _R_ and two values _a_ and _b_ in the value domain of _R_, _a_ _R_ _b_ is shorthand for saying the ordered pair (_a_, _b_) is a member of _R_. A Relation is the least Relation with respect to some conditions when it is the smallest Relation that satisfies those conditions.

A strict partial order is a Relation value _R_ that satisfies the following.

-   For all _a_, _b_, and _c_ in _R_'s domain:
    
    -   It is not the case that _a_ _R_ _a_, and
    -   If _a_ _R_ _b_ and _b_ _R_ _c_, then _a_ _R_ _c_.

Note 1

The two properties above are called irreflexivity and transitivity, respectively.

A strict total order is a Relation value _R_ that satisfies the following.

-   For all _a_, _b_, and _c_ in _R_'s domain:
    
    -   _a_ is _b_ or _a_ _R_ _b_ or _b_ _R_ _a_, and
    -   It is not the case that _a_ _R_ _a_, and
    -   If _a_ _R_ _b_ and _b_ _R_ _c_, then _a_ _R_ _c_.

Note 2

The three properties above are called totality, irreflexivity, and transitivity, respectively.


# 6.2.4 The Completion Record Specification Type

The Completion Record specification type is used to explain the runtime propagation of values and control flow such as the behaviour of statements (`break`, `continue`, `return` and `throw`) that perform nonlocal transfers of control.

Completion Records have the fields defined in [Table 7](#table-completion-record-fields).

Table 7: [Completion Record](#sec-completion-record-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Type]]</var></td><td><emu-const>normal</emu-const>, <emu-const>break</emu-const>, <emu-const>continue</emu-const>, <emu-const>return</emu-const>, or <emu-const>throw</emu-const></td><td>The type of completion that occurred.</td></tr><tr><td><var class="field">[[Value]]</var></td><td>any value except a <emu-xref href="#sec-completion-record-specification-type" id="_ref_1814"><a href="#sec-completion-record-specification-type">Completion Record</a></emu-xref></td><td>The value that was produced.</td></tr><tr><td><var class="field">[[Target]]</var></td><td>a String or <emu-const>empty</emu-const></td><td>The target label for directed control transfers.</td></tr></tbody></table>

The following shorthand terms are sometimes used to refer to Completion Records.

-   normal completion refers to any Completion Record with a _\[\[Type\]\]_ value of normal.
-   break completion refers to any Completion Record with a _\[\[Type\]\]_ value of break.
-   continue completion refers to any Completion Record with a _\[\[Type\]\]_ value of continue.
-   return completion refers to any Completion Record with a _\[\[Type\]\]_ value of return.
-   throw completion refers to any Completion Record with a _\[\[Type\]\]_ value of throw.
-   abrupt completion refers to any Completion Record with a _\[\[Type\]\]_ value other than normal.
-   a normal completion containing some type of value refers to a normal completion that has a value of that type in its _\[\[Value\]\]_ field.

Callable objects that are defined in this specification only return a normal completion or a throw completion. Returning any other kind of Completion Record is considered an editorial error.

[Implementation-defined](#implementation-defined) callable objects must return either a normal completion or a throw completion.


# 6.2.4.1 NormalCompletion ( _value_ )

The abstract operation NormalCompletion takes argument _value_ (any value except a [Completion Record](#sec-completion-record-specification-type)) and returns a [normal completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: normal, _\[\[Value\]\]_: _value_, _\[\[Target\]\]_: empty }.


# 6.2.4.2 ThrowCompletion ( _value_ )

The abstract operation ThrowCompletion takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: throw, _\[\[Value\]\]_: _value_, _\[\[Target\]\]_: empty }.


# 6.2.4.3 ReturnCompletion ( _value_ )

The abstract operation ReturnCompletion takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a [return completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: return, _\[\[Value\]\]_: _value_, _\[\[Target\]\]_: empty }.


# 6.2.4.4 UpdateEmpty ( _completionRecord_, _value_ )

The abstract operation UpdateEmpty takes arguments _completionRecord_ (a [Completion Record](#sec-completion-record-specification-type)) and _value_ (any value except a [Completion Record](#sec-completion-record-specification-type)) and returns a [Completion Record](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): If _completionRecord_ is either a [return completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type), then _completionRecord_._\[\[Value\]\]_ is not empty.
2.  If _completionRecord_._\[\[Value\]\]_ is not empty, return ? _completionRecord_.
3.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: _completionRecord_._\[\[Type\]\]_, _\[\[Value\]\]_: _value_, _\[\[Target\]\]_: _completionRecord_._\[\[Target\]\]_ }.


# 6.2.5 The Reference Record Specification Type

The Reference Record type is used to explain the behaviour of such operators as `delete`, `typeof`, the assignment operators, the `super` [keyword](#sec-keywords-and-reserved-words) and other language features. For example, the left-hand operand of an assignment is expected to produce a Reference Record.

A Reference Record is a resolved name or (possibly not-yet-resolved) property binding; its fields are defined by [Table 8](#table-reference-record-fields).

Table 8: [Reference Record](#sec-reference-record-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td oldids="sec-getbase,ao-getbase"><span id="ao-getbase"></span><span id="sec-getbase"></span><var class="field">[[Base]]</var></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_1834"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>, an <emu-xref href="#sec-environment-records" id="_ref_1835"><a href="#sec-environment-records">Environment Record</a></emu-xref>, or <emu-const>unresolvable</emu-const></td><td>The value or <emu-xref href="#sec-environment-records" id="_ref_1836"><a href="#sec-environment-records">Environment Record</a></emu-xref> which holds the binding. A <var class="field">[[Base]]</var> of <emu-const>unresolvable</emu-const> indicates that the binding could not be resolved.</td></tr><tr><td oldids="sec-getreferencedname,ao-getreferencedname"><span id="ao-getreferencedname"></span><span id="sec-getreferencedname"></span><var class="field">[[ReferencedName]]</var></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_1837"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref> or a <emu-xref href="#sec-private-names" id="_ref_1838"><a href="#sec-private-names">Private Name</a></emu-xref></td><td>The name of the binding. Always a String if <var class="field">[[Base]]</var> value is an <emu-xref href="#sec-environment-records" id="_ref_1839"><a href="#sec-environment-records">Environment Record</a></emu-xref>. Otherwise, may be an <emu-xref href="#sec-ecmascript-language-types" id="_ref_1840"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref> other than a String or a Symbol until <emu-xref aoid="ToPropertyKey" id="_ref_1841"><a href="#sec-topropertykey">ToPropertyKey</a></emu-xref> is performed.</td></tr><tr><td oldids="sec-isstrictreference,ao-isstrictreference"><span id="ao-isstrictreference"></span><span id="sec-isstrictreference"></span><var class="field">[[Strict]]</var></td><td>a Boolean</td><td><emu-val>true</emu-val> if the <emu-xref href="#sec-reference-record-specification-type" id="_ref_1842"><a href="#sec-reference-record-specification-type">Reference Record</a></emu-xref> originated in <emu-xref href="#sec-strict-mode-code" id="_ref_1843"><a href="#sec-strict-mode-code">strict mode code</a></emu-xref>, <emu-val>false</emu-val> otherwise.</td></tr><tr><td><var class="field">[[ThisValue]]</var></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_1844"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref> or <emu-const>empty</emu-const></td><td>If not <emu-const>empty</emu-const>, the <emu-xref href="#sec-reference-record-specification-type" id="_ref_1845"><a href="#sec-reference-record-specification-type">Reference Record</a></emu-xref> represents a property binding that was expressed using the <code>super</code> <emu-xref href="#sec-keywords-and-reserved-words" id="_ref_1846"><a href="#sec-keywords-and-reserved-words">keyword</a></emu-xref>; it is called a <dfn id="super-reference-record" oldids="super-reference" variants="Super Reference Records" tabindex="-1"><span id="super-reference"></span>Super Reference Record</dfn> and its <var class="field">[[Base]]</var> value will never be an <emu-xref href="#sec-environment-records" id="_ref_1847"><a href="#sec-environment-records">Environment Record</a></emu-xref>. In that case, the <var class="field">[[ThisValue]]</var> field holds the <emu-val>this</emu-val> value at the time the <emu-xref href="#sec-reference-record-specification-type" id="_ref_1848"><a href="#sec-reference-record-specification-type">Reference Record</a></emu-xref> was created.</td></tr></tbody></table>

The following [abstract operations](#sec-algorithm-conventions-abstract-operations) are used in this specification to operate upon Reference Records:


# 6.2.5.1 IsPropertyReference ( _V_ )

The abstract operation IsPropertyReference takes argument _V_ (a [Reference Record](#sec-reference-record-specification-type)) and returns a Boolean. It performs the following steps when called:

1.  If _V_._\[\[Base\]\]_ is unresolvable, return false.
2.  If _V_._\[\[Base\]\]_ is an [Environment Record](#sec-environment-records), return false; otherwise return true.


# 6.2.5.2 IsUnresolvableReference ( _V_ )

The abstract operation IsUnresolvableReference takes argument _V_ (a [Reference Record](#sec-reference-record-specification-type)) and returns a Boolean. It performs the following steps when called:

1.  If _V_._\[\[Base\]\]_ is unresolvable, return true; otherwise return false.


# 6.2.5.3 IsSuperReference ( _V_ )

The abstract operation IsSuperReference takes argument _V_ (a [Reference Record](#sec-reference-record-specification-type)) and returns a Boolean. It performs the following steps when called:

1.  If _V_._\[\[ThisValue\]\]_ is not empty, return true; otherwise return false.


# 6.2.5.4 IsPrivateReference ( _V_ )

The abstract operation IsPrivateReference takes argument _V_ (a [Reference Record](#sec-reference-record-specification-type)) and returns a Boolean. It performs the following steps when called:

1.  If _V_._\[\[ReferencedName\]\]_ is a [Private Name](#sec-private-names), return true; otherwise return false.


# 6.2.5.5 GetValue ( _V_ )

The abstract operation GetValue takes argument _V_ (a [Reference Record](#sec-reference-record-specification-type) or an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _V_ is not a [Reference Record](#sec-reference-record-specification-type), return _V_.
2.  If [IsUnresolvableReference](#sec-isunresolvablereference)(_V_) is true, throw a ReferenceError exception.
3.  If [IsPropertyReference](#sec-ispropertyreference)(_V_) is true, then
    1.  Let _baseObj_ be ? [ToObject](#sec-toobject)(_V_._\[\[Base\]\]_).
    2.  If [IsPrivateReference](#sec-isprivatereference)(_V_) is true, then
        1.  Return ? [PrivateGet](#sec-privateget)(_baseObj_, _V_._\[\[ReferencedName\]\]_).
    3.  If _V_._\[\[ReferencedName\]\]_ is not a [property key](#property-key), then
        1.  Set _V_._\[\[ReferencedName\]\]_ to ? [ToPropertyKey](#sec-topropertykey)(_V_._\[\[ReferencedName\]\]_).
    4.  Return ? _baseObj_._\[\[Get\]\]_(_V_._\[\[ReferencedName\]\]_, [GetThisValue](#sec-getthisvalue)(_V_)).
4.  Else,
    1.  Let _base_ be _V_._\[\[Base\]\]_.
    2.  [Assert](#assert): _base_ is an [Environment Record](#sec-environment-records).
    3.  Return ? _base_.GetBindingValue(_V_._\[\[ReferencedName\]\]_, _V_._\[\[Strict\]\]_) (see [9.1](#sec-environment-records)).

Note

The object that may be created in step [3.a](#step-getvalue-toobject) is not accessible outside of the above abstract operation and the [ordinary object](#ordinary-object) _\[\[Get\]\]_ internal method. An implementation might choose to avoid the actual creation of the object.


# 6.2.5.6 PutValue ( _V_, _W_ )

The abstract operation PutValue takes arguments _V_ (a [Reference Record](#sec-reference-record-specification-type) or an [ECMAScript language value](#sec-ecmascript-language-types)) and _W_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _V_ is not a [Reference Record](#sec-reference-record-specification-type), throw a ReferenceError exception.
2.  If [IsUnresolvableReference](#sec-isunresolvablereference)(_V_) is true, then
    1.  If _V_._\[\[Strict\]\]_ is true, throw a ReferenceError exception.
    2.  Let _globalObj_ be [GetGlobalObject](#sec-getglobalobject)().
    3.  Perform ? [Set](#sec-set-o-p-v-throw)(_globalObj_, _V_._\[\[ReferencedName\]\]_, _W_, false).
    4.  Return unused.
3.  If [IsPropertyReference](#sec-ispropertyreference)(_V_) is true, then
    1.  Let _baseObj_ be ? [ToObject](#sec-toobject)(_V_._\[\[Base\]\]_).
    2.  If [IsPrivateReference](#sec-isprivatereference)(_V_) is true, then
        1.  Return ? [PrivateSet](#sec-privateset)(_baseObj_, _V_._\[\[ReferencedName\]\]_, _W_).
    3.  If _V_._\[\[ReferencedName\]\]_ is not a [property key](#property-key), then
        1.  Set _V_._\[\[ReferencedName\]\]_ to ? [ToPropertyKey](#sec-topropertykey)(_V_._\[\[ReferencedName\]\]_).
    4.  Let _succeeded_ be ? _baseObj_._\[\[Set\]\]_(_V_._\[\[ReferencedName\]\]_, _W_, [GetThisValue](#sec-getthisvalue)(_V_)).
    5.  If _succeeded_ is false and _V_._\[\[Strict\]\]_ is true, throw a TypeError exception.
    6.  Return unused.
4.  Else,
    1.  Let _base_ be _V_._\[\[Base\]\]_.
    2.  [Assert](#assert): _base_ is an [Environment Record](#sec-environment-records).
    3.  Return ? _base_.SetMutableBinding(_V_._\[\[ReferencedName\]\]_, _W_, _V_._\[\[Strict\]\]_) (see [9.1](#sec-environment-records)).

Note

The object that may be created in step [3.a](#step-putvalue-toobject) is not accessible outside of the above abstract operation and the [ordinary object](#ordinary-object) _\[\[Set\]\]_ internal method. An implementation might choose to avoid the actual creation of that object.


# 6.2.5.7 GetThisValue ( _V_ )

The abstract operation GetThisValue takes argument _V_ (a [Reference Record](#sec-reference-record-specification-type)) and returns an [ECMAScript language value](#sec-ecmascript-language-types). It performs the following steps when called:

1.  [Assert](#assert): [IsPropertyReference](#sec-ispropertyreference)(_V_) is true.
2.  If [IsSuperReference](#sec-issuperreference)(_V_) is true, return _V_._\[\[ThisValue\]\]_; otherwise return _V_._\[\[Base\]\]_.


# 6.2.5.8 InitializeReferencedBinding ( _V_, _W_ )

The abstract operation InitializeReferencedBinding takes arguments _V_ (a [Reference Record](#sec-reference-record-specification-type)) and _W_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): [IsUnresolvableReference](#sec-isunresolvablereference)(_V_) is false.
2.  Let _base_ be _V_._\[\[Base\]\]_.
3.  [Assert](#assert): _base_ is an [Environment Record](#sec-environment-records).
4.  Return ? _base_.InitializeBinding(_V_._\[\[ReferencedName\]\]_, _W_).


# 6.2.5.9 MakePrivateReference ( _baseValue_, _privateIdentifier_ )

The abstract operation MakePrivateReference takes arguments _baseValue_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _privateIdentifier_ (a String) and returns a [Reference Record](#sec-reference-record-specification-type). It performs the following steps when called:

1.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
2.  [Assert](#assert): _privateEnv_ is not null.
3.  Let _privateName_ be [ResolvePrivateIdentifier](#sec-resolve-private-identifier)(_privateEnv_, _privateIdentifier_).
4.  Return the [Reference Record](#sec-reference-record-specification-type) { _\[\[Base\]\]_: _baseValue_, _\[\[ReferencedName\]\]_: _privateName_, _\[\[Strict\]\]_: true, _\[\[ThisValue\]\]_: empty }.


# 6.2.6 The Property Descriptor Specification Type

The Property Descriptor type is used to explain the manipulation and reification of Object property attributes. A Property Descriptor is a [Record](#sec-list-and-record-specification-type) with zero or more fields, where each field's name is an attribute name and its value is a corresponding attribute value as specified in [6.1.7.1](#sec-property-attributes). The schema name used within this specification to tag literal descriptions of Property Descriptor records is “PropertyDescriptor”.

Property Descriptor values may be further classified as data Property Descriptors and accessor Property Descriptors based upon the existence or use of certain fields. A data Property Descriptor is one that includes any fields named either _\[\[Value\]\]_ or _\[\[Writable\]\]_. An accessor Property Descriptor is one that includes any fields named either _\[\[Get\]\]_ or _\[\[Set\]\]_. Any Property Descriptor may have fields named _\[\[Enumerable\]\]_ and _\[\[Configurable\]\]_. A Property Descriptor value may not be both a data Property Descriptor and an accessor Property Descriptor; however, it may be neither (in which case it is a generic Property Descriptor). A fully populated Property Descriptor is one that is either an accessor Property Descriptor or a data Property Descriptor and that has all of the corresponding fields defined in [Table 3](#table-object-property-attributes).

The following [abstract operations](#sec-algorithm-conventions-abstract-operations) are used in this specification to operate upon Property Descriptor values:


# 6.2.6.1 IsAccessorDescriptor ( _Desc_ )

The abstract operation IsAccessorDescriptor takes argument _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns a Boolean. It performs the following steps when called:

1.  If _Desc_ has a _\[\[Get\]\]_ field, return true.
2.  If _Desc_ has a _\[\[Set\]\]_ field, return true.
3.  Return false.


# 6.2.6.2 IsDataDescriptor ( _Desc_ )

The abstract operation IsDataDescriptor takes argument _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns a Boolean. It performs the following steps when called:

1.  If _Desc_ has a _\[\[Value\]\]_ field, return true.
2.  If _Desc_ has a _\[\[Writable\]\]_ field, return true.
3.  Return false.


# 6.2.6.3 IsGenericDescriptor ( _Desc_ )

The abstract operation IsGenericDescriptor takes argument _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns a Boolean. It performs the following steps when called:

1.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_Desc_) is true, return false.
2.  If [IsDataDescriptor](#sec-isdatadescriptor)(_Desc_) is true, return false.
3.  Return true.


# 6.2.6.4 FromPropertyDescriptor ( _Desc_ )

The abstract operation FromPropertyDescriptor takes argument _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined) and returns an Object or undefined. It performs the following steps when called:

1.  If _Desc_ is undefined, return undefined.
2.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
3.  [Assert](#assert): _obj_ is an extensible [ordinary object](#ordinary-object) with no own properties.
4.  If _Desc_ has a _\[\[Value\]\]_ field, then
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "value", _Desc_._\[\[Value\]\]_).
5.  If _Desc_ has a _\[\[Writable\]\]_ field, then
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "writable", _Desc_._\[\[Writable\]\]_).
6.  If _Desc_ has a _\[\[Get\]\]_ field, then
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "get", _Desc_._\[\[Get\]\]_).
7.  If _Desc_ has a _\[\[Set\]\]_ field, then
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "set", _Desc_._\[\[Set\]\]_).
8.  If _Desc_ has an _\[\[Enumerable\]\]_ field, then
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "enumerable", _Desc_._\[\[Enumerable\]\]_).
9.  If _Desc_ has a _\[\[Configurable\]\]_ field, then
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "configurable", _Desc_._\[\[Configurable\]\]_).
10.  Return _obj_.


# 6.2.6.5 ToPropertyDescriptor ( _Obj_ )

The abstract operation ToPropertyDescriptor takes argument _Obj_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Property Descriptor](#sec-property-descriptor-specification-type) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _Obj_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _desc_ be a new [Property Descriptor](#sec-property-descriptor-specification-type) that initially has no fields.
3.  Let _hasEnumerable_ be ? [HasProperty](#sec-hasproperty)(_Obj_, "enumerable").
4.  If _hasEnumerable_ is true, then
    1.  Let _enumerable_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_Obj_, "enumerable")).
    2.  Set _desc_._\[\[Enumerable\]\]_ to _enumerable_.
5.  Let _hasConfigurable_ be ? [HasProperty](#sec-hasproperty)(_Obj_, "configurable").
6.  If _hasConfigurable_ is true, then
    1.  Let _configurable_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_Obj_, "configurable")).
    2.  Set _desc_._\[\[Configurable\]\]_ to _configurable_.
7.  Let _hasValue_ be ? [HasProperty](#sec-hasproperty)(_Obj_, "value").
8.  If _hasValue_ is true, then
    1.  Let _value_ be ? [Get](#sec-get-o-p)(_Obj_, "value").
    2.  Set _desc_._\[\[Value\]\]_ to _value_.
9.  Let _hasWritable_ be ? [HasProperty](#sec-hasproperty)(_Obj_, "writable").
10.  If _hasWritable_ is true, then
     1.  Let _writable_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_Obj_, "writable")).
     2.  Set _desc_._\[\[Writable\]\]_ to _writable_.
11.  Let _hasGet_ be ? [HasProperty](#sec-hasproperty)(_Obj_, "get").
12.  If _hasGet_ is true, then
     1.  Let _getter_ be ? [Get](#sec-get-o-p)(_Obj_, "get").
     2.  If [IsCallable](#sec-iscallable)(_getter_) is false and _getter_ is not undefined, throw a TypeError exception.
     3.  Set _desc_._\[\[Get\]\]_ to _getter_.
13.  Let _hasSet_ be ? [HasProperty](#sec-hasproperty)(_Obj_, "set").
14.  If _hasSet_ is true, then
     1.  Let _setter_ be ? [Get](#sec-get-o-p)(_Obj_, "set").
     2.  If [IsCallable](#sec-iscallable)(_setter_) is false and _setter_ is not undefined, throw a TypeError exception.
     3.  Set _desc_._\[\[Set\]\]_ to _setter_.
15.  If _desc_ has a _\[\[Get\]\]_ field or _desc_ has a _\[\[Set\]\]_ field, then
     1.  If _desc_ has a _\[\[Value\]\]_ field or _desc_ has a _\[\[Writable\]\]_ field, throw a TypeError exception.
16.  Return _desc_.


# 6.2.6.6 CompletePropertyDescriptor ( _Desc_ )

The abstract operation CompletePropertyDescriptor takes argument _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns unused. It performs the following steps when called:

1.  Let _like_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Value\]\]_: undefined, _\[\[Writable\]\]_: false, _\[\[Get\]\]_: undefined, _\[\[Set\]\]_: undefined, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.
2.  If [IsGenericDescriptor](#sec-isgenericdescriptor)(_Desc_) is true or [IsDataDescriptor](#sec-isdatadescriptor)(_Desc_) is true, then
    1.  If _Desc_ does not have a _\[\[Value\]\]_ field, set _Desc_._\[\[Value\]\]_ to _like_._\[\[Value\]\]_.
    2.  If _Desc_ does not have a _\[\[Writable\]\]_ field, set _Desc_._\[\[Writable\]\]_ to _like_._\[\[Writable\]\]_.
3.  Else,
    1.  If _Desc_ does not have a _\[\[Get\]\]_ field, set _Desc_._\[\[Get\]\]_ to _like_._\[\[Get\]\]_.
    2.  If _Desc_ does not have a _\[\[Set\]\]_ field, set _Desc_._\[\[Set\]\]_ to _like_._\[\[Set\]\]_.
4.  If _Desc_ does not have an _\[\[Enumerable\]\]_ field, set _Desc_._\[\[Enumerable\]\]_ to _like_._\[\[Enumerable\]\]_.
5.  If _Desc_ does not have a _\[\[Configurable\]\]_ field, set _Desc_._\[\[Configurable\]\]_ to _like_._\[\[Configurable\]\]_.
6.  Return unused.


# 6.2.7 The Environment Record Specification Type

The [Environment Record](#sec-environment-records) type is used to explain the behaviour of name resolution in nested functions and blocks. This type and the operations upon it are defined in [9.1](#sec-environment-records).


# 6.2.8 The Abstract Closure Specification Type

The Abstract Closure specification type is used to refer to algorithm steps together with a collection of values. Abstract Closures are meta-values and are invoked using function application style such as _closure_(_arg1_, _arg2_). Like [abstract operations](#sec-algorithm-conventions-abstract-operations), invocations perform the algorithm steps described by the Abstract Closure.

In algorithm steps that create an Abstract Closure, values are captured with the verb "capture" followed by a list of aliases. When an Abstract Closure is created, it captures the value that is associated with each alias at that time. In steps that specify the algorithm to be performed when an Abstract Closure is called, each captured value is referred to by the alias that was used to capture the value.

If an Abstract Closure returns a [Completion Record](#sec-completion-record-specification-type), that [Completion Record](#sec-completion-record-specification-type) must be either a [normal completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type).

Abstract Closures are created inline as part of other algorithms, shown in the following example.

1.  Let _addend_ be 41.
2.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_x_) that captures _addend_ and performs the following steps when called:
    1.  Return _x_ + _addend_.
3.  Let _val_ be _closure_(1).
4.  [Assert](#assert): _val_ is 42.


# 6.2.9 Data Blocks

The Data Block specification type is used to describe a distinct and mutable sequence of byte-sized (8 bit) numeric values. A byte value is an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 255. A Data Block value is created with a fixed number of bytes that each have the initial value 0.

For notational convenience within this specification, an array-like syntax can be used to access the individual bytes of a Data Block value. This notation presents a Data Block value as a 0-based integer-indexed sequence of bytes. For example, if _db_ is a 5 byte Data Block value then _db_\[2\] can be used to access its 3<sup>rd</sup> byte.

A data block that resides in memory that can be referenced from multiple [agents](#agent) concurrently is designated a Shared Data Block. A Shared Data Block has an identity (for the purposes of equality testing Shared Data Block values) that is *address-free*: it is tied not to the virtual addresses the block is mapped to in any process, but to the set of locations in memory that the block represents. Two data blocks are equal only if the sets of the locations they contain are equal; otherwise, they are not equal and the intersection of the sets of locations they contain is empty. Finally, Shared Data Blocks can be distinguished from Data Blocks.

The semantics of Shared Data Blocks is defined using [Shared Data Block events](#sec-memory-model-fundamentals) by the [memory model](#sec-memory-model). [Abstract operations](#sec-algorithm-conventions-abstract-operations) below introduce [Shared Data Block events](#sec-memory-model-fundamentals) and act as the interface between evaluation semantics and the event semantics of the [memory model](#sec-memory-model). The events form a [candidate execution](#sec-candidate-executions), on which the [memory model](#sec-memory-model) acts as a filter. Please consult the [memory model](#sec-memory-model) for full semantics.

[Shared Data Block events](#sec-memory-model-fundamentals) are modelled by [Records](#sec-list-and-record-specification-type), defined in the [memory model](#sec-memory-model).

The following [abstract operations](#sec-algorithm-conventions-abstract-operations) are used in this specification to operate upon Data Block values:


# 6.2.9.1 CreateByteDataBlock ( _size_ )

The abstract operation CreateByteDataBlock takes argument _size_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Data Block](#sec-data-blocks) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _size_ > 2<sup>53</sup> - 1, throw a RangeError exception.
2.  Let _db_ be a new [Data Block](#sec-data-blocks) value consisting of _size_ bytes. If it is impossible to create such a [Data Block](#sec-data-blocks), throw a RangeError exception.
3.  Set all of the bytes of _db_ to 0.
4.  Return _db_.


# 6.2.9.2 CreateSharedByteDataBlock ( _size_ )

The abstract operation CreateSharedByteDataBlock takes argument _size_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Shared Data Block](#sec-data-blocks) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _db_ be a new [Shared Data Block](#sec-data-blocks) value consisting of _size_ bytes. If it is impossible to create such a [Shared Data Block](#sec-data-blocks), throw a RangeError exception.
2.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
3.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
4.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
5.  Let _zero_ be « 0 ».
6.  For each index _i_ of _db_, do
    1.  Append [WriteSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: init, _\[\[NoTear\]\]_: true, _\[\[Block\]\]_: _db_, _\[\[ByteIndex\]\]_: _i_, _\[\[ElementSize\]\]_: 1, _\[\[Payload\]\]_: _zero_ } to _eventsRecord_._\[\[EventList\]\]_.
7.  Return _db_.


# 6.2.9.3 CopyDataBlockBytes ( _toBlock_, _toIndex_, _fromBlock_, _fromIndex_, _count_ )

The abstract operation CopyDataBlockBytes takes arguments _toBlock_ (a [Data Block](#sec-data-blocks) or a [Shared Data Block](#sec-data-blocks)), _toIndex_ (a non-negative [integer](#integer)), _fromBlock_ (a [Data Block](#sec-data-blocks) or a [Shared Data Block](#sec-data-blocks)), _fromIndex_ (a non-negative [integer](#integer)), and _count_ (a non-negative [integer](#integer)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _fromBlock_ and _toBlock_ are distinct values.
2.  Let _fromSize_ be the number of bytes in _fromBlock_.
3.  [Assert](#assert): _fromIndex_ + _count_ ≤ _fromSize_.
4.  Let _toSize_ be the number of bytes in _toBlock_.
5.  [Assert](#assert): _toIndex_ + _count_ ≤ _toSize_.
6.  Repeat, while _count_ > 0,
    1.  If _fromBlock_ is a [Shared Data Block](#sec-data-blocks), then
        1.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
        2.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
        3.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
        4.  Let _bytes_ be a [List](#sec-list-and-record-specification-type) whose sole element is a nondeterministically chosen [byte value](#sec-data-blocks).
        5.  NOTE: In implementations, _bytes_ is the result of a non-atomic read instruction on the underlying hardware. The nondeterminism is a semantic prescription of the [memory model](#sec-memory-model) to describe observable behaviour of hardware with weak consistency.
        6.  Let _readEvent_ be [ReadSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: unordered, _\[\[NoTear\]\]_: true, _\[\[Block\]\]_: _fromBlock_, _\[\[ByteIndex\]\]_: _fromIndex_, _\[\[ElementSize\]\]_: 1 }.
        7.  Append _readEvent_ to _eventsRecord_._\[\[EventList\]\]_.
        8.  Append [Chosen Value Record](#sec-chosen-value-records) { _\[\[Event\]\]_: _readEvent_, _\[\[ChosenValue\]\]_: _bytes_ } to _execution_._\[\[ChosenValues\]\]_.
        9.  If _toBlock_ is a [Shared Data Block](#sec-data-blocks), then
            1.  Append [WriteSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: unordered, _\[\[NoTear\]\]_: true, _\[\[Block\]\]_: _toBlock_, _\[\[ByteIndex\]\]_: _toIndex_, _\[\[ElementSize\]\]_: 1, _\[\[Payload\]\]_: _bytes_ } to _eventsRecord_._\[\[EventList\]\]_.
        10.  Else,
             1.  Set _toBlock_\[_toIndex_\] to _bytes_\[0\].
    2.  Else,
        1.  [Assert](#assert): _toBlock_ is not a [Shared Data Block](#sec-data-blocks).
        2.  Set _toBlock_\[_toIndex_\] to _fromBlock_\[_fromIndex_\].
    3.  Set _toIndex_ to _toIndex_ + 1.
    4.  Set _fromIndex_ to _fromIndex_ + 1.
    5.  Set _count_ to _count_ - 1.
7.  Return unused.


# 6.2.10 The PrivateElement Specification Type

The PrivateElement type is a [Record](#sec-list-and-record-specification-type) used in the specification of private class fields, methods, and accessors. Although [Property Descriptors](#sec-property-descriptor-specification-type) are not used for private elements, private fields behave similarly to non-configurable, non-enumerable, writable [data properties](#sec-object-type), private methods behave similarly to non-configurable, non-enumerable, non-writable [data properties](#sec-object-type), and private accessors behave similarly to non-configurable, non-enumerable [accessor properties](#sec-object-type).

Values of the PrivateElement type are [Record](#sec-list-and-record-specification-type) values whose fields are defined by [Table 9](#table-privateelement-fields). Such values are referred to as PrivateElements.

Table 9: [PrivateElement](#sec-privateelement-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Values of the <var class="field">[[Kind]]</var> field for which it is present</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Key]]</var></td><td>All</td><td>a <emu-xref href="#sec-private-names" id="_ref_2027"><a href="#sec-private-names">Private Name</a></emu-xref></td><td>The name of the field, method, or accessor.</td></tr><tr><td><var class="field">[[Kind]]</var></td><td>All</td><td><emu-const>field</emu-const>, <emu-const>method</emu-const>, or <emu-const>accessor</emu-const></td><td>The kind of the element.</td></tr><tr><td><var class="field">[[Value]]</var></td><td><emu-const>field</emu-const> and <emu-const>method</emu-const></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_2028"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref></td><td>The value of the field.</td></tr><tr><td><var class="field">[[Get]]</var></td><td><emu-const>accessor</emu-const></td><td>a <emu-xref href="#function-object" id="_ref_2029"><a href="#function-object">function object</a></emu-xref> or <emu-val>undefined</emu-val></td><td>The getter for a private accessor.</td></tr><tr><td><var class="field">[[Set]]</var></td><td><emu-const>accessor</emu-const></td><td>a <emu-xref href="#function-object" id="_ref_2030"><a href="#function-object">function object</a></emu-xref> or <emu-val>undefined</emu-val></td><td>The setter for a private accessor.</td></tr></tbody></table>


# 6.2.11 The ClassFieldDefinition Record Specification Type

The ClassFieldDefinition type is a [Record](#sec-list-and-record-specification-type) used in the specification of class fields.

Values of the ClassFieldDefinition type are [Record](#sec-list-and-record-specification-type) values whose fields are defined by [Table 10](#table-classfielddefinition-fields). Such values are referred to as ClassFieldDefinition Records.

Table 10: [ClassFieldDefinition Record](#sec-classfielddefinition-record-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Name]]</var></td><td>a <emu-xref href="#sec-private-names" id="_ref_2034"><a href="#sec-private-names">Private Name</a></emu-xref>, a String, or a Symbol</td><td>The name of the field.</td></tr><tr><td><var class="field">[[Initializer]]</var></td><td>an ECMAScript <emu-xref href="#function-object" id="_ref_2035"><a href="#function-object">function object</a></emu-xref> or <emu-const>empty</emu-const></td><td>The initializer of the field, if any.</td></tr></tbody></table>


# 6.2.12 Private Names

The Private Name specification type is used to describe a globally unique value (one which differs from any other Private Name, even if they are otherwise indistinguishable) which represents the key of a private class element (field, method, or accessor). Each Private Name has an immutable _\[\[Description\]\]_ internal slot which [is a String](#sec-ecmascript-language-types-string-type). A Private Name may be installed on any ECMAScript object with [PrivateFieldAdd](#sec-privatefieldadd) or [PrivateMethodOrAccessorAdd](#sec-privatemethodoraccessoradd), and then read or written using [PrivateGet](#sec-privateget) and [PrivateSet](#sec-privateset).


# 6.2.13 The ClassStaticBlockDefinition Record Specification Type

A ClassStaticBlockDefinition Record is a [Record](#sec-list-and-record-specification-type) value used to encapsulate the executable code for a class static initialization block.

ClassStaticBlockDefinition Records have the fields listed in [Table 11](#table-classstaticblockdefinition-record-fields).

Table 11: [ClassStaticBlockDefinition Record](#sec-classstaticblockdefinition-record-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[BodyFunction]]</var></td><td>an ECMAScript <emu-xref href="#function-object" id="_ref_2043"><a href="#function-object">function object</a></emu-xref></td><td>The <emu-xref href="#function-object" id="_ref_2044"><a href="#function-object">function object</a></emu-xref> to be called during static initialization of a class.</td></tr></tbody></table>


# 7 Abstract Operations

These operations are not a part of the ECMAScript language; they are defined here solely to aid the specification of the semantics of the ECMAScript language. Other, more specialized [abstract operations](#sec-algorithm-conventions-abstract-operations) are defined throughout this specification.


# 7.1 Type Conversion

The ECMAScript language implicitly performs automatic type conversion as needed. To clarify the semantics of certain constructs it is useful to define a set of conversion [abstract operations](#sec-algorithm-conventions-abstract-operations). The conversion [abstract operations](#sec-algorithm-conventions-abstract-operations) are polymorphic; they can accept a value of any [ECMAScript language type](#sec-ecmascript-language-types). But no other specification types are used with these operations.

The [BigInt type](#sec-ecmascript-language-types-bigint-type) has no implicit conversions in the ECMAScript language; programmers must call BigInt explicitly to convert values from other types.


# 7.1.1 ToPrimitive ( _input_ \[, _preferredType_ \] )

The abstract operation ToPrimitive takes argument _input_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and optional argument _preferredType_ (string or number) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It converts its _input_ argument to a non-[Object type](#sec-object-type). If an object is capable of converting to more than one primitive type, it may use the optional hint _preferredType_ to favour that type. It performs the following steps when called:

1.  If _input_ [is an Object](#sec-object-type), then
    1.  Let _exoticToPrim_ be ? [GetMethod](#sec-getmethod)(_input_, [%Symbol.toPrimitive%](#sec-well-known-symbols)).
    2.  If _exoticToPrim_ is not undefined, then
        1.  If _preferredType_ is not present, then
            1.  Let _hint_ be "default".
        2.  Else if _preferredType_ is string, then
            1.  Let _hint_ be "string".
        3.  Else,
            1.  [Assert](#assert): _preferredType_ is number.
            2.  Let _hint_ be "number".
        4.  Let _result_ be ? [Call](#sec-call)(_exoticToPrim_, _input_, « _hint_ »).
        5.  If _result_ [is not an Object](#sec-object-type), return _result_.
        6.  Throw a TypeError exception.
    3.  If _preferredType_ is not present, let _preferredType_ be number.
    4.  Return ? [OrdinaryToPrimitive](#sec-ordinarytoprimitive)(_input_, _preferredType_).
2.  Return _input_.

Note

When ToPrimitive is called without a hint, then it generally behaves as if the hint were number. However, objects may over-ride this behaviour by defining a [%Symbol.toPrimitive%](#sec-well-known-symbols) method. Of the objects defined in this specification only Dates (see [21.4.4.45](#sec-date.prototype-%symbol.toprimitive%)) and Symbol objects (see [20.4.3.5](#sec-symbol.prototype-%symbol.toprimitive%)) over-ride the default ToPrimitive behaviour. Dates treat the absence of a hint as if the hint were string.


# 7.1.1.1 OrdinaryToPrimitive ( _O_, _hint_ )

The abstract operation OrdinaryToPrimitive takes arguments _O_ (an Object) and _hint_ (string or number) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _hint_ is string, then
    1.  Let _methodNames_ be « "toString", "valueOf" ».
2.  Else,
    1.  Let _methodNames_ be « "valueOf", "toString" ».
3.  For each element _name_ of _methodNames_, do
    1.  Let _method_ be ? [Get](#sec-get-o-p)(_O_, _name_).
    2.  If [IsCallable](#sec-iscallable)(_method_) is true, then
        1.  Let _result_ be ? [Call](#sec-call)(_method_, _O_).
        2.  If _result_ [is not an Object](#sec-object-type), return _result_.
4.  Throw a TypeError exception.


# 7.1.2 ToBoolean ( _argument_ )

The abstract operation ToBoolean takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It converts _argument_ to a value of type Boolean. It performs the following steps when called:

1.  If _argument_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), return _argument_.
2.  If _argument_ is one of undefined, null, +0<sub>𝔽</sub>, \-0<sub>𝔽</sub>, NaN, 0<sub>ℤ</sub>, or the empty String, return false.
3.  [Normative Optional](#sec-conformance)
    
    If the [host](#host) is a web browser or otherwise supports [The _\[\[IsHTMLDDA\]\]_ Internal Slot](#sec-IsHTMLDDA-internal-slot), then
    1.  If _argument_ [is an Object](#sec-object-type) and _argument_ has an _\[\[IsHTMLDDA\]\]_ internal slot, return false.
4.  Return true.


# 7.1.3 ToNumeric ( _value_ )

The abstract operation ToNumeric takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a Number or a BigInt, or a [throw completion](#sec-completion-record-specification-type). It returns _value_ converted to a Number or a BigInt. It performs the following steps when called:

1.  Let _primValue_ be ? [ToPrimitive](#sec-toprimitive)(_value_, number).
2.  If _primValue_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), return _primValue_.
3.  Return ? [ToNumber](#sec-tonumber)(_primValue_).


# 7.1.4 ToNumber ( _argument_ )

The abstract operation ToNumber takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Number or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to a value of type Number. It performs the following steps when called:

1.  If _argument_ [is a Number](#sec-ecmascript-language-types-number-type), return _argument_.
2.  If _argument_ is either a Symbol or a BigInt, throw a TypeError exception.
3.  If _argument_ is undefined, return NaN.
4.  If _argument_ is either null or false, return +0<sub>𝔽</sub>.
5.  If _argument_ is true, return 1<sub>𝔽</sub>.
6.  If _argument_ [is a String](#sec-ecmascript-language-types-string-type), return [StringToNumber](#sec-stringtonumber)(_argument_).
7.  [Assert](#assert): _argument_ [is an Object](#sec-object-type).
8.  Let _primValue_ be ? [ToPrimitive](#sec-toprimitive)(_argument_, number).
9.  [Assert](#assert): _primValue_ [is not an Object](#sec-object-type).
10.  Return ? [ToNumber](#sec-tonumber)(_primValue_).


# 7.1.4.1 ToNumber Applied to the String Type

The abstract operation [StringToNumber](#sec-stringtonumber) specifies how to convert a String value to a Number value, using the following grammar.


## Syntax

[StringNumericLiteral](#prod-StringNumericLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrNumericLiteral](#prod-StrNumericLiteral) [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpace](#prod-StrWhiteSpace) ::: [StrWhiteSpaceChar](#prod-StrWhiteSpaceChar) [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpaceChar](#prod-StrWhiteSpaceChar) ::: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [StrNumericLiteral](#prod-StrNumericLiteral) ::: [StrDecimalLiteral](#prod-StrDecimalLiteral) [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[~Sep\] [StrDecimalLiteral](#prod-StrDecimalLiteral) ::: [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) + [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) \- [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) ::: Infinity [DecimalDigits](#prod-DecimalDigits)\[~Sep\] . [DecimalDigits](#prod-DecimalDigits)\[~Sep\]opt [ExponentPart](#prod-ExponentPart)\[~Sep\]opt . [DecimalDigits](#prod-DecimalDigits)\[~Sep\] [ExponentPart](#prod-ExponentPart)\[~Sep\]opt [DecimalDigits](#prod-DecimalDigits)\[~Sep\] [ExponentPart](#prod-ExponentPart)\[~Sep\]opt

All grammar symbols not explicitly defined above have the definitions used in the Lexical Grammar for numeric literals ([12.9.3](#sec-literals-numeric-literals))

Note

Some differences should be noted between the syntax of a [StringNumericLiteral](#prod-StringNumericLiteral) and a [NumericLiteral](#prod-NumericLiteral):

-   A [StringNumericLiteral](#prod-StringNumericLiteral) may include leading and/or trailing white space and/or line terminators.
-   A [StringNumericLiteral](#prod-StringNumericLiteral) that is decimal may have any number of leading `0` digits.
-   A [StringNumericLiteral](#prod-StringNumericLiteral) that is decimal may include a `+` or `-` to indicate its sign.
-   A [StringNumericLiteral](#prod-StringNumericLiteral) that is empty or contains only white space is converted to +0<sub>𝔽</sub>.
-   `Infinity` and `-Infinity` are recognized as a [StringNumericLiteral](#prod-StringNumericLiteral) but not as a [NumericLiteral](#prod-NumericLiteral).
-   A [StringNumericLiteral](#prod-StringNumericLiteral) cannot include a [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix).
-   A [StringNumericLiteral](#prod-StringNumericLiteral) cannot include a [NumericLiteralSeparator](#prod-NumericLiteralSeparator).


# 7.1.4.1.1 StringToNumber ( _str_ )

The abstract operation StringToNumber takes argument _str_ (a String) and returns a Number. It performs the following steps when called:

1.  Let _literal_ be [ParseText](#sec-parsetext)(_str_, [StringNumericLiteral](#prod-StringNumericLiteral)).
2.  If _literal_ is a [List](#sec-list-and-record-specification-type) of errors, return NaN.
3.  Return the [StringNumericValue](#sec-runtime-semantics-stringnumericvalue) of _literal_.


# 7.1.4.1.2 Runtime Semantics: StringNumericValue

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) StringNumericValue takes no arguments and returns a Number.

Note

The conversion of a [StringNumericLiteral](#prod-StringNumericLiteral) to a Number value is similar overall to the determination of the [NumericValue](#sec-numericvalue) of a [NumericLiteral](#prod-NumericLiteral) (see [12.9.3](#sec-literals-numeric-literals)), but some of the details are different.

It is defined piecewise over the following productions:

[StringNumericLiteral](#prod-StringNumericLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt

1.  Return +0<sub>𝔽</sub>.

[StringNumericLiteral](#prod-StringNumericLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrNumericLiteral](#prod-StrNumericLiteral) [StrWhiteSpace](#prod-StrWhiteSpace)opt

1.  Return the [StringNumericValue](#sec-runtime-semantics-stringnumericvalue) of [StrNumericLiteral](#prod-StrNumericLiteral).

[StrNumericLiteral](#prod-StrNumericLiteral) ::: [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)

1.  Return [𝔽](#𝔽)(MV of [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)).

[StrDecimalLiteral](#prod-StrDecimalLiteral) ::: \- [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral)

1.  Let _a_ be the [StringNumericValue](#sec-runtime-semantics-stringnumericvalue) of [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral).
2.  If _a_ is +0<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
3.  Return -_a_.

[StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) ::: Infinity

1.  Return +∞<sub>𝔽</sub>.

[StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) ::: [DecimalDigits](#prod-DecimalDigits) . [DecimalDigits](#prod-DecimalDigits)opt [ExponentPart](#prod-ExponentPart)opt

1.  Let _a_ be the MV of the first [DecimalDigits](#prod-DecimalDigits).
2.  If the second [DecimalDigits](#prod-DecimalDigits) is present, then
    1.  Let _b_ be the MV of the second [DecimalDigits](#prod-DecimalDigits).
    2.  Let _n_ be the number of code points in the second [DecimalDigits](#prod-DecimalDigits).
3.  Else,
    1.  Let _b_ be 0.
    2.  Let _n_ be 0.
4.  If [ExponentPart](#prod-ExponentPart) is present, let _e_ be the MV of [ExponentPart](#prod-ExponentPart); otherwise let _e_ be 0.
5.  Return [RoundMVResult](#sec-roundmvresult)((_a_ + (_b_ × 10<sup>\-_n_</sup>)) × 10<sup>_e_</sup>).

[StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) ::: . [DecimalDigits](#prod-DecimalDigits) [ExponentPart](#prod-ExponentPart)opt

1.  Let _b_ be the MV of [DecimalDigits](#prod-DecimalDigits).
2.  If [ExponentPart](#prod-ExponentPart) is present, let _e_ be the MV of [ExponentPart](#prod-ExponentPart); otherwise let _e_ be 0.
3.  Let _n_ be the number of code points in [DecimalDigits](#prod-DecimalDigits).
4.  Return [RoundMVResult](#sec-roundmvresult)(_b_ × 10<sup>_e_ - _n_</sup>).

[StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) ::: [DecimalDigits](#prod-DecimalDigits) [ExponentPart](#prod-ExponentPart)opt

1.  Let _a_ be the MV of [DecimalDigits](#prod-DecimalDigits).
2.  If [ExponentPart](#prod-ExponentPart) is present, let _e_ be the MV of [ExponentPart](#prod-ExponentPart); otherwise let _e_ be 0.
3.  Return [RoundMVResult](#sec-roundmvresult)(_a_ × 10<sup>_e_</sup>).


# 7.1.4.1.3 RoundMVResult ( _n_ )

The abstract operation RoundMVResult takes argument _n_ (a [mathematical value](#mathematical-value)) and returns a Number. It converts _n_ to a Number in an [implementation-defined](#implementation-defined) manner. For the purposes of this abstract operation, a digit is significant if it is not zero or there is a non-zero digit to its left and there is a non-zero digit to its right. For the purposes of this abstract operation, "the [mathematical value](#mathematical-value) denoted by" a representation of a [mathematical value](#mathematical-value) is the inverse of "the decimal representation of" a [mathematical value](#mathematical-value). It performs the following steps when called:

1.  If the decimal representation of _n_ has 20 or fewer significant digits, return [𝔽](#𝔽)(_n_).
2.  Let _option1_ be the [mathematical value](#mathematical-value) denoted by the result of replacing each significant digit in the decimal representation of _n_ after the 20th with a 0 digit.
3.  Let _option2_ be the [mathematical value](#mathematical-value) denoted by the result of replacing each significant digit in the decimal representation of _n_ after the 20th with a 0 digit and then incrementing it at the 20th position (with carrying as necessary).
4.  Let _chosen_ be an [implementation-defined](#implementation-defined) choice of either _option1_ or _option2_.
5.  Return [𝔽](#𝔽)(_chosen_).


# 7.1.5 ToIntegerOrInfinity ( _argument_ )

The abstract operation ToIntegerOrInfinity takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an [integer](#integer), +∞, or -∞, or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to an [integer](#integer) representing its Number value with fractional part truncated, or to +∞ or -∞ when that Number value is infinite. It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return 0.
3.  If _number_ is +∞<sub>𝔽</sub>, return +∞.
4.  If _number_ is \-∞<sub>𝔽</sub>, return -∞.
5.  Return [truncate](#eqn-truncate)([ℝ](#ℝ)(_number_)).

Note

[𝔽](#𝔽)(ToIntegerOrInfinity(_x_)) never returns \-0<sub>𝔽</sub> for any value of _x_. The truncation of the fractional part is performed after converting _x_ to a [mathematical value](#mathematical-value).


# 7.1.6 ToInt32 ( _argument_ )

The abstract operation ToInt32 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>32</sup> [integral Number](#integral-number) values in the [inclusive interval](#inclusive-interval) from [𝔽](#𝔽)(-2<sup>31</sup>) to [𝔽](#𝔽)(2<sup>31</sup> - 1). It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is not [finite](#finite) or _number_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
3.  Let _int_ be [truncate](#eqn-truncate)([ℝ](#ℝ)(_number_)).
4.  Let _int32bit_ be _int_ [modulo](#eqn-modulo) 2<sup>32</sup>.
5.  If _int32bit_ ≥ 2<sup>31</sup>, return [𝔽](#𝔽)(_int32bit_ - 2<sup>32</sup>); otherwise return [𝔽](#𝔽)(_int32bit_).

Note

Given the above definition of ToInt32:

-   The ToInt32 abstract operation is idempotent: if applied to a result that it produced, the second application leaves that value unchanged.
-   ToInt32([ToUint32](#sec-touint32)(_x_)) is the same value as ToInt32(_x_) for all values of _x_. (It is to preserve this latter property that +∞<sub>𝔽</sub> and \-∞<sub>𝔽</sub> are mapped to +0<sub>𝔽</sub>.)
-   ToInt32 maps \-0<sub>𝔽</sub> to +0<sub>𝔽</sub>.


# 7.1.7 ToUint32 ( _argument_ )

The abstract operation ToUint32 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>32</sup> [integral Number](#integral-number) values in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to [𝔽](#𝔽)(2<sup>32</sup> - 1). It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is not [finite](#finite) or _number_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
3.  Let _int_ be [truncate](#eqn-truncate)([ℝ](#ℝ)(_number_)).
4.  Let _int32bit_ be _int_ [modulo](#eqn-modulo) 2<sup>32</sup>.
5.  Return [𝔽](#𝔽)(_int32bit_).

Note

Given the above definition of ToUint32:

-   Step [5](#step-touint32-return) is the only difference between ToUint32 and [ToInt32](#sec-toint32).
-   The ToUint32 abstract operation is idempotent: if applied to a result that it produced, the second application leaves that value unchanged.
-   ToUint32([ToInt32](#sec-toint32)(_x_)) is the same value as ToUint32(_x_) for all values of _x_. (It is to preserve this latter property that +∞<sub>𝔽</sub> and \-∞<sub>𝔽</sub> are mapped to +0<sub>𝔽</sub>.)
-   ToUint32 maps \-0<sub>𝔽</sub> to +0<sub>𝔽</sub>.


# 7.1.8 ToInt16 ( _argument_ )

The abstract operation ToInt16 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>16</sup> [integral Number](#integral-number) values in the [inclusive interval](#inclusive-interval) from [𝔽](#𝔽)(-2<sup>15</sup>) to [𝔽](#𝔽)(2<sup>15</sup> - 1). It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is not [finite](#finite) or _number_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
3.  Let _int_ be [truncate](#eqn-truncate)([ℝ](#ℝ)(_number_)).
4.  Let _int16bit_ be _int_ [modulo](#eqn-modulo) 2<sup>16</sup>.
5.  If _int16bit_ ≥ 2<sup>15</sup>, return [𝔽](#𝔽)(_int16bit_ - 2<sup>16</sup>); otherwise return [𝔽](#𝔽)(_int16bit_).


# 7.1.9 ToUint16 ( _argument_ )

The abstract operation ToUint16 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>16</sup> [integral Number](#integral-number) values in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to [𝔽](#𝔽)(2<sup>16</sup> - 1). It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is not [finite](#finite) or _number_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
3.  Let _int_ be [truncate](#eqn-truncate)([ℝ](#ℝ)(_number_)).
4.  Let _int16bit_ be _int_ [modulo](#eqn-modulo) 2<sup>16</sup>.
5.  Return [𝔽](#𝔽)(_int16bit_).

Note

Given the above definition of ToUint16:

-   The substitution of 2<sup>16</sup> for 2<sup>32</sup> in step [4](#step-touint16-mod) is the only difference between [ToUint32](#sec-touint32) and ToUint16.
-   ToUint16 maps \-0<sub>𝔽</sub> to +0<sub>𝔽</sub>.


# 7.1.10 ToInt8 ( _argument_ )

The abstract operation ToInt8 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>8</sup> [integral Number](#integral-number) values in the [inclusive interval](#inclusive-interval) from \-128<sub>𝔽</sub> to 127<sub>𝔽</sub>. It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is not [finite](#finite) or _number_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
3.  Let _int_ be [truncate](#eqn-truncate)([ℝ](#ℝ)(_number_)).
4.  Let _int8bit_ be _int_ [modulo](#eqn-modulo) 2<sup>8</sup>.
5.  If _int8bit_ ≥ 2<sup>7</sup>, return [𝔽](#𝔽)(_int8bit_ - 2<sup>8</sup>); otherwise return [𝔽](#𝔽)(_int8bit_).


# 7.1.11 ToUint8 ( _argument_ )

The abstract operation ToUint8 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>8</sup> [integral Number](#integral-number) values in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 255<sub>𝔽</sub>. It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is not [finite](#finite) or _number_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
3.  Let _int_ be [truncate](#eqn-truncate)([ℝ](#ℝ)(_number_)).
4.  Let _int8bit_ be _int_ [modulo](#eqn-modulo) 2<sup>8</sup>.
5.  Return [𝔽](#𝔽)(_int8bit_).


# 7.1.12 ToUint8Clamp ( _argument_ )

The abstract operation ToUint8Clamp takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It clamps and rounds _argument_ to one of 2<sup>8</sup> [integral Number](#integral-number) values in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 255<sub>𝔽</sub>. It performs the following steps when called:

1.  Let _number_ be ? [ToNumber](#sec-tonumber)(_argument_).
2.  If _number_ is NaN, return +0<sub>𝔽</sub>.
3.  Let _mv_ be the [extended mathematical value of](#extended-mathematical-value-of) _number_.
4.  Let _clamped_ be the result of [clamping](#clamping) _mv_ between 0 and 255.
5.  Let _f_ be [floor](#eqn-floor)(_clamped_).
6.  If _clamped_ < _f_ + 0.5, return [𝔽](#𝔽)(_f_).
7.  If _clamped_ > _f_ + 0.5, return [𝔽](#𝔽)(_f_ + 1).
8.  If _f_ is even, return [𝔽](#𝔽)(_f_); otherwise return [𝔽](#𝔽)(_f_ + 1).

Note

Unlike most other ECMAScript [integer](#integer) conversion operations, ToUint8Clamp rounds rather than truncates non-integral values. It also uses “round half to even” tie-breaking, which differs from the “round half up” tie-breaking of [`Math.round`](#sec-math.round).


# 7.1.13 ToBigInt ( _argument_ )

The abstract operation ToBigInt takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to a BigInt value, or throws if an implicit conversion from Number would be required. It performs the following steps when called:

1.  Let _prim_ be ? [ToPrimitive](#sec-toprimitive)(_argument_, number).
2.  Return the value that _prim_ corresponds to in [Table 12](#table-tobigint).

Table 12: BigInt Conversions

<table><thead><tr><th>Argument Type</th><th>Result</th></tr></thead><tbody><tr><td>Undefined</td><td>Throw a <emu-val>TypeError</emu-val> exception.</td></tr><tr><td>Null</td><td>Throw a <emu-val>TypeError</emu-val> exception.</td></tr><tr><td>Boolean</td><td>Return <code>1n</code> if <var>prim</var> is <emu-val>true</emu-val> and <code>0n</code> if <var>prim</var> is <emu-val>false</emu-val>.</td></tr><tr><td>BigInt</td><td>Return <var>prim</var>.</td></tr><tr><td>Number</td><td>Throw a <emu-val>TypeError</emu-val> exception.</td></tr><tr><td>String</td><td><emu-alg><ol><li>Let <var>n</var> be <emu-xref aoid="StringToBigInt" id="_ref_2229"><a href="#sec-stringtobigint">StringToBigInt</a></emu-xref>(<var>prim</var>).</li><li>If <var>n</var> is <emu-val>undefined</emu-val>, throw a <emu-val>SyntaxError</emu-val> exception.</li><li>Return <var>n</var>.</li></ol></emu-alg></td></tr><tr><td>Symbol</td><td>Throw a <emu-val>TypeError</emu-val> exception.</td></tr></tbody></table>


# 7.1.14 StringToBigInt ( _str_ )

The abstract operation StringToBigInt takes argument _str_ (a String) and returns a BigInt or undefined. It performs the following steps when called:

1.  Let _literal_ be [ParseText](#sec-parsetext)(_str_, [StringIntegerLiteral](#prod-StringIntegerLiteral)).
2.  If _literal_ is a [List](#sec-list-and-record-specification-type) of errors, return undefined.
3.  Let _mv_ be the MV of _literal_.
4.  [Assert](#assert): _mv_ is an [integer](#integer).
5.  Return [ℤ](#ℤ)(_mv_).


# 7.1.14.1 StringIntegerLiteral Grammar

[StringToBigInt](#sec-stringtobigint) uses the following grammar.


## Syntax

[StringIntegerLiteral](#prod-StringIntegerLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrIntegerLiteral](#prod-StrIntegerLiteral) [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrIntegerLiteral](#prod-StrIntegerLiteral) ::: [SignedInteger](#prod-SignedInteger)\[~Sep\] [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[~Sep\]


# 7.1.14.2 Runtime Semantics: MV

-   The MV of [StringIntegerLiteral](#prod-StringIntegerLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt is 0.
-   The MV of [StringIntegerLiteral](#prod-StringIntegerLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrIntegerLiteral](#prod-StrIntegerLiteral) [StrWhiteSpace](#prod-StrWhiteSpace)opt is the MV of [StrIntegerLiteral](#prod-StrIntegerLiteral).


# 7.1.15 ToBigInt64 ( _argument_ )

The abstract operation ToBigInt64 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>64</sup> BigInt values in the [inclusive interval](#inclusive-interval) from [ℤ](#ℤ)(-2<sup>63</sup>) to [ℤ](#ℤ)(2<sup>63</sup> - 1). It performs the following steps when called:

1.  Let _n_ be ? [ToBigInt](#sec-tobigint)(_argument_).
2.  Let _int64bit_ be [ℝ](#ℝ)(_n_) [modulo](#eqn-modulo) 2<sup>64</sup>.
3.  If _int64bit_ ≥ 2<sup>63</sup>, return [ℤ](#ℤ)(_int64bit_ - 2<sup>64</sup>); otherwise return [ℤ](#ℤ)(_int64bit_).


# 7.1.16 ToBigUint64 ( _argument_ )

The abstract operation ToBigUint64 takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to one of 2<sup>64</sup> BigInt values in the [inclusive interval](#inclusive-interval) from 0<sub>ℤ</sub> to [ℤ](#ℤ)(2<sup>64</sup> - 1). It performs the following steps when called:

1.  Let _n_ be ? [ToBigInt](#sec-tobigint)(_argument_).
2.  Let _int64bit_ be [ℝ](#ℝ)(_n_) [modulo](#eqn-modulo) 2<sup>64</sup>.
3.  Return [ℤ](#ℤ)(_int64bit_).


# 7.1.17 ToString ( _argument_ )

The abstract operation ToString takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to a value of type String. It performs the following steps when called:

1.  If _argument_ [is a String](#sec-ecmascript-language-types-string-type), return _argument_.
2.  If _argument_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), throw a TypeError exception.
3.  If _argument_ is undefined, return "undefined".
4.  If _argument_ is null, return "null".
5.  If _argument_ is true, return "true".
6.  If _argument_ is false, return "false".
7.  If _argument_ [is a Number](#sec-ecmascript-language-types-number-type), return [Number::toString](#sec-numeric-types-number-tostring)(_argument_, 10).
8.  If _argument_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), return [BigInt::toString](#sec-numeric-types-bigint-tostring)(_argument_, 10).
9.  [Assert](#assert): _argument_ [is an Object](#sec-object-type).
10.  Let _primValue_ be ? [ToPrimitive](#sec-toprimitive)(_argument_, string).
11.  [Assert](#assert): _primValue_ [is not an Object](#sec-object-type).
12.  Return ? [ToString](#sec-tostring)(_primValue_).


# 7.1.18 ToObject ( _argument_ )

The abstract operation ToObject takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to a value of type Object. It performs the following steps when called:

1.  If _argument_ is either undefined or null, throw a TypeError exception.
2.  If _argument_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), return a new Boolean object whose _\[\[BooleanData\]\]_ internal slot is set to _argument_. See [20.3](#sec-boolean-objects) for a description of Boolean objects.
3.  If _argument_ [is a Number](#sec-ecmascript-language-types-number-type), return a new Number object whose _\[\[NumberData\]\]_ internal slot is set to _argument_. See [21.1](#sec-number-objects) for a description of Number objects.
4.  If _argument_ [is a String](#sec-ecmascript-language-types-string-type), return a new String object whose _\[\[StringData\]\]_ internal slot is set to _argument_. See [22.1](#sec-string-objects) for a description of String objects.
5.  If _argument_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return a new Symbol object whose _\[\[SymbolData\]\]_ internal slot is set to _argument_. See [20.4](#sec-symbol-objects) for a description of Symbol objects.
6.  If _argument_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), return a new BigInt object whose _\[\[BigIntData\]\]_ internal slot is set to _argument_. See [21.2](#sec-bigint-objects) for a description of BigInt objects.
7.  [Assert](#assert): _argument_ [is an Object](#sec-object-type).
8.  Return _argument_.


# 7.1.19 ToPropertyKey ( _argument_ )

The abstract operation ToPropertyKey takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [property key](#property-key) or a [throw completion](#sec-completion-record-specification-type). It converts _argument_ to a value that can be used as a [property key](#property-key). It performs the following steps when called:

1.  Let _key_ be ? [ToPrimitive](#sec-toprimitive)(_argument_, string).
2.  If _key_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), then
    1.  Return _key_.
3.  Return ! [ToString](#sec-tostring)(_key_).


# 7.1.20 ToLength ( _argument_ )

The abstract operation ToLength takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a non-negative [integral Number](#integral-number) or a [throw completion](#sec-completion-record-specification-type). It clamps and truncates _argument_ to a non-negative [integral Number](#integral-number) suitable for use as the length of an [array-like object](#sec-lengthofarraylike). It performs the following steps when called:

1.  Let _len_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_argument_).
2.  If _len_ ≤ 0, return +0<sub>𝔽</sub>.
3.  Return [𝔽](#𝔽)([min](#eqn-min)(_len_, 2<sup>53</sup> - 1)).


# 7.1.21 CanonicalNumericIndexString ( _argument_ )

The abstract operation CanonicalNumericIndexString takes argument _argument_ (a String) and returns a Number or undefined. If _argument_ is either "-0" or exactly matches [ToString](#sec-tostring)(_n_) for some Number value _n_, it returns the respective Number value. Otherwise, it returns undefined. It performs the following steps when called:

1.  If _argument_ is "-0", return \-0<sub>𝔽</sub>.
2.  Let _n_ be ! [ToNumber](#sec-tonumber)(_argument_).
3.  If ! [ToString](#sec-tostring)(_n_) is _argument_, return _n_.
4.  Return undefined.

A canonical numeric string is any String for which the CanonicalNumericIndexString abstract operation does not return undefined.


# 7.1.22 ToIndex ( _value_ )

The abstract operation ToIndex takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a non-negative [integer](#integer) or a [throw completion](#sec-completion-record-specification-type). It converts _value_ to an [integer](#integer) and returns that [integer](#integer) if it is non-negative and corresponds with an [integer index](#integer-index). Otherwise, it throws an exception. It performs the following steps when called:

1.  Let _integer_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_value_).
2.  If _integer_ is not in the [inclusive interval](#inclusive-interval) from 0 to 2<sup>53</sup> - 1, throw a RangeError exception.
3.  Return _integer_.


# 7.2 Testing and Comparison Operations


# 7.2.1 RequireObjectCoercible ( _argument_ )

The abstract operation RequireObjectCoercible takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It throws an error if _argument_ is a value that cannot be converted to an Object using [ToObject](#sec-toobject). It performs the following steps when called:

1.  If _argument_ is either undefined or null, throw a TypeError exception.
2.  Return unused.


# 7.2.2 IsArray ( _argument_ )

The abstract operation IsArray takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _argument_ [is not an Object](#sec-object-type), return false.
2.  If _argument_ is an [Array exotic object](#array-exotic-object), return true.
3.  If _argument_ is a [Proxy exotic object](#proxy-exotic-object), then
    1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_argument_).
    2.  Let _proxyTarget_ be _argument_._\[\[ProxyTarget\]\]_.
    3.  Return ? [IsArray](#sec-isarray)(_proxyTarget_).
4.  Return false.


# 7.2.3 IsCallable ( _argument_ )

The abstract operation IsCallable takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It determines if _argument_ is a callable function with a _\[\[Call\]\]_ internal method. It performs the following steps when called:

1.  If _argument_ [is not an Object](#sec-object-type), return false.
2.  If _argument_ has a _\[\[Call\]\]_ internal method, return true.
3.  Return false.


# 7.2.4 IsConstructor ( _argument_ )

The abstract operation IsConstructor takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It determines if _argument_ is a [function object](#function-object) with a _\[\[Construct\]\]_ internal method. It performs the following steps when called:

1.  If _argument_ [is not an Object](#sec-object-type), return false.
2.  If _argument_ has a _\[\[Construct\]\]_ internal method, return true.
3.  Return false.


# 7.2.5 IsExtensible ( _O_ )

The abstract operation IsExtensible takes argument _O_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It is used to determine whether additional properties can be added to _O_. It performs the following steps when called:

1.  Return ? _O_._\[\[IsExtensible\]\]_().


# 7.2.6 IsRegExp ( _argument_ )

The abstract operation IsRegExp takes argument _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _argument_ [is not an Object](#sec-object-type), return false.
2.  Let _matcher_ be ? [Get](#sec-get-o-p)(_argument_, [%Symbol.match%](#sec-well-known-symbols)).
3.  If _matcher_ is not undefined, return [ToBoolean](#sec-toboolean)(_matcher_).
4.  If _argument_ has a _\[\[RegExpMatcher\]\]_ internal slot, return true.
5.  Return false.


# 7.2.7 Static Semantics: IsStringWellFormedUnicode ( _string_ )

The abstract operation IsStringWellFormedUnicode takes argument _string_ (a String) and returns a Boolean. It interprets _string_ as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type), and determines whether it is a [well formed](http://www.unicode.org/glossary/#well_formed_code_unit_sequence) UTF-16 sequence. It performs the following steps when called:

1.  Let _len_ be the length of _string_.
2.  Let _k_ be 0.
3.  Repeat, while _k_ < _len_,
    1.  Let _cp_ be [CodePointAt](#sec-codepointat)(_string_, _k_).
    2.  If _cp_._\[\[IsUnpairedSurrogate\]\]_ is true, return false.
    3.  Set _k_ to _k_ + _cp_._\[\[CodeUnitCount\]\]_.
4.  Return true.


# 7.2.8 SameType ( _x_, _y_ )

The abstract operation SameType takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _y_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It determines whether or not the two arguments are the same type. It performs the following steps when called:

1.  If _x_ is undefined and _y_ is undefined, return true.
2.  If _x_ is null and _y_ is null, return true.
3.  If _x_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) and _y_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), return true.
4.  If _x_ [is a Number](#sec-ecmascript-language-types-number-type) and _y_ [is a Number](#sec-ecmascript-language-types-number-type), return true.
5.  If _x_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) and _y_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), return true.
6.  If _x_ [is a Symbol](#sec-ecmascript-language-types-symbol-type) and _y_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return true.
7.  If _x_ [is a String](#sec-ecmascript-language-types-string-type) and _y_ [is a String](#sec-ecmascript-language-types-string-type), return true.
8.  If _x_ [is an Object](#sec-object-type) and _y_ [is an Object](#sec-object-type), return true.
9.  Return false.


# 7.2.9 SameValue ( _x_, _y_ )

The abstract operation SameValue takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _y_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It determines whether or not the two arguments are the same value. It performs the following steps when called:

1.  If [SameType](#sec-sametype)(_x_, _y_) is false, return false.
2.  If _x_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Return [Number::sameValue](#sec-numeric-types-number-sameValue)(_x_, _y_).
3.  Return [SameValueNonNumber](#sec-samevaluenonnumber)(_x_, _y_).

Note

This algorithm differs from the [IsStrictlyEqual](#sec-isstrictlyequal) Algorithm by treating all NaN values as equivalent and by differentiating +0<sub>𝔽</sub> from \-0<sub>𝔽</sub>.


# 7.2.10 SameValueZero ( _x_, _y_ )

The abstract operation SameValueZero takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _y_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It determines whether or not the two arguments are the same value (ignoring the difference between +0<sub>𝔽</sub> and \-0<sub>𝔽</sub>). It performs the following steps when called:

1.  If [SameType](#sec-sametype)(_x_, _y_) is false, return false.
2.  If _x_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Return [Number::sameValueZero](#sec-numeric-types-number-sameValueZero)(_x_, _y_).
3.  Return [SameValueNonNumber](#sec-samevaluenonnumber)(_x_, _y_).

Note

SameValueZero differs from [SameValue](#sec-samevalue) only in that it treats +0<sub>𝔽</sub> and \-0<sub>𝔽</sub> as equivalent.


# 7.2.11 SameValueNonNumber ( _x_, _y_ )

The abstract operation SameValueNonNumber takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types), but not a Number) and _y_ (an [ECMAScript language value](#sec-ecmascript-language-types), but not a Number) and returns a Boolean. It performs the following steps when called:

1.  [Assert](#assert): [SameType](#sec-sametype)(_x_, _y_) is true.
2.  If _x_ is either undefined or null, return true.
3.  If _x_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), then
    1.  Return [BigInt::equal](#sec-numeric-types-bigint-equal)(_x_, _y_).
4.  If _x_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  If _x_ and _y_ have the same length and the same code units in the same positions, return true; otherwise return false.
5.  If _x_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), then
    1.  If _x_ and _y_ are both true or both false, return true; otherwise return false.
6.  NOTE: All other [ECMAScript language values](#sec-ecmascript-language-types) are compared by identity.
7.  If _x_ is _y_, return true; otherwise return false.

Note 1

For expository purposes, some cases are handled separately within this algorithm even if it is unnecessary to do so.

Note 2

The specifics of what "_x_ is _y_" means are detailed in [5.2.8](#sec-identity).


# 7.2.12 IsLessThan ( _x_, _y_, _LeftFirst_ )

The abstract operation IsLessThan takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _y_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _LeftFirst_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a Boolean or undefined, or a [throw completion](#sec-completion-record-specification-type). It provides the semantics for the comparison _x_ < _y_, returning true, false, or undefined (which indicates that at least one operand is NaN). The _LeftFirst_ flag is used to control the order in which operations with potentially visible side-effects are performed upon _x_ and _y_. It is necessary because ECMAScript specifies left to right evaluation of expressions. If _LeftFirst_ is true, the _x_ parameter corresponds to an expression that occurs to the left of the _y_ parameter's corresponding expression. If _LeftFirst_ is false, the reverse is the case and operations must be performed upon _y_ before _x_. It performs the following steps when called:

1.  If _LeftFirst_ is true, then
    1.  Let _px_ be ? [ToPrimitive](#sec-toprimitive)(_x_, number).
    2.  Let _py_ be ? [ToPrimitive](#sec-toprimitive)(_y_, number).
2.  Else,
    1.  NOTE: The order of evaluation needs to be reversed to preserve left to right evaluation.
    2.  Let _py_ be ? [ToPrimitive](#sec-toprimitive)(_y_, number).
    3.  Let _px_ be ? [ToPrimitive](#sec-toprimitive)(_x_, number).
3.  If _px_ [is a String](#sec-ecmascript-language-types-string-type) and _py_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _lx_ be the length of _px_.
    2.  Let _ly_ be the length of _py_.
    3.  For each [integer](#integer) _i_ such that 0 ≤ _i_ < [min](#eqn-min)(_lx_, _ly_), in ascending order, do
        1.  Let _cx_ be the numeric value of the code unit at index _i_ within _px_.
        2.  Let _cy_ be the numeric value of the code unit at index _i_ within _py_.
        3.  If _cx_ < _cy_, return true.
        4.  If _cx_ > _cy_, return false.
    4.  If _lx_ < _ly_, return true; otherwise return false.
4.  Else,
    1.  If _px_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) and _py_ [is a String](#sec-ecmascript-language-types-string-type), then
        1.  Let _ny_ be [StringToBigInt](#sec-stringtobigint)(_py_).
        2.  If _ny_ is undefined, return undefined.
        3.  Return [BigInt::lessThan](#sec-numeric-types-bigint-lessThan)(_px_, _ny_).
    2.  If _px_ [is a String](#sec-ecmascript-language-types-string-type) and _py_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), then
        1.  Let _nx_ be [StringToBigInt](#sec-stringtobigint)(_px_).
        2.  If _nx_ is undefined, return undefined.
        3.  Return [BigInt::lessThan](#sec-numeric-types-bigint-lessThan)(_nx_, _py_).
    3.  NOTE: Because _px_ and _py_ are primitive values, evaluation order is not important.
    4.  Let _nx_ be ? [ToNumeric](#sec-tonumeric)(_px_).
    5.  Let _ny_ be ? [ToNumeric](#sec-tonumeric)(_py_).
    6.  If [SameType](#sec-sametype)(_nx_, _ny_) is true, then
        1.  If _nx_ [is a Number](#sec-ecmascript-language-types-number-type), then
            1.  Return [Number::lessThan](#sec-numeric-types-number-lessThan)(_nx_, _ny_).
        2.  Else,
            1.  [Assert](#assert): _nx_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
            2.  Return [BigInt::lessThan](#sec-numeric-types-bigint-lessThan)(_nx_, _ny_).
    7.  [Assert](#assert): _nx_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) and _ny_ [is a Number](#sec-ecmascript-language-types-number-type), or _nx_ [is a Number](#sec-ecmascript-language-types-number-type) and _ny_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    8.  If _nx_ or _ny_ is NaN, return undefined.
    9.  If _nx_ is \-∞<sub>𝔽</sub> or _ny_ is +∞<sub>𝔽</sub>, return true.
    10.  If _nx_ is +∞<sub>𝔽</sub> or _ny_ is \-∞<sub>𝔽</sub>, return false.
    11.  If [ℝ](#ℝ)(_nx_) < [ℝ](#ℝ)(_ny_), return true; otherwise return false.

Note 1

Step [3](#step-arc-string-check) differs from step [1.c](#step-binary-op-string-check) in the algorithm that handles the addition operator `+` ([13.15.3](#sec-applystringornumericbinaryoperator)) by using the logical-and operation instead of the logical-or operation.

Note 2

The comparison of Strings uses a simple lexicographic ordering on sequences of UTF-16 code unit values. There is no attempt to use the more complex, semantically oriented definitions of character or string equality and collating order defined in the Unicode specification. Therefore String values that are canonically equal according to the Unicode Standard but not in the same normalization form could test as unequal. Also note that lexicographic ordering by *code unit* differs from ordering by *code point* for Strings containing [surrogate pairs](#surrogate-pair).


# 7.2.13 IsLooselyEqual ( _x_, _y_ )

The abstract operation IsLooselyEqual takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _y_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It provides the semantics for the `==` operator. It performs the following steps when called:

1.  If [SameType](#sec-sametype)(_x_, _y_) is true, then
    1.  Return [IsStrictlyEqual](#sec-isstrictlyequal)(_x_, _y_).
2.  If _x_ is null and _y_ is undefined, return true.
3.  If _x_ is undefined and _y_ is null, return true.
4.  [Normative Optional](#sec-conformance)
    
    If the [host](#host) is a web browser or otherwise supports [The _\[\[IsHTMLDDA\]\]_ Internal Slot](#sec-IsHTMLDDA-internal-slot), then
    1.  If _x_ [is an Object](#sec-object-type), _x_ has an _\[\[IsHTMLDDA\]\]_ internal slot, and _y_ is either undefined or null, return true.
    2.  If _x_ is either undefined or null, _y_ [is an Object](#sec-object-type), and _y_ has an _\[\[IsHTMLDDA\]\]_ internal slot, return true.
5.  If _x_ [is a Number](#sec-ecmascript-language-types-number-type) and _y_ [is a String](#sec-ecmascript-language-types-string-type), return ! [IsLooselyEqual](#sec-islooselyequal)(_x_, ! [ToNumber](#sec-tonumber)(_y_)).
6.  If _x_ [is a String](#sec-ecmascript-language-types-string-type) and _y_ [is a Number](#sec-ecmascript-language-types-number-type), return ! [IsLooselyEqual](#sec-islooselyequal)(! [ToNumber](#sec-tonumber)(_x_), _y_).
7.  If _x_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) and _y_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _n_ be [StringToBigInt](#sec-stringtobigint)(_y_).
    2.  If _n_ is undefined, return false.
    3.  Return ! [IsLooselyEqual](#sec-islooselyequal)(_x_, _n_).
8.  If _x_ [is a String](#sec-ecmascript-language-types-string-type) and _y_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), return ! [IsLooselyEqual](#sec-islooselyequal)(_y_, _x_).
9.  If _x_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), return ! [IsLooselyEqual](#sec-islooselyequal)(! [ToNumber](#sec-tonumber)(_x_), _y_).
10.  If _y_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), return ! [IsLooselyEqual](#sec-islooselyequal)(_x_, ! [ToNumber](#sec-tonumber)(_y_)).
11.  If _x_ is either a String, a Number, a BigInt, or a Symbol and _y_ [is an Object](#sec-object-type), return ! [IsLooselyEqual](#sec-islooselyequal)(_x_, ? [ToPrimitive](#sec-toprimitive)(_y_)).
12.  If _x_ [is an Object](#sec-object-type) and _y_ is either a String, a Number, a BigInt, or a Symbol, return ! [IsLooselyEqual](#sec-islooselyequal)(? [ToPrimitive](#sec-toprimitive)(_x_), _y_).
13.  If _x_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) and _y_ [is a Number](#sec-ecmascript-language-types-number-type), or if _x_ [is a Number](#sec-ecmascript-language-types-number-type) and _y_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), then
     1.  If _x_ is not [finite](#finite) or _y_ is not [finite](#finite), return false.
     2.  If [ℝ](#ℝ)(_x_) = [ℝ](#ℝ)(_y_), return true; otherwise return false.
14.  Return false.


# 7.2.14 IsStrictlyEqual ( _x_, _y_ )

The abstract operation IsStrictlyEqual takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _y_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It provides the semantics for the `===` operator. It performs the following steps when called:

1.  If [SameType](#sec-sametype)(_x_, _y_) is false, return false.
2.  If _x_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Return [Number::equal](#sec-numeric-types-number-equal)(_x_, _y_).
3.  Return [SameValueNonNumber](#sec-samevaluenonnumber)(_x_, _y_).

Note

This algorithm differs from the [SameValue](#sec-samevalue) Algorithm in its treatment of signed zeroes and NaNs.


# 7.3 Operations on Objects


# 7.3.1 MakeBasicObject ( _internalSlotsList_ )

The abstract operation MakeBasicObject takes argument _internalSlotsList_ (a [List](#sec-list-and-record-specification-type) of internal slot names) and returns an Object. It is the source of all ECMAScript objects that are created algorithmically, including both [ordinary objects](#ordinary-object) and [exotic objects](#exotic-object). It factors out common steps used in creating all objects, and centralizes object creation. It performs the following steps when called:

1.  Set _internalSlotsList_ to the [list-concatenation](#list-concatenation) of _internalSlotsList_ and « _\[\[PrivateElements\]\]_ ».
2.  Let _obj_ be a newly created object with an internal slot for each name in _internalSlotsList_.
3.  NOTE: As described in [Object Internal Methods and Internal Slots](#sec-object-internal-methods-and-internal-slots), the initial value of each such internal slot is undefined unless specified otherwise.
4.  Set _obj_._\[\[PrivateElements\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
5.  Set _obj_'s essential internal methods to the default [ordinary object](#ordinary-object) definitions specified in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots).
6.  [Assert](#assert): If the caller will not be overriding both _obj_'s _\[\[GetPrototypeOf\]\]_ and _\[\[SetPrototypeOf\]\]_ essential internal methods, then _internalSlotsList_ contains _\[\[Prototype\]\]_.
7.  [Assert](#assert): If the caller will not be overriding all of _obj_'s _\[\[SetPrototypeOf\]\]_, _\[\[IsExtensible\]\]_, and _\[\[PreventExtensions\]\]_ essential internal methods, then _internalSlotsList_ contains _\[\[Extensible\]\]_.
8.  If _internalSlotsList_ contains _\[\[Extensible\]\]_, set _obj_._\[\[Extensible\]\]_ to true.
9.  Return _obj_.

Note

Within this specification, [exotic objects](#exotic-object) are created in [abstract operations](#sec-algorithm-conventions-abstract-operations) such as [ArrayCreate](#sec-arraycreate) and [BoundFunctionCreate](#sec-boundfunctioncreate) by first calling MakeBasicObject to obtain a basic, foundational object, and then overriding some or all of that object's internal methods. In order to encapsulate [exotic object](#exotic-object) creation, the object's essential internal methods are never modified outside those operations.


# 7.3.2 Get ( _O_, _P_ )

The abstract operation Get takes arguments _O_ (an Object) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It is used to retrieve the value of a specific property of an object. It performs the following steps when called:

1.  Return ? _O_._\[\[Get\]\]_(_P_, _O_).


# 7.3.3 GetV ( _V_, _P_ )

The abstract operation GetV takes arguments _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It is used to retrieve the value of a specific property of an [ECMAScript language value](#sec-ecmascript-language-types). If the value is not an object, the property lookup is performed using a wrapper object appropriate for the type of the value. It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(_V_).
2.  Return ? _O_._\[\[Get\]\]_(_P_, _V_).


# 7.3.4 Set ( _O_, _P_, _V_, _Throw_ )

The abstract operation Set takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _Throw_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It is used to set the value of a specific property of an object. _V_ is the new value for the property. It performs the following steps when called:

1.  Let _success_ be ? _O_._\[\[Set\]\]_(_P_, _V_, _O_).
2.  If _success_ is false and _Throw_ is true, throw a TypeError exception.
3.  Return unused.


# 7.3.5 CreateDataProperty ( _O_, _P_, _V_ )

The abstract operation CreateDataProperty takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It is used to create a new own property of an object. It performs the following steps when called:

1.  Let _newDesc_ be the PropertyDescriptor { _\[\[Value\]\]_: _V_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: true }.
2.  Return ? _O_._\[\[DefineOwnProperty\]\]_(_P_, _newDesc_).

Note

This abstract operation creates a property whose attributes are set to the same defaults used for properties created by the ECMAScript language assignment operator. Normally, the property will not already exist. If it does exist and is not configurable or if _O_ is not extensible, _\[\[DefineOwnProperty\]\]_ will return false.


# 7.3.6 CreateDataPropertyOrThrow ( _O_, _P_, _V_ )

The abstract operation CreateDataPropertyOrThrow takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It is used to create a new own property of an object. It throws a TypeError exception if the requested property update cannot be performed. It performs the following steps when called:

1.  Let _success_ be ? [CreateDataProperty](#sec-createdataproperty)(_O_, _P_, _V_).
2.  If _success_ is false, throw a TypeError exception.
3.  Return unused.

Note

This abstract operation creates a property whose attributes are set to the same defaults used for properties created by the ECMAScript language assignment operator. Normally, the property will not already exist. If it does exist and is not configurable or if _O_ is not extensible, _\[\[DefineOwnProperty\]\]_ will return false causing this operation to throw a TypeError exception.


# 7.3.7 CreateNonEnumerableDataPropertyOrThrow ( _O_, _P_, _V_ )

The abstract operation CreateNonEnumerableDataPropertyOrThrow takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It is used to create a new non-enumerable own property of an [ordinary object](#ordinary-object). It performs the following steps when called:

1.  [Assert](#assert): _O_ is an ordinary, extensible object with no non-configurable properties.
2.  Let _newDesc_ be the PropertyDescriptor { _\[\[Value\]\]_: _V_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.
3.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, _P_, _newDesc_).
4.  Return unused.

Note

This abstract operation creates a property whose attributes are set to the same defaults used for properties created by the ECMAScript language assignment operator except it is not enumerable. Normally, the property will not already exist. If it does exist, [DefinePropertyOrThrow](#sec-definepropertyorthrow) is guaranteed to complete normally.


# 7.3.8 DefinePropertyOrThrow ( _O_, _P_, _desc_ )

The abstract operation DefinePropertyOrThrow takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), and _desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It is used to call the _\[\[DefineOwnProperty\]\]_ internal method of an object in a manner that will throw a TypeError exception if the requested property update cannot be performed. It performs the following steps when called:

1.  Let _success_ be ? _O_._\[\[DefineOwnProperty\]\]_(_P_, _desc_).
2.  If _success_ is false, throw a TypeError exception.
3.  Return unused.


# 7.3.9 DeletePropertyOrThrow ( _O_, _P_ )

The abstract operation DeletePropertyOrThrow takes arguments _O_ (an Object) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It is used to remove a specific own property of an object. It throws an exception if the property is not configurable. It performs the following steps when called:

1.  Let _success_ be ? _O_._\[\[Delete\]\]_(_P_).
2.  If _success_ is false, throw a TypeError exception.
3.  Return unused.


# 7.3.10 GetMethod ( _V_, _P_ )

The abstract operation GetMethod takes arguments _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a [function object](#function-object) or undefined, or a [throw completion](#sec-completion-record-specification-type). It is used to get the value of a specific property of an [ECMAScript language value](#sec-ecmascript-language-types) when the value of the property is expected to be a function. It performs the following steps when called:

1.  Let _func_ be ? [GetV](#sec-getv)(_V_, _P_).
2.  If _func_ is either undefined or null, return undefined.
3.  If [IsCallable](#sec-iscallable)(_func_) is false, throw a TypeError exception.
4.  Return _func_.


# 7.3.11 HasProperty ( _O_, _P_ )

The abstract operation HasProperty takes arguments _O_ (an Object) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It is used to determine whether an object has a property with the specified [property key](#property-key). The property may be either own or inherited. It performs the following steps when called:

1.  Return ? _O_._\[\[HasProperty\]\]_(_P_).


# 7.3.12 HasOwnProperty ( _O_, _P_ )

The abstract operation HasOwnProperty takes arguments _O_ (an Object) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It is used to determine whether an object has an own property with the specified [property key](#property-key). It performs the following steps when called:

1.  Let _desc_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
2.  If _desc_ is undefined, return false.
3.  Return true.


# 7.3.13 Call ( _F_, _V_ \[, _argumentsList_ \] )

The abstract operation Call takes arguments _F_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and optional argument _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It is used to call the _\[\[Call\]\]_ internal method of a [function object](#function-object). _F_ is the [function object](#function-object), _V_ is an [ECMAScript language value](#sec-ecmascript-language-types) that is the this value of the _\[\[Call\]\]_, and _argumentsList_ is the value passed to the corresponding argument of the internal method. If _argumentsList_ is not present, a new empty [List](#sec-list-and-record-specification-type) is used as its value. It performs the following steps when called:

1.  If _argumentsList_ is not present, set _argumentsList_ to a new empty [List](#sec-list-and-record-specification-type).
2.  If [IsCallable](#sec-iscallable)(_F_) is false, throw a TypeError exception.
3.  Return ? _F_._\[\[Call\]\]_(_V_, _argumentsList_).


# 7.3.14 Construct ( _F_ \[, _argumentsList_ \[, _newTarget_ \] \] )

The abstract operation Construct takes argument _F_ (a [constructor](#constructor)) and optional arguments _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and _newTarget_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It is used to call the _\[\[Construct\]\]_ internal method of a [function object](#function-object). _argumentsList_ and _newTarget_ are the values to be passed as the corresponding arguments of the internal method. If _argumentsList_ is not present, a new empty [List](#sec-list-and-record-specification-type) is used as its value. If _newTarget_ is not present, _F_ is used as its value. It performs the following steps when called:

1.  If _newTarget_ is not present, set _newTarget_ to _F_.
2.  If _argumentsList_ is not present, set _argumentsList_ to a new empty [List](#sec-list-and-record-specification-type).
3.  Return ? _F_._\[\[Construct\]\]_(_argumentsList_, _newTarget_).

Note

If _newTarget_ is not present, this operation is equivalent to: `new F(...argumentsList)`


# 7.3.15 SetIntegrityLevel ( _O_, _level_ )

The abstract operation SetIntegrityLevel takes arguments _O_ (an Object) and _level_ (sealed or frozen) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It is used to fix the set of own properties of an object. It performs the following steps when called:

1.  Let _status_ be ? _O_._\[\[PreventExtensions\]\]_().
2.  If _status_ is false, return false.
3.  Let _keys_ be ? _O_._\[\[OwnPropertyKeys\]\]_().
4.  If _level_ is sealed, then
    1.  For each element _k_ of _keys_, do
        1.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, _k_, PropertyDescriptor { _\[\[Configurable\]\]_: false }).
5.  Else,
    1.  [Assert](#assert): _level_ is frozen.
    2.  For each element _k_ of _keys_, do
        1.  Let _currentDesc_ be ? _O_._\[\[GetOwnProperty\]\]_(_k_).
        2.  If _currentDesc_ is not undefined, then
            1.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_currentDesc_) is true, then
                1.  Let _desc_ be the PropertyDescriptor { _\[\[Configurable\]\]_: false }.
            2.  Else,
                1.  Let _desc_ be the PropertyDescriptor { _\[\[Configurable\]\]_: false, _\[\[Writable\]\]_: false }.
            3.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, _k_, _desc_).
6.  Return true.


# 7.3.16 TestIntegrityLevel ( _O_, _level_ )

The abstract operation TestIntegrityLevel takes arguments _O_ (an Object) and _level_ (sealed or frozen) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It is used to determine if the set of own properties of an object are fixed. It performs the following steps when called:

1.  Let _extensible_ be ? [IsExtensible](#sec-isextensible-o)(_O_).
2.  If _extensible_ is true, return false.
3.  NOTE: If the object is extensible, none of its properties are examined.
4.  Let _keys_ be ? _O_._\[\[OwnPropertyKeys\]\]_().
5.  For each element _k_ of _keys_, do
    1.  Let _currentDesc_ be ? _O_._\[\[GetOwnProperty\]\]_(_k_).
    2.  If _currentDesc_ is not undefined, then
        1.  If _currentDesc_._\[\[Configurable\]\]_ is true, return false.
        2.  If _level_ is frozen and [IsDataDescriptor](#sec-isdatadescriptor)(_currentDesc_) is true, then
            1.  If _currentDesc_._\[\[Writable\]\]_ is true, return false.
6.  Return true.


# 7.3.17 CreateArrayFromList ( _elements_ )

The abstract operation CreateArrayFromList takes argument _elements_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns an Array. It is used to create an Array whose elements are provided by _elements_. It performs the following steps when called:

1.  Let _array_ be ! [ArrayCreate](#sec-arraycreate)(0).
2.  Let _n_ be 0.
3.  For each element _e_ of _elements_, do
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_array_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _e_).
    2.  Set _n_ to _n_ + 1.
4.  Return _array_.


# 7.3.18 LengthOfArrayLike ( _obj_ )

The abstract operation LengthOfArrayLike takes argument _obj_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) a non-negative [integer](#integer) or a [throw completion](#sec-completion-record-specification-type). It returns the value of the "length" property of an array-like object. It performs the following steps when called:

1.  Return [ℝ](#ℝ)(? [ToLength](#sec-tolength)(? [Get](#sec-get-o-p)(_obj_, "length"))).

An array-like object is any object for which this operation returns a [normal completion](#sec-completion-record-specification-type).

Note 1

Typically, an array-like object would also have some properties with [integer index](#integer-index) names. However, that is not a requirement of this definition.

Note 2

Arrays and String objects are examples of array-like objects.


# 7.3.19 CreateListFromArrayLike ( _obj_ \[, _validElementTypes_ \] )

The abstract operation CreateListFromArrayLike takes argument _obj_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and optional argument _validElementTypes_ (all or property-key) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It is used to create a [List](#sec-list-and-record-specification-type) value whose elements are provided by the indexed properties of _obj_. _validElementTypes_ indicates the types of values that are allowed as elements. It performs the following steps when called:

1.  If _validElementTypes_ is not present, set _validElementTypes_ to all.
2.  If _obj_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_obj_).
4.  Let _list_ be a new empty [List](#sec-list-and-record-specification-type).
5.  Let _index_ be 0.
6.  Repeat, while _index_ < _len_,
    1.  Let _indexName_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_index_)).
    2.  Let _next_ be ? [Get](#sec-get-o-p)(_obj_, _indexName_).
    3.  If _validElementTypes_ is property-key and _next_ is not a [property key](#property-key), throw a TypeError exception.
    4.  Append _next_ to _list_.
    5.  Set _index_ to _index_ + 1.
7.  Return _list_.


# 7.3.20 Invoke ( _V_, _P_ \[, _argumentsList_ \] )

The abstract operation Invoke takes arguments _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _P_ (a [property key](#property-key)) and optional argument _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It is used to call a method property of an [ECMAScript language value](#sec-ecmascript-language-types). _V_ serves as both the lookup point for the property and the this value of the call. _argumentsList_ is the list of arguments values passed to the method. If _argumentsList_ is not present, a new empty [List](#sec-list-and-record-specification-type) is used as its value. It performs the following steps when called:

1.  If _argumentsList_ is not present, set _argumentsList_ to a new empty [List](#sec-list-and-record-specification-type).
2.  Let _func_ be ? [GetV](#sec-getv)(_V_, _P_).
3.  Return ? [Call](#sec-call)(_func_, _V_, _argumentsList_).


# 7.3.21 OrdinaryHasInstance ( _C_, _O_ )

The abstract operation OrdinaryHasInstance takes arguments _C_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _O_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It implements the default algorithm for determining if _O_ inherits from the instance object inheritance path provided by _C_. It performs the following steps when called:

1.  If [IsCallable](#sec-iscallable)(_C_) is false, return false.
2.  If _C_ has a _\[\[BoundTargetFunction\]\]_ internal slot, then
    1.  Let _BC_ be _C_._\[\[BoundTargetFunction\]\]_.
    2.  Return ? [InstanceofOperator](#sec-instanceofoperator)(_O_, _BC_).
3.  If _O_ [is not an Object](#sec-object-type), return false.
4.  Let _P_ be ? [Get](#sec-get-o-p)(_C_, "prototype").
5.  If _P_ [is not an Object](#sec-object-type), throw a TypeError exception.
6.  Repeat,
    1.  Set _O_ to ? _O_._\[\[GetPrototypeOf\]\]_().
    2.  If _O_ is null, return false.
    3.  If [SameValue](#sec-samevalue)(_P_, _O_) is true, return true.


# 7.3.22 SpeciesConstructor ( _O_, _defaultConstructor_ )

The abstract operation SpeciesConstructor takes arguments _O_ (an Object) and _defaultConstructor_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [constructor](#constructor) or a [throw completion](#sec-completion-record-specification-type). It is used to retrieve the [constructor](#constructor) that should be used to create new objects that are derived from _O_. _defaultConstructor_ is the [constructor](#constructor) to use if a [constructor](#constructor) [%Symbol.species%](#sec-well-known-symbols) property cannot be found starting from _O_. It performs the following steps when called:

1.  Let _C_ be ? [Get](#sec-get-o-p)(_O_, "constructor").
2.  If _C_ is undefined, return _defaultConstructor_.
3.  If _C_ [is not an Object](#sec-object-type), throw a TypeError exception.
4.  Let _S_ be ? [Get](#sec-get-o-p)(_C_, [%Symbol.species%](#sec-well-known-symbols)).
5.  If _S_ is either undefined or null, return _defaultConstructor_.
6.  If [IsConstructor](#sec-isconstructor)(_S_) is true, return _S_.
7.  Throw a TypeError exception.


# 7.3.23 EnumerableOwnProperties ( _O_, _kind_ )

The abstract operation EnumerableOwnProperties takes arguments _O_ (an Object) and _kind_ (key, value, or key+value) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _ownKeys_ be ? _O_._\[\[OwnPropertyKeys\]\]_().
2.  Let _results_ be a new empty [List](#sec-list-and-record-specification-type).
3.  For each element _key_ of _ownKeys_, do
    1.  If _key_ [is a String](#sec-ecmascript-language-types-string-type), then
        1.  Let _desc_ be ? _O_._\[\[GetOwnProperty\]\]_(_key_).
        2.  If _desc_ is not undefined and _desc_._\[\[Enumerable\]\]_ is true, then
            1.  If _kind_ is key, then
                1.  Append _key_ to _results_.
            2.  Else,
                1.  Let _value_ be ? [Get](#sec-get-o-p)(_O_, _key_).
                2.  If _kind_ is value, then
                    1.  Append _value_ to _results_.
                3.  Else,
                    1.  [Assert](#assert): _kind_ is key+value.
                    2.  Let _entry_ be [CreateArrayFromList](#sec-createarrayfromlist)(« _key_, _value_ »).
                    3.  Append _entry_ to _results_.
4.  Return _results_.


# 7.3.24 GetFunctionRealm ( _obj_ )

The abstract operation GetFunctionRealm takes argument _obj_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Realm Record](#realm-record) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _obj_ has a _\[\[Realm\]\]_ internal slot, then
    1.  Return _obj_._\[\[Realm\]\]_.
2.  If _obj_ is a [bound function exotic object](#bound-function-exotic-object), then
    1.  Let _boundTargetFunction_ be _obj_._\[\[BoundTargetFunction\]\]_.
    2.  Return ? [GetFunctionRealm](#sec-getfunctionrealm)(_boundTargetFunction_).
3.  If _obj_ is a [Proxy exotic object](#proxy-exotic-object), then
    1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_obj_).
    2.  Let _proxyTarget_ be _obj_._\[\[ProxyTarget\]\]_.
    3.  [Assert](#assert): _proxyTarget_ is a [function object](#function-object).
    4.  Return ? [GetFunctionRealm](#sec-getfunctionrealm)(_proxyTarget_).
4.  Return [the current Realm Record](#current-realm).

Note

Step [4](#step-getfunctionrealm-default-return) will only be reached if _obj_ is a non-standard function [exotic object](#exotic-object) that does not have a _\[\[Realm\]\]_ internal slot.


# 7.3.25 CopyDataProperties ( _target_, _source_, _excludedItems_ )

The abstract operation CopyDataProperties takes arguments _target_ (an Object), _source_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _excludedItems_ (a [List](#sec-list-and-record-specification-type) of [property keys](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _source_ is either undefined or null, return unused.
2.  Let _from_ be ! [ToObject](#sec-toobject)(_source_).
3.  Let _keys_ be ? _from_._\[\[OwnPropertyKeys\]\]_().
4.  For each element _nextKey_ of _keys_, do
    1.  Let _excluded_ be false.
    2.  For each element _e_ of _excludedItems_, do
        1.  If [SameValue](#sec-samevalue)(_e_, _nextKey_) is true, then
            1.  Set _excluded_ to true.
    3.  If _excluded_ is false, then
        1.  Let _desc_ be ? _from_._\[\[GetOwnProperty\]\]_(_nextKey_).
        2.  If _desc_ is not undefined and _desc_._\[\[Enumerable\]\]_ is true, then
            1.  Let _propValue_ be ? [Get](#sec-get-o-p)(_from_, _nextKey_).
            2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_target_, _nextKey_, _propValue_).
5.  Return unused.

Note

The target passed in here is always a newly created object which is not directly accessible in case of an error being thrown.


# 7.3.26 PrivateElementFind ( _O_, _P_ )

The abstract operation PrivateElementFind takes arguments _O_ (an Object) and _P_ (a [Private Name](#sec-private-names)) and returns a [PrivateElement](#sec-privateelement-specification-type) or empty. It performs the following steps when called:

1.  If _O_._\[\[PrivateElements\]\]_ contains a [PrivateElement](#sec-privateelement-specification-type) _pe_ such that _pe_._\[\[Key\]\]_ is _P_, then
    1.  Return _pe_.
2.  Return empty.


# 7.3.27 PrivateFieldAdd ( _O_, _P_, _value_ )

The abstract operation PrivateFieldAdd takes arguments _O_ (an Object), _P_ (a [Private Name](#sec-private-names)), and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If the [host](#host) is a web browser, then
    1.  Perform ? [HostEnsureCanAddPrivateElement](#sec-hostensurecanaddprivateelement)(_O_).
2.  Let _entry_ be [PrivateElementFind](#sec-privateelementfind)(_O_, _P_).
3.  If _entry_ is not empty, throw a TypeError exception.
4.  Append [PrivateElement](#sec-privateelement-specification-type) { _\[\[Key\]\]_: _P_, _\[\[Kind\]\]_: field, _\[\[Value\]\]_: _value_ } to _O_._\[\[PrivateElements\]\]_.
5.  Return unused.


# 7.3.28 PrivateMethodOrAccessorAdd ( _O_, _method_ )

The abstract operation PrivateMethodOrAccessorAdd takes arguments _O_ (an Object) and _method_ (a [PrivateElement](#sec-privateelement-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): _method_._\[\[Kind\]\]_ is either method or accessor.
2.  If the [host](#host) is a web browser, then
    1.  Perform ? [HostEnsureCanAddPrivateElement](#sec-hostensurecanaddprivateelement)(_O_).
3.  Let _entry_ be [PrivateElementFind](#sec-privateelementfind)(_O_, _method_._\[\[Key\]\]_).
4.  If _entry_ is not empty, throw a TypeError exception.
5.  Append _method_ to _O_._\[\[PrivateElements\]\]_.
6.  Return unused.

Note

The values for private methods and accessors are shared across instances. This operation does not create a new copy of the method or accessor.


# 7.3.29 HostEnsureCanAddPrivateElement ( _O_ )

The [host-defined](#host-defined) abstract operation HostEnsureCanAddPrivateElement takes argument _O_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It allows [host environments](#host-environment) to prevent the addition of private elements to particular [host-defined](#host-defined) [exotic objects](#exotic-object).

An implementation of HostEnsureCanAddPrivateElement must conform to the following requirements:

-   If _O_ is not a [host-defined](#host-defined) [exotic object](#exotic-object), this abstract operation must return [NormalCompletion](#sec-normalcompletion)(unused) and perform no other steps.
-   Any two calls of this abstract operation with the same argument must return the same kind of [Completion Record](#sec-completion-record-specification-type).

The default implementation of HostEnsureCanAddPrivateElement is to return [NormalCompletion](#sec-normalcompletion)(unused).

This abstract operation is only invoked by ECMAScript [hosts](#host) that are web browsers.


# 7.3.30 PrivateGet ( _O_, _P_ )

The abstract operation PrivateGet takes arguments _O_ (an Object) and _P_ (a [Private Name](#sec-private-names)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _entry_ be [PrivateElementFind](#sec-privateelementfind)(_O_, _P_).
2.  If _entry_ is empty, throw a TypeError exception.
3.  If _entry_._\[\[Kind\]\]_ is either field or method, then
    1.  Return _entry_._\[\[Value\]\]_.
4.  [Assert](#assert): _entry_._\[\[Kind\]\]_ is accessor.
5.  If _entry_._\[\[Get\]\]_ is undefined, throw a TypeError exception.
6.  Let _getter_ be _entry_._\[\[Get\]\]_.
7.  Return ? [Call](#sec-call)(_getter_, _O_).


# 7.3.31 PrivateSet ( _O_, _P_, _value_ )

The abstract operation PrivateSet takes arguments _O_ (an Object), _P_ (a [Private Name](#sec-private-names)), and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _entry_ be [PrivateElementFind](#sec-privateelementfind)(_O_, _P_).
2.  If _entry_ is empty, throw a TypeError exception.
3.  If _entry_._\[\[Kind\]\]_ is field, then
    1.  Set _entry_._\[\[Value\]\]_ to _value_.
4.  Else if _entry_._\[\[Kind\]\]_ is method, then
    1.  Throw a TypeError exception.
5.  Else,
    1.  [Assert](#assert): _entry_._\[\[Kind\]\]_ is accessor.
    2.  If _entry_._\[\[Set\]\]_ is undefined, throw a TypeError exception.
    3.  Let _setter_ be _entry_._\[\[Set\]\]_.
    4.  Perform ? [Call](#sec-call)(_setter_, _O_, « _value_ »).
6.  Return unused.


# 7.3.32 DefineField ( _receiver_, _fieldRecord_ )

The abstract operation DefineField takes arguments _receiver_ (an Object) and _fieldRecord_ (a [ClassFieldDefinition Record](#sec-classfielddefinition-record-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _fieldName_ be _fieldRecord_._\[\[Name\]\]_.
2.  Let _initializer_ be _fieldRecord_._\[\[Initializer\]\]_.
3.  If _initializer_ is not empty, then
    1.  Let _initValue_ be ? [Call](#sec-call)(_initializer_, _receiver_).
4.  Else,
    1.  Let _initValue_ be undefined.
5.  If _fieldName_ is a [Private Name](#sec-private-names), then
    1.  Perform ? [PrivateFieldAdd](#sec-privatefieldadd)(_receiver_, _fieldName_, _initValue_).
6.  Else,
    1.  [Assert](#assert): _fieldName_ is a [property key](#property-key).
    2.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_receiver_, _fieldName_, _initValue_).
7.  Return unused.


# 7.3.33 InitializeInstanceElements ( _O_, _constructor_ )

The abstract operation InitializeInstanceElements takes arguments _O_ (an Object) and _constructor_ (an ECMAScript [function object](#function-object) or a built-in [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _methods_ be _constructor_._\[\[PrivateMethods\]\]_.
2.  For each [PrivateElement](#sec-privateelement-specification-type) _method_ of _methods_, do
    1.  Perform ? [PrivateMethodOrAccessorAdd](#sec-privatemethodoraccessoradd)(_O_, _method_).
3.  Let _fields_ be _constructor_._\[\[Fields\]\]_.
4.  For each element _fieldRecord_ of _fields_, do
    1.  Perform ? [DefineField](#sec-definefield)(_O_, _fieldRecord_).
5.  Return unused.


# 7.3.34 AddValueToKeyedGroup ( _groups_, _key_, _value_ )

The abstract operation AddValueToKeyedGroup takes arguments _groups_ (a [List](#sec-list-and-record-specification-type) of [Records](#sec-list-and-record-specification-type) with fields _\[\[Key\]\]_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _\[\[Elements\]\]_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types))), _key_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It performs the following steps when called:

1.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Elements\]\]_ } _g_ of _groups_, do
    1.  If [SameValue](#sec-samevalue)(_g_._\[\[Key\]\]_, _key_) is true, then
        1.  [Assert](#assert): Exactly one element of _groups_ meets this criterion.
        2.  Append _value_ to _g_._\[\[Elements\]\]_.
        3.  Return unused.
2.  Let _group_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_: _key_, _\[\[Elements\]\]_: « _value_ » }.
3.  Append _group_ to _groups_.
4.  Return unused.


# 7.3.35 GroupBy ( _items_, _callback_, _keyCoercion_ )

The abstract operation GroupBy takes arguments _items_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _callback_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _keyCoercion_ (property or collection) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [Records](#sec-list-and-record-specification-type) with fields _\[\[Key\]\]_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _\[\[Elements\]\]_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)), or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_items_).
2.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
3.  Let _groups_ be a new empty [List](#sec-list-and-record-specification-type).
4.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_items_, sync).
5.  Let _k_ be 0.
6.  Repeat,
    1.  If _k_ ≥ 2<sup>53</sup> - 1, then
        1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
        2.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _error_).
    2.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    3.  If _next_ is done, then
        1.  Return _groups_.
    4.  Let _value_ be _next_.
    5.  Let _key_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_callback_, undefined, « _value_, [𝔽](#𝔽)(_k_) »)).
    6.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_key_, _iteratorRecord_).
    7.  If _keyCoercion_ is property, then
        1.  Set _key_ to [Completion](#sec-completion-ao)([ToPropertyKey](#sec-topropertykey)(_key_)).
        2.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_key_, _iteratorRecord_).
    8.  Else,
        1.  [Assert](#assert): _keyCoercion_ is collection.
        2.  Set _key_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_key_).
    9.  Perform [AddValueToKeyedGroup](#sec-add-value-to-keyed-group)(_groups_, _key_, _value_).
    10.  Set _k_ to _k_ + 1.


# 7.3.36 GetOptionsObject ( _options_ )

The abstract operation GetOptionsObject takes argument _options_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _options_ is undefined, then
    1.  Return [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(null).
2.  If _options_ [is an Object](#sec-object-type), then
    1.  Return _options_.
3.  Throw a TypeError exception.


# 7.3.37 SetterThatIgnoresPrototypeProperties ( _thisValue_, _home_, _p_, _v_ )

The abstract operation SetterThatIgnoresPrototypeProperties takes arguments _thisValue_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _home_ (an Object), _p_ (a [property key](#property-key)), and _v_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _thisValue_ [is not an Object](#sec-object-type), then
    1.  Throw a TypeError exception.
2.  If [SameValue](#sec-samevalue)(_thisValue_, _home_) is true, then
    1.  NOTE: Throwing here emulates assignment to a non-writable [data property](#sec-object-type) on the _home_ object in [strict mode code](#sec-strict-mode-code).
    2.  Throw a TypeError exception.
3.  Let _desc_ be ? _thisValue_._\[\[GetOwnProperty\]\]_(_p_).
4.  If _desc_ is undefined, then
    1.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_thisValue_, _p_, _v_).
5.  Else,
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_thisValue_, _p_, _v_, true).
6.  Return unused.


# 7.4 Operations on Iterator Objects

See Common Iteration Interfaces ([27.1](#sec-iteration)).


# 7.4.1 Iterator Records

An Iterator Record is a [Record](#sec-list-and-record-specification-type) value used to encapsulate an [iterator](#sec-iterator-interface) or [async iterator](#sec-asynciterator-interface) along with the `next` method.

Iterator Records have the fields listed in [Table 13](#table-iterator-record-fields).

Table 13: [Iterator Record](#sec-iterator-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Iterator]]</var></td><td>an Object</td><td>An object that conforms to the <emu-xref href="#sec-iterator-interface" id="_ref_2770"><a href="#sec-iterator-interface">iterator interface</a></emu-xref> or the <emu-xref href="#sec-asynciterator-interface" id="_ref_2771"><a href="#sec-asynciterator-interface">async iterator interface</a></emu-xref>.</td></tr><tr><td><var class="field">[[NextMethod]]</var></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_2772"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref></td><td>The <code>next</code> method of the <var class="field">[[Iterator]]</var> object.</td></tr><tr><td><var class="field">[[Done]]</var></td><td>a Boolean</td><td>Whether the <emu-xref href="#sec-iterator-interface" id="_ref_2773"><a href="#sec-iterator-interface">iterator</a></emu-xref> has completed or been closed.</td></tr></tbody></table>


# 7.4.2 GetIteratorDirect ( _obj_ )

The abstract operation GetIteratorDirect takes argument _obj_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [Iterator Record](#sec-iterator-records) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _nextMethod_ be ? [Get](#sec-get-o-p)(_obj_, "next").
2.  Let _iteratorRecord_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _obj_, _\[\[NextMethod\]\]_: _nextMethod_, _\[\[Done\]\]_: false }.
3.  Return _iteratorRecord_.


# 7.4.3 GetIteratorFromMethod ( _obj_, _method_ )

The abstract operation GetIteratorFromMethod takes arguments _obj_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _method_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [Iterator Record](#sec-iterator-records) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _iterator_ be ? [Call](#sec-call)(_method_, _obj_).
2.  If _iterator_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Return ? [GetIteratorDirect](#sec-getiteratordirect)(_iterator_).


# 7.4.4 GetIterator ( _obj_, _kind_ )

The abstract operation GetIterator takes arguments _obj_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _kind_ (sync or async) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [Iterator Record](#sec-iterator-records) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _kind_ is async, then
    1.  Let _method_ be ? [GetMethod](#sec-getmethod)(_obj_, [%Symbol.asyncIterator%](#sec-well-known-symbols)).
    2.  If _method_ is undefined, then
        1.  Let _syncMethod_ be ? [GetMethod](#sec-getmethod)(_obj_, [%Symbol.iterator%](#sec-well-known-symbols)).
        2.  If _syncMethod_ is undefined, throw a TypeError exception.
        3.  Let _syncIteratorRecord_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_obj_, _syncMethod_).
        4.  Return [CreateAsyncFromSyncIterator](#sec-createasyncfromsynciterator)(_syncIteratorRecord_).
2.  Else,
    1.  Let _method_ be ? [GetMethod](#sec-getmethod)(_obj_, [%Symbol.iterator%](#sec-well-known-symbols)).
3.  If _method_ is undefined, throw a TypeError exception.
4.  Return ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_obj_, _method_).


# 7.4.5 GetIteratorFlattenable ( _obj_, _primitiveHandling_ )

The abstract operation GetIteratorFlattenable takes arguments _obj_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _primitiveHandling_ (iterate-string-primitives or reject-primitives) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [Iterator Record](#sec-iterator-records) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _obj_ [is not an Object](#sec-object-type), then
    1.  If _primitiveHandling_ is reject-primitives, throw a TypeError exception.
    2.  [Assert](#assert): _primitiveHandling_ is iterate-string-primitives.
    3.  If _obj_ [is not a String](#sec-ecmascript-language-types-string-type), throw a TypeError exception.
2.  Let _method_ be ? [GetMethod](#sec-getmethod)(_obj_, [%Symbol.iterator%](#sec-well-known-symbols)).
3.  If _method_ is undefined, then
    1.  Let _iterator_ be _obj_.
4.  Else,
    1.  Let _iterator_ be ? [Call](#sec-call)(_method_, _obj_).
5.  If _iterator_ [is not an Object](#sec-object-type), throw a TypeError exception.
6.  Return ? [GetIteratorDirect](#sec-getiteratordirect)(_iterator_).


# 7.4.6 IteratorNext ( _iteratorRecord_ \[, _value_ \] )

The abstract operation IteratorNext takes argument _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and optional argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _value_ is not present, then
    1.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_iteratorRecord_._\[\[NextMethod\]\]_, _iteratorRecord_._\[\[Iterator\]\]_)).
2.  Else,
    1.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_iteratorRecord_._\[\[NextMethod\]\]_, _iteratorRecord_._\[\[Iterator\]\]_, « _value_ »)).
3.  If _result_ is a [throw completion](#sec-completion-record-specification-type), then
    1.  Set _iteratorRecord_._\[\[Done\]\]_ to true.
    2.  Return ? _result_.
4.  Set _result_ to ! _result_.
5.  If _result_ [is not an Object](#sec-object-type), then
    1.  Set _iteratorRecord_._\[\[Done\]\]_ to true.
    2.  Throw a TypeError exception.
6.  Return _result_.


# 7.4.7 IteratorComplete ( _iteratorResult_ )

The abstract operation IteratorComplete takes argument _iteratorResult_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_iteratorResult_, "done")).


# 7.4.8 IteratorValue ( _iteratorResult_ )

The abstract operation IteratorValue takes argument _iteratorResult_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [Get](#sec-get-o-p)(_iteratorResult_, "value").


# 7.4.9 IteratorStep ( _iteratorRecord_ )

The abstract operation IteratorStep takes argument _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an Object or done, or a [throw completion](#sec-completion-record-specification-type). It requests the next value from _iteratorRecord_._\[\[Iterator\]\]_ by calling _iteratorRecord_._\[\[NextMethod\]\]_ and returns either done indicating that the [iterator](#sec-iterator-interface) has reached its end or the [IteratorResult object](#sec-iteratorresult-interface) if a next value is available. It performs the following steps when called:

1.  Let _result_ be ? [IteratorNext](#sec-iteratornext)(_iteratorRecord_).
2.  Let _done_ be [Completion](#sec-completion-ao)([IteratorComplete](#sec-iteratorcomplete)(_result_)).
3.  If _done_ is a [throw completion](#sec-completion-record-specification-type), then
    1.  Set _iteratorRecord_._\[\[Done\]\]_ to true.
    2.  Return ? _done_.
4.  Set _done_ to ! _done_.
5.  If _done_ is true, then
    1.  Set _iteratorRecord_._\[\[Done\]\]_ to true.
    2.  Return done.
6.  Return _result_.


# 7.4.10 IteratorStepValue ( _iteratorRecord_ )

The abstract operation IteratorStepValue takes argument _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an [ECMAScript language value](#sec-ecmascript-language-types) or done, or a [throw completion](#sec-completion-record-specification-type). It requests the next value from _iteratorRecord_._\[\[Iterator\]\]_ by calling _iteratorRecord_._\[\[NextMethod\]\]_ and returns either done indicating that the [iterator](#sec-iterator-interface) has reached its end or the value from the [IteratorResult object](#sec-iteratorresult-interface) if a next value is available. It performs the following steps when called:

1.  Let _result_ be ? [IteratorStep](#sec-iteratorstep)(_iteratorRecord_).
2.  If _result_ is done, then
    1.  Return done.
3.  Let _value_ be [Completion](#sec-completion-ao)([IteratorValue](#sec-iteratorvalue)(_result_)).
4.  If _value_ is a [throw completion](#sec-completion-record-specification-type), then
    1.  Set _iteratorRecord_._\[\[Done\]\]_ to true.
5.  Return ? _value_.


# 7.4.11 IteratorClose ( _iteratorRecord_, _completion_ )

The abstract operation IteratorClose takes arguments _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and _completion_ (a [Completion Record](#sec-completion-record-specification-type)) and returns a [Completion Record](#sec-completion-record-specification-type). It is used to notify an [iterator](#sec-iterator-interface) that it should perform any actions it would normally perform when it has reached its completed state. It performs the following steps when called:

1.  [Assert](#assert): _iteratorRecord_._\[\[Iterator\]\]_ [is an Object](#sec-object-type).
2.  Let _iterator_ be _iteratorRecord_._\[\[Iterator\]\]_.
3.  Let _innerResult_ be [Completion](#sec-completion-ao)([GetMethod](#sec-getmethod)(_iterator_, "return")).
4.  If _innerResult_ is a [normal completion](#sec-completion-record-specification-type), then
    1.  Let _return_ be _innerResult_._\[\[Value\]\]_.
    2.  If _return_ is undefined, return ? _completion_.
    3.  Set _innerResult_ to [Completion](#sec-completion-ao)([Call](#sec-call)(_return_, _iterator_)).
5.  If _completion_ is a [throw completion](#sec-completion-record-specification-type), return ? _completion_.
6.  If _innerResult_ is a [throw completion](#sec-completion-record-specification-type), return ? _innerResult_.
7.  If _innerResult_._\[\[Value\]\]_ [is not an Object](#sec-object-type), throw a TypeError exception.
8.  Return ? _completion_.


# 7.4.12 IteratorCloseAll ( _iters_, _completion_ )

The abstract operation IteratorCloseAll takes arguments _iters_ (a [List](#sec-list-and-record-specification-type) of [Iterator Records](#sec-iterator-records)) and _completion_ (a [Completion Record](#sec-completion-record-specification-type)) and returns a [Completion Record](#sec-completion-record-specification-type). It performs the following steps when called:

1.  For each element _iter_ of _iters_, in reverse [List](#sec-list-and-record-specification-type) order, do
    1.  Set _completion_ to [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_iter_, _completion_)).
2.  Return ? _completion_.


# 7.4.13 IfAbruptCloseIterator ( _value_, _iteratorRecord_ )

IfAbruptCloseIterator is a shorthand for a sequence of algorithm steps that use an [Iterator Record](#sec-iterator-records). An algorithm step of the form:

1.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_value_, _iteratorRecord_).

means the same thing as:

1.  [Assert](#assert): _value_ is a [Completion Record](#sec-completion-record-specification-type).
2.  If _value_ is an [abrupt completion](#sec-completion-record-specification-type), return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _value_).
3.  Else, set _value_ to ! _value_.


# 7.4.14 AsyncIteratorClose ( _iteratorRecord_, _completion_ )

The abstract operation AsyncIteratorClose takes arguments _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and _completion_ (a [Completion Record](#sec-completion-record-specification-type)) and returns a [Completion Record](#sec-completion-record-specification-type). It is used to notify an [async iterator](#sec-asynciterator-interface) that it should perform any actions it would normally perform when it has reached its completed state. It performs the following steps when called:

1.  [Assert](#assert): _iteratorRecord_._\[\[Iterator\]\]_ [is an Object](#sec-object-type).
2.  Let _iterator_ be _iteratorRecord_._\[\[Iterator\]\]_.
3.  Let _innerResult_ be [Completion](#sec-completion-ao)([GetMethod](#sec-getmethod)(_iterator_, "return")).
4.  If _innerResult_ is a [normal completion](#sec-completion-record-specification-type), then
    1.  Let _return_ be _innerResult_._\[\[Value\]\]_.
    2.  If _return_ is undefined, return ? _completion_.
    3.  Set _innerResult_ to [Completion](#sec-completion-ao)([Call](#sec-call)(_return_, _iterator_)).
    4.  If _innerResult_ is a [normal completion](#sec-completion-record-specification-type), set _innerResult_ to [Completion](#sec-completion-ao)([Await](#await)(_innerResult_._\[\[Value\]\]_)).
5.  If _completion_ is a [throw completion](#sec-completion-record-specification-type), return ? _completion_.
6.  If _innerResult_ is a [throw completion](#sec-completion-record-specification-type), return ? _innerResult_.
7.  If _innerResult_._\[\[Value\]\]_ [is not an Object](#sec-object-type), throw a TypeError exception.
8.  Return ? _completion_.


# 7.4.15 IfAbruptCloseAsyncIterator ( _value_, _iteratorRecord_ )

IfAbruptCloseAsyncIterator is a shorthand for a sequence of algorithm steps that use an [Iterator Record](#sec-iterator-records). An algorithm step of the form:

1.  [IfAbruptCloseAsyncIterator](#sec-ifabruptcloseasynciterator)(_value_, _iteratorRecord_).

means the same thing as:

1.  [Assert](#assert): _value_ is a [Completion Record](#sec-completion-record-specification-type).
2.  If _value_ is an [abrupt completion](#sec-completion-record-specification-type), return ? [AsyncIteratorClose](#sec-asynciteratorclose)(_iteratorRecord_, _value_).
3.  Else, set _value_ to ! _value_.


# 7.4.16 CreateIteratorResultObject ( _value_, _done_ )

The abstract operation CreateIteratorResultObject takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _done_ (a Boolean) and returns an Object that conforms to the [IteratorResult interface](#sec-iteratorresult-interface). It creates an object that conforms to the [IteratorResult interface](#sec-iteratorresult-interface). It performs the following steps when called:

1.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "value", _value_).
3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "done", _done_).
4.  Return _obj_.


# 7.4.17 CreateListIteratorRecord ( _list_ )

The abstract operation CreateListIteratorRecord takes argument _list_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns an [Iterator Record](#sec-iterator-records). It creates an [Iterator Record](#sec-iterator-records) whose _\[\[NextMethod\]\]_ returns the successive elements of _list_. It performs the following steps when called:

1.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _list_ and performs the following steps when called:
    1.  For each element _E_ of _list_, do
        1.  Perform ? [GeneratorYield](#sec-generatoryield)([CreateIteratorResultObject](#sec-createiterresultobject)(_E_, false)).
    2.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
2.  Let _iterator_ be [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, empty, [%Iterator.prototype%](#sec-%iterator.prototype%-object)).
3.  Return the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _iterator_, _\[\[NextMethod\]\]_: %GeneratorPrototype.next%, _\[\[Done\]\]_: false }.

Note

The list [iterator object](#sec-iterator-interface) is never directly accessible to ECMAScript code.


# 7.4.18 IteratorToList ( _iteratorRecord_ )

The abstract operation IteratorToList takes argument _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _values_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, then
        1.  Return _values_.
    3.  Append _next_ to _values_.


# 8 Syntax-Directed Operations

In addition to those defined in this section, specialized [syntax-directed operations](#sec-algorithm-conventions-syntax-directed-operations) are defined throughout this specification.


# 8.1 Runtime Semantics: Evaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) Evaluation takes no arguments and returns a [Completion Record](#sec-completion-record-specification-type).

Note

The definitions for this operation are distributed over the "ECMAScript Language" sections of this specification. Each definition appears after the defining occurrence of the relevant productions.


# 8.2 Scope Analysis


# 8.2.1 Static Semantics: BoundNames

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) BoundNames takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings.

[Note](#note-star-default-star)

"\*default\*" is used within this specification as a synthetic name for a module's default export when it does not have another name. An entry in the module's _\[\[Environment\]\]_ is created with that name and holds the corresponding value, and resolving the export named "default" by calling [ResolveExport ( _exportName_ \[, _resolveSet_ \] )](#sec-resolveexport) for the module will return a [ResolvedBinding Record](#resolvedbinding-record) whose _\[\[BindingName\]\]_ is "\*default\*", which will then resolve in the module's _\[\[Environment\]\]_ to the above-mentioned value. This is done only for ease of specification, so that anonymous default exports can be resolved like any other export. This "\*default\*" string is never accessible to ECMAScript code or to the module linking algorithm.

It is defined piecewise over the following productions:

[BindingIdentifier](#prod-BindingIdentifier) : [Identifier](#prod-Identifier)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier).

[BindingIdentifier](#prod-BindingIdentifier) : yield

1.  Return « "yield" ».

[BindingIdentifier](#prod-BindingIdentifier) : await

1.  Return « "await" ».

[LexicalDeclaration](#prod-LexicalDeclaration) : [LetOrConst](#prod-LetOrConst) [BindingList](#prod-BindingList) ;

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingList](#prod-BindingList).

[BindingList](#prod-BindingList) : [BindingList](#prod-BindingList) , [LexicalBinding](#prod-LexicalBinding)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingList](#prod-BindingList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [LexicalBinding](#prod-LexicalBinding).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[LexicalBinding](#prod-LexicalBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)opt

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[LexicalBinding](#prod-LexicalBinding) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingPattern](#prod-BindingPattern).

[VariableDeclarationList](#prod-VariableDeclarationList) : [VariableDeclarationList](#prod-VariableDeclarationList) , [VariableDeclaration](#prod-VariableDeclaration)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [VariableDeclarationList](#prod-VariableDeclarationList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [VariableDeclaration](#prod-VariableDeclaration).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[VariableDeclaration](#prod-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)opt

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[VariableDeclaration](#prod-VariableDeclaration) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingPattern](#prod-BindingPattern).

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { [BindingPropertyList](#prod-BindingPropertyList) , [BindingRestProperty](#prod-BindingRestProperty) }

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingPropertyList](#prod-BindingPropertyList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingRestProperty](#prod-BindingRestProperty).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[Elision](#prod-Elision)opt \]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement) \]

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingRestElement](#prod-BindingRestElement).

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[BindingElementList](#prod-BindingElementList) , [Elision](#prod-Elision)opt \]

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingElementList](#prod-BindingElementList).

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[BindingElementList](#prod-BindingElementList) , [Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement) \]

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingElementList](#prod-BindingElementList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingRestElement](#prod-BindingRestElement).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[BindingPropertyList](#prod-BindingPropertyList) : [BindingPropertyList](#prod-BindingPropertyList) , [BindingProperty](#prod-BindingProperty)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingPropertyList](#prod-BindingPropertyList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingProperty](#prod-BindingProperty).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[BindingElementList](#prod-BindingElementList) : [BindingElementList](#prod-BindingElementList) , [BindingElisionElement](#prod-BindingElisionElement)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingElementList](#prod-BindingElementList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingElisionElement](#prod-BindingElisionElement).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[BindingElisionElement](#prod-BindingElisionElement) : [Elision](#prod-Elision)opt [BindingElement](#prod-BindingElement)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingElement](#prod-BindingElement).

[BindingProperty](#prod-BindingProperty) : [PropertyName](#prod-PropertyName) : [BindingElement](#prod-BindingElement)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingElement](#prod-BindingElement).

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)opt

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)opt

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingPattern](#prod-BindingPattern).

[ForDeclaration](#prod-ForDeclaration) : [LetOrConst](#prod-LetOrConst) [ForBinding](#prod-ForBinding)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [ForBinding](#prod-ForBinding).

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[FunctionDeclaration](#prod-FunctionDeclaration) : function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return « "\*default\*" ».

[FormalParameters](#prod-FormalParameters) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[FormalParameters](#prod-FormalParameters) : [FormalParameterList](#prod-FormalParameterList) , [FunctionRestParameter](#prod-FunctionRestParameter)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameterList](#prod-FormalParameterList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [FunctionRestParameter](#prod-FunctionRestParameter).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[FormalParameterList](#prod-FormalParameterList) : [FormalParameterList](#prod-FormalParameterList) , [FormalParameter](#prod-FormalParameter)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameterList](#prod-FormalParameterList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameter](#prod-FormalParameter).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ArrowParameters](#prod-ArrowParameters) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _formals_ be the [ArrowFormalParameters](#prod-ArrowFormalParameters) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return the [BoundNames](#sec-static-semantics-boundnames) of _formals_.

[GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Return « "\*default\*" ».

[AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return « "\*default\*" ».

[ClassDeclaration](#prod-ClassDeclaration) : class [BindingIdentifier](#prod-BindingIdentifier) [ClassTail](#prod-ClassTail)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[ClassDeclaration](#prod-ClassDeclaration) : class [ClassTail](#prod-ClassTail)

1.  Return « "\*default\*" ».

[AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).

[AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return « "\*default\*" ».

[CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) : [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments)

1.  Let _head_ be the [AsyncArrowHead](#prod-AsyncArrowHead) that is [covered](#sec-syntactic-grammar) by [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead).
2.  Return the [BoundNames](#sec-static-semantics-boundnames) of _head_.

[ImportDeclaration](#prod-ImportDeclaration) : import [ImportClause](#prod-ImportClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ;

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [ImportClause](#prod-ImportClause).

[ImportDeclaration](#prod-ImportDeclaration) : import [ModuleSpecifier](#prod-ModuleSpecifier) [WithClause](#prod-WithClause)opt ;

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ImportClause](#prod-ImportClause) : [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NameSpaceImport](#prod-NameSpaceImport)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [ImportedDefaultBinding](#prod-ImportedDefaultBinding).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [NameSpaceImport](#prod-NameSpaceImport).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ImportClause](#prod-ImportClause) : [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NamedImports](#prod-NamedImports)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [ImportedDefaultBinding](#prod-ImportedDefaultBinding).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [NamedImports](#prod-NamedImports).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[NamedImports](#prod-NamedImports) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ImportsList](#prod-ImportsList) : [ImportsList](#prod-ImportsList) , [ImportSpecifier](#prod-ImportSpecifier)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [ImportsList](#prod-ImportsList).
2.  Let _names2_ be the [BoundNames](#sec-static-semantics-boundnames) of [ImportSpecifier](#prod-ImportSpecifier).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ImportSpecifier](#prod-ImportSpecifier) : [ModuleExportName](#prod-ModuleExportName) as [ImportedBinding](#prod-ImportedBinding)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [ImportedBinding](#prod-ImportedBinding).

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ; export [NamedExports](#prod-NamedExports) ;

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportDeclaration](#prod-ExportDeclaration) : export [VariableStatement](#prod-VariableStatement)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [VariableStatement](#prod-VariableStatement).

[ExportDeclaration](#prod-ExportDeclaration) : export [Declaration](#prod-Declaration)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [Declaration](#prod-Declaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [HoistableDeclaration](#prod-HoistableDeclaration)

1.  Let _declarationNames_ be the [BoundNames](#sec-static-semantics-boundnames) of [HoistableDeclaration](#prod-HoistableDeclaration).
2.  If _declarationNames_ does not include the element "\*default\*", append "\*default\*" to _declarationNames_.
3.  Return _declarationNames_.

[ExportDeclaration](#prod-ExportDeclaration) : export default [ClassDeclaration](#prod-ClassDeclaration)

1.  Let _declarationNames_ be the [BoundNames](#sec-static-semantics-boundnames) of [ClassDeclaration](#prod-ClassDeclaration).
2.  If _declarationNames_ does not include the element "\*default\*", append "\*default\*" to _declarationNames_.
3.  Return _declarationNames_.

[ExportDeclaration](#prod-ExportDeclaration) : export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  Return « "\*default\*" ».


# 8.2.2 Static Semantics: DeclarationPart

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) DeclarationPart takes no arguments and returns a [Parse Node](#sec-syntactic-grammar). It is defined piecewise over the following productions:

[HoistableDeclaration](#prod-HoistableDeclaration) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return [FunctionDeclaration](#prod-FunctionDeclaration).

[HoistableDeclaration](#prod-HoistableDeclaration) : [GeneratorDeclaration](#prod-GeneratorDeclaration)

1.  Return [GeneratorDeclaration](#prod-GeneratorDeclaration).

[HoistableDeclaration](#prod-HoistableDeclaration) : [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration)

1.  Return [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration).

[HoistableDeclaration](#prod-HoistableDeclaration) : [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration)

1.  Return [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration).

[Declaration](#prod-Declaration) : [ClassDeclaration](#prod-ClassDeclaration)

1.  Return [ClassDeclaration](#prod-ClassDeclaration).

[Declaration](#prod-Declaration) : [LexicalDeclaration](#prod-LexicalDeclaration)

1.  Return [LexicalDeclaration](#prod-LexicalDeclaration).


# 8.2.3 Static Semantics: IsConstantDeclaration

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsConstantDeclaration takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[LexicalDeclaration](#prod-LexicalDeclaration) : [LetOrConst](#prod-LetOrConst) [BindingList](#prod-BindingList) ;

1.  Return [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of [LetOrConst](#prod-LetOrConst).

[LetOrConst](#prod-LetOrConst) : let

1.  Return false.

[LetOrConst](#prod-LetOrConst) : const

1.  Return true.

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return false.

[ClassDeclaration](#prod-ClassDeclaration) : class [BindingIdentifier](#prod-BindingIdentifier) [ClassTail](#prod-ClassTail) class [ClassTail](#prod-ClassTail)

1.  Return false.

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) ; export [NamedExports](#prod-NamedExports) ; export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  Return false.

Note

It is not necessary to treat `export default` [AssignmentExpression](#prod-AssignmentExpression) as a constant declaration because there is no syntax that permits assignment to the internal bound name used to reference a module's default object.


# 8.2.4 Static Semantics: LexicallyDeclaredNames

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) LexicallyDeclaredNames takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It is defined piecewise over the following productions:

[Block](#prod-Block) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _names1_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [StatementList](#prod-StatementList).
2.  Let _names2_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[StatementListItem](#prod-StatementListItem) : [Statement](#prod-Statement)

1.  If [Statement](#prod-Statement) is [Statement](#prod-Statement) : [LabelledStatement](#prod-LabelledStatement) , return the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [LabelledStatement](#prod-LabelledStatement).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [Declaration](#prod-Declaration).

[CaseBlock](#prod-CaseBlock) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  If the first [CaseClauses](#prod-CaseClauses) is present, let _names1_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of the first [CaseClauses](#prod-CaseClauses).
2.  Else, let _names1_ be a new empty [List](#sec-list-and-record-specification-type).
3.  Let _names2_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [DefaultClause](#prod-DefaultClause).
4.  If the second [CaseClauses](#prod-CaseClauses) is present, let _names3_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of the second [CaseClauses](#prod-CaseClauses).
5.  Else, let _names3_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Return the [list-concatenation](#list-concatenation) of _names1_, _names2_, and _names3_.

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _names1_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [CaseClauses](#prod-CaseClauses).
2.  Let _names2_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [CaseClause](#prod-CaseClause).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [LabelledItem](#prod-LabelledItem).

[LabelledItem](#prod-LabelledItem) : [Statement](#prod-Statement)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [FunctionDeclaration](#prod-FunctionDeclaration).

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[FunctionStatementList](#prod-FunctionStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelLexicallyDeclaredNames](#sec-static-semantics-toplevellexicallydeclarednames) of [StatementList](#prod-StatementList).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelLexicallyDeclaredNames](#sec-static-semantics-toplevellexicallydeclarednames) of [StatementList](#prod-StatementList).

[ConciseBody](#prod-ConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[AsyncConciseBody](#prod-AsyncConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[Script](#prod-Script) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ScriptBody](#prod-ScriptBody) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelLexicallyDeclaredNames](#sec-static-semantics-toplevellexicallydeclarednames) of [StatementList](#prod-StatementList).

Note 1

At the top level of a [Script](#prod-Script), function declarations are treated like var declarations rather than like lexical declarations.

Note 2

The LexicallyDeclaredNames of a [Module](#prod-Module) includes the names of all of its imported bindings.

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _names1_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _names2_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [ImportDeclaration](#prod-ImportDeclaration).

[ModuleItem](#prod-ModuleItem) : [ExportDeclaration](#prod-ExportDeclaration)

1.  If [ExportDeclaration](#prod-ExportDeclaration) is `export` [VariableStatement](#prod-VariableStatement), return a new empty [List](#sec-list-and-record-specification-type).
2.  Return the [BoundNames](#sec-static-semantics-boundnames) of [ExportDeclaration](#prod-ExportDeclaration).

[ModuleItem](#prod-ModuleItem) : [StatementListItem](#prod-StatementListItem)

1.  Return the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [StatementListItem](#prod-StatementListItem).

Note 3

At the top level of a [Module](#prod-Module), function declarations are treated like lexical declarations rather than like var declarations.


# 8.2.5 Static Semantics: LexicallyScopedDeclarations

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) LexicallyScopedDeclarations takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [Parse Nodes](#sec-syntactic-grammar). It is defined piecewise over the following productions:

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _declarations1_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Let _declarations2_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[StatementListItem](#prod-StatementListItem) : [Statement](#prod-Statement)

1.  If [Statement](#prod-Statement) is [Statement](#prod-Statement) : [LabelledStatement](#prod-LabelledStatement) , return the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [LabelledStatement](#prod-LabelledStatement).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [DeclarationPart](#sec-static-semantics-declarationpart) of [Declaration](#prod-Declaration).

[CaseBlock](#prod-CaseBlock) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  If the first [CaseClauses](#prod-CaseClauses) is present, let _declarations1_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of the first [CaseClauses](#prod-CaseClauses).
2.  Else, let _declarations1_ be a new empty [List](#sec-list-and-record-specification-type).
3.  Let _declarations2_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [DefaultClause](#prod-DefaultClause).
4.  If the second [CaseClauses](#prod-CaseClauses) is present, let _declarations3_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of the second [CaseClauses](#prod-CaseClauses).
5.  Else, let _declarations3_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Return the [list-concatenation](#list-concatenation) of _declarations1_, _declarations2_, and _declarations3_.

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _declarations1_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [CaseClauses](#prod-CaseClauses).
2.  Let _declarations2_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [CaseClause](#prod-CaseClause).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [LabelledItem](#prod-LabelledItem).

[LabelledItem](#prod-LabelledItem) : [Statement](#prod-Statement)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return « [FunctionDeclaration](#prod-FunctionDeclaration) ».

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[FunctionStatementList](#prod-FunctionStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelLexicallyScopedDeclarations](#sec-static-semantics-toplevellexicallyscopeddeclarations) of [StatementList](#prod-StatementList).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelLexicallyScopedDeclarations](#sec-static-semantics-toplevellexicallyscopeddeclarations) of [StatementList](#prod-StatementList).

[ConciseBody](#prod-ConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[AsyncConciseBody](#prod-AsyncConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[Script](#prod-Script) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ScriptBody](#prod-ScriptBody) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelLexicallyScopedDeclarations](#sec-static-semantics-toplevellexicallyscopeddeclarations) of [StatementList](#prod-StatementList).

[Module](#prod-Module) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _declarations1_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _declarations2_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ; export [NamedExports](#prod-NamedExports) ; export [VariableStatement](#prod-VariableStatement)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportDeclaration](#prod-ExportDeclaration) : export [Declaration](#prod-Declaration)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [DeclarationPart](#sec-static-semantics-declarationpart) of [Declaration](#prod-Declaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [HoistableDeclaration](#prod-HoistableDeclaration)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [DeclarationPart](#sec-static-semantics-declarationpart) of [HoistableDeclaration](#prod-HoistableDeclaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [ClassDeclaration](#prod-ClassDeclaration)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is [ClassDeclaration](#prod-ClassDeclaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is this [ExportDeclaration](#prod-ExportDeclaration).


# 8.2.6 Static Semantics: VarDeclaredNames

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) VarDeclaredNames takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It is defined piecewise over the following productions:

[Statement](#prod-Statement) : [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement) [ContinueStatement](#prod-ContinueStatement) [BreakStatement](#prod-BreakStatement) [ReturnStatement](#prod-ReturnStatement) [ThrowStatement](#prod-ThrowStatement) [DebuggerStatement](#prod-DebuggerStatement)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[Block](#prod-Block) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [StatementList](#prod-StatementList).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[VariableStatement](#prod-VariableStatement) : var [VariableDeclarationList](#prod-VariableDeclarationList) ;

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [VariableDeclarationList](#prod-VariableDeclarationList).

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

1.  Let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of the first [Statement](#prod-Statement).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of the second [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ;

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[ForStatement](#prod-ForStatement) : for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [VariableDeclarationList](#prod-VariableDeclarationList).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ForStatement](#prod-ForStatement) : for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[ForInOfStatement](#prod-ForInOfStatement) : for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [ForBinding](#prod-ForBinding).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).

[WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [CaseBlock](#prod-CaseBlock).

[CaseBlock](#prod-CaseBlock) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  If the first [CaseClauses](#prod-CaseClauses) is present, let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of the first [CaseClauses](#prod-CaseClauses).
2.  Else, let _names1_ be a new empty [List](#sec-list-and-record-specification-type).
3.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [DefaultClause](#prod-DefaultClause).
4.  If the second [CaseClauses](#prod-CaseClauses) is present, let _names3_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of the second [CaseClauses](#prod-CaseClauses).
5.  Else, let _names3_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Return the [list-concatenation](#list-concatenation) of _names1_, _names2_, and _names3_.

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [CaseClauses](#prod-CaseClauses).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [CaseClause](#prod-CaseClause).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [LabelledItem](#prod-LabelledItem).

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch)

1.  Let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Block](#prod-Block).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Catch](#prod-Catch).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Finally](#prod-Finally)

1.  Let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Block](#prod-Block).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Finally](#prod-Finally).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch) [Finally](#prod-Finally)

1.  Let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Block](#prod-Block).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Catch](#prod-Catch).
3.  Let _names3_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Finally](#prod-Finally).
4.  Return the [list-concatenation](#list-concatenation) of _names1_, _names2_, and _names3_.

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

1.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Block](#prod-Block).

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[FunctionStatementList](#prod-FunctionStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [StatementList](#prod-StatementList).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [StatementList](#prod-StatementList).

[ConciseBody](#prod-ConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[AsyncConciseBody](#prod-AsyncConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[Script](#prod-Script) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ScriptBody](#prod-ScriptBody) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [StatementList](#prod-StatementList).

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _names1_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ModuleItem](#prod-ModuleItem) : [ExportDeclaration](#prod-ExportDeclaration)

1.  If [ExportDeclaration](#prod-ExportDeclaration) is `export` [VariableStatement](#prod-VariableStatement), return the [BoundNames](#sec-static-semantics-boundnames) of [ExportDeclaration](#prod-ExportDeclaration).
2.  Return a new empty [List](#sec-list-and-record-specification-type).


# 8.2.7 Static Semantics: VarScopedDeclarations

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) VarScopedDeclarations takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [Parse Nodes](#sec-syntactic-grammar). It is defined piecewise over the following productions:

[Statement](#prod-Statement) : [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement) [ContinueStatement](#prod-ContinueStatement) [BreakStatement](#prod-BreakStatement) [ReturnStatement](#prod-ReturnStatement) [ThrowStatement](#prod-ThrowStatement) [DebuggerStatement](#prod-DebuggerStatement)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[Block](#prod-Block) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[VariableDeclarationList](#prod-VariableDeclarationList) : [VariableDeclaration](#prod-VariableDeclaration)

1.  Return « [VariableDeclaration](#prod-VariableDeclaration) ».

[VariableDeclarationList](#prod-VariableDeclarationList) : [VariableDeclarationList](#prod-VariableDeclarationList) , [VariableDeclaration](#prod-VariableDeclaration)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [VariableDeclarationList](#prod-VariableDeclarationList).
2.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and « [VariableDeclaration](#prod-VariableDeclaration) ».

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of the first [Statement](#prod-Statement).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of the second [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ;

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[ForStatement](#prod-ForStatement) : for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [VariableDeclarationList](#prod-VariableDeclarationList).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[ForStatement](#prod-ForStatement) : for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[ForInOfStatement](#prod-ForInOfStatement) : for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _declarations1_ be « [ForBinding](#prod-ForBinding) ».
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).

[WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [CaseBlock](#prod-CaseBlock).

[CaseBlock](#prod-CaseBlock) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  If the first [CaseClauses](#prod-CaseClauses) is present, let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of the first [CaseClauses](#prod-CaseClauses).
2.  Else, let _declarations1_ be a new empty [List](#sec-list-and-record-specification-type).
3.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [DefaultClause](#prod-DefaultClause).
4.  If the second [CaseClauses](#prod-CaseClauses) is present, let _declarations3_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of the second [CaseClauses](#prod-CaseClauses).
5.  Else, let _declarations3_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Return the [list-concatenation](#list-concatenation) of _declarations1_, _declarations2_, and _declarations3_.

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [CaseClauses](#prod-CaseClauses).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [CaseClause](#prod-CaseClause).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [LabelledItem](#prod-LabelledItem).

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Block](#prod-Block).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Catch](#prod-Catch).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Finally](#prod-Finally)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Block](#prod-Block).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Finally](#prod-Finally).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch) [Finally](#prod-Finally)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Block](#prod-Block).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Catch](#prod-Catch).
3.  Let _declarations3_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Finally](#prod-Finally).
4.  Return the [list-concatenation](#list-concatenation) of _declarations1_, _declarations2_, and _declarations3_.

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

1.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Block](#prod-Block).

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[FunctionStatementList](#prod-FunctionStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [StatementList](#prod-StatementList).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [StatementList](#prod-StatementList).

[ConciseBody](#prod-ConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[AsyncConciseBody](#prod-AsyncConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[Script](#prod-Script) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ScriptBody](#prod-ScriptBody) : [StatementList](#prod-StatementList)

1.  Return the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [StatementList](#prod-StatementList).

[Module](#prod-Module) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _declarations1_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ModuleItem](#prod-ModuleItem) : [ExportDeclaration](#prod-ExportDeclaration)

1.  If [ExportDeclaration](#prod-ExportDeclaration) is `export` [VariableStatement](#prod-VariableStatement), return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [VariableStatement](#prod-VariableStatement).
2.  Return a new empty [List](#sec-list-and-record-specification-type).


# 8.2.8 Static Semantics: TopLevelLexicallyDeclaredNames

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) TopLevelLexicallyDeclaredNames takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It is defined piecewise over the following productions:

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _names1_ be the [TopLevelLexicallyDeclaredNames](#sec-static-semantics-toplevellexicallydeclarednames) of [StatementList](#prod-StatementList).
2.  Let _names2_ be the [TopLevelLexicallyDeclaredNames](#sec-static-semantics-toplevellexicallydeclarednames) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[StatementListItem](#prod-StatementListItem) : [Statement](#prod-Statement)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  If [Declaration](#prod-Declaration) is [Declaration](#prod-Declaration) : [HoistableDeclaration](#prod-HoistableDeclaration) , then
    1.  Return a new empty [List](#sec-list-and-record-specification-type).
2.  Return the [BoundNames](#sec-static-semantics-boundnames) of [Declaration](#prod-Declaration).

Note

At the top level of a function, or script, function declarations are treated like var declarations rather than like lexical declarations.


# 8.2.9 Static Semantics: TopLevelLexicallyScopedDeclarations

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) TopLevelLexicallyScopedDeclarations takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [Parse Nodes](#sec-syntactic-grammar). It is defined piecewise over the following productions:

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _declarations1_ be the [TopLevelLexicallyScopedDeclarations](#sec-static-semantics-toplevellexicallyscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Let _declarations2_ be the [TopLevelLexicallyScopedDeclarations](#sec-static-semantics-toplevellexicallyscopeddeclarations) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[StatementListItem](#prod-StatementListItem) : [Statement](#prod-Statement)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  If [Declaration](#prod-Declaration) is [Declaration](#prod-Declaration) : [HoistableDeclaration](#prod-HoistableDeclaration) , then
    1.  Return a new empty [List](#sec-list-and-record-specification-type).
2.  Return « [Declaration](#prod-Declaration) ».


# 8.2.10 Static Semantics: TopLevelVarDeclaredNames

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) TopLevelVarDeclaredNames takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It is defined piecewise over the following productions:

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _names1_ be the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [StatementList](#prod-StatementList).
2.  Let _names2_ be the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  If [Declaration](#prod-Declaration) is [Declaration](#prod-Declaration) : [HoistableDeclaration](#prod-HoistableDeclaration) , then
    1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [HoistableDeclaration](#prod-HoistableDeclaration).
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[StatementListItem](#prod-StatementListItem) : [Statement](#prod-Statement)

1.  If [Statement](#prod-Statement) is [Statement](#prod-Statement) : [LabelledStatement](#prod-LabelledStatement) , return the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [Statement](#prod-Statement).
2.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

Note

At the top level of a function or script, inner function declarations are treated like var declarations.

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [LabelledItem](#prod-LabelledItem).

[LabelledItem](#prod-LabelledItem) : [Statement](#prod-Statement)

1.  If [Statement](#prod-Statement) is [Statement](#prod-Statement) : [LabelledStatement](#prod-LabelledStatement) , return the [TopLevelVarDeclaredNames](#sec-static-semantics-toplevelvardeclarednames) of [Statement](#prod-Statement).
2.  Return the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [FunctionDeclaration](#prod-FunctionDeclaration).


# 8.2.11 Static Semantics: TopLevelVarScopedDeclarations

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) TopLevelVarScopedDeclarations takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [Parse Nodes](#sec-syntactic-grammar). It is defined piecewise over the following productions:

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _declarations1_ be the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [StatementList](#prod-StatementList).
2.  Let _declarations2_ be the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [StatementListItem](#prod-StatementListItem).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

[StatementListItem](#prod-StatementListItem) : [Statement](#prod-Statement)

1.  If [Statement](#prod-Statement) is [Statement](#prod-Statement) : [LabelledStatement](#prod-LabelledStatement) , return the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [Statement](#prod-Statement).
2.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  If [Declaration](#prod-Declaration) is [Declaration](#prod-Declaration) : [HoistableDeclaration](#prod-HoistableDeclaration) , then
    1.  Let _declaration_ be the [DeclarationPart](#sec-static-semantics-declarationpart) of [HoistableDeclaration](#prod-HoistableDeclaration).
    2.  Return « _declaration_ ».
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [LabelledItem](#prod-LabelledItem).

[LabelledItem](#prod-LabelledItem) : [Statement](#prod-Statement)

1.  If [Statement](#prod-Statement) is [Statement](#prod-Statement) : [LabelledStatement](#prod-LabelledStatement) , return the [TopLevelVarScopedDeclarations](#sec-static-semantics-toplevelvarscopeddeclarations) of [Statement](#prod-Statement).
2.  Return the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return « [FunctionDeclaration](#prod-FunctionDeclaration) ».


# 8.3 Labels


# 8.3.1 Static Semantics: ContainsDuplicateLabels

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ContainsDuplicateLabels takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns a Boolean. It is defined piecewise over the following productions:

[Statement](#prod-Statement) : [VariableStatement](#prod-VariableStatement) [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement) [ContinueStatement](#prod-ContinueStatement) [BreakStatement](#prod-BreakStatement) [ReturnStatement](#prod-ReturnStatement) [ThrowStatement](#prod-ThrowStatement) [DebuggerStatement](#prod-DebuggerStatement) [Block](#prod-Block) : { } [StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  Return false.

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _hasDuplicates_ be [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [StatementList](#prod-StatementList) with argument _labelSet_.
2.  If _hasDuplicates_ is true, return true.
3.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [StatementListItem](#prod-StatementListItem) with argument _labelSet_.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

1.  Let _hasDuplicate_ be [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of the first [Statement](#prod-Statement) with argument _labelSet_.
2.  If _hasDuplicate_ is true, return true.
3.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of the second [Statement](#prod-Statement) with argument _labelSet_.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Statement](#prod-Statement) with argument _labelSet_.

[DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ;

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Statement](#prod-Statement) with argument _labelSet_.

[WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Statement](#prod-Statement) with argument _labelSet_.

[ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Statement](#prod-Statement) with argument _labelSet_.

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Statement](#prod-Statement) with argument _labelSet_.

Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).

[WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Statement](#prod-Statement) with argument _labelSet_.

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [CaseBlock](#prod-CaseBlock) with argument _labelSet_.

[CaseBlock](#prod-CaseBlock) : { }

1.  Return false.

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  If the first [CaseClauses](#prod-CaseClauses) is present, then
    1.  If [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of the first [CaseClauses](#prod-CaseClauses) with argument _labelSet_ is true, return true.
2.  If [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [DefaultClause](#prod-DefaultClause) with argument _labelSet_ is true, return true.
3.  If the second [CaseClauses](#prod-CaseClauses) is not present, return false.
4.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of the second [CaseClauses](#prod-CaseClauses) with argument _labelSet_.

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _hasDuplicates_ be [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [CaseClauses](#prod-CaseClauses) with argument _labelSet_.
2.  If _hasDuplicates_ is true, return true.
3.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [CaseClause](#prod-CaseClause) with argument _labelSet_.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [StatementList](#prod-StatementList) with argument _labelSet_.
2.  Return false.

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [StatementList](#prod-StatementList) with argument _labelSet_.
2.  Return false.

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Let _label_ be the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier).
2.  If _labelSet_ contains _label_, return true.
3.  Let _newLabelSet_ be the [list-concatenation](#list-concatenation) of _labelSet_ and « _label_ ».
4.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [LabelledItem](#prod-LabelledItem) with argument _newLabelSet_.

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return false.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch)

1.  Let _hasDuplicates_ be [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Block](#prod-Block) with argument _labelSet_.
2.  If _hasDuplicates_ is true, return true.
3.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Catch](#prod-Catch) with argument _labelSet_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Finally](#prod-Finally)

1.  Let _hasDuplicates_ be [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Block](#prod-Block) with argument _labelSet_.
2.  If _hasDuplicates_ is true, return true.
3.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Finally](#prod-Finally) with argument _labelSet_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch) [Finally](#prod-Finally)

1.  If [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Block](#prod-Block) with argument _labelSet_ is true, return true.
2.  If [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Catch](#prod-Catch) with argument _labelSet_ is true, return true.
3.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Finally](#prod-Finally) with argument _labelSet_.

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Block](#prod-Block) with argument _labelSet_.

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return false.

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return false.

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _hasDuplicates_ be [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [ModuleItemList](#prod-ModuleItemList) with argument _labelSet_.
2.  If _hasDuplicates_ is true, return true.
3.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [ModuleItem](#prod-ModuleItem) with argument _labelSet_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [ExportDeclaration](#prod-ExportDeclaration)

1.  Return false.


# 8.3.2 Static Semantics: ContainsUndefinedBreakTarget

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ContainsUndefinedBreakTarget takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns a Boolean. It is defined piecewise over the following productions:

[Statement](#prod-Statement) : [VariableStatement](#prod-VariableStatement) [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement) [ContinueStatement](#prod-ContinueStatement) [ReturnStatement](#prod-ReturnStatement) [ThrowStatement](#prod-ThrowStatement) [DebuggerStatement](#prod-DebuggerStatement) [Block](#prod-Block) : { } [StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  Return false.

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [StatementList](#prod-StatementList) with argument _labelSet_.
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [StatementListItem](#prod-StatementListItem) with argument _labelSet_.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of the first [Statement](#prod-Statement) with argument _labelSet_.
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of the second [Statement](#prod-Statement) with argument _labelSet_.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Statement](#prod-Statement) with argument _labelSet_.

[DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ;

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Statement](#prod-Statement) with argument _labelSet_.

[WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Statement](#prod-Statement) with argument _labelSet_.

[ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Statement](#prod-Statement) with argument _labelSet_.

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Statement](#prod-Statement) with argument _labelSet_.

Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).

[BreakStatement](#prod-BreakStatement) : break ;

1.  Return false.

[BreakStatement](#prod-BreakStatement) : break [LabelIdentifier](#prod-LabelIdentifier) ;

1.  If _labelSet_ does not contain the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier), return true.
2.  Return false.

[WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Statement](#prod-Statement) with argument _labelSet_.

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [CaseBlock](#prod-CaseBlock) with argument _labelSet_.

[CaseBlock](#prod-CaseBlock) : { }

1.  Return false.

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  If the first [CaseClauses](#prod-CaseClauses) is present, then
    1.  If [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of the first [CaseClauses](#prod-CaseClauses) with argument _labelSet_ is true, return true.
2.  If [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [DefaultClause](#prod-DefaultClause) with argument _labelSet_ is true, return true.
3.  If the second [CaseClauses](#prod-CaseClauses) is not present, return false.
4.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of the second [CaseClauses](#prod-CaseClauses) with argument _labelSet_.

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [CaseClauses](#prod-CaseClauses) with argument _labelSet_.
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [CaseClause](#prod-CaseClause) with argument _labelSet_.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [StatementList](#prod-StatementList) with argument _labelSet_.
2.  Return false.

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [StatementList](#prod-StatementList) with argument _labelSet_.
2.  Return false.

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Let _label_ be the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier).
2.  Let _newLabelSet_ be the [list-concatenation](#list-concatenation) of _labelSet_ and « _label_ ».
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [LabelledItem](#prod-LabelledItem) with argument _newLabelSet_.

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return false.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Block](#prod-Block) with argument _labelSet_.
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Catch](#prod-Catch) with argument _labelSet_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Finally](#prod-Finally)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Block](#prod-Block) with argument _labelSet_.
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Finally](#prod-Finally) with argument _labelSet_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch) [Finally](#prod-Finally)

1.  If [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Block](#prod-Block) with argument _labelSet_ is true, return true.
2.  If [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Catch](#prod-Catch) with argument _labelSet_ is true, return true.
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Finally](#prod-Finally) with argument _labelSet_.

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Block](#prod-Block) with argument _labelSet_.

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return false.

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return false.

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [ModuleItemList](#prod-ModuleItemList) with argument _labelSet_.
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [ModuleItem](#prod-ModuleItem) with argument _labelSet_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [ExportDeclaration](#prod-ExportDeclaration)

1.  Return false.


# 8.3.3 Static Semantics: ContainsUndefinedContinueTarget

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ContainsUndefinedContinueTarget takes arguments _iterationSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns a Boolean. It is defined piecewise over the following productions:

[Statement](#prod-Statement) : [VariableStatement](#prod-VariableStatement) [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement) [BreakStatement](#prod-BreakStatement) [ReturnStatement](#prod-ReturnStatement) [ThrowStatement](#prod-ThrowStatement) [DebuggerStatement](#prod-DebuggerStatement) [Block](#prod-Block) : { } [StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration)

1.  Return false.

[Statement](#prod-Statement) : [BlockStatement](#prod-BlockStatement)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [BlockStatement](#prod-BlockStatement) with arguments _iterationSet_ and « ».

[BreakableStatement](#prod-BreakableStatement) : [IterationStatement](#prod-IterationStatement)

1.  Let _newIterationSet_ be the [list-concatenation](#list-concatenation) of _iterationSet_ and _labelSet_.
2.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [IterationStatement](#prod-IterationStatement) with arguments _newIterationSet_ and « ».

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [StatementList](#prod-StatementList) with arguments _iterationSet_ and « ».
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [StatementListItem](#prod-StatementListItem) with arguments _iterationSet_ and « ».

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of the first [Statement](#prod-Statement) with arguments _iterationSet_ and « ».
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of the second [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

[DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ;

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

[WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

[ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).

[ContinueStatement](#prod-ContinueStatement) : continue ;

1.  Return false.

[ContinueStatement](#prod-ContinueStatement) : continue [LabelIdentifier](#prod-LabelIdentifier) ;

1.  If _iterationSet_ does not contain the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier), return true.
2.  Return false.

[WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [CaseBlock](#prod-CaseBlock) with arguments _iterationSet_ and « ».

[CaseBlock](#prod-CaseBlock) : { }

1.  Return false.

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  If the first [CaseClauses](#prod-CaseClauses) is present, then
    1.  If [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of the first [CaseClauses](#prod-CaseClauses) with arguments _iterationSet_ and « » is true, return true.
2.  If [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [DefaultClause](#prod-DefaultClause) with arguments _iterationSet_ and « » is true, return true.
3.  If the second [CaseClauses](#prod-CaseClauses) is not present, return false.
4.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of the second [CaseClauses](#prod-CaseClauses) with arguments _iterationSet_ and « ».

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [CaseClauses](#prod-CaseClauses) with arguments _iterationSet_ and « ».
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [CaseClause](#prod-CaseClause) with arguments _iterationSet_ and « ».

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [StatementList](#prod-StatementList) with arguments _iterationSet_ and « ».
2.  Return false.

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If the [StatementList](#prod-StatementList) is present, return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [StatementList](#prod-StatementList) with arguments _iterationSet_ and « ».
2.  Return false.

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Let _label_ be the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier).
2.  Let _newLabelSet_ be the [list-concatenation](#list-concatenation) of _labelSet_ and « _label_ ».
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [LabelledItem](#prod-LabelledItem) with arguments _iterationSet_ and _newLabelSet_.

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return false.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Block](#prod-Block) with arguments _iterationSet_ and « ».
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Catch](#prod-Catch) with arguments _iterationSet_ and « ».

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Finally](#prod-Finally)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Block](#prod-Block) with arguments _iterationSet_ and « ».
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Finally](#prod-Finally) with arguments _iterationSet_ and « ».

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch) [Finally](#prod-Finally)

1.  If [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Block](#prod-Block) with arguments _iterationSet_ and « » is true, return true.
2.  If [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Catch](#prod-Catch) with arguments _iterationSet_ and « » is true, return true.
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Finally](#prod-Finally) with arguments _iterationSet_ and « ».

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Block](#prod-Block) with arguments _iterationSet_ and « ».

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return false.

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return false.

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _hasUndefinedLabels_ be [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [ModuleItemList](#prod-ModuleItemList) with arguments _iterationSet_ and « ».
2.  If _hasUndefinedLabels_ is true, return true.
3.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [ModuleItem](#prod-ModuleItem) with arguments _iterationSet_ and « ».

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [ExportDeclaration](#prod-ExportDeclaration)

1.  Return false.


# 8.4 Function Name Inference


# 8.4.1 Static Semantics: HasName

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) HasName takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _expr_ be the [ParenthesizedExpression](#prod-ParenthesizedExpression) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  If [IsFunctionDefinition](#sec-static-semantics-isfunctiondefinition) of _expr_ is false, return false.
3.  Return [HasName](#sec-static-semantics-hasname) of _expr_.

[FunctionExpression](#prod-FunctionExpression) : function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [ArrowFunction](#prod-ArrowFunction) : [ArrowParameters](#prod-ArrowParameters) \=> [ConciseBody](#prod-ConciseBody) [AsyncArrowFunction](#prod-AsyncArrowFunction) : async [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) \=> [AsyncConciseBody](#prod-AsyncConciseBody) [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) \=> [AsyncConciseBody](#prod-AsyncConciseBody) [ClassExpression](#prod-ClassExpression) : class [ClassTail](#prod-ClassTail)

1.  Return false.

[FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [ClassExpression](#prod-ClassExpression) : class [BindingIdentifier](#prod-BindingIdentifier) [ClassTail](#prod-ClassTail)

1.  Return true.


# 8.4.2 Static Semantics: IsFunctionDefinition

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsFunctionDefinition takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _expr_ be the [ParenthesizedExpression](#prod-ParenthesizedExpression) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return [IsFunctionDefinition](#sec-static-semantics-isfunctiondefinition) of _expr_.

[PrimaryExpression](#prod-PrimaryExpression) : this [IdentifierReference](#prod-IdentifierReference) [Literal](#prod-Literal) [ArrayLiteral](#prod-ArrayLiteral) [ObjectLiteral](#prod-ObjectLiteral) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateLiteral](#prod-TemplateLiteral) [MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) \[[Expression](#prod-Expression) \] [MemberExpression](#prod-MemberExpression) . [IdentifierName](#prod-IdentifierName) [MemberExpression](#prod-MemberExpression) [TemplateLiteral](#prod-TemplateLiteral) [SuperProperty](#prod-SuperProperty) [MetaProperty](#prod-MetaProperty) new [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments) [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) [NewExpression](#prod-NewExpression) : new [NewExpression](#prod-NewExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) : [CallExpression](#prod-CallExpression) [OptionalExpression](#prod-OptionalExpression) [UpdateExpression](#prod-UpdateExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) ++ [LeftHandSideExpression](#prod-LeftHandSideExpression) \-- ++ [UnaryExpression](#prod-UnaryExpression) \-- [UnaryExpression](#prod-UnaryExpression) [UnaryExpression](#prod-UnaryExpression) : delete [UnaryExpression](#prod-UnaryExpression) void [UnaryExpression](#prod-UnaryExpression) typeof [UnaryExpression](#prod-UnaryExpression) + [UnaryExpression](#prod-UnaryExpression) \- [UnaryExpression](#prod-UnaryExpression) ~ [UnaryExpression](#prod-UnaryExpression) ! [UnaryExpression](#prod-UnaryExpression) [AwaitExpression](#prod-AwaitExpression) [ExponentiationExpression](#prod-ExponentiationExpression) : [UpdateExpression](#prod-UpdateExpression) \*\* [ExponentiationExpression](#prod-ExponentiationExpression) [MultiplicativeExpression](#prod-MultiplicativeExpression) : [MultiplicativeExpression](#prod-MultiplicativeExpression) [MultiplicativeOperator](#prod-MultiplicativeOperator) [ExponentiationExpression](#prod-ExponentiationExpression) [AdditiveExpression](#prod-AdditiveExpression) : [AdditiveExpression](#prod-AdditiveExpression) + [MultiplicativeExpression](#prod-MultiplicativeExpression) [AdditiveExpression](#prod-AdditiveExpression) \- [MultiplicativeExpression](#prod-MultiplicativeExpression) [ShiftExpression](#prod-ShiftExpression) : [ShiftExpression](#prod-ShiftExpression) << [AdditiveExpression](#prod-AdditiveExpression) [ShiftExpression](#prod-ShiftExpression) \>> [AdditiveExpression](#prod-AdditiveExpression) [ShiftExpression](#prod-ShiftExpression) \>>> [AdditiveExpression](#prod-AdditiveExpression) [RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) < [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) \> [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) <= [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) \>= [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) instanceof [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) in [ShiftExpression](#prod-ShiftExpression) [PrivateIdentifier](#prod-PrivateIdentifier) in [ShiftExpression](#prod-ShiftExpression) [EqualityExpression](#prod-EqualityExpression) : [EqualityExpression](#prod-EqualityExpression) \== [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) != [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) \=== [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) !== [RelationalExpression](#prod-RelationalExpression) [BitwiseANDExpression](#prod-BitwiseANDExpression) : [BitwiseANDExpression](#prod-BitwiseANDExpression) & [EqualityExpression](#prod-EqualityExpression) [BitwiseXORExpression](#prod-BitwiseXORExpression) : [BitwiseXORExpression](#prod-BitwiseXORExpression) ^ [BitwiseANDExpression](#prod-BitwiseANDExpression) [BitwiseORExpression](#prod-BitwiseORExpression) : [BitwiseORExpression](#prod-BitwiseORExpression) | [BitwiseXORExpression](#prod-BitwiseXORExpression) [LogicalANDExpression](#prod-LogicalANDExpression) : [LogicalANDExpression](#prod-LogicalANDExpression) && [BitwiseORExpression](#prod-BitwiseORExpression) [LogicalORExpression](#prod-LogicalORExpression) : [LogicalORExpression](#prod-LogicalORExpression) || [LogicalANDExpression](#prod-LogicalANDExpression) [CoalesceExpression](#prod-CoalesceExpression) : [CoalesceExpressionHead](#prod-CoalesceExpressionHead) ?? [BitwiseORExpression](#prod-BitwiseORExpression) [ConditionalExpression](#prod-ConditionalExpression) : [ShortCircuitExpression](#prod-ShortCircuitExpression) ? [AssignmentExpression](#prod-AssignmentExpression) : [AssignmentExpression](#prod-AssignmentExpression) [AssignmentExpression](#prod-AssignmentExpression) : [YieldExpression](#prod-YieldExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) \= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) [AssignmentOperator](#prod-AssignmentOperator) [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) &&= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ||= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ??= [AssignmentExpression](#prod-AssignmentExpression) [Expression](#prod-Expression) : [Expression](#prod-Expression) , [AssignmentExpression](#prod-AssignmentExpression)

1.  Return false.

[AssignmentExpression](#prod-AssignmentExpression) : [ArrowFunction](#prod-ArrowFunction) [AsyncArrowFunction](#prod-AsyncArrowFunction) [FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [ClassExpression](#prod-ClassExpression) : class [BindingIdentifier](#prod-BindingIdentifier)opt [ClassTail](#prod-ClassTail)

1.  Return true.


# 8.4.3 Static Semantics: IsAnonymousFunctionDefinition ( _expr_ )

The abstract operation IsAnonymousFunctionDefinition takes argument _expr_ (an [AssignmentExpression](#prod-AssignmentExpression) [Parse Node](#sec-syntactic-grammar), an [Initializer](#prod-Initializer) [Parse Node](#sec-syntactic-grammar), or an [Expression](#prod-Expression) [Parse Node](#sec-syntactic-grammar)) and returns a Boolean. It determines if its argument is a function definition that does not bind a name. It performs the following steps when called:

1.  If [IsFunctionDefinition](#sec-static-semantics-isfunctiondefinition) of _expr_ is false, return false.
2.  Let _hasName_ be [HasName](#sec-static-semantics-hasname) of _expr_.
3.  If _hasName_ is true, return false.
4.  Return true.


# 8.4.4 Static Semantics: IsIdentifierRef

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsIdentifierRef takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[PrimaryExpression](#prod-PrimaryExpression) : [IdentifierReference](#prod-IdentifierReference)

1.  Return true.

[PrimaryExpression](#prod-PrimaryExpression) : this [Literal](#prod-Literal) [ArrayLiteral](#prod-ArrayLiteral) [ObjectLiteral](#prod-ObjectLiteral) [FunctionExpression](#prod-FunctionExpression) [ClassExpression](#prod-ClassExpression) [GeneratorExpression](#prod-GeneratorExpression) [AsyncFunctionExpression](#prod-AsyncFunctionExpression) [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateLiteral](#prod-TemplateLiteral) [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) [MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) \[[Expression](#prod-Expression) \] [MemberExpression](#prod-MemberExpression) . [IdentifierName](#prod-IdentifierName) [MemberExpression](#prod-MemberExpression) [TemplateLiteral](#prod-TemplateLiteral) [SuperProperty](#prod-SuperProperty) [MetaProperty](#prod-MetaProperty) new [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments) [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) [NewExpression](#prod-NewExpression) : new [NewExpression](#prod-NewExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) : [CallExpression](#prod-CallExpression) [OptionalExpression](#prod-OptionalExpression)

1.  Return false.


# 8.4.5 Runtime Semantics: NamedEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) NamedEvaluation takes argument _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [function object](#function-object) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _expr_ be the [ParenthesizedExpression](#prod-ParenthesizedExpression) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of _expr_ with argument _name_.

[ParenthesizedExpression](#prod-ParenthesizedExpression) : ( [Expression](#prod-Expression) )

1.  [Assert](#assert): [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Expression](#prod-Expression)) is true.
2.  Return ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Expression](#prod-Expression) with argument _name_.

[FunctionExpression](#prod-FunctionExpression) : function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return [InstantiateOrdinaryFunctionExpression](#sec-runtime-semantics-instantiateordinaryfunctionexpression) of [FunctionExpression](#prod-FunctionExpression) with argument _name_.

[GeneratorExpression](#prod-GeneratorExpression) : function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Return [InstantiateGeneratorFunctionExpression](#sec-runtime-semantics-instantiategeneratorfunctionexpression) of [GeneratorExpression](#prod-GeneratorExpression) with argument _name_.

[AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return [InstantiateAsyncGeneratorFunctionExpression](#sec-runtime-semantics-instantiateasyncgeneratorfunctionexpression) of [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) with argument _name_.

[AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return [InstantiateAsyncFunctionExpression](#sec-runtime-semantics-instantiateasyncfunctionexpression) of [AsyncFunctionExpression](#prod-AsyncFunctionExpression) with argument _name_.

[ArrowFunction](#prod-ArrowFunction) : [ArrowParameters](#prod-ArrowParameters) \=> [ConciseBody](#prod-ConciseBody)

1.  Return [InstantiateArrowFunctionExpression](#sec-runtime-semantics-instantiatearrowfunctionexpression) of [ArrowFunction](#prod-ArrowFunction) with argument _name_.

[AsyncArrowFunction](#prod-AsyncArrowFunction) : async [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) \=> [AsyncConciseBody](#prod-AsyncConciseBody) [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

1.  Return [InstantiateAsyncArrowFunctionExpression](#sec-runtime-semantics-instantiateasyncarrowfunctionexpression) of [AsyncArrowFunction](#prod-AsyncArrowFunction) with argument _name_.

[ClassExpression](#prod-ClassExpression) : class [ClassTail](#prod-ClassTail)

1.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [ClassExpression](#prod-ClassExpression).
2.  Return ? [ClassDefinitionEvaluation](#sec-runtime-semantics-classdefinitionevaluation) of [ClassTail](#prod-ClassTail) with arguments undefined, _name_, and _sourceText_.


# 8.5 Contains


# 8.5.1 Static Semantics: Contains

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) Contains takes argument _symbol_ (a grammar symbol) and returns a Boolean.

Every grammar production alternative in this specification which is not listed below implicitly has the following default definition of Contains:

1.  For each child node _child_ of this [Parse Node](#sec-syntactic-grammar), do
    1.  If _child_ is an instance of _symbol_, return true.
    2.  If _child_ is an instance of a nonterminal, then
        1.  Let _contained_ be the result of _child_ [Contains](#sec-static-semantics-contains) _symbol_.
        2.  If _contained_ is true, return true.
2.  Return false.

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return false.

Note 1

Static semantic rules that depend upon substructure generally do not look into function definitions.

[ClassTail](#prod-ClassTail) : [ClassHeritage](#prod-ClassHeritage)opt { [ClassBody](#prod-ClassBody) }

1.  If _symbol_ is [ClassBody](#prod-ClassBody), return true.
2.  If _symbol_ is [ClassHeritage](#prod-ClassHeritage), then
    1.  If [ClassHeritage](#prod-ClassHeritage) is present, return true; otherwise return false.
3.  If [ClassHeritage](#prod-ClassHeritage) is present, then
    1.  If [ClassHeritage](#prod-ClassHeritage) [Contains](#sec-static-semantics-contains) _symbol_ is true, return true.
4.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassBody](#prod-ClassBody) with argument _symbol_.

Note 2

Static semantic rules that depend upon substructure generally do not look into class bodies except for [PropertyName](#prod-PropertyName)s.

[ClassStaticBlock](#prod-ClassStaticBlock) : static { [ClassStaticBlockBody](#prod-ClassStaticBlockBody) }

1.  Return false.

Note 3

Static semantic rules that depend upon substructure generally do not look into `static` initialization blocks.

[ArrowFunction](#prod-ArrowFunction) : [ArrowParameters](#prod-ArrowParameters) \=> [ConciseBody](#prod-ConciseBody)

1.  If _symbol_ is not one of [NewTarget](#prod-NewTarget), [SuperProperty](#prod-SuperProperty), [SuperCall](#prod-SuperCall), `super`, or `this`, return false.
2.  If [ArrowParameters](#prod-ArrowParameters) [Contains](#sec-static-semantics-contains) _symbol_ is true, return true.
3.  Return [ConciseBody](#prod-ConciseBody) [Contains](#sec-static-semantics-contains) _symbol_.

[ArrowParameters](#prod-ArrowParameters) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _formals_ be the [ArrowFormalParameters](#prod-ArrowFormalParameters) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return _formals_ [Contains](#sec-static-semantics-contains) _symbol_.

[AsyncArrowFunction](#prod-AsyncArrowFunction) : async [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

1.  If _symbol_ is not one of [NewTarget](#prod-NewTarget), [SuperProperty](#prod-SuperProperty), [SuperCall](#prod-SuperCall), `super`, or `this`, return false.
2.  Return [AsyncConciseBody](#prod-AsyncConciseBody) [Contains](#sec-static-semantics-contains) _symbol_.

[AsyncArrowFunction](#prod-AsyncArrowFunction) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

1.  If _symbol_ is not one of [NewTarget](#prod-NewTarget), [SuperProperty](#prod-SuperProperty), [SuperCall](#prod-SuperCall), `super`, or `this`, return false.
2.  Let _head_ be the [AsyncArrowHead](#prod-AsyncArrowHead) that is [covered](#sec-syntactic-grammar) by [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead).
3.  If _head_ [Contains](#sec-static-semantics-contains) _symbol_ is true, return true.
4.  Return [AsyncConciseBody](#prod-AsyncConciseBody) [Contains](#sec-static-semantics-contains) _symbol_.

Note 4

Contains is used to detect `new.target`, `this`, and `super` usage within an [ArrowFunction](#prod-ArrowFunction) or [AsyncArrowFunction](#prod-AsyncArrowFunction).

[PropertyDefinition](#prod-PropertyDefinition) : [MethodDefinition](#prod-MethodDefinition)

1.  If _symbol_ is [MethodDefinition](#prod-MethodDefinition), return true.
2.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [MethodDefinition](#prod-MethodDefinition) with argument _symbol_.

[LiteralPropertyName](#prod-LiteralPropertyName) : [IdentifierName](#prod-IdentifierName)

1.  Return false.

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) . [IdentifierName](#prod-IdentifierName)

1.  If [MemberExpression](#prod-MemberExpression) [Contains](#sec-static-semantics-contains) _symbol_ is true, return true.
2.  Return false.

[SuperProperty](#prod-SuperProperty) : super . [IdentifierName](#prod-IdentifierName)

1.  If _symbol_ is the [ReservedWord](#prod-ReservedWord) `super`, return true.
2.  Return false.

[CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) . [IdentifierName](#prod-IdentifierName)

1.  If [CallExpression](#prod-CallExpression) [Contains](#sec-static-semantics-contains) _symbol_ is true, return true.
2.  Return false.

[OptionalChain](#prod-OptionalChain) : ?. [IdentifierName](#prod-IdentifierName)

1.  Return false.

[OptionalChain](#prod-OptionalChain) : [OptionalChain](#prod-OptionalChain) . [IdentifierName](#prod-IdentifierName)

1.  If [OptionalChain](#prod-OptionalChain) [Contains](#sec-static-semantics-contains) _symbol_ is true, return true.
2.  Return false.


# 8.5.2 Static Semantics: ComputedPropertyContains

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ComputedPropertyContains takes argument _symbol_ (a grammar symbol) and returns a Boolean. It is defined piecewise over the following productions:

[ClassElementName](#prod-ClassElementName) : [PrivateIdentifier](#prod-PrivateIdentifier) [PropertyName](#prod-PropertyName) : [LiteralPropertyName](#prod-LiteralPropertyName)

1.  Return false.

[PropertyName](#prod-PropertyName) : [ComputedPropertyName](#prod-ComputedPropertyName)

1.  Return the result of [ComputedPropertyName](#prod-ComputedPropertyName) [Contains](#sec-static-semantics-contains) _symbol_.

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) } get [ClassElementName](#prod-ClassElementName) ( ) { [FunctionBody](#prod-FunctionBody) } set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassElementName](#prod-ClassElementName) with argument _symbol_.

[GeneratorMethod](#prod-GeneratorMethod) : \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassElementName](#prod-ClassElementName) with argument _symbol_.

[AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) : async \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassElementName](#prod-ClassElementName) with argument _symbol_.

[ClassElementList](#prod-ClassElementList) : [ClassElementList](#prod-ClassElementList) [ClassElement](#prod-ClassElement)

1.  Let _inList_ be [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassElementList](#prod-ClassElementList) with argument _symbol_.
2.  If _inList_ is true, return true.
3.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassElement](#prod-ClassElement) with argument _symbol_.

[ClassElement](#prod-ClassElement) : [ClassStaticBlock](#prod-ClassStaticBlock)

1.  Return false.

[ClassElement](#prod-ClassElement) : ;

1.  Return false.

[AsyncMethod](#prod-AsyncMethod) : async [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassElementName](#prod-ClassElementName) with argument _symbol_.

[FieldDefinition](#prod-FieldDefinition) : [ClassElementName](#prod-ClassElementName) [Initializer](#prod-Initializer)opt

1.  Return the result of [ComputedPropertyContains](#sec-static-semantics-computedpropertycontains) of [ClassElementName](#prod-ClassElementName) with argument _symbol_.


# 8.6 Miscellaneous

These operations are used in multiple places throughout the specification.


# 8.6.1 Runtime Semantics: InstantiateFunctionObject

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateFunctionObject takes arguments _env_ (an [Environment Record](#sec-environment-records)) and _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return [InstantiateOrdinaryFunctionObject](#sec-runtime-semantics-instantiateordinaryfunctionobject) of [FunctionDeclaration](#prod-FunctionDeclaration) with arguments _env_ and _privateEnv_.

[GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Return [InstantiateGeneratorFunctionObject](#sec-runtime-semantics-instantiategeneratorfunctionobject) of [GeneratorDeclaration](#prod-GeneratorDeclaration) with arguments _env_ and _privateEnv_.

[AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return [InstantiateAsyncGeneratorFunctionObject](#sec-runtime-semantics-instantiateasyncgeneratorfunctionobject) of [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) with arguments _env_ and _privateEnv_.

[AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return [InstantiateAsyncFunctionObject](#sec-runtime-semantics-instantiateasyncfunctionobject) of [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) with arguments _env_ and _privateEnv_.


# 8.6.2 Runtime Semantics: BindingInitialization

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) BindingInitialization takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _environment_ (an [Environment Record](#sec-environment-records) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type).

Note

undefined is passed for _environment_ to indicate that a [PutValue](#sec-putvalue) operation should be used to assign the initialization value. This is the case for `var` statements and formal parameter lists of some [non-strict functions](#non-strict-function) (See [10.2.11](#sec-functiondeclarationinstantiation)). In those cases a lexical binding is hoisted and preinitialized prior to evaluation of its initializer.

It is defined piecewise over the following productions:

[BindingIdentifier](#prod-BindingIdentifier) : [Identifier](#prod-Identifier)

1.  Let _name_ be the [StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier).
2.  Return ? [InitializeBoundName](#sec-initializeboundname)(_name_, _value_, _environment_).

[BindingIdentifier](#prod-BindingIdentifier) : yield

1.  Return ? [InitializeBoundName](#sec-initializeboundname)("yield", _value_, _environment_).

[BindingIdentifier](#prod-BindingIdentifier) : await

1.  Return ? [InitializeBoundName](#sec-initializeboundname)("await", _value_, _environment_).

[BindingPattern](#prod-BindingPattern) : [ObjectBindingPattern](#prod-ObjectBindingPattern)

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_value_).
2.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [ObjectBindingPattern](#prod-ObjectBindingPattern) with arguments _value_ and _environment_.

[BindingPattern](#prod-BindingPattern) : [ArrayBindingPattern](#prod-ArrayBindingPattern)

1.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_value_, sync).
2.  Let _result_ be [Completion](#sec-completion-ao)([IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [ArrayBindingPattern](#prod-ArrayBindingPattern) with arguments _iteratorRecord_ and _environment_).
3.  If _iteratorRecord_._\[\[Done\]\]_ is false, return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_).
4.  Return ? _result_.

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { }

1.  Return unused.

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { [BindingPropertyList](#prod-BindingPropertyList) } { [BindingPropertyList](#prod-BindingPropertyList) , }

1.  Perform ? [PropertyBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-propertybindinginitialization) of [BindingPropertyList](#prod-BindingPropertyList) with arguments _value_ and _environment_.
2.  Return unused.

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { [BindingRestProperty](#prod-BindingRestProperty) }

1.  Let _excludedNames_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Return ? [RestBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-restbindinginitialization) of [BindingRestProperty](#prod-BindingRestProperty) with arguments _value_, _environment_, and _excludedNames_.

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { [BindingPropertyList](#prod-BindingPropertyList) , [BindingRestProperty](#prod-BindingRestProperty) }

1.  Let _excludedNames_ be ? [PropertyBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-propertybindinginitialization) of [BindingPropertyList](#prod-BindingPropertyList) with arguments _value_ and _environment_.
2.  Return ? [RestBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-restbindinginitialization) of [BindingRestProperty](#prod-BindingRestProperty) with arguments _value_, _environment_, and _excludedNames_.


# 8.6.2.1 InitializeBoundName ( _name_, _value_, _environment_ )

The abstract operation InitializeBoundName takes arguments _name_ (a String), _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _environment_ (an [Environment Record](#sec-environment-records) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _environment_ is not undefined, then
    1.  Perform ! _environment_.InitializeBinding(_name_, _value_).
    2.  Return unused.
2.  Else,
    1.  Let _lhs_ be ? [ResolveBinding](#sec-resolvebinding)(_name_).
    2.  Return ? [PutValue](#sec-putvalue)(_lhs_, _value_).


# 8.6.3 Runtime Semantics: IteratorBindingInitialization

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IteratorBindingInitialization takes arguments _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and _environment_ (an [Environment Record](#sec-environment-records) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type).

Note

When undefined is passed for _environment_ it indicates that a [PutValue](#sec-putvalue) operation should be used to assign the initialization value. This is the case for formal parameter lists of [non-strict functions](#non-strict-function). In that case the formal parameter bindings are preinitialized in order to deal with the possibility of multiple parameters with the same name.

It is defined piecewise over the following productions:

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[\]

1.  Return unused.

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[Elision](#prod-Elision) \]

1.  Return ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_.

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement) \]

1.  If [Elision](#prod-Elision) is present, then
    1.  Perform ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_.
2.  Return ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [BindingRestElement](#prod-BindingRestElement) with arguments _iteratorRecord_ and _environment_.

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[BindingElementList](#prod-BindingElementList) , [Elision](#prod-Elision) \]

1.  Perform ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [BindingElementList](#prod-BindingElementList) with arguments _iteratorRecord_ and _environment_.
2.  Return ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_.

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[BindingElementList](#prod-BindingElementList) , [Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement) \]

1.  Perform ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [BindingElementList](#prod-BindingElementList) with arguments _iteratorRecord_ and _environment_.
2.  If [Elision](#prod-Elision) is present, then
    1.  Perform ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_.
3.  Return ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [BindingRestElement](#prod-BindingRestElement) with arguments _iteratorRecord_ and _environment_.

[BindingElementList](#prod-BindingElementList) : [BindingElementList](#prod-BindingElementList) , [BindingElisionElement](#prod-BindingElisionElement)

1.  Perform ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [BindingElementList](#prod-BindingElementList) with arguments _iteratorRecord_ and _environment_.
2.  Return ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [BindingElisionElement](#prod-BindingElisionElement) with arguments _iteratorRecord_ and _environment_.

[BindingElisionElement](#prod-BindingElisionElement) : [Elision](#prod-Elision) [BindingElement](#prod-BindingElement)

1.  Perform ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_.
2.  Return ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [BindingElement](#prod-BindingElement) with arguments _iteratorRecord_ and _environment_.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)opt

1.  Let _bindingId_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _lhs_ be ? [ResolveBinding](#sec-resolvebinding)(_bindingId_, _environment_).
3.  Let _v_ be undefined.
4.  If _iteratorRecord_._\[\[Done\]\]_ is false, then
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is not done, then
        1.  Set _v_ to _next_.
5.  If [Initializer](#prod-Initializer) is present and _v_ is undefined, then
    1.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true, then
        1.  Set _v_ to ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _bindingId_.
    2.  Else,
        1.  Let _defaultValue_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
        2.  Set _v_ to ? [GetValue](#sec-getvalue)(_defaultValue_).
6.  If _environment_ is undefined, return ? [PutValue](#sec-putvalue)(_lhs_, _v_).
7.  Return ? [InitializeReferencedBinding](#sec-initializereferencedbinding)(_lhs_, _v_).

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)opt

1.  Let _v_ be undefined.
2.  If _iteratorRecord_._\[\[Done\]\]_ is false, then
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is not done, then
        1.  Set _v_ to _next_.
3.  If [Initializer](#prod-Initializer) is present and _v_ is undefined, then
    1.  Let _defaultValue_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
    2.  Set _v_ to ? [GetValue](#sec-getvalue)(_defaultValue_).
4.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [BindingPattern](#prod-BindingPattern) with arguments _v_ and _environment_.

[BindingRestElement](#prod-BindingRestElement) : ... [BindingIdentifier](#prod-BindingIdentifier)

1.  Let _lhs_ be ? [ResolveBinding](#sec-resolvebinding)([StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier), _environment_).
2.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(0).
3.  Let _n_ be 0.
4.  Repeat,
    1.  Let _next_ be done.
    2.  If _iteratorRecord_._\[\[Done\]\]_ is false, then
        1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    3.  If _next_ is done, then
        1.  If _environment_ is undefined, return ? [PutValue](#sec-putvalue)(_lhs_, _A_).
        2.  Return ? [InitializeReferencedBinding](#sec-initializereferencedbinding)(_lhs_, _A_).
    4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _next_).
    5.  Set _n_ to _n_ + 1.

[BindingRestElement](#prod-BindingRestElement) : ... [BindingPattern](#prod-BindingPattern)

1.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(0).
2.  Let _n_ be 0.
3.  Repeat,
    1.  Let _next_ be done.
    2.  If _iteratorRecord_._\[\[Done\]\]_ is false, then
        1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    3.  If _next_ is done, then
        1.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [BindingPattern](#prod-BindingPattern) with arguments _A_ and _environment_.
    4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _next_).
    5.  Set _n_ to _n_ + 1.

[FormalParameters](#prod-FormalParameters) : \[empty\]

1.  Return unused.

[FormalParameters](#prod-FormalParameters) : [FormalParameterList](#prod-FormalParameterList) , [FunctionRestParameter](#prod-FunctionRestParameter)

1.  Perform ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [FormalParameterList](#prod-FormalParameterList) with arguments _iteratorRecord_ and _environment_.
2.  Return ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [FunctionRestParameter](#prod-FunctionRestParameter) with arguments _iteratorRecord_ and _environment_.

[FormalParameterList](#prod-FormalParameterList) : [FormalParameterList](#prod-FormalParameterList) , [FormalParameter](#prod-FormalParameter)

1.  Perform ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [FormalParameterList](#prod-FormalParameterList) with arguments _iteratorRecord_ and _environment_.
2.  Return ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of [FormalParameter](#prod-FormalParameter) with arguments _iteratorRecord_ and _environment_.

[ArrowParameters](#prod-ArrowParameters) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Let _v_ be undefined.
2.  [Assert](#assert): _iteratorRecord_._\[\[Done\]\]_ is false.
3.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
4.  If _next_ is not done, then
    1.  Set _v_ to _next_.
5.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [BindingIdentifier](#prod-BindingIdentifier) with arguments _v_ and _environment_.

[ArrowParameters](#prod-ArrowParameters) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _formals_ be the [ArrowFormalParameters](#prod-ArrowFormalParameters) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of _formals_ with arguments _iteratorRecord_ and _environment_.

[AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Let _v_ be undefined.
2.  [Assert](#assert): _iteratorRecord_._\[\[Done\]\]_ is false.
3.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
4.  If _next_ is not done, then
    1.  Set _v_ to _next_.
5.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [BindingIdentifier](#prod-BindingIdentifier) with arguments _v_ and _environment_.


# 8.6.4 Static Semantics: AssignmentTargetType

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) AssignmentTargetType takes no arguments and returns simple, web-compat, or invalid. It is defined piecewise over the following productions:

[IdentifierReference](#prod-IdentifierReference) : [Identifier](#prod-Identifier)

1.  If [IsStrict](#sec-isstrict)(this [IdentifierReference](#prod-IdentifierReference)) is true and the [StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier) is either "eval" or "arguments", return invalid.
2.  Return simple.

[IdentifierReference](#prod-IdentifierReference) : yield await [CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) \[[Expression](#prod-Expression) \] [CallExpression](#prod-CallExpression) . [IdentifierName](#prod-IdentifierName) [CallExpression](#prod-CallExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) [MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) \[[Expression](#prod-Expression) \] [MemberExpression](#prod-MemberExpression) . [IdentifierName](#prod-IdentifierName) [SuperProperty](#prod-SuperProperty) [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Return simple.

[PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _expr_ be the [ParenthesizedExpression](#prod-ParenthesizedExpression) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of _expr_.

[CallExpression](#prod-CallExpression) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) [CallExpression](#prod-CallExpression) [Arguments](#prod-Arguments)

1.  [Normative Optional](#sec-conformance)
    
    If the [host](#host) is a web browser or otherwise supports [Runtime Errors for Function Call Assignment Targets](#sec-runtime-errors-for-function-call-assignment-targets) and [IsStrict](#sec-isstrict)(this [CallExpression](#prod-CallExpression)) is false, then
    1.  Return web-compat.
2.  Return invalid.

[PrimaryExpression](#prod-PrimaryExpression) : this [Literal](#prod-Literal) [ArrayLiteral](#prod-ArrayLiteral) [ObjectLiteral](#prod-ObjectLiteral) [FunctionExpression](#prod-FunctionExpression) [ClassExpression](#prod-ClassExpression) [GeneratorExpression](#prod-GeneratorExpression) [AsyncFunctionExpression](#prod-AsyncFunctionExpression) [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateLiteral](#prod-TemplateLiteral) [CallExpression](#prod-CallExpression) : [SuperCall](#prod-SuperCall) [ImportCall](#prod-ImportCall) [CallExpression](#prod-CallExpression) [TemplateLiteral](#prod-TemplateLiteral) [NewExpression](#prod-NewExpression) : new [NewExpression](#prod-NewExpression) [MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) [TemplateLiteral](#prod-TemplateLiteral) new [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments) [NewTarget](#prod-NewTarget) : new . target [ImportMeta](#prod-ImportMeta) : import . meta [LeftHandSideExpression](#prod-LeftHandSideExpression) : [OptionalExpression](#prod-OptionalExpression) [UpdateExpression](#prod-UpdateExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) ++ [LeftHandSideExpression](#prod-LeftHandSideExpression) \-- ++ [UnaryExpression](#prod-UnaryExpression) \-- [UnaryExpression](#prod-UnaryExpression) [UnaryExpression](#prod-UnaryExpression) : delete [UnaryExpression](#prod-UnaryExpression) void [UnaryExpression](#prod-UnaryExpression) typeof [UnaryExpression](#prod-UnaryExpression) + [UnaryExpression](#prod-UnaryExpression) \- [UnaryExpression](#prod-UnaryExpression) ~ [UnaryExpression](#prod-UnaryExpression) ! [UnaryExpression](#prod-UnaryExpression) [AwaitExpression](#prod-AwaitExpression) [ExponentiationExpression](#prod-ExponentiationExpression) : [UpdateExpression](#prod-UpdateExpression) \*\* [ExponentiationExpression](#prod-ExponentiationExpression) [MultiplicativeExpression](#prod-MultiplicativeExpression) : [MultiplicativeExpression](#prod-MultiplicativeExpression) [MultiplicativeOperator](#prod-MultiplicativeOperator) [ExponentiationExpression](#prod-ExponentiationExpression) [AdditiveExpression](#prod-AdditiveExpression) : [AdditiveExpression](#prod-AdditiveExpression) + [MultiplicativeExpression](#prod-MultiplicativeExpression) [AdditiveExpression](#prod-AdditiveExpression) \- [MultiplicativeExpression](#prod-MultiplicativeExpression) [ShiftExpression](#prod-ShiftExpression) : [ShiftExpression](#prod-ShiftExpression) << [AdditiveExpression](#prod-AdditiveExpression) [ShiftExpression](#prod-ShiftExpression) \>> [AdditiveExpression](#prod-AdditiveExpression) [ShiftExpression](#prod-ShiftExpression) \>>> [AdditiveExpression](#prod-AdditiveExpression) [RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) < [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) \> [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) <= [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) \>= [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) instanceof [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) in [ShiftExpression](#prod-ShiftExpression) [PrivateIdentifier](#prod-PrivateIdentifier) in [ShiftExpression](#prod-ShiftExpression) [EqualityExpression](#prod-EqualityExpression) : [EqualityExpression](#prod-EqualityExpression) \== [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) != [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) \=== [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) !== [RelationalExpression](#prod-RelationalExpression) [BitwiseANDExpression](#prod-BitwiseANDExpression) : [BitwiseANDExpression](#prod-BitwiseANDExpression) & [EqualityExpression](#prod-EqualityExpression) [BitwiseXORExpression](#prod-BitwiseXORExpression) : [BitwiseXORExpression](#prod-BitwiseXORExpression) ^ [BitwiseANDExpression](#prod-BitwiseANDExpression) [BitwiseORExpression](#prod-BitwiseORExpression) : [BitwiseORExpression](#prod-BitwiseORExpression) | [BitwiseXORExpression](#prod-BitwiseXORExpression) [LogicalANDExpression](#prod-LogicalANDExpression) : [LogicalANDExpression](#prod-LogicalANDExpression) && [BitwiseORExpression](#prod-BitwiseORExpression) [LogicalORExpression](#prod-LogicalORExpression) : [LogicalORExpression](#prod-LogicalORExpression) || [LogicalANDExpression](#prod-LogicalANDExpression) [CoalesceExpression](#prod-CoalesceExpression) : [CoalesceExpressionHead](#prod-CoalesceExpressionHead) ?? [BitwiseORExpression](#prod-BitwiseORExpression) [ConditionalExpression](#prod-ConditionalExpression) : [ShortCircuitExpression](#prod-ShortCircuitExpression) ? [AssignmentExpression](#prod-AssignmentExpression) : [AssignmentExpression](#prod-AssignmentExpression) [AssignmentExpression](#prod-AssignmentExpression) : [YieldExpression](#prod-YieldExpression) [ArrowFunction](#prod-ArrowFunction) [AsyncArrowFunction](#prod-AsyncArrowFunction) [LeftHandSideExpression](#prod-LeftHandSideExpression) \= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) [AssignmentOperator](#prod-AssignmentOperator) [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) &&= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ||= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ??= [AssignmentExpression](#prod-AssignmentExpression) [Expression](#prod-Expression) : [Expression](#prod-Expression) , [AssignmentExpression](#prod-AssignmentExpression)

1.  Return invalid.


# 8.6.5 Static Semantics: PropName

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) PropName takes no arguments and returns a String or empty. It is defined piecewise over the following productions:

[PropertyDefinition](#prod-PropertyDefinition) : [IdentifierReference](#prod-IdentifierReference)

1.  Return the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierReference](#prod-IdentifierReference).

[PropertyDefinition](#prod-PropertyDefinition) : ... [AssignmentExpression](#prod-AssignmentExpression)

1.  Return empty.

[PropertyDefinition](#prod-PropertyDefinition) : [PropertyName](#prod-PropertyName) : [AssignmentExpression](#prod-AssignmentExpression)

1.  Return the [PropName](#sec-static-semantics-propname) of [PropertyName](#prod-PropertyName).

[LiteralPropertyName](#prod-LiteralPropertyName) : [IdentifierName](#prod-IdentifierName) [AttributeKey](#prod-AttributeKey) : [IdentifierName](#prod-IdentifierName)

1.  Return the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName).

[LiteralPropertyName](#prod-LiteralPropertyName) : [StringLiteral](#prod-StringLiteral) [AttributeKey](#prod-AttributeKey) : [StringLiteral](#prod-StringLiteral)

1.  Return the [SV](#sec-static-semantics-sv) of [StringLiteral](#prod-StringLiteral).

[LiteralPropertyName](#prod-LiteralPropertyName) : [NumericLiteral](#prod-NumericLiteral)

1.  Let _nbr_ be the [NumericValue](#sec-numericvalue) of [NumericLiteral](#prod-NumericLiteral).
2.  Return ! [ToString](#sec-tostring)(_nbr_).

[ComputedPropertyName](#prod-ComputedPropertyName) : \[[AssignmentExpression](#prod-AssignmentExpression) \]

1.  Return empty.

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) } get [ClassElementName](#prod-ClassElementName) ( ) { [FunctionBody](#prod-FunctionBody) } set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return the [PropName](#sec-static-semantics-propname) of [ClassElementName](#prod-ClassElementName).

[GeneratorMethod](#prod-GeneratorMethod) : \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Return the [PropName](#sec-static-semantics-propname) of [ClassElementName](#prod-ClassElementName).

[AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) : async \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return the [PropName](#sec-static-semantics-propname) of [ClassElementName](#prod-ClassElementName).

[ClassElement](#prod-ClassElement) : [ClassStaticBlock](#prod-ClassStaticBlock)

1.  Return empty.

[ClassElement](#prod-ClassElement) : ;

1.  Return empty.

[AsyncMethod](#prod-AsyncMethod) : async [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return the [PropName](#sec-static-semantics-propname) of [ClassElementName](#prod-ClassElementName).

[FieldDefinition](#prod-FieldDefinition) : [ClassElementName](#prod-ClassElementName) [Initializer](#prod-Initializer)opt

1.  Return the [PropName](#sec-static-semantics-propname) of [ClassElementName](#prod-ClassElementName).

[ClassElementName](#prod-ClassElementName) : [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Return empty.


# 9 Executable Code and Execution Contexts


# 9.1 Environment Records

Environment Record is a specification type used to define the association of [Identifier](#prod-Identifier)s to specific variables and functions, based upon the lexical nesting structure of ECMAScript code. Usually an Environment Record is associated with some specific syntactic structure of ECMAScript code such as a [FunctionDeclaration](#prod-FunctionDeclaration), a [BlockStatement](#prod-BlockStatement), or a [Catch](#prod-Catch) clause of a [TryStatement](#prod-TryStatement). Each time such code is evaluated, a new Environment Record is created to record the identifier bindings that are created by that code.

Every Environment Record has an _\[\[OuterEnv\]\]_ field, which is either null or a reference to an outer Environment Record. This is used to model the logical nesting of Environment Record values. The outer reference of an (inner) Environment Record is a reference to the Environment Record that logically surrounds the inner Environment Record. An outer Environment Record may, of course, have its own outer Environment Record. An Environment Record may serve as the outer environment for multiple inner Environment Records. For example, if a [FunctionDeclaration](#prod-FunctionDeclaration) contains two nested [FunctionDeclaration](#prod-FunctionDeclaration)s then the Environment Records of each of the nested functions will have as their outer Environment Record the Environment Record of the current evaluation of the surrounding function.

Environment Records are purely specification mechanisms and need not correspond to any specific artefact of an ECMAScript implementation. It is impossible for an ECMAScript program to directly access or manipulate such values.


# 9.1.1 The Environment Record Type Hierarchy

[Environment Records](#sec-environment-records) can be thought of as existing in a simple object-oriented hierarchy where [Environment Record](#sec-environment-records) is an abstract class with three concrete subclasses: [Declarative Environment Record](#sec-declarative-environment-records), [Object Environment Record](#sec-object-environment-records), and [Global Environment Record](#sec-global-environment-records). [Function Environment Records](#sec-function-environment-records) and [Module Environment Records](#sec-module-environment-records) are subclasses of [Declarative Environment Record](#sec-declarative-environment-records).

-   [Environment Record](#sec-environment-records) (abstract)
    
    -   A *[Declarative Environment Record](#sec-declarative-environment-records)* is used to define the effect of ECMAScript language syntactic elements such as [FunctionDeclaration](#prod-FunctionDeclaration)s, [VariableDeclaration](#prod-VariableDeclaration)s, and [Catch](#prod-Catch) clauses that directly associate identifier bindings with [ECMAScript language values](#sec-ecmascript-language-types).
        
        -   A *[Function Environment Record](#sec-function-environment-records)* corresponds to the invocation of an ECMAScript [function object](#function-object), and contains bindings for the top-level declarations within that function. It may establish a new `this` binding. It also captures the state necessary to support `super` method invocations.
            
        -   A *[Module Environment Record](#sec-module-environment-records)* contains the bindings for the top-level declarations of a [Module](#prod-Module). It also contains the bindings that are explicitly imported by the [Module](#prod-Module). Its _\[\[OuterEnv\]\]_ is a [Global Environment Record](#sec-global-environment-records).
            
    -   An *[Object Environment Record](#sec-object-environment-records)* is used to define the effect of ECMAScript elements such as [WithStatement](#prod-WithStatement) that associate identifier bindings with the properties of some object.
        
    -   A *[Global Environment Record](#sec-global-environment-records)* is used for [Script](#prod-Script) global declarations. It does not have an outer environment; its _\[\[OuterEnv\]\]_ is null. It may be prepopulated with identifier bindings and it includes an associated [global object](#sec-global-object) whose properties provide some of the global environment's identifier bindings. As ECMAScript code is executed, additional properties may be added to the [global object](#sec-global-object) and the initial properties may be modified.
        

The [Environment Record](#sec-environment-records) abstract class includes the abstract specification methods defined in [Table 14](#table-abstract-methods-of-environment-records). These abstract methods have distinct concrete algorithms for each of the concrete subclasses.

Table 14: Abstract Methods of [Environment Records](#sec-environment-records)

<table><thead><tr><th>Method</th><th>Purpose</th></tr></thead><tbody><tr><td>HasBinding(N)</td><td>Determine if an <emu-xref href="#sec-environment-records" id="_ref_3567"><a href="#sec-environment-records">Environment Record</a></emu-xref> has a binding for the String value <var>N</var>. Return <emu-val>true</emu-val> if it does and <emu-val>false</emu-val> if it does not.</td></tr><tr><td>CreateMutableBinding(N, D)</td><td>Create a new but uninitialized mutable binding in an <emu-xref href="#sec-environment-records" id="_ref_3568"><a href="#sec-environment-records">Environment Record</a></emu-xref>. The String value <var>N</var> is the text of the bound name. If the Boolean argument <var>D</var> is <emu-val>true</emu-val> the binding may be subsequently deleted.</td></tr><tr><td>CreateImmutableBinding(N, S)</td><td>Create a new but uninitialized immutable binding in an <emu-xref href="#sec-environment-records" id="_ref_3569"><a href="#sec-environment-records">Environment Record</a></emu-xref>. The String value <var>N</var> is the text of the bound name. If <var>S</var> is <emu-val>true</emu-val> then attempts to set it after it has been initialized will always throw an exception, regardless of the strict mode setting of operations that reference that binding.</td></tr><tr><td>InitializeBinding(N, V)</td><td>Set the value of an already existing but uninitialized binding in an <emu-xref href="#sec-environment-records" id="_ref_3570"><a href="#sec-environment-records">Environment Record</a></emu-xref>. The String value <var>N</var> is the text of the bound name. <var>V</var> is the value for the binding and is a value of any <emu-xref href="#sec-ecmascript-language-types" id="_ref_3571"><a href="#sec-ecmascript-language-types">ECMAScript language type</a></emu-xref>.</td></tr><tr><td>SetMutableBinding(N, V, S)</td><td>Set the value of an already existing mutable binding in an <emu-xref href="#sec-environment-records" id="_ref_3572"><a href="#sec-environment-records">Environment Record</a></emu-xref>. The String value <var>N</var> is the text of the bound name. <var>V</var> is the value for the binding and may be a value of any <emu-xref href="#sec-ecmascript-language-types" id="_ref_3573"><a href="#sec-ecmascript-language-types">ECMAScript language type</a></emu-xref>. <var>S</var> <emu-xref href="#sec-ecmascript-language-types-boolean-type" id="_ref_3574"><a href="#sec-ecmascript-language-types-boolean-type">is a Boolean</a></emu-xref> flag. If <var>S</var> is <emu-val>true</emu-val> and the binding cannot be set throw a <emu-val>TypeError</emu-val> exception.</td></tr><tr><td>GetBindingValue(N, S)</td><td>Returns the value of an already existing binding from an <emu-xref href="#sec-environment-records" id="_ref_3575"><a href="#sec-environment-records">Environment Record</a></emu-xref>. The String value <var>N</var> is the text of the bound name. <var>S</var> is used to identify references originating in <emu-xref href="#sec-strict-mode-code" id="_ref_3576"><a href="#sec-strict-mode-code">strict mode code</a></emu-xref> or that otherwise require strict mode reference semantics. If <var>S</var> is <emu-val>true</emu-val> and the binding does not exist throw a <emu-val>ReferenceError</emu-val> exception. If the binding exists but is uninitialized a <emu-val>ReferenceError</emu-val> is thrown, regardless of the value of <var>S</var>.</td></tr><tr><td>DeleteBinding(N)</td><td>Delete a binding from an <emu-xref href="#sec-environment-records" id="_ref_3577"><a href="#sec-environment-records">Environment Record</a></emu-xref>. The String value <var>N</var> is the text of the bound name. If a binding for <var>N</var> exists, remove the binding and return <emu-val>true</emu-val>. If the binding exists but cannot be removed return <emu-val>false</emu-val>. If the binding does not exist return <emu-val>true</emu-val>.</td></tr><tr><td>HasThisBinding()</td><td>Determine if an <emu-xref href="#sec-environment-records" id="_ref_3578"><a href="#sec-environment-records">Environment Record</a></emu-xref> establishes a <code>this</code> binding. Return <emu-val>true</emu-val> if it does and <emu-val>false</emu-val> if it does not.</td></tr><tr><td>HasSuperBinding()</td><td>Determine if an <emu-xref href="#sec-environment-records" id="_ref_3579"><a href="#sec-environment-records">Environment Record</a></emu-xref> establishes a <code>super</code> method binding. Return <emu-val>true</emu-val> if it does and <emu-val>false</emu-val> if it does not. If it returns <emu-val>true</emu-val> it implies that the <emu-xref href="#sec-environment-records" id="_ref_3580"><a href="#sec-environment-records">Environment Record</a></emu-xref> is a <emu-xref href="#sec-function-environment-records" id="_ref_3581"><a href="#sec-function-environment-records">Function Environment Record</a></emu-xref>, although the reverse implication does not hold.</td></tr><tr><td>WithBaseObject()</td><td>If this <emu-xref href="#sec-environment-records" id="_ref_3582"><a href="#sec-environment-records">Environment Record</a></emu-xref> is associated with a <code>with</code> statement, return the with object. Otherwise, return <emu-val>undefined</emu-val>.</td></tr></tbody></table>


# 9.1.1.1 Declarative Environment Records

Each Declarative Environment Record is associated with an ECMAScript program scope containing variable, constant, let, class, module, import, and/or function declarations. A Declarative Environment Record binds the set of identifiers defined by the declarations contained within its scope.


# 9.1.1.1.1 HasBinding ( _N_ )

The HasBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes argument _N_ (a String) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It determines if the argument identifier is one of the identifiers bound by the record. It performs the following steps when called:

1.  If _envRec_ has a binding for _N_, return true.
2.  Return false.


# 9.1.1.1.2 CreateMutableBinding ( _N_, _D_ )

The CreateMutableBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes arguments _N_ (a String) and _D_ (a Boolean) and returns a [normal completion containing](#sec-completion-record-specification-type) unused. It creates a new mutable binding for the name _N_ that is uninitialized. A binding must not already exist in this [Environment Record](#sec-environment-records) for _N_. If _D_ is true, the new binding is marked as being subject to deletion. It performs the following steps when called:

1.  [Assert](#assert): _envRec_ does not already have a binding for _N_.
2.  Create a mutable binding in _envRec_ for _N_ and record that it is uninitialized. If _D_ is true, record that the newly created binding may be deleted by a subsequent DeleteBinding call.
3.  Return unused.


# 9.1.1.1.3 CreateImmutableBinding ( _N_, _S_ )

The CreateImmutableBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes arguments _N_ (a String) and _S_ (a Boolean) and returns a [normal completion containing](#sec-completion-record-specification-type) unused. It creates a new immutable binding for the name _N_ that is uninitialized. A binding must not already exist in this [Environment Record](#sec-environment-records) for _N_. If _S_ is true, the new binding is marked as a strict binding. It performs the following steps when called:

1.  [Assert](#assert): _envRec_ does not already have a binding for _N_.
2.  Create an immutable binding in _envRec_ for _N_ and record that it is uninitialized. If _S_ is true, record that the newly created binding is a strict binding.
3.  Return unused.


# 9.1.1.1.4 InitializeBinding ( _N_, _V_ )

The InitializeBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes arguments _N_ (a String) and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a [normal completion containing](#sec-completion-record-specification-type) unused. It is used to set the bound value of the current binding of the identifier whose name is _N_ to the value _V_. An uninitialized binding for _N_ must already exist. It performs the following steps when called:

1.  [Assert](#assert): _envRec_ must have an uninitialized binding for _N_.
2.  Set the bound value for _N_ in _envRec_ to _V_.
3.  Record that the binding for _N_ in _envRec_ has been initialized.
4.  Return unused.


# 9.1.1.1.5 SetMutableBinding ( _N_, _V_, _S_ )

The SetMutableBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes arguments _N_ (a String), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It attempts to change the bound value of the current binding of the identifier whose name is _N_ to the value _V_. A binding for _N_ normally already exists, but in rare cases it may not. If the binding is an immutable binding, a TypeError is thrown if _S_ is true. It performs the following steps when called:

1.  If _envRec_ does not have a binding for _N_, then
    1.  If _S_ is true, throw a ReferenceError exception.
    2.  Perform ! _envRec_.CreateMutableBinding(_N_, true).
    3.  Perform ! _envRec_.InitializeBinding(_N_, _V_).
    4.  Return unused.
2.  If the binding for _N_ in _envRec_ is a strict binding, set _S_ to true.
3.  If the binding for _N_ in _envRec_ has not yet been initialized, then
    1.  Throw a ReferenceError exception.
4.  Else if the binding for _N_ in _envRec_ is a mutable binding, then
    1.  Change its bound value to _V_.
5.  Else,
    1.  [Assert](#assert): This is an attempt to change the value of an immutable binding.
    2.  If _S_ is true, throw a TypeError exception.
6.  Return unused.

Note

An example of ECMAScript code that results in a missing binding at step [1](#step-setmutablebinding-missing-binding) is:

```
function f() { eval("var x; x = (delete x, 0);"); }
```


# 9.1.1.1.6 GetBindingValue ( _N_, _S_ )

The GetBindingValue concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes arguments _N_ (a String) and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It returns the value of its bound identifier whose name is _N_. If the binding exists but is uninitialized a ReferenceError is thrown, regardless of the value of _S_. It performs the following steps when called:

1.  [Assert](#assert): _envRec_ has a binding for _N_.
2.  If the binding for _N_ in _envRec_ is an uninitialized binding, throw a ReferenceError exception.
3.  Return the value currently bound to _N_ in _envRec_.


# 9.1.1.1.7 DeleteBinding ( _N_ )

The DeleteBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes argument _N_ (a String) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It can only delete bindings that have been explicitly designated as being subject to deletion. It performs the following steps when called:

1.  [Assert](#assert): _envRec_ has a binding for _N_.
2.  If the binding for _N_ in _envRec_ cannot be deleted, return false.
3.  Remove the binding for _N_ from _envRec_.
4.  Return true.


# 9.1.1.1.8 HasThisBinding ( )

The HasThisBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes no arguments and returns false. It performs the following steps when called:

1.  Return false.

Note

A regular [Declarative Environment Record](#sec-declarative-environment-records) (i.e., one that is neither a [Function Environment Record](#sec-function-environment-records) nor a [Module Environment Record](#sec-module-environment-records)) does not provide a `this` binding.


# 9.1.1.1.9 HasSuperBinding ( )

The HasSuperBinding concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes no arguments and returns false. It performs the following steps when called:

1.  Return false.

Note

A regular [Declarative Environment Record](#sec-declarative-environment-records) (i.e., one that is neither a [Function Environment Record](#sec-function-environment-records) nor a [Module Environment Record](#sec-module-environment-records)) does not provide a `super` binding.


# 9.1.1.1.10 WithBaseObject ( )

The WithBaseObject concrete method of a [Declarative Environment Record](#sec-declarative-environment-records) _envRec_ takes no arguments and returns undefined. It performs the following steps when called:

1.  Return undefined.


# 9.1.1.2 Object Environment Records

Each Object Environment Record is associated with an object called its *binding object*. An Object Environment Record binds the set of string identifier names that directly correspond to the [property names](#property-name) of its binding object. [Property keys](#property-key) that are not strings in the form of an [IdentifierName](#prod-IdentifierName) are not included in the set of bound identifiers. Both own and inherited properties are included in the set regardless of the setting of their _\[\[Enumerable\]\]_ attribute. Because properties can be dynamically added and deleted from objects, the set of identifiers bound by an Object Environment Record may potentially change as a side-effect of any operation that adds or deletes properties. Any bindings that are created as a result of such a side-effect are considered to be a mutable binding even if the Writable attribute of the corresponding property is false. Immutable bindings do not exist for Object Environment Records.

Object Environment Records created for `with` statements ([14.11](#sec-with-statement)) can provide their binding object as an implicit this value for use in function calls. The capability is controlled by a Boolean _\[\[IsWithEnvironment\]\]_ field.

Object Environment Records have the additional state fields listed in [Table 15](#table-additional-fields-of-object-environment-records).

Table 15: Additional Fields of [Object Environment Records](#sec-object-environment-records)

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[BindingObject]]</var></td><td>an Object</td><td>The binding object of this <emu-xref href="#sec-environment-records" id="_ref_3622"><a href="#sec-environment-records">Environment Record</a></emu-xref>.</td></tr><tr><td><var class="field">[[IsWithEnvironment]]</var></td><td>a Boolean</td><td>Indicates whether this <emu-xref href="#sec-environment-records" id="_ref_3623"><a href="#sec-environment-records">Environment Record</a></emu-xref> is created for a <code>with</code> statement.</td></tr></tbody></table>


# 9.1.1.2.1 HasBinding ( _N_ )

The HasBinding concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes argument _N_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It determines if its associated binding object has a property whose name is _N_. It performs the following steps when called:

1.  Let _bindingObject_ be _envRec_._\[\[BindingObject\]\]_.
2.  Let _foundBinding_ be ? [HasProperty](#sec-hasproperty)(_bindingObject_, _N_).
3.  If _foundBinding_ is false, return false.
4.  If _envRec_._\[\[IsWithEnvironment\]\]_ is false, return true.
5.  Let _unscopables_ be ? [Get](#sec-get-o-p)(_bindingObject_, [%Symbol.unscopables%](#sec-well-known-symbols)).
6.  If _unscopables_ [is an Object](#sec-object-type), then
    1.  Let _blocked_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_unscopables_, _N_)).
    2.  If _blocked_ is true, return false.
7.  Return true.


# 9.1.1.2.2 CreateMutableBinding ( _N_, _D_ )

The CreateMutableBinding concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes arguments _N_ (a String) and _D_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It creates in an [Environment Record](#sec-environment-records)'s associated binding object a property whose name is _N_ and initializes it to the value undefined. If _D_ is true, the new property's _\[\[Configurable\]\]_ attribute is set to true; otherwise it is set to false. It performs the following steps when called:

1.  Let _bindingObject_ be _envRec_._\[\[BindingObject\]\]_.
2.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_bindingObject_, _N_, PropertyDescriptor { _\[\[Value\]\]_: undefined, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: _D_ }).
3.  Return unused.

Note

Normally _envRec_ will not have a binding for _N_ but if it does, the semantics of [DefinePropertyOrThrow](#sec-definepropertyorthrow) may result in an existing binding being replaced or shadowed or cause an [abrupt completion](#sec-completion-record-specification-type) to be returned.


# 9.1.1.2.3 CreateImmutableBinding ( _N_, _S_ )

The CreateImmutableBinding concrete method of an [Object Environment Record](#sec-object-environment-records) is never used within this specification.


# 9.1.1.2.4 InitializeBinding ( _N_, _V_ )

The InitializeBinding concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes arguments _N_ (a String) and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It is used to set the bound value of the current binding of the identifier whose name is _N_ to the value _V_. It performs the following steps when called:

1.  Perform ? _envRec_.SetMutableBinding(_N_, _V_, false).
2.  Return unused.

Note

In this specification, all uses of CreateMutableBinding for [Object Environment Records](#sec-object-environment-records) are immediately followed by a call to InitializeBinding for the same name. Hence, this specification does not explicitly track the initialization state of bindings in [Object Environment Records](#sec-object-environment-records).


# 9.1.1.2.5 SetMutableBinding ( _N_, _V_, _S_ )

The SetMutableBinding concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes arguments _N_ (a String), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It attempts to set the value of the [Environment Record](#sec-environment-records)'s associated binding object's property whose name is _N_ to the value _V_. A property named _N_ normally already exists but if it does not or is not currently writable, error handling is determined by _S_. It performs the following steps when called:

1.  Let _bindingObject_ be _envRec_._\[\[BindingObject\]\]_.
2.  Let _stillExists_ be ? [HasProperty](#sec-hasproperty)(_bindingObject_, _N_).
3.  If _stillExists_ is false and _S_ is true, throw a ReferenceError exception.
4.  Perform ? [Set](#sec-set-o-p-v-throw)(_bindingObject_, _N_, _V_, _S_).
5.  Return unused.


# 9.1.1.2.6 GetBindingValue ( _N_, _S_ )

The GetBindingValue concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes arguments _N_ (a String) and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It returns the value of its associated binding object's property whose name is _N_. The property should already exist but if it does not the result depends upon _S_. It performs the following steps when called:

1.  Let _bindingObject_ be _envRec_._\[\[BindingObject\]\]_.
2.  Let _value_ be ? [HasProperty](#sec-hasproperty)(_bindingObject_, _N_).
3.  If _value_ is false, then
    1.  If _S_ is false, return undefined; otherwise throw a ReferenceError exception.
4.  Return ? [Get](#sec-get-o-p)(_bindingObject_, _N_).


# 9.1.1.2.7 DeleteBinding ( _N_ )

The DeleteBinding concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes argument _N_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It can only delete bindings that correspond to properties of the environment object whose _\[\[Configurable\]\]_ attribute have the value true. It performs the following steps when called:

1.  Let _bindingObject_ be _envRec_._\[\[BindingObject\]\]_.
2.  Return ? _bindingObject_._\[\[Delete\]\]_(_N_).


# 9.1.1.2.8 HasThisBinding ( )

The HasThisBinding concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes no arguments and returns false. It performs the following steps when called:

1.  Return false.

Note

[Object Environment Records](#sec-object-environment-records) do not provide a `this` binding.


# 9.1.1.2.9 HasSuperBinding ( )

The HasSuperBinding concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes no arguments and returns false. It performs the following steps when called:

1.  Return false.

Note

[Object Environment Records](#sec-object-environment-records) do not provide a `super` binding.


# 9.1.1.2.10 WithBaseObject ( )

The WithBaseObject concrete method of an [Object Environment Record](#sec-object-environment-records) _envRec_ takes no arguments and returns an Object or undefined. It performs the following steps when called:

1.  If _envRec_._\[\[IsWithEnvironment\]\]_ is true, return _envRec_._\[\[BindingObject\]\]_.
2.  Otherwise, return undefined.


# 9.1.1.3 Function Environment Records

A Function Environment Record is a [Declarative Environment Record](#sec-declarative-environment-records) that is used to represent the top-level scope of a function and, if the function is not an [ArrowFunction](#prod-ArrowFunction), provides a `this` binding. If a function is not an [ArrowFunction](#prod-ArrowFunction) function and references `super`, its Function Environment Record also contains the state that is used to perform `super` method invocations from within the function.

Function Environment Records have the additional state fields listed in [Table 16](#table-additional-fields-of-function-environment-records).

Table 16: Additional Fields of [Function Environment Records](#sec-function-environment-records)

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[ThisValue]]</var></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_3670"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref></td><td>This is the <emu-val>this</emu-val> value used for this invocation of the function.</td></tr><tr><td><var class="field">[[ThisBindingStatus]]</var></td><td><emu-const>lexical</emu-const>, <emu-const>initialized</emu-const>, or <emu-const>uninitialized</emu-const></td><td>If the value is <emu-const>lexical</emu-const>, this is an <emu-nt id="_ref_19084"><a href="#prod-ArrowFunction">ArrowFunction</a></emu-nt> and does not have a local <emu-val>this</emu-val> value.</td></tr><tr><td><var class="field">[[FunctionObject]]</var></td><td>an ECMAScript <emu-xref href="#function-object" id="_ref_3671"><a href="#function-object">function object</a></emu-xref></td><td>The <emu-xref href="#function-object" id="_ref_3672"><a href="#function-object">function object</a></emu-xref> whose invocation caused this <emu-xref href="#sec-environment-records" id="_ref_3673"><a href="#sec-environment-records">Environment Record</a></emu-xref> to be created.</td></tr><tr><td><var class="field">[[NewTarget]]</var></td><td>a <emu-xref href="#constructor" id="_ref_3674"><a href="#constructor">constructor</a></emu-xref> or <emu-val>undefined</emu-val></td><td>If this <emu-xref href="#sec-environment-records" id="_ref_3675"><a href="#sec-environment-records">Environment Record</a></emu-xref> was created by the <var class="field">[[Construct]]</var> internal method, <var class="field">[[NewTarget]]</var> is the value of the <var class="field">[[Construct]]</var> <var>newTarget</var> parameter. Otherwise, its value is <emu-val>undefined</emu-val>.</td></tr></tbody></table>

Function Environment Records support all of the [Declarative Environment Record](#sec-declarative-environment-records) methods listed in [Table 14](#table-abstract-methods-of-environment-records) and share the same specifications for all of those methods except for HasThisBinding and HasSuperBinding. In addition, Function Environment Records support the methods listed in [Table 17](#table-additional-methods-of-function-environment-records):

Table 17: Additional Methods of [Function Environment Records](#sec-function-environment-records)

<table><thead><tr><th>Method</th><th>Purpose</th></tr></thead><tbody><tr><td>GetThisBinding()</td><td>Return the value of this <emu-xref href="#sec-environment-records" id="_ref_3678"><a href="#sec-environment-records">Environment Record</a></emu-xref>'s <code>this</code> binding. Throws a <emu-val>ReferenceError</emu-val> if the <code>this</code> binding has not been initialized.</td></tr></tbody></table>


# 9.1.1.3.1 BindThisValue ( _envRec_, _V_ )

The abstract operation BindThisValue takes arguments _envRec_ (a [Function Environment Record](#sec-function-environment-records)) and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It sets the _envRec_._\[\[ThisValue\]\]_ and records that it has been initialized. It performs the following steps when called:

1.  [Assert](#assert): _envRec_._\[\[ThisBindingStatus\]\]_ is not lexical.
2.  If _envRec_._\[\[ThisBindingStatus\]\]_ is initialized, throw a ReferenceError exception.
3.  Set _envRec_._\[\[ThisValue\]\]_ to _V_.
4.  Set _envRec_._\[\[ThisBindingStatus\]\]_ to initialized.
5.  Return unused.


# 9.1.1.3.2 HasThisBinding ( )

The HasThisBinding concrete method of a [Function Environment Record](#sec-function-environment-records) _envRec_ takes no arguments and returns a Boolean. It performs the following steps when called:

1.  If _envRec_._\[\[ThisBindingStatus\]\]_ is lexical, return false; otherwise return true.


# 9.1.1.3.3 HasSuperBinding ( )

The HasSuperBinding concrete method of a [Function Environment Record](#sec-function-environment-records) _envRec_ takes no arguments and returns a Boolean. It performs the following steps when called:

1.  If _envRec_._\[\[ThisBindingStatus\]\]_ is lexical, return false.
2.  If _envRec_._\[\[FunctionObject\]\]_._\[\[HomeObject\]\]_ is undefined, return false; otherwise return true.


# 9.1.1.3.4 GetThisBinding ( )

The GetThisBinding concrete method of a [Function Environment Record](#sec-function-environment-records) _envRec_ takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): _envRec_._\[\[ThisBindingStatus\]\]_ is not lexical.
2.  If _envRec_._\[\[ThisBindingStatus\]\]_ is uninitialized, throw a ReferenceError exception.
3.  Return _envRec_._\[\[ThisValue\]\]_.


# 9.1.1.3.5 GetSuperBase ( _envRec_ )

The abstract operation GetSuperBase takes argument _envRec_ (a [Function Environment Record](#sec-function-environment-records)) and returns an Object, null, or undefined. It returns the object that is the base for `super` property accesses bound in _envRec_. The value undefined indicates that such accesses will produce runtime errors. It performs the following steps when called:

1.  Let _home_ be _envRec_._\[\[FunctionObject\]\]_._\[\[HomeObject\]\]_.
2.  If _home_ is undefined, return undefined.
3.  [Assert](#assert): _home_ is an [ordinary object](#ordinary-object).
4.  Return ! _home_._\[\[GetPrototypeOf\]\]_().


# 9.1.1.4 Global Environment Records

A Global Environment Record is used to represent the outer most scope that is shared by all of the ECMAScript [Script](#prod-Script) elements that are processed in a common [realm](#realm). A Global Environment Record provides the bindings for built-in globals (clause [19](#sec-global-object)), properties of the [global object](#sec-global-object), and for all top-level declarations ([8.2.9](#sec-static-semantics-toplevellexicallyscopeddeclarations), [8.2.11](#sec-static-semantics-toplevelvarscopeddeclarations)) that occur within a [Script](#prod-Script).

A Global Environment Record is logically a single record but it is specified as a composite encapsulating an [Object Environment Record](#sec-object-environment-records) and a [Declarative Environment Record](#sec-declarative-environment-records). The [Object Environment Record](#sec-object-environment-records) has as its base object the [global object](#sec-global-object) of the associated [Realm Record](#realm-record). This [global object](#sec-global-object) is the value returned by the Global Environment Record's GetThisBinding concrete method. The [Object Environment Record](#sec-object-environment-records) component of a Global Environment Record contains the bindings for all built-in globals (clause [19](#sec-global-object)) and all bindings introduced by a [FunctionDeclaration](#prod-FunctionDeclaration), [GeneratorDeclaration](#prod-GeneratorDeclaration), [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), or [VariableStatement](#prod-VariableStatement) contained in global code. The bindings for all other ECMAScript declarations in global code are contained in the [Declarative Environment Record](#sec-declarative-environment-records) component of the Global Environment Record.

Properties may be created directly on a [global object](#sec-global-object). Hence, the [Object Environment Record](#sec-object-environment-records) component of a Global Environment Record may contain both bindings created explicitly by [FunctionDeclaration](#prod-FunctionDeclaration), [GeneratorDeclaration](#prod-GeneratorDeclaration), [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), or [VariableDeclaration](#prod-VariableDeclaration) declarations and bindings created implicitly as properties of the [global object](#sec-global-object). In order to identify which bindings were explicitly created using declarations, a Global Environment Record maintains a list of the names bound using the [CreateGlobalVarBinding](#sec-createglobalvarbinding) and [CreateGlobalFunctionBinding](#sec-createglobalfunctionbinding) [abstract operations](#sec-algorithm-conventions-abstract-operations).

Global Environment Records have the additional fields listed in [Table 18](#table-additional-fields-of-global-environment-records) and the additional methods listed in [Table 19](#table-additional-methods-of-global-environment-records).

Table 18: Additional Fields of [Global Environment Records](#sec-global-environment-records)

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[ObjectRecord]]</var></td><td>an <emu-xref href="#sec-object-environment-records" id="_ref_3711"><a href="#sec-object-environment-records">Object Environment Record</a></emu-xref></td><td>Binding object is the <emu-xref href="#sec-global-object" id="_ref_3712"><a href="#sec-global-object">global object</a></emu-xref>. It contains global built-in bindings as well as <emu-nt id="_ref_19097"><a href="#prod-FunctionDeclaration">FunctionDeclaration</a></emu-nt>, <emu-nt id="_ref_19098"><a href="#prod-GeneratorDeclaration">GeneratorDeclaration</a></emu-nt>, <emu-nt id="_ref_19099"><a href="#prod-AsyncFunctionDeclaration">AsyncFunctionDeclaration</a></emu-nt>, <emu-nt id="_ref_19100"><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt>, and <emu-nt id="_ref_19101"><a href="#prod-VariableDeclaration">VariableDeclaration</a></emu-nt> bindings in global code for the associated <emu-xref href="#realm" id="_ref_3713"><a href="#realm">realm</a></emu-xref>.</td></tr><tr><td><var class="field">[[GlobalThisValue]]</var></td><td>an Object</td><td>The value returned by <code>this</code> in global scope. <emu-xref href="#host" id="_ref_3714"><a href="#host">Hosts</a></emu-xref> may provide any ECMAScript Object value.</td></tr><tr><td><var class="field">[[DeclarativeRecord]]</var></td><td>a <emu-xref href="#sec-declarative-environment-records" id="_ref_3715"><a href="#sec-declarative-environment-records">Declarative Environment Record</a></emu-xref></td><td><emu-not-ref>Contains</emu-not-ref> bindings for all declarations in global code for the associated <emu-xref href="#realm" id="_ref_3716"><a href="#realm">realm</a></emu-xref> code except for <emu-nt id="_ref_19102"><a href="#prod-FunctionDeclaration">FunctionDeclaration</a></emu-nt>, <emu-nt id="_ref_19103"><a href="#prod-GeneratorDeclaration">GeneratorDeclaration</a></emu-nt>, <emu-nt id="_ref_19104"><a href="#prod-AsyncFunctionDeclaration">AsyncFunctionDeclaration</a></emu-nt>, <emu-nt id="_ref_19105"><a href="#prod-AsyncGeneratorDeclaration">AsyncGeneratorDeclaration</a></emu-nt>, and <emu-nt id="_ref_19106"><a href="#prod-VariableDeclaration">VariableDeclaration</a></emu-nt> bindings.</td></tr></tbody></table>

Table 19: Additional Methods of [Global Environment Records](#sec-global-environment-records)

<table><thead><tr><th>Method</th><th>Purpose</th></tr></thead><tbody><tr><td>GetThisBinding()</td><td>Return the value of this <emu-xref href="#sec-environment-records" id="_ref_3718"><a href="#sec-environment-records">Environment Record</a></emu-xref>'s <code>this</code> binding.</td></tr></tbody></table>


# 9.1.1.4.1 HasBinding ( _N_ )

The HasBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes argument _N_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It determines if the argument identifier is one of the identifiers bound by the record. It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  If ! _DclRec_.HasBinding(_N_) is true, return true.
3.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
4.  Return ? _ObjRec_.HasBinding(_N_).


# 9.1.1.4.2 CreateMutableBinding ( _N_, _D_ )

The CreateMutableBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes arguments _N_ (a String) and _D_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It creates a new mutable binding for the name _N_ that is uninitialized. The binding is created in the associated DeclarativeRecord. A binding for _N_ must not already exist in the DeclarativeRecord. If _D_ is true, the new binding is marked as being subject to deletion. It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  If ! _DclRec_.HasBinding(_N_) is true, throw a TypeError exception.
3.  Return ! _DclRec_.CreateMutableBinding(_N_, _D_).


# 9.1.1.4.3 CreateImmutableBinding ( _N_, _S_ )

The CreateImmutableBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes arguments _N_ (a String) and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It creates a new immutable binding for the name _N_ that is uninitialized. A binding must not already exist in this [Environment Record](#sec-environment-records) for _N_. If _S_ is true, the new binding is marked as a strict binding. It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  If ! _DclRec_.HasBinding(_N_) is true, throw a TypeError exception.
3.  Return ! _DclRec_.CreateImmutableBinding(_N_, _S_).


# 9.1.1.4.4 InitializeBinding ( _N_, _V_ )

The InitializeBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes arguments _N_ (a String) and _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It is used to set the bound value of the current binding of the identifier whose name is _N_ to the value _V_. An uninitialized binding for _N_ must already exist. It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  If ! _DclRec_.HasBinding(_N_) is true, then
    1.  Return ! _DclRec_.InitializeBinding(_N_, _V_).
3.  [Assert](#assert): If the binding exists, it must be in the [Object Environment Record](#sec-object-environment-records).
4.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
5.  Return ? _ObjRec_.InitializeBinding(_N_, _V_).


# 9.1.1.4.5 SetMutableBinding ( _N_, _V_, _S_ )

The SetMutableBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes arguments _N_ (a String), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It attempts to change the bound value of the current binding of the identifier whose name is _N_ to the value _V_. If the binding is an immutable binding and _S_ is true, a TypeError is thrown. A property named _N_ normally already exists but if it does not or is not currently writable, error handling is determined by _S_. It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  If ! _DclRec_.HasBinding(_N_) is true, then
    1.  Return ? _DclRec_.SetMutableBinding(_N_, _V_, _S_).
3.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
4.  Return ? _ObjRec_.SetMutableBinding(_N_, _V_, _S_).


# 9.1.1.4.6 GetBindingValue ( _N_, _S_ )

The GetBindingValue concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes arguments _N_ (a String) and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It returns the value of its bound identifier whose name is _N_. If the binding is an uninitialized binding throw a ReferenceError exception. A property named _N_ normally already exists but if it does not or is not currently writable, error handling is determined by _S_. It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  If ! _DclRec_.HasBinding(_N_) is true, then
    1.  Return ? _DclRec_.GetBindingValue(_N_, _S_).
3.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
4.  Return ? _ObjRec_.GetBindingValue(_N_, _S_).


# 9.1.1.4.7 DeleteBinding ( _N_ )

The DeleteBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes argument _N_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It can only delete bindings that have been explicitly designated as being subject to deletion. It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  If ! _DclRec_.HasBinding(_N_) is true, then
    1.  Return ! _DclRec_.DeleteBinding(_N_).
3.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
4.  Let _globalObject_ be _ObjRec_._\[\[BindingObject\]\]_.
5.  Let _existingProp_ be ? [HasOwnProperty](#sec-hasownproperty)(_globalObject_, _N_).
6.  If _existingProp_ is true, then
    1.  Return ? _ObjRec_.DeleteBinding(_N_).
7.  Return true.


# 9.1.1.4.8 HasThisBinding ( )

The HasThisBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes no arguments and returns true. It performs the following steps when called:

1.  Return true.

Note

[Global Environment Records](#sec-global-environment-records) always provide a `this` binding.


# 9.1.1.4.9 HasSuperBinding ( )

The HasSuperBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes no arguments and returns false. It performs the following steps when called:

1.  Return false.

Note

[Global Environment Records](#sec-global-environment-records) do not provide a `super` binding.


# 9.1.1.4.10 WithBaseObject ( )

The WithBaseObject concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes no arguments and returns undefined. It performs the following steps when called:

1.  Return undefined.


# 9.1.1.4.11 GetThisBinding ( )

The GetThisBinding concrete method of a [Global Environment Record](#sec-global-environment-records) _envRec_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) an Object. It performs the following steps when called:

1.  Return _envRec_._\[\[GlobalThisValue\]\]_.


# 9.1.1.4.12 HasLexicalDeclaration ( _envRec_, _N_ )

The abstract operation HasLexicalDeclaration takes arguments _envRec_ (a [Global Environment Record](#sec-global-environment-records)) and _N_ (a String) and returns a Boolean. It determines if the argument identifier has a binding in _envRec_ that was created using a lexical declaration such as a [LexicalDeclaration](#prod-LexicalDeclaration) or a [ClassDeclaration](#prod-ClassDeclaration). It performs the following steps when called:

1.  Let _DclRec_ be _envRec_._\[\[DeclarativeRecord\]\]_.
2.  Return ! _DclRec_.HasBinding(_N_).


# 9.1.1.4.13 HasRestrictedGlobalProperty ( _envRec_, _N_ )

The abstract operation HasRestrictedGlobalProperty takes arguments _envRec_ (a [Global Environment Record](#sec-global-environment-records)) and _N_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It determines if the argument identifier is the name of a property of the [global object](#sec-global-object) that must not be shadowed by a global lexical binding. It performs the following steps when called:

1.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
2.  Let _globalObject_ be _ObjRec_._\[\[BindingObject\]\]_.
3.  Let _existingProp_ be ? _globalObject_._\[\[GetOwnProperty\]\]_(_N_).
4.  If _existingProp_ is undefined, return false.
5.  If _existingProp_._\[\[Configurable\]\]_ is true, return false.
6.  Return true.

Note

Properties may exist upon a [global object](#sec-global-object) that were directly created rather than being declared using a var or function declaration. A global lexical binding may not be created that has the same name as a non-configurable property of the [global object](#sec-global-object). The global property "undefined" is an example of such a property.


# 9.1.1.4.14 CanDeclareGlobalVar ( _envRec_, _N_ )

The abstract operation CanDeclareGlobalVar takes arguments _envRec_ (a [Global Environment Record](#sec-global-environment-records)) and _N_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It determines if a corresponding [CreateGlobalVarBinding](#sec-createglobalvarbinding) call would succeed if called for the same argument _N_. Redundant var declarations and var declarations for pre-existing [global object](#sec-global-object) properties are allowed. It performs the following steps when called:

1.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
2.  Let _globalObject_ be _ObjRec_._\[\[BindingObject\]\]_.
3.  Let _hasProperty_ be ? [HasOwnProperty](#sec-hasownproperty)(_globalObject_, _N_).
4.  If _hasProperty_ is true, return true.
5.  Return ? [IsExtensible](#sec-isextensible-o)(_globalObject_).


# 9.1.1.4.15 CanDeclareGlobalFunction ( _envRec_, _N_ )

The abstract operation CanDeclareGlobalFunction takes arguments _envRec_ (a [Global Environment Record](#sec-global-environment-records)) and _N_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It determines if a corresponding [CreateGlobalFunctionBinding](#sec-createglobalfunctionbinding) call would succeed if called for the same argument _N_. It performs the following steps when called:

1.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
2.  Let _globalObject_ be _ObjRec_._\[\[BindingObject\]\]_.
3.  Let _existingProp_ be ? _globalObject_._\[\[GetOwnProperty\]\]_(_N_).
4.  If _existingProp_ is undefined, return ? [IsExtensible](#sec-isextensible-o)(_globalObject_).
5.  If _existingProp_._\[\[Configurable\]\]_ is true, return true.
6.  If [IsDataDescriptor](#sec-isdatadescriptor)(_existingProp_) is true and _existingProp_ has attribute values { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true }, return true.
7.  Return false.


# 9.1.1.4.16 CreateGlobalVarBinding ( _envRec_, _N_, _D_ )

The abstract operation CreateGlobalVarBinding takes arguments _envRec_ (a [Global Environment Record](#sec-global-environment-records)), _N_ (a String), and _D_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It creates and initializes a mutable binding in the associated [Object Environment Record](#sec-object-environment-records). If a binding already exists, it is reused and assumed to be initialized. It performs the following steps when called:

1.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
2.  Let _globalObject_ be _ObjRec_._\[\[BindingObject\]\]_.
3.  Let _hasProperty_ be ? [HasOwnProperty](#sec-hasownproperty)(_globalObject_, _N_).
4.  Let _extensible_ be ? [IsExtensible](#sec-isextensible-o)(_globalObject_).
5.  If _hasProperty_ is false and _extensible_ is true, then
    1.  Perform ? _ObjRec_.CreateMutableBinding(_N_, _D_).
    2.  Perform ? _ObjRec_.InitializeBinding(_N_, undefined).
6.  Return unused.


# 9.1.1.4.17 CreateGlobalFunctionBinding ( _envRec_, _N_, _V_, _D_ )

The abstract operation CreateGlobalFunctionBinding takes arguments _envRec_ (a [Global Environment Record](#sec-global-environment-records)), _N_ (a String), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _D_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It creates and initializes a mutable binding in the associated [Object Environment Record](#sec-object-environment-records). If a binding already exists, it is replaced. It performs the following steps when called:

1.  Let _ObjRec_ be _envRec_._\[\[ObjectRecord\]\]_.
2.  Let _globalObject_ be _ObjRec_._\[\[BindingObject\]\]_.
3.  Let _existingProp_ be ? _globalObject_._\[\[GetOwnProperty\]\]_(_N_).
4.  If _existingProp_ is undefined or _existingProp_._\[\[Configurable\]\]_ is true, then
    1.  Let _desc_ be the PropertyDescriptor { _\[\[Value\]\]_: _V_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: _D_ }.
5.  Else,
    1.  Let _desc_ be the PropertyDescriptor { _\[\[Value\]\]_: _V_ }.
6.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_globalObject_, _N_, _desc_).
7.  Perform ? [Set](#sec-set-o-p-v-throw)(_globalObject_, _N_, _V_, false).
8.  Return unused.

Note

Global function declarations are always represented as own properties of the [global object](#sec-global-object). If possible, an existing own property is reconfigured to have a standard set of attribute values. Step [7](#step-createglobalfunctionbinding-set) is equivalent to what calling the InitializeBinding concrete method would do and if _globalObject_ is a Proxy will produce the same sequence of Proxy trap calls.


# 9.1.1.5 Module Environment Records

A Module Environment Record is a [Declarative Environment Record](#sec-declarative-environment-records) that is used to represent the outer scope of an ECMAScript [Module](#prod-Module). In additional to normal mutable and immutable bindings, Module Environment Records also provide immutable import bindings which are bindings that provide indirect access to a target binding that exists in another [Environment Record](#sec-environment-records).

Module Environment Records support all of the [Declarative Environment Record](#sec-declarative-environment-records) methods listed in [Table 14](#table-abstract-methods-of-environment-records) and share the same specifications for all of those methods except for GetBindingValue, DeleteBinding, HasThisBinding and GetThisBinding. In addition, Module Environment Records support the methods listed in [Table 20](#table-additional-methods-of-module-environment-records):

Table 20: Additional Methods of [Module Environment Records](#sec-module-environment-records)

<table><thead><tr><th>Method</th><th>Purpose</th></tr></thead><tbody><tr><td>GetThisBinding()</td><td>Return the value of this <emu-xref href="#sec-environment-records" id="_ref_3792"><a href="#sec-environment-records">Environment Record</a></emu-xref>'s <code>this</code> binding.</td></tr></tbody></table>


# 9.1.1.5.1 GetBindingValue ( _N_, _S_ )

The GetBindingValue concrete method of a [Module Environment Record](#sec-module-environment-records) _envRec_ takes arguments _N_ (a String) and _S_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It returns the value of its bound identifier whose name is _N_. However, if the binding is an indirect binding the value of the target binding is returned. If the binding exists but is uninitialized a ReferenceError is thrown. It performs the following steps when called:

1.  [Assert](#assert): _S_ is true.
2.  [Assert](#assert): _envRec_ has a binding for _N_.
3.  If the binding for _N_ is an indirect binding, then
    1.  Let _M_ and _N2_ be the indirection values provided when this binding for _N_ was created.
    2.  Let _targetEnv_ be _M_._\[\[Environment\]\]_.
    3.  If _targetEnv_ is empty, throw a ReferenceError exception.
    4.  Return ? _targetEnv_.GetBindingValue(_N2_, true).
4.  If the binding for _N_ in _envRec_ is an uninitialized binding, throw a ReferenceError exception.
5.  Return the value currently bound to _N_ in _envRec_.

Note

_S_ will always be true because a [Module](#prod-Module) is always [strict mode code](#sec-strict-mode-code).


# 9.1.1.5.2 DeleteBinding ( _N_ )

The DeleteBinding concrete method of a [Module Environment Record](#sec-module-environment-records) is never used within this specification.

Note

[Module Environment Records](#sec-module-environment-records) are only used within strict code and an [early error](#early-error) rule prevents the delete operator, in strict code, from being applied to a [Reference Record](#sec-reference-record-specification-type) that would resolve to a [Module Environment Record](#sec-module-environment-records) binding. See [13.5.1.1](#sec-delete-operator-static-semantics-early-errors).


# 9.1.1.5.3 HasThisBinding ( )

The HasThisBinding concrete method of a [Module Environment Record](#sec-module-environment-records) _envRec_ takes no arguments and returns true. It performs the following steps when called:

1.  Return true.

Note

[Module Environment Records](#sec-module-environment-records) always provide a `this` binding.


# 9.1.1.5.4 GetThisBinding ( )

The GetThisBinding concrete method of a [Module Environment Record](#sec-module-environment-records) _envRec_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) undefined. It performs the following steps when called:

1.  Return undefined.


# 9.1.1.5.5 CreateImportBinding ( _envRec_, _N_, _M_, _N2_ )

The abstract operation CreateImportBinding takes arguments _envRec_ (a [Module Environment Record](#sec-module-environment-records)), _N_ (a String), _M_ (a [Module Record](#sec-abstract-module-records)), and _N2_ (a String) and returns unused. It creates a new initialized immutable indirect binding for the name _N_. A binding must not already exist in _envRec_ for _N_. _N2_ is the name of a binding that exists in _M_'s [Module Environment Record](#sec-module-environment-records). Accesses to the value of the new binding will indirectly access the bound value of the target binding. It performs the following steps when called:

1.  [Assert](#assert): _envRec_ does not already have a binding for _N_.
2.  [Assert](#assert): When _M_._\[\[Environment\]\]_ is instantiated, it will have a direct binding for _N2_.
3.  Create an immutable indirect binding in _envRec_ for _N_ that references _M_ and _N2_ as its target binding and record that the binding is initialized.
4.  Return unused.


# 9.1.2 Environment Record Operations

The following [abstract operations](#sec-algorithm-conventions-abstract-operations) are used in this specification to operate upon [Environment Records](#sec-environment-records):


# 9.1.2.1 GetIdentifierReference ( _env_, _name_, _strict_ )

The abstract operation GetIdentifierReference takes arguments _env_ (an [Environment Record](#sec-environment-records) or null), _name_ (a String), and _strict_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Reference Record](#sec-reference-record-specification-type) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _env_ is null, then
    1.  Return the [Reference Record](#sec-reference-record-specification-type) { _\[\[Base\]\]_: unresolvable, _\[\[ReferencedName\]\]_: _name_, _\[\[Strict\]\]_: _strict_, _\[\[ThisValue\]\]_: empty }.
2.  Let _exists_ be ? _env_.HasBinding(_name_).
3.  If _exists_ is true, then
    1.  Return the [Reference Record](#sec-reference-record-specification-type) { _\[\[Base\]\]_: _env_, _\[\[ReferencedName\]\]_: _name_, _\[\[Strict\]\]_: _strict_, _\[\[ThisValue\]\]_: empty }.
4.  Else,
    1.  Let _outer_ be _env_._\[\[OuterEnv\]\]_.
    2.  Return ? [GetIdentifierReference](#sec-getidentifierreference)(_outer_, _name_, _strict_).


# 9.1.2.2 NewDeclarativeEnvironment ( _E_ )

The abstract operation NewDeclarativeEnvironment takes argument _E_ (an [Environment Record](#sec-environment-records) or null) and returns a [Declarative Environment Record](#sec-declarative-environment-records). It performs the following steps when called:

1.  Let _env_ be a new [Declarative Environment Record](#sec-declarative-environment-records) containing no bindings.
2.  Set _env_._\[\[OuterEnv\]\]_ to _E_.
3.  Return _env_.


# 9.1.2.3 NewObjectEnvironment ( _O_, _W_, _E_ )

The abstract operation NewObjectEnvironment takes arguments _O_ (an Object), _W_ (a Boolean), and _E_ (an [Environment Record](#sec-environment-records) or null) and returns an [Object Environment Record](#sec-object-environment-records). It performs the following steps when called:

1.  Let _env_ be a new [Object Environment Record](#sec-object-environment-records).
2.  Set _env_._\[\[BindingObject\]\]_ to _O_.
3.  Set _env_._\[\[IsWithEnvironment\]\]_ to _W_.
4.  Set _env_._\[\[OuterEnv\]\]_ to _E_.
5.  Return _env_.


# 9.1.2.4 NewFunctionEnvironment ( _F_, _newTarget_ )

The abstract operation NewFunctionEnvironment takes arguments _F_ (an ECMAScript [function object](#function-object)) and _newTarget_ (an Object or undefined) and returns a [Function Environment Record](#sec-function-environment-records). It performs the following steps when called:

1.  Let _env_ be a new [Function Environment Record](#sec-function-environment-records) containing no bindings.
2.  Set _env_._\[\[FunctionObject\]\]_ to _F_.
3.  If _F_._\[\[ThisMode\]\]_ is lexical, set _env_._\[\[ThisBindingStatus\]\]_ to lexical.
4.  Else, set _env_._\[\[ThisBindingStatus\]\]_ to uninitialized.
5.  Set _env_._\[\[NewTarget\]\]_ to _newTarget_.
6.  Set _env_._\[\[OuterEnv\]\]_ to _F_._\[\[Environment\]\]_.
7.  Return _env_.


# 9.1.2.5 NewGlobalEnvironment ( _G_, _thisValue_ )

The abstract operation NewGlobalEnvironment takes arguments _G_ (an Object) and _thisValue_ (an Object) and returns a [Global Environment Record](#sec-global-environment-records). It performs the following steps when called:

1.  Let _objRec_ be [NewObjectEnvironment](#sec-newobjectenvironment)(_G_, false, null).
2.  Let _dclRec_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(null).
3.  Let _env_ be a new [Global Environment Record](#sec-global-environment-records).
4.  Set _env_._\[\[ObjectRecord\]\]_ to _objRec_.
5.  Set _env_._\[\[GlobalThisValue\]\]_ to _thisValue_.
6.  Set _env_._\[\[DeclarativeRecord\]\]_ to _dclRec_.
7.  Set _env_._\[\[OuterEnv\]\]_ to null.
8.  Return _env_.


# 9.1.2.6 NewModuleEnvironment ( _E_ )

The abstract operation NewModuleEnvironment takes argument _E_ (an [Environment Record](#sec-environment-records)) and returns a [Module Environment Record](#sec-module-environment-records). It performs the following steps when called:

1.  Let _env_ be a new [Module Environment Record](#sec-module-environment-records) containing no bindings.
2.  Set _env_._\[\[OuterEnv\]\]_ to _E_.
3.  Return _env_.


# 9.2 PrivateEnvironment Records

A PrivateEnvironment Record is a specification mechanism used to track [Private Names](#sec-private-names) based upon the lexical nesting structure of [ClassDeclaration](#prod-ClassDeclaration)s and [ClassExpression](#prod-ClassExpression)s in ECMAScript code. They are similar to, but distinct from, [Environment Records](#sec-environment-records). Each [PrivateEnvironment Record](#privateenvironment-record) is associated with a [ClassDeclaration](#prod-ClassDeclaration) or [ClassExpression](#prod-ClassExpression). Each time such a class is evaluated, a new [PrivateEnvironment Record](#privateenvironment-record) is created to record the [Private Names](#sec-private-names) declared by that class.

Each [PrivateEnvironment Record](#privateenvironment-record) has the fields defined in [Table 21](#table-privateenvironment-records).

Table 21: [PrivateEnvironment Record](#privateenvironment-record) Fields

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[OuterPrivateEnvironment]]</var></td><td>a <emu-xref href="#privateenvironment-record" id="_ref_3846"><a href="#privateenvironment-record">PrivateEnvironment Record</a></emu-xref> or <emu-val>null</emu-val></td><td>The <emu-xref href="#privateenvironment-record" id="_ref_3847"><a href="#privateenvironment-record">PrivateEnvironment Record</a></emu-xref> of the nearest containing class. <emu-val>null</emu-val> if the class with which this <emu-xref href="#privateenvironment-record" id="_ref_3848"><a href="#privateenvironment-record">PrivateEnvironment Record</a></emu-xref> is associated is not contained in any other class.</td></tr><tr><td><var class="field">[[Names]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_3849"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-private-names" id="_ref_3850"><a href="#sec-private-names">Private Names</a></emu-xref></td><td>The <emu-xref href="#sec-private-names" id="_ref_3851"><a href="#sec-private-names">Private Names</a></emu-xref> declared by this class.</td></tr></tbody></table>


# 9.2.1 PrivateEnvironment Record Operations

The following [abstract operations](#sec-algorithm-conventions-abstract-operations) are used in this specification to operate upon [PrivateEnvironment Records](#privateenvironment-record):


# 9.2.1.1 NewPrivateEnvironment ( _outerPrivateEnv_ )

The abstract operation NewPrivateEnvironment takes argument _outerPrivateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null) and returns a [PrivateEnvironment Record](#privateenvironment-record). It performs the following steps when called:

1.  Let _names_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Return the [PrivateEnvironment Record](#privateenvironment-record) { _\[\[OuterPrivateEnvironment\]\]_: _outerPrivateEnv_, _\[\[Names\]\]_: _names_ }.


# 9.2.1.2 ResolvePrivateIdentifier ( _privateEnv_, _identifier_ )

The abstract operation ResolvePrivateIdentifier takes arguments _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record)) and _identifier_ (a String) and returns a [Private Name](#sec-private-names). It performs the following steps when called:

1.  Let _names_ be _privateEnv_._\[\[Names\]\]_.
2.  For each [Private Name](#sec-private-names) _pn_ of _names_, do
    1.  If _pn_._\[\[Description\]\]_ is _identifier_, then
        1.  Return _pn_.
3.  Let _outerPrivateEnv_ be _privateEnv_._\[\[OuterPrivateEnvironment\]\]_.
4.  [Assert](#assert): _outerPrivateEnv_ is not null.
5.  Return [ResolvePrivateIdentifier](#sec-resolve-private-identifier)(_outerPrivateEnv_, _identifier_).


# 9.3 Realms

Before it is evaluated, all ECMAScript code must be associated with a realm. Conceptually, a [realm](#realm) consists of a set of intrinsic objects, an ECMAScript global environment, all of the ECMAScript code that is loaded within the scope of that global environment, and other associated state and resources.

A [realm](#realm) is represented in this specification as a Realm Record with the fields specified in [Table 22](#table-realm-record-fields):

Table 22: [Realm Record](#realm-record) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[AgentSignifier]]</var></td><td>an <emu-xref href="#sec-agents" id="_ref_3866"><a href="#sec-agents">agent signifier</a></emu-xref></td><td>The <emu-xref href="#agent" id="_ref_3867"><a href="#agent">agent</a></emu-xref> that owns this <emu-xref href="#realm" id="_ref_3868"><a href="#realm">realm</a></emu-xref></td></tr><tr><td><var class="field">[[Intrinsics]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_3869"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> whose field names are intrinsic keys and whose values are objects</td><td>The intrinsic values used by code associated with this <emu-xref href="#realm" id="_ref_3870"><a href="#realm">realm</a></emu-xref></td></tr><tr><td><var class="field">[[GlobalObject]]</var></td><td>an Object</td><td>The <emu-xref href="#sec-global-object" id="_ref_3871"><a href="#sec-global-object">global object</a></emu-xref> for this <emu-xref href="#realm" id="_ref_3872"><a href="#realm">realm</a></emu-xref></td></tr><tr><td><var class="field">[[GlobalEnv]]</var></td><td>a <emu-xref href="#sec-global-environment-records" id="_ref_3873"><a href="#sec-global-environment-records">Global Environment Record</a></emu-xref></td><td>The global environment for this <emu-xref href="#realm" id="_ref_3874"><a href="#realm">realm</a></emu-xref></td></tr><tr><td><var class="field">[[TemplateMap]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_3875"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-list-and-record-specification-type" id="_ref_3876"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> with fields <var class="field">[[Site]]</var> (a <emu-nt id="_ref_19115"><a href="#prod-TemplateLiteral">TemplateLiteral</a></emu-nt> <emu-xref href="#sec-syntactic-grammar" id="_ref_3877"><a href="#sec-syntactic-grammar">Parse Node</a></emu-xref>) and <var class="field">[[Array]]</var> (an Array)</td><td><p>Template objects are canonicalized separately for each <emu-xref href="#realm" id="_ref_3878"><a href="#realm">realm</a></emu-xref> using its <emu-xref href="#realm-record" id="_ref_3879"><a href="#realm-record">Realm Record</a></emu-xref>'s <var class="field">[[TemplateMap]]</var>. Each <var class="field">[[Site]]</var> value is a <emu-xref href="#sec-syntactic-grammar" id="_ref_3880"><a href="#sec-syntactic-grammar">Parse Node</a></emu-xref> that is a <emu-nt id="_ref_19116"><a href="#prod-TemplateLiteral">TemplateLiteral</a></emu-nt>. The associated <var class="field">[[Array]]</var> value is the corresponding template object that is passed to a tag function.</p><emu-note><span class="note">Note 1</span><div class="note-contents">Once a <emu-xref href="#sec-syntactic-grammar" id="_ref_3881"><a href="#sec-syntactic-grammar">Parse Node</a></emu-xref> becomes unreachable, the corresponding <var class="field">[[Array]]</var> is also unreachable, and it would be unobservable if an implementation removed the pair from the <var class="field">[[TemplateMap]]</var> list.</div></emu-note></td></tr><tr><td><var class="field">[[LoadedModules]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_3882"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#loadedmodulerequest-record" id="_ref_3883"><a href="#loadedmodulerequest-record">LoadedModuleRequest Records</a></emu-xref></td><td><p>A map from the specifier strings imported by this <emu-xref href="#realm" id="_ref_3884"><a href="#realm">realm</a></emu-xref> to the resolved <emu-xref href="#sec-abstract-module-records" id="_ref_3885"><a href="#sec-abstract-module-records">Module Record</a></emu-xref>. The list does not contain two different <emu-xref href="#sec-list-and-record-specification-type" id="_ref_3886"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> <var>r1</var> and <var>r2</var> such that <emu-xref aoid="ModuleRequestsEqual" id="_ref_3887"><a href="#sec-ModuleRequestsEqual">ModuleRequestsEqual</a></emu-xref>(<var>r1</var>, <var>r2</var>) is <emu-val>true</emu-val>.</p><emu-note><span class="note">Note 2</span><div class="note-contents">As mentioned in <emu-xref aoid="HostLoadImportedModule" id="_ref_3888"><a href="#sec-HostLoadImportedModule">HostLoadImportedModule</a></emu-xref> (<emu-xref href="#note-HostLoadImportedModule-referrer-Realm-Record" id="_ref_253"><a href="#note-HostLoadImportedModule-referrer-Realm-Record">16.2.1.10 Note 1</a></emu-xref>), <var class="field">[[LoadedModules]]</var> in <emu-xref href="#realm-record" id="_ref_3889"><a href="#realm-record">Realm Records</a></emu-xref> is only used when running an <code>import()</code> expression in a context where there is no <emu-xref href="#job-activescriptormodule" id="_ref_3890"><a href="#job-activescriptormodule">active script or module</a></emu-xref>.</div></emu-note></td></tr><tr><td><var class="field">[[HostDefined]]</var></td><td>anything (default value is <emu-val>undefined</emu-val>)</td><td>Field reserved for use by <emu-xref href="#host" id="_ref_3891"><a href="#host">hosts</a></emu-xref> that need to associate additional information with a <emu-xref href="#realm-record" id="_ref_3892"><a href="#realm-record">Realm Record</a></emu-xref>.</td></tr></tbody></table>


# 9.3.1 InitializeHostDefinedRealm ( )

The abstract operation InitializeHostDefinedRealm takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _realm_ be a new [Realm Record](#realm-record).
2.  Perform [CreateIntrinsics](#sec-createintrinsics)(_realm_).
3.  Set _realm_._\[\[AgentSignifier\]\]_ to [AgentSignifier](#sec-agentsignifier)().
4.  Set _realm_._\[\[TemplateMap\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
5.  Let _newContext_ be a new [execution context](#sec-execution-contexts).
6.  Set the Function of _newContext_ to null.
7.  Set the [Realm](#realm) of _newContext_ to _realm_.
8.  Set the ScriptOrModule of _newContext_ to null.
9.  Push _newContext_ onto the [execution context stack](#execution-context-stack); _newContext_ is now the [running execution context](#running-execution-context).
10.  If the [host](#host) requires use of a specific object to serve as _realm_'s [global object](#sec-global-object), then
     1.  Let _global_ be such an object created in a [host-defined](#host-defined) manner.
11.  Else,
     1.  Let _global_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(_realm_._\[\[Intrinsics\]\]_.\[\[[%Object.prototype%](#sec-properties-of-the-object-prototype-object)\]\]).
12.  If the [host](#host) requires that the `this` binding in _realm_'s global scope return an object other than the [global object](#sec-global-object), then
     1.  Let _thisValue_ be such an object created in a [host-defined](#host-defined) manner.
13.  Else,
     1.  Let _thisValue_ be _global_.
14.  Set _realm_._\[\[GlobalObject\]\]_ to _global_.
15.  Set _realm_._\[\[GlobalEnv\]\]_ to [NewGlobalEnvironment](#sec-newglobalenvironment)(_global_, _thisValue_).
16.  Perform ? [SetDefaultGlobalBindings](#sec-setdefaultglobalbindings)(_realm_).
17.  Create any [host-defined](#host-defined) [global object](#sec-global-object) properties on _global_.
18.  Return unused.


# 9.3.2 CreateIntrinsics ( _realmRec_ )

The abstract operation CreateIntrinsics takes argument _realmRec_ (a [Realm Record](#realm-record)) and returns unused. It performs the following steps when called:

1.  Set _realmRec_._\[\[Intrinsics\]\]_ to a new [Record](#sec-list-and-record-specification-type).
2.  Set fields of _realmRec_._\[\[Intrinsics\]\]_ with the values listed in [Table 6](#table-well-known-intrinsic-objects). The field names are the names listed in column one of the table. The value of each field is a new object value fully and recursively populated with property values as defined by the specification of each object in clauses [19](#sec-global-object) through [28](#sec-reflection). All object property values are newly created object values. All values that are built-in [function objects](#function-object) are created by performing [CreateBuiltinFunction](#sec-createbuiltinfunction)(_steps_, _length_, _name_, _slots_, _realmRec_, _prototype_, _async_) where _steps_ is the definition of that function provided by this specification, _name_ is the initial value of the function's "name" property, _length_ is the initial value of the function's "length" property, _slots_ is a list of the names, if any, of the function's specified internal slots, _prototype_ is the specified value of the function's _\[\[Prototype\]\]_ internal slot, and _async_ is true if the function is described as “async” and false otherwise. The creation of the intrinsics and their properties must be ordered to avoid any dependencies upon objects that have not yet been created.
3.  Perform [AddRestrictedFunctionProperties](#sec-addrestrictedfunctionproperties)(_realmRec_._\[\[Intrinsics\]\]_.\[\[[%Function.prototype%](#sec-properties-of-the-function-prototype-object)\]\], _realmRec_).
4.  Return unused.


# 9.3.3 SetDefaultGlobalBindings ( _realmRec_ )

The abstract operation SetDefaultGlobalBindings takes argument _realmRec_ (a [Realm Record](#realm-record)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _global_ be _realmRec_._\[\[GlobalObject\]\]_.
2.  For each property of the Global Object specified in clause [19](#sec-global-object), do
    1.  Let _name_ be the String value of the [property name](#property-name).
    2.  Let _desc_ be the fully populated data [Property Descriptor](#sec-property-descriptor-specification-type) for the property, containing the specified attributes for the property. For properties listed in [19.2](#sec-function-properties-of-the-global-object), [19.3](#sec-constructor-properties-of-the-global-object), or [19.4](#sec-other-properties-of-the-global-object) the value of the _\[\[Value\]\]_ attribute is the corresponding intrinsic object from _realmRec_.
    3.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_global_, _name_, _desc_).
3.  Return unused.


# 9.4 Execution Contexts

An execution context is a specification device that is used to track the runtime evaluation of code by an ECMAScript implementation. At any point in time, there is at most one execution context per [agent](#agent) that is actually executing code. This is known as the [agent](#agent)'s running execution context. All references to the [running execution context](#running-execution-context) in this specification denote the [running execution context](#running-execution-context) of the [surrounding agent](#surrounding-agent).

The execution context stack is used to track execution contexts. The [running execution context](#running-execution-context) is always the top element of this stack. A new execution context is created whenever control is transferred from the executable code associated with the currently [running execution context](#running-execution-context) to executable code that is not associated with that execution context. The newly created execution context is pushed onto the stack and becomes the [running execution context](#running-execution-context).

An execution context contains whatever implementation specific state is necessary to track the execution progress of its associated code. Each execution context has at least the state components listed in [Table 23](#table-state-components-for-all-execution-contexts).

Table 23: State Components for All Execution Contexts

<table><thead><tr><th>Component</th><th>Purpose</th></tr></thead><tbody><tr><td>code evaluation state</td><td>Any state needed to perform, suspend, and resume evaluation of the code associated with this <emu-xref href="#sec-execution-contexts" id="_ref_3935"><a href="#sec-execution-contexts">execution context</a></emu-xref>.</td></tr><tr><td>Function</td><td>If this <emu-xref href="#sec-execution-contexts" id="_ref_3936"><a href="#sec-execution-contexts">execution context</a></emu-xref> is evaluating the code of a <emu-xref href="#function-object" id="_ref_3937"><a href="#function-object">function object</a></emu-xref>, then the value of this component is that <emu-xref href="#function-object" id="_ref_3938"><a href="#function-object">function object</a></emu-xref>. If the context is evaluating the code of a <emu-nt id="_ref_19117"><a href="#prod-Script">Script</a></emu-nt> or <emu-nt id="_ref_19118"><a href="#prod-Module">Module</a></emu-nt>, the value is <emu-val>null</emu-val>.</td></tr><tr><td><emu-xref href="#realm" id="_ref_3939"><a href="#realm">Realm</a></emu-xref></td><td>The <emu-xref href="#realm-record" id="_ref_3940"><a href="#realm-record">Realm Record</a></emu-xref> from which associated code accesses ECMAScript resources.</td></tr><tr><td>ScriptOrModule</td><td>The <emu-xref href="#sec-abstract-module-records" id="_ref_3941"><a href="#sec-abstract-module-records">Module Record</a></emu-xref> or <emu-xref href="#script-record" id="_ref_3942"><a href="#script-record">Script Record</a></emu-xref> from which associated code originates. If there is no originating script or module, as is the case for the original <emu-xref href="#sec-execution-contexts" id="_ref_3943"><a href="#sec-execution-contexts">execution context</a></emu-xref> created in <emu-xref aoid="InitializeHostDefinedRealm" id="_ref_3944"><a href="#sec-initializehostdefinedrealm">InitializeHostDefinedRealm</a></emu-xref>, the value is <emu-val>null</emu-val>.</td></tr></tbody></table>

[Evaluation](#sec-evaluation) of code by the [running execution context](#running-execution-context) may be suspended at various points defined within this specification. Once the [running execution context](#running-execution-context) has been suspended a different execution context may become the [running execution context](#running-execution-context) and commence evaluating its code. At some later time a suspended execution context may again become the [running execution context](#running-execution-context) and continue evaluating its code at the point where it had previously been suspended. Transition of the [running execution context](#running-execution-context) status among execution contexts usually occurs in stack-like last-in/first-out manner. However, some ECMAScript features require non-LIFO transitions of the [running execution context](#running-execution-context).

The value of the [Realm](#realm) component of the [running execution context](#running-execution-context) is also called the current Realm Record. The value of the Function component of the [running execution context](#running-execution-context) is also called the active function object.

ECMAScript code execution contexts have the additional state components listed in [Table 24](#table-additional-state-components-for-ecmascript-code-execution-contexts).

Table 24: Additional State Components for ECMAScript Code Execution Contexts

<table><thead><tr><th>Component</th><th>Purpose</th></tr></thead><tbody><tr><td>LexicalEnvironment</td><td>Identifies the <emu-xref href="#sec-environment-records" id="_ref_3955"><a href="#sec-environment-records">Environment Record</a></emu-xref> used to resolve identifier references made by code within this <emu-xref href="#sec-execution-contexts" id="_ref_3956"><a href="#sec-execution-contexts">execution context</a></emu-xref>.</td></tr><tr><td>VariableEnvironment</td><td>Identifies the <emu-xref href="#sec-environment-records" id="_ref_3957"><a href="#sec-environment-records">Environment Record</a></emu-xref> that holds bindings created by <emu-nt id="_ref_19119"><a href="#prod-VariableStatement">VariableStatement</a></emu-nt>s within this <emu-xref href="#sec-execution-contexts" id="_ref_3958"><a href="#sec-execution-contexts">execution context</a></emu-xref>.</td></tr><tr><td>PrivateEnvironment</td><td>Identifies the <emu-xref href="#privateenvironment-record" id="_ref_3959"><a href="#privateenvironment-record">PrivateEnvironment Record</a></emu-xref> that holds <emu-xref href="#sec-private-names" id="_ref_3960"><a href="#sec-private-names">Private Names</a></emu-xref> created by <emu-nt id="_ref_19120"><a href="#prod-ClassElement">ClassElement</a></emu-nt>s in the nearest containing class. <emu-val>null</emu-val> if there is no containing class.</td></tr></tbody></table>

The LexicalEnvironment and VariableEnvironment components of an execution context are always [Environment Records](#sec-environment-records).

Execution contexts representing the evaluation of Generators have the additional state components listed in [Table 25](#table-additional-state-components-for-generator-execution-contexts).

Table 25: Additional State Components for Generator Execution Contexts

<table><thead><tr><th>Component</th><th>Purpose</th></tr></thead><tbody><tr><td>Generator</td><td>The Generator that this <emu-xref href="#sec-execution-contexts" id="_ref_3962"><a href="#sec-execution-contexts">execution context</a></emu-xref> is evaluating.</td></tr></tbody></table>

In most situations only the [running execution context](#running-execution-context) (the top of the [execution context stack](#execution-context-stack)) is directly manipulated by algorithms within this specification. Hence when the terms “LexicalEnvironment”, and “VariableEnvironment” are used without qualification they are in reference to those components of the [running execution context](#running-execution-context).

An execution context is purely a specification mechanism and need not correspond to any particular artefact of an ECMAScript implementation. It is impossible for ECMAScript code to directly access or observe an execution context.


# 9.4.1 GetActiveScriptOrModule ( )

The abstract operation GetActiveScriptOrModule takes no arguments and returns a [Script Record](#script-record), a [Module Record](#sec-abstract-module-records), or null. It is used to determine the running script or module, based on the [running execution context](#running-execution-context). It performs the following steps when called:

1.  If the [execution context stack](#execution-context-stack) is empty, return null.
2.  Let _ec_ be the topmost [execution context](#sec-execution-contexts) on the [execution context stack](#execution-context-stack) whose ScriptOrModule component is not null.
3.  If no such [execution context](#sec-execution-contexts) exists, return null; otherwise return _ec_'s ScriptOrModule.


# 9.4.2 ResolveBinding ( _name_ \[, _env_ \] )

The abstract operation ResolveBinding takes argument _name_ (a String) and optional argument _env_ (an [Environment Record](#sec-environment-records) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Reference Record](#sec-reference-record-specification-type) or a [throw completion](#sec-completion-record-specification-type). It is used to determine the binding of _name_. _env_ can be used to explicitly provide the [Environment Record](#sec-environment-records) that is to be searched for the binding. It performs the following steps when called:

1.  If _env_ is not present or _env_ is undefined, then
    1.  Set _env_ to the [running execution context](#running-execution-context)'s LexicalEnvironment.
2.  [Assert](#assert): _env_ is an [Environment Record](#sec-environment-records).
3.  Let _strict_ be [IsStrict](#sec-isstrict)(the syntactic production that is being evaluated).
4.  Return ? [GetIdentifierReference](#sec-getidentifierreference)(_env_, _name_, _strict_).

Note

The result of ResolveBinding is always a [Reference Record](#sec-reference-record-specification-type) whose _\[\[ReferencedName\]\]_ field is _name_.


# 9.4.3 GetThisEnvironment ( )

The abstract operation GetThisEnvironment takes no arguments and returns an [Environment Record](#sec-environment-records). It finds the [Environment Record](#sec-environment-records) that currently supplies the binding of the [keyword](#sec-keywords-and-reserved-words) `this`. It performs the following steps when called:

1.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
2.  Repeat,
    1.  Let _exists_ be _env_.HasThisBinding().
    2.  If _exists_ is true, return _env_.
    3.  Let _outer_ be _env_._\[\[OuterEnv\]\]_.
    4.  [Assert](#assert): _outer_ is not null.
    5.  Set _env_ to _outer_.

Note

The loop in step [2](#step-getthisenvironment-loop) will always terminate because the list of environments always ends with the global environment which has a `this` binding.


# 9.4.4 ResolveThisBinding ( )

The abstract operation ResolveThisBinding takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It determines the binding of the [keyword](#sec-keywords-and-reserved-words) `this` using the LexicalEnvironment of the [running execution context](#running-execution-context). It performs the following steps when called:

1.  Let _envRec_ be [GetThisEnvironment](#sec-getthisenvironment)().
2.  Return ? _envRec_.GetThisBinding().


# 9.4.5 GetNewTarget ( )

The abstract operation GetNewTarget takes no arguments and returns an Object or undefined. It determines the NewTarget value using the LexicalEnvironment of the [running execution context](#running-execution-context). It performs the following steps when called:

1.  Let _envRec_ be [GetThisEnvironment](#sec-getthisenvironment)().
2.  [Assert](#assert): _envRec_ has a _\[\[NewTarget\]\]_ field.
3.  Return _envRec_._\[\[NewTarget\]\]_.


# 9.4.6 GetGlobalObject ( )

The abstract operation GetGlobalObject takes no arguments and returns an Object. It returns the [global object](#sec-global-object) used by the currently [running execution context](#running-execution-context). It performs the following steps when called:

1.  Let _currentRealm_ be [the current Realm Record](#current-realm).
2.  Return _currentRealm_._\[\[GlobalObject\]\]_.


# 9.5 Jobs and Host Operations to Enqueue Jobs

A Job is an [Abstract Closure](#sec-abstract-closure) with no parameters that initiates an ECMAScript computation when no other ECMAScript computation is currently in progress.

[Jobs](#job) are scheduled for execution by ECMAScript [host environments](#host-environment) in a particular [agent](#agent). This specification describes the [host hooks](#host-hook) [HostEnqueueGenericJob](#sec-hostenqueuegenericjob), [HostEnqueueFinalizationRegistryCleanupJob](#sec-host-cleanup-finalization-registry), [HostEnqueuePromiseJob](#sec-hostenqueuepromisejob), and [HostEnqueueTimeoutJob](#sec-hostenqueuetimeoutjob) to schedule jobs. The [host hooks](#host-hook) in this specification are organized by the additional constraints imposed on the scheduling of jobs. [Hosts](#host) may define additional [abstract operations](#sec-algorithm-conventions-abstract-operations) which schedule jobs. Such operations accept a [Job](#job) [Abstract Closure](#sec-abstract-closure) and a [realm](#realm) (a [Realm Record](#realm-record) or null) as parameters. If a [Realm Record](#realm-record) is provided, these operations schedule the job to be performed at some future time in the provided [realm](#realm), in the [agent](#agent) that owns the [realm](#realm). If null is provided instead for the [realm](#realm), then the job does not evaluate ECMAScript code. Their implementations must conform to the following requirements:

-   At some future point in time, when there is no running context in the [agent](#agent) for which the job is scheduled and that [agent](#agent)'s [execution context stack](#execution-context-stack) is empty, the implementation must:
    1.  Perform any [host-defined](#host-defined) preparation steps.
    2.  Invoke the [Job](#job) [Abstract Closure](#sec-abstract-closure).
    3.  Perform any [host-defined](#host-defined) cleanup steps, after which the [execution context stack](#execution-context-stack) must be empty.
-   Only one [Job](#job) may be actively undergoing evaluation at any point in time in an [agent](#agent).
-   Once evaluation of a [Job](#job) starts, it must run to completion before evaluation of any other [Job](#job) starts in an [agent](#agent).
-   The [Abstract Closure](#sec-abstract-closure) must return a [normal completion](#sec-completion-record-specification-type), implementing its own handling of errors.

Note 1

[Host environments](#host-environment) are not required to treat [Jobs](#job) uniformly with respect to scheduling. For example, web browsers and Node.js treat Promise-handling [Jobs](#job) as a higher priority than other work; future features may add [Jobs](#job) that are not treated at such a high priority.

At any particular time, _scriptOrModule_ (a [Script Record](#script-record), a [Module Record](#sec-abstract-module-records), or null) is the active script or module if all of the following conditions are true:

-   [GetActiveScriptOrModule](#sec-getactivescriptormodule)() is _scriptOrModule_.
-   If _scriptOrModule_ is a [Script Record](#script-record) or [Module Record](#sec-abstract-module-records), let _ec_ be the topmost [execution context](#sec-execution-contexts) on the [execution context stack](#execution-context-stack) whose ScriptOrModule component is _scriptOrModule_. The [Realm](#realm) component of _ec_ is _scriptOrModule_._\[\[Realm\]\]_.

At any particular time, an execution is prepared to evaluate ECMAScript code if all of the following conditions are true:

-   The [execution context stack](#execution-context-stack) is not empty.
-   The [Realm](#realm) component of the topmost [execution context](#sec-execution-contexts) on the [execution context stack](#execution-context-stack) is a [Realm Record](#realm-record).

Note 2

[Host environments](#host-environment) may prepare an execution to evaluate code by pushing [execution contexts](#sec-execution-contexts) onto the [execution context stack](#execution-context-stack). The specific steps are [implementation-defined](#implementation-defined).

The specific choice of [Realm](#realm) is up to the [host environment](#host-environment). This initial [execution context](#sec-execution-contexts) and [Realm](#realm) is only in use before any callback function is invoked. When a callback function related to a [Job](#job), like a Promise handler, is invoked, the invocation pushes its own [execution context](#sec-execution-contexts) and [Realm](#realm).

Particular kinds of [Jobs](#job) have additional conformance requirements.


# 9.5.1 JobCallback Records

A JobCallback Record is a [Record](#sec-list-and-record-specification-type) value used to store a [function object](#function-object) and a [host-defined](#host-defined) value. [Function objects](#function-object) that are invoked via a [Job](#job) enqueued by the [host](#host) may have additional [host-defined](#host-defined) context. To propagate the state, [Job](#job) [Abstract Closures](#sec-abstract-closure) should not capture and call [function objects](#function-object) directly. Instead, use [HostMakeJobCallback](#sec-hostmakejobcallback) and [HostCallJobCallback](#sec-hostcalljobcallback).

Note

The WHATWG HTML specification ([https://html.spec.whatwg.org/](https://html.spec.whatwg.org/)), for example, uses the [host-defined](#host-defined) value to propagate the incumbent settings object for Promise callbacks.

JobCallback Records have the fields listed in [Table 26](#table-jobcallback-records).

Table 26: [JobCallback Record](#sec-jobcallback-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Callback]]</var></td><td>a <emu-xref href="#function-object" id="_ref_4080"><a href="#function-object">function object</a></emu-xref></td><td>The function to invoke when the <emu-xref href="#job" id="_ref_4081"><a href="#job">Job</a></emu-xref> is invoked.</td></tr><tr><td><var class="field">[[HostDefined]]</var></td><td>anything (default value is <emu-const>empty</emu-const>)</td><td>Field reserved for use by <emu-xref href="#host" id="_ref_4082"><a href="#host">hosts</a></emu-xref>.</td></tr></tbody></table>


# 9.5.2 HostMakeJobCallback ( _callback_ )

The [host-defined](#host-defined) abstract operation HostMakeJobCallback takes argument _callback_ (a [function object](#function-object)) and returns a [JobCallback Record](#sec-jobcallback-records).

An implementation of HostMakeJobCallback must conform to the following requirements:

-   It must return a [JobCallback Record](#sec-jobcallback-records) whose _\[\[Callback\]\]_ field is _callback_.

The default implementation of HostMakeJobCallback performs the following steps when called:

1.  Return the [JobCallback Record](#sec-jobcallback-records) { _\[\[Callback\]\]_: _callback_, _\[\[HostDefined\]\]_: empty }.

ECMAScript [hosts](#host) that are not web browsers must use the default implementation of HostMakeJobCallback.

Note

This is called at the time that the callback is passed to the function that is responsible for its being eventually scheduled and run. For example, `promise.then(thenAction)` calls MakeJobCallback on `thenAction` at the time of invoking `Promise.prototype.then`, not at the time of scheduling the reaction [Job](#job).


# 9.5.3 HostCallJobCallback ( _jobCallback_, _V_, _argumentsList_ )

The [host-defined](#host-defined) abstract operation HostCallJobCallback takes arguments _jobCallback_ (a [JobCallback Record](#sec-jobcallback-records)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type).

An implementation of HostCallJobCallback must conform to the following requirements:

-   It must perform and return the result of [Call](#sec-call)(_jobCallback_._\[\[Callback\]\]_, _V_, _argumentsList_).

Note

This requirement means that [hosts](#host) cannot change the _\[\[Call\]\]_ behaviour of [function objects](#function-object) defined in this specification.

The default implementation of HostCallJobCallback performs the following steps when called:

1.  [Assert](#assert): [IsCallable](#sec-iscallable)(_jobCallback_._\[\[Callback\]\]_) is true.
2.  Return ? [Call](#sec-call)(_jobCallback_._\[\[Callback\]\]_, _V_, _argumentsList_).

ECMAScript [hosts](#host) that are not web browsers must use the default implementation of HostCallJobCallback.


# 9.5.4 HostEnqueueGenericJob ( _job_, _realm_ )

The [host-defined](#host-defined) abstract operation HostEnqueueGenericJob takes arguments _job_ (a [Job](#job) [Abstract Closure](#sec-abstract-closure)) and _realm_ (a [Realm Record](#realm-record)) and returns unused. It schedules _job_ in the [realm](#realm) _realm_ in the [agent](#agent) signified by _realm_._\[\[AgentSignifier\]\]_ to be performed at some future time. The [Abstract Closures](#sec-abstract-closure) used with this algorithm are intended to be scheduled without additional constraints, such as priority and ordering.

An implementation of HostEnqueueGenericJob must conform to the requirements in [9.5](#sec-jobs).


# 9.5.5 HostEnqueuePromiseJob ( _job_, _realm_ )

The [host-defined](#host-defined) abstract operation HostEnqueuePromiseJob takes arguments _job_ (a [Job](#job) [Abstract Closure](#sec-abstract-closure)) and _realm_ (a [Realm Record](#realm-record) or null) and returns unused. It schedules _job_ to be performed at some future time. The [Abstract Closures](#sec-abstract-closure) used with this algorithm are intended to be related to the handling of Promises, or otherwise, to be scheduled with equal priority to Promise handling operations.

An implementation of HostEnqueuePromiseJob must conform to the requirements in [9.5](#sec-jobs) as well as the following:

-   If _realm_ is not null, each time _job_ is invoked the implementation must perform [implementation-defined](#implementation-defined) steps such that execution is [prepared to evaluate ECMAScript code](#job-preparedtoevaluatecode) at the time of _job_'s invocation.
-   Let _scriptOrModule_ be [GetActiveScriptOrModule](#sec-getactivescriptormodule)() at the time HostEnqueuePromiseJob is invoked. If _realm_ is not null, each time _job_ is invoked the implementation must perform [implementation-defined](#implementation-defined) steps such that _scriptOrModule_ is the [active script or module](#job-activescriptormodule) at the time of _job_'s invocation.
-   [Jobs](#job) must run in the same order as the HostEnqueuePromiseJob invocations that scheduled them.

Note

The _realm_ for [Jobs](#job) returned by [NewPromiseResolveThenableJob](#sec-newpromiseresolvethenablejob) is usually the result of calling [GetFunctionRealm](#sec-getfunctionrealm) on the _then_ [function object](#function-object). The _realm_ for [Jobs](#job) returned by [NewPromiseReactionJob](#sec-newpromisereactionjob) is usually the result of calling [GetFunctionRealm](#sec-getfunctionrealm) on the handler if the handler is not undefined. If the handler is undefined, _realm_ is null. For both kinds of [Jobs](#job), when [GetFunctionRealm](#sec-getfunctionrealm) completes abnormally (i.e. called on a revoked Proxy), _realm_ is [the current Realm Record](#current-realm) at the time of the [GetFunctionRealm](#sec-getfunctionrealm) call. When the _realm_ is null, no user ECMAScript code will be evaluated and no new ECMAScript objects (e.g. Error objects) will be created. The WHATWG HTML specification ([https://html.spec.whatwg.org/](https://html.spec.whatwg.org/)), for example, uses _realm_ to check for the ability to run script and for the [entry](https://html.spec.whatwg.org/#entry) concept.


# 9.5.6 HostEnqueueTimeoutJob ( _timeoutJob_, _realm_, _milliseconds_ )

The [host-defined](#host-defined) abstract operation HostEnqueueTimeoutJob takes arguments _timeoutJob_ (a [Job](#job) [Abstract Closure](#sec-abstract-closure)), _realm_ (a [Realm Record](#realm-record)), and _milliseconds_ (a non-negative [finite](#finite) Number) and returns unused. It schedules _timeoutJob_ in the [realm](#realm) _realm_ in the [agent](#agent) signified by _realm_._\[\[AgentSignifier\]\]_ to be performed after at least _milliseconds_ milliseconds.

An implementation of HostEnqueueTimeoutJob must conform to the requirements in [9.5](#sec-jobs).


# 9.6 Agents

An agent comprises a set of ECMAScript [execution contexts](#sec-execution-contexts), an [execution context stack](#execution-context-stack), a [running execution context](#running-execution-context), an Agent Record, and an executing thread. Except for the [executing thread](#executing-thread), the constituents of an [agent](#agent) belong exclusively to that [agent](#agent).

An [agent](#agent)'s [executing thread](#executing-thread) executes algorithmic steps on the [agent](#agent)'s [execution contexts](#sec-execution-contexts) independently of other [agents](#agent), except that an [executing thread](#executing-thread) may be used as the [executing thread](#executing-thread) by multiple [agents](#agent), provided none of the [agents](#agent) sharing the thread have an [Agent Record](#agent-record) whose _\[\[CanBlock\]\]_ field is true.

Note 1

Some web browsers share a single [executing thread](#executing-thread) across multiple unrelated tabs of a browser window, for example.

While an [agent](#agent)'s [executing thread](#executing-thread) is executing algorithmic steps, the [agent](#agent) is the surrounding agent for those steps. The steps use the [surrounding agent](#surrounding-agent) to access the specification-level execution objects held within the [agent](#agent): the [running execution context](#running-execution-context), the [execution context stack](#execution-context-stack), and the [Agent Record](#agent-record)'s fields.

An agent signifier is a globally-unique opaque value used to identify an [Agent](#agent).

Table 27: [Agent Record](#agent-record) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[LittleEndian]]</var></td><td>a Boolean</td><td>The default value computed for the <em>isLittleEndian</em> parameter when it is needed by the algorithms <emu-xref aoid="GetValueFromBuffer" id="_ref_4168"><a href="#sec-getvaluefrombuffer">GetValueFromBuffer</a></emu-xref> and <emu-xref aoid="SetValueInBuffer" id="_ref_4169"><a href="#sec-setvalueinbuffer">SetValueInBuffer</a></emu-xref>. The choice is <emu-xref href="#implementation-defined" id="_ref_4170"><a href="#implementation-defined">implementation-defined</a></emu-xref> and should be the alternative that is most efficient for the implementation.</td></tr><tr><td><var class="field">[[CanBlock]]</var></td><td>a Boolean</td><td>Determines whether the <emu-xref href="#agent" id="_ref_4171"><a href="#agent">agent</a></emu-xref> can block or not.</td></tr><tr><td><var class="field">[[Signifier]]</var></td><td>an <emu-xref href="#sec-agents" id="_ref_4172"><a href="#sec-agents">agent signifier</a></emu-xref></td><td>Uniquely identifies the <emu-xref href="#agent" id="_ref_4173"><a href="#agent">agent</a></emu-xref> within its <emu-xref href="#sec-agent-clusters" id="_ref_4174"><a href="#sec-agent-clusters">agent cluster</a></emu-xref>.</td></tr><tr><td><var class="field">[[IsLockFree1]]</var></td><td>a Boolean</td><td><emu-val>true</emu-val> if atomic operations on one-<emu-not-ref>byte values</emu-not-ref> are lock-free, <emu-val>false</emu-val> otherwise.</td></tr><tr><td><var class="field">[[IsLockFree2]]</var></td><td>a Boolean</td><td><emu-val>true</emu-val> if atomic operations on two-<emu-not-ref>byte values</emu-not-ref> are lock-free, <emu-val>false</emu-val> otherwise.</td></tr><tr><td><var class="field">[[IsLockFree8]]</var></td><td>a Boolean</td><td><emu-val>true</emu-val> if atomic operations on eight-<emu-not-ref>byte values</emu-not-ref> are lock-free, <emu-val>false</emu-val> otherwise.</td></tr><tr><td><var class="field">[[CandidateExecution]]</var></td><td>a <emu-xref href="#sec-candidate-executions" id="_ref_4175"><a href="#sec-candidate-executions">candidate execution</a></emu-xref> <emu-xref href="#sec-list-and-record-specification-type" id="_ref_4176"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref></td><td>See the <emu-xref href="#sec-memory-model" id="_ref_4177"><a href="#sec-memory-model">memory model</a></emu-xref>.</td></tr><tr><td><var class="field">[[KeptAlive]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_4178"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of either Objects or Symbols</td><td>Initially a new empty <emu-xref href="#sec-list-and-record-specification-type" id="_ref_4179"><a href="#sec-list-and-record-specification-type">List</a></emu-xref>, representing the list of objects and/or symbols to be kept alive until the end of the current <emu-xref href="#job" id="_ref_4180"><a href="#job">Job</a></emu-xref></td></tr><tr><td><var class="field">[[ModuleAsyncEvaluationCount]]</var></td><td>an <emu-xref href="#integer" id="_ref_4181"><a href="#integer">integer</a></emu-xref></td><td>Initially 0, used to assign unique incrementing values to the <var class="field">[[AsyncEvaluationOrder]]</var> field of modules that are asynchronous or have asynchronous dependencies.</td></tr></tbody></table>

The values of _\[\[LittleEndian\]\]_, _\[\[Signifier\]\]_, _\[\[IsLockFree1\]\]_, _\[\[IsLockFree2\]\]_, and _\[\[IsLockFree8\]\]_ cannot change.

Note 2

The values of _\[\[IsLockFree1\]\]_, _\[\[IsLockFree2\]\]_, and _\[\[IsLockFree8\]\]_ are not necessarily determined by the hardware, but may also reflect implementation choices that can vary over time and between ECMAScript implementations.

There is no _\[\[IsLockFree4\]\]_ field: 4-byte atomic operations are always lock-free.

In practice, if an atomic operation is implemented with any type of lock the operation is not lock-free. Lock-free does not imply wait-free: there is no upper bound on how many machine steps may be required to complete a lock-free atomic operation.

That an atomic access of size *n* is lock-free does not imply anything about the (perceived) atomicity of non-atomic accesses of size *n*, specifically, non-atomic accesses may still be performed as a sequence of several separate memory accesses. See [ReadSharedMemory](#sec-memory-model-fundamentals) and [WriteSharedMemory](#sec-memory-model-fundamentals) for details.

Note 3

An [agent](#agent) is a specification mechanism and need not correspond to any particular artefact of an ECMAScript implementation.


# 9.6.1 AgentSignifier ( )

The abstract operation AgentSignifier takes no arguments and returns an [agent signifier](#sec-agents). It performs the following steps when called:

1.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
2.  Return _AR_._\[\[Signifier\]\]_.


# 9.6.2 AgentCanSuspend ( )

The abstract operation AgentCanSuspend takes no arguments and returns a Boolean. It performs the following steps when called:

1.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
2.  Return _AR_._\[\[CanBlock\]\]_.

Note

In some environments it may not be reasonable for a given [agent](#agent) to suspend. For example, in a web browser environment, it may be reasonable to disallow suspending a document's main event handling thread, while still allowing workers' event handling threads to suspend.


# 9.6.3 IncrementModuleAsyncEvaluationCount ( )

The abstract operation IncrementModuleAsyncEvaluationCount takes no arguments and returns an [integer](#integer). It performs the following steps when called:

1.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
2.  Let _count_ be _AR_._\[\[ModuleAsyncEvaluationCount\]\]_.
3.  Set _AR_._\[\[ModuleAsyncEvaluationCount\]\]_ to _count_ + 1.
4.  Return _count_.

Note

This value is only used to keep track of the relative evaluation order between pending modules. An implementation may unobservably reset _\[\[ModuleAsyncEvaluationCount\]\]_ to 0 whenever there are no pending modules.


# 9.7 Agent Clusters

An agent cluster is a maximal set of [agents](#agent) that can communicate by operating on shared memory.

Note 1

Programs within different [agents](#agent) may share memory by unspecified means. At a minimum, the backing memory for SharedArrayBuffers can be shared among the [agents](#agent) in the cluster.

There may be [agents](#agent) that can communicate by message passing that cannot share memory; they are never in the same agent cluster.

Every [agent](#agent) belongs to exactly one agent cluster.

Note 2

The [agents](#agent) in a cluster need not all be alive at some particular point in time. If [agent](#agent) **A** creates another [agent](#agent) **B**, after which **A** terminates and **B** creates [agent](#agent) **C**, the three [agents](#agent) are in the same cluster if **A** could share some memory with **B** and **B** could share some memory with **C**.

All [agents](#agent) within a cluster must have the same value for the _\[\[LittleEndian\]\]_ field in their respective [Agent Records](#agent-record).

Note 3

If different [agents](#agent) within an agent cluster have different values of _\[\[LittleEndian\]\]_ it becomes hard to use shared memory for multi-byte data.

All [agents](#agent) within a cluster must have the same values for the _\[\[IsLockFree1\]\]_ field in their respective [Agent Records](#agent-record); similarly for the _\[\[IsLockFree2\]\]_ and _\[\[IsLockFree8\]\]_ fields.

All [agents](#agent) within a cluster must have different values for the _\[\[Signifier\]\]_ field in their respective [Agent Records](#agent-record).

An embedding may deactivate (stop forward progress) or activate (resume forward progress) an [agent](#agent) without the [agent](#agent)'s knowledge or cooperation. If the embedding does so, it must not leave some [agents](#agent) in the cluster active while other [agents](#agent) in the cluster are deactivated indefinitely.

Note 4

The purpose of the preceding restriction is to avoid a situation where an [agent](#agent) deadlocks or starves because another [agent](#agent) has been deactivated. For example, if an HTML shared worker that has a lifetime independent of documents in any windows were allowed to share memory with the dedicated worker of such an independent document, and the document and its dedicated worker were to be deactivated while the dedicated worker holds a lock (say, the document is pushed into its window's history), and the shared worker then tries to acquire the lock, then the shared worker will be blocked until the dedicated worker is activated again, if ever. Meanwhile other workers trying to access the shared worker from other windows will starve.

The implication of the restriction is that it will not be possible to share memory between [agents](#agent) that don't belong to the same suspend/wake collective within the embedding.

An embedding may terminate an [agent](#agent) without any of the [agent](#agent)'s cluster's other [agents](#agent)' prior knowledge or cooperation. If an [agent](#agent) is terminated not by programmatic action of its own or of another [agent](#agent) in the cluster but by forces external to the cluster, then the embedding must choose one of two strategies: Either terminate all the [agents](#agent) in the cluster, or provide reliable APIs that allow the [agents](#agent) in the cluster to coordinate so that at least one remaining member of the cluster will be able to detect the termination, with the termination data containing enough information to identify the [agent](#agent) that was terminated.

Note 5

Examples of that type of termination are: operating systems or users terminating [agents](#agent) that are running in separate processes; the embedding itself terminating an [agent](#agent) that is running in-process with the other [agents](#agent) when per-[agent](#agent) resource accounting indicates that the [agent](#agent) is runaway.

Each of the following specification values, and values transitively reachable from them, belong to exactly one agent cluster.

-   [candidate execution](#sec-candidate-executions) [Record](#sec-list-and-record-specification-type)
-   [Shared Data Block](#sec-data-blocks)
-   [WaiterList Record](#sec-waiterlist-records)

Prior to any evaluation of any ECMAScript code by any [agent](#agent) in a cluster, the _\[\[CandidateExecution\]\]_ field of the [Agent Record](#agent-record) for all [agents](#agent) in the cluster is set to the initial [candidate execution](#sec-candidate-executions). The initial [candidate execution](#sec-candidate-executions) is an [empty candidate execution](#sec-candidate-executions) whose _\[\[EventsRecords\]\]_ field is a [List](#sec-list-and-record-specification-type) containing, for each [agent](#agent), an [Agent Events Record](#sec-agent-event-records) whose _\[\[AgentSignifier\]\]_ field is that [agent](#agent)'s [agent signifier](#sec-agents), and whose _\[\[EventList\]\]_ and _\[\[AgentSynchronizesWith\]\]_ fields are empty [Lists](#sec-list-and-record-specification-type).

Note 6

All [agents](#agent) in an agent cluster share the same [candidate execution](#sec-candidate-executions) in its [Agent Record](#agent-record)'s _\[\[CandidateExecution\]\]_ field. The [candidate execution](#sec-candidate-executions) is a specification mechanism used by the [memory model](#sec-memory-model).

Note 7

An agent cluster is a specification mechanism and need not correspond to any particular artefact of an ECMAScript implementation.


# 9.8 Forward Progress

For an [agent](#agent) to *make forward progress* is for it to perform an evaluation step according to this specification.

An [agent](#agent) becomes *blocked* when its [running execution context](#running-execution-context) waits synchronously and indefinitely for an external event. Only [agents](#agent) whose [Agent Record](#agent-record)'s _\[\[CanBlock\]\]_ field is true can become blocked in this sense. An *unblocked* [agent](#agent) is one that is not blocked.

Implementations must ensure that:

-   every unblocked [agent](#agent) with a dedicated [executing thread](#executing-thread) eventually makes forward progress
-   in a set of [agents](#agent) that share an [executing thread](#executing-thread), one [agent](#agent) eventually makes forward progress
-   an [agent](#agent) does not cause another [agent](#agent) to become blocked except via explicit APIs that provide blocking.

Note

This, along with the liveness guarantee in the [memory model](#sec-memory-model), ensures that all seq-cst writes eventually become observable to all [agents](#agent).


# 9.9 Processing Model of WeakRef and FinalizationRegistry Targets


# 9.9.1 Objectives

This specification does not make any guarantees that any object or symbol will be garbage collected. Objects or symbols which are not [live](#sec-liveness) may be released after long periods of time, or never at all. For this reason, this specification uses the term "may" when describing behaviour triggered by garbage collection.

The semantics of [WeakRefs](#sec-weak-ref-constructor) and [FinalizationRegistrys](#sec-finalization-registry-constructor) is based on two operations which happen at particular points in time:

-   When `WeakRef.prototype.deref` is called, the referent (if undefined is not returned) is kept alive so that subsequent, synchronous accesses also return the same value. This list is reset when synchronous work is done using the [ClearKeptObjects](#sec-clear-kept-objects) abstract operation.
-   When an object or symbol which is registered with a [FinalizationRegistry](#sec-finalization-registry-constructor) becomes unreachable, a call of the [FinalizationRegistry](#sec-finalization-registry-constructor)'s cleanup callback may eventually be made, after synchronous ECMAScript execution completes. The [FinalizationRegistry](#sec-finalization-registry-constructor) cleanup is performed with the [CleanupFinalizationRegistry](#sec-cleanup-finalization-registry) abstract operation.

Neither of these actions ([ClearKeptObjects](#sec-clear-kept-objects) or [CleanupFinalizationRegistry](#sec-cleanup-finalization-registry)) may interrupt synchronous ECMAScript execution. Because [hosts](#host) may assemble longer, synchronous ECMAScript execution runs, this specification defers the scheduling of [ClearKeptObjects](#sec-clear-kept-objects) and [CleanupFinalizationRegistry](#sec-cleanup-finalization-registry) to the [host environment](#host-environment).

Some ECMAScript implementations include garbage collector implementations which run in the background, including when ECMAScript is idle. Letting the [host environment](#host-environment) schedule [CleanupFinalizationRegistry](#sec-cleanup-finalization-registry) allows it to resume ECMAScript execution in order to run finalizer work, which may free up held values, reducing overall memory usage.


# 9.9.2 Liveness

For some set of objects and/or symbols _S_ a hypothetical WeakRef-oblivious execution with respect to _S_ is an execution whereby the abstract operation [WeakRefDeref](#sec-weakrefderef) of a [WeakRef](#sec-weak-ref-constructor) whose referent is an element of _S_ always returns undefined.

Note 1

[WeakRef](#sec-weak-ref-constructor)\-obliviousness, together with liveness, capture two notions. One, that a [WeakRef](#sec-weak-ref-constructor) itself does not keep its referent alive. Two, that cycles in liveness does not imply that a value is live. To be concrete, if determining _v_'s liveness depends on determining the liveness of a [WeakRef](#sec-weak-ref-constructor) referent, _r_, _r_'s liveness cannot assume _v_'s liveness, which would be circular reasoning.

Note 2

[WeakRef](#sec-weak-ref-constructor)\-obliviousness is defined on sets of objects or symbols instead of individual values to account for cycles. If it were defined on individual values, then a [WeakRef](#sec-weak-ref-constructor) referent in a cycle will be considered live even though its identity is only observed via other [WeakRef](#sec-weak-ref-constructor) referents in the cycle.

Note 3

Colloquially, we say that an individual object or symbol is live if every set containing it is live.

At any point during evaluation, a set of objects and/or symbols _S_ is considered live if either of the following conditions is met:

-   Any element in _S_ is included in any [agent](#agent)'s _\[\[KeptAlive\]\]_ [List](#sec-list-and-record-specification-type).
-   There exists a valid future hypothetical WeakRef-oblivious execution with respect to _S_ that observes the identity of any value in _S_.

Note 4

The second condition above intends to capture the intuition that a value is live if its identity is observable via non-[WeakRef](#sec-weak-ref-constructor) means. A value's identity may be observed by observing a strict equality comparison or observing the value being used as key in a Map.

Note 5

Presence of an object or a symbol in a field, an internal slot, or a property does not imply that the value is live. For example if the value in question is never passed back to the program, then it cannot be observed.

This is the case for keys in a WeakMap, members of a WeakSet, as well as the _\[\[WeakRefTarget\]\]_ and _\[\[UnregisterToken\]\]_ fields of a [FinalizationRegistry](#sec-finalization-registry-constructor) Cell record.

The above definition implies that, if a key in a WeakMap is not live, then its corresponding value is not necessarily live either.

Note 6

Liveness is the lower bound for guaranteeing which [WeakRefs](#sec-weak-ref-constructor) engines must not empty. Liveness as defined here is undecidable. In practice, engines use conservative approximations such as reachability. There is expected to be significant implementation leeway.


# 9.9.3 Execution

At any time, if a set of objects and/or symbols _S_ is not [live](#sec-liveness), an ECMAScript implementation may perform the following steps atomically:

1.  For each element _value_ of _S_, do
    1.  For each [WeakRef](#sec-weak-ref-constructor) _ref_ such that _ref_._\[\[WeakRefTarget\]\]_ is _value_, do
        1.  Set _ref_._\[\[WeakRefTarget\]\]_ to empty.
    2.  For each [FinalizationRegistry](#sec-finalization-registry-constructor) _fg_ such that _fg_._\[\[Cells\]\]_ contains a [Record](#sec-list-and-record-specification-type) _cell_ such that _cell_._\[\[WeakRefTarget\]\]_ is _value_, do
        1.  Set _cell_._\[\[WeakRefTarget\]\]_ to empty.
        2.  Optionally, perform [HostEnqueueFinalizationRegistryCleanupJob](#sec-host-cleanup-finalization-registry)(_fg_).
    3.  For each WeakMap _map_ such that _map_._\[\[WeakMapData\]\]_ contains a [Record](#sec-list-and-record-specification-type) _r_ such that _r_._\[\[Key\]\]_ is _value_, do
        1.  Set _r_._\[\[Key\]\]_ to empty.
        2.  Set _r_._\[\[Value\]\]_ to empty.
    4.  For each WeakSet _set_ such that _set_._\[\[WeakSetData\]\]_ contains _value_, do
        1.  Replace the element of _set_._\[\[WeakSetData\]\]_ whose value is _value_ with an element whose value is empty.

Note 1

Together with the definition of liveness, this clause prescribes optimizations that an implementation may apply regarding [WeakRefs](#sec-weak-ref-constructor).

It is possible to access an object without observing its identity. Optimizations such as dead variable elimination and scalar replacement on properties of non-escaping objects whose identity is not observed are allowed. These optimizations are thus allowed to observably empty [WeakRefs](#sec-weak-ref-constructor) that point to such objects.

On the other hand, if an object's identity is observable, and that object is in the _\[\[WeakRefTarget\]\]_ internal slot of a [WeakRef](#sec-weak-ref-constructor), optimizations such as rematerialization that observably empty the [WeakRef](#sec-weak-ref-constructor) are prohibited.

Because calling [HostEnqueueFinalizationRegistryCleanupJob](#sec-host-cleanup-finalization-registry) is optional, registered objects in a [FinalizationRegistry](#sec-finalization-registry-constructor) do not necessarily hold that [FinalizationRegistry](#sec-finalization-registry-constructor) [live](#sec-liveness). Implementations may omit [FinalizationRegistry](#sec-finalization-registry-constructor) callbacks for any reason, e.g., if the [FinalizationRegistry](#sec-finalization-registry-constructor) itself becomes dead, or if the application is shutting down.

Note 2

Implementations are not obligated to empty [WeakRefs](#sec-weak-ref-constructor) for maximal sets of non-[live](#sec-liveness) objects or symbols.

If an implementation chooses a non-[live](#sec-liveness) set _S_ in which to empty [WeakRefs](#sec-weak-ref-constructor), this definition requires that it empties [WeakRefs](#sec-weak-ref-constructor) for all values in _S_ simultaneously. In other words, it is not conformant for an implementation to empty a [WeakRef](#sec-weak-ref-constructor) pointing to a value _v_ without emptying out other [WeakRefs](#sec-weak-ref-constructor) that, if not emptied, could result in an execution that observes the value of _v_.


# 9.9.4 Host Hooks


# 9.9.4.1 HostEnqueueFinalizationRegistryCleanupJob ( _finalizationRegistry_ )

The [host-defined](#host-defined) abstract operation HostEnqueueFinalizationRegistryCleanupJob takes argument _finalizationRegistry_ (a [FinalizationRegistry](#sec-finalization-registry-constructor)) and returns unused.

Let _cleanupJob_ be a new [Job](#job) [Abstract Closure](#sec-abstract-closure) with no parameters that captures _finalizationRegistry_ and performs the following steps when called:

1.  Let _cleanupResult_ be [Completion](#sec-completion-ao)([CleanupFinalizationRegistry](#sec-cleanup-finalization-registry)(_finalizationRegistry_)).
2.  If _cleanupResult_ is an [abrupt completion](#sec-completion-record-specification-type), perform any [host-defined](#host-defined) steps for reporting the error.
3.  Return unused.

An implementation of HostEnqueueFinalizationRegistryCleanupJob schedules _cleanupJob_ to be performed at some future time, if possible. It must also conform to the requirements in [9.5](#sec-jobs).


# 9.10 ClearKeptObjects ( )

The abstract operation ClearKeptObjects takes no arguments and returns unused. ECMAScript implementations are expected to call ClearKeptObjects when a synchronous sequence of ECMAScript executions completes. It performs the following steps when called:

1.  Let _agentRecord_ be the [surrounding agent](#surrounding-agent)'s [Agent Record](#agent-record).
2.  Set _agentRecord_._\[\[KeptAlive\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
3.  Return unused.


# 9.11 AddToKeptObjects ( _value_ )

The abstract operation AddToKeptObjects takes argument _value_ (an Object or a Symbol) and returns unused. It performs the following steps when called:

1.  Let _agentRecord_ be the [surrounding agent](#surrounding-agent)'s [Agent Record](#agent-record).
2.  Append _value_ to _agentRecord_._\[\[KeptAlive\]\]_.
3.  Return unused.

Note

When the abstract operation AddToKeptObjects is called with a target object or symbol, it adds the target to a list that will point strongly at the target until [ClearKeptObjects](#sec-clear-kept-objects) is called.


# 9.12 CleanupFinalizationRegistry ( _finalizationRegistry_ )

The abstract operation CleanupFinalizationRegistry takes argument _finalizationRegistry_ (a [FinalizationRegistry](#sec-finalization-registry-constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): _finalizationRegistry_ has _\[\[Cells\]\]_ and _\[\[CleanupCallback\]\]_ internal slots.
2.  Let _callback_ be _finalizationRegistry_._\[\[CleanupCallback\]\]_.
3.  While _finalizationRegistry_._\[\[Cells\]\]_ contains a [Record](#sec-list-and-record-specification-type) _cell_ such that _cell_._\[\[WeakRefTarget\]\]_ is empty, an implementation may perform the following steps:
    1.  Choose any such _cell_.
    2.  Remove _cell_ from _finalizationRegistry_._\[\[Cells\]\]_.
    3.  Perform ? [HostCallJobCallback](#sec-hostcalljobcallback)(_callback_, undefined, « _cell_._\[\[HeldValue\]\]_ »).
4.  Return unused.


# 9.13 CanBeHeldWeakly ( _v_ )

The abstract operation CanBeHeldWeakly takes argument _v_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It returns true if and only if _v_ is suitable for use as a weak reference. Only values that are suitable for use as a weak reference may be a key of a WeakMap, an element of a WeakSet, the target of a [WeakRef](#sec-weak-ref-constructor), or one of the targets of a [FinalizationRegistry](#sec-finalization-registry-constructor). It performs the following steps when called:

1.  If _v_ [is an Object](#sec-object-type), return true.
2.  If _v_ [is a Symbol](#sec-ecmascript-language-types-symbol-type) and [KeyForSymbol](#sec-keyforsymbol)(_v_) is undefined, return true.
3.  Return false.

Note

A language value without [language identity](#sec-identity) can be manifested without prior reference and is unsuitable for use as a weak reference. A Symbol value produced by [Symbol.for](#sec-symbol.for), unlike other Symbol values, does not have language identity and is unsuitable for use as a weak reference. [Well-known symbols](#sec-well-known-symbols) are likely to never be collected, but are nonetheless treated as suitable for use as a weak reference because they are limited in number and therefore manageable by a variety of implementation approaches. However, any value associated to a well-known symbol in a [live](#sec-liveness) WeakMap is unlikely to be collected and could “leak” memory resources in implementations.


# 10 Ordinary and Exotic Objects Behaviours


# 10.1 Ordinary Object Internal Methods and Internal Slots

All [ordinary objects](#ordinary-object) have an internal slot called _\[\[Prototype\]\]_. The value of this internal slot is either null or an object and is used for implementing inheritance. Assume a property named _P_ is missing from an [ordinary object](#ordinary-object) _O_ but exists on its _\[\[Prototype\]\]_ object. If _P_ refers to a [data property](#sec-object-type) on the _\[\[Prototype\]\]_ object, _O_ inherits it for get access, making it behave as if _P_ was a property of _O_. If _P_ refers to a writable [data property](#sec-object-type) on the _\[\[Prototype\]\]_ object, set access of _P_ on _O_ creates a new [data property](#sec-object-type) named _P_ on _O_. If _P_ refers to a non-writable [data property](#sec-object-type) on the _\[\[Prototype\]\]_ object, set access of _P_ on _O_ fails. If _P_ refers to an [accessor property](#sec-object-type) on the _\[\[Prototype\]\]_ object, the accessor is inherited by _O_ for both get access and set access.

Every [ordinary object](#ordinary-object) has a Boolean-valued _\[\[Extensible\]\]_ internal slot which is used to fulfill the extensibility-related internal method invariants specified in [6.1.7.3](#sec-invariants-of-the-essential-internal-methods). Namely, once the value of an object's _\[\[Extensible\]\]_ internal slot has been set to false, it is no longer possible to add properties to the object, to modify the value of the object's _\[\[Prototype\]\]_ internal slot, or to subsequently change the value of _\[\[Extensible\]\]_ to true.

In the following algorithm descriptions, assume _O_ is an [ordinary object](#ordinary-object), _P_ is a [property key](#property-key) value, _V_ is any [ECMAScript language value](#sec-ecmascript-language-types), and _Desc_ is a [Property Descriptor](#sec-property-descriptor-specification-type) record.

Each [ordinary object](#ordinary-object) internal method delegates to a similarly-named abstract operation. If such an abstract operation depends on another internal method, then the internal method is invoked on _O_ rather than calling the similarly-named abstract operation directly. These semantics ensure that [exotic objects](#exotic-object) have their overridden internal methods invoked when [ordinary object](#ordinary-object) internal methods are applied to them.


# 10.1.1 _\[\[GetPrototypeOf\]\]_ ( )

The _\[\[GetPrototypeOf\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) either an Object or null. It performs the following steps when called:

1.  Return [OrdinaryGetPrototypeOf](#sec-ordinarygetprototypeof)(_O_).


# 10.1.1.1 OrdinaryGetPrototypeOf ( _O_ )

The abstract operation OrdinaryGetPrototypeOf takes argument _O_ (an Object) and returns an Object or null. It performs the following steps when called:

1.  Return _O_._\[\[Prototype\]\]_.


# 10.1.2 _\[\[SetPrototypeOf\]\]_ ( _V_ )

The _\[\[SetPrototypeOf\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes argument _V_ (an Object or null) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  Return [OrdinarySetPrototypeOf](#sec-ordinarysetprototypeof)(_O_, _V_).


# 10.1.2.1 OrdinarySetPrototypeOf ( _O_, _V_ )

The abstract operation OrdinarySetPrototypeOf takes arguments _O_ (an Object) and _V_ (an Object or null) and returns a Boolean. It performs the following steps when called:

1.  Let _current_ be _O_._\[\[Prototype\]\]_.
2.  If [SameValue](#sec-samevalue)(_V_, _current_) is true, return true.
3.  Let _extensible_ be _O_._\[\[Extensible\]\]_.
4.  If _extensible_ is false, return false.
5.  Let _p_ be _V_.
6.  Let _done_ be false.
7.  Repeat, while _done_ is false,
    1.  If _p_ is null, then
        1.  Set _done_ to true.
    2.  Else if [SameValue](#sec-samevalue)(_p_, _O_) is true, then
        1.  Return false.
    3.  Else,
        1.  If _p_._\[\[GetPrototypeOf\]\]_ is not the [ordinary object](#ordinary-object) internal method defined in [10.1.1](#sec-ordinary-object-internal-methods-and-internal-slots-getprototypeof), set _done_ to true.
        2.  Else, set _p_ to _p_._\[\[Prototype\]\]_.
8.  Set _O_._\[\[Prototype\]\]_ to _V_.
9.  Return true.

Note

The loop in step [7](#step-ordinarysetprototypeof-loop) guarantees that there will be no cycles in any prototype chain that only includes objects that use the [ordinary object](#ordinary-object) definitions for _\[\[GetPrototypeOf\]\]_ and _\[\[SetPrototypeOf\]\]_.


# 10.1.3 _\[\[IsExtensible\]\]_ ( )

The _\[\[IsExtensible\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  Return [OrdinaryIsExtensible](#sec-ordinaryisextensible)(_O_).


# 10.1.3.1 OrdinaryIsExtensible ( _O_ )

The abstract operation OrdinaryIsExtensible takes argument _O_ (an Object) and returns a Boolean. It performs the following steps when called:

1.  Return _O_._\[\[Extensible\]\]_.


# 10.1.4 _\[\[PreventExtensions\]\]_ ( )

The _\[\[PreventExtensions\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) true. It performs the following steps when called:

1.  Return [OrdinaryPreventExtensions](#sec-ordinarypreventextensions)(_O_).


# 10.1.4.1 OrdinaryPreventExtensions ( _O_ )

The abstract operation OrdinaryPreventExtensions takes argument _O_ (an Object) and returns true. It performs the following steps when called:

1.  Set _O_._\[\[Extensible\]\]_ to false.
2.  Return true.


# 10.1.5 _\[\[GetOwnProperty\]\]_ ( _P_ )

The _\[\[GetOwnProperty\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns a [normal completion containing](#sec-completion-record-specification-type) either a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined. It performs the following steps when called:

1.  Return [OrdinaryGetOwnProperty](#sec-ordinarygetownproperty)(_O_, _P_).


# 10.1.5.1 OrdinaryGetOwnProperty ( _O_, _P_ )

The abstract operation OrdinaryGetOwnProperty takes arguments _O_ (an Object) and _P_ (a [property key](#property-key)) and returns a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined. It performs the following steps when called:

1.  If _O_ does not have an own property with key _P_, return undefined.
2.  Let _D_ be a newly created [Property Descriptor](#sec-property-descriptor-specification-type) with no fields.
3.  Let _X_ be _O_'s own property whose key is _P_.
4.  If _X_ is a [data property](#sec-object-type), then
    1.  Set _D_._\[\[Value\]\]_ to the value of _X_'s _\[\[Value\]\]_ attribute.
    2.  Set _D_._\[\[Writable\]\]_ to the value of _X_'s _\[\[Writable\]\]_ attribute.
5.  Else,
    1.  [Assert](#assert): _X_ is an [accessor property](#sec-object-type).
    2.  Set _D_._\[\[Get\]\]_ to the value of _X_'s _\[\[Get\]\]_ attribute.
    3.  Set _D_._\[\[Set\]\]_ to the value of _X_'s _\[\[Set\]\]_ attribute.
6.  Set _D_._\[\[Enumerable\]\]_ to the value of _X_'s _\[\[Enumerable\]\]_ attribute.
7.  Set _D_._\[\[Configurable\]\]_ to the value of _X_'s _\[\[Configurable\]\]_ attribute.
8.  Return _D_.


# 10.1.6 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

The _\[\[DefineOwnProperty\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes arguments _P_ (a [property key](#property-key)) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_O_, _P_, _Desc_).


# 10.1.6.1 OrdinaryDefineOwnProperty ( _O_, _P_, _Desc_ )

The abstract operation OrdinaryDefineOwnProperty takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _current_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
2.  Let _extensible_ be ? [IsExtensible](#sec-isextensible-o)(_O_).
3.  Return [ValidateAndApplyPropertyDescriptor](#sec-validateandapplypropertydescriptor)(_O_, _P_, _extensible_, _Desc_, _current_).


# 10.1.6.2 IsCompatiblePropertyDescriptor ( _Extensible_, _Desc_, _Current_ )

The abstract operation IsCompatiblePropertyDescriptor takes arguments _Extensible_ (a Boolean), _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)), and _Current_ (a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined) and returns a Boolean. It performs the following steps when called:

1.  Return [ValidateAndApplyPropertyDescriptor](#sec-validateandapplypropertydescriptor)(undefined, "", _Extensible_, _Desc_, _Current_).


# 10.1.6.3 ValidateAndApplyPropertyDescriptor ( _O_, _P_, _extensible_, _Desc_, _current_ )

The abstract operation ValidateAndApplyPropertyDescriptor takes arguments _O_ (an Object or undefined), _P_ (a [property key](#property-key)), _extensible_ (a Boolean), _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)), and _current_ (a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined) and returns a Boolean. It returns true if and only if _Desc_ can be applied as the property of an object with specified _extensibility_ and current property _current_ while upholding [invariants](#sec-invariants-of-the-essential-internal-methods). When such application is possible and _O_ is not undefined, it is performed for the property named _P_ (which is created if necessary). It performs the following steps when called:

1.  [Assert](#assert): _P_ is a [property key](#property-key).
2.  If _current_ is undefined, then
    1.  If _extensible_ is false, return false.
    2.  If _O_ is undefined, return true.
    3.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_Desc_) is true, then
        1.  Create an own [accessor property](#sec-object-type) named _P_ of object _O_ whose _\[\[Get\]\]_, _\[\[Set\]\]_, _\[\[Enumerable\]\]_, and _\[\[Configurable\]\]_ attributes are set to the value of the corresponding field in _Desc_ if _Desc_ has that field, or to the attribute's [default value](#table-object-property-attributes) otherwise.
    4.  Else,
        1.  Create an own [data property](#sec-object-type) named _P_ of object _O_ whose _\[\[Value\]\]_, _\[\[Writable\]\]_, _\[\[Enumerable\]\]_, and _\[\[Configurable\]\]_ attributes are set to the value of the corresponding field in _Desc_ if _Desc_ has that field, or to the attribute's [default value](#table-object-property-attributes) otherwise.
    5.  Return true.
3.  [Assert](#assert): _current_ is a [fully populated Property Descriptor](#sec-property-descriptor-specification-type).
4.  If _Desc_ does not have any fields, return true.
5.  If _current_._\[\[Configurable\]\]_ is false, then
    1.  If _Desc_ has a _\[\[Configurable\]\]_ field and _Desc_._\[\[Configurable\]\]_ is true, return false.
    2.  If _Desc_ has an _\[\[Enumerable\]\]_ field and _Desc_._\[\[Enumerable\]\]_ is not _current_._\[\[Enumerable\]\]_, return false.
    3.  If [IsGenericDescriptor](#sec-isgenericdescriptor)(_Desc_) is false and [IsAccessorDescriptor](#sec-isaccessordescriptor)(_Desc_) is not [IsAccessorDescriptor](#sec-isaccessordescriptor)(_current_), return false.
    4.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_current_) is true, then
        1.  If _Desc_ has a _\[\[Get\]\]_ field and [SameValue](#sec-samevalue)(_Desc_._\[\[Get\]\]_, _current_._\[\[Get\]\]_) is false, return false.
        2.  If _Desc_ has a _\[\[Set\]\]_ field and [SameValue](#sec-samevalue)(_Desc_._\[\[Set\]\]_, _current_._\[\[Set\]\]_) is false, return false.
    5.  Else if _current_._\[\[Writable\]\]_ is false, then
        1.  If _Desc_ has a _\[\[Writable\]\]_ field and _Desc_._\[\[Writable\]\]_ is true, return false.
        2.  NOTE: [SameValue](#sec-samevalue) returns true for NaN values which may be distinguishable by other means. Returning here ensures that any existing property of _O_ remains unmodified.
        3.  If _Desc_ has a _\[\[Value\]\]_ field, return [SameValue](#sec-samevalue)(_Desc_._\[\[Value\]\]_, _current_._\[\[Value\]\]_).
6.  If _O_ is not undefined, then
    1.  If [IsDataDescriptor](#sec-isdatadescriptor)(_current_) is true and [IsAccessorDescriptor](#sec-isaccessordescriptor)(_Desc_) is true, then
        1.  If _Desc_ has a _\[\[Configurable\]\]_ field, let _configurable_ be _Desc_._\[\[Configurable\]\]_; else let _configurable_ be _current_._\[\[Configurable\]\]_.
        2.  If _Desc_ has an _\[\[Enumerable\]\]_ field, let _enumerable_ be _Desc_._\[\[Enumerable\]\]_; else let _enumerable_ be _current_._\[\[Enumerable\]\]_.
        3.  Replace the property named _P_ of object _O_ with an [accessor property](#sec-object-type) whose _\[\[Configurable\]\]_ and _\[\[Enumerable\]\]_ attributes are set to _configurable_ and _enumerable_, respectively, and whose _\[\[Get\]\]_ and _\[\[Set\]\]_ attributes are set to the value of the corresponding field in _Desc_ if _Desc_ has that field, or to the attribute's [default value](#table-object-property-attributes) otherwise.
    2.  Else if [IsAccessorDescriptor](#sec-isaccessordescriptor)(_current_) is true and [IsDataDescriptor](#sec-isdatadescriptor)(_Desc_) is true, then
        1.  If _Desc_ has a _\[\[Configurable\]\]_ field, let _configurable_ be _Desc_._\[\[Configurable\]\]_; else let _configurable_ be _current_._\[\[Configurable\]\]_.
        2.  If _Desc_ has an _\[\[Enumerable\]\]_ field, let _enumerable_ be _Desc_._\[\[Enumerable\]\]_; else let _enumerable_ be _current_._\[\[Enumerable\]\]_.
        3.  Replace the property named _P_ of object _O_ with a [data property](#sec-object-type) whose _\[\[Configurable\]\]_ and _\[\[Enumerable\]\]_ attributes are set to _configurable_ and _enumerable_, respectively, and whose _\[\[Value\]\]_ and _\[\[Writable\]\]_ attributes are set to the value of the corresponding field in _Desc_ if _Desc_ has that field, or to the attribute's [default value](#table-object-property-attributes) otherwise.
    3.  Else,
        1.  For each field of _Desc_, set the corresponding attribute of the property named _P_ of object _O_ to the value of the field.
7.  Return true.


# 10.1.7 _\[\[HasProperty\]\]_ ( _P_ )

The _\[\[HasProperty\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [OrdinaryHasProperty](#sec-ordinaryhasproperty)(_O_, _P_).


# 10.1.7.1 OrdinaryHasProperty ( _O_, _P_ )

The abstract operation OrdinaryHasProperty takes arguments _O_ (an Object) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _hasOwn_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
2.  If _hasOwn_ is not undefined, return true.
3.  Let _parent_ be ? _O_._\[\[GetPrototypeOf\]\]_().
4.  If _parent_ is not null, then
    1.  Return ? _parent_._\[\[HasProperty\]\]_(_P_).
5.  Return false.


# 10.1.8 _\[\[Get\]\]_ ( _P_, _Receiver_ )

The _\[\[Get\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes arguments _P_ (a [property key](#property-key)) and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [OrdinaryGet](#sec-ordinaryget)(_O_, _P_, _Receiver_).


# 10.1.8.1 OrdinaryGet ( _O_, _P_, _Receiver_ )

The abstract operation OrdinaryGet takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _desc_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
2.  If _desc_ is undefined, then
    1.  Let _parent_ be ? _O_._\[\[GetPrototypeOf\]\]_().
    2.  If _parent_ is null, return undefined.
    3.  Return ? _parent_._\[\[Get\]\]_(_P_, _Receiver_).
3.  If [IsDataDescriptor](#sec-isdatadescriptor)(_desc_) is true, return _desc_._\[\[Value\]\]_.
4.  [Assert](#assert): [IsAccessorDescriptor](#sec-isaccessordescriptor)(_desc_) is true.
5.  Let _getter_ be _desc_._\[\[Get\]\]_.
6.  If _getter_ is undefined, return undefined.
7.  Return ? [Call](#sec-call)(_getter_, _Receiver_).


# 10.1.9 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )

The _\[\[Set\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes arguments _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [OrdinarySet](#sec-ordinaryset)(_O_, _P_, _V_, _Receiver_).


# 10.1.9.1 OrdinarySet ( _O_, _P_, _V_, _Receiver_ )

The abstract operation OrdinarySet takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _ownDesc_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
2.  Return ? [OrdinarySetWithOwnDescriptor](#sec-ordinarysetwithowndescriptor)(_O_, _P_, _V_, _Receiver_, _ownDesc_).


# 10.1.9.2 OrdinarySetWithOwnDescriptor ( _O_, _P_, _V_, _Receiver_, _ownDesc_ )

The abstract operation OrdinarySetWithOwnDescriptor takes arguments _O_ (an Object), _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _ownDesc_ (a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _ownDesc_ is undefined, then
    1.  Let _parent_ be ? _O_._\[\[GetPrototypeOf\]\]_().
    2.  If _parent_ is not null, then
        1.  Return ? _parent_._\[\[Set\]\]_(_P_, _V_, _Receiver_).
    3.  Else,
        1.  Set _ownDesc_ to the PropertyDescriptor { _\[\[Value\]\]_: undefined, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: true }.
2.  If [IsDataDescriptor](#sec-isdatadescriptor)(_ownDesc_) is true, then
    1.  If _ownDesc_._\[\[Writable\]\]_ is false, return false.
    2.  If _Receiver_ [is not an Object](#sec-object-type), return false.
    3.  Let _existingDescriptor_ be ? _Receiver_._\[\[GetOwnProperty\]\]_(_P_).
    4.  If _existingDescriptor_ is not undefined, then
        1.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_existingDescriptor_) is true, return false.
        2.  If _existingDescriptor_._\[\[Writable\]\]_ is false, return false.
        3.  Let _valueDesc_ be the PropertyDescriptor { _\[\[Value\]\]_: _V_ }.
        4.  Return ? _Receiver_._\[\[DefineOwnProperty\]\]_(_P_, _valueDesc_).
    5.  Else,
        1.  [Assert](#assert): _Receiver_ does not currently have a property _P_.
        2.  Return ? [CreateDataProperty](#sec-createdataproperty)(_Receiver_, _P_, _V_).
3.  [Assert](#assert): [IsAccessorDescriptor](#sec-isaccessordescriptor)(_ownDesc_) is true.
4.  Let _setter_ be _ownDesc_._\[\[Set\]\]_.
5.  If _setter_ is undefined, return false.
6.  Perform ? [Call](#sec-call)(_setter_, _Receiver_, « _V_ »).
7.  Return true.


# 10.1.10 _\[\[Delete\]\]_ ( _P_ )

The _\[\[Delete\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [OrdinaryDelete](#sec-ordinarydelete)(_O_, _P_).


# 10.1.10.1 OrdinaryDelete ( _O_, _P_ )

The abstract operation OrdinaryDelete takes arguments _O_ (an Object) and _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _desc_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
2.  If _desc_ is undefined, return true.
3.  If _desc_._\[\[Configurable\]\]_ is true, then
    1.  Remove the own property with name _P_ from _O_.
    2.  Return true.
4.  Return false.


# 10.1.11 _\[\[OwnPropertyKeys\]\]_ ( )

The _\[\[OwnPropertyKeys\]\]_ internal method of an [ordinary object](#ordinary-object) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key). It performs the following steps when called:

1.  Return [OrdinaryOwnPropertyKeys](#sec-ordinaryownpropertykeys)(_O_).


# 10.1.11.1 OrdinaryOwnPropertyKeys ( _O_ )

The abstract operation OrdinaryOwnPropertyKeys takes argument _O_ (an Object) and returns a [List](#sec-list-and-record-specification-type) of [property keys](#property-key). It performs the following steps when called:

1.  Let _keys_ be a new empty [List](#sec-list-and-record-specification-type).
2.  For each own [property key](#property-key) _P_ of _O_ such that _P_ is an [array index](#array-index), in ascending numeric index order, do
    1.  Append _P_ to _keys_.
3.  For each own [property key](#property-key) _P_ of _O_ such that _P_ [is a String](#sec-ecmascript-language-types-string-type) and _P_ is not an [array index](#array-index), in ascending chronological order of property creation, do
    1.  Append _P_ to _keys_.
4.  For each own [property key](#property-key) _P_ of _O_ such that _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), in ascending chronological order of property creation, do
    1.  Append _P_ to _keys_.
5.  Return _keys_.


# 10.1.12 OrdinaryObjectCreate ( _proto_ \[, _additionalInternalSlotsList_ \] )

The abstract operation OrdinaryObjectCreate takes argument _proto_ (an Object or null) and optional argument _additionalInternalSlotsList_ (a [List](#sec-list-and-record-specification-type) of names of internal slots) and returns an Object. It is used to specify the runtime creation of new [ordinary objects](#ordinary-object). _additionalInternalSlotsList_ contains the names of additional internal slots that must be defined as part of the object, beyond _\[\[Prototype\]\]_ and _\[\[Extensible\]\]_. If _additionalInternalSlotsList_ is not provided, a new empty [List](#sec-list-and-record-specification-type) is used. It performs the following steps when called:

1.  Let _internalSlotsList_ be « _\[\[Prototype\]\]_, _\[\[Extensible\]\]_ ».
2.  If _additionalInternalSlotsList_ is present, set _internalSlotsList_ to the [list-concatenation](#list-concatenation) of _internalSlotsList_ and _additionalInternalSlotsList_.
3.  Let _O_ be [MakeBasicObject](#sec-makebasicobject)(_internalSlotsList_).
4.  Set _O_._\[\[Prototype\]\]_ to _proto_.
5.  Return _O_.

Note

Although OrdinaryObjectCreate does little more than call [MakeBasicObject](#sec-makebasicobject), its use communicates the intention to create an [ordinary object](#ordinary-object), and not an exotic one. Thus, within this specification, it is not called by any algorithm that subsequently modifies the internal methods of the object in ways that would make the result non-ordinary. Operations that create [exotic objects](#exotic-object) invoke [MakeBasicObject](#sec-makebasicobject) directly.


# 10.1.13 OrdinaryCreateFromConstructor ( _constructor_, _intrinsicDefaultProto_ \[, _internalSlotsList_ \] )

The abstract operation OrdinaryCreateFromConstructor takes arguments _constructor_ (a [function object](#function-object)) and _intrinsicDefaultProto_ (a String) and optional argument _internalSlotsList_ (a [List](#sec-list-and-record-specification-type) of names of internal slots) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It creates an [ordinary object](#ordinary-object) whose _\[\[Prototype\]\]_ value is retrieved from a [constructor](#constructor)'s "prototype" property, if it exists. Otherwise the intrinsic named by _intrinsicDefaultProto_ is used for _\[\[Prototype\]\]_. _internalSlotsList_ contains the names of additional internal slots that must be defined as part of the object. If _internalSlotsList_ is not provided, a new empty [List](#sec-list-and-record-specification-type) is used. It performs the following steps when called:

1.  [Assert](#assert): _intrinsicDefaultProto_ is this specification's name of an intrinsic object. The corresponding object must be an intrinsic that is intended to be used as the _\[\[Prototype\]\]_ value of an object.
2.  Let _proto_ be ? [GetPrototypeFromConstructor](#sec-getprototypefromconstructor)(_constructor_, _intrinsicDefaultProto_).
3.  If _internalSlotsList_ is present, let _slotsList_ be _internalSlotsList_.
4.  Else, let _slotsList_ be a new empty [List](#sec-list-and-record-specification-type).
5.  Return [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(_proto_, _slotsList_).


# 10.1.14 GetPrototypeFromConstructor ( _constructor_, _intrinsicDefaultProto_ )

The abstract operation GetPrototypeFromConstructor takes arguments _constructor_ (a [function object](#function-object)) and _intrinsicDefaultProto_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It determines the _\[\[Prototype\]\]_ value that should be used to create an object corresponding to a specific [constructor](#constructor). The value is retrieved from the [constructor](#constructor)'s "prototype" property, if it exists. Otherwise the intrinsic named by _intrinsicDefaultProto_ is used for _\[\[Prototype\]\]_. It performs the following steps when called:

1.  [Assert](#assert): _intrinsicDefaultProto_ is this specification's name of an intrinsic object. The corresponding object must be an intrinsic that is intended to be used as the _\[\[Prototype\]\]_ value of an object.
2.  Let _proto_ be ? [Get](#sec-get-o-p)(_constructor_, "prototype").
3.  If _proto_ [is not an Object](#sec-object-type), then
    1.  Let _realm_ be ? [GetFunctionRealm](#sec-getfunctionrealm)(_constructor_).
    2.  Set _proto_ to _realm_'s intrinsic object named _intrinsicDefaultProto_.
4.  Return _proto_.

Note

If _constructor_ does not supply a _\[\[Prototype\]\]_ value, the default value that is used is obtained from the [realm](#realm) of the _constructor_ function rather than from the [running execution context](#running-execution-context).


# 10.1.15 RequireInternalSlot ( _O_, _internalSlot_ )

The abstract operation RequireInternalSlot takes arguments _O_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _internalSlot_ (an internal slot name) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It throws an exception unless _O_ [is an Object](#sec-object-type) and has the given internal slot. It performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  If _O_ does not have an _internalSlot_ internal slot, throw a TypeError exception.
3.  Return unused.


# 10.2 ECMAScript Function Objects

ECMAScript [function objects](#function-object) encapsulate parameterized ECMAScript code closed over a lexical environment and support the dynamic evaluation of that code. An ECMAScript [function object](#function-object) is an [ordinary object](#ordinary-object) and has the same internal slots and the same internal methods as other [ordinary objects](#ordinary-object). The code of an ECMAScript [function object](#function-object) may be either [strict mode code](#sec-strict-mode-code) ([11.2.2](#sec-strict-mode-code)) or [non-strict code](#non-strict-code). An ECMAScript [function object](#function-object) whose code is [strict mode code](#sec-strict-mode-code) is called a strict function. One whose code is not [strict mode code](#sec-strict-mode-code) is called a non-strict function.

In addition to _\[\[Extensible\]\]_ and _\[\[Prototype\]\]_, ECMAScript [function objects](#function-object) also have the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects).

Table 28: Internal Slots of ECMAScript Function Objects

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[Environment]]</var></td><td>an <emu-xref href="#sec-environment-records" id="_ref_4548"><a href="#sec-environment-records">Environment Record</a></emu-xref></td><td>The <emu-xref href="#sec-environment-records" id="_ref_4549"><a href="#sec-environment-records">Environment Record</a></emu-xref> that the function was closed over. Used as the outer environment when evaluating the code of the function.</td></tr><tr><td><var class="field">[[PrivateEnvironment]]</var></td><td>a <emu-xref href="#privateenvironment-record" id="_ref_4550"><a href="#privateenvironment-record">PrivateEnvironment Record</a></emu-xref> or <emu-val>null</emu-val></td><td>The <emu-xref href="#privateenvironment-record" id="_ref_4551"><a href="#privateenvironment-record">PrivateEnvironment Record</a></emu-xref> for <emu-xref href="#sec-private-names" id="_ref_4552"><a href="#sec-private-names">Private Names</a></emu-xref> that the function was closed over. <emu-val>null</emu-val> if this function is not syntactically contained within a class. Used as the outer PrivateEnvironment for inner classes when evaluating the code of the function.</td></tr><tr><td><var class="field">[[FormalParameters]]</var></td><td>a <emu-xref href="#sec-syntactic-grammar" id="_ref_4553"><a href="#sec-syntactic-grammar">Parse Node</a></emu-xref></td><td>The root parse node of the source text that defines the function's formal parameter list.</td></tr><tr><td><var class="field">[[ECMAScriptCode]]</var></td><td>a <emu-xref href="#sec-syntactic-grammar" id="_ref_4554"><a href="#sec-syntactic-grammar">Parse Node</a></emu-xref></td><td>The root parse node of the source text that defines the function's body.</td></tr><tr><td><var class="field">[[ConstructorKind]]</var></td><td><emu-const>base</emu-const> or <emu-const>derived</emu-const></td><td>Whether or not the function is a derived class <emu-xref href="#constructor" id="_ref_4555"><a href="#constructor">constructor</a></emu-xref>.</td></tr><tr><td><var class="field">[[Realm]]</var></td><td>a <emu-xref href="#realm-record" id="_ref_4556"><a href="#realm-record">Realm Record</a></emu-xref></td><td>The <emu-xref href="#realm" id="_ref_4557"><a href="#realm">realm</a></emu-xref> in which the function was created and which provides any intrinsic objects that are accessed when evaluating the function.</td></tr><tr><td><var class="field">[[ScriptOrModule]]</var></td><td>a <emu-xref href="#script-record" id="_ref_4558"><a href="#script-record">Script Record</a></emu-xref> or a <emu-xref href="#sec-abstract-module-records" id="_ref_4559"><a href="#sec-abstract-module-records">Module Record</a></emu-xref></td><td>The script or module in which the function was created.</td></tr><tr><td><var class="field">[[ThisMode]]</var></td><td><emu-const>lexical</emu-const>, <emu-const>strict</emu-const>, or <emu-const>global</emu-const></td><td>Defines how <code>this</code> references are interpreted within the formal parameters and code body of the function. <emu-const>lexical</emu-const> means that <code>this</code> refers to the <emu-val>this</emu-val> value of a lexically enclosing function. <emu-const>strict</emu-const> means that the <emu-val>this</emu-val> value is used exactly as provided by an invocation of the function. <emu-const>global</emu-const> means that a <emu-val>this</emu-val> value of <emu-val>undefined</emu-val> or <emu-val>null</emu-val> is interpreted as a reference to the <emu-xref href="#sec-global-object" id="_ref_4560"><a href="#sec-global-object">global object</a></emu-xref>, and any other <emu-val>this</emu-val> value is first passed to <emu-xref aoid="ToObject" id="_ref_4561"><a href="#sec-toobject">ToObject</a></emu-xref>.</td></tr><tr><td><var class="field">[[Strict]]</var></td><td>a Boolean</td><td><emu-val>true</emu-val> if this is a <emu-xref href="#strict-function" id="_ref_4562"><a href="#strict-function">strict function</a></emu-xref>, <emu-val>false</emu-val> if this is a <emu-xref href="#non-strict-function" id="_ref_4563"><a href="#non-strict-function">non-strict function</a></emu-xref>.</td></tr><tr><td><var class="field">[[HomeObject]]</var></td><td>an Object</td><td>If the function uses <code>super</code>, this is the object whose <var class="field">[[GetPrototypeOf]]</var> provides the object where <code>super</code> property lookups begin.</td></tr><tr><td><var class="field">[[SourceText]]</var></td><td>a sequence of Unicode code points</td><td>The <emu-xref href="#sec-source-text" id="_ref_283"><a href="#sec-source-text">source text</a></emu-xref> that defines the function.</td></tr><tr><td><var class="field">[[Fields]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_4564"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-classfielddefinition-record-specification-type" id="_ref_4565"><a href="#sec-classfielddefinition-record-specification-type">ClassFieldDefinition Records</a></emu-xref></td><td>If the function is a class, this is a list of <emu-xref href="#sec-list-and-record-specification-type" id="_ref_4566"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> representing the non-static fields and corresponding initializers of the class.</td></tr><tr><td><var class="field">[[PrivateMethods]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_4567"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-privateelement-specification-type" id="_ref_4568"><a href="#sec-privateelement-specification-type">PrivateElements</a></emu-xref></td><td>If the function is a class, this is a list representing the non-static private methods and accessors of the class.</td></tr><tr><td><var class="field">[[ClassFieldInitializerName]]</var></td><td>a String, a Symbol, a <emu-xref href="#sec-private-names" id="_ref_4569"><a href="#sec-private-names">Private Name</a></emu-xref>, or <emu-const>empty</emu-const></td><td>If the function is created as the initializer of a class field, the name to use for <emu-xref aoid="NamedEvaluation" id="_ref_4570"><a href="#sec-runtime-semantics-namedevaluation">NamedEvaluation</a></emu-xref> of the field; <emu-const>empty</emu-const> otherwise.</td></tr><tr><td><var class="field">[[IsClassConstructor]]</var></td><td>a Boolean</td><td>Indicates whether the function is a class <emu-xref href="#constructor" id="_ref_4571"><a href="#constructor">constructor</a></emu-xref>. (If <emu-val>true</emu-val>, invoking the function's <var class="field">[[Call]]</var> will immediately throw a <emu-val>TypeError</emu-val> exception.)</td></tr></tbody></table>

All ECMAScript [function objects](#function-object) have the _\[\[Call\]\]_ internal method defined here. ECMAScript functions that are also [constructors](#constructor) in addition have the _\[\[Construct\]\]_ internal method.


# 10.2.1 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )

The _\[\[Call\]\]_ internal method of an ECMAScript [function object](#function-object) _F_ takes arguments _thisArgument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _callerContext_ be the [running execution context](#running-execution-context).
2.  Let _calleeContext_ be [PrepareForOrdinaryCall](#sec-prepareforordinarycall)(_F_, undefined).
3.  [Assert](#assert): _calleeContext_ is now the [running execution context](#running-execution-context).
4.  If _F_._\[\[IsClassConstructor\]\]_ is true, then
    1.  Let _error_ be a newly created TypeError object.
    2.  NOTE: _error_ is created in _calleeContext_ with _F_'s associated [Realm Record](#realm-record).
    3.  Remove _calleeContext_ from the [execution context stack](#execution-context-stack) and restore _callerContext_ as the [running execution context](#running-execution-context).
    4.  Return [ThrowCompletion](#sec-throwcompletion)(_error_).
5.  Perform [OrdinaryCallBindThis](#sec-ordinarycallbindthis)(_F_, _calleeContext_, _thisArgument_).
6.  Let _result_ be [Completion](#sec-completion-ao)([OrdinaryCallEvaluateBody](#sec-ordinarycallevaluatebody)(_F_, _argumentsList_)).
7.  Remove _calleeContext_ from the [execution context stack](#execution-context-stack) and restore _callerContext_ as the [running execution context](#running-execution-context).
8.  If _result_ is a [return completion](#sec-completion-record-specification-type), return _result_._\[\[Value\]\]_.
9.  [Assert](#assert): _result_ is a [throw completion](#sec-completion-record-specification-type).
10.  Return ? _result_.

Note

When _calleeContext_ is removed from the [execution context stack](#execution-context-stack) in step [7](#step-call-pop-context-stack) it must not be destroyed if it is suspended and retained for later resumption by an accessible Generator.


# 10.2.1.1 PrepareForOrdinaryCall ( _F_, _newTarget_ )

The abstract operation PrepareForOrdinaryCall takes arguments _F_ (an ECMAScript [function object](#function-object)) and _newTarget_ (an Object or undefined) and returns an [execution context](#sec-execution-contexts). It performs the following steps when called:

1.  Let _callerContext_ be the [running execution context](#running-execution-context).
2.  Let _calleeContext_ be a new [ECMAScript code execution context](#ecmascript-code-execution-context).
3.  Set the Function of _calleeContext_ to _F_.
4.  Let _calleeRealm_ be _F_._\[\[Realm\]\]_.
5.  Set the [Realm](#realm) of _calleeContext_ to _calleeRealm_.
6.  Set the ScriptOrModule of _calleeContext_ to _F_._\[\[ScriptOrModule\]\]_.
7.  Let _localEnv_ be [NewFunctionEnvironment](#sec-newfunctionenvironment)(_F_, _newTarget_).
8.  Set the LexicalEnvironment of _calleeContext_ to _localEnv_.
9.  Set the VariableEnvironment of _calleeContext_ to _localEnv_.
10.  Set the PrivateEnvironment of _calleeContext_ to _F_._\[\[PrivateEnvironment\]\]_.
11.  If _callerContext_ is not already suspended, suspend _callerContext_.
12.  Push _calleeContext_ onto the [execution context stack](#execution-context-stack); _calleeContext_ is now the [running execution context](#running-execution-context).
13.  NOTE: Any exception objects produced after this point are associated with _calleeRealm_.
14.  Return _calleeContext_.


# 10.2.1.2 OrdinaryCallBindThis ( _F_, _calleeContext_, _thisArgument_ )

The abstract operation OrdinaryCallBindThis takes arguments _F_ (an ECMAScript [function object](#function-object)), _calleeContext_ (an [execution context](#sec-execution-contexts)), and _thisArgument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It performs the following steps when called:

1.  Let _thisMode_ be _F_._\[\[ThisMode\]\]_.
2.  If _thisMode_ is lexical, return unused.
3.  Let _calleeRealm_ be _F_._\[\[Realm\]\]_.
4.  Let _localEnv_ be the LexicalEnvironment of _calleeContext_.
5.  If _thisMode_ is strict, then
    1.  Let _thisValue_ be _thisArgument_.
6.  Else,
    1.  If _thisArgument_ is either undefined or null, then
        1.  Let _globalEnv_ be _calleeRealm_._\[\[GlobalEnv\]\]_.
        2.  [Assert](#assert): _globalEnv_ is a [Global Environment Record](#sec-global-environment-records).
        3.  Let _thisValue_ be _globalEnv_._\[\[GlobalThisValue\]\]_.
    2.  Else,
        1.  Let _thisValue_ be ! [ToObject](#sec-toobject)(_thisArgument_).
        2.  NOTE: [ToObject](#sec-toobject) produces wrapper objects using _calleeRealm_.
7.  [Assert](#assert): _localEnv_ is a [Function Environment Record](#sec-function-environment-records).
8.  [Assert](#assert): The next step never returns an [abrupt completion](#sec-completion-record-specification-type) because _localEnv_._\[\[ThisBindingStatus\]\]_ is not initialized.
9.  Perform ! [BindThisValue](#sec-bindthisvalue)(_localEnv_, _thisValue_).
10.  Return unused.


# 10.2.1.3 Runtime Semantics: EvaluateBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateBody takes arguments _functionObject_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [return completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[FunctionBody](#prod-FunctionBody) : [FunctionStatementList](#prod-FunctionStatementList)

1.  Return ? [EvaluateFunctionBody](#sec-runtime-semantics-evaluatefunctionbody) of [FunctionBody](#prod-FunctionBody) with arguments _functionObject_ and _argumentsList_.

[ConciseBody](#prod-ConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return ? [EvaluateConciseBody](#sec-runtime-semantics-evaluateconcisebody) of [ConciseBody](#prod-ConciseBody) with arguments _functionObject_ and _argumentsList_.

[GeneratorBody](#prod-GeneratorBody) : [FunctionBody](#prod-FunctionBody)

1.  Return ? [EvaluateGeneratorBody](#sec-runtime-semantics-evaluategeneratorbody) of [GeneratorBody](#prod-GeneratorBody) with arguments _functionObject_ and _argumentsList_.

[AsyncGeneratorBody](#prod-AsyncGeneratorBody) : [FunctionBody](#prod-FunctionBody)

1.  Return ? [EvaluateAsyncGeneratorBody](#sec-runtime-semantics-evaluateasyncgeneratorbody) of [AsyncGeneratorBody](#prod-AsyncGeneratorBody) with arguments _functionObject_ and _argumentsList_.

[AsyncFunctionBody](#prod-AsyncFunctionBody) : [FunctionBody](#prod-FunctionBody)

1.  Return ? [EvaluateAsyncFunctionBody](#sec-runtime-semantics-evaluateasyncfunctionbody) of [AsyncFunctionBody](#prod-AsyncFunctionBody) with arguments _functionObject_ and _argumentsList_.

[AsyncConciseBody](#prod-AsyncConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return ? [EvaluateAsyncConciseBody](#sec-runtime-semantics-evaluateasyncconcisebody) of [AsyncConciseBody](#prod-AsyncConciseBody) with arguments _functionObject_ and _argumentsList_.

[Initializer](#prod-Initializer) : \= [AssignmentExpression](#prod-AssignmentExpression)

1.  [Assert](#assert): _argumentsList_ is empty.
2.  [Assert](#assert): _functionObject_._\[\[ClassFieldInitializerName\]\]_ is not empty.
3.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([AssignmentExpression](#prod-AssignmentExpression)) is true, then
    1.  Let _value_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _functionObject_._\[\[ClassFieldInitializerName\]\]_.
4.  Else,
    1.  Let _rhs_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
    2.  Let _value_ be ? [GetValue](#sec-getvalue)(_rhs_).
5.  Return [ReturnCompletion](#sec-returncompletion)(_value_).

Note

Even though field initializers constitute a function boundary, calling [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation) does not have any observable effect and so is omitted.

[ClassStaticBlockBody](#prod-ClassStaticBlockBody) : [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList)

1.  [Assert](#assert): _argumentsList_ is empty.
2.  Return ? [EvaluateClassStaticBlockBody](#sec-runtime-semantics-evaluateclassstaticblockbody) of [ClassStaticBlockBody](#prod-ClassStaticBlockBody) with argument _functionObject_.


# 10.2.1.4 OrdinaryCallEvaluateBody ( _F_, _argumentsList_ )

The abstract operation OrdinaryCallEvaluateBody takes arguments _F_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [return completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [EvaluateBody](#sec-runtime-semantics-evaluatebody) of _F_._\[\[ECMAScriptCode\]\]_ with arguments _F_ and _argumentsList_.


# 10.2.2 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )

The _\[\[Construct\]\]_ internal method of an ECMAScript [function object](#function-object) _F_ takes arguments _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and _newTarget_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _callerContext_ be the [running execution context](#running-execution-context).
2.  Let _kind_ be _F_._\[\[ConstructorKind\]\]_.
3.  If _kind_ is base, then
    1.  Let _thisArgument_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_newTarget_, "%Object.prototype%").
4.  Let _calleeContext_ be [PrepareForOrdinaryCall](#sec-prepareforordinarycall)(_F_, _newTarget_).
5.  [Assert](#assert): _calleeContext_ is now the [running execution context](#running-execution-context).
6.  If _kind_ is base, then
    1.  Perform [OrdinaryCallBindThis](#sec-ordinarycallbindthis)(_F_, _calleeContext_, _thisArgument_).
    2.  Let _initializeResult_ be [Completion](#sec-completion-ao)([InitializeInstanceElements](#sec-initializeinstanceelements)(_thisArgument_, _F_)).
    3.  If _initializeResult_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  Remove _calleeContext_ from the [execution context stack](#execution-context-stack) and restore _callerContext_ as the [running execution context](#running-execution-context).
        2.  Return ? _initializeResult_.
7.  Let _constructorEnv_ be the LexicalEnvironment of _calleeContext_.
8.  Let _result_ be [Completion](#sec-completion-ao)([OrdinaryCallEvaluateBody](#sec-ordinarycallevaluatebody)(_F_, _argumentsList_)).
9.  Remove _calleeContext_ from the [execution context stack](#execution-context-stack) and restore _callerContext_ as the [running execution context](#running-execution-context).
10.  If _result_ is a [throw completion](#sec-completion-record-specification-type), then
     1.  Return ? _result_.
11.  [Assert](#assert): _result_ is a [return completion](#sec-completion-record-specification-type).
12.  If _result_._\[\[Value\]\]_ [is an Object](#sec-object-type), return _result_._\[\[Value\]\]_.
13.  If _kind_ is base, return _thisArgument_.
14.  If _result_._\[\[Value\]\]_ is not undefined, throw a TypeError exception.
15.  Let _thisBinding_ be ? _constructorEnv_.GetThisBinding().
16.  [Assert](#assert): _thisBinding_ [is an Object](#sec-object-type).
17.  Return _thisBinding_.


# 10.2.3 OrdinaryFunctionCreate ( _functionPrototype_, _sourceText_, _ParameterList_, _Body_, _thisMode_, _env_, _privateEnv_ )

The abstract operation OrdinaryFunctionCreate takes arguments _functionPrototype_ (an Object), _sourceText_ (a sequence of Unicode code points), _ParameterList_ (a [Parse Node](#sec-syntactic-grammar)), _Body_ (a [Parse Node](#sec-syntactic-grammar)), _thisMode_ (lexical-this or non-lexical-this), _env_ (an [Environment Record](#sec-environment-records)), and _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null) and returns an ECMAScript [function object](#function-object). It is used to specify the runtime creation of a new function with a default _\[\[Call\]\]_ internal method and no _\[\[Construct\]\]_ internal method (although one may be subsequently added by an operation such as [MakeConstructor](#sec-makeconstructor)). _sourceText_ is the source text of the syntactic definition of the function to be created. It performs the following steps when called:

1.  Let _internalSlotsList_ be the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects).
2.  Let _F_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(_functionPrototype_, _internalSlotsList_).
3.  Set _F_._\[\[Call\]\]_ to the definition specified in [10.2.1](#sec-ecmascript-function-objects-call-thisargument-argumentslist).
4.  Set _F_._\[\[SourceText\]\]_ to _sourceText_.
5.  Set _F_._\[\[FormalParameters\]\]_ to _ParameterList_.
6.  Set _F_._\[\[ECMAScriptCode\]\]_ to _Body_.
7.  Let _Strict_ be [IsStrict](#sec-isstrict)(_Body_).
8.  Set _F_._\[\[Strict\]\]_ to _Strict_.
9.  If _thisMode_ is lexical-this, set _F_._\[\[ThisMode\]\]_ to lexical.
10.  Else if _Strict_ is true, set _F_._\[\[ThisMode\]\]_ to strict.
11.  Else, set _F_._\[\[ThisMode\]\]_ to global.
12.  Set _F_._\[\[IsClassConstructor\]\]_ to false.
13.  Set _F_._\[\[Environment\]\]_ to _env_.
14.  Set _F_._\[\[PrivateEnvironment\]\]_ to _privateEnv_.
15.  Set _F_._\[\[ScriptOrModule\]\]_ to [GetActiveScriptOrModule](#sec-getactivescriptormodule)().
16.  Set _F_._\[\[Realm\]\]_ to [the current Realm Record](#current-realm).
17.  Set _F_._\[\[HomeObject\]\]_ to undefined.
18.  Set _F_._\[\[Fields\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
19.  Set _F_._\[\[PrivateMethods\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
20.  Set _F_._\[\[ClassFieldInitializerName\]\]_ to empty.
21.  Let _len_ be the [ExpectedArgumentCount](#sec-static-semantics-expectedargumentcount) of _ParameterList_.
22.  Perform [SetFunctionLength](#sec-setfunctionlength)(_F_, _len_).
23.  Return _F_.


# 10.2.4 AddRestrictedFunctionProperties ( _F_, _realm_ )

The abstract operation AddRestrictedFunctionProperties takes arguments _F_ (a [function object](#function-object)) and _realm_ (a [Realm Record](#realm-record)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _realm_._\[\[Intrinsics\]\]_.\[\[[%ThrowTypeError%](#sec-%throwtypeerror%)\]\] exists and has been initialized.
2.  Let _thrower_ be _realm_._\[\[Intrinsics\]\]_.\[\[[%ThrowTypeError%](#sec-%throwtypeerror%)\]\].
3.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "caller", PropertyDescriptor { _\[\[Get\]\]_: _thrower_, _\[\[Set\]\]_: _thrower_, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
4.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "arguments", PropertyDescriptor { _\[\[Get\]\]_: _thrower_, _\[\[Set\]\]_: _thrower_, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
5.  Return unused.


# 10.2.4.1 %ThrowTypeError% ( )

This function is the %ThrowTypeError% intrinsic object.

It is an anonymous built-in [function object](#function-object) that is defined once for each [realm](#realm).

It performs the following steps when called:

1.  Throw a TypeError exception.

The value of the _\[\[Extensible\]\]_ internal slot of this function is false.

The "length" property of this function has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

The "name" property of this function has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 10.2.5 MakeConstructor ( _F_ \[, _writablePrototype_ \[, _prototype_ \] \] )

The abstract operation MakeConstructor takes argument _F_ (an ECMAScript [function object](#function-object) or a built-in [function object](#function-object)) and optional arguments _writablePrototype_ (a Boolean) and _prototype_ (an Object) and returns unused. It converts _F_ into a [constructor](#constructor). It performs the following steps when called:

1.  If _F_ is an ECMAScript [function object](#function-object), then
    1.  [Assert](#assert): [IsConstructor](#sec-isconstructor)(_F_) is false.
    2.  [Assert](#assert): _F_ is an extensible object that does not have a "prototype" own property.
    3.  Set _F_._\[\[Construct\]\]_ to the definition specified in [10.2.2](#sec-ecmascript-function-objects-construct-argumentslist-newtarget).
2.  Else,
    1.  Set _F_._\[\[Construct\]\]_ to the definition specified in [10.3.2](#sec-built-in-function-objects-construct-argumentslist-newtarget).
3.  Set _F_._\[\[ConstructorKind\]\]_ to base.
4.  If _writablePrototype_ is not present, set _writablePrototype_ to true.
5.  If _prototype_ is not present, then
    1.  Set _prototype_ to [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
    2.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_prototype_, "constructor", PropertyDescriptor { _\[\[Value\]\]_: _F_, _\[\[Writable\]\]_: _writablePrototype_, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
6.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: _writablePrototype_, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
7.  Return unused.


# 10.2.6 MakeClassConstructor ( _F_ )

The abstract operation MakeClassConstructor takes argument _F_ (an ECMAScript [function object](#function-object)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _F_._\[\[IsClassConstructor\]\]_ is false.
2.  Set _F_._\[\[IsClassConstructor\]\]_ to true.
3.  Return unused.


# 10.2.7 MakeMethod ( _F_, _homeObject_ )

The abstract operation MakeMethod takes arguments _F_ (an ECMAScript [function object](#function-object)) and _homeObject_ (an Object) and returns unused. It configures _F_ as a method. It performs the following steps when called:

1.  [Assert](#assert): _homeObject_ is an [ordinary object](#ordinary-object).
2.  Set _F_._\[\[HomeObject\]\]_ to _homeObject_.
3.  Return unused.


# 10.2.8 DefineMethodProperty ( _homeObject_, _key_, _closure_, _enumerable_ )

The abstract operation DefineMethodProperty takes arguments _homeObject_ (an Object), _key_ (a [property key](#property-key) or [Private Name](#sec-private-names)), _closure_ (a [function object](#function-object)), and _enumerable_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a [PrivateElement](#sec-privateelement-specification-type) or unused, or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): _homeObject_ is an ordinary, extensible object.
2.  If _key_ is a [Private Name](#sec-private-names), then
    1.  Return [PrivateElement](#sec-privateelement-specification-type) { _\[\[Key\]\]_: _key_, _\[\[Kind\]\]_: method, _\[\[Value\]\]_: _closure_ }.
3.  Else,
    1.  Let _desc_ be the PropertyDescriptor { _\[\[Value\]\]_: _closure_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: _enumerable_, _\[\[Configurable\]\]_: true }.
    2.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_homeObject_, _key_, _desc_).
    3.  NOTE: [DefinePropertyOrThrow](#sec-definepropertyorthrow) only returns an [abrupt completion](#sec-completion-record-specification-type) when attempting to define a class static method whose _key_ is "prototype".
    4.  Return unused.


# 10.2.9 SetFunctionName ( _F_, _name_ \[, _prefix_ \] )

The abstract operation SetFunctionName takes arguments _F_ (a [function object](#function-object)) and _name_ (a [property key](#property-key) or [Private Name](#sec-private-names)) and optional argument _prefix_ (a String) and returns unused. It adds a "name" property to _F_. It performs the following steps when called:

1.  [Assert](#assert): _F_ is an extensible object that does not have a "name" own property.
2.  If _name_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), then
    1.  Let _description_ be _name_._\[\[Description\]\]_.
    2.  If _description_ is undefined, set _name_ to the empty String.
    3.  Else, set _name_ to the [string-concatenation](#string-concatenation) of "\[", _description_, and "\]".
3.  Else if _name_ is a [Private Name](#sec-private-names), then
    1.  Set _name_ to _name_._\[\[Description\]\]_.
4.  If _F_ has an _\[\[InitialName\]\]_ internal slot, then
    1.  Set _F_._\[\[InitialName\]\]_ to _name_.
5.  If _prefix_ is present, then
    1.  Set _name_ to the [string-concatenation](#string-concatenation) of _prefix_, the code unit 0x0020 (SPACE), and _name_.
    2.  If _F_ has an _\[\[InitialName\]\]_ internal slot, then
        1.  NOTE: The choice in the following step is made independently each time this Abstract Operation is invoked.
        2.  Optionally, set _F_._\[\[InitialName\]\]_ to _name_.
6.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "name", PropertyDescriptor { _\[\[Value\]\]_: _name_, _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
7.  Return unused.


# 10.2.10 SetFunctionLength ( _F_, _length_ )

The abstract operation SetFunctionLength takes arguments _F_ (a [function object](#function-object)) and _length_ (a non-negative [integer](#integer) or +∞) and returns unused. It adds a "length" property to _F_. It performs the following steps when called:

1.  [Assert](#assert): _F_ is an extensible object that does not have a "length" own property.
2.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "length", PropertyDescriptor { _\[\[Value\]\]_: [𝔽](#𝔽)(_length_), _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
3.  Return unused.


# 10.2.11 FunctionDeclarationInstantiation ( _func_, _argumentsList_ )

The abstract operation FunctionDeclarationInstantiation takes arguments _func_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). _func_ is the [function object](#function-object) for which the [execution context](#sec-execution-contexts) is being established.

Note

When an [execution context](#sec-execution-contexts) is established for evaluating an ECMAScript function a new [Function Environment Record](#sec-function-environment-records) is created and bindings for each formal parameter are instantiated in that [Environment Record](#sec-environment-records). Each declaration in the function body is also instantiated. If the function's formal parameters do not include any default value initializers then the body declarations are instantiated in the same [Environment Record](#sec-environment-records) as the parameters. If default value parameter initializers exist, a second [Environment Record](#sec-environment-records) is created for the body declarations. Formal parameters and functions are initialized as part of FunctionDeclarationInstantiation. All other bindings are initialized during evaluation of the function body.

It performs the following steps when called:

1.  Let _calleeContext_ be the [running execution context](#running-execution-context).
2.  Let _code_ be _func_._\[\[ECMAScriptCode\]\]_.
3.  Let _strict_ be _func_._\[\[Strict\]\]_.
4.  Let _formals_ be _func_._\[\[FormalParameters\]\]_.
5.  Let _parameterNames_ be the [BoundNames](#sec-static-semantics-boundnames) of _formals_.
6.  If _parameterNames_ has any duplicate entries, let _hasDuplicates_ be true; otherwise let _hasDuplicates_ be false.
7.  Let _simpleParameterList_ be [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of _formals_.
8.  Let _hasParameterExpressions_ be [ContainsExpression](#sec-static-semantics-containsexpression) of _formals_.
9.  Let _varNames_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of _code_.
10.  Let _varDeclarations_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of _code_.
11.  Let _lexicalNames_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of _code_.
12.  Let _functionNames_ be a new empty [List](#sec-list-and-record-specification-type).
13.  Let _functionsToInitialize_ be a new empty [List](#sec-list-and-record-specification-type).
14.  For each element _d_ of _varDeclarations_, in reverse [List](#sec-list-and-record-specification-type) order, do
     1.  If _d_ is neither a [VariableDeclaration](#prod-VariableDeclaration) nor a [ForBinding](#prod-ForBinding) nor a [BindingIdentifier](#prod-BindingIdentifier), then
         1.  [Assert](#assert): _d_ is either a [FunctionDeclaration](#prod-FunctionDeclaration), a [GeneratorDeclaration](#prod-GeneratorDeclaration), an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), or an [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration).
         2.  Let _fn_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _d_.
         3.  If _functionNames_ does not contain _fn_, then
             1.  Insert _fn_ as the first element of _functionNames_.
             2.  NOTE: If there are multiple function declarations for the same name, the last declaration is used.
             3.  Insert _d_ as the first element of _functionsToInitialize_.
15.  Let _argumentsObjectNeeded_ be true.
16.  If _func_._\[\[ThisMode\]\]_ is lexical, then
     1.  NOTE: Arrow functions never have an arguments object.
     2.  Set _argumentsObjectNeeded_ to false.
17.  Else if _parameterNames_ contains "arguments", then
     1.  Set _argumentsObjectNeeded_ to false.
18.  Else if _hasParameterExpressions_ is false, then
     1.  If _functionNames_ contains "arguments" or _lexicalNames_ contains "arguments", then
         1.  Set _argumentsObjectNeeded_ to false.
19.  If _strict_ is true or _hasParameterExpressions_ is false, then
     1.  NOTE: Only a single [Environment Record](#sec-environment-records) is needed for the parameters, since calls to `eval` in [strict mode code](#sec-strict-mode-code) cannot create new bindings which are visible outside of the `eval`.
     2.  Let _env_ be the LexicalEnvironment of _calleeContext_.
20.  Else,
     1.  NOTE: A separate [Environment Record](#sec-environment-records) is needed to ensure that bindings created by [direct eval](#sec-function-calls-runtime-semantics-evaluation) calls in the formal parameter list are outside the environment where parameters are declared.
     2.  Let _calleeEnv_ be the LexicalEnvironment of _calleeContext_.
     3.  Let _env_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_calleeEnv_).
     4.  [Assert](#assert): The VariableEnvironment of _calleeContext_ and _calleeEnv_ are the same [Environment Record](#sec-environment-records).
     5.  Set the LexicalEnvironment of _calleeContext_ to _env_.
21.  For each String _paramName_ of _parameterNames_, do
     1.  Let _alreadyDeclared_ be ! _env_.HasBinding(_paramName_).
     2.  NOTE: [Early errors](#early-error) ensure that duplicate parameter names can only occur in [non-strict functions](#non-strict-function) that do not have parameter default values or rest parameters.
     3.  If _alreadyDeclared_ is false, then
         1.  Perform ! _env_.CreateMutableBinding(_paramName_, false).
         2.  If _hasDuplicates_ is true, then
             1.  Perform ! _env_.InitializeBinding(_paramName_, undefined).
22.  If _argumentsObjectNeeded_ is true, then
     1.  If _strict_ is true or _simpleParameterList_ is false, then
         1.  Let _ao_ be [CreateUnmappedArgumentsObject](#sec-createunmappedargumentsobject)(_argumentsList_).
     2.  Else,
         1.  NOTE: A mapped argument object is only provided for [non-strict functions](#non-strict-function) that don't have a rest parameter, any parameter default value initializers, or any destructured parameters.
         2.  Let _ao_ be [CreateMappedArgumentsObject](#sec-createmappedargumentsobject)(_func_, _formals_, _argumentsList_, _env_).
     3.  If _strict_ is true, then
         1.  Perform ! _env_.CreateImmutableBinding("arguments", false).
         2.  NOTE: In [strict mode code](#sec-strict-mode-code) [early errors](#early-error) prevent attempting to assign to this binding, so its mutability is not observable.
     4.  Else,
         1.  Perform ! _env_.CreateMutableBinding("arguments", false).
     5.  Perform ! _env_.InitializeBinding("arguments", _ao_).
     6.  Let _parameterBindings_ be the [list-concatenation](#list-concatenation) of _parameterNames_ and « "arguments" ».
23.  Else,
     1.  Let _parameterBindings_ be _parameterNames_.
24.  Let _iteratorRecord_ be [CreateListIteratorRecord](#sec-createlistiteratorRecord)(_argumentsList_).
25.  If _hasDuplicates_ is true, then
     1.  Let _usedEnv_ be undefined.
26.  Else,
     1.  Let _usedEnv_ be _env_.
27.  NOTE: The following step cannot return a [ReturnCompletion](#sec-returncompletion) because the only way such a completion can arise in expression position is by use of [YieldExpression](#prod-YieldExpression), which is forbidden in parameter lists by Early Error rules in [15.5.1](#sec-generator-function-definitions-static-semantics-early-errors) and [15.6.1](#sec-async-generator-function-definitions-static-semantics-early-errors).
28.  Perform ? [IteratorBindingInitialization](#sec-runtime-semantics-iteratorbindinginitialization) of _formals_ with arguments _iteratorRecord_ and _usedEnv_.
29.  If _hasParameterExpressions_ is false, then
     1.  NOTE: Only a single [Environment Record](#sec-environment-records) is needed for the parameters and top-level vars.
     2.  Let _instantiatedVarNames_ be a copy of the [List](#sec-list-and-record-specification-type) _parameterBindings_.
     3.  For each element _n_ of _varNames_, do
         1.  If _instantiatedVarNames_ does not contain _n_, then
             1.  Append _n_ to _instantiatedVarNames_.
             2.  Perform ! _env_.CreateMutableBinding(_n_, false).
             3.  Perform ! _env_.InitializeBinding(_n_, undefined).
     4.  Let _varEnv_ be _env_.
30.  Else,
     1.  NOTE: A separate [Environment Record](#sec-environment-records) is needed to ensure that closures created by expressions in the formal parameter list do not have visibility of declarations in the function body.
     2.  Let _varEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_env_).
     3.  Set the VariableEnvironment of _calleeContext_ to _varEnv_.
     4.  Let _instantiatedVarNames_ be a new empty [List](#sec-list-and-record-specification-type).
     5.  For each element _n_ of _varNames_, do
         1.  If _instantiatedVarNames_ does not contain _n_, then
             1.  Append _n_ to _instantiatedVarNames_.
             2.  Perform ! _varEnv_.CreateMutableBinding(_n_, false).
             3.  If _parameterBindings_ does not contain _n_, or if _functionNames_ contains _n_, then
                 1.  Let _initialValue_ be undefined.
             4.  Else,
                 1.  Let _initialValue_ be ! _env_.GetBindingValue(_n_, false).
             5.  Perform ! _varEnv_.InitializeBinding(_n_, _initialValue_).
             6.  NOTE: A var with the same name as a formal parameter initially has the same value as the corresponding initialized parameter.
31.  If _strict_ is true, then
     1.  Let _lexEnv_ be _varEnv_.
32.  Else,
     1.  [Normative Optional](#sec-conformance)
         
         If the [host](#host) is a web browser or otherwise supports [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), then
         1.  For each [FunctionDeclaration](#prod-FunctionDeclaration) _f_ that is directly contained in the [StatementList](#prod-StatementList) of any [Block](#prod-Block), [CaseClause](#prod-CaseClause), or [DefaultClause](#prod-DefaultClause) _x_ such that _code_ [Contains](#sec-static-semantics-contains) _x_ is true, do
             1.  Let _F_ be the [StringValue](#sec-static-semantics-stringvalue) of the [BindingIdentifier](#prod-BindingIdentifier) of _f_.
             2.  If replacing the [FunctionDeclaration](#prod-FunctionDeclaration) _f_ with a [VariableStatement](#prod-VariableStatement) that has _F_ as a [BindingIdentifier](#prod-BindingIdentifier) would not produce any Early Errors for _func_ and _parameterNames_ does not contain _F_, then
                 1.  NOTE: A var binding for _F_ is only instantiated here if it is neither a VarDeclaredName, the name of a formal parameter, or another [FunctionDeclaration](#prod-FunctionDeclaration).
                 2.  If _instantiatedVarNames_ does not contain _F_ and _F_ is not "arguments", then
                     1.  Perform ! _varEnv_.CreateMutableBinding(_F_, false).
                     2.  Perform ! _varEnv_.InitializeBinding(_F_, undefined).
                     3.  Append _F_ to _instantiatedVarNames_.
                 3.  When the [FunctionDeclaration](#prod-FunctionDeclaration) _f_ is evaluated, perform the following steps in place of the [FunctionDeclaration](#prod-FunctionDeclaration) [Evaluation](#sec-evaluation) algorithm provided in [15.2.6](#sec-function-definitions-runtime-semantics-evaluation):
                     1.  Let _fEnv_ be the [running execution context](#running-execution-context)'s VariableEnvironment.
                     2.  Let _bEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
                     3.  Let _fObj_ be ! _bEnv_.GetBindingValue(_F_, false).
                     4.  Perform ! _fEnv_.SetMutableBinding(_F_, _fObj_, false).
                     5.  Return unused.
     2.  Let _lexEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_varEnv_).
     3.  NOTE: [Non-strict functions](#non-strict-function) use a separate [Environment Record](#sec-environment-records) for top-level lexical declarations so that a [direct eval](#sec-function-calls-runtime-semantics-evaluation) can determine whether any var scoped declarations introduced by the eval code conflict with pre-existing top-level lexically scoped declarations. This is not needed for [strict functions](#strict-function) because a strict [direct eval](#sec-function-calls-runtime-semantics-evaluation) always places all declarations into a new [Environment Record](#sec-environment-records).
33.  Set the LexicalEnvironment of _calleeContext_ to _lexEnv_.
34.  Let _lexDeclarations_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of _code_.
35.  For each element _d_ of _lexDeclarations_, do
     1.  NOTE: A lexically declared name cannot be the same as a function/generator declaration, formal parameter, or a var name. Lexically declared names are only instantiated here but not initialized.
     2.  For each element _dn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
         1.  If [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of _d_ is true, then
             1.  Perform ! _lexEnv_.CreateImmutableBinding(_dn_, true).
         2.  Else,
             1.  Perform ! _lexEnv_.CreateMutableBinding(_dn_, false).
36.  Let _privateEnv_ be the PrivateEnvironment of _calleeContext_.
37.  For each [Parse Node](#sec-syntactic-grammar) _f_ of _functionsToInitialize_, do
     1.  Let _fn_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _f_.
     2.  Let _fo_ be [InstantiateFunctionObject](#sec-runtime-semantics-instantiatefunctionobject) of _f_ with arguments _lexEnv_ and _privateEnv_.
     3.  Perform ! _varEnv_.SetMutableBinding(_fn_, _fo_, false).
38.  Return unused.


# 10.3 Built-in Function Objects

A built-in [function object](#function-object) is an [ordinary object](#ordinary-object); it must satisfy the requirements for [ordinary objects](#ordinary-object) set out in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots).

In addition to the internal slots required of every [ordinary object](#ordinary-object) (see [10.1](#sec-ordinary-object-internal-methods-and-internal-slots)), a built-in [function object](#function-object) must also have the following internal slots:

-   _\[\[Realm\]\]_, a [Realm Record](#realm-record) that represents the [realm](#realm) in which the function was created.
-   _\[\[InitialName\]\]_, a String that is the initial name of the function. It is used by [20.2.3.5](#sec-function.prototype.tostring).
-   _\[\[Async\]\]_, a Boolean that indicates whether the function has async function call and construct behaviour in [BuiltinCallOrConstruct](#sec-builtincallorconstruct).

The initial value of a built-in [function object](#function-object)'s _\[\[Prototype\]\]_ internal slot is [%Function.prototype%](#sec-properties-of-the-function-prototype-object), unless otherwise specified.

A built-in [function object](#function-object) must have a _\[\[Call\]\]_ internal method that conforms to the definition in [10.3.1](#sec-built-in-function-objects-call-thisargument-argumentslist).

A built-in [function object](#function-object) has a _\[\[Construct\]\]_ internal method if and only if it is described as a “[constructor](#constructor)”, or some algorithm in this specification explicitly sets its _\[\[Construct\]\]_ internal method. Such a _\[\[Construct\]\]_ internal method must conform to the definition in [10.3.2](#sec-built-in-function-objects-construct-argumentslist-newtarget).

An implementation may provide additional built-in [function objects](#function-object) that are not defined in this specification.


# 10.3.1 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )

The _\[\[Call\]\]_ internal method of a built-in [function object](#function-object) _F_ takes arguments _thisArgument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [BuiltinCallOrConstruct](#sec-builtincallorconstruct)(_F_, _thisArgument_, _argumentsList_, undefined).


# 10.3.2 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )

The _\[\[Construct\]\]_ internal method of a built-in [function object](#function-object) _F_ (when the method is present) takes arguments _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and _newTarget_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _result_ be ? [BuiltinCallOrConstruct](#sec-builtincallorconstruct)(_F_, uninitialized, _argumentsList_, _newTarget_).
2.  [Assert](#assert): _result_ [is an Object](#sec-object-type).
3.  Return _result_.


# 10.3.3 BuiltinCallOrConstruct ( _F_, _thisArgument_, _argumentsList_, _newTarget_ )

The abstract operation BuiltinCallOrConstruct takes arguments _F_ (a built-in [function object](#function-object)), _thisArgument_ (an [ECMAScript language value](#sec-ecmascript-language-types) or uninitialized), _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)), and _newTarget_ (a [constructor](#constructor) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _callerContext_ be the [running execution context](#running-execution-context).
2.  If _callerContext_ is not already suspended, suspend _callerContext_.
3.  Let _calleeContext_ be a new [execution context](#sec-execution-contexts).
4.  Set the Function of _calleeContext_ to _F_.
5.  Let _calleeRealm_ be _F_._\[\[Realm\]\]_.
6.  Set the [Realm](#realm) of _calleeContext_ to _calleeRealm_.
7.  Set the ScriptOrModule of _calleeContext_ to null.
8.  Perform any necessary [implementation-defined](#implementation-defined) initialization of _calleeContext_.
9.  Push _calleeContext_ onto the [execution context stack](#execution-context-stack); _calleeContext_ is now the [running execution context](#running-execution-context).
10.  If _F_._\[\[Async\]\]_ is true, then
     1.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
     2.  Let _resultsClosure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _F_, _thisArgument_, _argumentsList_, and _newTarget_ and performs the following steps when called:
         1.  Let _result_ be the [Completion Record](#sec-completion-record-specification-type) that is the result of evaluating _F_ in a manner that conforms to the specification of _F_. If _thisArgument_ is uninitialized, the this value is uninitialized; otherwise _thisArgument_ provides the this value. _argumentsList_ provides the named parameters. _newTarget_ provides the NewTarget value.
         2.  NOTE: If _F_ is defined in this document, “the specification of _F_” is the behaviour specified for it via algorithm steps or other means.
         3.  Return [Completion](#sec-completion-ao)(_result_).
     3.  Perform [AsyncFunctionStart](#sec-async-functions-abstract-operations-async-function-start)(_promiseCapability_, _resultsClosure_).
     4.  Remove _calleeContext_ from the [execution context stack](#execution-context-stack) and restore _callerContext_ as the [running execution context](#running-execution-context).
     5.  Return _promiseCapability_._\[\[Promise\]\]_.
11.  Else,
     1.  Let _result_ be the [Completion Record](#sec-completion-record-specification-type) that is the result of evaluating _F_ in a manner that conforms to the specification of _F_. If _thisArgument_ is uninitialized, the this value is uninitialized; otherwise _thisArgument_ provides the this value. _argumentsList_ provides the named parameters. _newTarget_ provides the NewTarget value.
     2.  NOTE: If _F_ is defined in this document, “the specification of _F_” is the behaviour specified for it via algorithm steps or other means.
     3.  Remove _calleeContext_ from the [execution context stack](#execution-context-stack) and restore _callerContext_ as the [running execution context](#running-execution-context).
     4.  Return ? _result_.

Note

When _calleeContext_ is removed from the [execution context stack](#execution-context-stack) it must not be destroyed if it has been suspended and retained by an accessible Generator for later resumption.


# 10.3.4 CreateBuiltinFunction ( _behaviour_, _length_, _name_, _additionalInternalSlotsList_ \[, _realm_ \[, _prototype_ \[, _prefix_ \[, _async_ \] \] \] \] )

The abstract operation CreateBuiltinFunction takes arguments _behaviour_ (an [Abstract Closure](#sec-abstract-closure), a set of algorithm steps, or some other definition of a function's behaviour provided in this specification), _length_ (a non-negative [integer](#integer) or +∞), _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)), and _additionalInternalSlotsList_ (a [List](#sec-list-and-record-specification-type) of names of internal slots) and optional arguments _realm_ (a [Realm Record](#realm-record)), _prototype_ (an Object or null), _prefix_ (a String), and _async_ (a Boolean) and returns a built-in [function object](#function-object). _additionalInternalSlotsList_ contains the names of additional internal slots that must be defined as part of the object. This operation creates a built-in [function object](#function-object). It performs the following steps when called:

1.  If _realm_ is not present, set _realm_ to [the current Realm Record](#current-realm).
2.  If _prototype_ is not present, set _prototype_ to _realm_._\[\[Intrinsics\]\]_.\[\[[%Function.prototype%](#sec-properties-of-the-function-prototype-object)\]\].
3.  If _async_ is not present, set _async_ to false.
4.  Let _internalSlotsList_ be a [List](#sec-list-and-record-specification-type) containing the names of all the internal slots that [10.3](#sec-built-in-function-objects) requires for the built-in [function object](#function-object) that is about to be created.
5.  Append to _internalSlotsList_ the elements of _additionalInternalSlotsList_.
6.  Let _func_ be a new built-in [function object](#function-object) that, when called, performs the action described by _behaviour_ using the provided arguments as the values of the corresponding parameters specified by _behaviour_. The new [function object](#function-object) has internal slots whose names are the elements of _internalSlotsList_, and an _\[\[InitialName\]\]_ internal slot.
7.  Set _func_._\[\[Async\]\]_ to _async_.
8.  Set _func_._\[\[Prototype\]\]_ to _prototype_.
9.  Set _func_._\[\[Extensible\]\]_ to true.
10.  Set _func_._\[\[Realm\]\]_ to _realm_.
11.  Set _func_._\[\[InitialName\]\]_ to null.
12.  Perform [SetFunctionLength](#sec-setfunctionlength)(_func_, _length_).
13.  If _prefix_ is not present, then
     1.  Perform [SetFunctionName](#sec-setfunctionname)(_func_, _name_).
14.  Else,
     1.  Perform [SetFunctionName](#sec-setfunctionname)(_func_, _name_, _prefix_).
15.  Return _func_.

Each built-in function defined in this specification is created by calling the CreateBuiltinFunction abstract operation.


# 10.4 Built-in Exotic Object Internal Methods and Slots

This specification defines several kinds of built-in [exotic objects](#exotic-object). These objects generally behave similar to [ordinary objects](#ordinary-object) except for a few specific situations. The following [exotic objects](#exotic-object) use the [ordinary object](#ordinary-object) internal methods except where it is explicitly specified otherwise below:


# 10.4.1 Bound Function Exotic Objects

A [bound function exotic object](#bound-function-exotic-object) is an [exotic object](#exotic-object) that wraps another [function object](#function-object). A [bound function exotic object](#bound-function-exotic-object) is callable (it has a _\[\[Call\]\]_ internal method and may have a _\[\[Construct\]\]_ internal method). Calling a [bound function exotic object](#bound-function-exotic-object) generally results in a call of its wrapped function.

An object is a bound function exotic object if its _\[\[Call\]\]_ and (if applicable) _\[\[Construct\]\]_ internal methods use the following implementations, and its other essential internal methods use the definitions found in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots). These methods are installed in [BoundFunctionCreate](#sec-boundfunctioncreate).

[Bound function exotic objects](#bound-function-exotic-object) do not have the internal slots of ECMAScript [function objects](#function-object) listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects). Instead they have the internal slots listed in [Table 29](#table-internal-slots-of-bound-function-exotic-objects), in addition to _\[\[Prototype\]\]_ and _\[\[Extensible\]\]_.

Table 29: Internal Slots of Bound Function Exotic Objects

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[BoundTargetFunction]]</var></td><td>a callable Object</td><td>The wrapped <emu-xref href="#function-object" id="_ref_4891"><a href="#function-object">function object</a></emu-xref>.</td></tr><tr><td><var class="field">[[BoundThis]]</var></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_4892"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref></td><td>The value that is always passed as the <emu-val>this</emu-val> value when calling the wrapped function.</td></tr><tr><td><var class="field">[[BoundArguments]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_4893"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-ecmascript-language-types" id="_ref_4894"><a href="#sec-ecmascript-language-types">ECMAScript language values</a></emu-xref></td><td>A list of values whose elements are used as the first arguments to any call to the wrapped function.</td></tr></tbody></table>


# 10.4.1.1 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )

The _\[\[Call\]\]_ internal method of a [bound function exotic object](#bound-function-exotic-object) _F_ takes arguments _thisArgument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _target_ be _F_._\[\[BoundTargetFunction\]\]_.
2.  Let _boundThis_ be _F_._\[\[BoundThis\]\]_.
3.  Let _boundArgs_ be _F_._\[\[BoundArguments\]\]_.
4.  Let _args_ be the [list-concatenation](#list-concatenation) of _boundArgs_ and _argumentsList_.
5.  Return ? [Call](#sec-call)(_target_, _boundThis_, _args_).


# 10.4.1.2 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )

The _\[\[Construct\]\]_ internal method of a [bound function exotic object](#bound-function-exotic-object) _F_ takes arguments _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and _newTarget_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _target_ be _F_._\[\[BoundTargetFunction\]\]_.
2.  [Assert](#assert): [IsConstructor](#sec-isconstructor)(_target_) is true.
3.  Let _boundArgs_ be _F_._\[\[BoundArguments\]\]_.
4.  Let _args_ be the [list-concatenation](#list-concatenation) of _boundArgs_ and _argumentsList_.
5.  If [SameValue](#sec-samevalue)(_F_, _newTarget_) is true, set _newTarget_ to _target_.
6.  Return ? [Construct](#sec-construct)(_target_, _args_, _newTarget_).


# 10.4.1.3 BoundFunctionCreate ( _targetFunction_, _boundThis_, _boundArgs_ )

The abstract operation BoundFunctionCreate takes arguments _targetFunction_ (a [function object](#function-object)), _boundThis_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _boundArgs_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [function object](#function-object) or a [throw completion](#sec-completion-record-specification-type). It is used to specify the creation of new [bound function exotic objects](#bound-function-exotic-object). It performs the following steps when called:

1.  Let _proto_ be ? _targetFunction_._\[\[GetPrototypeOf\]\]_().
2.  Let _internalSlotsList_ be the [list-concatenation](#list-concatenation) of « _\[\[Prototype\]\]_, _\[\[Extensible\]\]_ » and the internal slots listed in [Table 29](#table-internal-slots-of-bound-function-exotic-objects).
3.  Let _obj_ be [MakeBasicObject](#sec-makebasicobject)(_internalSlotsList_).
4.  Set _obj_._\[\[Prototype\]\]_ to _proto_.
5.  Set _obj_._\[\[Call\]\]_ as specified in [10.4.1.1](#sec-bound-function-exotic-objects-call-thisargument-argumentslist).
6.  If [IsConstructor](#sec-isconstructor)(_targetFunction_) is true, then
    1.  Set _obj_._\[\[Construct\]\]_ as specified in [10.4.1.2](#sec-bound-function-exotic-objects-construct-argumentslist-newtarget).
7.  Set _obj_._\[\[BoundTargetFunction\]\]_ to _targetFunction_.
8.  Set _obj_._\[\[BoundThis\]\]_ to _boundThis_.
9.  Set _obj_._\[\[BoundArguments\]\]_ to _boundArgs_.
10.  Return _obj_.


# 10.4.2 Array Exotic Objects

An Array is an [exotic object](#exotic-object) that gives special treatment to [array index](#array-index) [property keys](#property-key) (see [6.1.7](#sec-object-type)). A property whose [property name](#property-name) is an [array index](#array-index) is also called an *element*. Every Array has a non-configurable "length" property whose value is always a non-negative [integral Number](#integral-number) whose [mathematical value](#mathematical-value) is strictly less than 2<sup>32</sup>. The value of the "length" property is numerically greater than the name of every own property whose name is an [array index](#array-index); whenever an own property of an Array is created or changed, other properties are adjusted as necessary to maintain this invariant. Specifically, whenever an own property is added whose name is an [array index](#array-index), the value of the "length" property is changed, if necessary, to be one more than the numeric value of that [array index](#array-index); and whenever the value of the "length" property is changed, every own property whose name is an [array index](#array-index) whose value is not smaller than the new length is deleted. This constraint applies only to own properties of an Array and is unaffected by "length" or [array index](#array-index) properties that may be inherited from its prototypes.

An object is an Array exotic object (or simply, an Array) if its _\[\[DefineOwnProperty\]\]_ internal method uses the following implementation, and its other essential internal methods use the definitions found in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots). These methods are installed in [ArrayCreate](#sec-arraycreate).


# 10.4.2.1 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

The _\[\[DefineOwnProperty\]\]_ internal method of an [Array exotic object](#array-exotic-object) _A_ takes arguments _P_ (a [property key](#property-key)) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ is "length", then
    1.  Return ? [ArraySetLength](#sec-arraysetlength)(_A_, _Desc_).
2.  Else if _P_ is an [array index](#array-index), then
    1.  Let _lengthDesc_ be [OrdinaryGetOwnProperty](#sec-ordinarygetownproperty)(_A_, "length").
    2.  [Assert](#assert): _lengthDesc_ is not undefined.
    3.  [Assert](#assert): [IsDataDescriptor](#sec-isdatadescriptor)(_lengthDesc_) is true.
    4.  [Assert](#assert): _lengthDesc_._\[\[Configurable\]\]_ is false.
    5.  Let _length_ be _lengthDesc_._\[\[Value\]\]_.
    6.  [Assert](#assert): _length_ is a non-negative [integral Number](#integral-number).
    7.  Let _index_ be ! [ToUint32](#sec-touint32)(_P_).
    8.  If _index_ ≥ _length_ and _lengthDesc_._\[\[Writable\]\]_ is false, return false.
    9.  Let _succeeded_ be ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, _P_, _Desc_).
    10.  If _succeeded_ is false, return false.
    11.  If _index_ ≥ _length_, then
         1.  Set _lengthDesc_._\[\[Value\]\]_ to _index_ + 1<sub>𝔽</sub>.
         2.  Set _succeeded_ to ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, "length", _lengthDesc_).
         3.  [Assert](#assert): _succeeded_ is true.
    12.  Return true.
3.  Return ? [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, _P_, _Desc_).


# 10.4.2.2 ArrayCreate ( _length_ \[, _proto_ \] )

The abstract operation ArrayCreate takes argument _length_ (a non-negative [integer](#integer)) and optional argument _proto_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [Array exotic object](#array-exotic-object) or a [throw completion](#sec-completion-record-specification-type). It is used to specify the creation of new Arrays. It performs the following steps when called:

1.  If _length_ > 2<sup>32</sup> - 1, throw a RangeError exception.
2.  If _proto_ is not present, set _proto_ to [%Array.prototype%](#sec-properties-of-the-array-prototype-object).
3.  Let _A_ be [MakeBasicObject](#sec-makebasicobject)(« _\[\[Prototype\]\]_, _\[\[Extensible\]\]_ »).
4.  Set _A_._\[\[Prototype\]\]_ to _proto_.
5.  Set _A_._\[\[DefineOwnProperty\]\]_ as specified in [10.4.2.1](#sec-array-exotic-objects-defineownproperty-p-desc).
6.  Perform ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, "length", PropertyDescriptor { _\[\[Value\]\]_: [𝔽](#𝔽)(_length_), _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
7.  Return _A_.


# 10.4.2.3 ArraySpeciesCreate ( _originalArray_, _length_ )

The abstract operation ArraySpeciesCreate takes arguments _originalArray_ (an Object) and _length_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It is used to specify the creation of a new Array or similar object using a [constructor](#constructor) function that is derived from _originalArray_. It does not enforce that the [constructor](#constructor) function returns an Array. It performs the following steps when called:

1.  Let _isArray_ be ? [IsArray](#sec-isarray)(_originalArray_).
2.  If _isArray_ is false, return ? [ArrayCreate](#sec-arraycreate)(_length_).
3.  Let _C_ be ? [Get](#sec-get-o-p)(_originalArray_, "constructor").
4.  If [IsConstructor](#sec-isconstructor)(_C_) is true, then
    1.  Let _thisRealm_ be [the current Realm Record](#current-realm).
    2.  Let _realmC_ be ? [GetFunctionRealm](#sec-getfunctionrealm)(_C_).
    3.  If _thisRealm_ and _realmC_ are not the same [Realm Record](#realm-record), then
        1.  If [SameValue](#sec-samevalue)(_C_, _realmC_._\[\[Intrinsics\]\]_.\[\[[%Array%](#sec-array-constructor)\]\]) is true, set _C_ to undefined.
5.  If _C_ [is an Object](#sec-object-type), then
    1.  Set _C_ to ? [Get](#sec-get-o-p)(_C_, [%Symbol.species%](#sec-well-known-symbols)).
    2.  If _C_ is null, set _C_ to undefined.
6.  If _C_ is undefined, return ? [ArrayCreate](#sec-arraycreate)(_length_).
7.  If [IsConstructor](#sec-isconstructor)(_C_) is false, throw a TypeError exception.
8.  Return ? [Construct](#sec-construct)(_C_, « [𝔽](#𝔽)(_length_) »).

Note

If _originalArray_ was created using the standard built-in Array [constructor](#constructor) for a [realm](#realm) that is not the [realm](#realm) of the [running execution context](#running-execution-context), then a new Array is created using the [realm](#realm) of the [running execution context](#running-execution-context). This maintains compatibility with Web browsers that have historically had that behaviour for the `Array.prototype` methods that now are defined using ArraySpeciesCreate.


# 10.4.2.4 ArraySetLength ( _A_, _Desc_ )

The abstract operation ArraySetLength takes arguments _A_ (an Array) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _Desc_ does not have a _\[\[Value\]\]_ field, then
    1.  Return ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, "length", _Desc_).
2.  Let _newLenDesc_ be a copy of _Desc_.
3.  Let _newLen_ be ? [ToUint32](#sec-touint32)(_Desc_._\[\[Value\]\]_).
4.  Let _numberLen_ be ? [ToNumber](#sec-tonumber)(_Desc_._\[\[Value\]\]_).
5.  If [SameValueZero](#sec-samevaluezero)(_newLen_, _numberLen_) is false, throw a RangeError exception.
6.  Set _newLenDesc_._\[\[Value\]\]_ to _newLen_.
7.  Let _oldLenDesc_ be [OrdinaryGetOwnProperty](#sec-ordinarygetownproperty)(_A_, "length").
8.  [Assert](#assert): _oldLenDesc_ is not undefined.
9.  [Assert](#assert): [IsDataDescriptor](#sec-isdatadescriptor)(_oldLenDesc_) is true.
10.  [Assert](#assert): _oldLenDesc_._\[\[Configurable\]\]_ is false.
11.  Let _oldLen_ be _oldLenDesc_._\[\[Value\]\]_.
12.  If _newLen_ ≥ _oldLen_, then
     1.  Return ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, "length", _newLenDesc_).
13.  If _oldLenDesc_._\[\[Writable\]\]_ is false, return false.
14.  If _newLenDesc_ does not have a _\[\[Writable\]\]_ field or _newLenDesc_._\[\[Writable\]\]_ is true, then
     1.  Let _newWritable_ be true.
15.  Else,
     1.  NOTE: Setting the _\[\[Writable\]\]_ attribute to false is deferred in case any elements cannot be deleted.
     2.  Let _newWritable_ be false.
     3.  Set _newLenDesc_._\[\[Writable\]\]_ to true.
16.  Let _succeeded_ be ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, "length", _newLenDesc_).
17.  If _succeeded_ is false, return false.
18.  For each own [property key](#property-key) _P_ of _A_ such that _P_ is an [array index](#array-index) and ! [ToUint32](#sec-touint32)(_P_) ≥ _newLen_, in descending numeric index order, do
     1.  Let _deleteSucceeded_ be ! _A_._\[\[Delete\]\]_(_P_).
     2.  If _deleteSucceeded_ is false, then
         1.  Set _newLenDesc_._\[\[Value\]\]_ to ! [ToUint32](#sec-touint32)(_P_) + 1<sub>𝔽</sub>.
         2.  If _newWritable_ is false, set _newLenDesc_._\[\[Writable\]\]_ to false.
         3.  Perform ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, "length", _newLenDesc_).
         4.  Return false.
19.  If _newWritable_ is false, then
     1.  Set _succeeded_ to ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_A_, "length", PropertyDescriptor { _\[\[Writable\]\]_: false }).
     2.  [Assert](#assert): _succeeded_ is true.
20.  Return true.

Note

In steps [3](#step-arraysetlength-newlen) and [4](#step-arraysetlength-numberlen), if _Desc_._\[\[Value\]\]_ is an object then its `valueOf` method is called twice. This is legacy behaviour that was specified with this effect starting with the 2<sup>nd</sup> Edition of this specification.


# 10.4.3 String Exotic Objects

A String object is an [exotic object](#exotic-object) that encapsulates a String value and exposes virtual [integer-indexed](#integer-index) [data properties](#sec-object-type) corresponding to the individual code unit elements of the String value. [String exotic objects](#string-exotic-object) always have a [data property](#sec-object-type) named "length" whose value is the length of the encapsulated String value. Both the code unit [data properties](#sec-object-type) and the "length" property are non-writable and non-configurable.

An object is a String exotic object (or simply, a String object) if its _\[\[GetOwnProperty\]\]_, _\[\[DefineOwnProperty\]\]_, and _\[\[OwnPropertyKeys\]\]_ internal methods use the following implementations, and its other essential internal methods use the definitions found in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots). These methods are installed in [StringCreate](#sec-stringcreate).

[String exotic objects](#string-exotic-object) have the same internal slots as [ordinary objects](#ordinary-object). They also have a _\[\[StringData\]\]_ internal slot.


# 10.4.3.1 _\[\[GetOwnProperty\]\]_ ( _P_ )

The _\[\[GetOwnProperty\]\]_ internal method of a [String exotic object](#string-exotic-object) _S_ takes argument _P_ (a [property key](#property-key)) and returns a [normal completion containing](#sec-completion-record-specification-type) either a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined. It performs the following steps when called:

1.  Let _desc_ be [OrdinaryGetOwnProperty](#sec-ordinarygetownproperty)(_S_, _P_).
2.  If _desc_ is not undefined, return _desc_.
3.  Return [StringGetOwnProperty](#sec-stringgetownproperty)(_S_, _P_).


# 10.4.3.2 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

The _\[\[DefineOwnProperty\]\]_ internal method of a [String exotic object](#string-exotic-object) _S_ takes arguments _P_ (a [property key](#property-key)) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  Let _stringDesc_ be [StringGetOwnProperty](#sec-stringgetownproperty)(_S_, _P_).
2.  If _stringDesc_ is not undefined, then
    1.  Let _extensible_ be _S_._\[\[Extensible\]\]_.
    2.  Return [IsCompatiblePropertyDescriptor](#sec-iscompatiblepropertydescriptor)(_extensible_, _Desc_, _stringDesc_).
3.  Return ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_S_, _P_, _Desc_).


# 10.4.3.3 _\[\[OwnPropertyKeys\]\]_ ( )

The _\[\[OwnPropertyKeys\]\]_ internal method of a [String exotic object](#string-exotic-object) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key). It performs the following steps when called:

1.  Let _keys_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Let _str_ be _O_._\[\[StringData\]\]_.
3.  [Assert](#assert): _str_ [is a String](#sec-ecmascript-language-types-string-type).
4.  Let _len_ be the length of _str_.
5.  For each [integer](#integer) _i_ such that 0 ≤ _i_ < _len_, in ascending order, do
    1.  Append ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_)) to _keys_.
6.  For each own [property key](#property-key) _P_ of _O_ such that _P_ is an [array index](#array-index) and ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_P_) ≥ _len_, in ascending numeric index order, do
    1.  Append _P_ to _keys_.
7.  For each own [property key](#property-key) _P_ of _O_ such that _P_ [is a String](#sec-ecmascript-language-types-string-type) and _P_ is not an [array index](#array-index), in ascending chronological order of property creation, do
    1.  Append _P_ to _keys_.
8.  For each own [property key](#property-key) _P_ of _O_ such that _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), in ascending chronological order of property creation, do
    1.  Append _P_ to _keys_.
9.  Return _keys_.


# 10.4.3.4 StringCreate ( _value_, _prototype_ )

The abstract operation StringCreate takes arguments _value_ (a String) and _prototype_ (an Object) and returns a [String exotic object](#string-exotic-object). It is used to specify the creation of new [String exotic objects](#string-exotic-object). It performs the following steps when called:

1.  Let _S_ be [MakeBasicObject](#sec-makebasicobject)(« _\[\[Prototype\]\]_, _\[\[Extensible\]\]_, _\[\[StringData\]\]_ »).
2.  Set _S_._\[\[Prototype\]\]_ to _prototype_.
3.  Set _S_._\[\[StringData\]\]_ to _value_.
4.  Set _S_._\[\[GetOwnProperty\]\]_ as specified in [10.4.3.1](#sec-string-exotic-objects-getownproperty-p).
5.  Set _S_._\[\[DefineOwnProperty\]\]_ as specified in [10.4.3.2](#sec-string-exotic-objects-defineownproperty-p-desc).
6.  Set _S_._\[\[OwnPropertyKeys\]\]_ as specified in [10.4.3.3](#sec-string-exotic-objects-ownpropertykeys).
7.  Let _length_ be the length of _value_.
8.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_S_, "length", PropertyDescriptor { _\[\[Value\]\]_: [𝔽](#𝔽)(_length_), _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
9.  Return _S_.


# 10.4.3.5 StringGetOwnProperty ( _S_, _P_ )

The abstract operation StringGetOwnProperty takes arguments _S_ (an Object that has a _\[\[StringData\]\]_ internal slot) and _P_ (a [property key](#property-key)) and returns a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined. It performs the following steps when called:

1.  If _P_ [is not a String](#sec-ecmascript-language-types-string-type), return undefined.
2.  Let _index_ be [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_P_).
3.  If _index_ is not an [integral Number](#integral-number), return undefined.
4.  If _index_ is \-0<sub>𝔽</sub> or _index_ < \-0<sub>𝔽</sub>, return undefined.
5.  Let _str_ be _S_._\[\[StringData\]\]_.
6.  [Assert](#assert): _str_ [is a String](#sec-ecmascript-language-types-string-type).
7.  Let _len_ be the length of _str_.
8.  If [ℝ](#ℝ)(_index_) ≥ _len_, return undefined.
9.  Let _resultStr_ be the [substring](#substring) of _str_ from [ℝ](#ℝ)(_index_) to [ℝ](#ℝ)(_index_) + 1.
10.  Return the PropertyDescriptor { _\[\[Value\]\]_: _resultStr_, _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: false }.


# 10.4.4 Arguments Exotic Objects

Most ECMAScript functions make an arguments object available to their code. Depending upon the characteristics of the function definition, its arguments object is either an [ordinary object](#ordinary-object) or an [arguments exotic object](#arguments-exotic-object). An [arguments exotic object](#arguments-exotic-object) is an [exotic object](#exotic-object) whose [array index](#array-index) properties map to the formal parameters bindings of an invocation of its associated ECMAScript function.

An object is an arguments exotic object if its internal methods use the following implementations, with the ones not specified here using those found in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots). These methods are installed in [CreateMappedArgumentsObject](#sec-createmappedargumentsobject).

Note 1

While [CreateUnmappedArgumentsObject](#sec-createunmappedargumentsobject) is grouped into this clause, it creates an [ordinary object](#ordinary-object), not an [arguments exotic object](#arguments-exotic-object).

[Arguments exotic objects](#arguments-exotic-object) have the same internal slots as [ordinary objects](#ordinary-object). They also have a _\[\[ParameterMap\]\]_ internal slot. Ordinary arguments objects also have a _\[\[ParameterMap\]\]_ internal slot whose value is always undefined. For ordinary argument objects the _\[\[ParameterMap\]\]_ internal slot is only used by `Object.prototype.toString` ([20.1.3.6](#sec-object.prototype.tostring)) to identify them as such.

Note 2

The [integer-indexed](#integer-index) [data properties](#sec-object-type) of an [arguments exotic object](#arguments-exotic-object) whose numeric name values are less than the number of formal parameters of the corresponding [function object](#function-object) initially share their values with the corresponding argument bindings in the function's [execution context](#sec-execution-contexts). This means that changing the property changes the corresponding value of the argument binding and vice-versa. This correspondence is broken if such a property is deleted and then redefined or if the property is changed into an [accessor property](#sec-object-type). If the arguments object is an [ordinary object](#ordinary-object), the values of its properties are simply a copy of the arguments passed to the function and there is no dynamic linkage between the property values and the formal parameter values.

Note 3

The ParameterMap object and its property values are used as a device for specifying the arguments object correspondence to argument bindings. The ParameterMap object and the objects that are the values of its properties are not directly observable from ECMAScript code. An ECMAScript implementation does not need to actually create or use such objects to implement the specified semantics.

Note 4

Ordinary arguments objects define a non-configurable [accessor property](#sec-object-type) named "callee" which throws a TypeError exception on access. The "callee" property has a more specific meaning for [arguments exotic objects](#arguments-exotic-object), which are created only for some class of [non-strict functions](#non-strict-function). The definition of this property in the ordinary variant exists to ensure that it is not defined in any other manner by conforming ECMAScript implementations.

Note 5

ECMAScript implementations of [arguments exotic objects](#arguments-exotic-object) have historically contained an [accessor property](#sec-object-type) named "caller". Prior to ECMAScript 2017, this specification included the definition of a throwing "caller" property on ordinary arguments objects. Since implementations do not contain this extension any longer, ECMAScript 2017 dropped the requirement for a throwing "caller" accessor.


# 10.4.4.1 _\[\[GetOwnProperty\]\]_ ( _P_ )

The _\[\[GetOwnProperty\]\]_ internal method of an [arguments exotic object](#arguments-exotic-object) _args_ takes argument _P_ (a [property key](#property-key)) and returns a [normal completion containing](#sec-completion-record-specification-type) either a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined. It performs the following steps when called:

1.  Let _desc_ be [OrdinaryGetOwnProperty](#sec-ordinarygetownproperty)(_args_, _P_).
2.  If _desc_ is undefined, return undefined.
3.  Let _map_ be _args_._\[\[ParameterMap\]\]_.
4.  Let _isMapped_ be ! [HasOwnProperty](#sec-hasownproperty)(_map_, _P_).
5.  If _isMapped_ is true, then
    1.  Set _desc_._\[\[Value\]\]_ to ! [Get](#sec-get-o-p)(_map_, _P_).
6.  Return _desc_.


# 10.4.4.2 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

The _\[\[DefineOwnProperty\]\]_ internal method of an [arguments exotic object](#arguments-exotic-object) _args_ takes arguments _P_ (a [property key](#property-key)) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  Let _map_ be _args_._\[\[ParameterMap\]\]_.
2.  Let _isMapped_ be ! [HasOwnProperty](#sec-hasownproperty)(_map_, _P_).
3.  Let _newArgDesc_ be _Desc_.
4.  If _isMapped_ is true and [IsDataDescriptor](#sec-isdatadescriptor)(_Desc_) is true, then
    1.  If _Desc_ does not have a _\[\[Value\]\]_ field, _Desc_ has a _\[\[Writable\]\]_ field, and _Desc_._\[\[Writable\]\]_ is false, then
        1.  Set _newArgDesc_ to a copy of _Desc_.
        2.  Set _newArgDesc_._\[\[Value\]\]_ to ! [Get](#sec-get-o-p)(_map_, _P_).
5.  Let _allowed_ be ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_args_, _P_, _newArgDesc_).
6.  If _allowed_ is false, return false.
7.  If _isMapped_ is true, then
    1.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_Desc_) is true, then
        1.  Perform ! _map_._\[\[Delete\]\]_(_P_).
    2.  Else,
        1.  If _Desc_ has a _\[\[Value\]\]_ field, then
            1.  [Assert](#assert): The following Set will succeed, since formal parameters mapped by arguments objects are always writable.
            2.  Perform ! [Set](#sec-set-o-p-v-throw)(_map_, _P_, _Desc_._\[\[Value\]\]_, false).
        2.  If _Desc_ has a _\[\[Writable\]\]_ field and _Desc_._\[\[Writable\]\]_ is false, then
            1.  Perform ! _map_._\[\[Delete\]\]_(_P_).
8.  Return true.


# 10.4.4.3 _\[\[Get\]\]_ ( _P_, _Receiver_ )

The _\[\[Get\]\]_ internal method of an [arguments exotic object](#arguments-exotic-object) _args_ takes arguments _P_ (a [property key](#property-key)) and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _map_ be _args_._\[\[ParameterMap\]\]_.
2.  Let _isMapped_ be ! [HasOwnProperty](#sec-hasownproperty)(_map_, _P_).
3.  If _isMapped_ is false, then
    1.  Return ? [OrdinaryGet](#sec-ordinaryget)(_args_, _P_, _Receiver_).
4.  Else,
    1.  [Assert](#assert): _map_ contains a formal parameter mapping for _P_.
    2.  Return ! [Get](#sec-get-o-p)(_map_, _P_).


# 10.4.4.4 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )

The _\[\[Set\]\]_ internal method of an [arguments exotic object](#arguments-exotic-object) _args_ takes arguments _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If [SameValue](#sec-samevalue)(_args_, _Receiver_) is false, then
    1.  Let _isMapped_ be false.
2.  Else,
    1.  Let _map_ be _args_._\[\[ParameterMap\]\]_.
    2.  Let _isMapped_ be ! [HasOwnProperty](#sec-hasownproperty)(_map_, _P_).
3.  If _isMapped_ is true, then
    1.  [Assert](#assert): The following Set will succeed, since formal parameters mapped by arguments objects are always writable.
    2.  Perform ! [Set](#sec-set-o-p-v-throw)(_map_, _P_, _V_, false).
4.  Return ? [OrdinarySet](#sec-ordinaryset)(_args_, _P_, _V_, _Receiver_).


# 10.4.4.5 _\[\[Delete\]\]_ ( _P_ )

The _\[\[Delete\]\]_ internal method of an [arguments exotic object](#arguments-exotic-object) _args_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _map_ be _args_._\[\[ParameterMap\]\]_.
2.  Let _isMapped_ be ! [HasOwnProperty](#sec-hasownproperty)(_map_, _P_).
3.  Let _result_ be ? [OrdinaryDelete](#sec-ordinarydelete)(_args_, _P_).
4.  If _result_ is true and _isMapped_ is true, then
    1.  Perform ! _map_._\[\[Delete\]\]_(_P_).
5.  Return _result_.


# 10.4.4.6 CreateUnmappedArgumentsObject ( _argumentsList_ )

The abstract operation CreateUnmappedArgumentsObject takes argument _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns an [ordinary object](#ordinary-object). It performs the following steps when called:

1.  Let _len_ be the number of elements in _argumentsList_.
2.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object), « _\[\[ParameterMap\]\]_ »).
3.  Set _obj_._\[\[ParameterMap\]\]_ to undefined.
4.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_obj_, "length", PropertyDescriptor { _\[\[Value\]\]_: [𝔽](#𝔽)(_len_), _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
5.  Let _index_ be 0.
6.  Repeat, while _index_ < _len_,
    1.  Let _val_ be _argumentsList_\[_index_\].
    2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_index_)), _val_).
    3.  Set _index_ to _index_ + 1.
7.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_obj_, [%Symbol.iterator%](#sec-well-known-symbols), PropertyDescriptor { _\[\[Value\]\]_: %Array.prototype.values%, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
8.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_obj_, "callee", PropertyDescriptor { _\[\[Get\]\]_: [%ThrowTypeError%](#sec-%throwtypeerror%), _\[\[Set\]\]_: [%ThrowTypeError%](#sec-%throwtypeerror%), _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
9.  Return _obj_.


# 10.4.4.7 CreateMappedArgumentsObject ( _func_, _formals_, _argumentsList_, _env_ )

The abstract operation CreateMappedArgumentsObject takes arguments _func_ (an Object), _formals_ (a [Parse Node](#sec-syntactic-grammar)), _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)), and _env_ (an [Environment Record](#sec-environment-records)) and returns an [arguments exotic object](#arguments-exotic-object). It performs the following steps when called:

1.  [Assert](#assert): _formals_ does not contain a rest parameter, any binding patterns, or any initializers. It may contain duplicate identifiers.
2.  Let _len_ be the number of elements in _argumentsList_.
3.  Let _obj_ be [MakeBasicObject](#sec-makebasicobject)(« _\[\[Prototype\]\]_, _\[\[Extensible\]\]_, _\[\[ParameterMap\]\]_ »).
4.  Set _obj_._\[\[GetOwnProperty\]\]_ as specified in [10.4.4.1](#sec-arguments-exotic-objects-getownproperty-p).
5.  Set _obj_._\[\[DefineOwnProperty\]\]_ as specified in [10.4.4.2](#sec-arguments-exotic-objects-defineownproperty-p-desc).
6.  Set _obj_._\[\[Get\]\]_ as specified in [10.4.4.3](#sec-arguments-exotic-objects-get-p-receiver).
7.  Set _obj_._\[\[Set\]\]_ as specified in [10.4.4.4](#sec-arguments-exotic-objects-set-p-v-receiver).
8.  Set _obj_._\[\[Delete\]\]_ as specified in [10.4.4.5](#sec-arguments-exotic-objects-delete-p).
9.  Set _obj_._\[\[Prototype\]\]_ to [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
10.  Let _map_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(null).
11.  Set _obj_._\[\[ParameterMap\]\]_ to _map_.
12.  Let _parameterNames_ be the [BoundNames](#sec-static-semantics-boundnames) of _formals_.
13.  Let _numberOfParameters_ be the number of elements in _parameterNames_.
14.  Let _index_ be 0.
15.  Repeat, while _index_ < _len_,
     1.  Let _val_ be _argumentsList_\[_index_\].
     2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_index_)), _val_).
     3.  Set _index_ to _index_ + 1.
16.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_obj_, "length", PropertyDescriptor { _\[\[Value\]\]_: [𝔽](#𝔽)(_len_), _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
17.  Let _mappedNames_ be a new empty [List](#sec-list-and-record-specification-type).
18.  Set _index_ to _numberOfParameters_ - 1.
19.  Repeat, while _index_ ≥ 0,
     1.  Let _name_ be _parameterNames_\[_index_\].
     2.  If _mappedNames_ does not contain _name_, then
         1.  Append _name_ to _mappedNames_.
         2.  If _index_ < _len_, then
             1.  Let _g_ be [MakeArgGetter](#sec-makearggetter)(_name_, _env_).
             2.  Let _p_ be [MakeArgSetter](#sec-makeargsetter)(_name_, _env_).
             3.  Perform ! _map_._\[\[DefineOwnProperty\]\]_(! [ToString](#sec-tostring)([𝔽](#𝔽)(_index_)), PropertyDescriptor { _\[\[Set\]\]_: _p_, _\[\[Get\]\]_: _g_, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
     3.  Set _index_ to _index_ - 1.
20.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_obj_, [%Symbol.iterator%](#sec-well-known-symbols), PropertyDescriptor { _\[\[Value\]\]_: %Array.prototype.values%, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
21.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_obj_, "callee", PropertyDescriptor { _\[\[Value\]\]_: _func_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }).
22.  Return _obj_.


# 10.4.4.7.1 MakeArgGetter ( _name_, _env_ )

The abstract operation MakeArgGetter takes arguments _name_ (a String) and _env_ (an [Environment Record](#sec-environment-records)) and returns a [function object](#function-object). It creates a built-in [function object](#function-object) that when executed returns the value bound for _name_ in _env_. It performs the following steps when called:

1.  Let _getterClosure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _name_ and _env_ and performs the following steps when called:
    1.  Return [NormalCompletion](#sec-normalcompletion)(! _env_.GetBindingValue(_name_, false)).
2.  Let _getter_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_getterClosure_, 0, "", « »).
3.  NOTE: _getter_ is never directly accessible to ECMAScript code.
4.  Return _getter_.


# 10.4.4.7.2 MakeArgSetter ( _name_, _env_ )

The abstract operation MakeArgSetter takes arguments _name_ (a String) and _env_ (an [Environment Record](#sec-environment-records)) and returns a [function object](#function-object). It creates a built-in [function object](#function-object) that when executed sets the value bound for _name_ in _env_. It performs the following steps when called:

1.  Let _setterClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_value_) that captures _name_ and _env_ and performs the following steps when called:
    1.  Return [NormalCompletion](#sec-normalcompletion)(! _env_.SetMutableBinding(_name_, _value_, false)).
2.  Let _setter_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_setterClosure_, 1, "", « »).
3.  NOTE: _setter_ is never directly accessible to ECMAScript code.
4.  Return _setter_.


# 10.4.5 TypedArray Exotic Objects

A [TypedArray](#typedarray) is an [exotic object](#exotic-object) that performs special handling of [property keys](#property-key) that are [canonical numeric strings](#sec-canonicalnumericindexstring), using the subset that are in-bounds [integer indices](#integer-index) to index elements of uniform type and enforcing the invariant that the remainder are absent without incurring prototype chain traversal.

Note

Because [ToString](#sec-tostring)(_n_) for any Number _n_ is a [canonical numeric string](#sec-canonicalnumericindexstring), an implementation may treat Numbers as [property keys](#property-key) for [TypedArrays](#typedarray) without actually performing the string conversion.

[TypedArrays](#typedarray) have the same internal slots as [ordinary objects](#ordinary-object) and additionally _\[\[ViewedArrayBuffer\]\]_, _\[\[TypedArrayName\]\]_, _\[\[ContentType\]\]_, _\[\[ByteLength\]\]_, _\[\[ByteOffset\]\]_, and _\[\[ArrayLength\]\]_ internal slots.

An object is a TypedArray if its _\[\[PreventExtensions\]\]_, _\[\[GetOwnProperty\]\]_, _\[\[HasProperty\]\]_, _\[\[DefineOwnProperty\]\]_, _\[\[Get\]\]_, _\[\[Set\]\]_, _\[\[Delete\]\]_, and _\[\[OwnPropertyKeys\]\]_, internal methods use the definitions in this section, and its other essential internal methods use the definitions found in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots). These methods are installed by [TypedArrayCreate](#sec-typedarraycreate).


# 10.4.5.1 _\[\[PreventExtensions\]\]_ ( )

The _\[\[PreventExtensions\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  NOTE: The extensibility-related invariants specified in [6.1.7.3](#sec-invariants-of-the-essential-internal-methods) do not allow this method to return true when _O_ can gain (or lose and then regain) properties, which might occur for properties with [integer index](#integer-index) names when its underlying buffer is resized.
2.  If [IsTypedArrayFixedLength](#sec-istypedarrayfixedlength)(_O_) is false, return false.
3.  Return [OrdinaryPreventExtensions](#sec-ordinarypreventextensions)(_O_).


# 10.4.5.2 _\[\[GetOwnProperty\]\]_ ( _P_ )

The _\[\[GetOwnProperty\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes argument _P_ (a [property key](#property-key)) and returns a [normal completion containing](#sec-completion-record-specification-type) either a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined. It performs the following steps when called:

1.  If _P_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _numericIndex_ be [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_P_).
    2.  If _numericIndex_ is not undefined, then
        1.  Let _value_ be [TypedArrayGetElement](#sec-typedarraygetelement)(_O_, _numericIndex_).
        2.  If _value_ is undefined, return undefined.
        3.  Return the PropertyDescriptor { _\[\[Value\]\]_: _value_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: true }.
2.  Return [OrdinaryGetOwnProperty](#sec-ordinarygetownproperty)(_O_, _P_).


# 10.4.5.3 _\[\[HasProperty\]\]_ ( _P_ )

The _\[\[HasProperty\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _numericIndex_ be [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_P_).
    2.  If _numericIndex_ is not undefined, return [IsValidIntegerIndex](#sec-isvalidintegerindex)(_O_, _numericIndex_).
2.  Return ? [OrdinaryHasProperty](#sec-ordinaryhasproperty)(_O_, _P_).


# 10.4.5.4 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

The _\[\[DefineOwnProperty\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes arguments _P_ (a [property key](#property-key)) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _numericIndex_ be [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_P_).
    2.  If _numericIndex_ is not undefined, then
        1.  If [IsValidIntegerIndex](#sec-isvalidintegerindex)(_O_, _numericIndex_) is false, return false.
        2.  If _Desc_ has a _\[\[Configurable\]\]_ field and _Desc_._\[\[Configurable\]\]_ is false, return false.
        3.  If _Desc_ has an _\[\[Enumerable\]\]_ field and _Desc_._\[\[Enumerable\]\]_ is false, return false.
        4.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_Desc_) is true, return false.
        5.  If _Desc_ has a _\[\[Writable\]\]_ field and _Desc_._\[\[Writable\]\]_ is false, return false.
        6.  If _Desc_ has a _\[\[Value\]\]_ field, perform ? [TypedArraySetElement](#sec-typedarraysetelement)(_O_, _numericIndex_, _Desc_._\[\[Value\]\]_).
        7.  Return true.
2.  Return ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_O_, _P_, _Desc_).


# 10.4.5.5 _\[\[Get\]\]_ ( _P_, _Receiver_ )

The _\[\[Get\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes arguments _P_ (a [property key](#property-key)) and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _numericIndex_ be [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_P_).
    2.  If _numericIndex_ is not undefined, then
        1.  Return [TypedArrayGetElement](#sec-typedarraygetelement)(_O_, _numericIndex_).
2.  Return ? [OrdinaryGet](#sec-ordinaryget)(_O_, _P_, _Receiver_).


# 10.4.5.6 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )

The _\[\[Set\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes arguments _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _numericIndex_ be [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_P_).
    2.  If _numericIndex_ is not undefined, then
        1.  If [SameValue](#sec-samevalue)(_O_, _Receiver_) is true, then
            1.  Perform ? [TypedArraySetElement](#sec-typedarraysetelement)(_O_, _numericIndex_, _V_).
            2.  Return true.
        2.  If [IsValidIntegerIndex](#sec-isvalidintegerindex)(_O_, _numericIndex_) is false, return true.
2.  Return ? [OrdinarySet](#sec-ordinaryset)(_O_, _P_, _V_, _Receiver_).


# 10.4.5.7 _\[\[Delete\]\]_ ( _P_ )

The _\[\[Delete\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes argument _P_ (a [property key](#property-key)) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  If _P_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  Let _numericIndex_ be [CanonicalNumericIndexString](#sec-canonicalnumericindexstring)(_P_).
    2.  If _numericIndex_ is not undefined, then
        1.  If [IsValidIntegerIndex](#sec-isvalidintegerindex)(_O_, _numericIndex_) is false, return true; else return false.
2.  Return ! [OrdinaryDelete](#sec-ordinarydelete)(_O_, _P_).


# 10.4.5.8 _\[\[OwnPropertyKeys\]\]_ ( )

The _\[\[OwnPropertyKeys\]\]_ internal method of a [TypedArray](#typedarray) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key). It performs the following steps when called:

1.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
2.  Let _keys_ be a new empty [List](#sec-list-and-record-specification-type).
3.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is false, then
    1.  Let _length_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
    2.  For each [integer](#integer) _i_ such that 0 ≤ _i_ < _length_, in ascending order, do
        1.  Append ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_)) to _keys_.
4.  For each own [property key](#property-key) _P_ of _O_ such that _P_ [is a String](#sec-ecmascript-language-types-string-type) and _P_ is not an [integer index](#integer-index), in ascending chronological order of property creation, do
    1.  Append _P_ to _keys_.
5.  For each own [property key](#property-key) _P_ of _O_ such that _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), in ascending chronological order of property creation, do
    1.  Append _P_ to _keys_.
6.  Return _keys_.


# 10.4.5.9 TypedArray With Buffer Witness Records

An TypedArray With Buffer Witness Record is a [Record](#sec-list-and-record-specification-type) value used to encapsulate a [TypedArray](#typedarray) along with a cached byte length of the viewed buffer. It is used to help ensure there is a single [ReadSharedMemory](#sec-memory-model-fundamentals) event of the byte length data block when the viewed buffer is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).

TypedArray With Buffer Witness Records have the fields listed in [Table 30](#table-typedarray-with-buffer-witness-record-fields).

Table 30: [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Object]]</var></td><td>a <emu-xref href="#typedarray" id="_ref_5282"><a href="#typedarray">TypedArray</a></emu-xref></td><td>The <emu-xref href="#typedarray" id="_ref_5283"><a href="#typedarray">TypedArray</a></emu-xref> whose buffer's byte length is loaded.</td></tr><tr><td><var class="field">[[CachedBufferByteLength]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_5284"><a href="#integer">integer</a></emu-xref> or <emu-const>detached</emu-const></td><td>The byte length of the object's <var class="field">[[ViewedArrayBuffer]]</var> when the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_5285"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> was created.</td></tr></tbody></table>


# 10.4.5.10 MakeTypedArrayWithBufferWitnessRecord ( _obj_, _order_ )

The abstract operation MakeTypedArrayWithBufferWitnessRecord takes arguments _obj_ (a [TypedArray](#typedarray)) and _order_ (seq-cst or unordered) and returns a [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records). It performs the following steps when called:

1.  Let _buffer_ be _obj_._\[\[ViewedArrayBuffer\]\]_.
2.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_buffer_) is true, then
    1.  Let _byteLength_ be detached.
3.  Else,
    1.  Let _byteLength_ be [ArrayBufferByteLength](#sec-arraybufferbytelength)(_buffer_, _order_).
4.  Return the [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records) { _\[\[Object\]\]_: _obj_, _\[\[CachedBufferByteLength\]\]_: _byteLength_ }.


# 10.4.5.11 TypedArrayCreate ( _prototype_ )

The abstract operation TypedArrayCreate takes argument _prototype_ (an Object) and returns a [TypedArray](#typedarray). It is used to specify the creation of new [TypedArrays](#typedarray). It performs the following steps when called:

1.  Let _internalSlotsList_ be « _\[\[Prototype\]\]_, _\[\[Extensible\]\]_, _\[\[ViewedArrayBuffer\]\]_, _\[\[TypedArrayName\]\]_, _\[\[ContentType\]\]_, _\[\[ByteLength\]\]_, _\[\[ByteOffset\]\]_, _\[\[ArrayLength\]\]_ ».
2.  Let _A_ be [MakeBasicObject](#sec-makebasicobject)(_internalSlotsList_).
3.  Set _A_._\[\[PreventExtensions\]\]_ as specified in [10.4.5.1](#sec-typedarray-preventextensions).
4.  Set _A_._\[\[GetOwnProperty\]\]_ as specified in [10.4.5.2](#sec-typedarray-getownproperty).
5.  Set _A_._\[\[HasProperty\]\]_ as specified in [10.4.5.3](#sec-typedarray-hasproperty).
6.  Set _A_._\[\[DefineOwnProperty\]\]_ as specified in [10.4.5.4](#sec-typedarray-defineownproperty).
7.  Set _A_._\[\[Get\]\]_ as specified in [10.4.5.5](#sec-typedarray-get).
8.  Set _A_._\[\[Set\]\]_ as specified in [10.4.5.6](#sec-typedarray-set).
9.  Set _A_._\[\[Delete\]\]_ as specified in [10.4.5.7](#sec-typedarray-delete).
10.  Set _A_._\[\[OwnPropertyKeys\]\]_ as specified in [10.4.5.8](#sec-typedarray-ownpropertykeys).
11.  Set _A_._\[\[Prototype\]\]_ to _prototype_.
12.  Return _A_.


# 10.4.5.12 TypedArrayByteLength ( _taRecord_ )

The abstract operation TypedArrayByteLength takes argument _taRecord_ (a [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records)) and returns a non-negative [integer](#integer). It performs the following steps when called:

1.  [Assert](#assert): [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is false.
2.  Let _O_ be _taRecord_._\[\[Object\]\]_.
3.  If _O_._\[\[ByteLength\]\]_ is not auto, return _O_._\[\[ByteLength\]\]_.
4.  Let _length_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
5.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
6.  NOTE: The returned byte length is always an [integer](#integer) multiple of _elementSize_, even when the underlying buffer has been resized to a non-[integer](#integer) multiple.
7.  Return _length_ × _elementSize_.


# 10.4.5.13 TypedArrayLength ( _taRecord_ )

The abstract operation TypedArrayLength takes argument _taRecord_ (a [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records)) and returns a non-negative [integer](#integer). It performs the following steps when called:

1.  [Assert](#assert): [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is false.
2.  Let _O_ be _taRecord_._\[\[Object\]\]_.
3.  If _O_._\[\[ArrayLength\]\]_ is not auto, return _O_._\[\[ArrayLength\]\]_.
4.  [Assert](#assert): [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_O_._\[\[ViewedArrayBuffer\]\]_) is false.
5.  Let _byteOffset_ be _O_._\[\[ByteOffset\]\]_.
6.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
7.  Let _byteLength_ be _taRecord_._\[\[CachedBufferByteLength\]\]_.
8.  [Assert](#assert): _byteLength_ is not detached.
9.  Return [floor](#eqn-floor)((_byteLength_ - _byteOffset_) / _elementSize_).


# 10.4.5.14 IsTypedArrayOutOfBounds ( _taRecord_ )

The abstract operation IsTypedArrayOutOfBounds takes argument _taRecord_ (a [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records)) and returns a Boolean. It checks if any of the object's numeric properties reference a value at an index not contained within the underlying buffer's bounds. It performs the following steps when called:

1.  Let _O_ be _taRecord_._\[\[Object\]\]_.
2.  Let _bufferByteLength_ be _taRecord_._\[\[CachedBufferByteLength\]\]_.
3.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_._\[\[ViewedArrayBuffer\]\]_) is true, then
    1.  [Assert](#assert): _bufferByteLength_ is detached.
    2.  Return true.
4.  [Assert](#assert): _bufferByteLength_ is a non-negative [integer](#integer).
5.  Let _byteOffsetStart_ be _O_._\[\[ByteOffset\]\]_.
6.  If _O_._\[\[ArrayLength\]\]_ is auto, then
    1.  Let _byteOffsetEnd_ be _bufferByteLength_.
7.  Else,
    1.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
    2.  Let _arrayByteLength_ be _O_._\[\[ArrayLength\]\]_ × _elementSize_.
    3.  Let _byteOffsetEnd_ be _byteOffsetStart_ + _arrayByteLength_.
8.  NOTE: A 0-length [TypedArray](#typedarray) whose _\[\[ByteOffset\]\]_ is _bufferByteLength_ is not considered out-of-bounds.
9.  If _byteOffsetStart_ > _bufferByteLength_ or _byteOffsetEnd_ > _bufferByteLength_, return true.
10.  Return false.


# 10.4.5.15 IsTypedArrayFixedLength ( _O_ )

The abstract operation IsTypedArrayFixedLength takes argument _O_ (a [TypedArray](#typedarray)) and returns a Boolean. It performs the following steps when called:

1.  If _O_._\[\[ArrayLength\]\]_ is auto, return false.
2.  Let _buffer_ be _O_._\[\[ViewedArrayBuffer\]\]_.
3.  If [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_buffer_) is false and [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_buffer_) is false, return false.
4.  Return true.


# 10.4.5.16 IsValidIntegerIndex ( _O_, _index_ )

The abstract operation IsValidIntegerIndex takes arguments _O_ (a [TypedArray](#typedarray)) and _index_ (a Number) and returns a Boolean. It performs the following steps when called:

1.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_._\[\[ViewedArrayBuffer\]\]_) is true, return false.
2.  If _index_ is not an [integral Number](#integral-number), return false.
3.  If _index_ is \-0<sub>𝔽</sub> or _index_ < \-0<sub>𝔽</sub>, return false.
4.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, unordered).
5.  NOTE: Bounds checking is not a synchronizing operation when _O_'s backing buffer is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).
6.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, return false.
7.  Let _length_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
8.  If [ℝ](#ℝ)(_index_) ≥ _length_, return false.
9.  Return true.


# 10.4.5.17 TypedArrayGetElement ( _O_, _index_ )

The abstract operation TypedArrayGetElement takes arguments _O_ (a [TypedArray](#typedarray)) and _index_ (a Number) and returns a Number, a BigInt, or undefined. It performs the following steps when called:

1.  If [IsValidIntegerIndex](#sec-isvalidintegerindex)(_O_, _index_) is false, return undefined.
2.  Let _offset_ be _O_._\[\[ByteOffset\]\]_.
3.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
4.  Let _byteIndexInBuffer_ be ([ℝ](#ℝ)(_index_) × _elementSize_) + _offset_.
5.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_O_).
6.  Return [GetValueFromBuffer](#sec-getvaluefrombuffer)(_O_._\[\[ViewedArrayBuffer\]\]_, _byteIndexInBuffer_, _elementType_, true, unordered).


# 10.4.5.18 TypedArraySetElement ( _O_, _index_, _value_ )

The abstract operation TypedArraySetElement takes arguments _O_ (a [TypedArray](#typedarray)), _index_ (a Number), and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _O_._\[\[ContentType\]\]_ is bigint, let _numValue_ be ? [ToBigInt](#sec-tobigint)(_value_).
2.  Otherwise, let _numValue_ be ? [ToNumber](#sec-tonumber)(_value_).
3.  If [IsValidIntegerIndex](#sec-isvalidintegerindex)(_O_, _index_) is true, then
    1.  Let _offset_ be _O_._\[\[ByteOffset\]\]_.
    2.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
    3.  Let _byteIndexInBuffer_ be ([ℝ](#ℝ)(_index_) × _elementSize_) + _offset_.
    4.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_O_).
    5.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_O_._\[\[ViewedArrayBuffer\]\]_, _byteIndexInBuffer_, _elementType_, _numValue_, true, unordered).
4.  Return unused.

Note

This operation always appears to succeed, but it has no effect when attempting to write past the end of a [TypedArray](#typedarray) or to a [TypedArray](#typedarray) which is backed by a detached ArrayBuffer.


# 10.4.5.19 IsArrayBufferViewOutOfBounds ( _O_ )

The abstract operation IsArrayBufferViewOutOfBounds takes argument _O_ (a [TypedArray](#typedarray) or a DataView) and returns a Boolean. It checks if either any of a [TypedArray](#typedarray)'s numeric properties or a DataView object's methods can reference a value at an index not contained within the underlying data block's bounds. This abstract operation exists as a convenience for upstream specifications. It performs the following steps when called:

1.  If _O_ has a _\[\[DataView\]\]_ internal slot, then
    1.  Let _viewRecord_ be [MakeDataViewWithBufferWitnessRecord](#sec-makedataviewwithbufferwitnessrecord)(_O_, seq-cst).
    2.  Return [IsViewOutOfBounds](#sec-isviewoutofbounds)(_viewRecord_).
2.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
3.  Return [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_).


# 10.4.6 Module Namespace Exotic Objects

A [module namespace exotic object](#module-namespace-exotic-object) is an [exotic object](#exotic-object) that exposes the bindings exported from an ECMAScript [Module](#prod-Module) (See [16.2.3](#sec-exports)). There is a one-to-one correspondence between the String-keyed own properties of a [module namespace exotic object](#module-namespace-exotic-object) and the binding names exported by the [Module](#prod-Module). The exported bindings include any bindings that are indirectly exported using `export *` export items. Each String-valued own [property key](#property-key) is the [StringValue](#sec-static-semantics-stringvalue) of the corresponding exported binding name. These are the only String-keyed properties of a [module namespace exotic object](#module-namespace-exotic-object). Each such property has the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: false }. [Module namespace exotic objects](#module-namespace-exotic-object) are not extensible.

An object is a module namespace exotic object if its _\[\[GetPrototypeOf\]\]_, _\[\[SetPrototypeOf\]\]_, _\[\[IsExtensible\]\]_, _\[\[PreventExtensions\]\]_, _\[\[GetOwnProperty\]\]_, _\[\[DefineOwnProperty\]\]_, _\[\[HasProperty\]\]_, _\[\[Get\]\]_, _\[\[Set\]\]_, _\[\[Delete\]\]_, and _\[\[OwnPropertyKeys\]\]_ internal methods use the definitions in this section, and its other essential internal methods use the definitions found in [10.1](#sec-ordinary-object-internal-methods-and-internal-slots). These methods are installed by [ModuleNamespaceCreate](#sec-modulenamespacecreate).

[Module namespace exotic objects](#module-namespace-exotic-object) have the internal slots defined in [Table 31](#table-internal-slots-of-module-namespace-exotic-objects).

Table 31: Internal Slots of Module Namespace Exotic Objects

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[Module]]</var></td><td>a <emu-xref href="#sec-abstract-module-records" id="_ref_5363"><a href="#sec-abstract-module-records">Module Record</a></emu-xref></td><td>The <emu-xref href="#sec-abstract-module-records" id="_ref_5364"><a href="#sec-abstract-module-records">Module Record</a></emu-xref> whose exports this namespace exposes.</td></tr><tr><td><var class="field">[[Exports]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_5365"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of Strings</td><td>A <emu-xref href="#sec-list-and-record-specification-type" id="_ref_5366"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> whose elements are the String values of the exported names exposed as own properties of this object. The list is sorted according to <emu-xref href="#lexicographic-code-unit-order" id="_ref_5367"><a href="#lexicographic-code-unit-order">lexicographic code unit order</a></emu-xref>.</td></tr></tbody></table>


# 10.4.6.1 _\[\[GetPrototypeOf\]\]_ ( )

The _\[\[GetPrototypeOf\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) null. It performs the following steps when called:

1.  Return null.


# 10.4.6.2 _\[\[SetPrototypeOf\]\]_ ( _V_ )

The _\[\[SetPrototypeOf\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) _O_ takes argument _V_ (an Object or null) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  Return ! [SetImmutablePrototype](#sec-set-immutable-prototype)(_O_, _V_).


# 10.4.6.3 _\[\[IsExtensible\]\]_ ( )

The _\[\[IsExtensible\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) false. It performs the following steps when called:

1.  Return false.


# 10.4.6.4 _\[\[PreventExtensions\]\]_ ( )

The _\[\[PreventExtensions\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) true. It performs the following steps when called:

1.  Return true.


# 10.4.6.5 _\[\[GetOwnProperty\]\]_ ( _P_ )

The _\[\[GetOwnProperty\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return [OrdinaryGetOwnProperty](#sec-ordinarygetownproperty)(_O_, _P_).
2.  Let _exports_ be _O_._\[\[Exports\]\]_.
3.  If _exports_ does not contain _P_, return undefined.
4.  Let _value_ be ? _O_._\[\[Get\]\]_(_P_, _O_).
5.  Return PropertyDescriptor { _\[\[Value\]\]_: _value_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: false }.


# 10.4.6.6 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

The _\[\[DefineOwnProperty\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) _O_ takes arguments _P_ (a [property key](#property-key)) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return ! [OrdinaryDefineOwnProperty](#sec-ordinarydefineownproperty)(_O_, _P_, _Desc_).
2.  Let _current_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
3.  If _current_ is undefined, return false.
4.  If _Desc_ has a _\[\[Configurable\]\]_ field and _Desc_._\[\[Configurable\]\]_ is true, return false.
5.  If _Desc_ has an _\[\[Enumerable\]\]_ field and _Desc_._\[\[Enumerable\]\]_ is false, return false.
6.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_Desc_) is true, return false.
7.  If _Desc_ has a _\[\[Writable\]\]_ field and _Desc_._\[\[Writable\]\]_ is false, return false.
8.  If _Desc_ has a _\[\[Value\]\]_ field, return [SameValue](#sec-samevalue)(_Desc_._\[\[Value\]\]_, _current_._\[\[Value\]\]_).
9.  Return true.


# 10.4.6.7 _\[\[HasProperty\]\]_ ( _P_ )

The _\[\[HasProperty\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  If _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return ! [OrdinaryHasProperty](#sec-ordinaryhasproperty)(_O_, _P_).
2.  Let _exports_ be _O_._\[\[Exports\]\]_.
3.  If _exports_ contains _P_, return true.
4.  Return false.


# 10.4.6.8 _\[\[Get\]\]_ ( _P_, _Receiver_ )

The _\[\[Get\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) _O_ takes arguments _P_ (a [property key](#property-key)) and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), then
    1.  Return ! [OrdinaryGet](#sec-ordinaryget)(_O_, _P_, _Receiver_).
2.  Let _exports_ be _O_._\[\[Exports\]\]_.
3.  If _exports_ does not contain _P_, return undefined.
4.  Let _m_ be _O_._\[\[Module\]\]_.
5.  Let _binding_ be _m_.ResolveExport(_P_).
6.  [Assert](#assert): _binding_ is a [ResolvedBinding Record](#resolvedbinding-record).
7.  Let _targetModule_ be _binding_._\[\[Module\]\]_.
8.  [Assert](#assert): _targetModule_ is not undefined.
9.  If _binding_._\[\[BindingName\]\]_ is namespace, then
    1.  Return [GetModuleNamespace](#sec-getmodulenamespace)(_targetModule_).
10.  Let _targetEnv_ be _targetModule_._\[\[Environment\]\]_.
11.  If _targetEnv_ is empty, throw a ReferenceError exception.
12.  Return ? _targetEnv_.GetBindingValue(_binding_._\[\[BindingName\]\]_, true).

Note

ResolveExport is side-effect free. Each time this operation is called with a specific _exportName_, _resolveSet_ pair as arguments it must return the same result. An implementation might choose to pre-compute or cache the ResolveExport results for the _\[\[Exports\]\]_ of each [module namespace exotic object](#module-namespace-exotic-object).


# 10.4.6.9 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )

The _\[\[Set\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) takes arguments _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a [normal completion containing](#sec-completion-record-specification-type) false. It performs the following steps when called:

1.  Return false.


# 10.4.6.10 _\[\[Delete\]\]_ ( _P_ )

The _\[\[Delete\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns a [normal completion containing](#sec-completion-record-specification-type) a Boolean. It performs the following steps when called:

1.  If _P_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), then
    1.  Return ! [OrdinaryDelete](#sec-ordinarydelete)(_O_, _P_).
2.  Let _exports_ be _O_._\[\[Exports\]\]_.
3.  If _exports_ contains _P_, return false.
4.  Return true.


# 10.4.6.11 _\[\[OwnPropertyKeys\]\]_ ( )

The _\[\[OwnPropertyKeys\]\]_ internal method of a [module namespace exotic object](#module-namespace-exotic-object) _O_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key). It performs the following steps when called:

1.  Let _exports_ be _O_._\[\[Exports\]\]_.
2.  Let _symbolKeys_ be [OrdinaryOwnPropertyKeys](#sec-ordinaryownpropertykeys)(_O_).
3.  Return the [list-concatenation](#list-concatenation) of _exports_ and _symbolKeys_.


# 10.4.6.12 ModuleNamespaceCreate ( _module_, _exports_ )

The abstract operation ModuleNamespaceCreate takes arguments _module_ (a [Module Record](#sec-abstract-module-records)) and _exports_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns a [module namespace exotic object](#module-namespace-exotic-object). It is used to specify the creation of new [module namespace exotic objects](#module-namespace-exotic-object). It performs the following steps when called:

1.  [Assert](#assert): _module_._\[\[Namespace\]\]_ is empty.
2.  Let _internalSlotsList_ be the internal slots listed in [Table 31](#table-internal-slots-of-module-namespace-exotic-objects).
3.  Let _M_ be [MakeBasicObject](#sec-makebasicobject)(_internalSlotsList_).
4.  Set _M_'s essential internal methods to the definitions specified in [10.4.6](#sec-module-namespace-exotic-objects).
5.  Set _M_._\[\[Module\]\]_ to _module_.
6.  Let _sortedExports_ be a [List](#sec-list-and-record-specification-type) whose elements are the elements of _exports_, sorted according to [lexicographic code unit order](#lexicographic-code-unit-order).
7.  Set _M_._\[\[Exports\]\]_ to _sortedExports_.
8.  Create own properties of _M_ corresponding to the definitions in [28.3](#sec-module-namespace-objects).
9.  Set _module_._\[\[Namespace\]\]_ to _M_.
10.  Return _M_.


# 10.4.7 Immutable Prototype Exotic Objects

An [immutable prototype exotic object](#immutable-prototype-exotic-object) is an [exotic object](#exotic-object) that has a _\[\[Prototype\]\]_ internal slot that will not change once it is initialized.

An object is an immutable prototype exotic object if its _\[\[SetPrototypeOf\]\]_ internal method uses the following implementation. (Its other essential internal methods may use any implementation, depending on the specific [immutable prototype exotic object](#immutable-prototype-exotic-object) in question.)

Note

Unlike other [exotic objects](#exotic-object), there is not a dedicated creation abstract operation provided for [immutable prototype exotic objects](#immutable-prototype-exotic-object). This is because they are only used by [%Object.prototype%](#sec-properties-of-the-object-prototype-object) and by [host environments](#host-environment), and in [host environments](#host-environment), the relevant objects are potentially exotic in other ways and thus need their own dedicated creation operation.


# 10.4.7.1 _\[\[SetPrototypeOf\]\]_ ( _V_ )

The _\[\[SetPrototypeOf\]\]_ internal method of an [immutable prototype exotic object](#immutable-prototype-exotic-object) _O_ takes argument _V_ (an Object or null) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Return ? [SetImmutablePrototype](#sec-set-immutable-prototype)(_O_, _V_).


# 10.4.7.2 SetImmutablePrototype ( _O_, _V_ )

The abstract operation SetImmutablePrototype takes arguments _O_ (an Object) and _V_ (an Object or null) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _current_ be ? _O_._\[\[GetPrototypeOf\]\]_().
2.  If [SameValue](#sec-samevalue)(_V_, _current_) is true, return true.
3.  Return false.


# 10.5 Proxy Object Internal Methods and Internal Slots

A Proxy object is an [exotic object](#exotic-object) whose essential internal methods are partially implemented using ECMAScript code. Every Proxy object has an internal slot called _\[\[ProxyHandler\]\]_. The value of _\[\[ProxyHandler\]\]_ is an object, called the proxy's *handler object*, or null. Methods (see [Table 32](#table-proxy-handler-methods)) of a handler object may be used to augment the implementation for one or more of the Proxy object's internal methods. Every Proxy object also has an internal slot called _\[\[ProxyTarget\]\]_ whose value is either an object or null. This object is called the proxy's *target object*.

An object is a Proxy exotic object if its essential internal methods (including _\[\[Call\]\]_ and _\[\[Construct\]\]_, if applicable) use the definitions in this section. These internal methods are installed in [ProxyCreate](#sec-proxycreate).

Table 32: Proxy Handler Methods

<table><thead><tr><th>Internal Method</th><th>Handler Method</th></tr></thead><tbody><tr><td><var class="field">[[GetPrototypeOf]]</var></td><td><code>getPrototypeOf</code></td></tr><tr><td><var class="field">[[SetPrototypeOf]]</var></td><td><code>setPrototypeOf</code></td></tr><tr><td><var class="field">[[IsExtensible]]</var></td><td><code>isExtensible</code></td></tr><tr><td><var class="field">[[PreventExtensions]]</var></td><td><code>preventExtensions</code></td></tr><tr><td><var class="field">[[GetOwnProperty]]</var></td><td><code>getOwnPropertyDescriptor</code></td></tr><tr><td><var class="field">[[DefineOwnProperty]]</var></td><td><code>defineProperty</code></td></tr><tr><td><var class="field">[[HasProperty]]</var></td><td><code>has</code></td></tr><tr><td><var class="field">[[Get]]</var></td><td><code>get</code></td></tr><tr><td><var class="field">[[Set]]</var></td><td><code>set</code></td></tr><tr><td><var class="field">[[Delete]]</var></td><td><code>deleteProperty</code></td></tr><tr><td><var class="field">[[OwnPropertyKeys]]</var></td><td><code>ownKeys</code></td></tr><tr><td><var class="field">[[Call]]</var></td><td><code>apply</code></td></tr><tr><td><var class="field">[[Construct]]</var></td><td><code>construct</code></td></tr></tbody></table>

When a handler method is called to provide the implementation of a Proxy object internal method, the handler method is passed the proxy's target object as a parameter. A proxy's handler object does not necessarily have a method corresponding to every essential internal method. Invoking an internal method on the proxy results in the invocation of the corresponding internal method on the proxy's target object if the handler object does not have a method corresponding to the internal trap.

The _\[\[ProxyHandler\]\]_ and _\[\[ProxyTarget\]\]_ internal slots of a Proxy object are always initialized when the object is created and typically may not be modified. Some Proxy objects are created in a manner that permits them to be subsequently *revoked*. When a proxy is revoked, its _\[\[ProxyHandler\]\]_ and _\[\[ProxyTarget\]\]_ internal slots are set to null causing subsequent invocations of internal methods on that Proxy object to throw a TypeError exception.

Because Proxy objects permit the implementation of internal methods to be provided by arbitrary ECMAScript code, it is possible to define a Proxy object whose handler methods violates the invariants defined in [6.1.7.3](#sec-invariants-of-the-essential-internal-methods). Some of the internal method invariants defined in [6.1.7.3](#sec-invariants-of-the-essential-internal-methods) are essential integrity invariants. These invariants are explicitly enforced by the Proxy object internal methods specified in this section. An ECMAScript implementation must be robust in the presence of all possible invariant violations.

In the following algorithm descriptions, assume _O_ is an ECMAScript Proxy object, _P_ is a [property key](#property-key) value, _V_ is any [ECMAScript language value](#sec-ecmascript-language-types) and _Desc_ is a [Property Descriptor](#sec-property-descriptor-specification-type) record.


# 10.5.1 _\[\[GetPrototypeOf\]\]_ ( )

The _\[\[GetPrototypeOf\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) either an Object or null, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "getPrototypeOf").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[GetPrototypeOf\]\]_().
7.  Let _handlerProto_ be ? [Call](#sec-call)(_trap_, _handler_, « _target_ »).
8.  If _handlerProto_ [is not an Object](#sec-object-type) and _handlerProto_ is not null, throw a TypeError exception.
9.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
10.  If _extensibleTarget_ is true, return _handlerProto_.
11.  Let _targetProto_ be ? _target_._\[\[GetPrototypeOf\]\]_().
12.  If [SameValue](#sec-samevalue)(_handlerProto_, _targetProto_) is false, throw a TypeError exception.
13.  Return _handlerProto_.

Note

_\[\[GetPrototypeOf\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[GetPrototypeOf\]\]_ must be either an Object or null.
-   If the target object is not extensible, _\[\[GetPrototypeOf\]\]_ applied to the Proxy object must return the same value as _\[\[GetPrototypeOf\]\]_ applied to the Proxy object's target object.


# 10.5.2 _\[\[SetPrototypeOf\]\]_ ( _V_ )

The _\[\[SetPrototypeOf\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes argument _V_ (an Object or null) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "setPrototypeOf").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[SetPrototypeOf\]\]_(_V_).
7.  Let _booleanTrapResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_trap_, _handler_, « _target_, _V_ »)).
8.  If _booleanTrapResult_ is false, return false.
9.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
10.  If _extensibleTarget_ is true, return true.
11.  Let _targetProto_ be ? _target_._\[\[GetPrototypeOf\]\]_().
12.  If [SameValue](#sec-samevalue)(_V_, _targetProto_) is false, throw a TypeError exception.
13.  Return true.

Note

_\[\[SetPrototypeOf\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[SetPrototypeOf\]\]_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) value.
-   If the target object is not extensible, the argument value must be the same as the result of _\[\[GetPrototypeOf\]\]_ applied to target object.


# 10.5.3 _\[\[IsExtensible\]\]_ ( )

The _\[\[IsExtensible\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "isExtensible").
6.  If _trap_ is undefined, then
    1.  Return ? [IsExtensible](#sec-isextensible-o)(_target_).
7.  Let _booleanTrapResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_trap_, _handler_, « _target_ »)).
8.  Let _targetResult_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
9.  If _booleanTrapResult_ is not _targetResult_, throw a TypeError exception.
10.  Return _booleanTrapResult_.

Note

_\[\[IsExtensible\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[IsExtensible\]\]_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) value.
-   _\[\[IsExtensible\]\]_ applied to the Proxy object must return the same value as _\[\[IsExtensible\]\]_ applied to the Proxy object's target object with the same argument.


# 10.5.4 _\[\[PreventExtensions\]\]_ ( )

The _\[\[PreventExtensions\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "preventExtensions").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[PreventExtensions\]\]_().
7.  Let _booleanTrapResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_trap_, _handler_, « _target_ »)).
8.  If _booleanTrapResult_ is true, then
    1.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
    2.  If _extensibleTarget_ is true, throw a TypeError exception.
9.  Return _booleanTrapResult_.

Note

_\[\[PreventExtensions\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[PreventExtensions\]\]_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) value.
-   _\[\[PreventExtensions\]\]_ applied to the Proxy object only returns true if _\[\[IsExtensible\]\]_ applied to the Proxy object's target object is false.


# 10.5.5 _\[\[GetOwnProperty\]\]_ ( _P_ )

The _\[\[GetOwnProperty\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a [Property Descriptor](#sec-property-descriptor-specification-type) or undefined, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "getOwnPropertyDescriptor").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[GetOwnProperty\]\]_(_P_).
7.  Let _trapResultObj_ be ? [Call](#sec-call)(_trap_, _handler_, « _target_, _P_ »).
8.  If _trapResultObj_ [is not an Object](#sec-object-type) and _trapResultObj_ is not undefined, throw a TypeError exception.
9.  Let _targetDesc_ be ? _target_._\[\[GetOwnProperty\]\]_(_P_).
10.  If _trapResultObj_ is undefined, then
     1.  If _targetDesc_ is undefined, return undefined.
     2.  If _targetDesc_._\[\[Configurable\]\]_ is false, throw a TypeError exception.
     3.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
     4.  If _extensibleTarget_ is false, throw a TypeError exception.
     5.  Return undefined.
11.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
12.  Let _resultDesc_ be ? [ToPropertyDescriptor](#sec-topropertydescriptor)(_trapResultObj_).
13.  Perform [CompletePropertyDescriptor](#sec-completepropertydescriptor)(_resultDesc_).
14.  Let _valid_ be [IsCompatiblePropertyDescriptor](#sec-iscompatiblepropertydescriptor)(_extensibleTarget_, _resultDesc_, _targetDesc_).
15.  If _valid_ is false, throw a TypeError exception.
16.  If _resultDesc_._\[\[Configurable\]\]_ is false, then
     1.  If _targetDesc_ is undefined or _targetDesc_._\[\[Configurable\]\]_ is true, then
         1.  Throw a TypeError exception.
     2.  If _resultDesc_ has a _\[\[Writable\]\]_ field and _resultDesc_._\[\[Writable\]\]_ is false, then
         1.  [Assert](#assert): _targetDesc_ has a _\[\[Writable\]\]_ field.
         2.  If _targetDesc_._\[\[Writable\]\]_ is true, throw a TypeError exception.
17.  Return _resultDesc_.

Note

_\[\[GetOwnProperty\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[GetOwnProperty\]\]_ must be either an Object or undefined.
-   A property cannot be reported as non-existent, if it exists as a non-configurable own property of the target object.
-   A property cannot be reported as non-existent, if it exists as an own property of a non-extensible target object.
-   A property cannot be reported as existent, if it does not exist as an own property of the target object and the target object is not extensible.
-   A property cannot be reported as non-configurable, unless it exists as a non-configurable own property of the target object.
-   A property cannot be reported as both non-configurable and non-writable, unless it exists as a non-configurable, non-writable own property of the target object.


# 10.5.6 _\[\[DefineOwnProperty\]\]_ ( _P_, _Desc_ )

The _\[\[DefineOwnProperty\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes arguments _P_ (a [property key](#property-key)) and _Desc_ (a [Property Descriptor](#sec-property-descriptor-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "defineProperty").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[DefineOwnProperty\]\]_(_P_, _Desc_).
7.  Let _descObj_ be [FromPropertyDescriptor](#sec-frompropertydescriptor)(_Desc_).
8.  Let _booleanTrapResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_trap_, _handler_, « _target_, _P_, _descObj_ »)).
9.  If _booleanTrapResult_ is false, return false.
10.  Let _targetDesc_ be ? _target_._\[\[GetOwnProperty\]\]_(_P_).
11.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
12.  If _Desc_ has a _\[\[Configurable\]\]_ field and _Desc_._\[\[Configurable\]\]_ is false, then
     1.  Let _settingConfigFalse_ be true.
13.  Else,
     1.  Let _settingConfigFalse_ be false.
14.  If _targetDesc_ is undefined, then
     1.  If _extensibleTarget_ is false, throw a TypeError exception.
     2.  If _settingConfigFalse_ is true, throw a TypeError exception.
15.  Else,
     1.  If [IsCompatiblePropertyDescriptor](#sec-iscompatiblepropertydescriptor)(_extensibleTarget_, _Desc_, _targetDesc_) is false, throw a TypeError exception.
     2.  If _settingConfigFalse_ is true and _targetDesc_._\[\[Configurable\]\]_ is true, throw a TypeError exception.
     3.  If [IsDataDescriptor](#sec-isdatadescriptor)(_targetDesc_) is true, _targetDesc_._\[\[Configurable\]\]_ is false, and _targetDesc_._\[\[Writable\]\]_ is true, then
         1.  If _Desc_ has a _\[\[Writable\]\]_ field and _Desc_._\[\[Writable\]\]_ is false, throw a TypeError exception.
16.  Return true.

Note

_\[\[DefineOwnProperty\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[DefineOwnProperty\]\]_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) value.
-   A property cannot be added, if the target object is not extensible.
-   A property cannot be non-configurable, unless there exists a corresponding non-configurable own property of the target object.
-   A non-configurable property cannot be non-writable, unless there exists a corresponding non-configurable, non-writable own property of the target object.
-   If a property has a corresponding target object property then applying the [Property Descriptor](#sec-property-descriptor-specification-type) of the property to the target object using _\[\[DefineOwnProperty\]\]_ will not throw an exception.


# 10.5.7 _\[\[HasProperty\]\]_ ( _P_ )

The _\[\[HasProperty\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "has").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[HasProperty\]\]_(_P_).
7.  Let _booleanTrapResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_trap_, _handler_, « _target_, _P_ »)).
8.  If _booleanTrapResult_ is false, then
    1.  Let _targetDesc_ be ? _target_._\[\[GetOwnProperty\]\]_(_P_).
    2.  If _targetDesc_ is not undefined, then
        1.  If _targetDesc_._\[\[Configurable\]\]_ is false, throw a TypeError exception.
        2.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
        3.  If _extensibleTarget_ is false, throw a TypeError exception.
9.  Return _booleanTrapResult_.

Note

_\[\[HasProperty\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[HasProperty\]\]_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) value.
-   A property cannot be reported as non-existent, if it exists as a non-configurable own property of the target object.
-   A property cannot be reported as non-existent, if it exists as an own property of the target object and the target object is not extensible.


# 10.5.8 _\[\[Get\]\]_ ( _P_, _Receiver_ )

The _\[\[Get\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes arguments _P_ (a [property key](#property-key)) and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "get").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[Get\]\]_(_P_, _Receiver_).
7.  Let _trapResult_ be ? [Call](#sec-call)(_trap_, _handler_, « _target_, _P_, _Receiver_ »).
8.  Let _targetDesc_ be ? _target_._\[\[GetOwnProperty\]\]_(_P_).
9.  If _targetDesc_ is not undefined and _targetDesc_._\[\[Configurable\]\]_ is false, then
    1.  If [IsDataDescriptor](#sec-isdatadescriptor)(_targetDesc_) is true and _targetDesc_._\[\[Writable\]\]_ is false, then
        1.  If [SameValue](#sec-samevalue)(_trapResult_, _targetDesc_._\[\[Value\]\]_) is false, throw a TypeError exception.
    2.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_targetDesc_) is true and _targetDesc_._\[\[Get\]\]_ is undefined, then
        1.  If _trapResult_ is not undefined, throw a TypeError exception.
10.  Return _trapResult_.

Note

_\[\[Get\]\]_ for Proxy objects enforces the following invariants:

-   The value reported for a property must be the same as the value of the corresponding target object property if the target object property is a non-writable, non-configurable own [data property](#sec-object-type).
-   The value reported for a property must be undefined if the corresponding target object property is a non-configurable own [accessor property](#sec-object-type) that has undefined as its _\[\[Get\]\]_ attribute.


# 10.5.9 _\[\[Set\]\]_ ( _P_, _V_, _Receiver_ )

The _\[\[Set\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes arguments _P_ (a [property key](#property-key)), _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _Receiver_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "set").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[Set\]\]_(_P_, _V_, _Receiver_).
7.  Let _booleanTrapResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_trap_, _handler_, « _target_, _P_, _V_, _Receiver_ »)).
8.  If _booleanTrapResult_ is false, return false.
9.  Let _targetDesc_ be ? _target_._\[\[GetOwnProperty\]\]_(_P_).
10.  If _targetDesc_ is not undefined and _targetDesc_._\[\[Configurable\]\]_ is false, then
     1.  If [IsDataDescriptor](#sec-isdatadescriptor)(_targetDesc_) is true and _targetDesc_._\[\[Writable\]\]_ is false, then
         1.  If [SameValue](#sec-samevalue)(_V_, _targetDesc_._\[\[Value\]\]_) is false, throw a TypeError exception.
     2.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_targetDesc_) is true, then
         1.  If _targetDesc_._\[\[Set\]\]_ is undefined, throw a TypeError exception.
11.  Return true.

Note

_\[\[Set\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[Set\]\]_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) value.
-   Cannot change the value of a property to be different from the value of the corresponding target object property if the corresponding target object property is a non-writable, non-configurable own [data property](#sec-object-type).
-   Cannot set the value of a property if the corresponding target object property is a non-configurable own [accessor property](#sec-object-type) that has undefined as its _\[\[Set\]\]_ attribute.


# 10.5.10 _\[\[Delete\]\]_ ( _P_ )

The _\[\[Delete\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes argument _P_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "deleteProperty").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[Delete\]\]_(_P_).
7.  Let _booleanTrapResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_trap_, _handler_, « _target_, _P_ »)).
8.  If _booleanTrapResult_ is false, return false.
9.  Let _targetDesc_ be ? _target_._\[\[GetOwnProperty\]\]_(_P_).
10.  If _targetDesc_ is undefined, return true.
11.  If _targetDesc_._\[\[Configurable\]\]_ is false, throw a TypeError exception.
12.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
13.  If _extensibleTarget_ is false, throw a TypeError exception.
14.  Return true.

Note

_\[\[Delete\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[Delete\]\]_ [is a Boolean](#sec-ecmascript-language-types-boolean-type) value.
-   A property cannot be reported as deleted, if it exists as a non-configurable own property of the target object.
-   A property cannot be reported as deleted, if it exists as an own property of the target object and the target object is non-extensible.


# 10.5.11 _\[\[OwnPropertyKeys\]\]_ ( )

The _\[\[OwnPropertyKeys\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "ownKeys").
6.  If _trap_ is undefined, then
    1.  Return ? _target_._\[\[OwnPropertyKeys\]\]_().
7.  Let _trapResultArray_ be ? [Call](#sec-call)(_trap_, _handler_, « _target_ »).
8.  Let _trapResult_ be ? [CreateListFromArrayLike](#sec-createlistfromarraylike)(_trapResultArray_, property-key).
9.  If _trapResult_ contains any duplicate entries, throw a TypeError exception.
10.  Let _extensibleTarget_ be ? [IsExtensible](#sec-isextensible-o)(_target_).
11.  Let _targetKeys_ be ? _target_._\[\[OwnPropertyKeys\]\]_().
12.  [Assert](#assert): _targetKeys_ is a [List](#sec-list-and-record-specification-type) of [property keys](#property-key).
13.  [Assert](#assert): _targetKeys_ contains no duplicate entries.
14.  Let _targetConfigurableKeys_ be a new empty [List](#sec-list-and-record-specification-type).
15.  Let _targetNonconfigurableKeys_ be a new empty [List](#sec-list-and-record-specification-type).
16.  For each element _key_ of _targetKeys_, do
     1.  Let _desc_ be ? _target_._\[\[GetOwnProperty\]\]_(_key_).
     2.  If _desc_ is not undefined and _desc_._\[\[Configurable\]\]_ is false, then
         1.  Append _key_ to _targetNonconfigurableKeys_.
     3.  Else,
         1.  Append _key_ to _targetConfigurableKeys_.
17.  If _extensibleTarget_ is true and _targetNonconfigurableKeys_ is empty, then
     1.  Return _trapResult_.
18.  Let _uncheckedResultKeys_ be a [List](#sec-list-and-record-specification-type) whose elements are the elements of _trapResult_.
19.  For each element _key_ of _targetNonconfigurableKeys_, do
     1.  If _uncheckedResultKeys_ does not contain _key_, throw a TypeError exception.
     2.  Remove _key_ from _uncheckedResultKeys_.
20.  If _extensibleTarget_ is true, return _trapResult_.
21.  For each element _key_ of _targetConfigurableKeys_, do
     1.  If _uncheckedResultKeys_ does not contain _key_, throw a TypeError exception.
     2.  Remove _key_ from _uncheckedResultKeys_.
22.  If _uncheckedResultKeys_ is not empty, throw a TypeError exception.
23.  Return _trapResult_.

Note

_\[\[OwnPropertyKeys\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[OwnPropertyKeys\]\]_ is a [List](#sec-list-and-record-specification-type).
-   The returned [List](#sec-list-and-record-specification-type) contains no duplicate entries.
-   Each element of the returned [List](#sec-list-and-record-specification-type) is a [property key](#property-key).
-   The result [List](#sec-list-and-record-specification-type) must contain the keys of all non-configurable own properties of the target object.
-   If the target object is not extensible, then the result [List](#sec-list-and-record-specification-type) must contain all the keys of the own properties of the target object and no other values.


# 10.5.12 _\[\[Call\]\]_ ( _thisArgument_, _argumentsList_ )

The _\[\[Call\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes arguments _thisArgument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
4.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
5.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "apply").
6.  If _trap_ is undefined, then
    1.  Return ? [Call](#sec-call)(_target_, _thisArgument_, _argumentsList_).
7.  Let _argArray_ be [CreateArrayFromList](#sec-createarrayfromlist)(_argumentsList_).
8.  Return ? [Call](#sec-call)(_trap_, _handler_, « _target_, _thisArgument_, _argArray_ »).

Note

A [Proxy exotic object](#proxy-exotic-object) only has a _\[\[Call\]\]_ internal method if the initial value of its _\[\[ProxyTarget\]\]_ internal slot is an object that has a _\[\[Call\]\]_ internal method.


# 10.5.13 _\[\[Construct\]\]_ ( _argumentsList_, _newTarget_ )

The _\[\[Construct\]\]_ internal method of a [Proxy exotic object](#proxy-exotic-object) _O_ takes arguments _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and _newTarget_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [ValidateNonRevokedProxy](#sec-validatenonrevokedproxy)(_O_).
2.  Let _target_ be _O_._\[\[ProxyTarget\]\]_.
3.  [Assert](#assert): [IsConstructor](#sec-isconstructor)(_target_) is true.
4.  Let _handler_ be _O_._\[\[ProxyHandler\]\]_.
5.  [Assert](#assert): _handler_ [is an Object](#sec-object-type).
6.  Let _trap_ be ? [GetMethod](#sec-getmethod)(_handler_, "construct").
7.  If _trap_ is undefined, then
    1.  Return ? [Construct](#sec-construct)(_target_, _argumentsList_, _newTarget_).
8.  Let _argArray_ be [CreateArrayFromList](#sec-createarrayfromlist)(_argumentsList_).
9.  Let _newObj_ be ? [Call](#sec-call)(_trap_, _handler_, « _target_, _argArray_, _newTarget_ »).
10.  If _newObj_ [is not an Object](#sec-object-type), throw a TypeError exception.
11.  Return _newObj_.

Note 1

A [Proxy exotic object](#proxy-exotic-object) only has a _\[\[Construct\]\]_ internal method if the initial value of its _\[\[ProxyTarget\]\]_ internal slot is an object that has a _\[\[Construct\]\]_ internal method.

Note 2

_\[\[Construct\]\]_ for Proxy objects enforces the following invariants:

-   The result of _\[\[Construct\]\]_ must be an Object.


# 10.5.14 ValidateNonRevokedProxy ( _proxy_ )

The abstract operation ValidateNonRevokedProxy takes argument _proxy_ (a [Proxy exotic object](#proxy-exotic-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It throws a TypeError exception if _proxy_ has been revoked. It performs the following steps when called:

1.  If _proxy_._\[\[ProxyTarget\]\]_ is null, throw a TypeError exception.
2.  [Assert](#assert): _proxy_._\[\[ProxyHandler\]\]_ is not null.
3.  Return unused.


# 10.5.15 ProxyCreate ( _target_, _handler_ )

The abstract operation ProxyCreate takes arguments _target_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _handler_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Proxy exotic object](#proxy-exotic-object) or a [throw completion](#sec-completion-record-specification-type). It is used to specify the creation of new Proxy objects. It performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  If _handler_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _P_ be [MakeBasicObject](#sec-makebasicobject)(« _\[\[ProxyHandler\]\]_, _\[\[ProxyTarget\]\]_ »).
4.  Set _P_'s essential internal methods, except for _\[\[Call\]\]_ and _\[\[Construct\]\]_, to the definitions specified in [10.5](#sec-proxy-object-internal-methods-and-internal-slots).
5.  If [IsCallable](#sec-iscallable)(_target_) is true, then
    1.  Set _P_._\[\[Call\]\]_ as specified in [10.5.12](#sec-proxy-object-internal-methods-and-internal-slots-call-thisargument-argumentslist).
    2.  If [IsConstructor](#sec-isconstructor)(_target_) is true, then
        1.  Set _P_._\[\[Construct\]\]_ as specified in [10.5.13](#sec-proxy-object-internal-methods-and-internal-slots-construct-argumentslist-newtarget).
6.  Set _P_._\[\[ProxyTarget\]\]_ to _target_.
7.  Set _P_._\[\[ProxyHandler\]\]_ to _handler_.
8.  Return _P_.


# 11 ECMAScript Language: Source Text


# 11.1 Source Text


## Syntax

[SourceCharacter](#prod-SourceCharacter) :: any Unicode code point

ECMAScript source text is a sequence of Unicode code points. All Unicode code point values from U+0000 to U+10FFFF, including surrogate code points, may occur in ECMAScript source text where permitted by the ECMAScript grammars. The actual encodings used to store and interchange ECMAScript source text is not relevant to this specification. Regardless of the external source text encoding, a conforming ECMAScript implementation processes the source text as if it was an equivalent sequence of [SourceCharacter](#prod-SourceCharacter) values, each [SourceCharacter](#prod-SourceCharacter) being a Unicode code point. Conforming ECMAScript implementations are not required to perform any normalization of source text, or behave as though they were performing normalization of source text.

The components of a combining character sequence are treated as individual Unicode code points even though a user might think of the whole sequence as a single character.

Note

In string literals, regular expression literals, template literals and identifiers, any Unicode code point may also be expressed using Unicode escape sequences that explicitly express a code point's numeric value. Within a comment, such an escape sequence is effectively ignored as part of the comment.

ECMAScript differs from the Java programming language in the behaviour of Unicode escape sequences. In a Java program, if the Unicode escape sequence `\u000A`, for example, occurs within a single-line comment, it is interpreted as a line terminator (Unicode code point U+000A is LINE FEED (LF)) and therefore the next code point is not part of the comment. Similarly, if the Unicode escape sequence `\u000A` occurs within a string literal in a Java program, it is likewise interpreted as a line terminator, which is not allowed within a string literal—one must write `\n` instead of `\u000A` to cause a LINE FEED (LF) to be part of the value of a string literal. In an ECMAScript program, a Unicode escape sequence occurring within a comment is never interpreted and therefore cannot contribute to termination of the comment. Similarly, a Unicode escape sequence occurring within a string literal in an ECMAScript program always contributes to the literal and is never interpreted as a line terminator or as a code point that might terminate the string literal.


# 11.1.1 Static Semantics: UTF16EncodeCodePoint ( _cp_ )

The abstract operation UTF16EncodeCodePoint takes argument _cp_ (a Unicode code point) and returns a String. It performs the following steps when called:

1.  [Assert](#assert): 0 ≤ _cp_ ≤ 0x10FFFF.
2.  If _cp_ ≤ 0xFFFF, return the String value consisting of the code unit whose numeric value is _cp_.
3.  Let _cu1_ be the code unit whose numeric value is [floor](#eqn-floor)((_cp_ - 0x10000) / 0x400) + 0xD800.
4.  Let _cu2_ be the code unit whose numeric value is ((_cp_ - 0x10000) [modulo](#eqn-modulo) 0x400) + 0xDC00.
5.  Return the [string-concatenation](#string-concatenation) of _cu1_ and _cu2_.


# 11.1.2 Static Semantics: CodePointsToString ( _text_ )

The abstract operation CodePointsToString takes argument _text_ (a sequence of Unicode code points) and returns a String. It converts _text_ into a String value, as described in [6.1.4](#sec-ecmascript-language-types-string-type). It performs the following steps when called:

1.  Let _result_ be the empty String.
2.  For each code point _cp_ of _text_, do
    1.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_ and [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)(_cp_).
3.  Return _result_.


# 11.1.3 Static Semantics: UTF16SurrogatePairToCodePoint ( _lead_, _trail_ )

The abstract operation UTF16SurrogatePairToCodePoint takes arguments _lead_ (a code unit) and _trail_ (a code unit) and returns a code point. Two code units that form a UTF-16 [surrogate pair](#surrogate-pair) are converted to a code point. It performs the following steps when called:

1.  [Assert](#assert): _lead_ is a [leading surrogate](#leading-surrogate) and _trail_ is a [trailing surrogate](#trailing-surrogate).
2.  Let _cp_ be (_lead_ - 0xD800) × 0x400 + (_trail_ - 0xDC00) + 0x10000.
3.  Return the code point _cp_.


# 11.1.4 Static Semantics: CodePointAt ( _string_, _position_ )

The abstract operation CodePointAt takes arguments _string_ (a String) and _position_ (a non-negative [integer](#integer)) and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[CodePoint\]\]_ (a code point), _\[\[CodeUnitCount\]\]_ (a positive [integer](#integer)), and _\[\[IsUnpairedSurrogate\]\]_ (a Boolean). It interprets _string_ as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type), and reads from it a single code point starting with the code unit at index _position_. It performs the following steps when called:

1.  Let _size_ be the length of _string_.
2.  [Assert](#assert): _position_ ≥ 0 and _position_ < _size_.
3.  Let _first_ be the code unit at index _position_ within _string_.
4.  Let _cp_ be the code point whose numeric value is the numeric value of _first_.
5.  If _first_ is neither a [leading surrogate](#leading-surrogate) nor a [trailing surrogate](#trailing-surrogate), then
    1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[CodePoint\]\]_: _cp_, _\[\[CodeUnitCount\]\]_: 1, _\[\[IsUnpairedSurrogate\]\]_: false }.
6.  If _first_ is a [trailing surrogate](#trailing-surrogate) or _position_ + 1 = _size_, then
    1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[CodePoint\]\]_: _cp_, _\[\[CodeUnitCount\]\]_: 1, _\[\[IsUnpairedSurrogate\]\]_: true }.
7.  Let _second_ be the code unit at index _position_ + 1 within _string_.
8.  If _second_ is not a [trailing surrogate](#trailing-surrogate), then
    1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[CodePoint\]\]_: _cp_, _\[\[CodeUnitCount\]\]_: 1, _\[\[IsUnpairedSurrogate\]\]_: true }.
9.  Set _cp_ to [UTF16SurrogatePairToCodePoint](#sec-utf16decodesurrogatepair)(_first_, _second_).
10.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[CodePoint\]\]_: _cp_, _\[\[CodeUnitCount\]\]_: 2, _\[\[IsUnpairedSurrogate\]\]_: false }.


# 11.1.5 Static Semantics: StringToCodePoints ( _string_ )

The abstract operation StringToCodePoints takes argument _string_ (a String) and returns a [List](#sec-list-and-record-specification-type) of code points. It returns the sequence of Unicode code points that results from interpreting _string_ as UTF-16 encoded Unicode text as described in [6.1.4](#sec-ecmascript-language-types-string-type). It performs the following steps when called:

1.  Let _codePoints_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Let _size_ be the length of _string_.
3.  Let _position_ be 0.
4.  Repeat, while _position_ < _size_,
    1.  Let _cp_ be [CodePointAt](#sec-codepointat)(_string_, _position_).
    2.  Append _cp_._\[\[CodePoint\]\]_ to _codePoints_.
    3.  Set _position_ to _position_ + _cp_._\[\[CodeUnitCount\]\]_.
5.  Return _codePoints_.


# 11.1.6 Static Semantics: ParseText ( _sourceText_, _goalSymbol_ )

The abstract operation ParseText takes arguments _sourceText_ (a String or a sequence of Unicode code points) and _goalSymbol_ (a nonterminal in one of the ECMAScript grammars) and returns a [Parse Node](#sec-syntactic-grammar) or a non-empty [List](#sec-list-and-record-specification-type) of SyntaxError objects. It performs the following steps when called:

1.  If _sourceText_ [is a String](#sec-ecmascript-language-types-string-type), set _sourceText_ to [StringToCodePoints](#sec-stringtocodepoints)(_sourceText_).
2.  Attempt to parse _sourceText_ using _goalSymbol_ as the [goal symbol](#sec-context-free-grammars), and analyse the parse result for any [early error](#early-error) conditions. Parsing and [early error](#early-error) detection may be interleaved in an [implementation-defined](#implementation-defined) manner.
3.  If the parse succeeded and no [early errors](#early-error) were found, return the [Parse Node](#sec-syntactic-grammar) (an instance of _goalSymbol_) at the root of the parse tree resulting from the parse.
4.  Otherwise, return a [List](#sec-list-and-record-specification-type) of one or more SyntaxError objects representing the parsing errors and/or [early errors](#early-error). If more than one parsing error or [early error](#early-error) is present, the number and ordering of error objects in the list is [implementation-defined](#implementation-defined), but at least one must be present.

Note 1

Consider a text that has an [early error](#early-error) at a particular point, and also a syntax error at a later point. An implementation that does a parse pass followed by an [early errors](#early-error) pass might report the syntax error and not proceed to the [early errors](#early-error) pass. An implementation that interleaves the two activities might report the [early error](#early-error) and not proceed to find the syntax error. A third implementation might report both errors. All of these behaviours are conformant.

Note 2

See also clause [17](#sec-error-handling-and-language-extensions).


# 11.2 Types of Source Code

There are four types of ECMAScript code:

-   Global code is source text that is treated as an ECMAScript [Script](#prod-Script). The global code of a particular [Script](#prod-Script) does not include any source text that is parsed as part of a [FunctionDeclaration](#prod-FunctionDeclaration), [FunctionExpression](#prod-FunctionExpression), [GeneratorDeclaration](#prod-GeneratorDeclaration), [GeneratorExpression](#prod-GeneratorExpression), [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncFunctionExpression](#prod-AsyncFunctionExpression), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression), [MethodDefinition](#prod-MethodDefinition), [ArrowFunction](#prod-ArrowFunction), [AsyncArrowFunction](#prod-AsyncArrowFunction), [ClassDeclaration](#prod-ClassDeclaration), or [ClassExpression](#prod-ClassExpression).
-   Eval code is the source text supplied to the built-in `eval` function. More precisely, if the parameter to the built-in `eval` function [is a String](#sec-ecmascript-language-types-string-type), it is treated as an ECMAScript [Script](#prod-Script). The eval code for a particular invocation of `eval` is the global code portion of that [Script](#prod-Script).
-   Function code is source text that is parsed to supply the value of the _\[\[ECMAScriptCode\]\]_ and _\[\[FormalParameters\]\]_ internal slots (see [10.2](#sec-ecmascript-function-objects)) of an ECMAScript [function object](#function-object). The function code of a particular ECMAScript function does not include any source text that is parsed as the function code of a nested [FunctionDeclaration](#prod-FunctionDeclaration), [FunctionExpression](#prod-FunctionExpression), [GeneratorDeclaration](#prod-GeneratorDeclaration), [GeneratorExpression](#prod-GeneratorExpression), [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncFunctionExpression](#prod-AsyncFunctionExpression), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression), [MethodDefinition](#prod-MethodDefinition), [ArrowFunction](#prod-ArrowFunction), [AsyncArrowFunction](#prod-AsyncArrowFunction), [ClassDeclaration](#prod-ClassDeclaration), or [ClassExpression](#prod-ClassExpression).
    
    In addition, if the source text referred to above is parsed as:
    
    -   the [FormalParameters](#prod-FormalParameters) and [FunctionBody](#prod-FunctionBody) of a [FunctionDeclaration](#prod-FunctionDeclaration) or [FunctionExpression](#prod-FunctionExpression),
    -   the [FormalParameters](#prod-FormalParameters) and [GeneratorBody](#prod-GeneratorBody) of a [GeneratorDeclaration](#prod-GeneratorDeclaration) or [GeneratorExpression](#prod-GeneratorExpression),
    -   the [FormalParameters](#prod-FormalParameters) and [AsyncFunctionBody](#prod-AsyncFunctionBody) of an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) or [AsyncFunctionExpression](#prod-AsyncFunctionExpression), or
    -   the [FormalParameters](#prod-FormalParameters) and [AsyncGeneratorBody](#prod-AsyncGeneratorBody) of an [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) or [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression),
    
    then the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the [BindingIdentifier](#prod-BindingIdentifier) (if any) of that declaration or expression is also included in the function code of the corresponding function.
    
-   Module code is source text that is code that is provided as a [ModuleBody](#prod-ModuleBody). It is the code that is directly evaluated when a module is initialized. The module code of a particular module does not include any source text that is parsed as part of a nested [FunctionDeclaration](#prod-FunctionDeclaration), [FunctionExpression](#prod-FunctionExpression), [GeneratorDeclaration](#prod-GeneratorDeclaration), [GeneratorExpression](#prod-GeneratorExpression), [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncFunctionExpression](#prod-AsyncFunctionExpression), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression), [MethodDefinition](#prod-MethodDefinition), [ArrowFunction](#prod-ArrowFunction), [AsyncArrowFunction](#prod-AsyncArrowFunction), [ClassDeclaration](#prod-ClassDeclaration), or [ClassExpression](#prod-ClassExpression).

Note 1

Function code is generally provided as the bodies of Function Definitions ([15.2](#sec-function-definitions)), Arrow Function Definitions ([15.3](#sec-arrow-function-definitions)), Method Definitions ([15.4](#sec-method-definitions)), Generator Function Definitions ([15.5](#sec-generator-function-definitions)), Async Function Definitions ([15.8](#sec-async-function-definitions)), Async Generator Function Definitions ([15.6](#sec-async-generator-function-definitions)), and Async Arrow Functions ([15.9](#sec-async-arrow-function-definitions)). Function code is also derived from the arguments to the Function [constructor](#constructor) ([20.2.1.1](#sec-function-p1-p2-pn-body)), the GeneratorFunction [constructor](#constructor) ([27.3.1.1](#sec-generatorfunction)), the AsyncFunction [constructor](#constructor) ([27.7.1.1](#sec-async-function-constructor-arguments)), and the AsyncGeneratorFunction [constructor](#constructor) ([27.4.1.1](#sec-asyncgeneratorfunction)).

Note 2

The practical effect of including the [BindingIdentifier](#prod-BindingIdentifier) in function code is that the Early Errors for [strict mode code](#sec-strict-mode-code) are applied to a [BindingIdentifier](#prod-BindingIdentifier) that is the name of a function whose body contains a "use strict" directive, even if the surrounding code is not [strict mode code](#sec-strict-mode-code).


# 11.2.1 Directive Prologues and the Use Strict Directive

A Directive Prologue is the longest sequence of [ExpressionStatement](#prod-ExpressionStatement)s occurring as the initial [StatementListItem](#prod-StatementListItem)s or [ModuleItem](#prod-ModuleItem)s of a [FunctionBody](#prod-FunctionBody), a [ScriptBody](#prod-ScriptBody), or a [ModuleBody](#prod-ModuleBody) and where each [ExpressionStatement](#prod-ExpressionStatement) in the sequence consists entirely of a [StringLiteral](#prod-StringLiteral) token followed by a semicolon. The semicolon may appear explicitly or may be inserted by automatic semicolon insertion ([12.10](#sec-automatic-semicolon-insertion)). A [Directive Prologue](#directive-prologue) may be an empty sequence.

A Use Strict Directive is an [ExpressionStatement](#prod-ExpressionStatement) in a [Directive Prologue](#directive-prologue) whose [StringLiteral](#prod-StringLiteral) is either of the exact code point sequences `"use strict"` or `'use strict'`. A [Use Strict Directive](#use-strict-directive) may not contain an [EscapeSequence](#prod-EscapeSequence) or [LineContinuation](#prod-LineContinuation).

A [Directive Prologue](#directive-prologue) may contain more than one [Use Strict Directive](#use-strict-directive). However, an implementation may issue a warning if this occurs.

Note

The [ExpressionStatement](#prod-ExpressionStatement)s of a [Directive Prologue](#directive-prologue) are evaluated normally during evaluation of the containing production. Implementations may define implementation specific meanings for [ExpressionStatement](#prod-ExpressionStatement)s which are not a [Use Strict Directive](#use-strict-directive) and which occur in a [Directive Prologue](#directive-prologue). If an appropriate notification mechanism exists, an implementation should issue a warning if it encounters in a [Directive Prologue](#directive-prologue) an [ExpressionStatement](#prod-ExpressionStatement) that is not a [Use Strict Directive](#use-strict-directive) and which does not have a meaning defined by the implementation.


# 11.2.2 Strict Mode Code

An ECMAScript syntactic unit may be processed using either unrestricted or strict mode syntax and semantics ([4.3.2](#sec-strict-variant-of-ecmascript)). Code is interpreted as strict mode code in the following situations:

-   [Global code](#sec-types-of-source-code) is strict mode code if it begins with a [Directive Prologue](#directive-prologue) that contains a [Use Strict Directive](#use-strict-directive).
-   [Module code](#sec-types-of-source-code) is always strict mode code.
-   All parts of a [ClassDeclaration](#prod-ClassDeclaration) or a [ClassExpression](#prod-ClassExpression) are strict mode code.
-   [Eval code](#sec-types-of-source-code) is strict mode code if it begins with a [Directive Prologue](#directive-prologue) that contains a [Use Strict Directive](#use-strict-directive) or if the call to `eval` is a [direct eval](#sec-function-calls-runtime-semantics-evaluation) that is contained in strict mode code.
-   [Function code](#sec-types-of-source-code) is strict mode code if the associated [FunctionDeclaration](#prod-FunctionDeclaration), [FunctionExpression](#prod-FunctionExpression), [GeneratorDeclaration](#prod-GeneratorDeclaration), [GeneratorExpression](#prod-GeneratorExpression), [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncFunctionExpression](#prod-AsyncFunctionExpression), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression), [MethodDefinition](#prod-MethodDefinition), [ArrowFunction](#prod-ArrowFunction), or [AsyncArrowFunction](#prod-AsyncArrowFunction) is contained in strict mode code or if the code that produces the value of the function's _\[\[ECMAScriptCode\]\]_ internal slot begins with a [Directive Prologue](#directive-prologue) that contains a [Use Strict Directive](#use-strict-directive).
-   [Function code](#sec-types-of-source-code) that is supplied as the arguments to the built-in Function, Generator, AsyncFunction, and AsyncGenerator [constructors](#constructor) is strict mode code if the last argument [is a String](#sec-ecmascript-language-types-string-type) that when processed is a [FunctionBody](#prod-FunctionBody) that begins with a [Directive Prologue](#directive-prologue) that contains a [Use Strict Directive](#use-strict-directive).

ECMAScript code that is not strict mode code is called non-strict code.


# 11.2.2.1 Static Semantics: IsStrict ( _node_ )

The abstract operation IsStrict takes argument _node_ (a [Parse Node](#sec-syntactic-grammar)) and returns a Boolean. It performs the following steps when called:

1.  If the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) _node_ is [strict mode code](#sec-strict-mode-code), return true; else return false.


# 11.2.3 Non-ECMAScript Functions

An ECMAScript implementation may support the evaluation of function [exotic objects](#exotic-object) whose evaluative behaviour is expressed in some [host-defined](#host-defined) form of executable code other than [ECMAScript source text](#sec-source-text). Whether a [function object](#function-object) is defined within ECMAScript code or is a built-in function is not observable from the perspective of ECMAScript code that calls or is called by such a [function object](#function-object).


# 12 ECMAScript Language: Lexical Grammar

The source text of an ECMAScript [Script](#prod-Script) or [Module](#prod-Module) is first converted into a sequence of input elements, which are tokens, line terminators, comments, or white space. The source text is scanned from left to right, repeatedly taking the longest possible sequence of code points as the next input element.

There are several situations where the identification of lexical input elements is sensitive to the syntactic grammar context that is consuming the input elements. This requires multiple [goal symbols](#sec-context-free-grammars) for the lexical grammar. The [InputElementHashbangOrRegExp](#prod-InputElementHashbangOrRegExp) goal is used at the start of a [Script](#prod-Script) or [Module](#prod-Module). The [InputElementRegExpOrTemplateTail](#prod-InputElementRegExpOrTemplateTail) goal is used in syntactic grammar contexts where a [RegularExpressionLiteral](#prod-RegularExpressionLiteral), a [TemplateMiddle](#prod-TemplateMiddle), or a [TemplateTail](#prod-TemplateTail) is permitted. The [InputElementRegExp](#prod-InputElementRegExp) [goal symbol](#sec-context-free-grammars) is used in all syntactic grammar contexts where a [RegularExpressionLiteral](#prod-RegularExpressionLiteral) is permitted but neither a [TemplateMiddle](#prod-TemplateMiddle), nor a [TemplateTail](#prod-TemplateTail) is permitted. The [InputElementTemplateTail](#prod-InputElementTemplateTail) goal is used in all syntactic grammar contexts where a [TemplateMiddle](#prod-TemplateMiddle) or a [TemplateTail](#prod-TemplateTail) is permitted but a [RegularExpressionLiteral](#prod-RegularExpressionLiteral) is not permitted. In all other contexts, [InputElementDiv](#prod-InputElementDiv) is used as the lexical [goal symbol](#sec-context-free-grammars).

Note

The use of multiple lexical goals ensures that there are no lexical ambiguities that would affect automatic semicolon insertion. For example, there are no syntactic grammar contexts where both a leading division or division-assignment, and a leading [RegularExpressionLiteral](#prod-RegularExpressionLiteral) are permitted. This is not affected by semicolon insertion (see [12.10](#sec-automatic-semicolon-insertion)); in examples such as the following:

```
a = b
/hi/g.exec(c).map(d);
```

where the first non-whitespace, non-comment code point after a [LineTerminator](#prod-LineTerminator) is U+002F (SOLIDUS) and the syntactic context allows division or division-assignment, no semicolon is inserted at the [LineTerminator](#prod-LineTerminator). That is, the above example is interpreted in the same way as:

```
a = b / hi / g.exec(c).map(d);
```


## Syntax

[InputElementDiv](#prod-InputElementDiv) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [DivPunctuator](#prod-DivPunctuator) [RightBracePunctuator](#prod-RightBracePunctuator) [InputElementRegExp](#prod-InputElementRegExp) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [RightBracePunctuator](#prod-RightBracePunctuator) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [InputElementRegExpOrTemplateTail](#prod-InputElementRegExpOrTemplateTail) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) [InputElementTemplateTail](#prod-InputElementTemplateTail) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [DivPunctuator](#prod-DivPunctuator) [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) [InputElementHashbangOrRegExp](#prod-InputElementHashbangOrRegExp) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [HashbangComment](#prod-HashbangComment) [RegularExpressionLiteral](#prod-RegularExpressionLiteral)


# 12.1 Unicode Format-Control Characters

The Unicode format-control characters (i.e., the characters in category “Cf” in the Unicode Character Database such as LEFT-TO-RIGHT MARK or RIGHT-TO-LEFT MARK) are control codes used to control the formatting of a range of text in the absence of higher-level protocols for this (such as mark-up languages).

It is useful to allow format-control characters in source text to facilitate editing and display. All format control characters may be used within comments, and within string literals, template literals, and regular expression literals.

U+FEFF (ZERO WIDTH NO-BREAK SPACE) is a format-control character used primarily at the start of a text to mark it as Unicode and to allow detection of the text's encoding and byte order. <ZWNBSP> characters intended for this purpose can sometimes also appear after the start of a text, for example as a result of concatenating files. In [ECMAScript source text](#sec-source-text) <ZWNBSP> code points are treated as white space characters (see [12.2](#sec-white-space)) outside of comments, string literals, template literals, and regular expression literals.


# 12.2 White Space

White space code points are used to improve source text readability and to separate tokens (indivisible lexical units) from each other, but are otherwise insignificant. White space code points may occur between any two tokens and at the start or end of input. White space code points may occur within a [StringLiteral](#prod-StringLiteral), a [RegularExpressionLiteral](#prod-RegularExpressionLiteral), a [Template](#prod-Template), or a [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) where they are considered significant code points forming part of a literal value. They may also occur within a [Comment](#prod-Comment), but cannot appear within any other kind of token.

The ECMAScript white space code points are listed in [Table 33](#table-white-space-code-points).

Table 33: White Space Code Points

<table><thead><tr><th>Code Points</th><th>Name</th><th>Abbreviation</th></tr></thead><tbody><tr><td><code>U+0009</code></td><td>CHARACTER TABULATION</td><td>&lt;TAB&gt;</td></tr><tr><td><code>U+000B</code></td><td>LINE TABULATION</td><td>&lt;VT&gt;</td></tr><tr><td><code>U+000C</code></td><td>FORM FEED (FF)</td><td>&lt;FF&gt;</td></tr><tr><td><code>U+FEFF</code></td><td>ZERO WIDTH NO-BREAK SPACE</td><td>&lt;ZWNBSP&gt;</td></tr><tr><td>any code point in general category “Space_Separator”</td><td></td><td>&lt;USP&gt;</td></tr></tbody></table>

Note 1

U+0020 (SPACE) and U+00A0 (NO-BREAK SPACE) code points are part of <USP>.

Note 2

Other than for the code points listed in [Table 33](#table-white-space-code-points), ECMAScript [WhiteSpace](#prod-WhiteSpace) intentionally excludes all code points that have the Unicode “White\_Space” property but which are not classified in general category “Space\_Separator” (“Zs”).


## Syntax

[WhiteSpace](#prod-WhiteSpace) :: <TAB> <VT> <FF> <ZWNBSP> <USP>


# 12.3 Line Terminators

Like white space code points, line terminator code points are used to improve source text readability and to separate tokens (indivisible lexical units) from each other. However, unlike white space code points, line terminators have some influence over the behaviour of the syntactic grammar. In general, line terminators may occur between any two tokens, but there are a few places where they are forbidden by the syntactic grammar. Line terminators also affect the process of automatic semicolon insertion ([12.10](#sec-automatic-semicolon-insertion)). A line terminator cannot occur within any token except a [StringLiteral](#prod-StringLiteral), [Template](#prod-Template), or [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail). <LF> and <CR> line terminators cannot occur within a [StringLiteral](#prod-StringLiteral) token except as part of a [LineContinuation](#prod-LineContinuation).

A line terminator can occur within a [MultiLineComment](#prod-MultiLineComment) but cannot occur within a [SingleLineComment](#prod-SingleLineComment).

Line terminators are included in the set of white space code points that are matched by the `\s` class in regular expressions.

The ECMAScript line terminator code points are listed in [Table 34](#table-line-terminator-code-points).

Table 34: Line Terminator Code Points

<table><thead><tr><th>Code Point</th><th>Unicode Name</th><th>Abbreviation</th></tr></thead><tbody><tr><td><code>U+000A</code></td><td>LINE FEED (LF)</td><td>&lt;LF&gt;</td></tr><tr><td><code>U+000D</code></td><td>CARRIAGE RETURN (CR)</td><td>&lt;CR&gt;</td></tr><tr><td><code>U+2028</code></td><td>LINE SEPARATOR</td><td>&lt;LS&gt;</td></tr><tr><td><code>U+2029</code></td><td>PARAGRAPH SEPARATOR</td><td>&lt;PS&gt;</td></tr></tbody></table>

Only the Unicode code points in [Table 34](#table-line-terminator-code-points) are treated as line terminators. Other new line or line breaking Unicode code points are not treated as line terminators but are treated as white space if they meet the requirements listed in [Table 33](#table-white-space-code-points). The sequence <CR><LF> is commonly used as a line terminator. It should be considered a single [SourceCharacter](#prod-SourceCharacter) for the purpose of reporting line numbers.


## Syntax

[LineTerminator](#prod-LineTerminator) :: <LF> <CR> <LS> <PS> [LineTerminatorSequence](#prod-LineTerminatorSequence) :: <LF> <CR> \[lookahead ≠ <LF>\] <LS> <PS> <CR> <LF>


# 12.4 Comments

Comments can be either single or multi-line. Multi-line comments cannot nest.

Because a single-line comment can contain any Unicode code point except a [LineTerminator](#prod-LineTerminator) code point, and because of the general rule that a token is always as long as possible, a single-line comment always consists of all code points from the `//` marker to the end of the line. However, the [LineTerminator](#prod-LineTerminator) at the end of the line is not considered to be part of the single-line comment; it is recognized separately by the lexical grammar and becomes part of the stream of input elements for the syntactic grammar. This point is very important, because it implies that the presence or absence of single-line comments does not affect the process of automatic semicolon insertion (see [12.10](#sec-automatic-semicolon-insertion)).

Comments behave like white space and are discarded except that, if a [MultiLineComment](#prod-MultiLineComment) contains a line terminator code point, then the entire comment is considered to be a [LineTerminator](#prod-LineTerminator) for purposes of parsing by the syntactic grammar.


## Syntax

[Comment](#prod-Comment) :: [MultiLineComment](#prod-MultiLineComment) [SingleLineComment](#prod-SingleLineComment) [MultiLineComment](#prod-MultiLineComment) :: /\* [MultiLineCommentChars](#prod-MultiLineCommentChars)opt \*/ [MultiLineCommentChars](#prod-MultiLineCommentChars) :: [MultiLineNotAsteriskChar](#prod-MultiLineNotAsteriskChar) [MultiLineCommentChars](#prod-MultiLineCommentChars)opt \* [PostAsteriskCommentChars](#prod-PostAsteriskCommentChars)opt [PostAsteriskCommentChars](#prod-PostAsteriskCommentChars) :: [MultiLineNotForwardSlashOrAsteriskChar](#prod-MultiLineNotForwardSlashOrAsteriskChar) [MultiLineCommentChars](#prod-MultiLineCommentChars)opt \* [PostAsteriskCommentChars](#prod-PostAsteriskCommentChars)opt [MultiLineNotAsteriskChar](#prod-MultiLineNotAsteriskChar) :: [SourceCharacter](#prod-SourceCharacter) but not \* [MultiLineNotForwardSlashOrAsteriskChar](#prod-MultiLineNotForwardSlashOrAsteriskChar) :: [SourceCharacter](#prod-SourceCharacter) but not one of / or \* [SingleLineComment](#prod-SingleLineComment) :: // [SingleLineCommentChars](#prod-SingleLineCommentChars)opt [SingleLineCommentChars](#prod-SingleLineCommentChars) :: [SingleLineCommentChar](#prod-SingleLineCommentChar) [SingleLineCommentChars](#prod-SingleLineCommentChars)opt [SingleLineCommentChar](#prod-SingleLineCommentChar) :: [SourceCharacter](#prod-SourceCharacter) but not [LineTerminator](#prod-LineTerminator)

A number of productions in this section are given alternative definitions in section [B.1.1](#sec-html-like-comments)


# 12.5 Hashbang Comments

Hashbang Comments are location-sensitive and like other types of comments are discarded from the stream of input elements for the syntactic grammar.


## Syntax

[HashbangComment](#prod-HashbangComment) :: #! [SingleLineCommentChars](#prod-SingleLineCommentChars)opt


# 12.6 Tokens


## Syntax

[CommonToken](#prod-CommonToken) :: [IdentifierName](#prod-IdentifierName) [PrivateIdentifier](#prod-PrivateIdentifier) [Punctuator](#prod-Punctuator) [NumericLiteral](#prod-NumericLiteral) [StringLiteral](#prod-StringLiteral) [Template](#prod-Template) Note

The [DivPunctuator](#prod-DivPunctuator), [RegularExpressionLiteral](#prod-RegularExpressionLiteral), [RightBracePunctuator](#prod-RightBracePunctuator), and [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) productions derive additional tokens that are not included in the [CommonToken](#prod-CommonToken) production.


# 12.7 Names and Keywords

[IdentifierName](#prod-IdentifierName) and [ReservedWord](#prod-ReservedWord) are tokens that are interpreted according to the Default Identifier Syntax given in Unicode Standard Annex #31, Identifier and Pattern Syntax, with some small modifications. [ReservedWord](#prod-ReservedWord) is an enumerated subset of [IdentifierName](#prod-IdentifierName). The syntactic grammar defines [Identifier](#prod-Identifier) as an [IdentifierName](#prod-IdentifierName) that is not a [ReservedWord](#prod-ReservedWord). The Unicode identifier grammar is based on character properties specified by the Unicode Standard. The Unicode code points in the specified categories in the latest version of the Unicode Standard must be treated as in those categories by all conforming ECMAScript implementations. ECMAScript implementations may recognize identifier code points defined in later editions of the Unicode Standard.

Note 1

This standard specifies specific code point additions: U+0024 (DOLLAR SIGN) and U+005F (LOW LINE) are permitted anywhere in an [IdentifierName](#prod-IdentifierName).


## Syntax

[PrivateIdentifier](#prod-PrivateIdentifier) :: # [IdentifierName](#prod-IdentifierName) [IdentifierName](#prod-IdentifierName) :: [IdentifierStart](#prod-IdentifierStart) [IdentifierName](#prod-IdentifierName) [IdentifierPart](#prod-IdentifierPart) [IdentifierStart](#prod-IdentifierStart) :: [IdentifierStartChar](#prod-IdentifierStartChar) \\ [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [IdentifierPart](#prod-IdentifierPart) :: [IdentifierPartChar](#prod-IdentifierPartChar) \\ [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [IdentifierStartChar](#prod-IdentifierStartChar) :: [UnicodeIDStart](#prod-UnicodeIDStart) $ \_ [IdentifierPartChar](#prod-IdentifierPartChar) :: [UnicodeIDContinue](#prod-UnicodeIDContinue) $ [AsciiLetter](#prod-AsciiLetter) :: one of a b c d e f g h i j k l m n o p q r s t u v w x y z A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [UnicodeIDStart](#prod-UnicodeIDStart) :: any Unicode code point with the Unicode property “ID\_Start” [UnicodeIDContinue](#prod-UnicodeIDContinue) :: any Unicode code point with the Unicode property “ID\_Continue”

The definitions of the nonterminal [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) is given in [12.9.4](#sec-literals-string-literals).

Note 2

The nonterminal [IdentifierPart](#prod-IdentifierPart) derives `_` via [UnicodeIDContinue](#prod-UnicodeIDContinue).

Note 3

The sets of code points with Unicode properties “ID\_Start” and “ID\_Continue” include, respectively, the code points with Unicode properties “Other\_ID\_Start” and “Other\_ID\_Continue”.


# 12.7.1 Identifier Names

Unicode escape sequences are permitted in an [IdentifierName](#prod-IdentifierName), where they contribute a single Unicode code point equal to the [IdentifierCodePoint](#sec-identifiercodepoint) of the [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence). The `\` preceding the [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) does not contribute any code points. A [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) cannot be used to contribute a code point to an [IdentifierName](#prod-IdentifierName) that would otherwise be invalid. In other words, if a `\` [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) sequence were replaced by the [SourceCharacter](#prod-SourceCharacter) it contributes, the result must still be a valid [IdentifierName](#prod-IdentifierName) that has the exact same sequence of [SourceCharacter](#prod-SourceCharacter) elements as the original [IdentifierName](#prod-IdentifierName). All interpretations of [IdentifierName](#prod-IdentifierName) within this specification are based upon their actual code points regardless of whether or not an escape sequence was used to contribute any particular code point.

Two [IdentifierName](#prod-IdentifierName)s that are canonically equivalent according to the Unicode Standard are *not* equal unless, after replacement of each [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence), they are represented by the exact same sequence of code points.


# 12.7.1.1 Static Semantics: Early Errors

[IdentifierStart](#prod-IdentifierStart) :: \\ [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence)

-   It is a Syntax Error if the [IdentifierCodePoint](#sec-identifiercodepoint) of [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) is not some Unicode code point matched by the [IdentifierStartChar](#prod-IdentifierStartChar) lexical grammar production.

[IdentifierPart](#prod-IdentifierPart) :: \\ [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence)

-   It is a Syntax Error if the [IdentifierCodePoint](#sec-identifiercodepoint) of [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) is not some Unicode code point matched by the [IdentifierPartChar](#prod-IdentifierPartChar) lexical grammar production.


# 12.7.1.2 Static Semantics: IdentifierCodePoints

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IdentifierCodePoints takes no arguments and returns a [List](#sec-list-and-record-specification-type) of code points. It is defined piecewise over the following productions:

[IdentifierName](#prod-IdentifierName) :: [IdentifierStart](#prod-IdentifierStart)

1.  Let _cp_ be the [IdentifierCodePoint](#sec-identifiercodepoint) of [IdentifierStart](#prod-IdentifierStart).
2.  Return « _cp_ ».

[IdentifierName](#prod-IdentifierName) :: [IdentifierName](#prod-IdentifierName) [IdentifierPart](#prod-IdentifierPart)

1.  Let _cps_ be the [IdentifierCodePoints](#sec-identifiercodepoints) of the derived [IdentifierName](#prod-IdentifierName).
2.  Let _cp_ be the [IdentifierCodePoint](#sec-identifiercodepoint) of [IdentifierPart](#prod-IdentifierPart).
3.  Return the [list-concatenation](#list-concatenation) of _cps_ and « _cp_ ».


# 12.7.1.3 Static Semantics: IdentifierCodePoint

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IdentifierCodePoint takes no arguments and returns a code point. It is defined piecewise over the following productions:

[IdentifierStart](#prod-IdentifierStart) :: [IdentifierStartChar](#prod-IdentifierStartChar)

1.  Return the code point matched by [IdentifierStartChar](#prod-IdentifierStartChar).

[IdentifierPart](#prod-IdentifierPart) :: [IdentifierPartChar](#prod-IdentifierPartChar)

1.  Return the code point matched by [IdentifierPartChar](#prod-IdentifierPartChar).

[UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) :: u [Hex4Digits](#prod-Hex4Digits)

1.  Return the code point whose numeric value is the MV of [Hex4Digits](#prod-Hex4Digits).

[UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) :: u{ [CodePoint](#prod-CodePoint) }

1.  Return the code point whose numeric value is the MV of [CodePoint](#prod-CodePoint).


# 12.7.2 Keywords and Reserved Words

A keyword is a token that matches [IdentifierName](#prod-IdentifierName), but also has a syntactic use; that is, it appears literally, in a `fixed width` font, in some syntactic production. The keywords of ECMAScript include `if`, `while`, `async`, `await`, and many others.

A reserved word is an [IdentifierName](#prod-IdentifierName) that cannot be used as an identifier. Many keywords are reserved words, but some are not, and some are reserved only in certain contexts. `if` and `while` are reserved words. `await` is reserved only inside async functions and modules. `async` is not reserved; it can be used as a variable name or statement label without restriction.

This specification uses a combination of grammatical productions and [early error](#early-error) rules to specify which names are valid identifiers and which are reserved words. All tokens in the [ReservedWord](#prod-ReservedWord) list below, except for `await` and `yield`, are unconditionally reserved. Exceptions for `await` and `yield` are specified in [13.1](#sec-identifiers), using parameterized syntactic productions. Lastly, several [early error](#early-error) rules restrict the set of valid identifiers. See [13.1.1](#sec-identifiers-static-semantics-early-errors), [14.3.1.1](#sec-let-and-const-declarations-static-semantics-early-errors), [14.7.5.1](#sec-for-in-and-for-of-statements-static-semantics-early-errors), and [15.7.1](#sec-class-definitions-static-semantics-early-errors). In summary, there are five categories of identifier names:

-   Those that are always allowed as identifiers, and are not keywords, such as `Math`, `window`, `toString`, and `_`;
    
-   Those that are never allowed as identifiers, namely the [ReservedWord](#prod-ReservedWord)s listed below except `await` and `yield`;
    
-   Those that are contextually allowed as identifiers, namely `await` and `yield`;
    
-   Those that are contextually disallowed as identifiers, in [strict mode code](#sec-strict-mode-code): `let`, `static`, `implements`, `interface`, `package`, `private`, `protected`, and `public`;
    
-   Those that are always allowed as identifiers, but also appear as keywords within certain syntactic productions, at places where [Identifier](#prod-Identifier) is not allowed: `as`, `async`, `from`, `get`, `meta`, `of`, `set`, and `target`.
    

The term conditional keyword, or contextual keyword, is sometimes used to refer to the keywords that fall in the last three categories, and thus can be used as identifiers in some contexts and as keywords in others.


## Syntax

[ReservedWord](#prod-ReservedWord) :: one of await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield Note 1

Per [5.1.5](#sec-grammar-notation), keywords in the grammar match literal sequences of specific [SourceCharacter](#prod-SourceCharacter) elements. A code point in a keyword cannot be expressed by a `\` [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence).

An [IdentifierName](#prod-IdentifierName) can contain `\` [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence)s, but it is not possible to declare a variable named "else" by spelling it `els\u{65}`. The [early error](#early-error) rules in [13.1.1](#sec-identifiers-static-semantics-early-errors) rule out identifiers with the same [StringValue](#sec-static-semantics-stringvalue) as a reserved word.

Note 2

`enum` is not currently used as a keyword in this specification. It is a *future reserved word*, set aside for use as a keyword in future language extensions.

Similarly, `implements`, `interface`, `package`, `private`, `protected`, and `public` are future reserved words in [strict mode code](#sec-strict-mode-code).

Note 3

The names `arguments` and `eval` are not keywords, but they are subject to some restrictions in [strict mode code](#sec-strict-mode-code). See [13.1.1](#sec-identifiers-static-semantics-early-errors), [8.6.4](#sec-static-semantics-assignmenttargettype), [15.2.1](#sec-function-definitions-static-semantics-early-errors), [15.5.1](#sec-generator-function-definitions-static-semantics-early-errors), [15.6.1](#sec-async-generator-function-definitions-static-semantics-early-errors), and [15.8.1](#sec-async-function-definitions-static-semantics-early-errors).


# 12.8 Punctuators


## Syntax

[Punctuator](#prod-Punctuator) :: [OptionalChainingPunctuator](#prod-OptionalChainingPunctuator) [OtherPunctuator](#prod-OtherPunctuator) [OptionalChainingPunctuator](#prod-OptionalChainingPunctuator) :: ?. \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [OtherPunctuator](#prod-OtherPunctuator) :: one of { ( ) \[\] . ... ; , < \> <= \>= \== != \=== !== + \- \* % \*\* ++ \-- << \>> \>>> & | ^ ! ~ && || ?? ? : \= += \-= \*= %= \*\*= <<= \>>= \>>>= &= |= ^= &&= ||= ??= \=> [DivPunctuator](#prod-DivPunctuator) :: / /= [RightBracePunctuator](#prod-RightBracePunctuator) :: }


# 12.9 Literals


# 12.9.1 Null Literals


## Syntax

[NullLiteral](#prod-NullLiteral) :: null


# 12.9.2 Boolean Literals


## Syntax

[BooleanLiteral](#prod-BooleanLiteral) :: true false


# 12.9.3 Numeric Literals


## Syntax

[NumericLiteralSeparator](#prod-NumericLiteralSeparator) :: \_ [NumericLiteral](#prod-NumericLiteral) :: [DecimalLiteral](#prod-DecimalLiteral) [DecimalBigIntegerLiteral](#prod-DecimalBigIntegerLiteral) [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[+Sep\] [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[+Sep\] [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) [DecimalBigIntegerLiteral](#prod-DecimalBigIntegerLiteral) :: 0 [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [NonZeroDigit](#prod-NonZeroDigit) [DecimalDigits](#prod-DecimalDigits)\[+Sep\]opt [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [NonZeroDigit](#prod-NonZeroDigit) [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[Sep\] :: [BinaryIntegerLiteral](#prod-BinaryIntegerLiteral)\[?Sep\] [OctalIntegerLiteral](#prod-OctalIntegerLiteral)\[?Sep\] [HexIntegerLiteral](#prod-HexIntegerLiteral)\[?Sep\] [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) :: n [DecimalLiteral](#prod-DecimalLiteral) :: [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) . [DecimalDigits](#prod-DecimalDigits)\[+Sep\]opt [ExponentPart](#prod-ExponentPart)\[+Sep\]opt . [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [ExponentPart](#prod-ExponentPart)\[+Sep\]opt [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) [ExponentPart](#prod-ExponentPart)\[+Sep\]opt [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) :: 0 [NonZeroDigit](#prod-NonZeroDigit) [NonZeroDigit](#prod-NonZeroDigit) [NumericLiteralSeparator](#prod-NumericLiteralSeparator)opt [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) [DecimalDigits](#prod-DecimalDigits)\[Sep\] :: [DecimalDigit](#prod-DecimalDigit) [DecimalDigits](#prod-DecimalDigits)\[?Sep\] [DecimalDigit](#prod-DecimalDigit) \[+Sep\] [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) :: one of 0 1 2 3 4 5 6 7 8 9 [NonZeroDigit](#prod-NonZeroDigit) :: one of 1 2 3 4 5 6 7 8 9 [ExponentPart](#prod-ExponentPart)\[Sep\] :: [ExponentIndicator](#prod-ExponentIndicator) [SignedInteger](#prod-SignedInteger)\[?Sep\] [ExponentIndicator](#prod-ExponentIndicator) :: one of e E [SignedInteger](#prod-SignedInteger)\[Sep\] :: [DecimalDigits](#prod-DecimalDigits)\[?Sep\] + [DecimalDigits](#prod-DecimalDigits)\[?Sep\] \- [DecimalDigits](#prod-DecimalDigits)\[?Sep\] [BinaryIntegerLiteral](#prod-BinaryIntegerLiteral)\[Sep\] :: 0b [BinaryDigits](#prod-BinaryDigits)\[?Sep\] 0B [BinaryDigits](#prod-BinaryDigits)\[?Sep\] [BinaryDigits](#prod-BinaryDigits)\[Sep\] :: [BinaryDigit](#prod-BinaryDigit) [BinaryDigits](#prod-BinaryDigits)\[?Sep\] [BinaryDigit](#prod-BinaryDigit) \[+Sep\] [BinaryDigits](#prod-BinaryDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [BinaryDigit](#prod-BinaryDigit) [BinaryDigit](#prod-BinaryDigit) :: one of 0 1 [OctalIntegerLiteral](#prod-OctalIntegerLiteral)\[Sep\] :: 0o [OctalDigits](#prod-OctalDigits)\[?Sep\] 0O [OctalDigits](#prod-OctalDigits)\[?Sep\] [OctalDigits](#prod-OctalDigits)\[Sep\] :: [OctalDigit](#prod-OctalDigit) [OctalDigits](#prod-OctalDigits)\[?Sep\] [OctalDigit](#prod-OctalDigit) \[+Sep\] [OctalDigits](#prod-OctalDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [OctalDigit](#prod-OctalDigit) [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) :: 0 [OctalDigit](#prod-OctalDigit) [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) [OctalDigit](#prod-OctalDigit) [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) :: 0 [NonOctalDigit](#prod-NonOctalDigit) [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) [NonOctalDigit](#prod-NonOctalDigit) [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) [DecimalDigit](#prod-DecimalDigit) [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) :: 0 [OctalDigit](#prod-OctalDigit) [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) [OctalDigit](#prod-OctalDigit) [OctalDigit](#prod-OctalDigit) :: one of 0 1 2 3 4 5 6 7 [NonOctalDigit](#prod-NonOctalDigit) :: one of 8 9 [HexIntegerLiteral](#prod-HexIntegerLiteral)\[Sep\] :: 0x [HexDigits](#prod-HexDigits)\[?Sep\] 0X [HexDigits](#prod-HexDigits)\[?Sep\] [HexDigits](#prod-HexDigits)\[Sep\] :: [HexDigit](#prod-HexDigit) [HexDigits](#prod-HexDigits)\[?Sep\] [HexDigit](#prod-HexDigit) \[+Sep\] [HexDigits](#prod-HexDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) :: one of 0 1 2 3 4 5 6 7 8 9 a b c d e f A B C D E F

The [SourceCharacter](#prod-SourceCharacter) immediately following a [NumericLiteral](#prod-NumericLiteral) must not be an [IdentifierStart](#prod-IdentifierStart) or [DecimalDigit](#prod-DecimalDigit).

Note

For example: `3in` is an error and not the two input elements `3` and `in`.


# 12.9.3.1 Static Semantics: Early Errors

[NumericLiteral](#prod-NumericLiteral) :: [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) :: [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral)

-   It is a Syntax Error if [IsStrict](#sec-isstrict)(this production) is true.

Note

In [non-strict code](#non-strict-code), this syntax is [Legacy](#sec-conformance).


# 12.9.3.2 Static Semantics: MV

A numeric literal stands for a value of the [Number type](#sec-ecmascript-language-types-number-type) or the [BigInt type](#sec-ecmascript-language-types-bigint-type).

-   The MV of [DecimalLiteral](#prod-DecimalLiteral) :: [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) . [DecimalDigits](#prod-DecimalDigits) is the MV of [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) plus (the MV of [DecimalDigits](#prod-DecimalDigits) × 10<sup>\-_n_</sup>), where _n_ is the number of code points in [DecimalDigits](#prod-DecimalDigits), excluding all occurrences of [NumericLiteralSeparator](#prod-NumericLiteralSeparator).
-   The MV of [DecimalLiteral](#prod-DecimalLiteral) :: [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) . [ExponentPart](#prod-ExponentPart) is the MV of [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) × 10<sup>_e_</sup>, where _e_ is the MV of [ExponentPart](#prod-ExponentPart).
-   The MV of [DecimalLiteral](#prod-DecimalLiteral) :: [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) . [DecimalDigits](#prod-DecimalDigits) [ExponentPart](#prod-ExponentPart) is (the MV of [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) plus (the MV of [DecimalDigits](#prod-DecimalDigits) × 10<sup>\-_n_</sup>)) × 10<sup>_e_</sup>, where _n_ is the number of code points in [DecimalDigits](#prod-DecimalDigits), excluding all occurrences of [NumericLiteralSeparator](#prod-NumericLiteralSeparator) and _e_ is the MV of [ExponentPart](#prod-ExponentPart).
-   The MV of [DecimalLiteral](#prod-DecimalLiteral) :: . [DecimalDigits](#prod-DecimalDigits) is the MV of [DecimalDigits](#prod-DecimalDigits) × 10<sup>\-_n_</sup>, where _n_ is the number of code points in [DecimalDigits](#prod-DecimalDigits), excluding all occurrences of [NumericLiteralSeparator](#prod-NumericLiteralSeparator).
-   The MV of [DecimalLiteral](#prod-DecimalLiteral) :: . [DecimalDigits](#prod-DecimalDigits) [ExponentPart](#prod-ExponentPart) is the MV of [DecimalDigits](#prod-DecimalDigits) × 10<sup>_e_ - _n_</sup>, where _n_ is the number of code points in [DecimalDigits](#prod-DecimalDigits), excluding all occurrences of [NumericLiteralSeparator](#prod-NumericLiteralSeparator), and _e_ is the MV of [ExponentPart](#prod-ExponentPart).
-   The MV of [DecimalLiteral](#prod-DecimalLiteral) :: [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) [ExponentPart](#prod-ExponentPart) is the MV of [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) × 10<sup>_e_</sup>, where _e_ is the MV of [ExponentPart](#prod-ExponentPart).
-   The MV of [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) :: 0 is 0.
-   The MV of [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) :: [NonZeroDigit](#prod-NonZeroDigit) [NumericLiteralSeparator](#prod-NumericLiteralSeparator)opt [DecimalDigits](#prod-DecimalDigits) is (the MV of [NonZeroDigit](#prod-NonZeroDigit) × 10<sup>_n_</sup>) plus the MV of [DecimalDigits](#prod-DecimalDigits), where _n_ is the number of code points in [DecimalDigits](#prod-DecimalDigits), excluding all occurrences of [NumericLiteralSeparator](#prod-NumericLiteralSeparator).
-   The MV of [DecimalDigits](#prod-DecimalDigits) :: [DecimalDigits](#prod-DecimalDigits) [DecimalDigit](#prod-DecimalDigit) is (the MV of [DecimalDigits](#prod-DecimalDigits) × 10) plus the MV of [DecimalDigit](#prod-DecimalDigit).
-   The MV of [DecimalDigits](#prod-DecimalDigits) :: [DecimalDigits](#prod-DecimalDigits) [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [DecimalDigit](#prod-DecimalDigit) is (the MV of [DecimalDigits](#prod-DecimalDigits) × 10) plus the MV of [DecimalDigit](#prod-DecimalDigit).
-   The MV of [ExponentPart](#prod-ExponentPart) :: [ExponentIndicator](#prod-ExponentIndicator) [SignedInteger](#prod-SignedInteger) is the MV of [SignedInteger](#prod-SignedInteger).
-   The MV of [SignedInteger](#prod-SignedInteger) :: \- [DecimalDigits](#prod-DecimalDigits) is the negative of the MV of [DecimalDigits](#prod-DecimalDigits).
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 0 or of [HexDigit](#prod-HexDigit) :: 0 or of [OctalDigit](#prod-OctalDigit) :: 0 or of [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) :: 0 or of [BinaryDigit](#prod-BinaryDigit) :: 0 is 0.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 1 or of [NonZeroDigit](#prod-NonZeroDigit) :: 1 or of [HexDigit](#prod-HexDigit) :: 1 or of [OctalDigit](#prod-OctalDigit) :: 1 or of [BinaryDigit](#prod-BinaryDigit) :: 1 is 1.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 2 or of [NonZeroDigit](#prod-NonZeroDigit) :: 2 or of [HexDigit](#prod-HexDigit) :: 2 or of [OctalDigit](#prod-OctalDigit) :: 2 is 2.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 3 or of [NonZeroDigit](#prod-NonZeroDigit) :: 3 or of [HexDigit](#prod-HexDigit) :: 3 or of [OctalDigit](#prod-OctalDigit) :: 3 is 3.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 4 or of [NonZeroDigit](#prod-NonZeroDigit) :: 4 or of [HexDigit](#prod-HexDigit) :: 4 or of [OctalDigit](#prod-OctalDigit) :: 4 is 4.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 5 or of [NonZeroDigit](#prod-NonZeroDigit) :: 5 or of [HexDigit](#prod-HexDigit) :: 5 or of [OctalDigit](#prod-OctalDigit) :: 5 is 5.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 6 or of [NonZeroDigit](#prod-NonZeroDigit) :: 6 or of [HexDigit](#prod-HexDigit) :: 6 or of [OctalDigit](#prod-OctalDigit) :: 6 is 6.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 7 or of [NonZeroDigit](#prod-NonZeroDigit) :: 7 or of [HexDigit](#prod-HexDigit) :: 7 or of [OctalDigit](#prod-OctalDigit) :: 7 is 7.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 8 or of [NonZeroDigit](#prod-NonZeroDigit) :: 8 or of [NonOctalDigit](#prod-NonOctalDigit) :: 8 or of [HexDigit](#prod-HexDigit) :: 8 is 8.
-   The MV of [DecimalDigit](#prod-DecimalDigit) :: 9 or of [NonZeroDigit](#prod-NonZeroDigit) :: 9 or of [NonOctalDigit](#prod-NonOctalDigit) :: 9 or of [HexDigit](#prod-HexDigit) :: 9 is 9.
-   The MV of [HexDigit](#prod-HexDigit) :: a or of [HexDigit](#prod-HexDigit) :: A is 10.
-   The MV of [HexDigit](#prod-HexDigit) :: b or of [HexDigit](#prod-HexDigit) :: B is 11.
-   The MV of [HexDigit](#prod-HexDigit) :: c or of [HexDigit](#prod-HexDigit) :: C is 12.
-   The MV of [HexDigit](#prod-HexDigit) :: d or of [HexDigit](#prod-HexDigit) :: D is 13.
-   The MV of [HexDigit](#prod-HexDigit) :: e or of [HexDigit](#prod-HexDigit) :: E is 14.
-   The MV of [HexDigit](#prod-HexDigit) :: f or of [HexDigit](#prod-HexDigit) :: F is 15.
-   The MV of [BinaryDigits](#prod-BinaryDigits) :: [BinaryDigits](#prod-BinaryDigits) [BinaryDigit](#prod-BinaryDigit) is (the MV of [BinaryDigits](#prod-BinaryDigits) × 2) plus the MV of [BinaryDigit](#prod-BinaryDigit).
-   The MV of [BinaryDigits](#prod-BinaryDigits) :: [BinaryDigits](#prod-BinaryDigits) [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [BinaryDigit](#prod-BinaryDigit) is (the MV of [BinaryDigits](#prod-BinaryDigits) × 2) plus the MV of [BinaryDigit](#prod-BinaryDigit).
-   The MV of [OctalDigits](#prod-OctalDigits) :: [OctalDigits](#prod-OctalDigits) [OctalDigit](#prod-OctalDigit) is (the MV of [OctalDigits](#prod-OctalDigits) × 8) plus the MV of [OctalDigit](#prod-OctalDigit).
-   The MV of [OctalDigits](#prod-OctalDigits) :: [OctalDigits](#prod-OctalDigits) [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [OctalDigit](#prod-OctalDigit) is (the MV of [OctalDigits](#prod-OctalDigits) × 8) plus the MV of [OctalDigit](#prod-OctalDigit).
-   The MV of [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) :: [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) [OctalDigit](#prod-OctalDigit) is (the MV of [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) times 8) plus the MV of [OctalDigit](#prod-OctalDigit).
-   The MV of [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) :: [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) [NonOctalDigit](#prod-NonOctalDigit) is (the MV of [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) times 10) plus the MV of [NonOctalDigit](#prod-NonOctalDigit).
-   The MV of [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) :: [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) [DecimalDigit](#prod-DecimalDigit) is (the MV of [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) times 10) plus the MV of [DecimalDigit](#prod-DecimalDigit).
-   The MV of [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) :: [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) [OctalDigit](#prod-OctalDigit) is (the MV of [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) times 10) plus the MV of [OctalDigit](#prod-OctalDigit).
-   The MV of [HexDigits](#prod-HexDigits) :: [HexDigits](#prod-HexDigits) [HexDigit](#prod-HexDigit) is (the MV of [HexDigits](#prod-HexDigits) × 16) plus the MV of [HexDigit](#prod-HexDigit).
-   The MV of [HexDigits](#prod-HexDigits) :: [HexDigits](#prod-HexDigits) [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [HexDigit](#prod-HexDigit) is (the MV of [HexDigits](#prod-HexDigits) × 16) plus the MV of [HexDigit](#prod-HexDigit).


# 12.9.3.3 Static Semantics: NumericValue

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) NumericValue takes no arguments and returns a Number or a BigInt. It is defined piecewise over the following productions:

[NumericLiteral](#prod-NumericLiteral) :: [DecimalLiteral](#prod-DecimalLiteral)

1.  Return [RoundMVResult](#sec-roundmvresult)(MV of [DecimalLiteral](#prod-DecimalLiteral)).

[NumericLiteral](#prod-NumericLiteral) :: [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)

1.  Return [𝔽](#𝔽)(MV of [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)).

[NumericLiteral](#prod-NumericLiteral) :: [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral)

1.  Return [𝔽](#𝔽)(MV of [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral)).

[NumericLiteral](#prod-NumericLiteral) :: [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral) [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix)

1.  Return the [BigInt value for](#bigint-value-for) the MV of [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral).

[DecimalBigIntegerLiteral](#prod-DecimalBigIntegerLiteral) :: 0 [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix)

1.  Return 0<sub>ℤ</sub>.

[DecimalBigIntegerLiteral](#prod-DecimalBigIntegerLiteral) :: [NonZeroDigit](#prod-NonZeroDigit) [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix)

1.  Return the [BigInt value for](#bigint-value-for) the MV of [NonZeroDigit](#prod-NonZeroDigit).

[DecimalBigIntegerLiteral](#prod-DecimalBigIntegerLiteral) :: [NonZeroDigit](#prod-NonZeroDigit) [DecimalDigits](#prod-DecimalDigits) [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [NonZeroDigit](#prod-NonZeroDigit) [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [DecimalDigits](#prod-DecimalDigits) [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix)

1.  Let _n_ be the number of code points in [DecimalDigits](#prod-DecimalDigits), excluding all occurrences of [NumericLiteralSeparator](#prod-NumericLiteralSeparator).
2.  Let _mv_ be (the MV of [NonZeroDigit](#prod-NonZeroDigit) × 10<sup>_n_</sup>) plus the MV of [DecimalDigits](#prod-DecimalDigits).
3.  Return [ℤ](#ℤ)(_mv_).


# 12.9.4 String Literals

Note 1

A string literal is 0 or more Unicode code points enclosed in single or double quotes. Unicode code points may also be represented by an escape sequence. All code points may appear literally in a string literal except for the closing quote code points, U+005C (REVERSE SOLIDUS), U+000D (CARRIAGE RETURN), and U+000A (LINE FEED). Any code points may appear in the form of an escape sequence. String literals evaluate to ECMAScript String values. When generating these String values Unicode code points are UTF-16 encoded as defined in [11.1.1](#sec-utf16encodecodepoint). Code points belonging to the Basic Multilingual Plane are encoded as a single code unit element of the string. All other code points are encoded as two code unit elements of the string.


## Syntax

[StringLiteral](#prod-StringLiteral) :: " [DoubleStringCharacters](#prod-DoubleStringCharacters)opt " ' [SingleStringCharacters](#prod-SingleStringCharacters)opt ' [DoubleStringCharacters](#prod-DoubleStringCharacters) :: [DoubleStringCharacter](#prod-DoubleStringCharacter) [DoubleStringCharacters](#prod-DoubleStringCharacters)opt [SingleStringCharacters](#prod-SingleStringCharacters) :: [SingleStringCharacter](#prod-SingleStringCharacter) [SingleStringCharacters](#prod-SingleStringCharacters)opt [DoubleStringCharacter](#prod-DoubleStringCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of " or \\ or [LineTerminator](#prod-LineTerminator) <LS> <PS> \\ [EscapeSequence](#prod-EscapeSequence) [LineContinuation](#prod-LineContinuation) [SingleStringCharacter](#prod-SingleStringCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of ' or \\ or [LineTerminator](#prod-LineTerminator) <LS> <PS> \\ [EscapeSequence](#prod-EscapeSequence) [LineContinuation](#prod-LineContinuation) [LineContinuation](#prod-LineContinuation) :: \\ [LineTerminatorSequence](#prod-LineTerminatorSequence) [EscapeSequence](#prod-EscapeSequence) :: [CharacterEscapeSequence](#prod-CharacterEscapeSequence) 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) [HexEscapeSequence](#prod-HexEscapeSequence) [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [CharacterEscapeSequence](#prod-CharacterEscapeSequence) :: [SingleEscapeCharacter](#prod-SingleEscapeCharacter) [NonEscapeCharacter](#prod-NonEscapeCharacter) [SingleEscapeCharacter](#prod-SingleEscapeCharacter) :: one of ' " \\ b f n r t v [NonEscapeCharacter](#prod-NonEscapeCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of [EscapeCharacter](#prod-EscapeCharacter) or [LineTerminator](#prod-LineTerminator) [EscapeCharacter](#prod-EscapeCharacter) :: [SingleEscapeCharacter](#prod-SingleEscapeCharacter) [DecimalDigit](#prod-DecimalDigit) x u [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) :: 0 \[lookahead ∈ { 8, 9 }\] [NonZeroOctalDigit](#prod-NonZeroOctalDigit) \[lookahead ∉ [OctalDigit](#prod-OctalDigit)\] [ZeroToThree](#prod-ZeroToThree) [OctalDigit](#prod-OctalDigit) \[lookahead ∉ [OctalDigit](#prod-OctalDigit)\] [FourToSeven](#prod-FourToSeven) [OctalDigit](#prod-OctalDigit) [ZeroToThree](#prod-ZeroToThree) [OctalDigit](#prod-OctalDigit) [OctalDigit](#prod-OctalDigit) [NonZeroOctalDigit](#prod-NonZeroOctalDigit) :: [OctalDigit](#prod-OctalDigit) but not 0 [ZeroToThree](#prod-ZeroToThree) :: one of 0 1 2 3 [FourToSeven](#prod-FourToSeven) :: one of 4 5 6 7 [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) :: one of 8 9 [HexEscapeSequence](#prod-HexEscapeSequence) :: x [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) :: u [Hex4Digits](#prod-Hex4Digits) u{ [CodePoint](#prod-CodePoint) } [Hex4Digits](#prod-Hex4Digits) :: [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit)

The definition of the nonterminal [HexDigit](#prod-HexDigit) is given in [12.9.3](#sec-literals-numeric-literals). [SourceCharacter](#prod-SourceCharacter) is defined in [11.1](#sec-source-text).

Note 2

<LF> and <CR> cannot appear in a string literal, except as part of a [LineContinuation](#prod-LineContinuation) to produce the empty code points sequence. The proper way to include either in the String value of a string literal is to use an escape sequence such as `\n` or `\u000A`.


# 12.9.4.1 Static Semantics: Early Errors

[EscapeSequence](#prod-EscapeSequence) :: [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence)

-   It is a Syntax Error if [IsStrict](#sec-isstrict)(this production) is true.

Note 1

In [non-strict code](#non-strict-code), this syntax is [Legacy](#sec-conformance).

Note 2

It is possible for string literals to precede a [Use Strict Directive](#use-strict-directive) that places the enclosing code in [strict mode](#sec-strict-mode-code), and implementations must take care to enforce the above rules for such literals. For example, the following source text contains a Syntax Error:

```
function invalid() { "\7"; "use strict"; }
```


# 12.9.4.2 Static Semantics: SV

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) SV takes no arguments and returns a String.

A string literal stands for a value of the [String type](#sec-ecmascript-language-types-string-type). SV produces String values for string literals through recursive application on the various parts of the string literal. As part of this process, some Unicode code points within the string literal are interpreted as having a [mathematical value](#mathematical-value), as described below or in [12.9.3](#sec-literals-numeric-literals).

-   The SV of [StringLiteral](#prod-StringLiteral) :: " " is the empty String.
-   The SV of [StringLiteral](#prod-StringLiteral) :: ' ' is the empty String.
-   The SV of [DoubleStringCharacters](#prod-DoubleStringCharacters) :: [DoubleStringCharacter](#prod-DoubleStringCharacter) [DoubleStringCharacters](#prod-DoubleStringCharacters) is the [string-concatenation](#string-concatenation) of the SV of [DoubleStringCharacter](#prod-DoubleStringCharacter) and the SV of [DoubleStringCharacters](#prod-DoubleStringCharacters).
-   The SV of [SingleStringCharacters](#prod-SingleStringCharacters) :: [SingleStringCharacter](#prod-SingleStringCharacter) [SingleStringCharacters](#prod-SingleStringCharacters) is the [string-concatenation](#string-concatenation) of the SV of [SingleStringCharacter](#prod-SingleStringCharacter) and the SV of [SingleStringCharacters](#prod-SingleStringCharacters).
-   The SV of [DoubleStringCharacter](#prod-DoubleStringCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of " or \\ or [LineTerminator](#prod-LineTerminator) is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the code point matched by [SourceCharacter](#prod-SourceCharacter).
-   The SV of [DoubleStringCharacter](#prod-DoubleStringCharacter) :: <LS> is the String value consisting of the code unit 0x2028 (LINE SEPARATOR).
-   The SV of [DoubleStringCharacter](#prod-DoubleStringCharacter) :: <PS> is the String value consisting of the code unit 0x2029 (PARAGRAPH SEPARATOR).
-   The SV of [DoubleStringCharacter](#prod-DoubleStringCharacter) :: [LineContinuation](#prod-LineContinuation) is the empty String.
-   The SV of [SingleStringCharacter](#prod-SingleStringCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of ' or \\ or [LineTerminator](#prod-LineTerminator) is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the code point matched by [SourceCharacter](#prod-SourceCharacter).
-   The SV of [SingleStringCharacter](#prod-SingleStringCharacter) :: <LS> is the String value consisting of the code unit 0x2028 (LINE SEPARATOR).
-   The SV of [SingleStringCharacter](#prod-SingleStringCharacter) :: <PS> is the String value consisting of the code unit 0x2029 (PARAGRAPH SEPARATOR).
-   The SV of [SingleStringCharacter](#prod-SingleStringCharacter) :: [LineContinuation](#prod-LineContinuation) is the empty String.
-   The SV of [EscapeSequence](#prod-EscapeSequence) :: 0 is the String value consisting of the code unit 0x0000 (NULL).
-   The SV of [CharacterEscapeSequence](#prod-CharacterEscapeSequence) :: [SingleEscapeCharacter](#prod-SingleEscapeCharacter) is the String value consisting of the code unit whose numeric value is determined by the [SingleEscapeCharacter](#prod-SingleEscapeCharacter) according to [Table 35](#table-string-single-character-escape-sequences).

Table 35: String Single Character Escape Sequences

<table><thead><tr><th>Escape Sequence</th><th>Code Unit Value</th><th>Unicode Character Name</th><th>Symbol</th></tr></thead><tbody><tr><td><code>\b</code></td><td><code>0x0008</code></td><td>BACKSPACE</td><td>&lt;BS&gt;</td></tr><tr><td><code>\t</code></td><td><code>0x0009</code></td><td>CHARACTER TABULATION</td><td>&lt;HT&gt;</td></tr><tr><td><code>\n</code></td><td><code>0x000A</code></td><td>LINE FEED (LF)</td><td>&lt;LF&gt;</td></tr><tr><td><code>\v</code></td><td><code>0x000B</code></td><td>LINE TABULATION</td><td>&lt;VT&gt;</td></tr><tr><td><code>\f</code></td><td><code>0x000C</code></td><td>FORM FEED (FF)</td><td>&lt;FF&gt;</td></tr><tr><td><code>\r</code></td><td><code>0x000D</code></td><td>CARRIAGE RETURN (CR)</td><td>&lt;CR&gt;</td></tr><tr><td><code>\"</code></td><td><code>0x0022</code></td><td>QUOTATION MARK</td><td><code>"</code></td></tr><tr><td><code>\'</code></td><td><code>0x0027</code></td><td>APOSTROPHE</td><td><code>'</code></td></tr><tr><td><code>\\</code></td><td><code>0x005C</code></td><td>REVERSE SOLIDUS</td><td><code>\</code></td></tr></tbody></table>

-   The SV of [NonEscapeCharacter](#prod-NonEscapeCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of [EscapeCharacter](#prod-EscapeCharacter) or [LineTerminator](#prod-LineTerminator) is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the code point matched by [SourceCharacter](#prod-SourceCharacter).
-   The SV of [EscapeSequence](#prod-EscapeSequence) :: [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) is the String value consisting of the code unit whose numeric value is the MV of [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence).
-   The SV of [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) :: 8 is the String value consisting of the code unit 0x0038 (DIGIT EIGHT).
-   The SV of [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) :: 9 is the String value consisting of the code unit 0x0039 (DIGIT NINE).
-   The SV of [HexEscapeSequence](#prod-HexEscapeSequence) :: x [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) is the String value consisting of the code unit whose numeric value is the MV of [HexEscapeSequence](#prod-HexEscapeSequence).
-   The SV of [Hex4Digits](#prod-Hex4Digits) :: [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) is the String value consisting of the code unit whose numeric value is the MV of [Hex4Digits](#prod-Hex4Digits).
-   The SV of [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) :: u{ [CodePoint](#prod-CodePoint) } is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the MV of [CodePoint](#prod-CodePoint).
-   The SV of [TemplateEscapeSequence](#prod-TemplateEscapeSequence) :: 0 is the String value consisting of the code unit 0x0000 (NULL).


# 12.9.4.3 Static Semantics: MV

-   The MV of [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) :: [ZeroToThree](#prod-ZeroToThree) [OctalDigit](#prod-OctalDigit) is (8 times the MV of [ZeroToThree](#prod-ZeroToThree)) plus the MV of [OctalDigit](#prod-OctalDigit).
-   The MV of [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) :: [FourToSeven](#prod-FourToSeven) [OctalDigit](#prod-OctalDigit) is (8 times the MV of [FourToSeven](#prod-FourToSeven)) plus the MV of [OctalDigit](#prod-OctalDigit).
-   The MV of [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) :: [ZeroToThree](#prod-ZeroToThree) [OctalDigit](#prod-OctalDigit) [OctalDigit](#prod-OctalDigit) is (64 (that is, 8<sup>2</sup>) times the MV of [ZeroToThree](#prod-ZeroToThree)) plus (8 times the MV of the first [OctalDigit](#prod-OctalDigit)) plus the MV of the second [OctalDigit](#prod-OctalDigit).
-   The MV of [ZeroToThree](#prod-ZeroToThree) :: 0 is 0.
-   The MV of [ZeroToThree](#prod-ZeroToThree) :: 1 is 1.
-   The MV of [ZeroToThree](#prod-ZeroToThree) :: 2 is 2.
-   The MV of [ZeroToThree](#prod-ZeroToThree) :: 3 is 3.
-   The MV of [FourToSeven](#prod-FourToSeven) :: 4 is 4.
-   The MV of [FourToSeven](#prod-FourToSeven) :: 5 is 5.
-   The MV of [FourToSeven](#prod-FourToSeven) :: 6 is 6.
-   The MV of [FourToSeven](#prod-FourToSeven) :: 7 is 7.
-   The MV of [HexEscapeSequence](#prod-HexEscapeSequence) :: x [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) is (16 times the MV of the first [HexDigit](#prod-HexDigit)) plus the MV of the second [HexDigit](#prod-HexDigit).
-   The MV of [Hex4Digits](#prod-Hex4Digits) :: [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) is (0x1000 × the MV of the first [HexDigit](#prod-HexDigit)) plus (0x100 × the MV of the second [HexDigit](#prod-HexDigit)) plus (0x10 × the MV of the third [HexDigit](#prod-HexDigit)) plus the MV of the fourth [HexDigit](#prod-HexDigit).


# 12.9.5 Regular Expression Literals

Note 1

A regular expression literal is an input element that is converted to a RegExp object (see [22.2](#sec-regexp-regular-expression-objects)) each time the literal is evaluated. Two regular expression literals in a program evaluate to regular expression objects that never compare as `===` to each other even if the two literals' contents are identical. A RegExp object may also be created at runtime by `new RegExp` or calling the RegExp [constructor](#constructor) as a function (see [22.2.4](#sec-regexp-constructor)).

The productions below describe the syntax for a regular expression literal and are used by the input element scanner to find the end of the regular expression literal. The source text comprising the [RegularExpressionBody](#prod-RegularExpressionBody) and the [RegularExpressionFlags](#prod-RegularExpressionFlags) are subsequently parsed again using the more stringent ECMAScript Regular Expression grammar ([22.2.1](#sec-patterns)).

An implementation may extend the ECMAScript Regular Expression grammar defined in [22.2.1](#sec-patterns), but it must not extend the [RegularExpressionBody](#prod-RegularExpressionBody) and [RegularExpressionFlags](#prod-RegularExpressionFlags) productions defined below or the productions used by these productions.


## Syntax

[RegularExpressionLiteral](#prod-RegularExpressionLiteral) :: / [RegularExpressionBody](#prod-RegularExpressionBody) / [RegularExpressionFlags](#prod-RegularExpressionFlags) [RegularExpressionBody](#prod-RegularExpressionBody) :: [RegularExpressionFirstChar](#prod-RegularExpressionFirstChar) [RegularExpressionChars](#prod-RegularExpressionChars) [RegularExpressionChars](#prod-RegularExpressionChars) :: \[empty\] [RegularExpressionChars](#prod-RegularExpressionChars) [RegularExpressionChar](#prod-RegularExpressionChar) [RegularExpressionFirstChar](#prod-RegularExpressionFirstChar) :: [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) but not one of \* or \\ or / or \[[RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) [RegularExpressionClass](#prod-RegularExpressionClass) [RegularExpressionChar](#prod-RegularExpressionChar) :: [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) but not one of \\ or / or \[[RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) [RegularExpressionClass](#prod-RegularExpressionClass) [RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) :: \\ [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) :: [SourceCharacter](#prod-SourceCharacter) but not [LineTerminator](#prod-LineTerminator) [RegularExpressionClass](#prod-RegularExpressionClass) :: \[[RegularExpressionClassChars](#prod-RegularExpressionClassChars) \] [RegularExpressionClassChars](#prod-RegularExpressionClassChars) :: \[empty\] [RegularExpressionClassChars](#prod-RegularExpressionClassChars) [RegularExpressionClassChar](#prod-RegularExpressionClassChar) [RegularExpressionClassChar](#prod-RegularExpressionClassChar) :: [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) but not one of \] or \\ [RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) [RegularExpressionFlags](#prod-RegularExpressionFlags) :: \[empty\] [RegularExpressionFlags](#prod-RegularExpressionFlags) [IdentifierPartChar](#prod-IdentifierPartChar) Note 2

Regular expression literals may not be empty; instead of representing an empty regular expression literal, the code unit sequence `//` starts a single-line comment. To specify an empty regular expression, use: `/(?:)/`.


# 12.9.5.1 Static Semantics: BodyText

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) BodyText takes no arguments and returns source text. It is defined piecewise over the following productions:

[RegularExpressionLiteral](#prod-RegularExpressionLiteral) :: / [RegularExpressionBody](#prod-RegularExpressionBody) / [RegularExpressionFlags](#prod-RegularExpressionFlags)

1.  Return the source text that was recognized as [RegularExpressionBody](#prod-RegularExpressionBody).


# 12.9.5.2 Static Semantics: FlagText

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) FlagText takes no arguments and returns source text. It is defined piecewise over the following productions:

[RegularExpressionLiteral](#prod-RegularExpressionLiteral) :: / [RegularExpressionBody](#prod-RegularExpressionBody) / [RegularExpressionFlags](#prod-RegularExpressionFlags)

1.  Return the source text that was recognized as [RegularExpressionFlags](#prod-RegularExpressionFlags).


# 12.9.6 Template Literal Lexical Components


## Syntax

[Template](#prod-Template) :: [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) [TemplateHead](#prod-TemplateHead) [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) :: \` [TemplateCharacters](#prod-TemplateCharacters)opt \` [TemplateHead](#prod-TemplateHead) :: \` [TemplateCharacters](#prod-TemplateCharacters)opt ${ [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) :: [TemplateMiddle](#prod-TemplateMiddle) [TemplateTail](#prod-TemplateTail) [TemplateMiddle](#prod-TemplateMiddle) :: } [TemplateCharacters](#prod-TemplateCharacters)opt ${ [TemplateTail](#prod-TemplateTail) :: } [TemplateCharacters](#prod-TemplateCharacters)opt \` [TemplateCharacters](#prod-TemplateCharacters) :: [TemplateCharacter](#prod-TemplateCharacter) [TemplateCharacters](#prod-TemplateCharacters)opt [TemplateCharacter](#prod-TemplateCharacter) :: $ \[lookahead ≠ {\] \\ [TemplateEscapeSequence](#prod-TemplateEscapeSequence) \\ [NotEscapeSequence](#prod-NotEscapeSequence) [LineContinuation](#prod-LineContinuation) [LineTerminatorSequence](#prod-LineTerminatorSequence) [SourceCharacter](#prod-SourceCharacter) but not one of \` or \\ or $ or [LineTerminator](#prod-LineTerminator) [TemplateEscapeSequence](#prod-TemplateEscapeSequence) :: [CharacterEscapeSequence](#prod-CharacterEscapeSequence) 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [HexEscapeSequence](#prod-HexEscapeSequence) [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [NotEscapeSequence](#prod-NotEscapeSequence) :: 0 [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) but not 0 x \[lookahead ∉ [HexDigit](#prod-HexDigit)\] x [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u \[lookahead ∉ [HexDigit](#prod-HexDigit)\] \[lookahead ≠ {\] u [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u { \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u { [NotCodePoint](#prod-NotCodePoint) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u { [CodePoint](#prod-CodePoint) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] \[lookahead ≠ }\] [NotCodePoint](#prod-NotCodePoint) :: [HexDigits](#prod-HexDigits)\[~Sep\] but only if the MV of [HexDigits](#prod-HexDigits) > 0x10FFFF [CodePoint](#prod-CodePoint) :: [HexDigits](#prod-HexDigits)\[~Sep\] but only if the MV of [HexDigits](#prod-HexDigits) ≤ 0x10FFFF Note

[TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) is used by the [InputElementTemplateTail](#prod-InputElementTemplateTail) alternative lexical goal.


# 12.9.6.1 Static Semantics: TV

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) TV takes no arguments and returns a String or undefined. A template literal component is interpreted by TV as a value of the [String type](#sec-ecmascript-language-types-string-type). TV is used to construct the indexed components of a template object (colloquially, the template values). In TV, escape sequences are replaced by the UTF-16 code unit(s) of the Unicode code point represented by the escape sequence.

-   The TV of [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) :: \` \` is the empty String.
-   The TV of [TemplateHead](#prod-TemplateHead) :: \` ${ is the empty String.
-   The TV of [TemplateMiddle](#prod-TemplateMiddle) :: } ${ is the empty String.
-   The TV of [TemplateTail](#prod-TemplateTail) :: } \` is the empty String.
-   The TV of [TemplateCharacters](#prod-TemplateCharacters) :: [TemplateCharacter](#prod-TemplateCharacter) [TemplateCharacters](#prod-TemplateCharacters) is undefined if the TV of [TemplateCharacter](#prod-TemplateCharacter) is undefined or the TV of [TemplateCharacters](#prod-TemplateCharacters) is undefined. Otherwise, it is the [string-concatenation](#string-concatenation) of the TV of [TemplateCharacter](#prod-TemplateCharacter) and the TV of [TemplateCharacters](#prod-TemplateCharacters).
-   The TV of [TemplateCharacter](#prod-TemplateCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of \` or \\ or $ or [LineTerminator](#prod-LineTerminator) is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the code point matched by [SourceCharacter](#prod-SourceCharacter).
-   The TV of [TemplateCharacter](#prod-TemplateCharacter) :: $ is the String value consisting of the code unit 0x0024 (DOLLAR SIGN).
-   The TV of [TemplateCharacter](#prod-TemplateCharacter) :: \\ [TemplateEscapeSequence](#prod-TemplateEscapeSequence) is the [SV](#sec-static-semantics-sv) of [TemplateEscapeSequence](#prod-TemplateEscapeSequence).
-   The TV of [TemplateCharacter](#prod-TemplateCharacter) :: \\ [NotEscapeSequence](#prod-NotEscapeSequence) is undefined.
-   The TV of [TemplateCharacter](#prod-TemplateCharacter) :: [LineTerminatorSequence](#prod-LineTerminatorSequence) is the [TRV](#sec-static-semantics-trv) of [LineTerminatorSequence](#prod-LineTerminatorSequence).
-   The TV of [LineContinuation](#prod-LineContinuation) :: \\ [LineTerminatorSequence](#prod-LineTerminatorSequence) is the empty String.


# 12.9.6.2 Static Semantics: TRV

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) TRV takes no arguments and returns a String. A template literal component is interpreted by TRV as a value of the [String type](#sec-ecmascript-language-types-string-type). TRV is used to construct the raw components of a template object (colloquially, the template raw values). TRV is similar to [TV](#sec-static-semantics-tv) with the difference being that in TRV, escape sequences are interpreted as they appear in the literal.

-   The TRV of [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) :: \` \` is the empty String.
-   The TRV of [TemplateHead](#prod-TemplateHead) :: \` ${ is the empty String.
-   The TRV of [TemplateMiddle](#prod-TemplateMiddle) :: } ${ is the empty String.
-   The TRV of [TemplateTail](#prod-TemplateTail) :: } \` is the empty String.
-   The TRV of [TemplateCharacters](#prod-TemplateCharacters) :: [TemplateCharacter](#prod-TemplateCharacter) [TemplateCharacters](#prod-TemplateCharacters) is the [string-concatenation](#string-concatenation) of the TRV of [TemplateCharacter](#prod-TemplateCharacter) and the TRV of [TemplateCharacters](#prod-TemplateCharacters).
-   The TRV of [TemplateCharacter](#prod-TemplateCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of \` or \\ or $ or [LineTerminator](#prod-LineTerminator) is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the code point matched by [SourceCharacter](#prod-SourceCharacter).
-   The TRV of [TemplateCharacter](#prod-TemplateCharacter) :: $ is the String value consisting of the code unit 0x0024 (DOLLAR SIGN).
-   The TRV of [TemplateCharacter](#prod-TemplateCharacter) :: \\ [TemplateEscapeSequence](#prod-TemplateEscapeSequence) is the [string-concatenation](#string-concatenation) of the code unit 0x005C (REVERSE SOLIDUS) and the TRV of [TemplateEscapeSequence](#prod-TemplateEscapeSequence).
-   The TRV of [TemplateCharacter](#prod-TemplateCharacter) :: \\ [NotEscapeSequence](#prod-NotEscapeSequence) is the [string-concatenation](#string-concatenation) of the code unit 0x005C (REVERSE SOLIDUS) and the TRV of [NotEscapeSequence](#prod-NotEscapeSequence).
-   The TRV of [TemplateEscapeSequence](#prod-TemplateEscapeSequence) :: 0 is the String value consisting of the code unit 0x0030 (DIGIT ZERO).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: 0 [DecimalDigit](#prod-DecimalDigit) is the [string-concatenation](#string-concatenation) of the code unit 0x0030 (DIGIT ZERO) and the TRV of [DecimalDigit](#prod-DecimalDigit).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: x \[lookahead ∉ [HexDigit](#prod-HexDigit)\] is the String value consisting of the code unit 0x0078 (LATIN SMALL LETTER X).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: x [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] is the [string-concatenation](#string-concatenation) of the code unit 0x0078 (LATIN SMALL LETTER X) and the TRV of [HexDigit](#prod-HexDigit).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: u \[lookahead ∉ [HexDigit](#prod-HexDigit)\] \[lookahead ≠ {\] is the String value consisting of the code unit 0x0075 (LATIN SMALL LETTER U).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: u [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U) and the TRV of [HexDigit](#prod-HexDigit).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: u [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U), the TRV of the first [HexDigit](#prod-HexDigit), and the TRV of the second [HexDigit](#prod-HexDigit).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: u [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U), the TRV of the first [HexDigit](#prod-HexDigit), the TRV of the second [HexDigit](#prod-HexDigit), and the TRV of the third [HexDigit](#prod-HexDigit).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: u { \[lookahead ∉ [HexDigit](#prod-HexDigit)\] is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U) and the code unit 0x007B (LEFT CURLY BRACKET).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: u { [NotCodePoint](#prod-NotCodePoint) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U), the code unit 0x007B (LEFT CURLY BRACKET), and the TRV of [NotCodePoint](#prod-NotCodePoint).
-   The TRV of [NotEscapeSequence](#prod-NotEscapeSequence) :: u { [CodePoint](#prod-CodePoint) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] \[lookahead ≠ }\] is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U), the code unit 0x007B (LEFT CURLY BRACKET), and the TRV of [CodePoint](#prod-CodePoint).
-   The TRV of [DecimalDigit](#prod-DecimalDigit) :: one of 0 1 2 3 4 5 6 7 8 9 is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the single code point matched by this production.
-   The TRV of [CharacterEscapeSequence](#prod-CharacterEscapeSequence) :: [NonEscapeCharacter](#prod-NonEscapeCharacter) is the [SV](#sec-static-semantics-sv) of [NonEscapeCharacter](#prod-NonEscapeCharacter).
-   The TRV of [SingleEscapeCharacter](#prod-SingleEscapeCharacter) :: one of ' " \\ b f n r t v is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the single code point matched by this production.
-   The TRV of [HexEscapeSequence](#prod-HexEscapeSequence) :: x [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) is the [string-concatenation](#string-concatenation) of the code unit 0x0078 (LATIN SMALL LETTER X), the TRV of the first [HexDigit](#prod-HexDigit), and the TRV of the second [HexDigit](#prod-HexDigit).
-   The TRV of [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) :: u [Hex4Digits](#prod-Hex4Digits) is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U) and the TRV of [Hex4Digits](#prod-Hex4Digits).
-   The TRV of [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) :: u{ [CodePoint](#prod-CodePoint) } is the [string-concatenation](#string-concatenation) of the code unit 0x0075 (LATIN SMALL LETTER U), the code unit 0x007B (LEFT CURLY BRACKET), the TRV of [CodePoint](#prod-CodePoint), and the code unit 0x007D (RIGHT CURLY BRACKET).
-   The TRV of [Hex4Digits](#prod-Hex4Digits) :: [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) is the [string-concatenation](#string-concatenation) of the TRV of the first [HexDigit](#prod-HexDigit), the TRV of the second [HexDigit](#prod-HexDigit), the TRV of the third [HexDigit](#prod-HexDigit), and the TRV of the fourth [HexDigit](#prod-HexDigit).
-   The TRV of [HexDigits](#prod-HexDigits) :: [HexDigits](#prod-HexDigits) [HexDigit](#prod-HexDigit) is the [string-concatenation](#string-concatenation) of the TRV of [HexDigits](#prod-HexDigits) and the TRV of [HexDigit](#prod-HexDigit).
-   The TRV of [HexDigit](#prod-HexDigit) :: one of 0 1 2 3 4 5 6 7 8 9 a b c d e f A B C D E F is the result of performing [UTF16EncodeCodePoint](#sec-utf16encodecodepoint) on the single code point matched by this production.
-   The TRV of [LineContinuation](#prod-LineContinuation) :: \\ [LineTerminatorSequence](#prod-LineTerminatorSequence) is the [string-concatenation](#string-concatenation) of the code unit 0x005C (REVERSE SOLIDUS) and the TRV of [LineTerminatorSequence](#prod-LineTerminatorSequence).
-   The TRV of [LineTerminatorSequence](#prod-LineTerminatorSequence) :: <LF> is the String value consisting of the code unit 0x000A (LINE FEED).
-   The TRV of [LineTerminatorSequence](#prod-LineTerminatorSequence) :: <CR> is the String value consisting of the code unit 0x000A (LINE FEED).
-   The TRV of [LineTerminatorSequence](#prod-LineTerminatorSequence) :: <LS> is the String value consisting of the code unit 0x2028 (LINE SEPARATOR).
-   The TRV of [LineTerminatorSequence](#prod-LineTerminatorSequence) :: <PS> is the String value consisting of the code unit 0x2029 (PARAGRAPH SEPARATOR).
-   The TRV of [LineTerminatorSequence](#prod-LineTerminatorSequence) :: <CR> <LF> is the String value consisting of the code unit 0x000A (LINE FEED).

Note

[TV](#sec-static-semantics-tv) excludes the code units of [LineContinuation](#prod-LineContinuation) while TRV includes them. <CR><LF> and <CR> [LineTerminatorSequence](#prod-LineTerminatorSequence)s are normalized to <LF> for both [TV](#sec-static-semantics-tv) and TRV. An explicit [TemplateEscapeSequence](#prod-TemplateEscapeSequence) is needed to include a <CR> or <CR><LF> sequence.


# 12.10 Automatic Semicolon Insertion

Most ECMAScript statements and declarations must be terminated with a semicolon. Such semicolons may always appear explicitly in the source text. For convenience, however, such semicolons may be omitted from the source text in certain situations. These situations are described by saying that semicolons are automatically inserted into the source code token stream in those situations.


# 12.10.1 Rules of Automatic Semicolon Insertion

In the following rules, “token” means the actual recognized lexical token determined using the current lexical [goal symbol](#sec-context-free-grammars) as described in clause [12](#sec-ecmascript-language-lexical-grammar).

There are three basic rules of semicolon insertion:

1.  When, as the source text is parsed from left to right, a token (called the *offending token*) is encountered that is not allowed by any production of the grammar, then a semicolon is automatically inserted before the offending token if one or more of the following conditions is true:
    
    -   The offending token is separated from the previous token by at least one [LineTerminator](#prod-LineTerminator).
    -   The offending token is `}`.
    -   The previous token is `)` and the inserted semicolon would then be parsed as the terminating semicolon of a do-while statement ([14.7.2](#sec-do-while-statement)).
2.  When, as the source text is parsed from left to right, the end of the input stream of tokens is encountered and the parser is unable to parse the input token stream as a single instance of the goal nonterminal, then a semicolon is automatically inserted at the end of the input stream.
3.  When, as the source text is parsed from left to right, a token is encountered that is allowed by some production of the grammar, but the production is a *restricted production* and the token would be the first token for a terminal or nonterminal immediately following the annotation “\[no [LineTerminator](#prod-LineTerminator) here\]” within the restricted production (and therefore such a token is called a restricted token), and the restricted token is separated from the previous token by at least one [LineTerminator](#prod-LineTerminator), then a semicolon is automatically inserted before the restricted token.

However, there is an additional overriding condition on the preceding rules: a semicolon is never inserted automatically if the semicolon would then be parsed as an empty statement or if that semicolon would become one of the two semicolons in the header of a `for` statement (see [14.7.4](#sec-for-statement)).

Note

The following are the only restricted productions in the grammar:

[UpdateExpression](#prod-UpdateExpression)\[Yield, Await\] : [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] ++ [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \-- [ContinueStatement](#prod-ContinueStatement)\[Yield, Await\] : continue ; continue \[no [LineTerminator](#prod-LineTerminator) here\] [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] ; [BreakStatement](#prod-BreakStatement)\[Yield, Await\] : break ; break \[no [LineTerminator](#prod-LineTerminator) here\] [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] ; [ReturnStatement](#prod-ReturnStatement)\[Yield, Await\] : return ; return \[no [LineTerminator](#prod-LineTerminator) here\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ; [ThrowStatement](#prod-ThrowStatement)\[Yield, Await\] : throw \[no [LineTerminator](#prod-LineTerminator) here\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ; [YieldExpression](#prod-YieldExpression)\[In, Await\] : yield yield \[no [LineTerminator](#prod-LineTerminator) here\] [AssignmentExpression](#prod-AssignmentExpression)\[?In, +Yield, ?Await\] yield \[no [LineTerminator](#prod-LineTerminator) here\] \* [AssignmentExpression](#prod-AssignmentExpression)\[?In, +Yield, ?Await\] [ArrowFunction](#prod-ArrowFunction)\[In, Yield, Await\] : [ArrowParameters](#prod-ArrowParameters)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [ConciseBody](#prod-ConciseBody)\[?In\] [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration)\[Yield, Await, Default\] : async \[no [LineTerminator](#prod-LineTerminator) here\] function [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } \[+Default\] async \[no [LineTerminator](#prod-LineTerminator) here\] function ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async \[no [LineTerminator](#prod-LineTerminator) here\] function [BindingIdentifier](#prod-BindingIdentifier)\[~Yield, +Await\]opt ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncMethod](#prod-AsyncMethod)\[Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration)\[Yield, Await, Default\] : async \[no [LineTerminator](#prod-LineTerminator) here\] function \* [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } \[+Default\] async \[no [LineTerminator](#prod-LineTerminator) here\] function \* ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async \[no [LineTerminator](#prod-LineTerminator) here\] function \* [BindingIdentifier](#prod-BindingIdentifier)\[+Yield, +Await\]opt ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod)\[Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] \* [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncArrowFunction](#prod-AsyncArrowFunction)\[In, Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier)\[?Yield\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [AsyncConciseBody](#prod-AsyncConciseBody)\[?In\] [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [AsyncConciseBody](#prod-AsyncConciseBody)\[?In\] [AsyncArrowHead](#prod-AsyncArrowHead) : async \[no [LineTerminator](#prod-LineTerminator) here\] [ArrowFormalParameters](#prod-ArrowFormalParameters)\[~Yield, +Await\]

The practical effect of these restricted productions is as follows:

-   When a `++` or `--` token is encountered where the parser would treat it as a postfix operator, and at least one [LineTerminator](#prod-LineTerminator) occurred between the preceding token and the `++` or `--` token, then a semicolon is automatically inserted before the `++` or `--` token.
-   When a `continue`, `break`, `return`, `throw`, or `yield` token is encountered and a [LineTerminator](#prod-LineTerminator) is encountered before the next token, a semicolon is automatically inserted after the `continue`, `break`, `return`, `throw`, or `yield` token.
-   When arrow function parameter(s) are followed by a [LineTerminator](#prod-LineTerminator) before a `=>` token, a semicolon is automatically inserted and the punctuator causes a syntax error.
-   When an `async` token is followed by a [LineTerminator](#prod-LineTerminator) before a `function` or [IdentifierName](#prod-IdentifierName) or `(` token, a semicolon is automatically inserted and the `async` token is not treated as part of the same expression or class element as the following tokens.
-   When an `async` token is followed by a [LineTerminator](#prod-LineTerminator) before a `*` token, a semicolon is automatically inserted and the punctuator causes a syntax error.

The resulting practical advice to ECMAScript programmers is:

-   A postfix `++` or `--` operator should be on the same line as its operand.
-   An [Expression](#prod-Expression) in a `return` or `throw` statement or an [AssignmentExpression](#prod-AssignmentExpression) in a `yield` expression should start on the same line as the `return`, `throw`, or `yield` token.
-   A [LabelIdentifier](#prod-LabelIdentifier) in a `break` or `continue` statement should be on the same line as the `break` or `continue` token.
-   The end of an arrow function's parameter(s) and its `=>` should be on the same line.
-   The `async` token preceding an asynchronous function or method should be on the same line as the immediately following token.


# 12.10.2 Examples of Automatic Semicolon Insertion

*This section is non-normative.*

The source

```
{ 1 2 } 3
```

is not a valid sentence in the ECMAScript grammar, even with the automatic semicolon insertion rules. In contrast, the source

```
{ 1
2 } 3
```

is also not a valid ECMAScript sentence, but is transformed by automatic semicolon insertion into the following:

```
{ 1
;2 ;} 3;
```

which is a valid ECMAScript sentence.

The source

```
for (a; b
)
```

is not a valid ECMAScript sentence and is not altered by automatic semicolon insertion because the semicolon is needed for the header of a `for` statement. Automatic semicolon insertion never inserts one of the two semicolons in the header of a `for` statement.

The source

```
return
a + b
```

is transformed by automatic semicolon insertion into the following:

```
return;
a + b;
```

Note 1

The expression `a + b` is not treated as a value to be returned by the `return` statement, because a [LineTerminator](#prod-LineTerminator) separates it from the token `return`.

The source

```
a = b
++c
```

is transformed by automatic semicolon insertion into the following:

```
a = b;
++c;
```

Note 2

The token `++` is not treated as a postfix operator applying to the variable `b`, because a [LineTerminator](#prod-LineTerminator) occurs between `b` and `++`.

The source

```
if (a > b)
else c = d
```

is not a valid ECMAScript sentence and is not altered by automatic semicolon insertion before the `else` token, even though no production of the grammar applies at that point, because an automatically inserted semicolon would then be parsed as an empty statement.

The source

```
a = b + c
(d + e).print()
```

is *not* transformed by automatic semicolon insertion, because the parenthesized expression that begins the second line can be interpreted as an argument list for a function call:

```
a = b + c(d + e).print()
```

In the circumstance that an assignment statement must begin with a left parenthesis, it is a good idea for the programmer to provide an explicit semicolon at the end of the preceding statement rather than to rely on automatic semicolon insertion.


# 12.10.3 Interesting Cases of Automatic Semicolon Insertion

*This section is non-normative.*

ECMAScript programs can be written in a style with very few semicolons by relying on automatic semicolon insertion. As described above, semicolons are not inserted at every newline, and automatic semicolon insertion can depend on multiple tokens across line terminators.

As new syntactic features are added to ECMAScript, additional grammar productions could be added that cause lines relying on automatic semicolon insertion preceding them to change grammar productions when parsed.

For the purposes of this section, a case of automatic semicolon insertion is considered interesting if it is a place where a semicolon may or may not be inserted, depending on the source text which precedes it. The rest of this section describes a number of interesting cases of automatic semicolon insertion in this version of ECMAScript.


# 12.10.3.1 Interesting Cases of Automatic Semicolon Insertion in Statement Lists

In a [StatementList](#prod-StatementList), many [StatementListItem](#prod-StatementListItem)s end in semicolons, which may be omitted using automatic semicolon insertion. As a consequence of the rules above, at the end of a line ending an expression, a semicolon is required if the following line begins with any of the following:

-   **An opening parenthesis (`(`)**. Without a semicolon, the two lines together are treated as a [CallExpression](#prod-CallExpression).
-   **An opening square bracket (`[`)**. Without a semicolon, the two lines together are treated as property access, rather than an [ArrayLiteral](#prod-ArrayLiteral) or [ArrayAssignmentPattern](#prod-ArrayAssignmentPattern).
-   **A template literal (`` ` ``)**. Without a semicolon, the two lines together are interpreted as a tagged Template ([13.3.11](#sec-tagged-templates)), with the previous expression as the [MemberExpression](#prod-MemberExpression).
-   **Unary `+` or `-`**. Without a semicolon, the two lines together are interpreted as a usage of the corresponding binary operator.
-   **A RegExp literal**. Without a semicolon, the two lines together may be parsed instead as the `/` [MultiplicativeOperator](#prod-MultiplicativeOperator), for example if the RegExp has flags.


# 12.10.3.2 Cases of Automatic Semicolon Insertion and “\[no [LineTerminator](#prod-LineTerminator) here\]”

*This section is non-normative.*

ECMAScript contains grammar productions which include “\[no [LineTerminator](#prod-LineTerminator) here\]”. These productions are sometimes a means to have optional operands in the grammar. Introducing a [LineTerminator](#prod-LineTerminator) in these locations would change the grammar production of a source text by using the grammar production without the optional operand.

The rest of this section describes a number of productions using “\[no [LineTerminator](#prod-LineTerminator) here\]” in this version of ECMAScript.


# 12.10.3.2.1 List of Grammar Productions with Optional Operands and “\[no [LineTerminator](#prod-LineTerminator) here\]”

-   [UpdateExpression](#prod-UpdateExpression).
-   [ContinueStatement](#prod-ContinueStatement).
-   [BreakStatement](#prod-BreakStatement).
-   [ReturnStatement](#prod-ReturnStatement).
-   [YieldExpression](#prod-YieldExpression).
-   Async Function Definitions ([15.8](#sec-async-function-definitions)) with relation to Function Definitions ([15.2](#sec-function-definitions))


# 13 ECMAScript Language: Expressions


# 13.1 Identifiers


## Syntax

[IdentifierReference](#prod-IdentifierReference)\[Yield, Await\] : [Identifier](#prod-Identifier) \[~Yield\] yield \[~Await\] await [BindingIdentifier](#prod-BindingIdentifier)\[Yield, Await\] : [Identifier](#prod-Identifier) yield await [LabelIdentifier](#prod-LabelIdentifier)\[Yield, Await\] : [Identifier](#prod-Identifier) \[~Yield\] yield \[~Await\] await [Identifier](#prod-Identifier) : [IdentifierName](#prod-IdentifierName) but not [ReservedWord](#prod-ReservedWord) Note

`yield` and `await` are permitted as [BindingIdentifier](#prod-BindingIdentifier) in the grammar, and prohibited with [static semantics](#sec-static-semantic-rules) below, to prohibit automatic semicolon insertion in cases such as

```
let
await 0;
```


# 13.1.1 Static Semantics: Early Errors

[BindingIdentifier](#prod-BindingIdentifier) : [Identifier](#prod-Identifier)

-   It is a Syntax Error if [IsStrict](#sec-isstrict)(this production) is true and the [StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier) is either "arguments" or "eval".

[IdentifierReference](#prod-IdentifierReference) : yield [BindingIdentifier](#prod-BindingIdentifier) : yield [LabelIdentifier](#prod-LabelIdentifier) : yield

-   It is a Syntax Error if [IsStrict](#sec-isstrict)(this production) is true.

[IdentifierReference](#prod-IdentifierReference) : await [BindingIdentifier](#prod-BindingIdentifier) : await [LabelIdentifier](#prod-LabelIdentifier) : await

-   It is a Syntax Error if the [goal symbol](#sec-context-free-grammars) of the syntactic grammar is [Module](#prod-Module).

[BindingIdentifier](#prod-BindingIdentifier)\[Yield, Await\] : yield

-   It is a Syntax Error if this production has a <sub>\[Yield\]</sub> parameter.

[BindingIdentifier](#prod-BindingIdentifier)\[Yield, Await\] : await

-   It is a Syntax Error if this production has an <sub>\[Await\]</sub> parameter.

[IdentifierReference](#prod-IdentifierReference)\[Yield, Await\] : [Identifier](#prod-Identifier) [BindingIdentifier](#prod-BindingIdentifier)\[Yield, Await\] : [Identifier](#prod-Identifier) [LabelIdentifier](#prod-LabelIdentifier)\[Yield, Await\] : [Identifier](#prod-Identifier)

-   It is a Syntax Error if this production has a <sub>\[Yield\]</sub> parameter and the [StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier) is "yield".
-   It is a Syntax Error if this production has an <sub>\[Await\]</sub> parameter and the [StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier) is "await".

[Identifier](#prod-Identifier) : [IdentifierName](#prod-IdentifierName) but not [ReservedWord](#prod-ReservedWord)

-   It is a Syntax Error if [IsStrict](#sec-isstrict)(this phrase) is true and the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName) is one of "implements", "interface", "let", "package", "private", "protected", "public", "static", or "yield".
-   It is a Syntax Error if the [goal symbol](#sec-context-free-grammars) of the syntactic grammar is [Module](#prod-Module) and the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName) is "await".
-   It is a Syntax Error if the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName) is the [StringValue](#sec-static-semantics-stringvalue) of any [ReservedWord](#prod-ReservedWord) except for `yield` or `await`.

Note

The [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName) normalizes any Unicode escape sequences in [IdentifierName](#prod-IdentifierName) hence such escapes cannot be used to write an [Identifier](#prod-Identifier) whose code point sequence is the same as a [ReservedWord](#prod-ReservedWord).


# 13.1.2 Static Semantics: StringValue

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) StringValue takes no arguments and returns a String. It is defined piecewise over the following productions:

[IdentifierName](#prod-IdentifierName) :: [IdentifierStart](#prod-IdentifierStart) [IdentifierName](#prod-IdentifierName) [IdentifierPart](#prod-IdentifierPart)

1.  Let _idTextUnescaped_ be the [IdentifierCodePoints](#sec-identifiercodepoints) of [IdentifierName](#prod-IdentifierName).
2.  Return [CodePointsToString](#sec-codepointstostring)(_idTextUnescaped_).

[IdentifierReference](#prod-IdentifierReference) : yield [BindingIdentifier](#prod-BindingIdentifier) : yield [LabelIdentifier](#prod-LabelIdentifier) : yield

1.  Return "yield".

[IdentifierReference](#prod-IdentifierReference) : await [BindingIdentifier](#prod-BindingIdentifier) : await [LabelIdentifier](#prod-LabelIdentifier) : await

1.  Return "await".

[Identifier](#prod-Identifier) : [IdentifierName](#prod-IdentifierName) but not [ReservedWord](#prod-ReservedWord)

1.  Return the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName).

[PrivateIdentifier](#prod-PrivateIdentifier) :: # [IdentifierName](#prod-IdentifierName)

1.  Return the [string-concatenation](#string-concatenation) of 0x0023 (NUMBER SIGN) and the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName).

[ModuleExportName](#prod-ModuleExportName) : [StringLiteral](#prod-StringLiteral)

1.  Return the [SV](#sec-static-semantics-sv) of [StringLiteral](#prod-StringLiteral).


# 13.1.3 Runtime Semantics: Evaluation

[IdentifierReference](#prod-IdentifierReference) : [Identifier](#prod-Identifier)

1.  Return ? [ResolveBinding](#sec-resolvebinding)([StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier)).

[IdentifierReference](#prod-IdentifierReference) : yield

1.  Return ? [ResolveBinding](#sec-resolvebinding)("yield").

[IdentifierReference](#prod-IdentifierReference) : await

1.  Return ? [ResolveBinding](#sec-resolvebinding)("await").

Note 1

The result of evaluating an [IdentifierReference](#prod-IdentifierReference) is always a value of type Reference.

Note 2

In [non-strict code](#non-strict-code), the [keyword](#sec-keywords-and-reserved-words) `yield` may be used as an identifier. Evaluating the [IdentifierReference](#prod-IdentifierReference) resolves the binding of `yield` as if it was an [Identifier](#prod-Identifier). Early Error restriction ensures that such an evaluation only can occur for [non-strict code](#non-strict-code).


# 13.2 Primary Expression


## Syntax

[PrimaryExpression](#prod-PrimaryExpression)\[Yield, Await\] : this [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [Literal](#prod-Literal) [ArrayLiteral](#prod-ArrayLiteral)\[?Yield, ?Await\] [ObjectLiteral](#prod-ObjectLiteral)\[?Yield, ?Await\] [FunctionExpression](#prod-FunctionExpression) [ClassExpression](#prod-ClassExpression)\[?Yield, ?Await\] [GeneratorExpression](#prod-GeneratorExpression) [AsyncFunctionExpression](#prod-AsyncFunctionExpression) [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, ~Tagged\] [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\] [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[Yield, Await\] : ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] , ) ( ) ( ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ) ( ... [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] ) ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] , ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ) ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] , ... [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] )


## Supplemental Syntax

When processing an instance of the production  
[PrimaryExpression](#prod-PrimaryExpression)\[Yield, Await\] : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\]  
the interpretation of [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) is refined using the following grammar:

[ParenthesizedExpression](#prod-ParenthesizedExpression)\[Yield, Await\] : ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] )


# 13.2.1 The `this` Keyword


# 13.2.1.1 Runtime Semantics: Evaluation

[PrimaryExpression](#prod-PrimaryExpression) : this

1.  Return ? [ResolveThisBinding](#sec-resolvethisbinding)().


# 13.2.2 Identifier Reference

See [13.1](#sec-identifiers) for [IdentifierReference](#prod-IdentifierReference).


# 13.2.3 Literals


## Syntax

[Literal](#prod-Literal) : [NullLiteral](#prod-NullLiteral) [BooleanLiteral](#prod-BooleanLiteral) [NumericLiteral](#prod-NumericLiteral) [StringLiteral](#prod-StringLiteral)


# 13.2.3.1 Runtime Semantics: Evaluation

[Literal](#prod-Literal) : [NullLiteral](#prod-NullLiteral)

1.  Return null.

[Literal](#prod-Literal) : [BooleanLiteral](#prod-BooleanLiteral)

1.  If [BooleanLiteral](#prod-BooleanLiteral) is the token `false`, return false.
2.  If [BooleanLiteral](#prod-BooleanLiteral) is the token `true`, return true.

[Literal](#prod-Literal) : [NumericLiteral](#prod-NumericLiteral)

1.  Return the [NumericValue](#sec-numericvalue) of [NumericLiteral](#prod-NumericLiteral) as defined in [12.9.3](#sec-literals-numeric-literals).

[Literal](#prod-Literal) : [StringLiteral](#prod-StringLiteral)

1.  Return the [SV](#sec-static-semantics-sv) of [StringLiteral](#prod-StringLiteral) as defined in [12.9.4.2](#sec-static-semantics-sv).


# 13.2.4 Array Initializer

Note

An [ArrayLiteral](#prod-ArrayLiteral) is an expression describing the initialization of an Array, using a list, of zero or more expressions each of which represents an array element, enclosed in square brackets. The elements need not be literals; they are evaluated each time the array initializer is evaluated.

Array elements may be elided at the beginning, middle or end of the element list. Whenever a comma in the element list is not preceded by an [AssignmentExpression](#prod-AssignmentExpression) (i.e., a comma at the beginning or after another comma), the missing array element contributes to the length of the Array and increases the index of subsequent elements. Elided array elements are not defined. If an element is elided at the end of an array, that element does not contribute to the length of the Array.


## Syntax

[ArrayLiteral](#prod-ArrayLiteral)\[Yield, Await\] : \[[Elision](#prod-Elision)opt \] \[[ElementList](#prod-ElementList)\[?Yield, ?Await\] \] \[[ElementList](#prod-ElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt \] [ElementList](#prod-ElementList)\[Yield, Await\] : [Elision](#prod-Elision)opt [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [Elision](#prod-Elision)opt [SpreadElement](#prod-SpreadElement)\[?Yield, ?Await\] [ElementList](#prod-ElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [ElementList](#prod-ElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [SpreadElement](#prod-SpreadElement)\[?Yield, ?Await\] [Elision](#prod-Elision) : , [Elision](#prod-Elision) , [SpreadElement](#prod-SpreadElement)\[Yield, Await\] : ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\]


# 13.2.4.1 Runtime Semantics: ArrayAccumulation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ArrayAccumulation takes arguments _array_ (an Array) and _nextIndex_ (an [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integer](#integer) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[Elision](#prod-Elision) : ,

1.  Let _len_ be _nextIndex_ + 1.
2.  Perform ? [Set](#sec-set-o-p-v-throw)(_array_, "length", [𝔽](#𝔽)(_len_), true).
3.  NOTE: The above step throws if _len_ exceeds 2<sup>32</sup> - 1.
4.  Return _len_.

[Elision](#prod-Elision) : [Elision](#prod-Elision) ,

1.  Return ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [Elision](#prod-Elision) with arguments _array_ and (_nextIndex_ + 1).

[ElementList](#prod-ElementList) : [Elision](#prod-Elision)opt [AssignmentExpression](#prod-AssignmentExpression)

1.  If [Elision](#prod-Elision) is present, then
    1.  Set _nextIndex_ to ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [Elision](#prod-Elision) with arguments _array_ and _nextIndex_.
2.  Let _initResult_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
3.  Let _initValue_ be ? [GetValue](#sec-getvalue)(_initResult_).
4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_array_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_nextIndex_)), _initValue_).
5.  Return _nextIndex_ + 1.

[ElementList](#prod-ElementList) : [Elision](#prod-Elision)opt [SpreadElement](#prod-SpreadElement)

1.  If [Elision](#prod-Elision) is present, then
    1.  Set _nextIndex_ to ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [Elision](#prod-Elision) with arguments _array_ and _nextIndex_.
2.  Return ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [SpreadElement](#prod-SpreadElement) with arguments _array_ and _nextIndex_.

[ElementList](#prod-ElementList) : [ElementList](#prod-ElementList) , [Elision](#prod-Elision)opt [AssignmentExpression](#prod-AssignmentExpression)

1.  Set _nextIndex_ to ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [ElementList](#prod-ElementList) with arguments _array_ and _nextIndex_.
2.  If [Elision](#prod-Elision) is present, then
    1.  Set _nextIndex_ to ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [Elision](#prod-Elision) with arguments _array_ and _nextIndex_.
3.  Let _initResult_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
4.  Let _initValue_ be ? [GetValue](#sec-getvalue)(_initResult_).
5.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_array_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_nextIndex_)), _initValue_).
6.  Return _nextIndex_ + 1.

[ElementList](#prod-ElementList) : [ElementList](#prod-ElementList) , [Elision](#prod-Elision)opt [SpreadElement](#prod-SpreadElement)

1.  Set _nextIndex_ to ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [ElementList](#prod-ElementList) with arguments _array_ and _nextIndex_.
2.  If [Elision](#prod-Elision) is present, then
    1.  Set _nextIndex_ to ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [Elision](#prod-Elision) with arguments _array_ and _nextIndex_.
3.  Return ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [SpreadElement](#prod-SpreadElement) with arguments _array_ and _nextIndex_.

[SpreadElement](#prod-SpreadElement) : ... [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _spreadRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
2.  Let _spreadObj_ be ? [GetValue](#sec-getvalue)(_spreadRef_).
3.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_spreadObj_, sync).
4.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, return _nextIndex_.
    3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_array_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_nextIndex_)), _next_).
    4.  Set _nextIndex_ to _nextIndex_ + 1.

Note

[CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow) is used to ensure that own properties are defined for the array even if the standard built-in [Array prototype object](#sec-properties-of-the-array-prototype-object) has been modified in a manner that would preclude the creation of new own properties using _\[\[Set\]\]_.


# 13.2.4.2 Runtime Semantics: Evaluation

[ArrayLiteral](#prod-ArrayLiteral) : \[[Elision](#prod-Elision)opt \]

1.  Let _array_ be ! [ArrayCreate](#sec-arraycreate)(0).
2.  If [Elision](#prod-Elision) is present, then
    1.  Perform ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [Elision](#prod-Elision) with arguments _array_ and 0.
3.  Return _array_.

[ArrayLiteral](#prod-ArrayLiteral) : \[[ElementList](#prod-ElementList) \]

1.  Let _array_ be ! [ArrayCreate](#sec-arraycreate)(0).
2.  Perform ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [ElementList](#prod-ElementList) with arguments _array_ and 0.
3.  Return _array_.

[ArrayLiteral](#prod-ArrayLiteral) : \[[ElementList](#prod-ElementList) , [Elision](#prod-Elision)opt \]

1.  Let _array_ be ! [ArrayCreate](#sec-arraycreate)(0).
2.  Let _nextIndex_ be ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [ElementList](#prod-ElementList) with arguments _array_ and 0.
3.  If [Elision](#prod-Elision) is present, then
    1.  Perform ? [ArrayAccumulation](#sec-runtime-semantics-arrayaccumulation) of [Elision](#prod-Elision) with arguments _array_ and _nextIndex_.
4.  Return _array_.


# 13.2.5 Object Initializer

Note 1

An object initializer is an expression describing the initialization of an Object, written in a form resembling a literal. It is a list of zero or more pairs of [property keys](#property-key) and associated values, enclosed in curly brackets. The values need not be literals; they are evaluated each time the object initializer is evaluated.


## Syntax

[ObjectLiteral](#prod-ObjectLiteral)\[Yield, Await\] : { } { [PropertyDefinitionList](#prod-PropertyDefinitionList)\[?Yield, ?Await\] } { [PropertyDefinitionList](#prod-PropertyDefinitionList)\[?Yield, ?Await\] , } [PropertyDefinitionList](#prod-PropertyDefinitionList)\[Yield, Await\] : [PropertyDefinition](#prod-PropertyDefinition)\[?Yield, ?Await\] [PropertyDefinitionList](#prod-PropertyDefinitionList)\[?Yield, ?Await\] , [PropertyDefinition](#prod-PropertyDefinition)\[?Yield, ?Await\] [PropertyDefinition](#prod-PropertyDefinition)\[Yield, Await\] : [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [CoverInitializedName](#prod-CoverInitializedName)\[?Yield, ?Await\] [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [MethodDefinition](#prod-MethodDefinition)\[?Yield, ?Await\] ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [PropertyName](#prod-PropertyName)\[Yield, Await\] : [LiteralPropertyName](#prod-LiteralPropertyName) [ComputedPropertyName](#prod-ComputedPropertyName)\[?Yield, ?Await\] [LiteralPropertyName](#prod-LiteralPropertyName) : [IdentifierName](#prod-IdentifierName) [StringLiteral](#prod-StringLiteral) [NumericLiteral](#prod-NumericLiteral) [ComputedPropertyName](#prod-ComputedPropertyName)\[Yield, Await\] : \[[AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] \] [CoverInitializedName](#prod-CoverInitializedName)\[Yield, Await\] : [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\] [Initializer](#prod-Initializer)\[In, Yield, Await\] : \= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] Note 2

[MethodDefinition](#prod-MethodDefinition) is defined in [15.4](#sec-method-definitions).

Note 3

In certain contexts, [ObjectLiteral](#prod-ObjectLiteral) is used as a cover grammar for a more restricted secondary grammar. The [CoverInitializedName](#prod-CoverInitializedName) production is necessary to fully cover these secondary grammars. However, use of this production results in an early Syntax Error in normal contexts where an actual [ObjectLiteral](#prod-ObjectLiteral) is expected.


# 13.2.5.1 Static Semantics: Early Errors

[PropertyDefinition](#prod-PropertyDefinition) : [MethodDefinition](#prod-MethodDefinition)

-   It is a Syntax Error if [HasDirectSuper](#sec-static-semantics-hasdirectsuper) of [MethodDefinition](#prod-MethodDefinition) is true.
-   It is a Syntax Error if the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [MethodDefinition](#prod-MethodDefinition) is not empty.

In addition to describing an actual object initializer the [ObjectLiteral](#prod-ObjectLiteral) productions are also used as a cover grammar for [ObjectAssignmentPattern](#prod-ObjectAssignmentPattern) and may be recognized as part of a [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList). When [ObjectLiteral](#prod-ObjectLiteral) appears in a context where [ObjectAssignmentPattern](#prod-ObjectAssignmentPattern) is required the following Early Error rules are **not** applied. In addition, they are not applied when initially parsing a [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) or [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead).

[PropertyDefinition](#prod-PropertyDefinition) : [CoverInitializedName](#prod-CoverInitializedName)

-   It is a Syntax Error if any source text is matched by this production.

Note 1

This production exists so that [ObjectLiteral](#prod-ObjectLiteral) can serve as a cover grammar for [ObjectAssignmentPattern](#prod-ObjectAssignmentPattern). It cannot occur in an actual object initializer.

[ObjectLiteral](#prod-ObjectLiteral) : { [PropertyDefinitionList](#prod-PropertyDefinitionList) } { [PropertyDefinitionList](#prod-PropertyDefinitionList) , }

-   It is a Syntax Error if the [PropertyNameList](#sec-static-semantics-propertynamelist) of [PropertyDefinitionList](#prod-PropertyDefinitionList) contains any duplicate entries for "\_\_proto\_\_" and at least two of those entries were obtained from productions of the form [PropertyDefinition](#prod-PropertyDefinition) : [PropertyName](#prod-PropertyName) : [AssignmentExpression](#prod-AssignmentExpression) . This rule is not applied if this [ObjectLiteral](#prod-ObjectLiteral) is contained within a [Script](#prod-Script) that is being parsed for [ParseJSON](#sec-ParseJSON) (see step [3](#step-json-parse-parse) of [ParseJSON](#sec-ParseJSON)).

Note 2

The [List](#sec-list-and-record-specification-type) returned by [PropertyNameList](#sec-static-semantics-propertynamelist) does not include [property names](#property-name) defined using a [ComputedPropertyName](#prod-ComputedPropertyName).


# 13.2.5.2 Static Semantics: IsComputedPropertyKey

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsComputedPropertyKey takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[PropertyName](#prod-PropertyName) : [LiteralPropertyName](#prod-LiteralPropertyName)

1.  Return false.

[PropertyName](#prod-PropertyName) : [ComputedPropertyName](#prod-ComputedPropertyName)

1.  Return true.


# 13.2.5.3 Static Semantics: PropertyNameList

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) PropertyNameList takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It is defined piecewise over the following productions:

[PropertyDefinitionList](#prod-PropertyDefinitionList) : [PropertyDefinition](#prod-PropertyDefinition)

1.  Let _propName_ be the [PropName](#sec-static-semantics-propname) of [PropertyDefinition](#prod-PropertyDefinition).
2.  If _propName_ is empty, return a new empty [List](#sec-list-and-record-specification-type).
3.  Return « _propName_ ».

[PropertyDefinitionList](#prod-PropertyDefinitionList) : [PropertyDefinitionList](#prod-PropertyDefinitionList) , [PropertyDefinition](#prod-PropertyDefinition)

1.  Let _list_ be the [PropertyNameList](#sec-static-semantics-propertynamelist) of [PropertyDefinitionList](#prod-PropertyDefinitionList).
2.  Let _propName_ be the [PropName](#sec-static-semantics-propname) of [PropertyDefinition](#prod-PropertyDefinition).
3.  If _propName_ is empty, return _list_.
4.  Return the [list-concatenation](#list-concatenation) of _list_ and « _propName_ ».


# 13.2.5.4 Runtime Semantics: Evaluation

[ObjectLiteral](#prod-ObjectLiteral) : { }

1.  Return [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).

[ObjectLiteral](#prod-ObjectLiteral) : { [PropertyDefinitionList](#prod-PropertyDefinitionList) } { [PropertyDefinitionList](#prod-PropertyDefinitionList) , }

1.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
2.  Perform ? [PropertyDefinitionEvaluation](#sec-runtime-semantics-propertydefinitionevaluation) of [PropertyDefinitionList](#prod-PropertyDefinitionList) with argument _obj_.
3.  Return _obj_.

[LiteralPropertyName](#prod-LiteralPropertyName) : [IdentifierName](#prod-IdentifierName)

1.  Return the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName).

[LiteralPropertyName](#prod-LiteralPropertyName) : [StringLiteral](#prod-StringLiteral)

1.  Return the [SV](#sec-static-semantics-sv) of [StringLiteral](#prod-StringLiteral).

[LiteralPropertyName](#prod-LiteralPropertyName) : [NumericLiteral](#prod-NumericLiteral)

1.  Let _nbr_ be the [NumericValue](#sec-numericvalue) of [NumericLiteral](#prod-NumericLiteral).
2.  Return ! [ToString](#sec-tostring)(_nbr_).

[ComputedPropertyName](#prod-ComputedPropertyName) : \[[AssignmentExpression](#prod-AssignmentExpression) \]

1.  Let _exprValue_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
2.  Let _propName_ be ? [GetValue](#sec-getvalue)(_exprValue_).
3.  Return ? [ToPropertyKey](#sec-topropertykey)(_propName_).


# 13.2.5.5 Runtime Semantics: PropertyDefinitionEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) PropertyDefinitionEvaluation takes argument _object_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[PropertyDefinitionList](#prod-PropertyDefinitionList) : [PropertyDefinitionList](#prod-PropertyDefinitionList) , [PropertyDefinition](#prod-PropertyDefinition)

1.  Perform ? [PropertyDefinitionEvaluation](#sec-runtime-semantics-propertydefinitionevaluation) of [PropertyDefinitionList](#prod-PropertyDefinitionList) with argument _object_.
2.  Perform ? [PropertyDefinitionEvaluation](#sec-runtime-semantics-propertydefinitionevaluation) of [PropertyDefinition](#prod-PropertyDefinition) with argument _object_.
3.  Return unused.

[PropertyDefinition](#prod-PropertyDefinition) : ... [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _exprValue_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
2.  Let _fromValue_ be ? [GetValue](#sec-getvalue)(_exprValue_).
3.  Let _excludedNames_ be a new empty [List](#sec-list-and-record-specification-type).
4.  Perform ? [CopyDataProperties](#sec-copydataproperties)(_object_, _fromValue_, _excludedNames_).
5.  Return unused.

[PropertyDefinition](#prod-PropertyDefinition) : [IdentifierReference](#prod-IdentifierReference)

1.  Let _propName_ be the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierReference](#prod-IdentifierReference).
2.  Let _exprValue_ be ? [Evaluation](#sec-evaluation) of [IdentifierReference](#prod-IdentifierReference).
3.  Let _propValue_ be ? [GetValue](#sec-getvalue)(_exprValue_).
4.  [Assert](#assert): _object_ is an ordinary, extensible object with no non-configurable properties.
5.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_object_, _propName_, _propValue_).
6.  Return unused.

[PropertyDefinition](#prod-PropertyDefinition) : [PropertyName](#prod-PropertyName) : [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _propKey_ be ? [Evaluation](#sec-evaluation) of [PropertyName](#prod-PropertyName).
2.  If this [PropertyDefinition](#prod-PropertyDefinition) is contained within a [Script](#prod-Script) that is being evaluated for [ParseJSON](#sec-ParseJSON) (see step [6](#step-json-parse-eval) of [ParseJSON](#sec-ParseJSON)), then
    1.  Let _isProtoSetter_ be false.
3.  Else if _propKey_ is "\_\_proto\_\_" and [IsComputedPropertyKey](#sec-static-semantics-iscomputedpropertykey) of [PropertyName](#prod-PropertyName) is false, then
    1.  Let _isProtoSetter_ be true.
4.  Else,
    1.  Let _isProtoSetter_ be false.
5.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([AssignmentExpression](#prod-AssignmentExpression)) is true and _isProtoSetter_ is false, then
    1.  Let _propValue_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [AssignmentExpression](#prod-AssignmentExpression) with argument _propKey_.
6.  Else,
    1.  Let _exprValueRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
    2.  Let _propValue_ be ? [GetValue](#sec-getvalue)(_exprValueRef_).
7.  If _isProtoSetter_ is true, then
    1.  If _propValue_ [is an Object](#sec-object-type) or _propValue_ is null, then
        1.  Perform ! _object_._\[\[SetPrototypeOf\]\]_(_propValue_).
    2.  Return unused.
8.  [Assert](#assert): _object_ is an ordinary, extensible object with no non-configurable properties.
9.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_object_, _propKey_, _propValue_).
10.  Return unused.

[PropertyDefinition](#prod-PropertyDefinition) : [MethodDefinition](#prod-MethodDefinition)

1.  Perform ? [MethodDefinitionEvaluation](#sec-runtime-semantics-methoddefinitionevaluation) of [MethodDefinition](#prod-MethodDefinition) with arguments _object_ and true.
2.  Return unused.


# 13.2.6 Function Defining Expressions

See [15.2](#sec-function-definitions) for [PrimaryExpression](#prod-PrimaryExpression) : [FunctionExpression](#prod-FunctionExpression) .

See [15.5](#sec-generator-function-definitions) for [PrimaryExpression](#prod-PrimaryExpression) : [GeneratorExpression](#prod-GeneratorExpression) .

See [15.7](#sec-class-definitions) for [PrimaryExpression](#prod-PrimaryExpression) : [ClassExpression](#prod-ClassExpression) .

See [15.8](#sec-async-function-definitions) for [PrimaryExpression](#prod-PrimaryExpression) : [AsyncFunctionExpression](#prod-AsyncFunctionExpression) .

See [15.6](#sec-async-generator-function-definitions) for [PrimaryExpression](#prod-PrimaryExpression) : [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) .


# 13.2.7 Regular Expression Literals


## Syntax

See [12.9.5](#sec-literals-regular-expression-literals).


# 13.2.7.1 Static Semantics: Early Errors

[PrimaryExpression](#prod-PrimaryExpression) : [RegularExpressionLiteral](#prod-RegularExpressionLiteral)

-   It is a Syntax Error if [IsValidRegularExpressionLiteral](#sec-isvalidregularexpressionliteral)([RegularExpressionLiteral](#prod-RegularExpressionLiteral)) is false.


# 13.2.7.2 Static Semantics: IsValidRegularExpressionLiteral ( _literal_ )

The abstract operation IsValidRegularExpressionLiteral takes argument _literal_ (a [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [Parse Node](#sec-syntactic-grammar)) and returns a Boolean. It determines if its argument is a valid regular expression literal. It performs the following steps when called:

1.  Let _flags_ be the [FlagText](#sec-static-semantics-flagtext) of _literal_.
2.  If _flags_ contains any code points other than `d`, `g`, `i`, `m`, `s`, `u`, `v`, or `y`, or if _flags_ contains any code point more than once, return false.
3.  If _flags_ contains `u`, let _u_ be true; else let _u_ be false.
4.  If _flags_ contains `v`, let _v_ be true; else let _v_ be false.
5.  Let _patternText_ be the [BodyText](#sec-static-semantics-bodytext) of _literal_.
6.  If _u_ is false and _v_ is false, then
    1.  Let _stringValue_ be [CodePointsToString](#sec-codepointstostring)(_patternText_).
    2.  Set _patternText_ to the sequence of code points resulting from interpreting each of the 16-bit elements of _stringValue_ as a Unicode BMP code point. UTF-16 decoding is not applied to the elements.
7.  Let _parseResult_ be [ParsePattern](#sec-parsepattern)(_patternText_, _u_, _v_).
8.  If _parseResult_ is a [Parse Node](#sec-syntactic-grammar), return true; else return false.


# 13.2.7.3 Runtime Semantics: Evaluation

[PrimaryExpression](#prod-PrimaryExpression) : [RegularExpressionLiteral](#prod-RegularExpressionLiteral)

1.  Let _pattern_ be [CodePointsToString](#sec-codepointstostring)([BodyText](#sec-static-semantics-bodytext) of [RegularExpressionLiteral](#prod-RegularExpressionLiteral)).
2.  Let _flags_ be [CodePointsToString](#sec-codepointstostring)([FlagText](#sec-static-semantics-flagtext) of [RegularExpressionLiteral](#prod-RegularExpressionLiteral)).
3.  Return ! [RegExpCreate](#sec-regexpcreate)(_pattern_, _flags_).


# 13.2.8 Template Literals


## Syntax

[TemplateLiteral](#prod-TemplateLiteral)\[Yield, Await, Tagged\] : [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) [SubstitutionTemplate](#prod-SubstitutionTemplate)\[?Yield, ?Await, ?Tagged\] [SubstitutionTemplate](#prod-SubstitutionTemplate)\[Yield, Await, Tagged\] : [TemplateHead](#prod-TemplateHead) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] [TemplateSpans](#prod-TemplateSpans)\[?Yield, ?Await, ?Tagged\] [TemplateSpans](#prod-TemplateSpans)\[Yield, Await, Tagged\] : [TemplateTail](#prod-TemplateTail) [TemplateMiddleList](#prod-TemplateMiddleList)\[?Yield, ?Await, ?Tagged\] [TemplateTail](#prod-TemplateTail) [TemplateMiddleList](#prod-TemplateMiddleList)\[Yield, Await, Tagged\] : [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] [TemplateMiddleList](#prod-TemplateMiddleList)\[?Yield, ?Await, ?Tagged\] [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]


# 13.2.8.1 Static Semantics: Early Errors

[TemplateLiteral](#prod-TemplateLiteral)\[Yield, Await, Tagged\] : [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate)

-   It is a Syntax Error if the <sub>\[Tagged\]</sub> parameter was not set and [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) [Contains](#sec-static-semantics-contains) [NotEscapeSequence](#prod-NotEscapeSequence).

[TemplateLiteral](#prod-TemplateLiteral)\[Yield, Await, Tagged\] : [SubstitutionTemplate](#prod-SubstitutionTemplate)\[?Yield, ?Await, ?Tagged\]

-   It is a Syntax Error if the number of elements in the [TemplateStrings](#sec-static-semantics-templatestrings) of [TemplateLiteral](#prod-TemplateLiteral) with argument false is greater than or equal to 2<sup>32</sup>.

[SubstitutionTemplate](#prod-SubstitutionTemplate)\[Yield, Await, Tagged\] : [TemplateHead](#prod-TemplateHead) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] [TemplateSpans](#prod-TemplateSpans)\[?Yield, ?Await, ?Tagged\]

-   It is a Syntax Error if the <sub>\[Tagged\]</sub> parameter was not set and [TemplateHead](#prod-TemplateHead) [Contains](#sec-static-semantics-contains) [NotEscapeSequence](#prod-NotEscapeSequence).

[TemplateSpans](#prod-TemplateSpans)\[Yield, Await, Tagged\] : [TemplateTail](#prod-TemplateTail)

-   It is a Syntax Error if the <sub>\[Tagged\]</sub> parameter was not set and [TemplateTail](#prod-TemplateTail) [Contains](#sec-static-semantics-contains) [NotEscapeSequence](#prod-NotEscapeSequence).

[TemplateMiddleList](#prod-TemplateMiddleList)\[Yield, Await, Tagged\] : [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] [TemplateMiddleList](#prod-TemplateMiddleList)\[?Yield, ?Await, ?Tagged\] [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]

-   It is a Syntax Error if the <sub>\[Tagged\]</sub> parameter was not set and [TemplateMiddle](#prod-TemplateMiddle) [Contains](#sec-static-semantics-contains) [NotEscapeSequence](#prod-NotEscapeSequence).


# 13.2.8.2 Static Semantics: TemplateStrings

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) TemplateStrings takes argument _raw_ (a Boolean) and returns a [List](#sec-list-and-record-specification-type) of either Strings or undefined. It is defined piecewise over the following productions:

[TemplateLiteral](#prod-TemplateLiteral) : [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate)

1.  Return « [TemplateString](#sec-templatestring)([NoSubstitutionTemplate](#prod-NoSubstitutionTemplate), _raw_) ».

[SubstitutionTemplate](#prod-SubstitutionTemplate) : [TemplateHead](#prod-TemplateHead) [Expression](#prod-Expression) [TemplateSpans](#prod-TemplateSpans)

1.  Let _head_ be « [TemplateString](#sec-templatestring)([TemplateHead](#prod-TemplateHead), _raw_) ».
2.  Let _tail_ be the [TemplateStrings](#sec-static-semantics-templatestrings) of [TemplateSpans](#prod-TemplateSpans) with argument _raw_.
3.  Return the [list-concatenation](#list-concatenation) of _head_ and _tail_.

[TemplateSpans](#prod-TemplateSpans) : [TemplateTail](#prod-TemplateTail)

1.  Return « [TemplateString](#sec-templatestring)([TemplateTail](#prod-TemplateTail), _raw_) ».

[TemplateSpans](#prod-TemplateSpans) : [TemplateMiddleList](#prod-TemplateMiddleList) [TemplateTail](#prod-TemplateTail)

1.  Let _middle_ be the [TemplateStrings](#sec-static-semantics-templatestrings) of [TemplateMiddleList](#prod-TemplateMiddleList) with argument _raw_.
2.  Let _tail_ be « [TemplateString](#sec-templatestring)([TemplateTail](#prod-TemplateTail), _raw_) ».
3.  Return the [list-concatenation](#list-concatenation) of _middle_ and _tail_.

[TemplateMiddleList](#prod-TemplateMiddleList) : [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)

1.  Return « [TemplateString](#sec-templatestring)([TemplateMiddle](#prod-TemplateMiddle), _raw_) ».

[TemplateMiddleList](#prod-TemplateMiddleList) : [TemplateMiddleList](#prod-TemplateMiddleList) [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)

1.  Let _front_ be the [TemplateStrings](#sec-static-semantics-templatestrings) of [TemplateMiddleList](#prod-TemplateMiddleList) with argument _raw_.
2.  Let _last_ be « [TemplateString](#sec-templatestring)([TemplateMiddle](#prod-TemplateMiddle), _raw_) ».
3.  Return the [list-concatenation](#list-concatenation) of _front_ and _last_.


# 13.2.8.3 Static Semantics: TemplateString ( _templateToken_, _raw_ )

The abstract operation TemplateString takes arguments _templateToken_ (a [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) [Parse Node](#sec-syntactic-grammar), a [TemplateHead](#prod-TemplateHead) [Parse Node](#sec-syntactic-grammar), a [TemplateMiddle](#prod-TemplateMiddle) [Parse Node](#sec-syntactic-grammar), or a [TemplateTail](#prod-TemplateTail) [Parse Node](#sec-syntactic-grammar)) and _raw_ (a Boolean) and returns a String or undefined. It performs the following steps when called:

1.  If _raw_ is true, then
    1.  Let _string_ be the [TRV](#sec-static-semantics-trv) of _templateToken_.
2.  Else,
    1.  Let _string_ be the [TV](#sec-static-semantics-tv) of _templateToken_.
3.  Return _string_.

Note

This operation returns undefined if _raw_ is false and _templateToken_ contains a [NotEscapeSequence](#prod-NotEscapeSequence). In all other cases, it returns a String.


# 13.2.8.4 GetTemplateObject ( _templateLiteral_ )

The abstract operation GetTemplateObject takes argument _templateLiteral_ (a [Parse Node](#sec-syntactic-grammar)) and returns an Array. It performs the following steps when called:

1.  Let _realm_ be [the current Realm Record](#current-realm).
2.  Let _templateRegistry_ be _realm_._\[\[TemplateMap\]\]_.
3.  For each element _e_ of _templateRegistry_, do
    1.  If _e_._\[\[Site\]\]_ is [the same Parse Node](#sec-syntactic-grammar) as _templateLiteral_, then
        1.  Return _e_._\[\[Array\]\]_.
4.  Let _rawStrings_ be the [TemplateStrings](#sec-static-semantics-templatestrings) of _templateLiteral_ with argument true.
5.  [Assert](#assert): _rawStrings_ is a [List](#sec-list-and-record-specification-type) of Strings.
6.  Let _cookedStrings_ be the [TemplateStrings](#sec-static-semantics-templatestrings) of _templateLiteral_ with argument false.
7.  Let _count_ be the number of elements in the [List](#sec-list-and-record-specification-type) _cookedStrings_.
8.  [Assert](#assert): _count_ ≤ 2<sup>32</sup> - 1.
9.  Let _template_ be ! [ArrayCreate](#sec-arraycreate)(_count_).
10.  Let _rawObj_ be ! [ArrayCreate](#sec-arraycreate)(_count_).
11.  Let _index_ be 0.
12.  Repeat, while _index_ < _count_,
     1.  Let _prop_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_index_)).
     2.  Let _cookedValue_ be _cookedStrings_\[_index_\].
     3.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_template_, _prop_, PropertyDescriptor { _\[\[Value\]\]_: _cookedValue_, _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: false }).
     4.  Let _rawValue_ be the String value _rawStrings_\[_index_\].
     5.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_rawObj_, _prop_, PropertyDescriptor { _\[\[Value\]\]_: _rawValue_, _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: false }).
     6.  Set _index_ to _index_ + 1.
13.  Perform ! [SetIntegrityLevel](#sec-setintegritylevel)(_rawObj_, frozen).
14.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_template_, "raw", PropertyDescriptor { _\[\[Value\]\]_: _rawObj_, _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
15.  Perform ! [SetIntegrityLevel](#sec-setintegritylevel)(_template_, frozen).
16.  Append the [Record](#sec-list-and-record-specification-type) { _\[\[Site\]\]_: _templateLiteral_, _\[\[Array\]\]_: _template_ } to _realm_._\[\[TemplateMap\]\]_.
17.  Return _template_.

Note 1

The creation of a template object cannot result in an [abrupt completion](#sec-completion-record-specification-type).

Note 2

Each [TemplateLiteral](#prod-TemplateLiteral) in the program code of a [realm](#realm) is associated with a unique template object that is used in the evaluation of tagged Templates ([13.2.8.6](#sec-template-literals-runtime-semantics-evaluation)). The template objects are frozen and the same template object is used each time a specific tagged Template is evaluated. Whether template objects are created lazily upon first evaluation of the [TemplateLiteral](#prod-TemplateLiteral) or eagerly prior to first evaluation is an implementation choice that is not observable to ECMAScript code.

Note 3

Future editions of this specification may define additional non-enumerable properties of template objects.


# 13.2.8.5 Runtime Semantics: SubstitutionEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) SubstitutionEvaluation takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[TemplateSpans](#prod-TemplateSpans) : [TemplateTail](#prod-TemplateTail)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[TemplateSpans](#prod-TemplateSpans) : [TemplateMiddleList](#prod-TemplateMiddleList) [TemplateTail](#prod-TemplateTail)

1.  Return ? [SubstitutionEvaluation](#sec-runtime-semantics-substitutionevaluation) of [TemplateMiddleList](#prod-TemplateMiddleList).

[TemplateMiddleList](#prod-TemplateMiddleList) : [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)

1.  Let _subRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _sub_ be ? [GetValue](#sec-getvalue)(_subRef_).
3.  Return « _sub_ ».

[TemplateMiddleList](#prod-TemplateMiddleList) : [TemplateMiddleList](#prod-TemplateMiddleList) [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)

1.  Let _preceding_ be ? [SubstitutionEvaluation](#sec-runtime-semantics-substitutionevaluation) of [TemplateMiddleList](#prod-TemplateMiddleList).
2.  Let _nextRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
3.  Let _next_ be ? [GetValue](#sec-getvalue)(_nextRef_).
4.  Return the [list-concatenation](#list-concatenation) of _preceding_ and « _next_ ».


# 13.2.8.6 Runtime Semantics: Evaluation

[TemplateLiteral](#prod-TemplateLiteral) : [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate)

1.  Return the [TV](#sec-static-semantics-tv) of [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) as defined in [12.9.6](#sec-template-literal-lexical-components).

[SubstitutionTemplate](#prod-SubstitutionTemplate) : [TemplateHead](#prod-TemplateHead) [Expression](#prod-Expression) [TemplateSpans](#prod-TemplateSpans)

1.  Let _head_ be the [TV](#sec-static-semantics-tv) of [TemplateHead](#prod-TemplateHead) as defined in [12.9.6](#sec-template-literal-lexical-components).
2.  Let _subRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
3.  Let _sub_ be ? [GetValue](#sec-getvalue)(_subRef_).
4.  Let _middle_ be ? [ToString](#sec-tostring)(_sub_).
5.  Let _tail_ be ? [Evaluation](#sec-evaluation) of [TemplateSpans](#prod-TemplateSpans).
6.  Return the [string-concatenation](#string-concatenation) of _head_, _middle_, and _tail_.

Note 1

The string conversion semantics applied to the [Expression](#prod-Expression) value are like `String.prototype.concat` rather than the `+` operator.

[TemplateSpans](#prod-TemplateSpans) : [TemplateTail](#prod-TemplateTail)

1.  Return the [TV](#sec-static-semantics-tv) of [TemplateTail](#prod-TemplateTail) as defined in [12.9.6](#sec-template-literal-lexical-components).

[TemplateSpans](#prod-TemplateSpans) : [TemplateMiddleList](#prod-TemplateMiddleList) [TemplateTail](#prod-TemplateTail)

1.  Let _head_ be ? [Evaluation](#sec-evaluation) of [TemplateMiddleList](#prod-TemplateMiddleList).
2.  Let _tail_ be the [TV](#sec-static-semantics-tv) of [TemplateTail](#prod-TemplateTail) as defined in [12.9.6](#sec-template-literal-lexical-components).
3.  Return the [string-concatenation](#string-concatenation) of _head_ and _tail_.

[TemplateMiddleList](#prod-TemplateMiddleList) : [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)

1.  Let _head_ be the [TV](#sec-static-semantics-tv) of [TemplateMiddle](#prod-TemplateMiddle) as defined in [12.9.6](#sec-template-literal-lexical-components).
2.  Let _subRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
3.  Let _sub_ be ? [GetValue](#sec-getvalue)(_subRef_).
4.  Let _middle_ be ? [ToString](#sec-tostring)(_sub_).
5.  Return the [string-concatenation](#string-concatenation) of _head_ and _middle_.

Note 2

The string conversion semantics applied to the [Expression](#prod-Expression) value are like `String.prototype.concat` rather than the `+` operator.

[TemplateMiddleList](#prod-TemplateMiddleList) : [TemplateMiddleList](#prod-TemplateMiddleList) [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)

1.  Let _rest_ be ? [Evaluation](#sec-evaluation) of [TemplateMiddleList](#prod-TemplateMiddleList).
2.  Let _middle_ be the [TV](#sec-static-semantics-tv) of [TemplateMiddle](#prod-TemplateMiddle) as defined in [12.9.6](#sec-template-literal-lexical-components).
3.  Let _subRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
4.  Let _sub_ be ? [GetValue](#sec-getvalue)(_subRef_).
5.  Let _last_ be ? [ToString](#sec-tostring)(_sub_).
6.  Return the [string-concatenation](#string-concatenation) of _rest_, _middle_, and _last_.

Note 3

The string conversion semantics applied to the [Expression](#prod-Expression) value are like `String.prototype.concat` rather than the `+` operator.


# 13.2.9 The Grouping Operator


# 13.2.9.1 Static Semantics: Early Errors

[PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

-   [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) [must cover](#must-cover) a [ParenthesizedExpression](#prod-ParenthesizedExpression).


# 13.2.9.2 Runtime Semantics: Evaluation

[PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _expr_ be the [ParenthesizedExpression](#prod-ParenthesizedExpression) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return ? [Evaluation](#sec-evaluation) of _expr_.

[ParenthesizedExpression](#prod-ParenthesizedExpression) : ( [Expression](#prod-Expression) )

1.  Return ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression). This may be of type Reference.

Note

This algorithm does not apply [GetValue](#sec-getvalue) to [Evaluation](#sec-evaluation) of [Expression](#prod-Expression). The principal motivation for this is so that operators such as `delete` and `typeof` may be applied to parenthesized expressions.


# 13.3 Left-Hand-Side Expressions


## Syntax

[MemberExpression](#prod-MemberExpression)\[Yield, Await\] : [PrimaryExpression](#prod-PrimaryExpression)\[?Yield, ?Await\] [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] . [IdentifierName](#prod-IdentifierName) [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] [SuperProperty](#prod-SuperProperty)\[?Yield, ?Await\] [MetaProperty](#prod-MetaProperty) new [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\] [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] . [PrivateIdentifier](#prod-PrivateIdentifier) [SuperProperty](#prod-SuperProperty)\[Yield, Await\] : super \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] super . [IdentifierName](#prod-IdentifierName) [MetaProperty](#prod-MetaProperty) : [NewTarget](#prod-NewTarget) [ImportMeta](#prod-ImportMeta) [NewTarget](#prod-NewTarget) : new . target [ImportMeta](#prod-ImportMeta) : import . meta [NewExpression](#prod-NewExpression)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] new [NewExpression](#prod-NewExpression)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[Yield, Await\] : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[?Yield, ?Await\] [SuperCall](#prod-SuperCall)\[?Yield, ?Await\] [ImportCall](#prod-ImportCall)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] . [IdentifierName](#prod-IdentifierName) [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] . [PrivateIdentifier](#prod-PrivateIdentifier) [SuperCall](#prod-SuperCall)\[Yield, Await\] : super [Arguments](#prod-Arguments)\[?Yield, ?Await\] [ImportCall](#prod-ImportCall)\[Yield, Await\] : import ( [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ,opt ) import ( [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] , [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ,opt ) [Arguments](#prod-Arguments)\[Yield, Await\] : ( ) ( [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] ) ( [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] , ) [ArgumentList](#prod-ArgumentList)\[Yield, Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] , [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] , ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [OptionalExpression](#prod-OptionalExpression)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [OptionalExpression](#prod-OptionalExpression)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[Yield, Await\] : ?. [Arguments](#prod-Arguments)\[?Yield, ?Await\] ?. \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] ?. [IdentifierName](#prod-IdentifierName) ?. [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] ?. [PrivateIdentifier](#prod-PrivateIdentifier) [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] . [IdentifierName](#prod-IdentifierName) [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] . [PrivateIdentifier](#prod-PrivateIdentifier) [LeftHandSideExpression](#prod-LeftHandSideExpression)\[Yield, Await\] : [NewExpression](#prod-NewExpression)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [OptionalExpression](#prod-OptionalExpression)\[?Yield, ?Await\]


## Supplemental Syntax

When processing an instance of the production  
[CallExpression](#prod-CallExpression) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)  
the interpretation of [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) is refined using the following grammar:

[CallMemberExpression](#prod-CallMemberExpression)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\]


# 13.3.1 Static Semantics


# 13.3.1.1 Static Semantics: Early Errors

[OptionalChain](#prod-OptionalChain) : ?. [TemplateLiteral](#prod-TemplateLiteral) [OptionalChain](#prod-OptionalChain) [TemplateLiteral](#prod-TemplateLiteral)

-   It is a Syntax Error if any source text is matched by this production.

Note

This production exists in order to prevent automatic semicolon insertion rules ([12.10](#sec-automatic-semicolon-insertion)) from being applied to the following code:

```
a?.b
`c`
```

so that it would be interpreted as two valid statements. The purpose is to maintain consistency with similar code without optional chaining:

```
a.b
`c`
```

which is a valid statement and where automatic semicolon insertion does not apply.

[ImportMeta](#prod-ImportMeta) : import . meta

-   It is a Syntax Error if the syntactic [goal symbol](#sec-context-free-grammars) is not [Module](#prod-Module).


# 13.3.2 Property Accessors

Note

Properties are accessed by name, using either the dot notation:

[MemberExpression](#prod-MemberExpression) `.` [IdentifierName](#prod-IdentifierName)  
[CallExpression](#prod-CallExpression) `.` [IdentifierName](#prod-IdentifierName)

or the bracket notation:

[MemberExpression](#prod-MemberExpression) `[` [Expression](#prod-Expression) `]`  
[CallExpression](#prod-CallExpression) `[` [Expression](#prod-Expression) `]`

The dot notation is explained by the following syntactic conversion:

[MemberExpression](#prod-MemberExpression) `.` [IdentifierName](#prod-IdentifierName)

is identical in its behaviour to

[MemberExpression](#prod-MemberExpression) `[` <*identifier-name-string*\> `]`

and similarly

[CallExpression](#prod-CallExpression) `.` [IdentifierName](#prod-IdentifierName)

is identical in its behaviour to

[CallExpression](#prod-CallExpression) `[` <*identifier-name-string*\> `]`

where <*identifier-name-string*\> is the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName).


# 13.3.2.1 Runtime Semantics: Evaluation

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) \[[Expression](#prod-Expression) \]

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [MemberExpression](#prod-MemberExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  Let _strict_ be [IsStrict](#sec-isstrict)(this [MemberExpression](#prod-MemberExpression)).
4.  Return ? [EvaluatePropertyAccessWithExpressionKey](#sec-evaluate-property-access-with-expression-key)(_baseValue_, [Expression](#prod-Expression), _strict_).

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) . [IdentifierName](#prod-IdentifierName)

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [MemberExpression](#prod-MemberExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  Let _strict_ be [IsStrict](#sec-isstrict)(this [MemberExpression](#prod-MemberExpression)).
4.  Return [EvaluatePropertyAccessWithIdentifierKey](#sec-evaluate-property-access-with-identifier-key)(_baseValue_, [IdentifierName](#prod-IdentifierName), _strict_).

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [MemberExpression](#prod-MemberExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  Let _fieldNameString_ be the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier).
4.  Return [MakePrivateReference](#sec-makeprivatereference)(_baseValue_, _fieldNameString_).

[CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) \[[Expression](#prod-Expression) \]

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [CallExpression](#prod-CallExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  Let _strict_ be [IsStrict](#sec-isstrict)(this [CallExpression](#prod-CallExpression)).
4.  Return ? [EvaluatePropertyAccessWithExpressionKey](#sec-evaluate-property-access-with-expression-key)(_baseValue_, [Expression](#prod-Expression), _strict_).

[CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) . [IdentifierName](#prod-IdentifierName)

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [CallExpression](#prod-CallExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  Let _strict_ be [IsStrict](#sec-isstrict)(this [CallExpression](#prod-CallExpression)).
4.  Return [EvaluatePropertyAccessWithIdentifierKey](#sec-evaluate-property-access-with-identifier-key)(_baseValue_, [IdentifierName](#prod-IdentifierName), _strict_).

[CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [CallExpression](#prod-CallExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  Let _fieldNameString_ be the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier).
4.  Return [MakePrivateReference](#sec-makeprivatereference)(_baseValue_, _fieldNameString_).


# 13.3.3 EvaluatePropertyAccessWithExpressionKey ( _baseValue_, _expression_, _strict_ )

The abstract operation EvaluatePropertyAccessWithExpressionKey takes arguments _baseValue_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _expression_ (an [Expression](#prod-Expression) [Parse Node](#sec-syntactic-grammar)), and _strict_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Reference Record](#sec-reference-record-specification-type) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _propertyNameReference_ be ? [Evaluation](#sec-evaluation) of _expression_.
2.  Let _propertyNameValue_ be ? [GetValue](#sec-getvalue)(_propertyNameReference_).
3.  NOTE: In most cases, [ToPropertyKey](#sec-topropertykey) will be performed on _propertyNameValue_ immediately after this step. However, in the case of `a[b] = c`, it will not be performed until after evaluation of `c`.
4.  Return the [Reference Record](#sec-reference-record-specification-type) { _\[\[Base\]\]_: _baseValue_, _\[\[ReferencedName\]\]_: _propertyNameValue_, _\[\[Strict\]\]_: _strict_, _\[\[ThisValue\]\]_: empty }.


# 13.3.4 EvaluatePropertyAccessWithIdentifierKey ( _baseValue_, _identifierName_, _strict_ )

The abstract operation EvaluatePropertyAccessWithIdentifierKey takes arguments _baseValue_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _identifierName_ (an [IdentifierName](#prod-IdentifierName) [Parse Node](#sec-syntactic-grammar)), and _strict_ (a Boolean) and returns a [Reference Record](#sec-reference-record-specification-type). It performs the following steps when called:

1.  Let _propertyNameString_ be the [StringValue](#sec-static-semantics-stringvalue) of _identifierName_.
2.  Return the [Reference Record](#sec-reference-record-specification-type) { _\[\[Base\]\]_: _baseValue_, _\[\[ReferencedName\]\]_: _propertyNameString_, _\[\[Strict\]\]_: _strict_, _\[\[ThisValue\]\]_: empty }.


# 13.3.5 The `new` Operator


# 13.3.5.1 Runtime Semantics: Evaluation

[NewExpression](#prod-NewExpression) : new [NewExpression](#prod-NewExpression)

1.  Return ? [EvaluateNew](#sec-evaluatenew)([NewExpression](#prod-NewExpression), empty).

[MemberExpression](#prod-MemberExpression) : new [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments)

1.  Return ? [EvaluateNew](#sec-evaluatenew)([MemberExpression](#prod-MemberExpression), [Arguments](#prod-Arguments)).


# 13.3.5.1.1 EvaluateNew ( _constructExpr_, _arguments_ )

The abstract operation EvaluateNew takes arguments _constructExpr_ (a [NewExpression](#prod-NewExpression) [Parse Node](#sec-syntactic-grammar) or a [MemberExpression](#prod-MemberExpression) [Parse Node](#sec-syntactic-grammar)) and _arguments_ (empty or an [Arguments](#prod-Arguments) [Parse Node](#sec-syntactic-grammar)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _ref_ be ? [Evaluation](#sec-evaluation) of _constructExpr_.
2.  Let _constructor_ be ? [GetValue](#sec-getvalue)(_ref_).
3.  If _arguments_ is empty, then
    1.  Let _argList_ be a new empty [List](#sec-list-and-record-specification-type).
4.  Else,
    1.  Let _argList_ be ? [ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation) of _arguments_.
5.  If [IsConstructor](#sec-isconstructor)(_constructor_) is false, throw a TypeError exception.
6.  Return ? [Construct](#sec-construct)(_constructor_, _argList_).


# 13.3.6 Function Calls


# 13.3.6.1 Runtime Semantics: Evaluation

[CallExpression](#prod-CallExpression) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)

1.  Let _expr_ be the [CallMemberExpression](#prod-CallMemberExpression) that is [covered](#sec-syntactic-grammar) by [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead).
2.  Let _memberExpr_ be the [MemberExpression](#prod-MemberExpression) of _expr_.
3.  Let _arguments_ be the [Arguments](#prod-Arguments) of _expr_.
4.  Let _ref_ be ? [Evaluation](#sec-evaluation) of _memberExpr_.
5.  Let _func_ be ? [GetValue](#sec-getvalue)(_ref_).
6.  If _ref_ is a [Reference Record](#sec-reference-record-specification-type), [IsPropertyReference](#sec-ispropertyreference)(_ref_) is false, and _ref_._\[\[ReferencedName\]\]_ is "eval", then
    1.  If [SameValue](#sec-samevalue)(_func_, [%eval%](#sec-eval-x)) is true, then
        1.  Let _argList_ be ? [ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation) of _arguments_.
        2.  If _argList_ has no elements, return undefined.
        3.  Let _evalArg_ be the first element of _argList_.
        4.  If [IsStrict](#sec-isstrict)(this [CallExpression](#prod-CallExpression)) is true, let _strictCaller_ be true; otherwise let _strictCaller_ be false.
        5.  Return ? [PerformEval](#sec-performeval)(_evalArg_, _strictCaller_, true).
7.  Let _thisCall_ be this [CallExpression](#prod-CallExpression).
8.  Let _tailCall_ be [IsInTailPosition](#sec-isintailposition)(_thisCall_).
9.  Return ? [EvaluateCall](#sec-evaluatecall)(_func_, _ref_, _arguments_, _tailCall_).

A [CallExpression](#prod-CallExpression) evaluation that executes step [6.a.v](#step-callexpression-evaluation-direct-eval) is a direct eval.

[CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) [Arguments](#prod-Arguments)

1.  Let _ref_ be ? [Evaluation](#sec-evaluation) of [CallExpression](#prod-CallExpression).
2.  Let _func_ be ? [GetValue](#sec-getvalue)(_ref_).
3.  Let _thisCall_ be this [CallExpression](#prod-CallExpression).
4.  Let _tailCall_ be [IsInTailPosition](#sec-isintailposition)(_thisCall_).
5.  Return ? [EvaluateCall](#sec-evaluatecall)(_func_, _ref_, [Arguments](#prod-Arguments), _tailCall_).


# 13.3.6.2 EvaluateCall ( _func_, _ref_, _arguments_, _tailPosition_ )

The abstract operation EvaluateCall takes arguments _func_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _ref_ (an [ECMAScript language value](#sec-ecmascript-language-types) or a [Reference Record](#sec-reference-record-specification-type)), _arguments_ (a [Parse Node](#sec-syntactic-grammar)), and _tailPosition_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _ref_ is a [Reference Record](#sec-reference-record-specification-type), then
    1.  If [IsPropertyReference](#sec-ispropertyreference)(_ref_) is true, then
        1.  Let _thisValue_ be [GetThisValue](#sec-getthisvalue)(_ref_).
    2.  Else,
        1.  Let _refEnv_ be _ref_._\[\[Base\]\]_.
        2.  [Assert](#assert): _refEnv_ is an [Environment Record](#sec-environment-records).
        3.  Let _thisValue_ be _refEnv_.WithBaseObject().
2.  Else,
    1.  Let _thisValue_ be undefined.
3.  Let _argList_ be ? [ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation) of _arguments_.
4.  If _func_ [is not an Object](#sec-object-type), throw a TypeError exception.
5.  If [IsCallable](#sec-iscallable)(_func_) is false, throw a TypeError exception.
6.  If _tailPosition_ is true, perform [PrepareForTailCall](#sec-preparefortailcall)().
7.  Return ? [Call](#sec-call)(_func_, _thisValue_, _argList_).


# 13.3.7 The `super` Keyword


# 13.3.7.1 Runtime Semantics: Evaluation

[SuperProperty](#prod-SuperProperty) : super \[[Expression](#prod-Expression) \]

1.  Let _env_ be [GetThisEnvironment](#sec-getthisenvironment)().
2.  Let _actualThis_ be ? _env_.GetThisBinding().
3.  Let _propertyNameReference_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
4.  Let _propertyNameValue_ be ? [GetValue](#sec-getvalue)(_propertyNameReference_).
5.  Let _strict_ be [IsStrict](#sec-isstrict)(this [SuperProperty](#prod-SuperProperty)).
6.  NOTE: In most cases, [ToPropertyKey](#sec-topropertykey) will be performed on _propertyNameValue_ immediately after this step. However, in the case of `super[b] = c`, it will not be performed until after evaluation of `c`.
7.  Return [MakeSuperPropertyReference](#sec-makesuperpropertyreference)(_actualThis_, _propertyNameValue_, _strict_).

[SuperProperty](#prod-SuperProperty) : super . [IdentifierName](#prod-IdentifierName)

1.  Let _env_ be [GetThisEnvironment](#sec-getthisenvironment)().
2.  Let _actualThis_ be ? _env_.GetThisBinding().
3.  Let _propertyKey_ be the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierName](#prod-IdentifierName).
4.  Let _strict_ be [IsStrict](#sec-isstrict)(this [SuperProperty](#prod-SuperProperty)).
5.  Return [MakeSuperPropertyReference](#sec-makesuperpropertyreference)(_actualThis_, _propertyKey_, _strict_).

[SuperCall](#prod-SuperCall) : super [Arguments](#prod-Arguments)

1.  Let _newTarget_ be [GetNewTarget](#sec-getnewtarget)().
2.  [Assert](#assert): _newTarget_ is a [constructor](#constructor).
3.  Let _func_ be [GetSuperConstructor](#sec-getsuperconstructor)().
4.  Let _argList_ be ? [ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation) of [Arguments](#prod-Arguments).
5.  If [IsConstructor](#sec-isconstructor)(_func_) is false, throw a TypeError exception.
6.  Let _result_ be ? [Construct](#sec-construct)(_func_, _argList_, _newTarget_).
7.  Let _thisER_ be [GetThisEnvironment](#sec-getthisenvironment)().
8.  [Assert](#assert): _thisER_ is a [Function Environment Record](#sec-function-environment-records).
9.  Perform ? [BindThisValue](#sec-bindthisvalue)(_thisER_, _result_).
10.  Let _F_ be _thisER_._\[\[FunctionObject\]\]_.
11.  [Assert](#assert): _F_ is an ECMAScript [function object](#function-object).
12.  Perform ? [InitializeInstanceElements](#sec-initializeinstanceelements)(_result_, _F_).
13.  Return _result_.


# 13.3.7.2 GetSuperConstructor ( )

The abstract operation GetSuperConstructor takes no arguments and returns an [ECMAScript language value](#sec-ecmascript-language-types). It performs the following steps when called:

1.  Let _envRec_ be [GetThisEnvironment](#sec-getthisenvironment)().
2.  [Assert](#assert): _envRec_ is a [Function Environment Record](#sec-function-environment-records).
3.  Let _activeFunction_ be _envRec_._\[\[FunctionObject\]\]_.
4.  [Assert](#assert): _activeFunction_ is an ECMAScript [function object](#function-object).
5.  Let _superConstructor_ be ! _activeFunction_._\[\[GetPrototypeOf\]\]_().
6.  Return _superConstructor_.


# 13.3.7.3 MakeSuperPropertyReference ( _actualThis_, _propertyKey_, _strict_ )

The abstract operation MakeSuperPropertyReference takes arguments _actualThis_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _propertyKey_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _strict_ (a Boolean) and returns a [Super Reference Record](#super-reference-record). It performs the following steps when called:

1.  Let _env_ be [GetThisEnvironment](#sec-getthisenvironment)().
2.  [Assert](#assert): _env_.HasSuperBinding() is true.
3.  [Assert](#assert): _env_ is a [Function Environment Record](#sec-function-environment-records).
4.  Let _baseValue_ be [GetSuperBase](#sec-getsuperbase)(_env_).
5.  Return the [Reference Record](#sec-reference-record-specification-type) { _\[\[Base\]\]_: _baseValue_, _\[\[ReferencedName\]\]_: _propertyKey_, _\[\[Strict\]\]_: _strict_, _\[\[ThisValue\]\]_: _actualThis_ }.


# 13.3.8 Argument Lists

Note

The evaluation of an argument list produces a [List](#sec-list-and-record-specification-type) of values.


# 13.3.8.1 Runtime Semantics: ArgumentListEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ArgumentListEvaluation takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[Arguments](#prod-Arguments) : ( )

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ArgumentList](#prod-ArgumentList) : [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _ref_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
2.  Let _arg_ be ? [GetValue](#sec-getvalue)(_ref_).
3.  Return « _arg_ ».

[ArgumentList](#prod-ArgumentList) : ... [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _list_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Let _spreadRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
3.  Let _spreadObj_ be ? [GetValue](#sec-getvalue)(_spreadRef_).
4.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_spreadObj_, sync).
5.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, return _list_.
    3.  Append _next_ to _list_.

[ArgumentList](#prod-ArgumentList) : [ArgumentList](#prod-ArgumentList) , [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _precedingArgs_ be ? [ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation) of [ArgumentList](#prod-ArgumentList).
2.  Let _ref_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
3.  Let _arg_ be ? [GetValue](#sec-getvalue)(_ref_).
4.  Return the [list-concatenation](#list-concatenation) of _precedingArgs_ and « _arg_ ».

[ArgumentList](#prod-ArgumentList) : [ArgumentList](#prod-ArgumentList) , ... [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _precedingArgs_ be ? [ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation) of [ArgumentList](#prod-ArgumentList).
2.  Let _spreadRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
3.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(? [GetValue](#sec-getvalue)(_spreadRef_), sync).
4.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, return _precedingArgs_.
    3.  Append _next_ to _precedingArgs_.

[TemplateLiteral](#prod-TemplateLiteral) : [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate)

1.  Let _templateLiteral_ be this [TemplateLiteral](#prod-TemplateLiteral).
2.  Let _siteObj_ be [GetTemplateObject](#sec-gettemplateobject)(_templateLiteral_).
3.  Return « _siteObj_ ».

[TemplateLiteral](#prod-TemplateLiteral) : [SubstitutionTemplate](#prod-SubstitutionTemplate)

1.  Let _templateLiteral_ be this [TemplateLiteral](#prod-TemplateLiteral).
2.  Let _siteObj_ be [GetTemplateObject](#sec-gettemplateobject)(_templateLiteral_).
3.  Let _remaining_ be ? [ArgumentListEvaluation](#sec-runtime-semantics-argumentlistevaluation) of [SubstitutionTemplate](#prod-SubstitutionTemplate).
4.  Return the [list-concatenation](#list-concatenation) of « _siteObj_ » and _remaining_.

[SubstitutionTemplate](#prod-SubstitutionTemplate) : [TemplateHead](#prod-TemplateHead) [Expression](#prod-Expression) [TemplateSpans](#prod-TemplateSpans)

1.  Let _firstSubRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _firstSub_ be ? [GetValue](#sec-getvalue)(_firstSubRef_).
3.  Let _restSub_ be ? [SubstitutionEvaluation](#sec-runtime-semantics-substitutionevaluation) of [TemplateSpans](#prod-TemplateSpans).
4.  [Assert](#assert): _restSub_ is a possibly empty [List](#sec-list-and-record-specification-type).
5.  Return the [list-concatenation](#list-concatenation) of « _firstSub_ » and _restSub_.


# 13.3.9 Optional Chains

Note

An optional chain is a chain of one or more property accesses and function calls, the first of which begins with the token `?.`.


# 13.3.9.1 Runtime Semantics: Evaluation

[OptionalExpression](#prod-OptionalExpression) : [MemberExpression](#prod-MemberExpression) [OptionalChain](#prod-OptionalChain)

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [MemberExpression](#prod-MemberExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  If _baseValue_ is either undefined or null, then
    1.  Return undefined.
4.  Return ? [ChainEvaluation](#sec-optional-chaining-chain-evaluation) of [OptionalChain](#prod-OptionalChain) with arguments _baseValue_ and _baseReference_.

[OptionalExpression](#prod-OptionalExpression) : [CallExpression](#prod-CallExpression) [OptionalChain](#prod-OptionalChain)

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [CallExpression](#prod-CallExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  If _baseValue_ is either undefined or null, then
    1.  Return undefined.
4.  Return ? [ChainEvaluation](#sec-optional-chaining-chain-evaluation) of [OptionalChain](#prod-OptionalChain) with arguments _baseValue_ and _baseReference_.

[OptionalExpression](#prod-OptionalExpression) : [OptionalExpression](#prod-OptionalExpression) [OptionalChain](#prod-OptionalChain)

1.  Let _baseReference_ be ? [Evaluation](#sec-evaluation) of [OptionalExpression](#prod-OptionalExpression).
2.  Let _baseValue_ be ? [GetValue](#sec-getvalue)(_baseReference_).
3.  If _baseValue_ is either undefined or null, then
    1.  Return undefined.
4.  Return ? [ChainEvaluation](#sec-optional-chaining-chain-evaluation) of [OptionalChain](#prod-OptionalChain) with arguments _baseValue_ and _baseReference_.


# 13.3.9.2 Runtime Semantics: ChainEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ChainEvaluation takes arguments _baseValue_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _baseReference_ (an [ECMAScript language value](#sec-ecmascript-language-types) or a [Reference Record](#sec-reference-record-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an [ECMAScript language value](#sec-ecmascript-language-types) or a [Reference Record](#sec-reference-record-specification-type), or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[OptionalChain](#prod-OptionalChain) : ?. [Arguments](#prod-Arguments)

1.  Let _thisChain_ be this [OptionalChain](#prod-OptionalChain).
2.  Let _tailCall_ be [IsInTailPosition](#sec-isintailposition)(_thisChain_).
3.  Return ? [EvaluateCall](#sec-evaluatecall)(_baseValue_, _baseReference_, [Arguments](#prod-Arguments), _tailCall_).

[OptionalChain](#prod-OptionalChain) : ?. \[[Expression](#prod-Expression) \]

1.  Let _strict_ be [IsStrict](#sec-isstrict)(this [OptionalChain](#prod-OptionalChain)).
2.  Return ? [EvaluatePropertyAccessWithExpressionKey](#sec-evaluate-property-access-with-expression-key)(_baseValue_, [Expression](#prod-Expression), _strict_).

[OptionalChain](#prod-OptionalChain) : ?. [IdentifierName](#prod-IdentifierName)

1.  Let _strict_ be [IsStrict](#sec-isstrict)(this [OptionalChain](#prod-OptionalChain)).
2.  Return [EvaluatePropertyAccessWithIdentifierKey](#sec-evaluate-property-access-with-identifier-key)(_baseValue_, [IdentifierName](#prod-IdentifierName), _strict_).

[OptionalChain](#prod-OptionalChain) : ?. [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Let _fieldNameString_ be the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier).
2.  Return [MakePrivateReference](#sec-makeprivatereference)(_baseValue_, _fieldNameString_).

[OptionalChain](#prod-OptionalChain) : [OptionalChain](#prod-OptionalChain) [Arguments](#prod-Arguments)

1.  Let _optionalChain_ be [OptionalChain](#prod-OptionalChain).
2.  Let _newReference_ be ? [ChainEvaluation](#sec-optional-chaining-chain-evaluation) of _optionalChain_ with arguments _baseValue_ and _baseReference_.
3.  Let _newValue_ be ? [GetValue](#sec-getvalue)(_newReference_).
4.  Let _thisChain_ be this [OptionalChain](#prod-OptionalChain).
5.  Let _tailCall_ be [IsInTailPosition](#sec-isintailposition)(_thisChain_).
6.  Return ? [EvaluateCall](#sec-evaluatecall)(_newValue_, _newReference_, [Arguments](#prod-Arguments), _tailCall_).

[OptionalChain](#prod-OptionalChain) : [OptionalChain](#prod-OptionalChain) \[[Expression](#prod-Expression) \]

1.  Let _optionalChain_ be [OptionalChain](#prod-OptionalChain).
2.  Let _newReference_ be ? [ChainEvaluation](#sec-optional-chaining-chain-evaluation) of _optionalChain_ with arguments _baseValue_ and _baseReference_.
3.  Let _newValue_ be ? [GetValue](#sec-getvalue)(_newReference_).
4.  Let _strict_ be [IsStrict](#sec-isstrict)(this [OptionalChain](#prod-OptionalChain)).
5.  Return ? [EvaluatePropertyAccessWithExpressionKey](#sec-evaluate-property-access-with-expression-key)(_newValue_, [Expression](#prod-Expression), _strict_).

[OptionalChain](#prod-OptionalChain) : [OptionalChain](#prod-OptionalChain) . [IdentifierName](#prod-IdentifierName)

1.  Let _optionalChain_ be [OptionalChain](#prod-OptionalChain).
2.  Let _newReference_ be ? [ChainEvaluation](#sec-optional-chaining-chain-evaluation) of _optionalChain_ with arguments _baseValue_ and _baseReference_.
3.  Let _newValue_ be ? [GetValue](#sec-getvalue)(_newReference_).
4.  Let _strict_ be [IsStrict](#sec-isstrict)(this [OptionalChain](#prod-OptionalChain)).
5.  Return [EvaluatePropertyAccessWithIdentifierKey](#sec-evaluate-property-access-with-identifier-key)(_newValue_, [IdentifierName](#prod-IdentifierName), _strict_).

[OptionalChain](#prod-OptionalChain) : [OptionalChain](#prod-OptionalChain) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Let _optionalChain_ be [OptionalChain](#prod-OptionalChain).
2.  Let _newReference_ be ? [ChainEvaluation](#sec-optional-chaining-chain-evaluation) of _optionalChain_ with arguments _baseValue_ and _baseReference_.
3.  Let _newValue_ be ? [GetValue](#sec-getvalue)(_newReference_).
4.  Let _fieldNameString_ be the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier).
5.  Return [MakePrivateReference](#sec-makeprivatereference)(_newValue_, _fieldNameString_).


# 13.3.10 Import Calls


# 13.3.10.1 Runtime Semantics: Evaluation

[ImportCall](#prod-ImportCall) : import ( [AssignmentExpression](#prod-AssignmentExpression) ,opt )

1.  Return ? [EvaluateImportCall](#sec-evaluate-import-call)([AssignmentExpression](#prod-AssignmentExpression)).

[ImportCall](#prod-ImportCall) : import ( [AssignmentExpression](#prod-AssignmentExpression) , [AssignmentExpression](#prod-AssignmentExpression) ,opt )

1.  Return ? [EvaluateImportCall](#sec-evaluate-import-call)(the first [AssignmentExpression](#prod-AssignmentExpression), the second [AssignmentExpression](#prod-AssignmentExpression)).


# 13.3.10.2 EvaluateImportCall ( _specifierExpression_ \[, _optionsExpression_ \] )

The abstract operation EvaluateImportCall takes argument _specifierExpression_ (a [Parse Node](#sec-syntactic-grammar)) and optional argument _optionsExpression_ (a [Parse Node](#sec-syntactic-grammar)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Promise or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _referrer_ be [GetActiveScriptOrModule](#sec-getactivescriptormodule)().
2.  If _referrer_ is null, set _referrer_ to [the current Realm Record](#current-realm).
3.  Let _specifierRef_ be ? [Evaluation](#sec-evaluation) of _specifierExpression_.
4.  Let _specifier_ be ? [GetValue](#sec-getvalue)(_specifierRef_).
5.  If _optionsExpression_ is present, then
    1.  Let _optionsRef_ be ? [Evaluation](#sec-evaluation) of _optionsExpression_.
    2.  Let _options_ be ? [GetValue](#sec-getvalue)(_optionsRef_).
6.  Else,
    1.  Let _options_ be undefined.
7.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
8.  Let _specifierString_ be [Completion](#sec-completion-ao)([ToString](#sec-tostring)(_specifier_)).
9.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_specifierString_, _promiseCapability_).
10.  Let _attributes_ be a new empty [List](#sec-list-and-record-specification-type).
11.  If _options_ is not undefined, then
     1.  If _options_ [is not an Object](#sec-object-type), then
         1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « a newly created TypeError object »).
         2.  Return _promiseCapability_._\[\[Promise\]\]_.
     2.  Let _attributesObj_ be [Completion](#sec-completion-ao)([Get](#sec-get-o-p)(_options_, "with")).
     3.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_attributesObj_, _promiseCapability_).
     4.  If _attributesObj_ is not undefined, then
         1.  If _attributesObj_ [is not an Object](#sec-object-type), then
             1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « a newly created TypeError object »).
             2.  Return _promiseCapability_._\[\[Promise\]\]_.
         2.  Let _entries_ be [Completion](#sec-completion-ao)([EnumerableOwnProperties](#sec-enumerableownproperties)(_attributesObj_, key+value)).
         3.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_entries_, _promiseCapability_).
         4.  For each element _entry_ of _entries_, do
             1.  Let _key_ be ! [Get](#sec-get-o-p)(_entry_, "0").
             2.  Let _value_ be ! [Get](#sec-get-o-p)(_entry_, "1").
             3.  If _key_ [is a String](#sec-ecmascript-language-types-string-type), then
                 1.  If _value_ [is not a String](#sec-ecmascript-language-types-string-type), then
                     1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « a newly created TypeError object »).
                     2.  Return _promiseCapability_._\[\[Promise\]\]_.
                 2.  Append the [ImportAttribute Record](#importattribute-record) { _\[\[Key\]\]_: _key_, _\[\[Value\]\]_: _value_ } to _attributes_.
     5.  If [AllImportAttributesSupported](#sec-AllImportAttributesSupported)(_attributes_) is false, then
         1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « a newly created TypeError object »).
         2.  Return _promiseCapability_._\[\[Promise\]\]_.
     6.  Sort _attributes_ according to the lexicographic order of their _\[\[Key\]\]_ field, treating the value of each such field as a sequence of UTF-16 code unit values. NOTE: This sorting is observable only in that [hosts](#host) are prohibited from changing behaviour based on the order in which attributes are enumerated.
12.  Let _moduleRequest_ be a new [ModuleRequest Record](#modulerequest-record) { _\[\[Specifier\]\]_: _specifierString_, _\[\[Attributes\]\]_: _attributes_ }.
13.  Perform [HostLoadImportedModule](#sec-HostLoadImportedModule)(_referrer_, _moduleRequest_, empty, _promiseCapability_).
14.  Return _promiseCapability_._\[\[Promise\]\]_.


# 13.3.10.3 ContinueDynamicImport ( _promiseCapability_, _moduleCompletion_ )

The abstract operation ContinueDynamicImport takes arguments _promiseCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)) and _moduleCompletion_ (either a [normal completion containing](#sec-completion-record-specification-type) a [Module Record](#sec-abstract-module-records) or a [throw completion](#sec-completion-record-specification-type)) and returns unused. It completes the process of a dynamic import originally started by an [`import()`](#sec-import-calls) call, resolving or rejecting the promise returned by that call as appropriate. It performs the following steps when called:

1.  If _moduleCompletion_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _moduleCompletion_._\[\[Value\]\]_ »).
    2.  Return unused.
2.  Let _module_ be _moduleCompletion_._\[\[Value\]\]_.
3.  Let _loadPromise_ be _module_.LoadRequestedModules().
4.  Let _rejectedClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_reason_) that captures _promiseCapability_ and performs the following steps when called:
    1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _reason_ »).
    2.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
5.  Let _onRejected_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_rejectedClosure_, 1, "", « »).
6.  Let _linkAndEvaluateClosure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _module_, _promiseCapability_, and _onRejected_ and performs the following steps when called:
    1.  Let _link_ be [Completion](#sec-completion-ao)(_module_.Link()).
    2.  If _link_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _link_._\[\[Value\]\]_ »).
        2.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
    3.  Let _evaluatePromise_ be _module_.Evaluate().
    4.  Let _fulfilledClosure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _module_ and _promiseCapability_ and performs the following steps when called:
        1.  Let _namespace_ be [GetModuleNamespace](#sec-getmodulenamespace)(_module_).
        2.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _namespace_ »).
        3.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
    5.  Let _onFulfilled_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_fulfilledClosure_, 0, "", « »).
    6.  Perform [PerformPromiseThen](#sec-performpromisethen)(_evaluatePromise_, _onFulfilled_, _onRejected_).
    7.  Return unused.
7.  Let _linkAndEvaluate_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_linkAndEvaluateClosure_, 0, "", « »).
8.  Perform [PerformPromiseThen](#sec-performpromisethen)(_loadPromise_, _linkAndEvaluate_, _onRejected_).
9.  Return unused.


# 13.3.11 Tagged Templates

Note

A tagged template is a function call where the arguments of the call are derived from a [TemplateLiteral](#prod-TemplateLiteral) ([13.2.8](#sec-template-literals)). The actual arguments include a template object ([13.2.8.4](#sec-gettemplateobject)) and the values produced by evaluating the expressions embedded within the [TemplateLiteral](#prod-TemplateLiteral).


# 13.3.11.1 Runtime Semantics: Evaluation

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) [TemplateLiteral](#prod-TemplateLiteral)

1.  Let _tagRef_ be ? [Evaluation](#sec-evaluation) of [MemberExpression](#prod-MemberExpression).
2.  Let _tagFunc_ be ? [GetValue](#sec-getvalue)(_tagRef_).
3.  Let _thisCall_ be this [MemberExpression](#prod-MemberExpression).
4.  Let _tailCall_ be [IsInTailPosition](#sec-isintailposition)(_thisCall_).
5.  Return ? [EvaluateCall](#sec-evaluatecall)(_tagFunc_, _tagRef_, [TemplateLiteral](#prod-TemplateLiteral), _tailCall_).

[CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) [TemplateLiteral](#prod-TemplateLiteral)

1.  Let _tagRef_ be ? [Evaluation](#sec-evaluation) of [CallExpression](#prod-CallExpression).
2.  Let _tagFunc_ be ? [GetValue](#sec-getvalue)(_tagRef_).
3.  Let _thisCall_ be this [CallExpression](#prod-CallExpression).
4.  Let _tailCall_ be [IsInTailPosition](#sec-isintailposition)(_thisCall_).
5.  Return ? [EvaluateCall](#sec-evaluatecall)(_tagFunc_, _tagRef_, [TemplateLiteral](#prod-TemplateLiteral), _tailCall_).


# 13.3.12 Meta Properties


# 13.3.12.1 Runtime Semantics: Evaluation

[NewTarget](#prod-NewTarget) : new . target

1.  Return [GetNewTarget](#sec-getnewtarget)().

[ImportMeta](#prod-ImportMeta) : import . meta

1.  Let _module_ be [GetActiveScriptOrModule](#sec-getactivescriptormodule)().
2.  [Assert](#assert): _module_ is a [Source Text Module Record](#sourctextmodule-record).
3.  Let _importMeta_ be _module_._\[\[ImportMeta\]\]_.
4.  If _importMeta_ is empty, then
    1.  Set _importMeta_ to [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(null).
    2.  Let _importMetaValues_ be [HostGetImportMetaProperties](#sec-hostgetimportmetaproperties)(_module_).
    3.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _importMetaValues_, do
        1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_importMeta_, _p_._\[\[Key\]\]_, _p_._\[\[Value\]\]_).
    4.  Perform [HostFinalizeImportMeta](#sec-hostfinalizeimportmeta)(_importMeta_, _module_).
    5.  Set _module_._\[\[ImportMeta\]\]_ to _importMeta_.
    6.  Return _importMeta_.
5.  Else,
    1.  [Assert](#assert): _importMeta_ [is an Object](#sec-object-type).
    2.  Return _importMeta_.


# 13.3.12.1.1 HostGetImportMetaProperties ( _moduleRecord_ )

The [host-defined](#host-defined) abstract operation HostGetImportMetaProperties takes argument _moduleRecord_ (a [Module Record](#sec-abstract-module-records)) and returns a [List](#sec-list-and-record-specification-type) of [Records](#sec-list-and-record-specification-type) with fields _\[\[Key\]\]_ (a [property key](#property-key)) and _\[\[Value\]\]_ (an [ECMAScript language value](#sec-ecmascript-language-types)). It allows [hosts](#host) to provide [property keys](#property-key) and values for the object returned from `import.meta`.

The default implementation of HostGetImportMetaProperties is to return a new empty [List](#sec-list-and-record-specification-type).


# 13.3.12.1.2 HostFinalizeImportMeta ( _importMeta_, _moduleRecord_ )

The [host-defined](#host-defined) abstract operation HostFinalizeImportMeta takes arguments _importMeta_ (an Object) and _moduleRecord_ (a [Module Record](#sec-abstract-module-records)) and returns unused. It allows [hosts](#host) to perform any extraordinary operations to prepare the object returned from `import.meta`.

Most [hosts](#host) will be able to simply define [HostGetImportMetaProperties](#sec-hostgetimportmetaproperties), and leave HostFinalizeImportMeta with its default behaviour. However, HostFinalizeImportMeta provides an "escape hatch" for [hosts](#host) which need to directly manipulate the object before it is exposed to ECMAScript code.

The default implementation of HostFinalizeImportMeta is to return unused.


# 13.4 Update Expressions


## Syntax

[UpdateExpression](#prod-UpdateExpression)\[Yield, Await\] : [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] ++ [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \-- ++ [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] \-- [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\]


# 13.4.1 Static Semantics: Early Errors

[UpdateExpression](#prod-UpdateExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) ++ [LeftHandSideExpression](#prod-LeftHandSideExpression) \--

-   It is an early Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is invalid.

[UpdateExpression](#prod-UpdateExpression) : ++ [UnaryExpression](#prod-UnaryExpression) \-- [UnaryExpression](#prod-UnaryExpression)

-   It is an early Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [UnaryExpression](#prod-UnaryExpression) is invalid.


# 13.4.2 Postfix Increment Operator


# 13.4.2.1 Runtime Semantics: Evaluation

[UpdateExpression](#prod-UpdateExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) ++

1.  Let _lhs_ be ? [Evaluation](#sec-evaluation) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
2.  If the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is web-compat, throw a ReferenceError exception.
3.  Let _oldValue_ be ? [ToNumeric](#sec-tonumeric)(? [GetValue](#sec-getvalue)(_lhs_)).
4.  If _oldValue_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Let _newValue_ be [Number::add](#sec-numeric-types-number-add)(_oldValue_, 1<sub>𝔽</sub>).
5.  Else,
    1.  [Assert](#assert): _oldValue_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    2.  Let _newValue_ be [BigInt::add](#sec-numeric-types-bigint-add)(_oldValue_, 1<sub>ℤ</sub>).
6.  Perform ? [PutValue](#sec-putvalue)(_lhs_, _newValue_).
7.  Return _oldValue_.


# 13.4.3 Postfix Decrement Operator


# 13.4.3.1 Runtime Semantics: Evaluation

[UpdateExpression](#prod-UpdateExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) \--

1.  Let _lhs_ be ? [Evaluation](#sec-evaluation) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
2.  If the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is web-compat, throw a ReferenceError exception.
3.  Let _oldValue_ be ? [ToNumeric](#sec-tonumeric)(? [GetValue](#sec-getvalue)(_lhs_)).
4.  If _oldValue_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Let _newValue_ be [Number::subtract](#sec-numeric-types-number-subtract)(_oldValue_, 1<sub>𝔽</sub>).
5.  Else,
    1.  [Assert](#assert): _oldValue_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    2.  Let _newValue_ be [BigInt::subtract](#sec-numeric-types-bigint-subtract)(_oldValue_, 1<sub>ℤ</sub>).
6.  Perform ? [PutValue](#sec-putvalue)(_lhs_, _newValue_).
7.  Return _oldValue_.


# 13.4.4 Prefix Increment Operator


# 13.4.4.1 Runtime Semantics: Evaluation

[UpdateExpression](#prod-UpdateExpression) : ++ [UnaryExpression](#prod-UnaryExpression)

1.  Let _expr_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  If the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [UnaryExpression](#prod-UnaryExpression) is web-compat, throw a ReferenceError exception.
3.  Let _oldValue_ be ? [ToNumeric](#sec-tonumeric)(? [GetValue](#sec-getvalue)(_expr_)).
4.  If _oldValue_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Let _newValue_ be [Number::add](#sec-numeric-types-number-add)(_oldValue_, 1<sub>𝔽</sub>).
5.  Else,
    1.  [Assert](#assert): _oldValue_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    2.  Let _newValue_ be [BigInt::add](#sec-numeric-types-bigint-add)(_oldValue_, 1<sub>ℤ</sub>).
6.  Perform ? [PutValue](#sec-putvalue)(_expr_, _newValue_).
7.  Return _newValue_.


# 13.4.5 Prefix Decrement Operator


# 13.4.5.1 Runtime Semantics: Evaluation

[UpdateExpression](#prod-UpdateExpression) : \-- [UnaryExpression](#prod-UnaryExpression)

1.  Let _expr_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  If the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [UnaryExpression](#prod-UnaryExpression) is web-compat, throw a ReferenceError exception.
3.  Let _oldValue_ be ? [ToNumeric](#sec-tonumeric)(? [GetValue](#sec-getvalue)(_expr_)).
4.  If _oldValue_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Let _newValue_ be [Number::subtract](#sec-numeric-types-number-subtract)(_oldValue_, 1<sub>𝔽</sub>).
5.  Else,
    1.  [Assert](#assert): _oldValue_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    2.  Let _newValue_ be [BigInt::subtract](#sec-numeric-types-bigint-subtract)(_oldValue_, 1<sub>ℤ</sub>).
6.  Perform ? [PutValue](#sec-putvalue)(_expr_, _newValue_).
7.  Return _newValue_.


# 13.5 Unary Operators


## Syntax

[UnaryExpression](#prod-UnaryExpression)\[Yield, Await\] : [UpdateExpression](#prod-UpdateExpression)\[?Yield, ?Await\] delete [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] void [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] typeof [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] + [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] \- [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] ~ [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] ! [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] \[+Await\] [AwaitExpression](#prod-AwaitExpression)\[?Yield\]


# 13.5.1 The `delete` Operator


# 13.5.1.1 Static Semantics: Early Errors

[UnaryExpression](#prod-UnaryExpression) : delete [UnaryExpression](#prod-UnaryExpression)

-   It is a Syntax Error if [IsStrict](#sec-isstrict)(the [UnaryExpression](#prod-UnaryExpression)) is true and the derived [UnaryExpression](#prod-UnaryExpression) is [PrimaryExpression](#prod-PrimaryExpression) : [IdentifierReference](#prod-IdentifierReference) , [MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) , [CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) , [OptionalChain](#prod-OptionalChain) : ?. [PrivateIdentifier](#prod-PrivateIdentifier) , or [OptionalChain](#prod-OptionalChain) : [OptionalChain](#prod-OptionalChain) . [PrivateIdentifier](#prod-PrivateIdentifier) .
-   It is a Syntax Error if the derived [UnaryExpression](#prod-UnaryExpression) is  
    [PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)  
    and [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) ultimately derives a phrase that, if used in place of [UnaryExpression](#prod-UnaryExpression), would produce a Syntax Error according to these rules. This rule is recursively applied.
    

Note

The last rule means that expressions such as `delete (((foo)))` produce [early errors](#early-error) because of recursive application of the first rule.


# 13.5.1.2 Runtime Semantics: Evaluation

[UnaryExpression](#prod-UnaryExpression) : delete [UnaryExpression](#prod-UnaryExpression)

1.  Let _ref_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  If _ref_ is not a [Reference Record](#sec-reference-record-specification-type), return true.
3.  If [IsUnresolvableReference](#sec-isunresolvablereference)(_ref_) is true, then
    1.  [Assert](#assert): _ref_._\[\[Strict\]\]_ is false.
    2.  Return true.
4.  If [IsPropertyReference](#sec-ispropertyreference)(_ref_) is true, then
    1.  [Assert](#assert): [IsPrivateReference](#sec-isprivatereference)(_ref_) is false.
    2.  If [IsSuperReference](#sec-issuperreference)(_ref_) is true, throw a ReferenceError exception.
    3.  Let _baseObj_ be ? [ToObject](#sec-toobject)(_ref_._\[\[Base\]\]_).
    4.  If _ref_._\[\[ReferencedName\]\]_ is not a [property key](#property-key), then
        1.  Set _ref_._\[\[ReferencedName\]\]_ to ? [ToPropertyKey](#sec-topropertykey)(_ref_._\[\[ReferencedName\]\]_).
    5.  Let _deleteStatus_ be ? _baseObj_._\[\[Delete\]\]_(_ref_._\[\[ReferencedName\]\]_).
    6.  If _deleteStatus_ is false and _ref_._\[\[Strict\]\]_ is true, throw a TypeError exception.
    7.  Return _deleteStatus_.
5.  Else,
    1.  Let _base_ be _ref_._\[\[Base\]\]_.
    2.  [Assert](#assert): _base_ is an [Environment Record](#sec-environment-records).
    3.  Return ? _base_.DeleteBinding(_ref_._\[\[ReferencedName\]\]_).

Note 1

When a `delete` operator occurs within [strict mode code](#sec-strict-mode-code), a SyntaxError exception is thrown if its [UnaryExpression](#prod-UnaryExpression) is a direct reference to a variable, function argument, or function name. In addition, if a `delete` operator occurs within [strict mode code](#sec-strict-mode-code) and the property to be deleted has the attribute { _\[\[Configurable\]\]_: false } (or otherwise cannot be deleted), a TypeError exception is thrown.

Note 2

The object that may be created in step [4.c](#step-delete-operator-toobject) is not accessible outside of the above abstract operation and the [ordinary object](#ordinary-object) _\[\[Delete\]\]_ internal method. An implementation might choose to avoid the actual creation of that object.


# 13.5.2 The `void` Operator


# 13.5.2.1 Runtime Semantics: Evaluation

[UnaryExpression](#prod-UnaryExpression) : void [UnaryExpression](#prod-UnaryExpression)

1.  Let _expr_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  Perform ? [GetValue](#sec-getvalue)(_expr_).
3.  Return undefined.

Note

[GetValue](#sec-getvalue) must be called even though its value is not used because it may have observable side-effects.


# 13.5.3 The `typeof` Operator


# 13.5.3.1 Runtime Semantics: Evaluation

[UnaryExpression](#prod-UnaryExpression) : typeof [UnaryExpression](#prod-UnaryExpression)

1.  Let _val_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  If _val_ is a [Reference Record](#sec-reference-record-specification-type), then
    1.  If [IsUnresolvableReference](#sec-isunresolvablereference)(_val_) is true, return "undefined".
3.  Set _val_ to ? [GetValue](#sec-getvalue)(_val_).
4.  If _val_ is undefined, return "undefined".
5.  If _val_ is null, return "object".
6.  If _val_ [is a String](#sec-ecmascript-language-types-string-type), return "string".
7.  If _val_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return "symbol".
8.  If _val_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), return "boolean".
9.  If _val_ [is a Number](#sec-ecmascript-language-types-number-type), return "number".
10.  If _val_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), return "bigint".
11.  [Assert](#assert): _val_ [is an Object](#sec-object-type).
12.  [Normative Optional](#sec-conformance)
     
     If the [host](#host) is a web browser or otherwise supports [The _\[\[IsHTMLDDA\]\]_ Internal Slot](#sec-IsHTMLDDA-internal-slot), then
     1.  If _val_ has an _\[\[IsHTMLDDA\]\]_ internal slot, return "undefined".
13.  If _val_ has a _\[\[Call\]\]_ internal method, return "function".
14.  Return "object".


# 13.5.4 Unary `+` Operator

Note

The unary + operator converts its operand to [Number type](#sec-ecmascript-language-types-number-type).


# 13.5.4.1 Runtime Semantics: Evaluation

[UnaryExpression](#prod-UnaryExpression) : + [UnaryExpression](#prod-UnaryExpression)

1.  Let _expr_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  Return ? [ToNumber](#sec-tonumber)(? [GetValue](#sec-getvalue)(_expr_)).


# 13.5.5 Unary `-` Operator

Note

The unary `-` operator converts its operand to a numeric value and then negates it. Negating +0<sub>𝔽</sub> produces \-0<sub>𝔽</sub>, and negating \-0<sub>𝔽</sub> produces +0<sub>𝔽</sub>.


# 13.5.5.1 Runtime Semantics: Evaluation

[UnaryExpression](#prod-UnaryExpression) : \- [UnaryExpression](#prod-UnaryExpression)

1.  Let _expr_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  Let _oldValue_ be ? [ToNumeric](#sec-tonumeric)(? [GetValue](#sec-getvalue)(_expr_)).
3.  If _oldValue_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Return [Number::unaryMinus](#sec-numeric-types-number-unaryMinus)(_oldValue_).
4.  Else,
    1.  [Assert](#assert): _oldValue_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    2.  Return [BigInt::unaryMinus](#sec-numeric-types-bigint-unaryMinus)(_oldValue_).


# 13.5.6 Bitwise NOT Operator ( `~` )


# 13.5.6.1 Runtime Semantics: Evaluation

[UnaryExpression](#prod-UnaryExpression) : ~ [UnaryExpression](#prod-UnaryExpression)

1.  Let _expr_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  Let _oldValue_ be ? [ToNumeric](#sec-tonumeric)(? [GetValue](#sec-getvalue)(_expr_)).
3.  If _oldValue_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Return [Number::bitwiseNOT](#sec-numeric-types-number-bitwiseNOT)(_oldValue_).
4.  Else,
    1.  [Assert](#assert): _oldValue_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    2.  Return [BigInt::bitwiseNOT](#sec-numeric-types-bigint-bitwiseNOT)(_oldValue_).


# 13.5.7 Logical NOT Operator ( `!` )


# 13.5.7.1 Runtime Semantics: Evaluation

[UnaryExpression](#prod-UnaryExpression) : ! [UnaryExpression](#prod-UnaryExpression)

1.  Let _expr_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  Let _oldValue_ be [ToBoolean](#sec-toboolean)(? [GetValue](#sec-getvalue)(_expr_)).
3.  If _oldValue_ is true, return false.
4.  Return true.


# 13.6 Exponentiation Operator


## Syntax

[ExponentiationExpression](#prod-ExponentiationExpression)\[Yield, Await\] : [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] [UpdateExpression](#prod-UpdateExpression)\[?Yield, ?Await\] \*\* [ExponentiationExpression](#prod-ExponentiationExpression)\[?Yield, ?Await\]


# 13.6.1 Runtime Semantics: Evaluation

[ExponentiationExpression](#prod-ExponentiationExpression) : [UpdateExpression](#prod-UpdateExpression) \*\* [ExponentiationExpression](#prod-ExponentiationExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([UpdateExpression](#prod-UpdateExpression), `**`, [ExponentiationExpression](#prod-ExponentiationExpression)).


# 13.7 Multiplicative Operators


## Syntax

[MultiplicativeExpression](#prod-MultiplicativeExpression)\[Yield, Await\] : [ExponentiationExpression](#prod-ExponentiationExpression)\[?Yield, ?Await\] [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\] [MultiplicativeOperator](#prod-MultiplicativeOperator) [ExponentiationExpression](#prod-ExponentiationExpression)\[?Yield, ?Await\] [MultiplicativeOperator](#prod-MultiplicativeOperator) : one of \* / % Note

-   The `*` operator performs multiplication, producing the product of its operands.
-   The `/` operator performs division, producing the quotient of its operands.
-   The `%` operator yields the remainder of its operands from an implied division.


# 13.7.1 Runtime Semantics: Evaluation

[MultiplicativeExpression](#prod-MultiplicativeExpression) : [MultiplicativeExpression](#prod-MultiplicativeExpression) [MultiplicativeOperator](#prod-MultiplicativeOperator) [ExponentiationExpression](#prod-ExponentiationExpression)

1.  Let _opText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [MultiplicativeOperator](#prod-MultiplicativeOperator).
2.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([MultiplicativeExpression](#prod-MultiplicativeExpression), _opText_, [ExponentiationExpression](#prod-ExponentiationExpression)).


# 13.8 Additive Operators


## Syntax

[AdditiveExpression](#prod-AdditiveExpression)\[Yield, Await\] : [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\] [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] + [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\] [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] \- [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\]


# 13.8.1 The Addition Operator ( `+` )

Note

The addition operator either performs string concatenation or numeric addition.


# 13.8.1.1 Runtime Semantics: Evaluation

[AdditiveExpression](#prod-AdditiveExpression) : [AdditiveExpression](#prod-AdditiveExpression) + [MultiplicativeExpression](#prod-MultiplicativeExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([AdditiveExpression](#prod-AdditiveExpression), `+`, [MultiplicativeExpression](#prod-MultiplicativeExpression)).


# 13.8.2 The Subtraction Operator ( `-` )

Note

The `-` operator performs subtraction, producing the difference of its operands.


# 13.8.2.1 Runtime Semantics: Evaluation

[AdditiveExpression](#prod-AdditiveExpression) : [AdditiveExpression](#prod-AdditiveExpression) \- [MultiplicativeExpression](#prod-MultiplicativeExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([AdditiveExpression](#prod-AdditiveExpression), `-`, [MultiplicativeExpression](#prod-MultiplicativeExpression)).


# 13.9 Bitwise Shift Operators


## Syntax

[ShiftExpression](#prod-ShiftExpression)\[Yield, Await\] : [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] << [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \>> [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \>>> [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\]


# 13.9.1 The Left Shift Operator ( `<<` )

Note

Performs a bitwise left shift operation on the left operand by the amount specified by the right operand.


# 13.9.1.1 Runtime Semantics: Evaluation

[ShiftExpression](#prod-ShiftExpression) : [ShiftExpression](#prod-ShiftExpression) << [AdditiveExpression](#prod-AdditiveExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([ShiftExpression](#prod-ShiftExpression), `<<`, [AdditiveExpression](#prod-AdditiveExpression)).


# 13.9.2 The Signed Right Shift Operator ( `>>` )

Note

Performs a sign-filling bitwise right shift operation on the left operand by the amount specified by the right operand.


# 13.9.2.1 Runtime Semantics: Evaluation

[ShiftExpression](#prod-ShiftExpression) : [ShiftExpression](#prod-ShiftExpression) \>> [AdditiveExpression](#prod-AdditiveExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([ShiftExpression](#prod-ShiftExpression), `>>`, [AdditiveExpression](#prod-AdditiveExpression)).


# 13.9.3 The Unsigned Right Shift Operator ( `>>>` )

Note

Performs a zero-filling bitwise right shift operation on the left operand by the amount specified by the right operand.


# 13.9.3.1 Runtime Semantics: Evaluation

[ShiftExpression](#prod-ShiftExpression) : [ShiftExpression](#prod-ShiftExpression) \>>> [AdditiveExpression](#prod-AdditiveExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([ShiftExpression](#prod-ShiftExpression), `>>>`, [AdditiveExpression](#prod-AdditiveExpression)).


# 13.10 Relational Operators

Note 1

The result of evaluating a relational operator is always of type Boolean, reflecting whether the relationship named by the operator holds between its two operands.


## Syntax

[RelationalExpression](#prod-RelationalExpression)\[In, Yield, Await\] : [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] < [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] \> [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] <= [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] \>= [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] instanceof [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \[+In\] [RelationalExpression](#prod-RelationalExpression)\[+In, ?Yield, ?Await\] in [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \[+In\] [PrivateIdentifier](#prod-PrivateIdentifier) in [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] Note 2

The <sub>\[In\]</sub> grammar parameter is needed to avoid confusing the `in` operator in a relational expression with the `in` operator in a `for` statement.


# 13.10.1 Runtime Semantics: Evaluation

[RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) < [ShiftExpression](#prod-ShiftExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [ShiftExpression](#prod-ShiftExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Let _r_ be ? [IsLessThan](#sec-islessthan)(_lVal_, _rVal_, true).
6.  If _r_ is undefined, return false; otherwise return _r_.

[RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) \> [ShiftExpression](#prod-ShiftExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [ShiftExpression](#prod-ShiftExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Let _r_ be ? [IsLessThan](#sec-islessthan)(_rVal_, _lVal_, false).
6.  If _r_ is undefined, return false; otherwise return _r_.

[RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) <= [ShiftExpression](#prod-ShiftExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [ShiftExpression](#prod-ShiftExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Let _r_ be ? [IsLessThan](#sec-islessthan)(_rVal_, _lVal_, false).
6.  If _r_ is either true or undefined, return false; otherwise return true.

[RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) \>= [ShiftExpression](#prod-ShiftExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [ShiftExpression](#prod-ShiftExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Let _r_ be ? [IsLessThan](#sec-islessthan)(_lVal_, _rVal_, true).
6.  If _r_ is either true or undefined, return false; otherwise return true.

[RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) instanceof [ShiftExpression](#prod-ShiftExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [ShiftExpression](#prod-ShiftExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Return ? [InstanceofOperator](#sec-instanceofoperator)(_lVal_, _rVal_).

[RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) in [ShiftExpression](#prod-ShiftExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [ShiftExpression](#prod-ShiftExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  If _rVal_ [is not an Object](#sec-object-type), throw a TypeError exception.
6.  Return ? [HasProperty](#sec-hasproperty)(_rVal_, ? [ToPropertyKey](#sec-topropertykey)(_lVal_)).

[RelationalExpression](#prod-RelationalExpression) : [PrivateIdentifier](#prod-PrivateIdentifier) in [ShiftExpression](#prod-ShiftExpression)

1.  Let _privateIdentifier_ be the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier).
2.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [ShiftExpression](#prod-ShiftExpression).
3.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
4.  If _rVal_ [is not an Object](#sec-object-type), throw a TypeError exception.
5.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
6.  [Assert](#assert): _privateEnv_ is not null.
7.  Let _privateName_ be [ResolvePrivateIdentifier](#sec-resolve-private-identifier)(_privateEnv_, _privateIdentifier_).
8.  If [PrivateElementFind](#sec-privateelementfind)(_rVal_, _privateName_) is not empty, return true.
9.  Return false.


# 13.10.2 InstanceofOperator ( _V_, _target_ )

The abstract operation InstanceofOperator takes arguments _V_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _target_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It implements the generic algorithm for determining if _V_ is an instance of _target_ either by consulting _target_'s [%Symbol.hasInstance%](#sec-well-known-symbols) method or, if absent, determining whether the value of _target_'s "prototype" property is present in _V_'s prototype chain. It performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _instOfHandler_ be ? [GetMethod](#sec-getmethod)(_target_, [%Symbol.hasInstance%](#sec-well-known-symbols)).
3.  If _instOfHandler_ is not undefined, then
    1.  Return [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_instOfHandler_, _target_, « _V_ »)).
4.  If [IsCallable](#sec-iscallable)(_target_) is false, throw a TypeError exception.
5.  Return ? [OrdinaryHasInstance](#sec-ordinaryhasinstance)(_target_, _V_).

Note

Steps [4](#step-instanceof-check-function) and [5](#step-instanceof-fallback) provide compatibility with previous editions of ECMAScript that did not use a [%Symbol.hasInstance%](#sec-well-known-symbols) method to define the `instanceof` operator semantics. If an object does not define or inherit [%Symbol.hasInstance%](#sec-well-known-symbols) it uses the default `instanceof` semantics.


# 13.11 Equality Operators

Note

The result of evaluating an equality operator is always of type Boolean, reflecting whether the relationship named by the operator holds between its two operands.


## Syntax

[EqualityExpression](#prod-EqualityExpression)\[In, Yield, Await\] : [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] \== [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] != [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] \=== [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] !== [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\]


# 13.11.1 Runtime Semantics: Evaluation

[EqualityExpression](#prod-EqualityExpression) : [EqualityExpression](#prod-EqualityExpression) \== [RelationalExpression](#prod-RelationalExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [EqualityExpression](#prod-EqualityExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Return ? [IsLooselyEqual](#sec-islooselyequal)(_rVal_, _lVal_).

[EqualityExpression](#prod-EqualityExpression) : [EqualityExpression](#prod-EqualityExpression) != [RelationalExpression](#prod-RelationalExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [EqualityExpression](#prod-EqualityExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Let _r_ be ? [IsLooselyEqual](#sec-islooselyequal)(_rVal_, _lVal_).
6.  If _r_ is true, return false; otherwise return true.

[EqualityExpression](#prod-EqualityExpression) : [EqualityExpression](#prod-EqualityExpression) \=== [RelationalExpression](#prod-RelationalExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [EqualityExpression](#prod-EqualityExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Return [IsStrictlyEqual](#sec-isstrictlyequal)(_rVal_, _lVal_).

[EqualityExpression](#prod-EqualityExpression) : [EqualityExpression](#prod-EqualityExpression) !== [RelationalExpression](#prod-RelationalExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [EqualityExpression](#prod-EqualityExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [RelationalExpression](#prod-RelationalExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Let _r_ be [IsStrictlyEqual](#sec-isstrictlyequal)(_rVal_, _lVal_).
6.  If _r_ is true, return false; otherwise return true.

Note 1

Given the above definition of equality:

-   String comparison can be forced by: `` `${a}` == `${b}` ``.
-   Numeric comparison can be forced by: `+a == +b`.
-   Boolean comparison can be forced by: `!a == !b`.

Note 2

The equality operators maintain the following invariants:

-   `A != B` is equivalent to `!(A == B)`.
-   `A == B` is equivalent to `B == A`, except in the order of evaluation of `A` and `B`.

Note 3

The equality operator is not always transitive. For example, there might be two distinct String objects, each representing the same String value; each String object would be considered equal to the String value by the `==` operator, but the two String objects would not be equal to each other. For example:

-   `new String("a") == "a"` and `"a" == new String("a")` are both true.
-   `new String("a") == new String("a")` is false.

Note 4

Comparison of Strings uses a simple equality test on sequences of code unit values. There is no attempt to use the more complex, semantically oriented definitions of character or string equality and collating order defined in the Unicode specification. Therefore Strings values that are canonically equal according to the Unicode Standard could test as unequal. In effect this algorithm assumes that both Strings are already in normalized form.


# 13.12 Binary Bitwise Operators


## Syntax

[BitwiseANDExpression](#prod-BitwiseANDExpression)\[In, Yield, Await\] : [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] [BitwiseANDExpression](#prod-BitwiseANDExpression)\[?In, ?Yield, ?Await\] & [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] [BitwiseXORExpression](#prod-BitwiseXORExpression)\[In, Yield, Await\] : [BitwiseANDExpression](#prod-BitwiseANDExpression)\[?In, ?Yield, ?Await\] [BitwiseXORExpression](#prod-BitwiseXORExpression)\[?In, ?Yield, ?Await\] ^ [BitwiseANDExpression](#prod-BitwiseANDExpression)\[?In, ?Yield, ?Await\] [BitwiseORExpression](#prod-BitwiseORExpression)\[In, Yield, Await\] : [BitwiseXORExpression](#prod-BitwiseXORExpression)\[?In, ?Yield, ?Await\] [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] | [BitwiseXORExpression](#prod-BitwiseXORExpression)\[?In, ?Yield, ?Await\]


# 13.12.1 Runtime Semantics: Evaluation

[BitwiseANDExpression](#prod-BitwiseANDExpression) : [BitwiseANDExpression](#prod-BitwiseANDExpression) & [EqualityExpression](#prod-EqualityExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([BitwiseANDExpression](#prod-BitwiseANDExpression), `&`, [EqualityExpression](#prod-EqualityExpression)).

[BitwiseXORExpression](#prod-BitwiseXORExpression) : [BitwiseXORExpression](#prod-BitwiseXORExpression) ^ [BitwiseANDExpression](#prod-BitwiseANDExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([BitwiseXORExpression](#prod-BitwiseXORExpression), `^`, [BitwiseANDExpression](#prod-BitwiseANDExpression)).

[BitwiseORExpression](#prod-BitwiseORExpression) : [BitwiseORExpression](#prod-BitwiseORExpression) | [BitwiseXORExpression](#prod-BitwiseXORExpression)

1.  Return ? [EvaluateStringOrNumericBinaryExpression](#sec-evaluatestringornumericbinaryexpression)([BitwiseORExpression](#prod-BitwiseORExpression), `|`, [BitwiseXORExpression](#prod-BitwiseXORExpression)).


# 13.13 Binary Logical Operators


## Syntax

[LogicalANDExpression](#prod-LogicalANDExpression)\[In, Yield, Await\] : [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [LogicalANDExpression](#prod-LogicalANDExpression)\[?In, ?Yield, ?Await\] && [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [LogicalORExpression](#prod-LogicalORExpression)\[In, Yield, Await\] : [LogicalANDExpression](#prod-LogicalANDExpression)\[?In, ?Yield, ?Await\] [LogicalORExpression](#prod-LogicalORExpression)\[?In, ?Yield, ?Await\] || [LogicalANDExpression](#prod-LogicalANDExpression)\[?In, ?Yield, ?Await\] [CoalesceExpression](#prod-CoalesceExpression)\[In, Yield, Await\] : [CoalesceExpressionHead](#prod-CoalesceExpressionHead)\[?In, ?Yield, ?Await\] ?? [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [CoalesceExpressionHead](#prod-CoalesceExpressionHead)\[In, Yield, Await\] : [CoalesceExpression](#prod-CoalesceExpression)\[?In, ?Yield, ?Await\] [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [ShortCircuitExpression](#prod-ShortCircuitExpression)\[In, Yield, Await\] : [LogicalORExpression](#prod-LogicalORExpression)\[?In, ?Yield, ?Await\] [CoalesceExpression](#prod-CoalesceExpression)\[?In, ?Yield, ?Await\] Note

The value produced by a `&&` or `||` operator is not necessarily of type Boolean. The value produced will always be the value of one of the two operand expressions.


# 13.13.1 Runtime Semantics: Evaluation

[LogicalANDExpression](#prod-LogicalANDExpression) : [LogicalANDExpression](#prod-LogicalANDExpression) && [BitwiseORExpression](#prod-BitwiseORExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [LogicalANDExpression](#prod-LogicalANDExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  If [ToBoolean](#sec-toboolean)(_lVal_) is false, return _lVal_.
4.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [BitwiseORExpression](#prod-BitwiseORExpression).
5.  Return ? [GetValue](#sec-getvalue)(_rRef_).

[LogicalORExpression](#prod-LogicalORExpression) : [LogicalORExpression](#prod-LogicalORExpression) || [LogicalANDExpression](#prod-LogicalANDExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [LogicalORExpression](#prod-LogicalORExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  If [ToBoolean](#sec-toboolean)(_lVal_) is true, return _lVal_.
4.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [LogicalANDExpression](#prod-LogicalANDExpression).
5.  Return ? [GetValue](#sec-getvalue)(_rRef_).

[CoalesceExpression](#prod-CoalesceExpression) : [CoalesceExpressionHead](#prod-CoalesceExpressionHead) ?? [BitwiseORExpression](#prod-BitwiseORExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [CoalesceExpressionHead](#prod-CoalesceExpressionHead).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  If _lVal_ is either undefined or null, then
    1.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [BitwiseORExpression](#prod-BitwiseORExpression).
    2.  Return ? [GetValue](#sec-getvalue)(_rRef_).
4.  Else,
    1.  Return _lVal_.


# 13.14 Conditional Operator ( `? :` )


## Syntax

[ConditionalExpression](#prod-ConditionalExpression)\[In, Yield, Await\] : [ShortCircuitExpression](#prod-ShortCircuitExpression)\[?In, ?Yield, ?Await\] [ShortCircuitExpression](#prod-ShortCircuitExpression)\[?In, ?Yield, ?Await\] ? [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] Note

The grammar for a [ConditionalExpression](#prod-ConditionalExpression) in ECMAScript is slightly different from that in C and Java, which each allow the second subexpression to be an [Expression](#prod-Expression) but restrict the third expression to be a [ConditionalExpression](#prod-ConditionalExpression). The motivation for this difference in ECMAScript is to allow an assignment expression to be governed by either arm of a conditional and to eliminate the confusing and fairly useless case of a comma expression as the centre expression.


# 13.14.1 Runtime Semantics: Evaluation

[ConditionalExpression](#prod-ConditionalExpression) : [ShortCircuitExpression](#prod-ShortCircuitExpression) ? [AssignmentExpression](#prod-AssignmentExpression) : [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [ShortCircuitExpression](#prod-ShortCircuitExpression).
2.  Let _lVal_ be [ToBoolean](#sec-toboolean)(? [GetValue](#sec-getvalue)(_lRef_)).
3.  If _lVal_ is true, then
    1.  Let _trueRef_ be ? [Evaluation](#sec-evaluation) of the first [AssignmentExpression](#prod-AssignmentExpression).
    2.  Return ? [GetValue](#sec-getvalue)(_trueRef_).
4.  Else,
    1.  Let _falseRef_ be ? [Evaluation](#sec-evaluation) of the second [AssignmentExpression](#prod-AssignmentExpression).
    2.  Return ? [GetValue](#sec-getvalue)(_falseRef_).


# 13.15 Assignment Operators


## Syntax

[AssignmentExpression](#prod-AssignmentExpression)\[In, Yield, Await\] : [ConditionalExpression](#prod-ConditionalExpression)\[?In, ?Yield, ?Await\] \[+Yield\] [YieldExpression](#prod-YieldExpression)\[?In, ?Await\] [ArrowFunction](#prod-ArrowFunction)\[?In, ?Yield, ?Await\] [AsyncArrowFunction](#prod-AsyncArrowFunction)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] [AssignmentOperator](#prod-AssignmentOperator) [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] &&= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] ||= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] ??= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [AssignmentOperator](#prod-AssignmentOperator) : one of \*= /= %= += \-= <<= \>>= \>>>= &= ^= |= \*\*=


# 13.15.1 Static Semantics: Early Errors

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) \= [AssignmentExpression](#prod-AssignmentExpression)

-   If [LeftHandSideExpression](#prod-LeftHandSideExpression) is either an [ObjectLiteral](#prod-ObjectLiteral) or an [ArrayLiteral](#prod-ArrayLiteral), [LeftHandSideExpression](#prod-LeftHandSideExpression) [must cover](#must-cover) an [AssignmentPattern](#prod-AssignmentPattern).
-   If [LeftHandSideExpression](#prod-LeftHandSideExpression) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), it is a Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is invalid.

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) [AssignmentOperator](#prod-AssignmentOperator) [AssignmentExpression](#prod-AssignmentExpression)

-   It is a Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is invalid.

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) &&= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ||= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ??= [AssignmentExpression](#prod-AssignmentExpression)

-   It is a Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is not simple.


# 13.15.2 Runtime Semantics: Evaluation

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) \= [AssignmentExpression](#prod-AssignmentExpression)

1.  If [LeftHandSideExpression](#prod-LeftHandSideExpression) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), then
    1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
    2.  If the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is web-compat, throw a ReferenceError exception.
    3.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([AssignmentExpression](#prod-AssignmentExpression)) is true and [IsIdentifierRef](#sec-static-semantics-isidentifierref) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is true, then
        1.  Let _lhs_ be the [StringValue](#sec-static-semantics-stringvalue) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
        2.  Let _rVal_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [AssignmentExpression](#prod-AssignmentExpression) with argument _lhs_.
    4.  Else,
        1.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
        2.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
    5.  Perform ? [PutValue](#sec-putvalue)(_lRef_, _rVal_).
    6.  Return _rVal_.
2.  Let _assignmentPattern_ be the [AssignmentPattern](#prod-AssignmentPattern) that is [covered](#sec-syntactic-grammar) by [LeftHandSideExpression](#prod-LeftHandSideExpression).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Perform ? [DestructuringAssignmentEvaluation](#sec-runtime-semantics-destructuringassignmentevaluation) of _assignmentPattern_ with argument _rVal_.
6.  Return _rVal_.

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) [AssignmentOperator](#prod-AssignmentOperator) [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
2.  If the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is web-compat, throw a ReferenceError exception.
3.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
4.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
5.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
6.  Let _assignmentOpText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AssignmentOperator](#prod-AssignmentOperator).
7.  Let _opText_ be the sequence of Unicode code points associated with _assignmentOpText_ in the following table:
    
    <table class="lightweight-table"><thead><tr><th><var>assignmentOpText</var></th><th><var>opText</var></th></tr></thead><tbody><tr><td><code>**=</code></td><td><code>**</code></td></tr><tr><td><code>*=</code></td><td><code>*</code></td></tr><tr><td><code>/=</code></td><td><code>/</code></td></tr><tr><td><code>%=</code></td><td><code>%</code></td></tr><tr><td><code>+=</code></td><td><code>+</code></td></tr><tr><td><code>-=</code></td><td><code>-</code></td></tr><tr><td><code>&lt;&lt;=</code></td><td><code>&lt;&lt;</code></td></tr><tr><td><code>&gt;&gt;=</code></td><td><code>&gt;&gt;</code></td></tr><tr><td><code>&gt;&gt;&gt;=</code></td><td><code>&gt;&gt;&gt;</code></td></tr><tr><td><code>&amp;=</code></td><td><code>&amp;</code></td></tr><tr><td><code>^=</code></td><td><code>^</code></td></tr><tr><td><code>|=</code></td><td><code>|</code></td></tr></tbody></table>
    
8.  Let _r_ be ? [ApplyStringOrNumericBinaryOperator](#sec-applystringornumericbinaryoperator)(_lVal_, _opText_, _rVal_).
9.  Perform ? [PutValue](#sec-putvalue)(_lRef_, _r_).
10.  Return _r_.

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) &&= [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  If [ToBoolean](#sec-toboolean)(_lVal_) is false, return _lVal_.
4.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([AssignmentExpression](#prod-AssignmentExpression)) is true and [IsIdentifierRef](#sec-static-semantics-isidentifierref) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is true, then
    1.  Let _lhs_ be the [StringValue](#sec-static-semantics-stringvalue) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
    2.  Let _rVal_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [AssignmentExpression](#prod-AssignmentExpression) with argument _lhs_.
5.  Else,
    1.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
    2.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
6.  Perform ? [PutValue](#sec-putvalue)(_lRef_, _rVal_).
7.  Return _rVal_.

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) ||= [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  If [ToBoolean](#sec-toboolean)(_lVal_) is true, return _lVal_.
4.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([AssignmentExpression](#prod-AssignmentExpression)) is true and [IsIdentifierRef](#sec-static-semantics-isidentifierref) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is true, then
    1.  Let _lhs_ be the [StringValue](#sec-static-semantics-stringvalue) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
    2.  Let _rVal_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [AssignmentExpression](#prod-AssignmentExpression) with argument _lhs_.
5.  Else,
    1.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
    2.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
6.  Perform ? [PutValue](#sec-putvalue)(_lRef_, _rVal_).
7.  Return _rVal_.

[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) ??= [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  If _lVal_ is neither undefined nor null, return _lVal_.
4.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([AssignmentExpression](#prod-AssignmentExpression)) is true and [IsIdentifierRef](#sec-static-semantics-isidentifierref) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is true, then
    1.  Let _lhs_ be the [StringValue](#sec-static-semantics-stringvalue) of [LeftHandSideExpression](#prod-LeftHandSideExpression).
    2.  Let _rVal_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [AssignmentExpression](#prod-AssignmentExpression) with argument _lhs_.
5.  Else,
    1.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
    2.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
6.  Perform ? [PutValue](#sec-putvalue)(_lRef_, _rVal_).
7.  Return _rVal_.

Note

When this expression occurs within [strict mode code](#sec-strict-mode-code), it is a runtime error if _lRef_ in step [1.e](#step-assignmentexpression-evaluation-simple-putvalue), [3](#step-assignmentexpression-evaluation-compound-getvalue), [2](#step-assignmentexpression-evaluation-lgcl-and-getvalue), [2](#step-assignmentexpression-evaluation-lgcl-or-getvalue), [2](#step-assignmentexpression-evaluation-lgcl-nullish-getvalue) is an unresolvable reference. If it is, a ReferenceError exception is thrown. Additionally, it is a runtime error if the _lRef_ in step [9](#step-assignmentexpression-evaluation-compound-putvalue), [6](#step-assignmentexpression-evaluation-lgcl-and-putvalue), [6](#step-assignmentexpression-evaluation-lgcl-or-putvalue), [6](#step-assignmentexpression-evaluation-lgcl-nullish-putvalue) is a reference to a [data property](#sec-object-type) with the attribute value { _\[\[Writable\]\]_: false }, to an [accessor property](#sec-object-type) with the attribute value { _\[\[Set\]\]_: undefined }, or to a non-existent property of an object for which the [IsExtensible](#sec-isextensible-o) predicate returns the value false. In these cases a TypeError exception is thrown.


# 13.15.3 ApplyStringOrNumericBinaryOperator ( _lVal_, _opText_, _rVal_ )

The abstract operation ApplyStringOrNumericBinaryOperator takes arguments _lVal_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _opText_ (`**`, `*`, `/`, `%`, `+`, `-`, `<<`, `>>`, `>>>`, `&`, `^`, or `|`), and _rVal_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a String, a BigInt, or a Number, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _opText_ is `+`, then
    1.  Let _lPrim_ be ? [ToPrimitive](#sec-toprimitive)(_lVal_).
    2.  Let _rPrim_ be ? [ToPrimitive](#sec-toprimitive)(_rVal_).
    3.  If _lPrim_ [is a String](#sec-ecmascript-language-types-string-type) or _rPrim_ [is a String](#sec-ecmascript-language-types-string-type), then
        1.  Let _lStr_ be ? [ToString](#sec-tostring)(_lPrim_).
        2.  Let _rStr_ be ? [ToString](#sec-tostring)(_rPrim_).
        3.  Return the [string-concatenation](#string-concatenation) of _lStr_ and _rStr_.
    4.  Set _lVal_ to _lPrim_.
    5.  Set _rVal_ to _rPrim_.
2.  NOTE: At this point, it must be a numeric operation.
3.  Let _lNum_ be ? [ToNumeric](#sec-tonumeric)(_lVal_).
4.  Let _rNum_ be ? [ToNumeric](#sec-tonumeric)(_rVal_).
5.  If [SameType](#sec-sametype)(_lNum_, _rNum_) is false, throw a TypeError exception.
6.  If _lNum_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), then
    1.  If _opText_ is `**`, return ? [BigInt::exponentiate](#sec-numeric-types-bigint-exponentiate)(_lNum_, _rNum_).
    2.  If _opText_ is `/`, return ? [BigInt::divide](#sec-numeric-types-bigint-divide)(_lNum_, _rNum_).
    3.  If _opText_ is `%`, return ? [BigInt::remainder](#sec-numeric-types-bigint-remainder)(_lNum_, _rNum_).
    4.  If _opText_ is `>>>`, return ? [BigInt::unsignedRightShift](#sec-numeric-types-bigint-unsignedRightShift)(_lNum_, _rNum_).
    5.  Let _operation_ be the abstract operation associated with _opText_ in the following table:
        
        <table class="lightweight-table"><thead><tr><th><var>opText</var></th><th><var>operation</var></th></tr></thead><tbody><tr><td><code>*</code></td><td><emu-xref aoid="BigInt::multiply" id="_ref_6638"><a href="#sec-numeric-types-bigint-multiply">BigInt::multiply</a></emu-xref></td></tr><tr><td><code>+</code></td><td><emu-xref aoid="BigInt::add" id="_ref_6639"><a href="#sec-numeric-types-bigint-add">BigInt::add</a></emu-xref></td></tr><tr><td><code>-</code></td><td><emu-xref aoid="BigInt::subtract" id="_ref_6640"><a href="#sec-numeric-types-bigint-subtract">BigInt::subtract</a></emu-xref></td></tr><tr><td><code>&lt;&lt;</code></td><td><emu-xref aoid="BigInt::leftShift" id="_ref_6641"><a href="#sec-numeric-types-bigint-leftShift">BigInt::leftShift</a></emu-xref></td></tr><tr><td><code>&gt;&gt;</code></td><td><emu-xref aoid="BigInt::signedRightShift" id="_ref_6642"><a href="#sec-numeric-types-bigint-signedRightShift">BigInt::signedRightShift</a></emu-xref></td></tr><tr><td><code>&amp;</code></td><td><emu-xref aoid="BigInt::bitwiseAND" id="_ref_6643"><a href="#sec-numeric-types-bigint-bitwiseAND">BigInt::bitwiseAND</a></emu-xref></td></tr><tr><td><code>^</code></td><td><emu-xref aoid="BigInt::bitwiseXOR" id="_ref_6644"><a href="#sec-numeric-types-bigint-bitwiseXOR">BigInt::bitwiseXOR</a></emu-xref></td></tr><tr><td><code>|</code></td><td><emu-xref aoid="BigInt::bitwiseOR" id="_ref_6645"><a href="#sec-numeric-types-bigint-bitwiseOR">BigInt::bitwiseOR</a></emu-xref></td></tr></tbody></table>
        
7.  Else,
    1.  [Assert](#assert): _lNum_ [is a Number](#sec-ecmascript-language-types-number-type).
    2.  Let _operation_ be the abstract operation associated with _opText_ in the following table:
        
        <table class="lightweight-table"><thead><tr><th><var>opText</var></th><th><var>operation</var></th></tr></thead><tbody><tr><td><code>**</code></td><td><emu-xref aoid="Number::exponentiate" id="_ref_6648"><a href="#sec-numeric-types-number-exponentiate">Number::exponentiate</a></emu-xref></td></tr><tr><td><code>*</code></td><td><emu-xref aoid="Number::multiply" id="_ref_6649"><a href="#sec-numeric-types-number-multiply">Number::multiply</a></emu-xref></td></tr><tr><td><code>/</code></td><td><emu-xref aoid="Number::divide" id="_ref_6650"><a href="#sec-numeric-types-number-divide">Number::divide</a></emu-xref></td></tr><tr><td><code>%</code></td><td><emu-xref aoid="Number::remainder" id="_ref_6651"><a href="#sec-numeric-types-number-remainder">Number::remainder</a></emu-xref></td></tr><tr><td><code>+</code></td><td><emu-xref aoid="Number::add" id="_ref_6652"><a href="#sec-numeric-types-number-add">Number::add</a></emu-xref></td></tr><tr><td><code>-</code></td><td><emu-xref aoid="Number::subtract" id="_ref_6653"><a href="#sec-numeric-types-number-subtract">Number::subtract</a></emu-xref></td></tr><tr><td><code>&lt;&lt;</code></td><td><emu-xref aoid="Number::leftShift" id="_ref_6654"><a href="#sec-numeric-types-number-leftShift">Number::leftShift</a></emu-xref></td></tr><tr><td><code>&gt;&gt;</code></td><td><emu-xref aoid="Number::signedRightShift" id="_ref_6655"><a href="#sec-numeric-types-number-signedRightShift">Number::signedRightShift</a></emu-xref></td></tr><tr><td><code>&gt;&gt;&gt;</code></td><td><emu-xref aoid="Number::unsignedRightShift" id="_ref_6656"><a href="#sec-numeric-types-number-unsignedRightShift">Number::unsignedRightShift</a></emu-xref></td></tr><tr><td><code>&amp;</code></td><td><emu-xref aoid="Number::bitwiseAND" id="_ref_6657"><a href="#sec-numeric-types-number-bitwiseAND">Number::bitwiseAND</a></emu-xref></td></tr><tr><td><code>^</code></td><td><emu-xref aoid="Number::bitwiseXOR" id="_ref_6658"><a href="#sec-numeric-types-number-bitwiseXOR">Number::bitwiseXOR</a></emu-xref></td></tr><tr><td><code>|</code></td><td><emu-xref aoid="Number::bitwiseOR" id="_ref_6659"><a href="#sec-numeric-types-number-bitwiseOR">Number::bitwiseOR</a></emu-xref></td></tr></tbody></table>
        
8.  Return _operation_(_lNum_, _rNum_).

Note 1

No hint is provided in the calls to [ToPrimitive](#sec-toprimitive) in steps [1.a](#step-binary-op-toprimitive-lval) and [1.b](#step-binary-op-toprimitive-rval). All standard objects except Dates handle the absence of a hint as if number were given; Dates handle the absence of a hint as if string were given. [Exotic objects](#exotic-object) may handle the absence of a hint in some other manner.

Note 2

Step [1.c](#step-binary-op-string-check) differs from step [3](#step-arc-string-check) of the [IsLessThan](#sec-islessthan) algorithm, by using the logical-or operation instead of the logical-and operation.


# 13.15.4 EvaluateStringOrNumericBinaryExpression ( _leftOperand_, _opText_, _rightOperand_ )

The abstract operation EvaluateStringOrNumericBinaryExpression takes arguments _leftOperand_ (a [Parse Node](#sec-syntactic-grammar)), _opText_ (a sequence of Unicode code points), and _rightOperand_ (a [Parse Node](#sec-syntactic-grammar)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a String, a BigInt, or a Number, or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of _leftOperand_.
2.  Let _lVal_ be ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of _rightOperand_.
4.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rRef_).
5.  Return ? [ApplyStringOrNumericBinaryOperator](#sec-applystringornumericbinaryoperator)(_lVal_, _opText_, _rVal_).


# 13.15.5 Destructuring Assignment


## Supplemental Syntax

In certain circumstances when processing an instance of the production  
[AssignmentExpression](#prod-AssignmentExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) \= [AssignmentExpression](#prod-AssignmentExpression)  
the interpretation of [LeftHandSideExpression](#prod-LeftHandSideExpression) is refined using the following grammar:

[AssignmentPattern](#prod-AssignmentPattern)\[Yield, Await\] : [ObjectAssignmentPattern](#prod-ObjectAssignmentPattern)\[?Yield, ?Await\] [ArrayAssignmentPattern](#prod-ArrayAssignmentPattern)\[?Yield, ?Await\] [ObjectAssignmentPattern](#prod-ObjectAssignmentPattern)\[Yield, Await\] : { } { [AssignmentRestProperty](#prod-AssignmentRestProperty)\[?Yield, ?Await\] } { [AssignmentPropertyList](#prod-AssignmentPropertyList)\[?Yield, ?Await\] } { [AssignmentPropertyList](#prod-AssignmentPropertyList)\[?Yield, ?Await\] , [AssignmentRestProperty](#prod-AssignmentRestProperty)\[?Yield, ?Await\]opt } [ArrayAssignmentPattern](#prod-ArrayAssignmentPattern)\[Yield, Await\] : \[[Elision](#prod-Elision)opt [AssignmentRestElement](#prod-AssignmentRestElement)\[?Yield, ?Await\]opt \] \[[AssignmentElementList](#prod-AssignmentElementList)\[?Yield, ?Await\] \] \[[AssignmentElementList](#prod-AssignmentElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [AssignmentRestElement](#prod-AssignmentRestElement)\[?Yield, ?Await\]opt \] [AssignmentRestProperty](#prod-AssignmentRestProperty)\[Yield, Await\] : ... [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[?Yield, ?Await\] [AssignmentPropertyList](#prod-AssignmentPropertyList)\[Yield, Await\] : [AssignmentProperty](#prod-AssignmentProperty)\[?Yield, ?Await\] [AssignmentPropertyList](#prod-AssignmentPropertyList)\[?Yield, ?Await\] , [AssignmentProperty](#prod-AssignmentProperty)\[?Yield, ?Await\] [AssignmentElementList](#prod-AssignmentElementList)\[Yield, Await\] : [AssignmentElisionElement](#prod-AssignmentElisionElement)\[?Yield, ?Await\] [AssignmentElementList](#prod-AssignmentElementList)\[?Yield, ?Await\] , [AssignmentElisionElement](#prod-AssignmentElisionElement)\[?Yield, ?Await\] [AssignmentElisionElement](#prod-AssignmentElisionElement)\[Yield, Await\] : [Elision](#prod-Elision)opt [AssignmentElement](#prod-AssignmentElement)\[?Yield, ?Await\] [AssignmentProperty](#prod-AssignmentProperty)\[Yield, Await\] : [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] : [AssignmentElement](#prod-AssignmentElement)\[?Yield, ?Await\] [AssignmentElement](#prod-AssignmentElement)\[Yield, Await\] : [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [AssignmentRestElement](#prod-AssignmentRestElement)\[Yield, Await\] : ... [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[?Yield, ?Await\] [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[Yield, Await\] : [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\]


# 13.15.5.1 Static Semantics: Early Errors

[AssignmentProperty](#prod-AssignmentProperty) : [IdentifierReference](#prod-IdentifierReference) [Initializer](#prod-Initializer)opt

-   It is a Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [IdentifierReference](#prod-IdentifierReference) is not simple.

[AssignmentRestProperty](#prod-AssignmentRestProperty) : ... [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)

-   It is a Syntax Error if [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is either an [ArrayLiteral](#prod-ArrayLiteral) or an [ObjectLiteral](#prod-ObjectLiteral).

[DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) : [LeftHandSideExpression](#prod-LeftHandSideExpression)

-   If [LeftHandSideExpression](#prod-LeftHandSideExpression) is either an [ObjectLiteral](#prod-ObjectLiteral) or an [ArrayLiteral](#prod-ArrayLiteral), [LeftHandSideExpression](#prod-LeftHandSideExpression) [must cover](#must-cover) an [AssignmentPattern](#prod-AssignmentPattern).
-   If [LeftHandSideExpression](#prod-LeftHandSideExpression) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), it is a Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is not simple.


# 13.15.5.2 Runtime Semantics: DestructuringAssignmentEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) DestructuringAssignmentEvaluation takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[ObjectAssignmentPattern](#prod-ObjectAssignmentPattern) : { }

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_value_).
2.  Return unused.

[ObjectAssignmentPattern](#prod-ObjectAssignmentPattern) : { [AssignmentPropertyList](#prod-AssignmentPropertyList) } { [AssignmentPropertyList](#prod-AssignmentPropertyList) , }

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_value_).
2.  Perform ? [PropertyDestructuringAssignmentEvaluation](#sec-runtime-semantics-propertydestructuringassignmentevaluation) of [AssignmentPropertyList](#prod-AssignmentPropertyList) with argument _value_.
3.  Return unused.

[ObjectAssignmentPattern](#prod-ObjectAssignmentPattern) : { [AssignmentRestProperty](#prod-AssignmentRestProperty) }

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_value_).
2.  Let _excludedNames_ be a new empty [List](#sec-list-and-record-specification-type).
3.  Return ? [RestDestructuringAssignmentEvaluation](#sec-runtime-semantics-restdestructuringassignmentevaluation) of [AssignmentRestProperty](#prod-AssignmentRestProperty) with arguments _value_ and _excludedNames_.

[ObjectAssignmentPattern](#prod-ObjectAssignmentPattern) : { [AssignmentPropertyList](#prod-AssignmentPropertyList) , [AssignmentRestProperty](#prod-AssignmentRestProperty) }

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_value_).
2.  Let _excludedNames_ be ? [PropertyDestructuringAssignmentEvaluation](#sec-runtime-semantics-propertydestructuringassignmentevaluation) of [AssignmentPropertyList](#prod-AssignmentPropertyList) with argument _value_.
3.  Return ? [RestDestructuringAssignmentEvaluation](#sec-runtime-semantics-restdestructuringassignmentevaluation) of [AssignmentRestProperty](#prod-AssignmentRestProperty) with arguments _value_ and _excludedNames_.

[ArrayAssignmentPattern](#prod-ArrayAssignmentPattern) : \[\]

1.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_value_, sync).
2.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, [NormalCompletion](#sec-normalcompletion)(unused)).

[ArrayAssignmentPattern](#prod-ArrayAssignmentPattern) : \[[Elision](#prod-Elision) \]

1.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_value_, sync).
2.  Let _result_ be [Completion](#sec-completion-ao)([IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_).
3.  If _iteratorRecord_._\[\[Done\]\]_ is false, return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_).
4.  Return _result_.

[ArrayAssignmentPattern](#prod-ArrayAssignmentPattern) : \[[Elision](#prod-Elision)opt [AssignmentRestElement](#prod-AssignmentRestElement) \]

1.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_value_, sync).
2.  If [Elision](#prod-Elision) is present, then
    1.  Let _status_ be [Completion](#sec-completion-ao)([IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_).
    2.  If _status_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  [Assert](#assert): _iteratorRecord_._\[\[Done\]\]_ is true.
        2.  Return ? _status_.
3.  Let _result_ be [Completion](#sec-completion-ao)([IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentRestElement](#prod-AssignmentRestElement) with argument _iteratorRecord_).
4.  If _iteratorRecord_._\[\[Done\]\]_ is false, return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_).
5.  Return _result_.

[ArrayAssignmentPattern](#prod-ArrayAssignmentPattern) : \[[AssignmentElementList](#prod-AssignmentElementList) \]

1.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_value_, sync).
2.  Let _result_ be [Completion](#sec-completion-ao)([IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentElementList](#prod-AssignmentElementList) with argument _iteratorRecord_).
3.  If _iteratorRecord_._\[\[Done\]\]_ is false, return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_).
4.  Return _result_.

[ArrayAssignmentPattern](#prod-ArrayAssignmentPattern) : \[[AssignmentElementList](#prod-AssignmentElementList) , [Elision](#prod-Elision)opt [AssignmentRestElement](#prod-AssignmentRestElement)opt \]

1.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_value_, sync).
2.  Let _status_ be [Completion](#sec-completion-ao)([IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentElementList](#prod-AssignmentElementList) with argument _iteratorRecord_).
3.  If _status_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  If _iteratorRecord_._\[\[Done\]\]_ is false, return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _status_).
    2.  Return ? _status_.
4.  If [Elision](#prod-Elision) is present, then
    1.  Set _status_ to [Completion](#sec-completion-ao)([IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_).
    2.  If _status_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  [Assert](#assert): _iteratorRecord_._\[\[Done\]\]_ is true.
        2.  Return ? _status_.
5.  If [AssignmentRestElement](#prod-AssignmentRestElement) is present, then
    1.  Set _status_ to [Completion](#sec-completion-ao)([IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentRestElement](#prod-AssignmentRestElement) with argument _iteratorRecord_).
6.  If _iteratorRecord_._\[\[Done\]\]_ is false, return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _status_).
7.  Return ? _status_.


# 13.15.5.3 Runtime Semantics: PropertyDestructuringAssignmentEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) PropertyDestructuringAssignmentEvaluation takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key) or an [abrupt completion](#sec-completion-record-specification-type). It collects a list of all destructured [property keys](#property-key). It is defined piecewise over the following productions:

[AssignmentPropertyList](#prod-AssignmentPropertyList) : [AssignmentPropertyList](#prod-AssignmentPropertyList) , [AssignmentProperty](#prod-AssignmentProperty)

1.  Let _propertyNames_ be ? [PropertyDestructuringAssignmentEvaluation](#sec-runtime-semantics-propertydestructuringassignmentevaluation) of [AssignmentPropertyList](#prod-AssignmentPropertyList) with argument _value_.
2.  Let _nextNames_ be ? [PropertyDestructuringAssignmentEvaluation](#sec-runtime-semantics-propertydestructuringassignmentevaluation) of [AssignmentProperty](#prod-AssignmentProperty) with argument _value_.
3.  Return the [list-concatenation](#list-concatenation) of _propertyNames_ and _nextNames_.

[AssignmentProperty](#prod-AssignmentProperty) : [IdentifierReference](#prod-IdentifierReference) [Initializer](#prod-Initializer)opt

1.  Let _P_ be the [StringValue](#sec-static-semantics-stringvalue) of [IdentifierReference](#prod-IdentifierReference).
2.  Let _lRef_ be ? [ResolveBinding](#sec-resolvebinding)(_P_).
3.  Let _v_ be ? [GetV](#sec-getv)(_value_, _P_).
4.  If [Initializer](#prod-Initializer) is present and _v_ is undefined, then
    1.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true, then
        1.  Set _v_ to ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _P_.
    2.  Else,
        1.  Let _defaultValue_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
        2.  Set _v_ to ? [GetValue](#sec-getvalue)(_defaultValue_).
5.  Perform ? [PutValue](#sec-putvalue)(_lRef_, _v_).
6.  Return « _P_ ».

[AssignmentProperty](#prod-AssignmentProperty) : [PropertyName](#prod-PropertyName) : [AssignmentElement](#prod-AssignmentElement)

1.  Let _name_ be ? [Evaluation](#sec-evaluation) of [PropertyName](#prod-PropertyName).
2.  Perform ? [KeyedDestructuringAssignmentEvaluation](#sec-runtime-semantics-keyeddestructuringassignmentevaluation) of [AssignmentElement](#prod-AssignmentElement) with arguments _value_ and _name_.
3.  Return « _name_ ».


# 13.15.5.4 Runtime Semantics: RestDestructuringAssignmentEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) RestDestructuringAssignmentEvaluation takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _excludedNames_ (a [List](#sec-list-and-record-specification-type) of [property keys](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[AssignmentRestProperty](#prod-AssignmentRestProperty) : ... [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
2.  Let _restObj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
3.  Perform ? [CopyDataProperties](#sec-copydataproperties)(_restObj_, _value_, _excludedNames_).
4.  Return ? [PutValue](#sec-putvalue)(_lRef_, _restObj_).


# 13.15.5.5 Runtime Semantics: IteratorDestructuringAssignmentEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IteratorDestructuringAssignmentEvaluation takes argument _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[AssignmentElementList](#prod-AssignmentElementList) : [AssignmentElisionElement](#prod-AssignmentElisionElement)

1.  Return ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentElisionElement](#prod-AssignmentElisionElement) with argument _iteratorRecord_.

[AssignmentElementList](#prod-AssignmentElementList) : [AssignmentElementList](#prod-AssignmentElementList) , [AssignmentElisionElement](#prod-AssignmentElisionElement)

1.  Perform ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentElementList](#prod-AssignmentElementList) with argument _iteratorRecord_.
2.  Return ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentElisionElement](#prod-AssignmentElisionElement) with argument _iteratorRecord_.

[AssignmentElisionElement](#prod-AssignmentElisionElement) : [AssignmentElement](#prod-AssignmentElement)

1.  Return ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentElement](#prod-AssignmentElement) with argument _iteratorRecord_.

[AssignmentElisionElement](#prod-AssignmentElisionElement) : [Elision](#prod-Elision) [AssignmentElement](#prod-AssignmentElement)

1.  Perform ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_.
2.  Return ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [AssignmentElement](#prod-AssignmentElement) with argument _iteratorRecord_.

[Elision](#prod-Elision) : ,

1.  If _iteratorRecord_._\[\[Done\]\]_ is false, then
    1.  Perform ? [IteratorStep](#sec-iteratorstep)(_iteratorRecord_).
2.  Return unused.

[Elision](#prod-Elision) : [Elision](#prod-Elision) ,

1.  Perform ? [IteratorDestructuringAssignmentEvaluation](#sec-runtime-semantics-iteratordestructuringassignmentevaluation) of [Elision](#prod-Elision) with argument _iteratorRecord_.
2.  If _iteratorRecord_._\[\[Done\]\]_ is false, then
    1.  Perform ? [IteratorStep](#sec-iteratorstep)(_iteratorRecord_).
3.  Return unused.

[AssignmentElement](#prod-AssignmentElement) : [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) [Initializer](#prod-Initializer)opt

1.  If [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), then
    1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
2.  Let _value_ be undefined.
3.  If _iteratorRecord_._\[\[Done\]\]_ is false, then
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is not done, then
        1.  Set _value_ to _next_.
4.  If [Initializer](#prod-Initializer) is present and _value_ is undefined, then
    1.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true and [IsIdentifierRef](#sec-static-semantics-isidentifierref) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is true, then
        1.  Let _target_ be the [StringValue](#sec-static-semantics-stringvalue) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
        2.  Let _v_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _target_.
    2.  Else,
        1.  Let _defaultValue_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
        2.  Let _v_ be ? [GetValue](#sec-getvalue)(_defaultValue_).
5.  Else,
    1.  Let _v_ be _value_.
6.  If [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is either an [ObjectLiteral](#prod-ObjectLiteral) or an [ArrayLiteral](#prod-ArrayLiteral), then
    1.  Let _nestedAssignmentPattern_ be the [AssignmentPattern](#prod-AssignmentPattern) that is [covered](#sec-syntactic-grammar) by [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
    2.  Return ? [DestructuringAssignmentEvaluation](#sec-runtime-semantics-destructuringassignmentevaluation) of _nestedAssignmentPattern_ with argument _v_.
7.  Return ? [PutValue](#sec-putvalue)(_lRef_, _v_).

Note

Left to right evaluation order is maintained by evaluating a [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) that is not a destructuring pattern prior to accessing the [iterator](#sec-iterator-interface) or evaluating the [Initializer](#prod-Initializer).

[AssignmentRestElement](#prod-AssignmentRestElement) : ... [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)

1.  If [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), then
    1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
2.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(0).
3.  Let _n_ be 0.
4.  Repeat, while _iteratorRecord_._\[\[Done\]\]_ is false,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is not done, then
        1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _next_).
        2.  Set _n_ to _n_ + 1.
5.  If [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), then
    1.  Return ? [PutValue](#sec-putvalue)(_lRef_, _A_).
6.  Let _nestedAssignmentPattern_ be the [AssignmentPattern](#prod-AssignmentPattern) that is [covered](#sec-syntactic-grammar) by [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
7.  Return ? [DestructuringAssignmentEvaluation](#sec-runtime-semantics-destructuringassignmentevaluation) of _nestedAssignmentPattern_ with argument _A_.


# 13.15.5.6 Runtime Semantics: KeyedDestructuringAssignmentEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) KeyedDestructuringAssignmentEvaluation takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _propertyName_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[AssignmentElement](#prod-AssignmentElement) : [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) [Initializer](#prod-Initializer)opt

1.  If [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), then
    1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
2.  Let _v_ be ? [GetV](#sec-getv)(_value_, _propertyName_).
3.  If [Initializer](#prod-Initializer) is present and _v_ is undefined, then
    1.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true and [IsIdentifierRef](#sec-static-semantics-isidentifierref) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is true, then
        1.  Let _target_ be the [StringValue](#sec-static-semantics-stringvalue) of [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
        2.  Let _rhsValue_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _target_.
    2.  Else,
        1.  Let _defaultValue_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
        2.  Let _rhsValue_ be ? [GetValue](#sec-getvalue)(_defaultValue_).
4.  Else,
    1.  Let _rhsValue_ be _v_.
5.  If [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget) is either an [ObjectLiteral](#prod-ObjectLiteral) or an [ArrayLiteral](#prod-ArrayLiteral), then
    1.  Let _assignmentPattern_ be the [AssignmentPattern](#prod-AssignmentPattern) that is [covered](#sec-syntactic-grammar) by [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget).
    2.  Return ? [DestructuringAssignmentEvaluation](#sec-runtime-semantics-destructuringassignmentevaluation) of _assignmentPattern_ with argument _rhsValue_.
6.  Return ? [PutValue](#sec-putvalue)(_lRef_, _rhsValue_).


# 13.16 Comma Operator ( `,` )


## Syntax

[Expression](#prod-Expression)\[In, Yield, Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [Expression](#prod-Expression)\[?In, ?Yield, ?Await\] , [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\]


# 13.16.1 Runtime Semantics: Evaluation

[Expression](#prod-Expression) : [Expression](#prod-Expression) , [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _lRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Perform ? [GetValue](#sec-getvalue)(_lRef_).
3.  Let _rRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
4.  Return ? [GetValue](#sec-getvalue)(_rRef_).

Note

[GetValue](#sec-getvalue) must be called even though its value is not used because it may have observable side-effects.


# 14 ECMAScript Language: Statements and Declarations


## Syntax

[Statement](#prod-Statement)\[Yield, Await, Return\] : [BlockStatement](#prod-BlockStatement)\[?Yield, ?Await, ?Return\] [VariableStatement](#prod-VariableStatement)\[?Yield, ?Await\] [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement)\[?Yield, ?Await\] [IfStatement](#prod-IfStatement)\[?Yield, ?Await, ?Return\] [BreakableStatement](#prod-BreakableStatement)\[?Yield, ?Await, ?Return\] [ContinueStatement](#prod-ContinueStatement)\[?Yield, ?Await\] [BreakStatement](#prod-BreakStatement)\[?Yield, ?Await\] \[+Return\] [ReturnStatement](#prod-ReturnStatement)\[?Yield, ?Await\] [WithStatement](#prod-WithStatement)\[?Yield, ?Await, ?Return\] [LabelledStatement](#prod-LabelledStatement)\[?Yield, ?Await, ?Return\] [ThrowStatement](#prod-ThrowStatement)\[?Yield, ?Await\] [TryStatement](#prod-TryStatement)\[?Yield, ?Await, ?Return\] [DebuggerStatement](#prod-DebuggerStatement) [Declaration](#prod-Declaration)\[Yield, Await\] : [HoistableDeclaration](#prod-HoistableDeclaration)\[?Yield, ?Await, ~Default\] [ClassDeclaration](#prod-ClassDeclaration)\[?Yield, ?Await, ~Default\] [LexicalDeclaration](#prod-LexicalDeclaration)\[+In, ?Yield, ?Await\] [HoistableDeclaration](#prod-HoistableDeclaration)\[Yield, Await, Default\] : [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ?Default\] [GeneratorDeclaration](#prod-GeneratorDeclaration)\[?Yield, ?Await, ?Default\] [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration)\[?Yield, ?Await, ?Default\] [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration)\[?Yield, ?Await, ?Default\] [BreakableStatement](#prod-BreakableStatement)\[Yield, Await, Return\] : [IterationStatement](#prod-IterationStatement)\[?Yield, ?Await, ?Return\] [SwitchStatement](#prod-SwitchStatement)\[?Yield, ?Await, ?Return\]


# 14.1 Statement Semantics


# 14.1.1 Runtime Semantics: Evaluation

[HoistableDeclaration](#prod-HoistableDeclaration) : [GeneratorDeclaration](#prod-GeneratorDeclaration) [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration)

1.  Return empty.

[HoistableDeclaration](#prod-HoistableDeclaration) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return ? [Evaluation](#sec-evaluation) of [FunctionDeclaration](#prod-FunctionDeclaration).

[BreakableStatement](#prod-BreakableStatement) : [IterationStatement](#prod-IterationStatement) [SwitchStatement](#prod-SwitchStatement)

1.  Let _newLabelSet_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Return ? [LabelledEvaluation](#sec-runtime-semantics-labelledevaluation) of this [BreakableStatement](#prod-BreakableStatement) with argument _newLabelSet_.


# 14.2 Block


## Syntax

[BlockStatement](#prod-BlockStatement)\[Yield, Await, Return\] : [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Block](#prod-Block)\[Yield, Await, Return\] : { [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\]opt } [StatementList](#prod-StatementList)\[Yield, Await, Return\] : [StatementListItem](#prod-StatementListItem)\[?Yield, ?Await, ?Return\] [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\] [StatementListItem](#prod-StatementListItem)\[?Yield, ?Await, ?Return\] [StatementListItem](#prod-StatementListItem)\[Yield, Await, Return\] : [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [Declaration](#prod-Declaration)\[?Yield, ?Await\]


# 14.2.1 Static Semantics: Early Errors

[Block](#prod-Block) : { [StatementList](#prod-StatementList) }

-   It is a Syntax Error if the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [StatementList](#prod-StatementList) contains any duplicate entries, unless the [host](#host) is a web browser or otherwise supports [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), and both of the following conditions are true:
    
    -   [IsStrict](#sec-isstrict)(this production) is false.
    -   The duplicate entries are only bound by FunctionDeclarations.
-   It is a Syntax Error if any element of the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [StatementList](#prod-StatementList) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [StatementList](#prod-StatementList).


# 14.2.2 Runtime Semantics: Evaluation

[Block](#prod-Block) : { }

1.  Return empty.

[Block](#prod-Block) : { [StatementList](#prod-StatementList) }

1.  Let _oldEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
2.  Let _blockEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_oldEnv_).
3.  Perform [BlockDeclarationInstantiation](#sec-blockdeclarationinstantiation)([StatementList](#prod-StatementList), _blockEnv_).
4.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _blockEnv_.
5.  Let _blockValue_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [StatementList](#prod-StatementList)).
6.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
7.  Return ? _blockValue_.

Note 1

No matter how control leaves the [Block](#prod-Block) the LexicalEnvironment is always restored to its former state.

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _sl_ be ? [Evaluation](#sec-evaluation) of [StatementList](#prod-StatementList).
2.  Let _s_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [StatementListItem](#prod-StatementListItem)).
3.  Return ? [UpdateEmpty](#sec-updateempty)(_s_, _sl_).

Note 2

The value of a [StatementList](#prod-StatementList) is the value of the last value-producing item in the [StatementList](#prod-StatementList). For example, the following calls to the `eval` function all return the value 1:

```
eval("1;;;;;")
eval("1;{}")
eval("1;var a;")
```


# 14.2.3 BlockDeclarationInstantiation ( _code_, _env_ )

The abstract operation BlockDeclarationInstantiation takes arguments _code_ (a [Parse Node](#sec-syntactic-grammar)) and _env_ (a [Declarative Environment Record](#sec-declarative-environment-records)) and returns unused. _code_ is the [Parse Node](#sec-syntactic-grammar) corresponding to the body of the block. _env_ is the [Environment Record](#sec-environment-records) in which bindings are to be created.

Note

When a [Block](#prod-Block) or [CaseBlock](#prod-CaseBlock) is evaluated a new [Declarative Environment Record](#sec-declarative-environment-records) is created and bindings for each block scoped variable, constant, function, or class declared in the block are instantiated in the [Environment Record](#sec-environment-records).

It performs the following steps when called:

1.  Let _declarations_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of _code_.
2.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
3.  For each element _d_ of _declarations_, do
    1.  For each element _dn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
        1.  If [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of _d_ is true, then
            1.  Perform ! _env_.CreateImmutableBinding(_dn_, true).
        2.  Else,
            1.  [Normative Optional](#sec-conformance)
                
                If the [host](#host) is a web browser or otherwise supports [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), then
                1.  If ! _env_.HasBinding(_dn_) is false, then
                    1.  Perform ! _env_.CreateMutableBinding(_dn_, false).
            2.  Else,
                1.  Perform ! _env_.CreateMutableBinding(_dn_, false).
    2.  If _d_ is either a [FunctionDeclaration](#prod-FunctionDeclaration), a [GeneratorDeclaration](#prod-GeneratorDeclaration), an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), or an [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), then
        1.  Let _fn_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _d_.
        2.  Let _fo_ be [InstantiateFunctionObject](#sec-runtime-semantics-instantiatefunctionobject) of _d_ with arguments _env_ and _privateEnv_.
        3.  [Normative Optional](#sec-conformance)
            
            If the [host](#host) is a web browser or otherwise supports [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), then
            1.  If the binding for _fn_ in _env_ is an uninitialized binding, then
                1.  Perform ! _env_.InitializeBinding(_fn_, _fo_).
            2.  Else,
                1.  [Assert](#assert): _d_ is a [FunctionDeclaration](#prod-FunctionDeclaration).
                2.  Perform ! _env_.SetMutableBinding(_fn_, _fo_, false).
        4.  Else,
            1.  Perform ! _env_.InitializeBinding(_fn_, _fo_).
4.  Return unused.


# 14.3 Declarations and the Variable Statement


# 14.3.1 Let and Const Declarations

Note

`let` and `const` declarations define variables that are scoped to the [running execution context](#running-execution-context)'s LexicalEnvironment. The variables are created when their containing [Environment Record](#sec-environment-records) is instantiated but may not be accessed in any way until the variable's [LexicalBinding](#prod-LexicalBinding) is evaluated. A variable defined by a [LexicalBinding](#prod-LexicalBinding) with an [Initializer](#prod-Initializer) is assigned the value of its [Initializer](#prod-Initializer)'s [AssignmentExpression](#prod-AssignmentExpression) when the [LexicalBinding](#prod-LexicalBinding) is evaluated, not when the variable is created. If a [LexicalBinding](#prod-LexicalBinding) in a `let` declaration does not have an [Initializer](#prod-Initializer) the variable is assigned the value undefined when the [LexicalBinding](#prod-LexicalBinding) is evaluated.


## Syntax

[LexicalDeclaration](#prod-LexicalDeclaration)\[In, Yield, Await\] : [LetOrConst](#prod-LetOrConst) [BindingList](#prod-BindingList)\[?In, ?Yield, ?Await\] ; [LetOrConst](#prod-LetOrConst) : let const [BindingList](#prod-BindingList)\[In, Yield, Await\] : [LexicalBinding](#prod-LexicalBinding)\[?In, ?Yield, ?Await\] [BindingList](#prod-BindingList)\[?In, ?Yield, ?Await\] , [LexicalBinding](#prod-LexicalBinding)\[?In, ?Yield, ?Await\] [LexicalBinding](#prod-LexicalBinding)\[In, Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\]opt [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\]


# 14.3.1.1 Static Semantics: Early Errors

[LexicalDeclaration](#prod-LexicalDeclaration) : [LetOrConst](#prod-LetOrConst) [BindingList](#prod-BindingList) ;

-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [BindingList](#prod-BindingList) contains "let".
-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [BindingList](#prod-BindingList) contains any duplicate entries.

[LexicalBinding](#prod-LexicalBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)opt

-   It is a Syntax Error if [Initializer](#prod-Initializer) is not present and [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of the [LexicalDeclaration](#prod-LexicalDeclaration) containing this [LexicalBinding](#prod-LexicalBinding) is true.


# 14.3.1.2 Runtime Semantics: Evaluation

[LexicalDeclaration](#prod-LexicalDeclaration) : [LetOrConst](#prod-LetOrConst) [BindingList](#prod-BindingList) ;

1.  Perform ? [Evaluation](#sec-evaluation) of [BindingList](#prod-BindingList).
2.  Return empty.

[BindingList](#prod-BindingList) : [BindingList](#prod-BindingList) , [LexicalBinding](#prod-LexicalBinding)

1.  Perform ? [Evaluation](#sec-evaluation) of [BindingList](#prod-BindingList).
2.  Return ? [Evaluation](#sec-evaluation) of [LexicalBinding](#prod-LexicalBinding).

[LexicalBinding](#prod-LexicalBinding) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Let _lhs_ be ! [ResolveBinding](#sec-resolvebinding)([StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier)).
2.  Perform ! [InitializeReferencedBinding](#sec-initializereferencedbinding)(_lhs_, undefined).
3.  Return empty.

Note

A [static semantics](#sec-static-semantic-rules) rule ensures that this form of [LexicalBinding](#prod-LexicalBinding) never occurs in a `const` declaration.

[LexicalBinding](#prod-LexicalBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)

1.  Let _bindingId_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _lhs_ be ! [ResolveBinding](#sec-resolvebinding)(_bindingId_).
3.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true, then
    1.  Let _value_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _bindingId_.
4.  Else,
    1.  Let _rhs_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
    2.  Let _value_ be ? [GetValue](#sec-getvalue)(_rhs_).
5.  Perform ! [InitializeReferencedBinding](#sec-initializereferencedbinding)(_lhs_, _value_).
6.  Return empty.

[LexicalBinding](#prod-LexicalBinding) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)

1.  Let _rhs_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
2.  Let _value_ be ? [GetValue](#sec-getvalue)(_rhs_).
3.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
4.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [BindingPattern](#prod-BindingPattern) with arguments _value_ and _env_.


# 14.3.2 Variable Statement

Note

A `var` statement declares variables that are scoped to the [running execution context](#running-execution-context)'s VariableEnvironment. Var variables are created when their containing [Environment Record](#sec-environment-records) is instantiated and are initialized to undefined when created. Within the scope of any VariableEnvironment a common [BindingIdentifier](#prod-BindingIdentifier) may appear in more than one [VariableDeclaration](#prod-VariableDeclaration) but those declarations collectively define only one variable. A variable defined by a [VariableDeclaration](#prod-VariableDeclaration) with an [Initializer](#prod-Initializer) is assigned the value of its [Initializer](#prod-Initializer)'s [AssignmentExpression](#prod-AssignmentExpression) when the [VariableDeclaration](#prod-VariableDeclaration) is executed, not when the variable is created.


## Syntax

[VariableStatement](#prod-VariableStatement)\[Yield, Await\] : var [VariableDeclarationList](#prod-VariableDeclarationList)\[+In, ?Yield, ?Await\] ; [VariableDeclarationList](#prod-VariableDeclarationList)\[In, Yield, Await\] : [VariableDeclaration](#prod-VariableDeclaration)\[?In, ?Yield, ?Await\] [VariableDeclarationList](#prod-VariableDeclarationList)\[?In, ?Yield, ?Await\] , [VariableDeclaration](#prod-VariableDeclaration)\[?In, ?Yield, ?Await\] [VariableDeclaration](#prod-VariableDeclaration)\[In, Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\]opt [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\]


# 14.3.2.1 Runtime Semantics: Evaluation

[VariableStatement](#prod-VariableStatement) : var [VariableDeclarationList](#prod-VariableDeclarationList) ;

1.  Perform ? [Evaluation](#sec-evaluation) of [VariableDeclarationList](#prod-VariableDeclarationList).
2.  Return empty.

[VariableDeclarationList](#prod-VariableDeclarationList) : [VariableDeclarationList](#prod-VariableDeclarationList) , [VariableDeclaration](#prod-VariableDeclaration)

1.  Perform ? [Evaluation](#sec-evaluation) of [VariableDeclarationList](#prod-VariableDeclarationList).
2.  Return ? [Evaluation](#sec-evaluation) of [VariableDeclaration](#prod-VariableDeclaration).

[VariableDeclaration](#prod-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return empty.

[VariableDeclaration](#prod-VariableDeclaration) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)

1.  Let _bindingId_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _lhs_ be ? [ResolveBinding](#sec-resolvebinding)(_bindingId_).
3.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true, then
    1.  Let _value_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _bindingId_.
4.  Else,
    1.  Let _rhs_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
    2.  Let _value_ be ? [GetValue](#sec-getvalue)(_rhs_).
5.  Perform ? [PutValue](#sec-putvalue)(_lhs_, _value_).
6.  Return empty.

Note

If a [VariableDeclaration](#prod-VariableDeclaration) is nested within a with statement and the [BindingIdentifier](#prod-BindingIdentifier) in the [VariableDeclaration](#prod-VariableDeclaration) is the same as a [property name](#property-name) of the binding object of the with statement's [Object Environment Record](#sec-object-environment-records), then step [5](#step-vardecllist-evaluation-putvalue) will assign _value_ to the property instead of assigning to the VariableEnvironment binding of the [Identifier](#prod-Identifier).

[VariableDeclaration](#prod-VariableDeclaration) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)

1.  Let _rhs_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
2.  Let _rVal_ be ? [GetValue](#sec-getvalue)(_rhs_).
3.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [BindingPattern](#prod-BindingPattern) with arguments _rVal_ and undefined.


# 14.3.3 Destructuring Binding Patterns


## Syntax

[BindingPattern](#prod-BindingPattern)\[Yield, Await\] : [ObjectBindingPattern](#prod-ObjectBindingPattern)\[?Yield, ?Await\] [ArrayBindingPattern](#prod-ArrayBindingPattern)\[?Yield, ?Await\] [ObjectBindingPattern](#prod-ObjectBindingPattern)\[Yield, Await\] : { } { [BindingRestProperty](#prod-BindingRestProperty)\[?Yield, ?Await\] } { [BindingPropertyList](#prod-BindingPropertyList)\[?Yield, ?Await\] } { [BindingPropertyList](#prod-BindingPropertyList)\[?Yield, ?Await\] , [BindingRestProperty](#prod-BindingRestProperty)\[?Yield, ?Await\]opt } [ArrayBindingPattern](#prod-ArrayBindingPattern)\[Yield, Await\] : \[[Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement)\[?Yield, ?Await\]opt \] \[[BindingElementList](#prod-BindingElementList)\[?Yield, ?Await\] \] \[[BindingElementList](#prod-BindingElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement)\[?Yield, ?Await\]opt \] [BindingRestProperty](#prod-BindingRestProperty)\[Yield, Await\] : ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [BindingPropertyList](#prod-BindingPropertyList)\[Yield, Await\] : [BindingProperty](#prod-BindingProperty)\[?Yield, ?Await\] [BindingPropertyList](#prod-BindingPropertyList)\[?Yield, ?Await\] , [BindingProperty](#prod-BindingProperty)\[?Yield, ?Await\] [BindingElementList](#prod-BindingElementList)\[Yield, Await\] : [BindingElisionElement](#prod-BindingElisionElement)\[?Yield, ?Await\] [BindingElementList](#prod-BindingElementList)\[?Yield, ?Await\] , [BindingElisionElement](#prod-BindingElisionElement)\[?Yield, ?Await\] [BindingElisionElement](#prod-BindingElisionElement)\[Yield, Await\] : [Elision](#prod-Elision)opt [BindingElement](#prod-BindingElement)\[?Yield, ?Await\] [BindingProperty](#prod-BindingProperty)\[Yield, Await\] : [SingleNameBinding](#prod-SingleNameBinding)\[?Yield, ?Await\] [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] : [BindingElement](#prod-BindingElement)\[?Yield, ?Await\] [BindingElement](#prod-BindingElement)\[Yield, Await\] : [SingleNameBinding](#prod-SingleNameBinding)\[?Yield, ?Await\] [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [SingleNameBinding](#prod-SingleNameBinding)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [BindingRestElement](#prod-BindingRestElement)\[Yield, Await\] : ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ... [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\]


# 14.3.3.1 Runtime Semantics: PropertyBindingInitialization

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) PropertyBindingInitialization takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _environment_ (an [Environment Record](#sec-environment-records) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key) or an [abrupt completion](#sec-completion-record-specification-type). It collects a list of all bound [property names](#property-name). It is defined piecewise over the following productions:

[BindingPropertyList](#prod-BindingPropertyList) : [BindingPropertyList](#prod-BindingPropertyList) , [BindingProperty](#prod-BindingProperty)

1.  Let _boundNames_ be ? [PropertyBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-propertybindinginitialization) of [BindingPropertyList](#prod-BindingPropertyList) with arguments _value_ and _environment_.
2.  Let _nextNames_ be ? [PropertyBindingInitialization](#sec-destructuring-binding-patterns-runtime-semantics-propertybindinginitialization) of [BindingProperty](#prod-BindingProperty) with arguments _value_ and _environment_.
3.  Return the [list-concatenation](#list-concatenation) of _boundNames_ and _nextNames_.

[BindingProperty](#prod-BindingProperty) : [SingleNameBinding](#prod-SingleNameBinding)

1.  Let _name_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of [SingleNameBinding](#prod-SingleNameBinding).
2.  Perform ? [KeyedBindingInitialization](#sec-runtime-semantics-keyedbindinginitialization) of [SingleNameBinding](#prod-SingleNameBinding) with arguments _value_, _environment_, and _name_.
3.  Return « _name_ ».

[BindingProperty](#prod-BindingProperty) : [PropertyName](#prod-PropertyName) : [BindingElement](#prod-BindingElement)

1.  Let _P_ be ? [Evaluation](#sec-evaluation) of [PropertyName](#prod-PropertyName).
2.  Perform ? [KeyedBindingInitialization](#sec-runtime-semantics-keyedbindinginitialization) of [BindingElement](#prod-BindingElement) with arguments _value_, _environment_, and _P_.
3.  Return « _P_ ».


# 14.3.3.2 Runtime Semantics: RestBindingInitialization

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) RestBindingInitialization takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _environment_ (an [Environment Record](#sec-environment-records) or undefined), and _excludedNames_ (a [List](#sec-list-and-record-specification-type) of [property keys](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[BindingRestProperty](#prod-BindingRestProperty) : ... [BindingIdentifier](#prod-BindingIdentifier)

1.  Let _lhs_ be ? [ResolveBinding](#sec-resolvebinding)([StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier), _environment_).
2.  Let _restObj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
3.  Perform ? [CopyDataProperties](#sec-copydataproperties)(_restObj_, _value_, _excludedNames_).
4.  If _environment_ is undefined, return ? [PutValue](#sec-putvalue)(_lhs_, _restObj_).
5.  Return ? [InitializeReferencedBinding](#sec-initializereferencedbinding)(_lhs_, _restObj_).


# 14.3.3.3 Runtime Semantics: KeyedBindingInitialization

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) KeyedBindingInitialization takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _environment_ (an [Environment Record](#sec-environment-records) or undefined), and _propertyName_ (a [property key](#property-key)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type).

Note

When undefined is passed for _environment_ it indicates that a [PutValue](#sec-putvalue) operation should be used to assign the initialization value. This is the case for formal parameter lists of [non-strict functions](#non-strict-function). In that case the formal parameter bindings are preinitialized in order to deal with the possibility of multiple parameters with the same name.

It is defined piecewise over the following productions:

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)opt

1.  Let _v_ be ? [GetV](#sec-getv)(_value_, _propertyName_).
2.  If [Initializer](#prod-Initializer) is present and _v_ is undefined, then
    1.  Let _defaultValue_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
    2.  Set _v_ to ? [GetValue](#sec-getvalue)(_defaultValue_).
3.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [BindingPattern](#prod-BindingPattern) with arguments _v_ and _environment_.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)opt

1.  Let _bindingId_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _lhs_ be ? [ResolveBinding](#sec-resolvebinding)(_bindingId_, _environment_).
3.  Let _v_ be ? [GetV](#sec-getv)(_value_, _propertyName_).
4.  If [Initializer](#prod-Initializer) is present and _v_ is undefined, then
    1.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true, then
        1.  Set _v_ to ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _bindingId_.
    2.  Else,
        1.  Let _defaultValue_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
        2.  Set _v_ to ? [GetValue](#sec-getvalue)(_defaultValue_).
5.  If _environment_ is undefined, return ? [PutValue](#sec-putvalue)(_lhs_, _v_).
6.  Return ? [InitializeReferencedBinding](#sec-initializereferencedbinding)(_lhs_, _v_).


# 14.4 Empty Statement


## Syntax

[EmptyStatement](#prod-EmptyStatement) : ;


# 14.4.1 Runtime Semantics: Evaluation

[EmptyStatement](#prod-EmptyStatement) : ;

1.  Return empty.


# 14.5 Expression Statement


## Syntax

[ExpressionStatement](#prod-ExpressionStatement)\[Yield, Await\] : \[lookahead ∉ { {, function, async \[no [LineTerminator](#prod-LineTerminator) here\] function, class, let \[}\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ; Note

An [ExpressionStatement](#prod-ExpressionStatement) cannot start with a U+007B (LEFT CURLY BRACKET) because that might make it ambiguous with a [Block](#prod-Block). An [ExpressionStatement](#prod-ExpressionStatement) cannot start with the `function` or `class` [keywords](#sec-keywords-and-reserved-words) because that would make it ambiguous with a [FunctionDeclaration](#prod-FunctionDeclaration), a [GeneratorDeclaration](#prod-GeneratorDeclaration), or a [ClassDeclaration](#prod-ClassDeclaration). An [ExpressionStatement](#prod-ExpressionStatement) cannot start with `async function` because that would make it ambiguous with an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) or a [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration). An [ExpressionStatement](#prod-ExpressionStatement) cannot start with the two token sequence `let [` because that would make it ambiguous with a `let` [LexicalDeclaration](#prod-LexicalDeclaration) whose first [LexicalBinding](#prod-LexicalBinding) was an [ArrayBindingPattern](#prod-ArrayBindingPattern).


# 14.5.1 Runtime Semantics: Evaluation

[ExpressionStatement](#prod-ExpressionStatement) : [Expression](#prod-Expression) ;

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Return ? [GetValue](#sec-getvalue)(_exprRef_).


# 14.6 The `if` Statement


## Syntax

[IfStatement](#prod-IfStatement)\[Yield, Await, Return\] : if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] else [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[lookahead ≠ else\] Note

The lookahead-restriction \[lookahead ≠ `else`\] resolves the classic "dangling else" problem in the usual way. That is, when the choice of associated `if` is otherwise ambiguous, the `else` is associated with the nearest (innermost) of the candidate `if`s


# 14.6.1 Static Semantics: Early Errors

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)(the first [Statement](#prod-Statement)) is true.
-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)(the second [Statement](#prod-Statement)) is true.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)([Statement](#prod-Statement)) is true.

Note

It is only necessary to apply this rule if the extension specified in [B.3.1](#sec-labelled-function-declarations) is implemented.


# 14.6.2 Runtime Semantics: Evaluation

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _exprValue_ be [ToBoolean](#sec-toboolean)(? [GetValue](#sec-getvalue)(_exprRef_)).
3.  If _exprValue_ is true, then
    1.  Let _stmtCompletion_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of the first [Statement](#prod-Statement)).
4.  Else,
    1.  Let _stmtCompletion_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of the second [Statement](#prod-Statement)).
5.  Return ? [UpdateEmpty](#sec-updateempty)(_stmtCompletion_, undefined).

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _exprValue_ be [ToBoolean](#sec-toboolean)(? [GetValue](#sec-getvalue)(_exprRef_)).
3.  If _exprValue_ is false, then
    1.  Return undefined.
4.  Else,
    1.  Let _stmtCompletion_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Statement](#prod-Statement)).
    2.  Return ? [UpdateEmpty](#sec-updateempty)(_stmtCompletion_, undefined).


# 14.7 Iteration Statements


## Syntax

[IterationStatement](#prod-IterationStatement)\[Yield, Await, Return\] : [DoWhileStatement](#prod-DoWhileStatement)\[?Yield, ?Await, ?Return\] [WhileStatement](#prod-WhileStatement)\[?Yield, ?Await, ?Return\] [ForStatement](#prod-ForStatement)\[?Yield, ?Await, ?Return\] [ForInOfStatement](#prod-ForInOfStatement)\[?Yield, ?Await, ?Return\]


# 14.7.1 Semantics


# 14.7.1.1 LoopContinues ( _completion_, _labelSet_ )

The abstract operation LoopContinues takes arguments _completion_ (a [Completion Record](#sec-completion-record-specification-type)) and _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns a Boolean. It performs the following steps when called:

1.  If _completion_ is a [normal completion](#sec-completion-record-specification-type), return true.
2.  If _completion_ is not a [continue completion](#sec-completion-record-specification-type), return false.
3.  If _completion_._\[\[Target\]\]_ is empty, return true.
4.  If _labelSet_ contains _completion_._\[\[Target\]\]_, return true.
5.  Return false.

Note

Within the [Statement](#prod-Statement) part of an [IterationStatement](#prod-IterationStatement) a [ContinueStatement](#prod-ContinueStatement) may be used to begin a new iteration.


# 14.7.1.2 Runtime Semantics: LoopEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) LoopEvaluation takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[IterationStatement](#prod-IterationStatement) : [DoWhileStatement](#prod-DoWhileStatement)

1.  Return ? [DoWhileLoopEvaluation](#sec-runtime-semantics-dowhileloopevaluation) of [DoWhileStatement](#prod-DoWhileStatement) with argument _labelSet_.

[IterationStatement](#prod-IterationStatement) : [WhileStatement](#prod-WhileStatement)

1.  Return ? [WhileLoopEvaluation](#sec-runtime-semantics-whileloopevaluation) of [WhileStatement](#prod-WhileStatement) with argument _labelSet_.

[IterationStatement](#prod-IterationStatement) : [ForStatement](#prod-ForStatement)

1.  Return ? [ForLoopEvaluation](#sec-runtime-semantics-forloopevaluation) of [ForStatement](#prod-ForStatement) with argument _labelSet_.

[IterationStatement](#prod-IterationStatement) : [ForInOfStatement](#prod-ForInOfStatement)

1.  Return ? [ForInOfLoopEvaluation](#sec-runtime-semantics-forinofloopevaluation) of [ForInOfStatement](#prod-ForInOfStatement) with argument _labelSet_.


# 14.7.2 The `do`\-`while` Statement


## Syntax

[DoWhileStatement](#prod-DoWhileStatement)\[Yield, Await, Return\] : do [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] while ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) ;


# 14.7.2.1 Static Semantics: Early Errors

[DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ;

-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)([Statement](#prod-Statement)) is true.

Note

It is only necessary to apply this rule if the extension specified in [B.3.1](#sec-labelled-function-declarations) is implemented.


# 14.7.2.2 Runtime Semantics: DoWhileLoopEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) DoWhileLoopEvaluation takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ;

1.  Let _V_ be undefined.
2.  Repeat,
    1.  Let _stmtResult_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Statement](#prod-Statement)).
    2.  If [LoopContinues](#sec-loopcontinues)(_stmtResult_, _labelSet_) is false, return ? [UpdateEmpty](#sec-updateempty)(_stmtResult_, _V_).
    3.  If _stmtResult_._\[\[Value\]\]_ is not empty, set _V_ to _stmtResult_._\[\[Value\]\]_.
    4.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
    5.  Let _exprValue_ be ? [GetValue](#sec-getvalue)(_exprRef_).
    6.  If [ToBoolean](#sec-toboolean)(_exprValue_) is false, return _V_.


# 14.7.3 The `while` Statement


## Syntax

[WhileStatement](#prod-WhileStatement)\[Yield, Await, Return\] : while ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\]


# 14.7.3.1 Static Semantics: Early Errors

[WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)([Statement](#prod-Statement)) is true.

Note

It is only necessary to apply this rule if the extension specified in [B.3.1](#sec-labelled-function-declarations) is implemented.


# 14.7.3.2 Runtime Semantics: WhileLoopEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) WhileLoopEvaluation takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _V_ be undefined.
2.  Repeat,
    1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
    2.  Let _exprValue_ be ? [GetValue](#sec-getvalue)(_exprRef_).
    3.  If [ToBoolean](#sec-toboolean)(_exprValue_) is false, return _V_.
    4.  Let _stmtResult_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Statement](#prod-Statement)).
    5.  If [LoopContinues](#sec-loopcontinues)(_stmtResult_, _labelSet_) is false, return ? [UpdateEmpty](#sec-updateempty)(_stmtResult_, _V_).
    6.  If _stmtResult_._\[\[Value\]\]_ is not empty, set _V_ to _stmtResult_._\[\[Value\]\]_.


# 14.7.4 The `for` Statement


## Syntax

[ForStatement](#prod-ForStatement)\[Yield, Await, Return\] : for ( \[lookahead ≠ let \[\] [Expression](#prod-Expression)\[~In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( var [VariableDeclarationList](#prod-VariableDeclarationList)\[~In, ?Yield, ?Await\] ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( [LexicalDeclaration](#prod-LexicalDeclaration)\[~In, ?Yield, ?Await\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\]


# 14.7.4.1 Static Semantics: Early Errors

[ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)([Statement](#prod-Statement)) is true.

Note

It is only necessary to apply this rule if the extension specified in [B.3.1](#sec-labelled-function-declarations) is implemented.

[ForStatement](#prod-ForStatement) : for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [LexicalDeclaration](#prod-LexicalDeclaration) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).


# 14.7.4.2 Runtime Semantics: ForLoopEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ForLoopEvaluation takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  If the first [Expression](#prod-Expression) is present, then
    1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of the first [Expression](#prod-Expression).
    2.  Perform ? [GetValue](#sec-getvalue)(_exprRef_).
2.  If the second [Expression](#prod-Expression) is present, let _test_ be the second [Expression](#prod-Expression); otherwise let _test_ be empty.
3.  If the third [Expression](#prod-Expression) is present, let _increment_ be the third [Expression](#prod-Expression); otherwise let _increment_ be empty.
4.  Return ? [ForBodyEvaluation](#sec-forbodyevaluation)(_test_, _increment_, [Statement](#prod-Statement), « », _labelSet_).

[ForStatement](#prod-ForStatement) : for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Perform ? [Evaluation](#sec-evaluation) of [VariableDeclarationList](#prod-VariableDeclarationList).
2.  If the first [Expression](#prod-Expression) is present, let _test_ be the first [Expression](#prod-Expression); otherwise let _test_ be empty.
3.  If the second [Expression](#prod-Expression) is present, let _increment_ be the second [Expression](#prod-Expression); otherwise let _increment_ be empty.
4.  Return ? [ForBodyEvaluation](#sec-forbodyevaluation)(_test_, _increment_, [Statement](#prod-Statement), « », _labelSet_).

[ForStatement](#prod-ForStatement) : for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement)

1.  Let _oldEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
2.  Let _loopEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_oldEnv_).
3.  Let _isConst_ be [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of [LexicalDeclaration](#prod-LexicalDeclaration).
4.  Let _boundNames_ be the [BoundNames](#sec-static-semantics-boundnames) of [LexicalDeclaration](#prod-LexicalDeclaration).
5.  For each element _dn_ of _boundNames_, do
    1.  If _isConst_ is true, then
        1.  Perform ! _loopEnv_.CreateImmutableBinding(_dn_, true).
    2.  Else,
        1.  Perform ! _loopEnv_.CreateMutableBinding(_dn_, false).
6.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _loopEnv_.
7.  Let _forDcl_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [LexicalDeclaration](#prod-LexicalDeclaration)).
8.  If _forDcl_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
    2.  Return ? _forDcl_.
9.  If _isConst_ is false, let _perIterationLets_ be _boundNames_; otherwise let _perIterationLets_ be a new empty [List](#sec-list-and-record-specification-type).
10.  If the first [Expression](#prod-Expression) is present, let _test_ be the first [Expression](#prod-Expression); otherwise let _test_ be empty.
11.  If the second [Expression](#prod-Expression) is present, let _increment_ be the second [Expression](#prod-Expression); otherwise let _increment_ be empty.
12.  Let _bodyResult_ be [Completion](#sec-completion-ao)([ForBodyEvaluation](#sec-forbodyevaluation)(_test_, _increment_, [Statement](#prod-Statement), _perIterationLets_, _labelSet_)).
13.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
14.  Return ? _bodyResult_.


# 14.7.4.3 ForBodyEvaluation ( _test_, _increment_, _stmt_, _perIterationBindings_, _labelSet_ )

The abstract operation ForBodyEvaluation takes arguments _test_ (an [Expression](#prod-Expression) [Parse Node](#sec-syntactic-grammar) or empty), _increment_ (an [Expression](#prod-Expression) [Parse Node](#sec-syntactic-grammar) or empty), _stmt_ (a [Statement](#prod-Statement) [Parse Node](#sec-syntactic-grammar)), _perIterationBindings_ (a [List](#sec-list-and-record-specification-type) of Strings), and _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _V_ be undefined.
2.  Perform ? [CreatePerIterationEnvironment](#sec-createperiterationenvironment)(_perIterationBindings_).
3.  Repeat,
    1.  If _test_ is not empty, then
        1.  Let _testRef_ be ? [Evaluation](#sec-evaluation) of _test_.
        2.  Let _testValue_ be ? [GetValue](#sec-getvalue)(_testRef_).
        3.  If [ToBoolean](#sec-toboolean)(_testValue_) is false, return _V_.
    2.  Let _result_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _stmt_).
    3.  If [LoopContinues](#sec-loopcontinues)(_result_, _labelSet_) is false, return ? [UpdateEmpty](#sec-updateempty)(_result_, _V_).
    4.  If _result_._\[\[Value\]\]_ is not empty, set _V_ to _result_._\[\[Value\]\]_.
    5.  Perform ? [CreatePerIterationEnvironment](#sec-createperiterationenvironment)(_perIterationBindings_).
    6.  If _increment_ is not empty, then
        1.  Let _incRef_ be ? [Evaluation](#sec-evaluation) of _increment_.
        2.  Perform ? [GetValue](#sec-getvalue)(_incRef_).


# 14.7.4.4 CreatePerIterationEnvironment ( _perIterationBindings_ )

The abstract operation CreatePerIterationEnvironment takes argument _perIterationBindings_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _perIterationBindings_ has any elements, then
    1.  Let _lastIterationEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
    2.  Let _outer_ be _lastIterationEnv_._\[\[OuterEnv\]\]_.
    3.  [Assert](#assert): _outer_ is not null.
    4.  Let _thisIterationEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_outer_).
    5.  For each element _bn_ of _perIterationBindings_, do
        1.  Perform ! _thisIterationEnv_.CreateMutableBinding(_bn_, false).
        2.  Let _lastValue_ be ? _lastIterationEnv_.GetBindingValue(_bn_, true).
        3.  Perform ! _thisIterationEnv_.InitializeBinding(_bn_, _lastValue_).
    6.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _thisIterationEnv_.
2.  Return unused.


# 14.7.5 The `for`\-`in`, `for`\-`of`, and `for`\-`await`\-`of` Statements


## Syntax

[ForInOfStatement](#prod-ForInOfStatement)\[Yield, Await, Return\] : for ( \[lookahead ≠ let \[\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] in [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( var [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] in [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( [ForDeclaration](#prod-ForDeclaration)\[?Yield, ?Await\] in [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( \[lookahead ∉ { let, async of }\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( var [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( [ForDeclaration](#prod-ForDeclaration)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[+Await\] for await ( \[lookahead ≠ let\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[+Await\] for await ( var [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[+Await\] for await ( [ForDeclaration](#prod-ForDeclaration)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [ForDeclaration](#prod-ForDeclaration)\[Yield, Await\] : [LetOrConst](#prod-LetOrConst) [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] [ForBinding](#prod-ForBinding)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).


# 14.7.5.1 Static Semantics: Early Errors

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)([Statement](#prod-Statement)) is true.

Note

It is only necessary to apply this rule if the extension specified in [B.3.1](#sec-labelled-function-declarations) is implemented.

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

-   If [LeftHandSideExpression](#prod-LeftHandSideExpression) is either an [ObjectLiteral](#prod-ObjectLiteral) or an [ArrayLiteral](#prod-ArrayLiteral), [LeftHandSideExpression](#prod-LeftHandSideExpression) [must cover](#must-cover) an [AssignmentPattern](#prod-AssignmentPattern).
-   If [LeftHandSideExpression](#prod-LeftHandSideExpression) is neither an [ObjectLiteral](#prod-ObjectLiteral) nor an [ArrayLiteral](#prod-ArrayLiteral), it is a Syntax Error if the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of [LeftHandSideExpression](#prod-LeftHandSideExpression) is invalid.

[ForInOfStatement](#prod-ForInOfStatement) : for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [ForDeclaration](#prod-ForDeclaration) contains "let".
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [ForDeclaration](#prod-ForDeclaration) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).
-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [ForDeclaration](#prod-ForDeclaration) contains any duplicate entries.


# 14.7.5.2 Static Semantics: IsDestructuring

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsDestructuring takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[MemberExpression](#prod-MemberExpression) : [PrimaryExpression](#prod-PrimaryExpression)

1.  If [PrimaryExpression](#prod-PrimaryExpression) is either an [ObjectLiteral](#prod-ObjectLiteral) or an [ArrayLiteral](#prod-ArrayLiteral), return true.
2.  Return false.

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) \[[Expression](#prod-Expression) \] [MemberExpression](#prod-MemberExpression) . [IdentifierName](#prod-IdentifierName) [MemberExpression](#prod-MemberExpression) [TemplateLiteral](#prod-TemplateLiteral) [SuperProperty](#prod-SuperProperty) [MetaProperty](#prod-MetaProperty) new [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments) [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) [NewExpression](#prod-NewExpression) : new [NewExpression](#prod-NewExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) : [CallExpression](#prod-CallExpression) [OptionalExpression](#prod-OptionalExpression)

1.  Return false.

[ForDeclaration](#prod-ForDeclaration) : [LetOrConst](#prod-LetOrConst) [ForBinding](#prod-ForBinding)

1.  Return [IsDestructuring](#sec-static-semantics-isdestructuring) of [ForBinding](#prod-ForBinding).

[ForBinding](#prod-ForBinding) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return false.

[ForBinding](#prod-ForBinding) : [BindingPattern](#prod-BindingPattern)

1.  Return true.

Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).


# 14.7.5.3 Runtime Semantics: ForDeclarationBindingInitialization

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ForDeclarationBindingInitialization takes arguments _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _environment_ (an [Environment Record](#sec-environment-records) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or an [abrupt completion](#sec-completion-record-specification-type).

Note

undefined is passed for _environment_ to indicate that a [PutValue](#sec-putvalue) operation should be used to assign the initialization value. This is the case for `var` statements and the formal parameter lists of some [non-strict functions](#non-strict-function) (see [10.2.11](#sec-functiondeclarationinstantiation)). In those cases a lexical binding is hoisted and preinitialized prior to evaluation of its initializer.

It is defined piecewise over the following productions:

[ForDeclaration](#prod-ForDeclaration) : [LetOrConst](#prod-LetOrConst) [ForBinding](#prod-ForBinding)

1.  Return ? [BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [ForBinding](#prod-ForBinding) with arguments _value_ and _environment_.


# 14.7.5.4 Runtime Semantics: ForDeclarationBindingInstantiation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ForDeclarationBindingInstantiation takes argument _environment_ (a [Declarative Environment Record](#sec-declarative-environment-records)) and returns unused. It is defined piecewise over the following productions:

[ForDeclaration](#prod-ForDeclaration) : [LetOrConst](#prod-LetOrConst) [ForBinding](#prod-ForBinding)

1.  For each element _name_ of the [BoundNames](#sec-static-semantics-boundnames) of [ForBinding](#prod-ForBinding), do
    1.  If [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of [LetOrConst](#prod-LetOrConst) is true, then
        1.  Perform ! _environment_.CreateImmutableBinding(_name_, true).
    2.  Else,
        1.  Perform ! _environment_.CreateMutableBinding(_name_, false).
2.  Return unused.


# 14.7.5.5 Runtime Semantics: ForInOfLoopEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ForInOfLoopEvaluation takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)(« », [Expression](#prod-Expression), enumerate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([LeftHandSideExpression](#prod-LeftHandSideExpression), [Statement](#prod-Statement), _keyResult_, enumerate, assignment, _labelSet_).

[ForInOfStatement](#prod-ForInOfStatement) : for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)(« », [Expression](#prod-Expression), enumerate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([ForBinding](#prod-ForBinding), [Statement](#prod-Statement), _keyResult_, enumerate, var-binding, _labelSet_).

[ForInOfStatement](#prod-ForInOfStatement) : for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)([BoundNames](#sec-static-semantics-boundnames) of [ForDeclaration](#prod-ForDeclaration), [Expression](#prod-Expression), enumerate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([ForDeclaration](#prod-ForDeclaration), [Statement](#prod-Statement), _keyResult_, enumerate, lexical-binding, _labelSet_).

[ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)(« », [AssignmentExpression](#prod-AssignmentExpression), iterate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([LeftHandSideExpression](#prod-LeftHandSideExpression), [Statement](#prod-Statement), _keyResult_, iterate, assignment, _labelSet_).

[ForInOfStatement](#prod-ForInOfStatement) : for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)(« », [AssignmentExpression](#prod-AssignmentExpression), iterate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([ForBinding](#prod-ForBinding), [Statement](#prod-Statement), _keyResult_, iterate, var-binding, _labelSet_).

[ForInOfStatement](#prod-ForInOfStatement) : for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)([BoundNames](#sec-static-semantics-boundnames) of [ForDeclaration](#prod-ForDeclaration), [AssignmentExpression](#prod-AssignmentExpression), iterate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([ForDeclaration](#prod-ForDeclaration), [Statement](#prod-Statement), _keyResult_, iterate, lexical-binding, _labelSet_).

[ForInOfStatement](#prod-ForInOfStatement) : for await ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)(« », [AssignmentExpression](#prod-AssignmentExpression), async-iterate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([LeftHandSideExpression](#prod-LeftHandSideExpression), [Statement](#prod-Statement), _keyResult_, iterate, assignment, _labelSet_, async).

[ForInOfStatement](#prod-ForInOfStatement) : for await ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)(« », [AssignmentExpression](#prod-AssignmentExpression), async-iterate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([ForBinding](#prod-ForBinding), [Statement](#prod-Statement), _keyResult_, iterate, var-binding, _labelSet_, async).

[ForInOfStatement](#prod-ForInOfStatement) : for await ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement)

1.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)([BoundNames](#sec-static-semantics-boundnames) of [ForDeclaration](#prod-ForDeclaration), [AssignmentExpression](#prod-AssignmentExpression), async-iterate).
2.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([ForDeclaration](#prod-ForDeclaration), [Statement](#prod-Statement), _keyResult_, iterate, lexical-binding, _labelSet_, async).

Note

This section is extended by Annex [B.3.5](#sec-initializers-in-forin-statement-heads).


# 14.7.5.6 ForIn/OfHeadEvaluation ( _uninitializedBoundNames_, _expr_, _iterationKind_ )

The abstract operation ForIn/OfHeadEvaluation takes arguments _uninitializedBoundNames_ (a [List](#sec-list-and-record-specification-type) of Strings), _expr_ (an [Expression](#prod-Expression) [Parse Node](#sec-syntactic-grammar) or an [AssignmentExpression](#prod-AssignmentExpression) [Parse Node](#sec-syntactic-grammar)), and _iterationKind_ (enumerate, iterate, or async-iterate) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [Iterator Record](#sec-iterator-records) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _oldEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
2.  If _uninitializedBoundNames_ is not empty, then
    1.  [Assert](#assert): _uninitializedBoundNames_ has no duplicate entries.
    2.  Let _newEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_oldEnv_).
    3.  For each String _name_ of _uninitializedBoundNames_, do
        1.  Perform ! _newEnv_.CreateMutableBinding(_name_, false).
    4.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _newEnv_.
3.  Let _exprRef_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _expr_).
4.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
5.  Let _exprValue_ be ? [GetValue](#sec-getvalue)(? _exprRef_).
6.  If _iterationKind_ is enumerate, then
    1.  If _exprValue_ is either undefined or null, then
        1.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: break, _\[\[Value\]\]_: empty, _\[\[Target\]\]_: empty }.
    2.  Let _obj_ be ! [ToObject](#sec-toobject)(_exprValue_).
    3.  Let _iterator_ be [EnumerateObjectProperties](#sec-enumerate-object-properties)(_obj_).
    4.  Let _nextMethod_ be ! [GetV](#sec-getv)(_iterator_, "next").
    5.  Return the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _iterator_, _\[\[NextMethod\]\]_: _nextMethod_, _\[\[Done\]\]_: false }.
7.  Else,
    1.  [Assert](#assert): _iterationKind_ is either iterate or async-iterate.
    2.  If _iterationKind_ is async-iterate, let _iteratorKind_ be async.
    3.  Else, let _iteratorKind_ be sync.
    4.  Return ? [GetIterator](#sec-getiterator)(_exprValue_, _iteratorKind_).


# 14.7.5.7 ForIn/OfBodyEvaluation ( _lhs_, _stmt_, _iteratorRecord_, _iterationKind_, _lhsKind_, _labelSet_ \[, _iteratorKind_ \] )

The abstract operation ForIn/OfBodyEvaluation takes arguments _lhs_ (a [Parse Node](#sec-syntactic-grammar)), _stmt_ (a [Statement](#prod-Statement) [Parse Node](#sec-syntactic-grammar)), _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)), _iterationKind_ (enumerate or iterate), _lhsKind_ (assignment, var-binding, or lexical-binding), and _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and optional argument _iteratorKind_ (sync or async) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _iteratorKind_ is not present, set _iteratorKind_ to sync.
2.  Let _oldEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
3.  Let _V_ be undefined.
4.  Let _destructuring_ be [IsDestructuring](#sec-static-semantics-isdestructuring) of _lhs_.
5.  If _destructuring_ is true and _lhsKind_ is assignment, then
    1.  [Assert](#assert): _lhs_ is a [LeftHandSideExpression](#prod-LeftHandSideExpression).
    2.  Let _assignmentPattern_ be the [AssignmentPattern](#prod-AssignmentPattern) that is [covered](#sec-syntactic-grammar) by _lhs_.
6.  Repeat,
    1.  Let _nextResult_ be ? [Call](#sec-call)(_iteratorRecord_._\[\[NextMethod\]\]_, _iteratorRecord_._\[\[Iterator\]\]_).
    2.  If _iteratorKind_ is async, set _nextResult_ to ? [Await](#await)(_nextResult_).
    3.  If _nextResult_ [is not an Object](#sec-object-type), throw a TypeError exception.
    4.  Let _done_ be ? [IteratorComplete](#sec-iteratorcomplete)(_nextResult_).
    5.  If _done_ is true, return _V_.
    6.  Let _nextValue_ be ? [IteratorValue](#sec-iteratorvalue)(_nextResult_).
    7.  If _lhsKind_ is either assignment or var-binding, then
        1.  If _destructuring_ is true, then
            1.  If _lhsKind_ is assignment, then
                1.  Let _status_ be [Completion](#sec-completion-ao)([DestructuringAssignmentEvaluation](#sec-runtime-semantics-destructuringassignmentevaluation) of _assignmentPattern_ with argument _nextValue_).
            2.  Else,
                1.  [Assert](#assert): _lhsKind_ is var-binding.
                2.  [Assert](#assert): _lhs_ is a [ForBinding](#prod-ForBinding).
                3.  Let _status_ be [Completion](#sec-completion-ao)([BindingInitialization](#sec-runtime-semantics-bindinginitialization) of _lhs_ with arguments _nextValue_ and undefined).
        2.  Else,
            1.  Let _lhsRef_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _lhs_). (It may be evaluated repeatedly.)
            2.  If _lhsKind_ is assignment and the [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) of _lhs_ is web-compat, throw a ReferenceError exception.
            3.  If _lhsRef_ is an [abrupt completion](#sec-completion-record-specification-type), then
                1.  Let _status_ be _lhsRef_.
            4.  Else,
                1.  Let _status_ be [Completion](#sec-completion-ao)([PutValue](#sec-putvalue)(_lhsRef_._\[\[Value\]\]_, _nextValue_)).
    8.  Else,
        1.  [Assert](#assert): _lhsKind_ is lexical-binding.
        2.  [Assert](#assert): _lhs_ is a [ForDeclaration](#prod-ForDeclaration).
        3.  Let _iterationEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_oldEnv_).
        4.  Perform [ForDeclarationBindingInstantiation](#sec-runtime-semantics-fordeclarationbindinginstantiation) of _lhs_ with argument _iterationEnv_.
        5.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _iterationEnv_.
        6.  If _destructuring_ is true, then
            1.  Let _status_ be [Completion](#sec-completion-ao)([ForDeclarationBindingInitialization](#sec-runtime-semantics-fordeclarationbindinginitialization) of _lhs_ with arguments _nextValue_ and _iterationEnv_).
        7.  Else,
            1.  [Assert](#assert): _lhs_ binds a single name.
            2.  Let _lhsName_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _lhs_.
            3.  Let _lhsRef_ be ! [ResolveBinding](#sec-resolvebinding)(_lhsName_).
            4.  Let _status_ be [Completion](#sec-completion-ao)([InitializeReferencedBinding](#sec-initializereferencedbinding)(_lhsRef_, _nextValue_)).
    9.  If _status_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
        2.  If _iterationKind_ is enumerate, then
            1.  Return ? _status_.
        3.  Else,
            1.  [Assert](#assert): _iterationKind_ is iterate.
            2.  If _iteratorKind_ is async, return ? [AsyncIteratorClose](#sec-asynciteratorclose)(_iteratorRecord_, _status_).
            3.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _status_).
    10.  Let _result_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _stmt_).
    11.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
    12.  If [LoopContinues](#sec-loopcontinues)(_result_, _labelSet_) is false, then
         1.  Set _status_ to [Completion](#sec-completion-ao)([UpdateEmpty](#sec-updateempty)(_result_, _V_)).
         2.  If _iterationKind_ is enumerate, then
             1.  Return ? _status_.
         3.  Else,
             1.  [Assert](#assert): _iterationKind_ is iterate.
             2.  If _iteratorKind_ is async, return ? [AsyncIteratorClose](#sec-asynciteratorclose)(_iteratorRecord_, _status_).
             3.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _status_).
    13.  If _result_._\[\[Value\]\]_ is not empty, set _V_ to _result_._\[\[Value\]\]_.


# 14.7.5.8 Runtime Semantics: Evaluation

[BindingIdentifier](#prod-BindingIdentifier) : [Identifier](#prod-Identifier) yield await

1.  Let _bindingId_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Return ? [ResolveBinding](#sec-resolvebinding)(_bindingId_).


# 14.7.5.9 EnumerateObjectProperties ( _O_ )

The abstract operation EnumerateObjectProperties takes argument _O_ (an Object) and returns an [iterator object](#sec-iterator-interface). It performs the following steps when called:

1.  Return an [iterator object](#sec-iterator-interface) whose `next` method iterates over all the String-valued keys of enumerable properties of _O_. The [iterator object](#sec-iterator-interface) is never directly accessible to ECMAScript code. The mechanics and order of enumerating the properties is not specified but must conform to the rules specified below.

The [iterator](#sec-iterator-interface)'s `throw` and `return` methods are null and are never invoked. The [iterator](#sec-iterator-interface)'s `next` method processes object properties to determine whether the [property key](#property-key) should be returned as an [iterator](#sec-iterator-interface) value. Returned [property keys](#property-key) do not include keys that are Symbols. Properties of the target object may be deleted during enumeration. A property that is deleted before it is processed by the [iterator](#sec-iterator-interface)'s `next` method is ignored. If new properties are added to the target object during enumeration, the newly added properties are not guaranteed to be processed in the active enumeration. A [property name](#property-name) will be returned by the [iterator](#sec-iterator-interface)'s `next` method at most once in any enumeration.

Enumerating the properties of the target object includes enumerating properties of its prototype, and the prototype of the prototype, and so on, recursively; but a property of a prototype is not processed if it has the same name as a property that has already been processed by the [iterator](#sec-iterator-interface)'s `next` method. The values of _\[\[Enumerable\]\]_ attributes are not considered when determining if a property of a prototype object has already been processed. The enumerable [property names](#property-name) of prototype objects must be obtained by invoking EnumerateObjectProperties passing the prototype object as the argument. EnumerateObjectProperties must obtain the own [property keys](#property-key) of the target object by calling its _\[\[OwnPropertyKeys\]\]_ internal method. Property attributes of the target object must be obtained by calling its _\[\[GetOwnProperty\]\]_ internal method.

In addition, if neither _O_ nor any object in its prototype chain is a [Proxy exotic object](#proxy-exotic-object), [TypedArray](#typedarray), [module namespace exotic object](#module-namespace-exotic-object), or implementation provided [exotic object](#exotic-object), then the [iterator](#sec-iterator-interface) must behave as would the [iterator](#sec-iterator-interface) given by [CreateForInIterator](#sec-createforiniterator)(_O_) until one of the following occurs:

-   the value of the _\[\[Prototype\]\]_ internal slot of _O_ or an object in its prototype chain changes,
-   a property is removed from _O_ or an object in its prototype chain,
-   a property is added to an object in _O_'s prototype chain, or
-   the value of the _\[\[Enumerable\]\]_ attribute of a property of _O_ or an object in its prototype chain changes.

Note 1

ECMAScript implementations are not required to implement the algorithm in [14.7.5.10.2.1](#sec-%foriniteratorprototype%.next) directly. They may choose any implementation whose behaviour will not deviate from that algorithm unless one of the constraints in the previous paragraph is violated.

The following is an informative definition of an ECMAScript generator function that conforms to these rules:

```
function* EnumerateObjectProperties(obj) {
  const visited = new Set();
  for (const key of Reflect.ownKeys(obj)) {
    if (typeof key === "symbol") continue;
    const desc = Reflect.getOwnPropertyDescriptor(obj, key);
    if (desc) {
      visited.add(key);
      if (desc.enumerable) yield key;
    }
  }
  const proto = Reflect.getPrototypeOf(obj);
  if (proto === null) return;
  for (const protoKey of EnumerateObjectProperties(proto)) {
    if (!visited.has(protoKey)) yield protoKey;
  }
}
```

Note 2

The list of [exotic objects](#exotic-object) for which implementations are not required to match [CreateForInIterator](#sec-createforiniterator) was chosen because implementations historically differed in behaviour for those cases, and agreed in all others.


# 14.7.5.10 For-In Iterator Objects

A For-In Iterator is an object that represents a specific iteration over some specific object. For-In Iterator objects are never directly accessible to ECMAScript code; they exist solely to illustrate the behaviour of [EnumerateObjectProperties](#sec-enumerate-object-properties).


# 14.7.5.10.1 CreateForInIterator ( _object_ )

The abstract operation CreateForInIterator takes argument _object_ (an Object) and returns a [For-In Iterator](#sec-for-in-iterator-objects). It is used to create a [For-In Iterator object](#sec-for-in-iterator-objects) which iterates over the own and inherited enumerable string properties of _object_ in a specific order. It performs the following steps when called:

1.  Let _iterator_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%ForInIteratorPrototype%](#sec-%foriniteratorprototype%-object), « _\[\[Object\]\]_, _\[\[ObjectWasVisited\]\]_, _\[\[VisitedKeys\]\]_, _\[\[RemainingKeys\]\]_ »).
2.  Set _iterator_._\[\[Object\]\]_ to _object_.
3.  Set _iterator_._\[\[ObjectWasVisited\]\]_ to false.
4.  Set _iterator_._\[\[VisitedKeys\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
5.  Set _iterator_._\[\[RemainingKeys\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
6.  Return _iterator_.


# 14.7.5.10.2 The %ForInIteratorPrototype% Object

The %ForInIteratorPrototype% object:

-   has properties that are inherited by all [For-In Iterator objects](#sec-for-in-iterator-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   is never directly accessible to ECMAScript code.
-   has the following properties:


# 14.7.5.10.2.1 %ForInIteratorPrototype%.next ( )

1.  Let _O_ be the this value.
2.  [Assert](#assert): _O_ [is an Object](#sec-object-type).
3.  [Assert](#assert): _O_ has all of the internal slots of a [For-In Iterator](#sec-for-in-iterator-objects) instance ([14.7.5.10.3](#sec-properties-of-for-in-iterator-instances)).
4.  Let _object_ be _O_._\[\[Object\]\]_.
5.  Repeat,
    1.  If _O_._\[\[ObjectWasVisited\]\]_ is false, then
        1.  Let _keys_ be ? _object_._\[\[OwnPropertyKeys\]\]_().
        2.  For each element _key_ of _keys_, do
            1.  If _key_ [is a String](#sec-ecmascript-language-types-string-type), then
                1.  Append _key_ to _O_._\[\[RemainingKeys\]\]_.
        3.  Set _O_._\[\[ObjectWasVisited\]\]_ to true.
    2.  Repeat, while _O_._\[\[RemainingKeys\]\]_ is not empty,
        1.  Let _r_ be the first element of _O_._\[\[RemainingKeys\]\]_.
        2.  Remove the first element from _O_._\[\[RemainingKeys\]\]_.
        3.  If _O_._\[\[VisitedKeys\]\]_ does not contain _r_, then
            1.  Let _desc_ be ? _object_._\[\[GetOwnProperty\]\]_(_r_).
            2.  If _desc_ is not undefined, then
                1.  Append _r_ to _O_._\[\[VisitedKeys\]\]_.
                2.  If _desc_._\[\[Enumerable\]\]_ is true, return [CreateIteratorResultObject](#sec-createiterresultobject)(_r_, false).
    3.  Set _object_ to ? _object_._\[\[GetPrototypeOf\]\]_().
    4.  Set _O_._\[\[Object\]\]_ to _object_.
    5.  Set _O_._\[\[ObjectWasVisited\]\]_ to false.
    6.  If _object_ is null, return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).


# 14.7.5.10.3 Properties of For-In Iterator Instances

[For-In Iterator](#sec-for-in-iterator-objects) instances are [ordinary objects](#ordinary-object) that inherit properties from the [%ForInIteratorPrototype%](#sec-%foriniteratorprototype%-object) intrinsic object. [For-In Iterator](#sec-for-in-iterator-objects) instances are initially created with the internal slots listed in [Table 36](#table-for-in-iterator-instance-slots).

Table 36: Internal Slots of [For-In Iterator](#sec-for-in-iterator-objects) Instances

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[Object]]</var></td><td>an Object</td><td>The Object value whose properties are being iterated.</td></tr><tr><td><var class="field">[[ObjectWasVisited]]</var></td><td>a Boolean</td><td><emu-val>true</emu-val> if the <emu-xref href="#sec-iterator-interface" id="_ref_7211"><a href="#sec-iterator-interface">iterator</a></emu-xref> has invoked <var class="field">[[OwnPropertyKeys]]</var> on <var class="field">[[Object]]</var>, <emu-val>false</emu-val> otherwise.</td></tr><tr><td><var class="field">[[VisitedKeys]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_7212"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of Strings</td><td>The values that have been emitted by this <emu-xref href="#sec-iterator-interface" id="_ref_7213"><a href="#sec-iterator-interface">iterator</a></emu-xref> thus far.</td></tr><tr><td><var class="field">[[RemainingKeys]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_7214"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of Strings</td><td>The values remaining to be emitted for the current object, before iterating the properties of its prototype (if its prototype is not <emu-val>null</emu-val>).</td></tr></tbody></table>


# 14.8 The `continue` Statement


## Syntax

[ContinueStatement](#prod-ContinueStatement)\[Yield, Await\] : continue ; continue \[no [LineTerminator](#prod-LineTerminator) here\] [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] ;


# 14.8.1 Static Semantics: Early Errors

[ContinueStatement](#prod-ContinueStatement) : continue ; continue [LabelIdentifier](#prod-LabelIdentifier) ;

-   It is a Syntax Error if this [ContinueStatement](#prod-ContinueStatement) is not nested, directly or indirectly (but not crossing function or `static` initialization block boundaries), within an [IterationStatement](#prod-IterationStatement).


# 14.8.2 Runtime Semantics: Evaluation

[ContinueStatement](#prod-ContinueStatement) : continue ;

1.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: continue, _\[\[Value\]\]_: empty, _\[\[Target\]\]_: empty }.

[ContinueStatement](#prod-ContinueStatement) : continue [LabelIdentifier](#prod-LabelIdentifier) ;

1.  Let _label_ be the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier).
2.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: continue, _\[\[Value\]\]_: empty, _\[\[Target\]\]_: _label_ }.


# 14.9 The `break` Statement


## Syntax

[BreakStatement](#prod-BreakStatement)\[Yield, Await\] : break ; break \[no [LineTerminator](#prod-LineTerminator) here\] [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] ;


# 14.9.1 Static Semantics: Early Errors

[BreakStatement](#prod-BreakStatement) : break ;

-   It is a Syntax Error if this [BreakStatement](#prod-BreakStatement) is not nested, directly or indirectly (but not crossing function or `static` initialization block boundaries), within an [IterationStatement](#prod-IterationStatement) or a [SwitchStatement](#prod-SwitchStatement).


# 14.9.2 Runtime Semantics: Evaluation

[BreakStatement](#prod-BreakStatement) : break ;

1.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: break, _\[\[Value\]\]_: empty, _\[\[Target\]\]_: empty }.

[BreakStatement](#prod-BreakStatement) : break [LabelIdentifier](#prod-LabelIdentifier) ;

1.  Let _label_ be the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier).
2.  Return [Completion Record](#sec-completion-record-specification-type) { _\[\[Type\]\]_: break, _\[\[Value\]\]_: empty, _\[\[Target\]\]_: _label_ }.


# 14.10 The `return` Statement


## Syntax

[ReturnStatement](#prod-ReturnStatement)\[Yield, Await\] : return ; return \[no [LineTerminator](#prod-LineTerminator) here\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ; Note

A `return` statement causes a function to cease execution and, in most cases, returns a value to the caller. If [Expression](#prod-Expression) is omitted, the return value is undefined. Otherwise, the return value is the value of [Expression](#prod-Expression). A `return` statement may not actually return a value to the caller depending on surrounding context. For example, in a `try` block, a `return` statement's [Completion Record](#sec-completion-record-specification-type) may be replaced with another [Completion Record](#sec-completion-record-specification-type) during evaluation of the `finally` block.


# 14.10.1 Runtime Semantics: Evaluation

[ReturnStatement](#prod-ReturnStatement) : return ;

1.  Return [ReturnCompletion](#sec-returncompletion)(undefined).

[ReturnStatement](#prod-ReturnStatement) : return [Expression](#prod-Expression) ;

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _exprValue_ be ? [GetValue](#sec-getvalue)(_exprRef_).
3.  If [GetGeneratorKind](#sec-getgeneratorkind)() is async, set _exprValue_ to ? [Await](#await)(_exprValue_).
4.  Return [ReturnCompletion](#sec-returncompletion)(_exprValue_).

[Legacy](#sec-conformance)


# 14.11 The `with` Statement

Note 1

Use of the [Legacy](#sec-conformance) `with` statement is discouraged in new ECMAScript code. Consider alternatives that are permitted in both [strict mode code](#sec-strict-mode-code) and [non-strict code](#non-strict-code), such as [destructuring assignment](#sec-destructuring-assignment).


## Syntax

[WithStatement](#prod-WithStatement)\[Yield, Await, Return\] : with ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] Note 2

The `with` statement adds an [Object Environment Record](#sec-object-environment-records) for a computed object to the lexical environment of the [running execution context](#running-execution-context). It then executes a statement using this augmented lexical environment. Finally, it restores the original lexical environment.


# 14.11.1 Static Semantics: Early Errors

[WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

-   It is a Syntax Error if [IsStrict](#sec-isstrict)(this production) is true.
-   It is a Syntax Error if [IsLabelledFunction](#sec-islabelledfunction)([Statement](#prod-Statement)) is true.

Note

It is only necessary to apply the second rule if the extension specified in [B.3.1](#sec-labelled-function-declarations) is implemented.


# 14.11.2 Runtime Semantics: Evaluation

[WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _val_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _obj_ be ? [ToObject](#sec-toobject)(? [GetValue](#sec-getvalue)(_val_)).
3.  Let _oldEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
4.  Let _newEnv_ be [NewObjectEnvironment](#sec-newobjectenvironment)(_obj_, true, _oldEnv_).
5.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _newEnv_.
6.  Let _C_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Statement](#prod-Statement)).
7.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
8.  Return ? [UpdateEmpty](#sec-updateempty)(_C_, undefined).

Note

No matter how control leaves the embedded [Statement](#prod-Statement), whether normally or by some form of [abrupt completion](#sec-completion-record-specification-type) or exception, the LexicalEnvironment is always restored to its former state.


# 14.12 The `switch` Statement


## Syntax

[SwitchStatement](#prod-SwitchStatement)\[Yield, Await, Return\] : switch ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [CaseBlock](#prod-CaseBlock)\[?Yield, ?Await, ?Return\] [CaseBlock](#prod-CaseBlock)\[Yield, Await, Return\] : { [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\]opt } { [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\]opt [DefaultClause](#prod-DefaultClause)\[?Yield, ?Await, ?Return\] [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\]opt } [CaseClauses](#prod-CaseClauses)\[Yield, Await, Return\] : [CaseClause](#prod-CaseClause)\[?Yield, ?Await, ?Return\] [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\] [CaseClause](#prod-CaseClause)\[?Yield, ?Await, ?Return\] [CaseClause](#prod-CaseClause)\[Yield, Await, Return\] : case [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] : [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\]opt [DefaultClause](#prod-DefaultClause)\[Yield, Await, Return\] : default : [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\]opt


# 14.12.1 Static Semantics: Early Errors

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

-   It is a Syntax Error if the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [CaseBlock](#prod-CaseBlock) contains any duplicate entries, unless the [host](#host) is a web browser or otherwise supports [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), and both of the following conditions are true:
    
    -   [IsStrict](#sec-isstrict)(this production) is false.
    -   The duplicate entries are only bound by FunctionDeclarations.
-   It is a Syntax Error if any element of the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [CaseBlock](#prod-CaseBlock) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [CaseBlock](#prod-CaseBlock).


# 14.12.2 Runtime Semantics: CaseBlockEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CaseBlockEvaluation takes argument _input_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[CaseBlock](#prod-CaseBlock) : { }

1.  Return undefined.

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses) }

1.  Let _V_ be undefined.
2.  Let _A_ be the [List](#sec-list-and-record-specification-type) of [CaseClause](#prod-CaseClause) items in [CaseClauses](#prod-CaseClauses), in source text order.
3.  Let _found_ be false.
4.  For each [CaseClause](#prod-CaseClause) _C_ of _A_, do
    1.  If _found_ is false, then
        1.  Set _found_ to ? [CaseClauseIsSelected](#sec-runtime-semantics-caseclauseisselected)(_C_, _input_).
    2.  If _found_ is true, then
        1.  Let _R_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _C_).
        2.  If _R_._\[\[Value\]\]_ is not empty, set _V_ to _R_._\[\[Value\]\]_.
        3.  If _R_ is an [abrupt completion](#sec-completion-record-specification-type), return ? [UpdateEmpty](#sec-updateempty)(_R_, _V_).
5.  Return _V_.

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  Let _V_ be undefined.
2.  If the first [CaseClauses](#prod-CaseClauses) is present, then
    1.  Let _A_ be the [List](#sec-list-and-record-specification-type) of [CaseClause](#prod-CaseClause) items in the first [CaseClauses](#prod-CaseClauses), in source text order.
3.  Else,
    1.  Let _A_ be a new empty [List](#sec-list-and-record-specification-type).
4.  Let _found_ be false.
5.  For each [CaseClause](#prod-CaseClause) _C_ of _A_, do
    1.  If _found_ is false, then
        1.  Set _found_ to ? [CaseClauseIsSelected](#sec-runtime-semantics-caseclauseisselected)(_C_, _input_).
    2.  If _found_ is true, then
        1.  Let _R_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _C_).
        2.  If _R_._\[\[Value\]\]_ is not empty, set _V_ to _R_._\[\[Value\]\]_.
        3.  If _R_ is an [abrupt completion](#sec-completion-record-specification-type), return ? [UpdateEmpty](#sec-updateempty)(_R_, _V_).
6.  Let _foundInB_ be false.
7.  If the second [CaseClauses](#prod-CaseClauses) is present, then
    1.  Let _B_ be the [List](#sec-list-and-record-specification-type) of [CaseClause](#prod-CaseClause) items in the second [CaseClauses](#prod-CaseClauses), in source text order.
8.  Else,
    1.  Let _B_ be a new empty [List](#sec-list-and-record-specification-type).
9.  If _found_ is false, then
    1.  For each [CaseClause](#prod-CaseClause) _C_ of _B_, do
        1.  If _foundInB_ is false, then
            1.  Set _foundInB_ to ? [CaseClauseIsSelected](#sec-runtime-semantics-caseclauseisselected)(_C_, _input_).
        2.  If _foundInB_ is true, then
            1.  Let _R_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [CaseClause](#prod-CaseClause) _C_).
            2.  If _R_._\[\[Value\]\]_ is not empty, set _V_ to _R_._\[\[Value\]\]_.
            3.  If _R_ is an [abrupt completion](#sec-completion-record-specification-type), return ? [UpdateEmpty](#sec-updateempty)(_R_, _V_).
10.  If _foundInB_ is true, return _V_.
11.  Let _defaultR_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [DefaultClause](#prod-DefaultClause)).
12.  If _defaultR_._\[\[Value\]\]_ is not empty, set _V_ to _defaultR_._\[\[Value\]\]_.
13.  If _defaultR_ is an [abrupt completion](#sec-completion-record-specification-type), return ? [UpdateEmpty](#sec-updateempty)(_defaultR_, _V_).
14.  NOTE: The following is another complete iteration of the second [CaseClauses](#prod-CaseClauses).
15.  For each [CaseClause](#prod-CaseClause) _C_ of _B_, do
     1.  Let _R_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [CaseClause](#prod-CaseClause) _C_).
     2.  If _R_._\[\[Value\]\]_ is not empty, set _V_ to _R_._\[\[Value\]\]_.
     3.  If _R_ is an [abrupt completion](#sec-completion-record-specification-type), return ? [UpdateEmpty](#sec-updateempty)(_R_, _V_).
16.  Return _V_.


# 14.12.3 CaseClauseIsSelected ( _C_, _input_ )

The abstract operation CaseClauseIsSelected takes arguments _C_ (a [CaseClause](#prod-CaseClause) [Parse Node](#sec-syntactic-grammar)) and _input_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or an [abrupt completion](#sec-completion-record-specification-type). It determines whether _C_ matches _input_. It performs the following steps when called:

1.  [Assert](#assert): _C_ is an instance of the production [CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt .
2.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of the [Expression](#prod-Expression) of _C_.
3.  Let _clauseSelector_ be ? [GetValue](#sec-getvalue)(_exprRef_).
4.  Return [IsStrictlyEqual](#sec-isstrictlyequal)(_input_, _clauseSelector_).

Note

This operation does not execute _C_'s [StatementList](#prod-StatementList) (if any). The [CaseBlock](#prod-CaseBlock) algorithm uses its return value to determine which [StatementList](#prod-StatementList) to start executing.


# 14.12.4 Runtime Semantics: Evaluation

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _switchValue_ be ? [GetValue](#sec-getvalue)(_exprRef_).
3.  Let _oldEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
4.  Let _blockEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_oldEnv_).
5.  Perform [BlockDeclarationInstantiation](#sec-blockdeclarationinstantiation)([CaseBlock](#prod-CaseBlock), _blockEnv_).
6.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _blockEnv_.
7.  Let _R_ be [Completion](#sec-completion-ao)([CaseBlockEvaluation](#sec-runtime-semantics-caseblockevaluation) of [CaseBlock](#prod-CaseBlock) with argument _switchValue_).
8.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
9.  Return _R_.

Note

No matter how control leaves the [SwitchStatement](#prod-SwitchStatement) the LexicalEnvironment is always restored to its former state.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) :

1.  Return empty.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)

1.  Return ? [Evaluation](#sec-evaluation) of [StatementList](#prod-StatementList).

[DefaultClause](#prod-DefaultClause) : default :

1.  Return empty.

[DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)

1.  Return ? [Evaluation](#sec-evaluation) of [StatementList](#prod-StatementList).


# 14.13 Labelled Statements


## Syntax

[LabelledStatement](#prod-LabelledStatement)\[Yield, Await, Return\] : [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] : [LabelledItem](#prod-LabelledItem)\[?Yield, ?Await, ?Return\] [LabelledItem](#prod-LabelledItem)\[Yield, Await, Return\] : [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] Note

A [Statement](#prod-Statement) may be prefixed by a label. Labelled statements are only used in conjunction with labelled `break` and `continue` statements. ECMAScript has no `goto` statement. A [Statement](#prod-Statement) can be part of a [LabelledStatement](#prod-LabelledStatement), which itself can be part of a [LabelledStatement](#prod-LabelledStatement), and so on. The labels introduced this way are collectively referred to as the “current label set” when describing the semantics of individual statements.


# 14.13.1 Static Semantics: Early Errors

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

-   It is a Syntax Error if any source text is matched by this production, unless that source text is [non-strict code](#non-strict-code) and the [host](#host) is a web browser or otherwise supports [Labelled Function Declarations](#sec-labelled-function-declarations).


# 14.13.2 Static Semantics: IsLabelledFunction ( _stmt_ )

The abstract operation IsLabelledFunction takes argument _stmt_ (a [Statement](#prod-Statement) [Parse Node](#sec-syntactic-grammar)) and returns a Boolean. It performs the following steps when called:

1.  If _stmt_ is not a [LabelledStatement](#prod-LabelledStatement), return false.
2.  Let _item_ be the [LabelledItem](#prod-LabelledItem) of _stmt_.
3.  If _item_ is [LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration) , return true.
4.  Let _subStmt_ be the [Statement](#prod-Statement) of _item_.
5.  Return [IsLabelledFunction](#sec-islabelledfunction)(_subStmt_).


# 14.13.3 Runtime Semantics: Evaluation

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return ? [LabelledEvaluation](#sec-runtime-semantics-labelledevaluation) of this [LabelledStatement](#prod-LabelledStatement) with argument « ».


# 14.13.4 Runtime Semantics: LabelledEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) LabelledEvaluation takes argument _labelSet_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an [ECMAScript language value](#sec-ecmascript-language-types) or empty, or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[BreakableStatement](#prod-BreakableStatement) : [IterationStatement](#prod-IterationStatement)

1.  Let _stmtResult_ be [Completion](#sec-completion-ao)([LoopEvaluation](#sec-runtime-semantics-loopevaluation) of [IterationStatement](#prod-IterationStatement) with argument _labelSet_).
2.  If _stmtResult_ is a [break completion](#sec-completion-record-specification-type), then
    1.  If _stmtResult_._\[\[Target\]\]_ is empty, then
        1.  If _stmtResult_._\[\[Value\]\]_ is empty, set _stmtResult_ to [NormalCompletion](#sec-normalcompletion)(undefined).
        2.  Else, set _stmtResult_ to [NormalCompletion](#sec-normalcompletion)(_stmtResult_._\[\[Value\]\]_).
3.  Return ? _stmtResult_.

[BreakableStatement](#prod-BreakableStatement) : [SwitchStatement](#prod-SwitchStatement)

1.  Let _stmtResult_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [SwitchStatement](#prod-SwitchStatement)).
2.  If _stmtResult_ is a [break completion](#sec-completion-record-specification-type), then
    1.  If _stmtResult_._\[\[Target\]\]_ is empty, then
        1.  If _stmtResult_._\[\[Value\]\]_ is empty, set _stmtResult_ to [NormalCompletion](#sec-normalcompletion)(undefined).
        2.  Else, set _stmtResult_ to [NormalCompletion](#sec-normalcompletion)(_stmtResult_._\[\[Value\]\]_).
3.  Return ? _stmtResult_.

Note 1

A [BreakableStatement](#prod-BreakableStatement) is one that can be exited via an unlabelled [BreakStatement](#prod-BreakStatement).

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Let _label_ be the [StringValue](#sec-static-semantics-stringvalue) of [LabelIdentifier](#prod-LabelIdentifier).
2.  Let _newLabelSet_ be the [list-concatenation](#list-concatenation) of _labelSet_ and « _label_ ».
3.  Let _stmtResult_ be [Completion](#sec-completion-ao)([LabelledEvaluation](#sec-runtime-semantics-labelledevaluation) of [LabelledItem](#prod-LabelledItem) with argument _newLabelSet_).
4.  If _stmtResult_ is a [break completion](#sec-completion-record-specification-type) and _stmtResult_._\[\[Target\]\]_ is _label_, then
    1.  Set _stmtResult_ to [NormalCompletion](#sec-normalcompletion)(_stmtResult_._\[\[Value\]\]_).
5.  Return ? _stmtResult_.

[LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration)

1.  Return ? [Evaluation](#sec-evaluation) of [FunctionDeclaration](#prod-FunctionDeclaration).

[Statement](#prod-Statement) : [BlockStatement](#prod-BlockStatement) [VariableStatement](#prod-VariableStatement) [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement) [IfStatement](#prod-IfStatement) [ContinueStatement](#prod-ContinueStatement) [BreakStatement](#prod-BreakStatement) [ReturnStatement](#prod-ReturnStatement) [WithStatement](#prod-WithStatement) [ThrowStatement](#prod-ThrowStatement) [TryStatement](#prod-TryStatement) [DebuggerStatement](#prod-DebuggerStatement)

1.  Return ? [Evaluation](#sec-evaluation) of [Statement](#prod-Statement).

Note 2

The only two productions of [Statement](#prod-Statement) which have special semantics for LabelledEvaluation are [BreakableStatement](#prod-BreakableStatement) and [LabelledStatement](#prod-LabelledStatement).


# 14.14 The `throw` Statement


## Syntax

[ThrowStatement](#prod-ThrowStatement)\[Yield, Await\] : throw \[no [LineTerminator](#prod-LineTerminator) here\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ;


# 14.14.1 Runtime Semantics: Evaluation

[ThrowStatement](#prod-ThrowStatement) : throw [Expression](#prod-Expression) ;

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [Expression](#prod-Expression).
2.  Let _exprValue_ be ? [GetValue](#sec-getvalue)(_exprRef_).
3.  Return [ThrowCompletion](#sec-throwcompletion)(_exprValue_).


# 14.15 The `try` Statement


## Syntax

[TryStatement](#prod-TryStatement)\[Yield, Await, Return\] : try [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Catch](#prod-Catch)\[?Yield, ?Await, ?Return\] try [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Finally](#prod-Finally)\[?Yield, ?Await, ?Return\] try [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Catch](#prod-Catch)\[?Yield, ?Await, ?Return\] [Finally](#prod-Finally)\[?Yield, ?Await, ?Return\] [Catch](#prod-Catch)\[Yield, Await, Return\] : catch ( [CatchParameter](#prod-CatchParameter)\[?Yield, ?Await\] ) [Block](#prod-Block)\[?Yield, ?Await, ?Return\] catch [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Finally](#prod-Finally)\[Yield, Await, Return\] : finally [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [CatchParameter](#prod-CatchParameter)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] Note

The `try` statement encloses a block of code in which an exceptional condition can occur, such as a runtime error or a `throw` statement. The `catch` clause provides the exception-handling code. When a catch clause catches an exception, its [CatchParameter](#prod-CatchParameter) is bound to that exception.


# 14.15.1 Static Semantics: Early Errors

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [CatchParameter](#prod-CatchParameter) contains any duplicate elements.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [CatchParameter](#prod-CatchParameter) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [Block](#prod-Block).
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [CatchParameter](#prod-CatchParameter) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Block](#prod-Block), unless [CatchParameter](#prod-CatchParameter) is [CatchParameter](#prod-CatchParameter) : [BindingIdentifier](#prod-BindingIdentifier) and the [host](#host) is a web browser or otherwise supports [VariableStatements in Catch Blocks](#sec-variablestatements-in-catch-blocks).


# 14.15.2 Runtime Semantics: CatchClauseEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CatchClauseEvaluation takes argument _thrownValue_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an [ECMAScript language value](#sec-ecmascript-language-types) or empty, or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

1.  Let _oldEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
2.  Let _catchEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_oldEnv_).
3.  For each element _argName_ of the [BoundNames](#sec-static-semantics-boundnames) of [CatchParameter](#prod-CatchParameter), do
    1.  Perform ! _catchEnv_.CreateMutableBinding(_argName_, false).
4.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _catchEnv_.
5.  Let _status_ be [Completion](#sec-completion-ao)([BindingInitialization](#sec-runtime-semantics-bindinginitialization) of [CatchParameter](#prod-CatchParameter) with arguments _thrownValue_ and _catchEnv_).
6.  If _status_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
    2.  Return ? _status_.
7.  Let _B_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Block](#prod-Block)).
8.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _oldEnv_.
9.  Return ? _B_.

[Catch](#prod-Catch) : catch [Block](#prod-Block)

1.  Return ? [Evaluation](#sec-evaluation) of [Block](#prod-Block).

Note

No matter how control leaves the [Block](#prod-Block) the LexicalEnvironment is always restored to its former state.


# 14.15.3 Runtime Semantics: Evaluation

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch)

1.  Let _B_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Block](#prod-Block)).
2.  If _B_ is a [throw completion](#sec-completion-record-specification-type), let _C_ be [Completion](#sec-completion-ao)([CatchClauseEvaluation](#sec-runtime-semantics-catchclauseevaluation) of [Catch](#prod-Catch) with argument _B_._\[\[Value\]\]_).
3.  Else, let _C_ be _B_.
4.  Return ? [UpdateEmpty](#sec-updateempty)(_C_, undefined).

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Finally](#prod-Finally)

1.  Let _B_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Block](#prod-Block)).
2.  Let _F_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Finally](#prod-Finally)).
3.  If _F_ is a [normal completion](#sec-completion-record-specification-type), set _F_ to _B_.
4.  Return ? [UpdateEmpty](#sec-updateempty)(_F_, undefined).

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch) [Finally](#prod-Finally)

1.  Let _B_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Block](#prod-Block)).
2.  If _B_ is a [throw completion](#sec-completion-record-specification-type), let _C_ be [Completion](#sec-completion-ao)([CatchClauseEvaluation](#sec-runtime-semantics-catchclauseevaluation) of [Catch](#prod-Catch) with argument _B_._\[\[Value\]\]_).
3.  Else, let _C_ be _B_.
4.  Let _F_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [Finally](#prod-Finally)).
5.  If _F_ is a [normal completion](#sec-completion-record-specification-type), set _F_ to _C_.
6.  Return ? [UpdateEmpty](#sec-updateempty)(_F_, undefined).


# 14.16 The `debugger` Statement


## Syntax

[DebuggerStatement](#prod-DebuggerStatement) : debugger ;


# 14.16.1 Runtime Semantics: Evaluation

Note

Evaluating a [DebuggerStatement](#prod-DebuggerStatement) may allow an implementation to cause a breakpoint when run under a debugger. If a debugger is not present or active this statement has no observable effect.

[DebuggerStatement](#prod-DebuggerStatement) : debugger ;

1.  If an [implementation-defined](#implementation-defined) debugging facility is available and enabled, then
    1.  Perform an [implementation-defined](#implementation-defined) debugging action.
    2.  Return a new [implementation-defined](#implementation-defined) [Completion Record](#sec-completion-record-specification-type).
2.  Else,
    1.  Return empty.


# 15 ECMAScript Language: Functions and Classes

Note

Various ECMAScript language elements cause the creation of ECMAScript [function objects](#function-object) ([10.2](#sec-ecmascript-function-objects)). [Evaluation](#sec-evaluation) of such functions starts with the execution of their _\[\[Call\]\]_ internal method ([10.2.1](#sec-ecmascript-function-objects-call-thisargument-argumentslist)).


# 15.1 Parameter Lists


## Syntax

[UniqueFormalParameters](#prod-UniqueFormalParameters)\[Yield, Await\] : [FormalParameters](#prod-FormalParameters)\[?Yield, ?Await\] [FormalParameters](#prod-FormalParameters)\[Yield, Await\] : \[empty\] [FunctionRestParameter](#prod-FunctionRestParameter)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] , [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] , [FunctionRestParameter](#prod-FunctionRestParameter)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[Yield, Await\] : [FormalParameter](#prod-FormalParameter)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] , [FormalParameter](#prod-FormalParameter)\[?Yield, ?Await\] [FunctionRestParameter](#prod-FunctionRestParameter)\[Yield, Await\] : [BindingRestElement](#prod-BindingRestElement)\[?Yield, ?Await\] [FormalParameter](#prod-FormalParameter)\[Yield, Await\] : [BindingElement](#prod-BindingElement)\[?Yield, ?Await\]


# 15.1.1 Static Semantics: Early Errors

[UniqueFormalParameters](#prod-UniqueFormalParameters) : [FormalParameters](#prod-FormalParameters)

-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameters](#prod-FormalParameters) contains any duplicate elements.

[FormalParameters](#prod-FormalParameters) : [FormalParameterList](#prod-FormalParameterList)

-   It is a Syntax Error if [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [FormalParameterList](#prod-FormalParameterList) is false and the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameterList](#prod-FormalParameterList) contains any duplicate elements.

Note

Multiple occurrences of the same [BindingIdentifier](#prod-BindingIdentifier) in a [FormalParameterList](#prod-FormalParameterList) is only allowed for functions which have simple parameter lists and which are not defined in [strict mode code](#sec-strict-mode-code).


# 15.1.2 Static Semantics: ContainsExpression

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ContainsExpression takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { } { [BindingRestProperty](#prod-BindingRestProperty) }

1.  Return false.

[ObjectBindingPattern](#prod-ObjectBindingPattern) : { [BindingPropertyList](#prod-BindingPropertyList) , [BindingRestProperty](#prod-BindingRestProperty) }

1.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingPropertyList](#prod-BindingPropertyList).

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[Elision](#prod-Elision)opt \]

1.  Return false.

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement) \]

1.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingRestElement](#prod-BindingRestElement).

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[BindingElementList](#prod-BindingElementList) , [Elision](#prod-Elision)opt \]

1.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingElementList](#prod-BindingElementList).

[ArrayBindingPattern](#prod-ArrayBindingPattern) : \[[BindingElementList](#prod-BindingElementList) , [Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement) \]

1.  Let _has_ be [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingElementList](#prod-BindingElementList).
2.  If _has_ is true, return true.
3.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingRestElement](#prod-BindingRestElement).

[BindingPropertyList](#prod-BindingPropertyList) : [BindingPropertyList](#prod-BindingPropertyList) , [BindingProperty](#prod-BindingProperty)

1.  Let _has_ be [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingPropertyList](#prod-BindingPropertyList).
2.  If _has_ is true, return true.
3.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingProperty](#prod-BindingProperty).

[BindingElementList](#prod-BindingElementList) : [BindingElementList](#prod-BindingElementList) , [BindingElisionElement](#prod-BindingElisionElement)

1.  Let _has_ be [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingElementList](#prod-BindingElementList).
2.  If _has_ is true, return true.
3.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingElisionElement](#prod-BindingElisionElement).

[BindingElisionElement](#prod-BindingElisionElement) : [Elision](#prod-Elision)opt [BindingElement](#prod-BindingElement)

1.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingElement](#prod-BindingElement).

[BindingProperty](#prod-BindingProperty) : [PropertyName](#prod-PropertyName) : [BindingElement](#prod-BindingElement)

1.  Let _has_ be [IsComputedPropertyKey](#sec-static-semantics-iscomputedpropertykey) of [PropertyName](#prod-PropertyName).
2.  If _has_ is true, return true.
3.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingElement](#prod-BindingElement).

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)

1.  Return true.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return false.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)

1.  Return true.

[BindingRestElement](#prod-BindingRestElement) : ... [BindingIdentifier](#prod-BindingIdentifier)

1.  Return false.

[BindingRestElement](#prod-BindingRestElement) : ... [BindingPattern](#prod-BindingPattern)

1.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [BindingPattern](#prod-BindingPattern).

[FormalParameters](#prod-FormalParameters) : \[empty\]

1.  Return false.

[FormalParameters](#prod-FormalParameters) : [FormalParameterList](#prod-FormalParameterList) , [FunctionRestParameter](#prod-FunctionRestParameter)

1.  If [ContainsExpression](#sec-static-semantics-containsexpression) of [FormalParameterList](#prod-FormalParameterList) is true, return true.
2.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [FunctionRestParameter](#prod-FunctionRestParameter).

[FormalParameterList](#prod-FormalParameterList) : [FormalParameterList](#prod-FormalParameterList) , [FormalParameter](#prod-FormalParameter)

1.  If [ContainsExpression](#sec-static-semantics-containsexpression) of [FormalParameterList](#prod-FormalParameterList) is true, return true.
2.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of [FormalParameter](#prod-FormalParameter).

[ArrowParameters](#prod-ArrowParameters) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return false.

[ArrowParameters](#prod-ArrowParameters) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _formals_ be the [ArrowFormalParameters](#prod-ArrowFormalParameters) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return [ContainsExpression](#sec-static-semantics-containsexpression) of _formals_.

[AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return false.


# 15.1.3 Static Semantics: IsSimpleParameterList

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsSimpleParameterList takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern)

1.  Return false.

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)

1.  Return false.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return true.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)

1.  Return false.

[FormalParameters](#prod-FormalParameters) : \[empty\]

1.  Return true.

[FormalParameters](#prod-FormalParameters) : [FunctionRestParameter](#prod-FunctionRestParameter)

1.  Return false.

[FormalParameters](#prod-FormalParameters) : [FormalParameterList](#prod-FormalParameterList) , [FunctionRestParameter](#prod-FunctionRestParameter)

1.  Return false.

[FormalParameterList](#prod-FormalParameterList) : [FormalParameterList](#prod-FormalParameterList) , [FormalParameter](#prod-FormalParameter)

1.  If [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [FormalParameterList](#prod-FormalParameterList) is false, return false.
2.  Return [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [FormalParameter](#prod-FormalParameter).

[FormalParameter](#prod-FormalParameter) : [BindingElement](#prod-BindingElement)

1.  Return [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [BindingElement](#prod-BindingElement).

[ArrowParameters](#prod-ArrowParameters) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return true.

[ArrowParameters](#prod-ArrowParameters) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _formals_ be the [ArrowFormalParameters](#prod-ArrowFormalParameters) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of _formals_.

[AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return true.

[CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) : [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments)

1.  Let _head_ be the [AsyncArrowHead](#prod-AsyncArrowHead) that is [covered](#sec-syntactic-grammar) by [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead).
2.  Return [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of _head_.


# 15.1.4 Static Semantics: HasInitializer

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) HasInitializer takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern)

1.  Return false.

[BindingElement](#prod-BindingElement) : [BindingPattern](#prod-BindingPattern) [Initializer](#prod-Initializer)

1.  Return true.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return false.

[SingleNameBinding](#prod-SingleNameBinding) : [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer)

1.  Return true.

[FormalParameterList](#prod-FormalParameterList) : [FormalParameterList](#prod-FormalParameterList) , [FormalParameter](#prod-FormalParameter)

1.  If [HasInitializer](#sec-static-semantics-hasinitializer) of [FormalParameterList](#prod-FormalParameterList) is true, return true.
2.  Return [HasInitializer](#sec-static-semantics-hasinitializer) of [FormalParameter](#prod-FormalParameter).


# 15.1.5 Static Semantics: ExpectedArgumentCount

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ExpectedArgumentCount takes no arguments and returns a non-negative [integer](#integer). It is defined piecewise over the following productions:

[FormalParameters](#prod-FormalParameters) : \[empty\] [FunctionRestParameter](#prod-FunctionRestParameter)

1.  Return 0.

[FormalParameters](#prod-FormalParameters) : [FormalParameterList](#prod-FormalParameterList) , [FunctionRestParameter](#prod-FunctionRestParameter)

1.  Return the [ExpectedArgumentCount](#sec-static-semantics-expectedargumentcount) of [FormalParameterList](#prod-FormalParameterList).

Note

The ExpectedArgumentCount of a [FormalParameterList](#prod-FormalParameterList) is the number of [FormalParameters](#prod-FormalParameters) to the left of either the rest parameter or the first [FormalParameter](#prod-FormalParameter) with an Initializer. A [FormalParameter](#prod-FormalParameter) without an initializer is allowed after the first parameter with an initializer but such parameters are considered to be optional with undefined as their default value.

[FormalParameterList](#prod-FormalParameterList) : [FormalParameter](#prod-FormalParameter)

1.  If [HasInitializer](#sec-static-semantics-hasinitializer) of [FormalParameter](#prod-FormalParameter) is true, return 0.
2.  Return 1.

[FormalParameterList](#prod-FormalParameterList) : [FormalParameterList](#prod-FormalParameterList) , [FormalParameter](#prod-FormalParameter)

1.  Let _count_ be the [ExpectedArgumentCount](#sec-static-semantics-expectedargumentcount) of [FormalParameterList](#prod-FormalParameterList).
2.  If [HasInitializer](#sec-static-semantics-hasinitializer) of [FormalParameterList](#prod-FormalParameterList) is true or [HasInitializer](#sec-static-semantics-hasinitializer) of [FormalParameter](#prod-FormalParameter) is true, return _count_.
3.  Return _count_ + 1.

[ArrowParameters](#prod-ArrowParameters) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return 1.

[ArrowParameters](#prod-ArrowParameters) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _formals_ be the [ArrowFormalParameters](#prod-ArrowFormalParameters) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return the [ExpectedArgumentCount](#sec-static-semantics-expectedargumentcount) of _formals_.

[PropertySetParameterList](#prod-PropertySetParameterList) : [FormalParameter](#prod-FormalParameter)

1.  If [HasInitializer](#sec-static-semantics-hasinitializer) of [FormalParameter](#prod-FormalParameter) is true, return 0.
2.  Return 1.

[AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) : [BindingIdentifier](#prod-BindingIdentifier)

1.  Return 1.


# 15.2 Function Definitions


## Syntax

[FunctionDeclaration](#prod-FunctionDeclaration)\[Yield, Await, Default\] : function [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } \[+Default\] function ( [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier)\[~Yield, ~Await\]opt ( [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [FunctionBody](#prod-FunctionBody)\[Yield, Await\] : [FunctionStatementList](#prod-FunctionStatementList)\[?Yield, ?Await\] [FunctionStatementList](#prod-FunctionStatementList)\[Yield, Await\] : [StatementList](#prod-StatementList)\[?Yield, ?Await, +Return\]opt


# 15.2.1 Static Semantics: Early Errors

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

-   If [IsStrict](#sec-isstrict)([FormalParameters](#prod-FormalParameters)) is true, the Early Error rules for [UniqueFormalParameters](#prod-UniqueFormalParameters) : [FormalParameters](#prod-FormalParameters) are applied.
-   If [BindingIdentifier](#prod-BindingIdentifier) is present and [IsStrict](#sec-isstrict)([BindingIdentifier](#prod-BindingIdentifier)) is true, it is a Syntax Error if the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier) is either "eval" or "arguments".
-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [FunctionBody](#prod-FunctionBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [FormalParameters](#prod-FormalParameters) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameters](#prod-FormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [FunctionBody](#prod-FunctionBody).
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [FunctionBody](#prod-FunctionBody) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.
-   It is a Syntax Error if [FunctionBody](#prod-FunctionBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.

Note

The [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of a [FunctionBody](#prod-FunctionBody) does not include identifiers bound using var or function declarations.

[FunctionBody](#prod-FunctionBody) : [FunctionStatementList](#prod-FunctionStatementList)

-   It is a Syntax Error if the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [FunctionStatementList](#prod-FunctionStatementList) contains any duplicate entries.
-   It is a Syntax Error if any element of the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [FunctionStatementList](#prod-FunctionStatementList) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [FunctionStatementList](#prod-FunctionStatementList).
-   It is a Syntax Error if [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [FunctionStatementList](#prod-FunctionStatementList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [FunctionStatementList](#prod-FunctionStatementList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [FunctionStatementList](#prod-FunctionStatementList) with arguments « » and « » is true.


# 15.2.2 Static Semantics: FunctionBodyContainsUseStrict

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) FunctionBodyContainsUseStrict takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[FunctionBody](#prod-FunctionBody) : [FunctionStatementList](#prod-FunctionStatementList)

1.  If the [Directive Prologue](#directive-prologue) of [FunctionBody](#prod-FunctionBody) contains a [Use Strict Directive](#use-strict-directive), return true; otherwise return false.


# 15.2.3 Runtime Semantics: EvaluateFunctionBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateFunctionBody takes arguments _functionObject_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [return completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[FunctionBody](#prod-FunctionBody) : [FunctionStatementList](#prod-FunctionStatementList)

1.  Perform ? [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)(_functionObject_, _argumentsList_).
2.  Perform ? [Evaluation](#sec-evaluation) of [FunctionStatementList](#prod-FunctionStatementList).
3.  NOTE: If the previous step resulted in a [normal completion](#sec-completion-record-specification-type), then evaluation finished by proceeding past the end of the [FunctionStatementList](#prod-FunctionStatementList).
4.  Return [ReturnCompletion](#sec-returncompletion)(undefined).


# 15.2.4 Runtime Semantics: InstantiateOrdinaryFunctionObject

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateOrdinaryFunctionObject takes arguments _env_ (an [Environment Record](#sec-environment-records)) and _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Let _name_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [FunctionDeclaration](#prod-FunctionDeclaration).
3.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [FunctionBody](#prod-FunctionBody), non-lexical-this, _env_, _privateEnv_).
4.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, _name_).
5.  Perform [MakeConstructor](#sec-makeconstructor)(_F_).
6.  Return _F_.

[FunctionDeclaration](#prod-FunctionDeclaration) : function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [FunctionDeclaration](#prod-FunctionDeclaration).
2.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [FunctionBody](#prod-FunctionBody), non-lexical-this, _env_, _privateEnv_).
3.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, "default").
4.  Perform [MakeConstructor](#sec-makeconstructor)(_F_).
5.  Return _F_.

Note

An anonymous [FunctionDeclaration](#prod-FunctionDeclaration) can only occur as part of an `export default` declaration, and its function code is therefore always [strict mode code](#sec-strict-mode-code).


# 15.2.5 Runtime Semantics: InstantiateOrdinaryFunctionExpression

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateOrdinaryFunctionExpression takes optional argument _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[FunctionExpression](#prod-FunctionExpression) : function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  If _name_ is not present, set _name_ to "".
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [FunctionExpression](#prod-FunctionExpression).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [FunctionBody](#prod-FunctionBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
7.  Perform [MakeConstructor](#sec-makeconstructor)(_closure_).
8.  Return _closure_.

[FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  [Assert](#assert): _name_ is not present.
2.  Set _name_ to the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
3.  Let _outerEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
4.  Let _funcEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_outerEnv_).
5.  Perform ! _funcEnv_.CreateImmutableBinding(_name_, false).
6.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
7.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [FunctionExpression](#prod-FunctionExpression).
8.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [FunctionBody](#prod-FunctionBody), non-lexical-this, _funcEnv_, _privateEnv_).
9.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
10.  Perform [MakeConstructor](#sec-makeconstructor)(_closure_).
11.  Perform ! _funcEnv_.InitializeBinding(_name_, _closure_).
12.  Return _closure_.

Note

The [BindingIdentifier](#prod-BindingIdentifier) in a [FunctionExpression](#prod-FunctionExpression) can be referenced from inside the [FunctionExpression](#prod-FunctionExpression)'s [FunctionBody](#prod-FunctionBody) to allow the function to call itself recursively. However, unlike in a [FunctionDeclaration](#prod-FunctionDeclaration), the [BindingIdentifier](#prod-BindingIdentifier) in a [FunctionExpression](#prod-FunctionExpression) cannot be referenced from and does not affect the scope enclosing the [FunctionExpression](#prod-FunctionExpression).


# 15.2.6 Runtime Semantics: Evaluation

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return empty.

Note 1

An alternative semantics is provided by [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics) at step [32.a.i.2.c](#step-functiondeclarationinstantiation-alt-funcdecl-eval) of [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation), step [12.b.ii.2.a.ii.iii](#step-globaldeclarationinstantiation-alt-funcdecl-eval) of [GlobalDeclarationInstantiation](#sec-globaldeclarationinstantiation), and step [13.b.ii.7.b](#step-evaldeclarationinstantiation-alt-funcdecl-eval) of [EvalDeclarationInstantiation](#sec-evaldeclarationinstantiation).

[FunctionDeclaration](#prod-FunctionDeclaration) : function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return empty.

[FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return [InstantiateOrdinaryFunctionExpression](#sec-runtime-semantics-instantiateordinaryfunctionexpression) of [FunctionExpression](#prod-FunctionExpression).

Note 2

A "prototype" property is automatically created for every function defined using a [FunctionDeclaration](#prod-FunctionDeclaration) or [FunctionExpression](#prod-FunctionExpression), to allow for the possibility that the function will be used as a [constructor](#constructor).

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\]

1.  Return undefined.


# 15.3 Arrow Function Definitions


## Syntax

[ArrowFunction](#prod-ArrowFunction)\[In, Yield, Await\] : [ArrowParameters](#prod-ArrowParameters)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [ConciseBody](#prod-ConciseBody)\[?In\] [ArrowParameters](#prod-ArrowParameters)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\] [ConciseBody](#prod-ConciseBody)\[In\] : \[lookahead ≠ {\] [ExpressionBody](#prod-ExpressionBody)\[?In, ~Await\] { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [ExpressionBody](#prod-ExpressionBody)\[In, Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[?In, ~Yield, ?Await\]


## Supplemental Syntax

When processing an instance of the production  
[ArrowParameters](#prod-ArrowParameters)\[Yield, Await\] : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\]  
the interpretation of [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) is refined using the following grammar:

[ArrowFormalParameters](#prod-ArrowFormalParameters)\[Yield, Await\] : ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[?Yield, ?Await\] )


# 15.3.1 Static Semantics: Early Errors

[ArrowFunction](#prod-ArrowFunction) : [ArrowParameters](#prod-ArrowParameters) \=> [ConciseBody](#prod-ConciseBody)

-   It is a Syntax Error if [ArrowParameters](#prod-ArrowParameters) [Contains](#sec-static-semantics-contains) [YieldExpression](#prod-YieldExpression) is true.
-   It is a Syntax Error if [ArrowParameters](#prod-ArrowParameters) [Contains](#sec-static-semantics-contains) [AwaitExpression](#prod-AwaitExpression) is true.
-   It is a Syntax Error if [ConciseBodyContainsUseStrict](#sec-static-semantics-concisebodycontainsusestrict) of [ConciseBody](#prod-ConciseBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [ArrowParameters](#prod-ArrowParameters) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [ArrowParameters](#prod-ArrowParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ConciseBody](#prod-ConciseBody).

[ArrowParameters](#prod-ArrowParameters) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

-   [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) [must cover](#must-cover) an [ArrowFormalParameters](#prod-ArrowFormalParameters).


# 15.3.2 Static Semantics: ConciseBodyContainsUseStrict

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ConciseBodyContainsUseStrict takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[ConciseBody](#prod-ConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return false.

[ConciseBody](#prod-ConciseBody) : { [FunctionBody](#prod-FunctionBody) }

1.  Return [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [FunctionBody](#prod-FunctionBody).


# 15.3.3 Runtime Semantics: EvaluateConciseBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateConciseBody takes arguments _functionObject_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [return completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[ConciseBody](#prod-ConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Perform ? [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)(_functionObject_, _argumentsList_).
2.  Return ? [Evaluation](#sec-evaluation) of [ExpressionBody](#prod-ExpressionBody).


# 15.3.4 Runtime Semantics: InstantiateArrowFunctionExpression

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateArrowFunctionExpression takes optional argument _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[ArrowFunction](#prod-ArrowFunction) : [ArrowParameters](#prod-ArrowParameters) \=> [ConciseBody](#prod-ConciseBody)

1.  If _name_ is not present, set _name_ to "".
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [ArrowFunction](#prod-ArrowFunction).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, [ArrowParameters](#prod-ArrowParameters), [ConciseBody](#prod-ConciseBody), lexical-this, _env_, _privateEnv_).
6.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
7.  Return _closure_.

Note

An [ArrowFunction](#prod-ArrowFunction) does not define local bindings for `arguments`, `super`, `this`, or `new.target`. Any reference to `arguments`, `super`, `this`, or `new.target` within an [ArrowFunction](#prod-ArrowFunction) must resolve to a binding in a lexically enclosing environment. Typically this will be the Function Environment of an immediately enclosing function. Even though an [ArrowFunction](#prod-ArrowFunction) may contain references to `super`, the [function object](#function-object) created in step [5](#step-arrowfunction-evaluation-functioncreate) is not made into a method by performing [MakeMethod](#sec-makemethod). An [ArrowFunction](#prod-ArrowFunction) that references `super` is always contained within a non-[ArrowFunction](#prod-ArrowFunction) and the necessary state to implement `super` is accessible via the _env_ that is captured by the [function object](#function-object) of the [ArrowFunction](#prod-ArrowFunction).


# 15.3.5 Runtime Semantics: Evaluation

[ArrowFunction](#prod-ArrowFunction) : [ArrowParameters](#prod-ArrowParameters) \=> [ConciseBody](#prod-ConciseBody)

1.  Return [InstantiateArrowFunctionExpression](#sec-runtime-semantics-instantiatearrowfunctionexpression) of [ArrowFunction](#prod-ArrowFunction).

[ExpressionBody](#prod-ExpressionBody) : [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
2.  Let _exprValue_ be ? [GetValue](#sec-getvalue)(_exprRef_).
3.  Return [ReturnCompletion](#sec-returncompletion)(_exprValue_).


# 15.4 Method Definitions


## Syntax

[MethodDefinition](#prod-MethodDefinition)\[Yield, Await\] : [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [GeneratorMethod](#prod-GeneratorMethod)\[?Yield, ?Await\] [AsyncMethod](#prod-AsyncMethod)\[?Yield, ?Await\] [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod)\[?Yield, ?Await\] get [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } set [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [PropertySetParameterList](#prod-PropertySetParameterList) : [FormalParameter](#prod-FormalParameter)\[~Yield, ~Await\]


# 15.4.1 Static Semantics: Early Errors

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [FunctionBody](#prod-FunctionBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [UniqueFormalParameters](#prod-UniqueFormalParameters) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [UniqueFormalParameters](#prod-UniqueFormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [FunctionBody](#prod-FunctionBody).

[MethodDefinition](#prod-MethodDefinition) : set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) }

-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [PropertySetParameterList](#prod-PropertySetParameterList) contains any duplicate elements.
-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [FunctionBody](#prod-FunctionBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [PropertySetParameterList](#prod-PropertySetParameterList) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [PropertySetParameterList](#prod-PropertySetParameterList) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [FunctionBody](#prod-FunctionBody).


# 15.4.2 Static Semantics: HasDirectSuper

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) HasDirectSuper takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  If [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true, return true.
2.  Return [FunctionBody](#prod-FunctionBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall).

[MethodDefinition](#prod-MethodDefinition) : get [ClassElementName](#prod-ClassElementName) ( ) { [FunctionBody](#prod-FunctionBody) }

1.  Return [FunctionBody](#prod-FunctionBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall).

[MethodDefinition](#prod-MethodDefinition) : set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) }

1.  If [PropertySetParameterList](#prod-PropertySetParameterList) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true, return true.
2.  Return [FunctionBody](#prod-FunctionBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall).

[GeneratorMethod](#prod-GeneratorMethod) : \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  If [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true, return true.
2.  Return [GeneratorBody](#prod-GeneratorBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall).

[AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) : async \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  If [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true, return true.
2.  Return [AsyncGeneratorBody](#prod-AsyncGeneratorBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall).

[AsyncMethod](#prod-AsyncMethod) : async [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  If [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true, return true.
2.  Return [AsyncFunctionBody](#prod-AsyncFunctionBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall).


# 15.4.3 Static Semantics: SpecialMethod

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) SpecialMethod takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return false.

[MethodDefinition](#prod-MethodDefinition) : [GeneratorMethod](#prod-GeneratorMethod) [AsyncMethod](#prod-AsyncMethod) [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) get [ClassElementName](#prod-ClassElementName) ( ) { [FunctionBody](#prod-FunctionBody) } set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) }

1.  Return true.


# 15.4.4 Runtime Semantics: DefineMethod

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) DefineMethod takes argument _object_ (an Object) and optional argument _functionPrototype_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Record](#sec-list-and-record-specification-type) with fields _\[\[Key\]\]_ (a [property key](#property-key)) and _\[\[Closure\]\]_ (an ECMAScript [function object](#function-object)) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Let _propKey_ be ? [Evaluation](#sec-evaluation) of [ClassElementName](#prod-ClassElementName).
2.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  If _functionPrototype_ is present, then
    1.  Let _prototype_ be _functionPrototype_.
5.  Else,
    1.  Let _prototype_ be [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
6.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [MethodDefinition](#prod-MethodDefinition).
7.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)(_prototype_, _sourceText_, [UniqueFormalParameters](#prod-UniqueFormalParameters), [FunctionBody](#prod-FunctionBody), non-lexical-this, _env_, _privateEnv_).
8.  Perform [MakeMethod](#sec-makemethod)(_closure_, _object_).
9.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_: _propKey_, _\[\[Closure\]\]_: _closure_ }.


# 15.4.5 Runtime Semantics: MethodDefinitionEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) MethodDefinitionEvaluation takes arguments _object_ (an Object) and _enumerable_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a [PrivateElement](#sec-privateelement-specification-type) or unused, or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) }

1.  Let _methodDef_ be ? [DefineMethod](#sec-runtime-semantics-definemethod) of [MethodDefinition](#prod-MethodDefinition) with argument _object_.
2.  Perform [SetFunctionName](#sec-setfunctionname)(_methodDef_._\[\[Closure\]\]_, _methodDef_._\[\[Key\]\]_).
3.  Return ? [DefineMethodProperty](#sec-definemethodproperty)(_object_, _methodDef_._\[\[Key\]\]_, _methodDef_._\[\[Closure\]\]_, _enumerable_).

[MethodDefinition](#prod-MethodDefinition) : get [ClassElementName](#prod-ClassElementName) ( ) { [FunctionBody](#prod-FunctionBody) }

1.  Let _propKey_ be ? [Evaluation](#sec-evaluation) of [ClassElementName](#prod-ClassElementName).
2.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [MethodDefinition](#prod-MethodDefinition).
5.  Let _formalParameterList_ be an instance of the production [FormalParameters](#prod-FormalParameters) : \[empty\] .
6.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, _formalParameterList_, [FunctionBody](#prod-FunctionBody), non-lexical-this, _env_, _privateEnv_).
7.  Perform [MakeMethod](#sec-makemethod)(_closure_, _object_).
8.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _propKey_, "get").
9.  If _propKey_ is a [Private Name](#sec-private-names), then
    1.  Return [PrivateElement](#sec-privateelement-specification-type) { _\[\[Key\]\]_: _propKey_, _\[\[Kind\]\]_: accessor, _\[\[Get\]\]_: _closure_, _\[\[Set\]\]_: undefined }.
10.  Else,
     1.  Let _desc_ be the PropertyDescriptor { _\[\[Get\]\]_: _closure_, _\[\[Enumerable\]\]_: _enumerable_, _\[\[Configurable\]\]_: true }.
     2.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_object_, _propKey_, _desc_).
     3.  Return unused.

[MethodDefinition](#prod-MethodDefinition) : set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) }

1.  Let _propKey_ be ? [Evaluation](#sec-evaluation) of [ClassElementName](#prod-ClassElementName).
2.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [MethodDefinition](#prod-MethodDefinition).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, [PropertySetParameterList](#prod-PropertySetParameterList), [FunctionBody](#prod-FunctionBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [MakeMethod](#sec-makemethod)(_closure_, _object_).
7.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _propKey_, "set").
8.  If _propKey_ is a [Private Name](#sec-private-names), then
    1.  Return [PrivateElement](#sec-privateelement-specification-type) { _\[\[Key\]\]_: _propKey_, _\[\[Kind\]\]_: accessor, _\[\[Get\]\]_: undefined, _\[\[Set\]\]_: _closure_ }.
9.  Else,
    1.  Let _desc_ be the PropertyDescriptor { _\[\[Set\]\]_: _closure_, _\[\[Enumerable\]\]_: _enumerable_, _\[\[Configurable\]\]_: true }.
    2.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_object_, _propKey_, _desc_).
    3.  Return unused.

[GeneratorMethod](#prod-GeneratorMethod) : \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Let _propKey_ be ? [Evaluation](#sec-evaluation) of [ClassElementName](#prod-ClassElementName).
2.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [GeneratorMethod](#prod-GeneratorMethod).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%GeneratorFunction.prototype%](#sec-properties-of-the-generatorfunction-prototype-object), _sourceText_, [UniqueFormalParameters](#prod-UniqueFormalParameters), [GeneratorBody](#prod-GeneratorBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [MakeMethod](#sec-makemethod)(_closure_, _object_).
7.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _propKey_).
8.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%GeneratorPrototype%](#sec-properties-of-generator-prototype)).
9.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_closure_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
10.  Return ? [DefineMethodProperty](#sec-definemethodproperty)(_object_, _propKey_, _closure_, _enumerable_).

[AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) : async \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Let _propKey_ be ? [Evaluation](#sec-evaluation) of [ClassElementName](#prod-ClassElementName).
2.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncGeneratorFunction.prototype%](#sec-properties-of-asyncgeneratorfunction-prototype), _sourceText_, [UniqueFormalParameters](#prod-UniqueFormalParameters), [AsyncGeneratorBody](#prod-AsyncGeneratorBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [MakeMethod](#sec-makemethod)(_closure_, _object_).
7.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _propKey_).
8.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype)).
9.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_closure_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
10.  Return ? [DefineMethodProperty](#sec-definemethodproperty)(_object_, _propKey_, _closure_, _enumerable_).

[AsyncMethod](#prod-AsyncMethod) : async [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Let _propKey_ be ? [Evaluation](#sec-evaluation) of [ClassElementName](#prod-ClassElementName).
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncMethod](#prod-AsyncMethod).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncFunction.prototype%](#sec-async-function-prototype-properties), _sourceText_, [UniqueFormalParameters](#prod-UniqueFormalParameters), [AsyncFunctionBody](#prod-AsyncFunctionBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [MakeMethod](#sec-makemethod)(_closure_, _object_).
7.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _propKey_).
8.  Return ? [DefineMethodProperty](#sec-definemethodproperty)(_object_, _propKey_, _closure_, _enumerable_).


# 15.5 Generator Function Definitions


## Syntax

[GeneratorDeclaration](#prod-GeneratorDeclaration)\[Yield, Await, Default\] : function \* [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } \[+Default\] function \* ( [FormalParameters](#prod-FormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier)\[+Yield, ~Await\]opt ( [FormalParameters](#prod-FormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorMethod](#prod-GeneratorMethod)\[Yield, Await\] : \* [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorBody](#prod-GeneratorBody) : [FunctionBody](#prod-FunctionBody)\[+Yield, ~Await\] [YieldExpression](#prod-YieldExpression)\[In, Await\] : yield yield \[no [LineTerminator](#prod-LineTerminator) here\] [AssignmentExpression](#prod-AssignmentExpression)\[?In, +Yield, ?Await\] yield \[no [LineTerminator](#prod-LineTerminator) here\] \* [AssignmentExpression](#prod-AssignmentExpression)\[?In, +Yield, ?Await\] Note 1

The syntactic context immediately following `yield` requires use of the [InputElementRegExpOrTemplateTail](#prod-InputElementRegExpOrTemplateTail) lexical goal.

Note 2

[YieldExpression](#prod-YieldExpression) cannot be used within the [FormalParameters](#prod-FormalParameters) of a generator function because any expressions that are part of [FormalParameters](#prod-FormalParameters) are evaluated before the resulting Generator is in a resumable state.

Note 3

[Abstract operations](#sec-algorithm-conventions-abstract-operations) relating to Generators are defined in [27.5.3](#sec-generator-abstract-operations).


# 15.5.1 Static Semantics: Early Errors

[GeneratorMethod](#prod-GeneratorMethod) : \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

-   It is a Syntax Error if [HasDirectSuper](#sec-static-semantics-hasdirectsuper) of [GeneratorMethod](#prod-GeneratorMethod) is true.
-   It is a Syntax Error if [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [YieldExpression](#prod-YieldExpression) is true.
-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [GeneratorBody](#prod-GeneratorBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [UniqueFormalParameters](#prod-UniqueFormalParameters) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [UniqueFormalParameters](#prod-UniqueFormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [GeneratorBody](#prod-GeneratorBody).

[GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

-   If [IsStrict](#sec-isstrict)([FormalParameters](#prod-FormalParameters)) is true, the Early Error rules for [UniqueFormalParameters](#prod-UniqueFormalParameters) : [FormalParameters](#prod-FormalParameters) are applied.
-   If [BindingIdentifier](#prod-BindingIdentifier) is present and [IsStrict](#sec-isstrict)([BindingIdentifier](#prod-BindingIdentifier)) is true, it is a Syntax Error if the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier) is either "eval" or "arguments".
-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [GeneratorBody](#prod-GeneratorBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [FormalParameters](#prod-FormalParameters) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameters](#prod-FormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [GeneratorBody](#prod-GeneratorBody).
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [YieldExpression](#prod-YieldExpression) is true.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [GeneratorBody](#prod-GeneratorBody) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.
-   It is a Syntax Error if [GeneratorBody](#prod-GeneratorBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.


# 15.5.2 Runtime Semantics: EvaluateGeneratorBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateGeneratorBody takes arguments _functionObject_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [throw completion](#sec-completion-record-specification-type) or a [return completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[GeneratorBody](#prod-GeneratorBody) : [FunctionBody](#prod-FunctionBody)

1.  Perform ? [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)(_functionObject_, _argumentsList_).
2.  Let _G_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_functionObject_, "%GeneratorPrototype%", « _\[\[GeneratorState\]\]_, _\[\[GeneratorContext\]\]_, _\[\[GeneratorBrand\]\]_ »).
3.  Set _G_._\[\[GeneratorBrand\]\]_ to empty.
4.  Set _G_._\[\[GeneratorState\]\]_ to suspended-start.
5.  Perform [GeneratorStart](#sec-generatorstart)(_G_, [FunctionBody](#prod-FunctionBody)).
6.  Return [ReturnCompletion](#sec-returncompletion)(_G_).


# 15.5.3 Runtime Semantics: InstantiateGeneratorFunctionObject

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateGeneratorFunctionObject takes arguments _env_ (an [Environment Record](#sec-environment-records)) and _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Let _name_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [GeneratorDeclaration](#prod-GeneratorDeclaration).
3.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%GeneratorFunction.prototype%](#sec-properties-of-the-generatorfunction-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [GeneratorBody](#prod-GeneratorBody), non-lexical-this, _env_, _privateEnv_).
4.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, _name_).
5.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%GeneratorPrototype%](#sec-properties-of-generator-prototype)).
6.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
7.  Return _F_.

[GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [GeneratorDeclaration](#prod-GeneratorDeclaration).
2.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%GeneratorFunction.prototype%](#sec-properties-of-the-generatorfunction-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [GeneratorBody](#prod-GeneratorBody), non-lexical-this, _env_, _privateEnv_).
3.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, "default").
4.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%GeneratorPrototype%](#sec-properties-of-generator-prototype)).
5.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
6.  Return _F_.

Note

An anonymous [GeneratorDeclaration](#prod-GeneratorDeclaration) can only occur as part of an `export default` declaration, and its function code is therefore always [strict mode code](#sec-strict-mode-code).


# 15.5.4 Runtime Semantics: InstantiateGeneratorFunctionExpression

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateGeneratorFunctionExpression takes optional argument _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[GeneratorExpression](#prod-GeneratorExpression) : function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  If _name_ is not present, set _name_ to "".
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [GeneratorExpression](#prod-GeneratorExpression).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%GeneratorFunction.prototype%](#sec-properties-of-the-generatorfunction-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [GeneratorBody](#prod-GeneratorBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
7.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%GeneratorPrototype%](#sec-properties-of-generator-prototype)).
8.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_closure_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
9.  Return _closure_.

[GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  [Assert](#assert): _name_ is not present.
2.  Set _name_ to the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
3.  Let _outerEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
4.  Let _funcEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_outerEnv_).
5.  Perform ! _funcEnv_.CreateImmutableBinding(_name_, false).
6.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
7.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [GeneratorExpression](#prod-GeneratorExpression).
8.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%GeneratorFunction.prototype%](#sec-properties-of-the-generatorfunction-prototype-object), _sourceText_, [FormalParameters](#prod-FormalParameters), [GeneratorBody](#prod-GeneratorBody), non-lexical-this, _funcEnv_, _privateEnv_).
9.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
10.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%GeneratorPrototype%](#sec-properties-of-generator-prototype)).
11.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_closure_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
12.  Perform ! _funcEnv_.InitializeBinding(_name_, _closure_).
13.  Return _closure_.

Note

The [BindingIdentifier](#prod-BindingIdentifier) in a [GeneratorExpression](#prod-GeneratorExpression) can be referenced from inside the [GeneratorExpression](#prod-GeneratorExpression)'s [FunctionBody](#prod-FunctionBody) to allow the generator code to call itself recursively. However, unlike in a [GeneratorDeclaration](#prod-GeneratorDeclaration), the [BindingIdentifier](#prod-BindingIdentifier) in a [GeneratorExpression](#prod-GeneratorExpression) cannot be referenced from and does not affect the scope enclosing the [GeneratorExpression](#prod-GeneratorExpression).


# 15.5.5 Runtime Semantics: Evaluation

[GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) }

1.  Return [InstantiateGeneratorFunctionExpression](#sec-runtime-semantics-instantiategeneratorfunctionexpression) of [GeneratorExpression](#prod-GeneratorExpression).

[YieldExpression](#prod-YieldExpression) : yield

1.  Return ? [Yield](#sec-yield)(undefined).

[YieldExpression](#prod-YieldExpression) : yield [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
2.  Let _value_ be ? [GetValue](#sec-getvalue)(_exprRef_).
3.  Return ? [Yield](#sec-yield)(_value_).

[YieldExpression](#prod-YieldExpression) : yield \* [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _generatorKind_ be [GetGeneratorKind](#sec-getgeneratorkind)().
2.  [Assert](#assert): _generatorKind_ is either sync or async.
3.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
4.  Let _value_ be ? [GetValue](#sec-getvalue)(_exprRef_).
5.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_value_, _generatorKind_).
6.  Let _iterator_ be _iteratorRecord_._\[\[Iterator\]\]_.
7.  Let _received_ be [NormalCompletion](#sec-normalcompletion)(undefined).
8.  Repeat,
    1.  If _received_ is a [normal completion](#sec-completion-record-specification-type), then
        1.  Let _innerResult_ be ? [Call](#sec-call)(_iteratorRecord_._\[\[NextMethod\]\]_, _iteratorRecord_._\[\[Iterator\]\]_, « _received_._\[\[Value\]\]_ »).
        2.  If _generatorKind_ is async, set _innerResult_ to ? [Await](#await)(_innerResult_).
        3.  If _innerResult_ [is not an Object](#sec-object-type), throw a TypeError exception.
        4.  Let _done_ be ? [IteratorComplete](#sec-iteratorcomplete)(_innerResult_).
        5.  If _done_ is true, then
            1.  Return ? [IteratorValue](#sec-iteratorvalue)(_innerResult_).
        6.  If _generatorKind_ is async, set _received_ to [Completion](#sec-completion-ao)([AsyncGeneratorYield](#sec-asyncgeneratoryield)(? [IteratorValue](#sec-iteratorvalue)(_innerResult_))).
        7.  Else, set _received_ to [Completion](#sec-completion-ao)([GeneratorYield](#sec-generatoryield)(_innerResult_)).
    2.  Else if _received_ is a [throw completion](#sec-completion-record-specification-type), then
        1.  Let _throw_ be ? [GetMethod](#sec-getmethod)(_iterator_, "throw").
        2.  If _throw_ is not undefined, then
            1.  Let _innerResult_ be ? [Call](#sec-call)(_throw_, _iterator_, « _received_._\[\[Value\]\]_ »).
            2.  If _generatorKind_ is async, set _innerResult_ to ? [Await](#await)(_innerResult_).
            3.  NOTE: Exceptions from the inner [iterator](#sec-iterator-interface) `throw` method are propagated. [Normal completions](#sec-completion-record-specification-type) from an inner `throw` method are processed similarly to an inner `next`.
            4.  If _innerResult_ [is not an Object](#sec-object-type), throw a TypeError exception.
            5.  Let _done_ be ? [IteratorComplete](#sec-iteratorcomplete)(_innerResult_).
            6.  If _done_ is true, then
                1.  Return ? [IteratorValue](#sec-iteratorvalue)(_innerResult_).
            7.  If _generatorKind_ is async, set _received_ to [Completion](#sec-completion-ao)([AsyncGeneratorYield](#sec-asyncgeneratoryield)(? [IteratorValue](#sec-iteratorvalue)(_innerResult_))).
            8.  Else, set _received_ to [Completion](#sec-completion-ao)([GeneratorYield](#sec-generatoryield)(_innerResult_)).
        3.  Else,
            1.  NOTE: If _iterator_ does not have a `throw` method, this throw is going to terminate the `yield*` loop. But first we need to give _iterator_ a chance to clean up.
            2.  Let _closeCompletion_ be [NormalCompletion](#sec-normalcompletion)(empty).
            3.  If _generatorKind_ is async, perform ? [AsyncIteratorClose](#sec-asynciteratorclose)(_iteratorRecord_, _closeCompletion_).
            4.  Else, perform ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _closeCompletion_).
            5.  NOTE: The next step throws a TypeError to indicate that there was a `yield*` protocol violation: _iterator_ does not have a `throw` method.
            6.  Throw a TypeError exception.
    3.  Else,
        1.  [Assert](#assert): _received_ is a [return completion](#sec-completion-record-specification-type).
        2.  Let _return_ be ? [GetMethod](#sec-getmethod)(_iterator_, "return").
        3.  If _return_ is undefined, then
            1.  Let _receivedValue_ be _received_._\[\[Value\]\]_.
            2.  If _generatorKind_ is async, then
                1.  Set _receivedValue_ to ? [Await](#await)(_receivedValue_).
            3.  Return [ReturnCompletion](#sec-returncompletion)(_receivedValue_).
        4.  Let _innerReturnResult_ be ? [Call](#sec-call)(_return_, _iterator_, « _received_._\[\[Value\]\]_ »).
        5.  If _generatorKind_ is async, set _innerReturnResult_ to ? [Await](#await)(_innerReturnResult_).
        6.  If _innerReturnResult_ [is not an Object](#sec-object-type), throw a TypeError exception.
        7.  Let _done_ be ? [IteratorComplete](#sec-iteratorcomplete)(_innerReturnResult_).
        8.  If _done_ is true, then
            1.  Let _returnedValue_ be ? [IteratorValue](#sec-iteratorvalue)(_innerReturnResult_).
            2.  Return [ReturnCompletion](#sec-returncompletion)(_returnedValue_).
        9.  If _generatorKind_ is async, set _received_ to [Completion](#sec-completion-ao)([AsyncGeneratorYield](#sec-asyncgeneratoryield)(? [IteratorValue](#sec-iteratorvalue)(_innerReturnResult_))).
        10.  Else, set _received_ to [Completion](#sec-completion-ao)([GeneratorYield](#sec-generatoryield)(_innerReturnResult_)).


# 15.6 Async Generator Function Definitions


## Syntax

[AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration)\[Yield, Await, Default\] : async \[no [LineTerminator](#prod-LineTerminator) here\] function \* [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } \[+Default\] async \[no [LineTerminator](#prod-LineTerminator) here\] function \* ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async \[no [LineTerminator](#prod-LineTerminator) here\] function \* [BindingIdentifier](#prod-BindingIdentifier)\[+Yield, +Await\]opt ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod)\[Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] \* [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorBody](#prod-AsyncGeneratorBody) : [FunctionBody](#prod-FunctionBody)\[+Yield, +Await\] Note 1

[YieldExpression](#prod-YieldExpression) and [AwaitExpression](#prod-AwaitExpression) cannot be used within the [FormalParameters](#prod-FormalParameters) of an async generator function because any expressions that are part of [FormalParameters](#prod-FormalParameters) are evaluated before the resulting AsyncGenerator is in a resumable state.

Note 2

[Abstract operations](#sec-algorithm-conventions-abstract-operations) relating to AsyncGenerators are defined in [27.6.3](#sec-asyncgenerator-abstract-operations).


# 15.6.1 Static Semantics: Early Errors

[AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) : async \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

-   It is a Syntax Error if [HasDirectSuper](#sec-static-semantics-hasdirectsuper) of [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) is true.
-   It is a Syntax Error if [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [YieldExpression](#prod-YieldExpression) is true.
-   It is a Syntax Error if [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [AwaitExpression](#prod-AwaitExpression) is true.
-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [AsyncGeneratorBody](#prod-AsyncGeneratorBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [UniqueFormalParameters](#prod-UniqueFormalParameters) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [UniqueFormalParameters](#prod-UniqueFormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [AsyncGeneratorBody](#prod-AsyncGeneratorBody).

[AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

-   If [IsStrict](#sec-isstrict)([FormalParameters](#prod-FormalParameters)) is true, the Early Error rules for [UniqueFormalParameters](#prod-UniqueFormalParameters) : [FormalParameters](#prod-FormalParameters) are applied.
-   If [BindingIdentifier](#prod-BindingIdentifier) is present and [IsStrict](#sec-isstrict)([BindingIdentifier](#prod-BindingIdentifier)) is true, it is a Syntax Error if the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier) is either "eval" or "arguments".
-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [AsyncGeneratorBody](#prod-AsyncGeneratorBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [FormalParameters](#prod-FormalParameters) is false.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameters](#prod-FormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [AsyncGeneratorBody](#prod-AsyncGeneratorBody).
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [YieldExpression](#prod-YieldExpression) is true.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [AwaitExpression](#prod-AwaitExpression) is true.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [AsyncGeneratorBody](#prod-AsyncGeneratorBody) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.
-   It is a Syntax Error if [AsyncGeneratorBody](#prod-AsyncGeneratorBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.


# 15.6.2 Runtime Semantics: EvaluateAsyncGeneratorBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateAsyncGeneratorBody takes arguments _functionObject_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [throw completion](#sec-completion-record-specification-type) or a [return completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[AsyncGeneratorBody](#prod-AsyncGeneratorBody) : [FunctionBody](#prod-FunctionBody)

1.  Perform ? [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)(_functionObject_, _argumentsList_).
2.  Let _generator_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_functionObject_, "%AsyncGeneratorPrototype%", « _\[\[AsyncGeneratorState\]\]_, _\[\[AsyncGeneratorContext\]\]_, _\[\[AsyncGeneratorQueue\]\]_, _\[\[GeneratorBrand\]\]_ »).
3.  Set _generator_._\[\[GeneratorBrand\]\]_ to empty.
4.  Set _generator_._\[\[AsyncGeneratorState\]\]_ to suspended-start.
5.  Perform [AsyncGeneratorStart](#sec-asyncgeneratorstart)(_generator_, [FunctionBody](#prod-FunctionBody)).
6.  Return [ReturnCompletion](#sec-returncompletion)(_generator_).


# 15.6.3 Runtime Semantics: InstantiateAsyncGeneratorFunctionObject

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateAsyncGeneratorFunctionObject takes arguments _env_ (an [Environment Record](#sec-environment-records)) and _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Let _name_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration).
3.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncGeneratorFunction.prototype%](#sec-properties-of-asyncgeneratorfunction-prototype), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncGeneratorBody](#prod-AsyncGeneratorBody), non-lexical-this, _env_, _privateEnv_).
4.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, _name_).
5.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype)).
6.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
7.  Return _F_.

[AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration).
2.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncGeneratorFunction.prototype%](#sec-properties-of-asyncgeneratorfunction-prototype), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncGeneratorBody](#prod-AsyncGeneratorBody), non-lexical-this, _env_, _privateEnv_).
3.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, "default").
4.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype)).
5.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
6.  Return _F_.

Note

An anonymous [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) can only occur as part of an `export default` declaration.


# 15.6.4 Runtime Semantics: InstantiateAsyncGeneratorFunctionExpression

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateAsyncGeneratorFunctionExpression takes optional argument _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  If _name_ is not present, set _name_ to "".
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncGeneratorFunction.prototype%](#sec-properties-of-asyncgeneratorfunction-prototype), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncGeneratorBody](#prod-AsyncGeneratorBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
7.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype)).
8.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_closure_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
9.  Return _closure_.

[AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  [Assert](#assert): _name_ is not present.
2.  Set _name_ to the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
3.  Let _outerEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
4.  Let _funcEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_outerEnv_).
5.  Perform ! _funcEnv_.CreateImmutableBinding(_name_, false).
6.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
7.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression).
8.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncGeneratorFunction.prototype%](#sec-properties-of-asyncgeneratorfunction-prototype), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncGeneratorBody](#prod-AsyncGeneratorBody), non-lexical-this, _funcEnv_, _privateEnv_).
9.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
10.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype)).
11.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_closure_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
12.  Perform ! _funcEnv_.InitializeBinding(_name_, _closure_).
13.  Return _closure_.

Note

The [BindingIdentifier](#prod-BindingIdentifier) in an [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) can be referenced from inside the [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression)'s [AsyncGeneratorBody](#prod-AsyncGeneratorBody) to allow the generator code to call itself recursively. However, unlike in an [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), the [BindingIdentifier](#prod-BindingIdentifier) in an [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) cannot be referenced from and does not affect the scope enclosing the [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression).


# 15.6.5 Runtime Semantics: Evaluation

[AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return [InstantiateAsyncGeneratorFunctionExpression](#sec-runtime-semantics-instantiateasyncgeneratorfunctionexpression) of [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression).


# 15.7 Class Definitions


## Syntax

[ClassDeclaration](#prod-ClassDeclaration)\[Yield, Await, Default\] : class [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [ClassTail](#prod-ClassTail)\[?Yield, ?Await\] \[+Default\] class [ClassTail](#prod-ClassTail)\[?Yield, ?Await\] [ClassExpression](#prod-ClassExpression)\[Yield, Await\] : class [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\]opt [ClassTail](#prod-ClassTail)\[?Yield, ?Await\] [ClassTail](#prod-ClassTail)\[Yield, Await\] : [ClassHeritage](#prod-ClassHeritage)\[?Yield, ?Await\]opt { [ClassBody](#prod-ClassBody)\[?Yield, ?Await\]opt } [ClassHeritage](#prod-ClassHeritage)\[Yield, Await\] : extends [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] [ClassBody](#prod-ClassBody)\[Yield, Await\] : [ClassElementList](#prod-ClassElementList)\[?Yield, ?Await\] [ClassElementList](#prod-ClassElementList)\[Yield, Await\] : [ClassElement](#prod-ClassElement)\[?Yield, ?Await\] [ClassElementList](#prod-ClassElementList)\[?Yield, ?Await\] [ClassElement](#prod-ClassElement)\[?Yield, ?Await\] [ClassElement](#prod-ClassElement)\[Yield, Await\] : [MethodDefinition](#prod-MethodDefinition)\[?Yield, ?Await\] static [MethodDefinition](#prod-MethodDefinition)\[?Yield, ?Await\] [FieldDefinition](#prod-FieldDefinition)\[?Yield, ?Await\] ; static [FieldDefinition](#prod-FieldDefinition)\[?Yield, ?Await\] ; [ClassStaticBlock](#prod-ClassStaticBlock) ; [FieldDefinition](#prod-FieldDefinition)\[Yield, Await\] : [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [ClassElementName](#prod-ClassElementName)\[Yield, Await\] : [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] [PrivateIdentifier](#prod-PrivateIdentifier) [ClassStaticBlock](#prod-ClassStaticBlock) : static { [ClassStaticBlockBody](#prod-ClassStaticBlockBody) } [ClassStaticBlockBody](#prod-ClassStaticBlockBody) : [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : [StatementList](#prod-StatementList)\[~Yield, +Await, ~Return\]opt Note

A class definition is always [strict mode code](#sec-strict-mode-code).


# 15.7.1 Static Semantics: Early Errors

[ClassTail](#prod-ClassTail) : [ClassHeritage](#prod-ClassHeritage)opt { [ClassBody](#prod-ClassBody) }

-   It is a Syntax Error if [ClassHeritage](#prod-ClassHeritage) is not present and the following algorithm returns true:
    
    1.  Let _constructor_ be the [ConstructorMethod](#sec-static-semantics-constructormethod) of [ClassBody](#prod-ClassBody).
    2.  If _constructor_ is empty, return false.
    3.  Return [HasDirectSuper](#sec-static-semantics-hasdirectsuper) of _constructor_.
    

[ClassBody](#prod-ClassBody) : [ClassElementList](#prod-ClassElementList)

-   It is a Syntax Error if the [PrototypePropertyNameList](#sec-static-semantics-prototypepropertynamelist) of [ClassElementList](#prod-ClassElementList) contains more than one occurrence of "constructor".
-   It is a Syntax Error if the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [ClassElementList](#prod-ClassElementList) contains any duplicate entries, unless the name is used once for a getter and once for a setter and in no other entries, and the getter and setter are either both static or both non-static.

[ClassElement](#prod-ClassElement) : [MethodDefinition](#prod-MethodDefinition)

-   It is a Syntax Error if the [PropName](#sec-static-semantics-propname) of [MethodDefinition](#prod-MethodDefinition) is not "constructor" and [HasDirectSuper](#sec-static-semantics-hasdirectsuper) of [MethodDefinition](#prod-MethodDefinition) is true.
-   It is a Syntax Error if the [PropName](#sec-static-semantics-propname) of [MethodDefinition](#prod-MethodDefinition) is "constructor" and [SpecialMethod](#sec-static-semantics-specialmethod) of [MethodDefinition](#prod-MethodDefinition) is true.

[ClassElement](#prod-ClassElement) : static [MethodDefinition](#prod-MethodDefinition)

-   It is a Syntax Error if [HasDirectSuper](#sec-static-semantics-hasdirectsuper) of [MethodDefinition](#prod-MethodDefinition) is true.
-   It is a Syntax Error if the [PropName](#sec-static-semantics-propname) of [MethodDefinition](#prod-MethodDefinition) is "prototype".

[ClassElement](#prod-ClassElement) : [FieldDefinition](#prod-FieldDefinition) ;

-   It is a Syntax Error if the [PropName](#sec-static-semantics-propname) of [FieldDefinition](#prod-FieldDefinition) is "constructor".

[ClassElement](#prod-ClassElement) : static [FieldDefinition](#prod-FieldDefinition) ;

-   It is a Syntax Error if the [PropName](#sec-static-semantics-propname) of [FieldDefinition](#prod-FieldDefinition) is either "prototype" or "constructor".

[FieldDefinition](#prod-FieldDefinition) : [ClassElementName](#prod-ClassElementName) [Initializer](#prod-Initializer)opt

-   It is a Syntax Error if [Initializer](#prod-Initializer) is present and [ContainsArguments](#sec-static-semantics-containsarguments) of [Initializer](#prod-Initializer) is true.
-   It is a Syntax Error if [Initializer](#prod-Initializer) is present and [Initializer](#prod-Initializer) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.

[ClassElementName](#prod-ClassElementName) : [PrivateIdentifier](#prod-PrivateIdentifier)

-   It is a Syntax Error if the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier) is "#constructor".

[ClassStaticBlockBody](#prod-ClassStaticBlockBody) : [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList)

-   It is a Syntax Error if the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) contains any duplicate entries.
-   It is a Syntax Error if any element of the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList).
-   It is a Syntax Error if [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) with arguments « » and « » is true.
-   It is a Syntax Error if [ContainsArguments](#sec-static-semantics-containsarguments) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) is true.
-   It is a Syntax Error if [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.
-   It is a Syntax Error if [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) [Contains](#sec-static-semantics-contains) `await` is true.


# 15.7.2 Static Semantics: ClassElementKind

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ClassElementKind takes no arguments and returns constructor-method, non-constructor-method, or empty. It is defined piecewise over the following productions:

[ClassElement](#prod-ClassElement) : [MethodDefinition](#prod-MethodDefinition)

1.  If the [PropName](#sec-static-semantics-propname) of [MethodDefinition](#prod-MethodDefinition) is "constructor", return constructor-method.
2.  Return non-constructor-method.

[ClassElement](#prod-ClassElement) : static [MethodDefinition](#prod-MethodDefinition) [FieldDefinition](#prod-FieldDefinition) ; static [FieldDefinition](#prod-FieldDefinition) ;

1.  Return non-constructor-method.

[ClassElement](#prod-ClassElement) : [ClassStaticBlock](#prod-ClassStaticBlock)

1.  Return non-constructor-method.

[ClassElement](#prod-ClassElement) : ;

1.  Return empty.


# 15.7.3 Static Semantics: ConstructorMethod

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ConstructorMethod takes no arguments and returns a [ClassElement](#prod-ClassElement) [Parse Node](#sec-syntactic-grammar) or empty. It is defined piecewise over the following productions:

[ClassElementList](#prod-ClassElementList) : [ClassElement](#prod-ClassElement)

1.  If the [ClassElementKind](#sec-static-semantics-classelementkind) of [ClassElement](#prod-ClassElement) is constructor-method, return [ClassElement](#prod-ClassElement).
2.  Return empty.

[ClassElementList](#prod-ClassElementList) : [ClassElementList](#prod-ClassElementList) [ClassElement](#prod-ClassElement)

1.  Let _head_ be the [ConstructorMethod](#sec-static-semantics-constructormethod) of [ClassElementList](#prod-ClassElementList).
2.  If _head_ is not empty, return _head_.
3.  If the [ClassElementKind](#sec-static-semantics-classelementkind) of [ClassElement](#prod-ClassElement) is constructor-method, return [ClassElement](#prod-ClassElement).
4.  Return empty.

Note

Early Error rules ensure that there is only one method definition named "constructor" and that it is not an [accessor property](#sec-object-type) or generator definition.


# 15.7.4 Static Semantics: IsStatic

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsStatic takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[ClassElement](#prod-ClassElement) : [MethodDefinition](#prod-MethodDefinition)

1.  Return false.

[ClassElement](#prod-ClassElement) : static [MethodDefinition](#prod-MethodDefinition)

1.  Return true.

[ClassElement](#prod-ClassElement) : [FieldDefinition](#prod-FieldDefinition) ;

1.  Return false.

[ClassElement](#prod-ClassElement) : static [FieldDefinition](#prod-FieldDefinition) ;

1.  Return true.

[ClassElement](#prod-ClassElement) : [ClassStaticBlock](#prod-ClassStaticBlock)

1.  Return true.

[ClassElement](#prod-ClassElement) : ;

1.  Return false.


# 15.7.5 Static Semantics: NonConstructorElements

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) NonConstructorElements takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [ClassElement](#prod-ClassElement) [Parse Nodes](#sec-syntactic-grammar). It is defined piecewise over the following productions:

[ClassElementList](#prod-ClassElementList) : [ClassElement](#prod-ClassElement)

1.  If the [ClassElementKind](#sec-static-semantics-classelementkind) of [ClassElement](#prod-ClassElement) is non-constructor-method, then
    1.  Return « [ClassElement](#prod-ClassElement) ».
2.  Return a new empty [List](#sec-list-and-record-specification-type).

[ClassElementList](#prod-ClassElementList) : [ClassElementList](#prod-ClassElementList) [ClassElement](#prod-ClassElement)

1.  Let _list_ be the [NonConstructorElements](#sec-static-semantics-nonconstructorelements) of [ClassElementList](#prod-ClassElementList).
2.  If the [ClassElementKind](#sec-static-semantics-classelementkind) of [ClassElement](#prod-ClassElement) is non-constructor-method, then
    1.  Append [ClassElement](#prod-ClassElement) to _list_.
3.  Return _list_.


# 15.7.6 Static Semantics: PrototypePropertyNameList

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) PrototypePropertyNameList takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [property keys](#property-key). It is defined piecewise over the following productions:

[ClassElementList](#prod-ClassElementList) : [ClassElement](#prod-ClassElement)

1.  Let _propName_ be the [PropName](#sec-static-semantics-propname) of [ClassElement](#prod-ClassElement).
2.  If _propName_ is empty, return a new empty [List](#sec-list-and-record-specification-type).
3.  If [IsStatic](#sec-static-semantics-isstatic) of [ClassElement](#prod-ClassElement) is true, return a new empty [List](#sec-list-and-record-specification-type).
4.  Return « _propName_ ».

[ClassElementList](#prod-ClassElementList) : [ClassElementList](#prod-ClassElementList) [ClassElement](#prod-ClassElement)

1.  Let _list_ be the [PrototypePropertyNameList](#sec-static-semantics-prototypepropertynamelist) of [ClassElementList](#prod-ClassElementList).
2.  Let _propName_ be the [PropName](#sec-static-semantics-propname) of [ClassElement](#prod-ClassElement).
3.  If _propName_ is empty, return _list_.
4.  If [IsStatic](#sec-static-semantics-isstatic) of [ClassElement](#prod-ClassElement) is true, return _list_.
5.  Return the [list-concatenation](#list-concatenation) of _list_ and « _propName_ ».


# 15.7.7 Static Semantics: AllPrivateIdentifiersValid

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) AllPrivateIdentifiersValid takes argument _names_ (a [List](#sec-list-and-record-specification-type) of Strings) and returns a Boolean.

Every grammar production alternative in this specification which is not listed below implicitly has the following default definition of AllPrivateIdentifiersValid:

1.  For each child node _child_ of this [Parse Node](#sec-syntactic-grammar), do
    1.  If _child_ is an instance of a nonterminal, then
        1.  If [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of _child_ with argument _names_ is false, return false.
2.  Return true.

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  If _names_ contains the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier), then
    1.  Return [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of [MemberExpression](#prod-MemberExpression) with argument _names_.
2.  Return false.

[CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  If _names_ contains the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier), then
    1.  Return [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of [CallExpression](#prod-CallExpression) with argument _names_.
2.  Return false.

[OptionalChain](#prod-OptionalChain) : ?. [PrivateIdentifier](#prod-PrivateIdentifier)

1.  If _names_ contains the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier), return true.
2.  Return false.

[OptionalChain](#prod-OptionalChain) : [OptionalChain](#prod-OptionalChain) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  If _names_ contains the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier), then
    1.  Return [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of [OptionalChain](#prod-OptionalChain) with argument _names_.
2.  Return false.

[ClassBody](#prod-ClassBody) : [ClassElementList](#prod-ClassElementList)

1.  Let _newNames_ be the [list-concatenation](#list-concatenation) of _names_ and the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [ClassBody](#prod-ClassBody).
2.  Return [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of [ClassElementList](#prod-ClassElementList) with argument _newNames_.

[RelationalExpression](#prod-RelationalExpression) : [PrivateIdentifier](#prod-PrivateIdentifier) in [ShiftExpression](#prod-ShiftExpression)

1.  If _names_ contains the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier), then
    1.  Return [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of [ShiftExpression](#prod-ShiftExpression) with argument _names_.
2.  Return false.


# 15.7.8 Static Semantics: PrivateBoundIdentifiers

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) PrivateBoundIdentifiers takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It is defined piecewise over the following productions:

[FieldDefinition](#prod-FieldDefinition) : [ClassElementName](#prod-ClassElementName) [Initializer](#prod-Initializer)opt

1.  Return the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [ClassElementName](#prod-ClassElementName).

[ClassElementName](#prod-ClassElementName) : [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier).

[ClassElementName](#prod-ClassElementName) : [PropertyName](#prod-PropertyName) [ClassElement](#prod-ClassElement) : [ClassStaticBlock](#prod-ClassStaticBlock) ;

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ClassElementList](#prod-ClassElementList) : [ClassElementList](#prod-ClassElementList) [ClassElement](#prod-ClassElement)

1.  Let _names1_ be the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [ClassElementList](#prod-ClassElementList).
2.  Let _names2_ be the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [ClassElement](#prod-ClassElement).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) } get [ClassElementName](#prod-ClassElementName) ( ) { [FunctionBody](#prod-FunctionBody) } set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorMethod](#prod-GeneratorMethod) : \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncMethod](#prod-AsyncMethod) : async [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) : async \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) }

1.  Return the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [ClassElementName](#prod-ClassElementName).


# 15.7.9 Static Semantics: ContainsArguments

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ContainsArguments takes no arguments and returns a Boolean.

Every grammar production alternative in this specification which is not listed below implicitly has the following default definition of ContainsArguments:

1.  For each child node _child_ of this [Parse Node](#sec-syntactic-grammar), do
    1.  If _child_ is an instance of a nonterminal, then
        1.  If [ContainsArguments](#sec-static-semantics-containsarguments) of _child_ is true, return true.
2.  Return false.

[IdentifierReference](#prod-IdentifierReference) : [Identifier](#prod-Identifier)

1.  If the [StringValue](#sec-static-semantics-stringvalue) of [Identifier](#prod-Identifier) is "arguments", return true.
2.  Return false.

[FunctionDeclaration](#prod-FunctionDeclaration) : function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } function ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorDeclaration](#prod-GeneratorDeclaration) : function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } function \* ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration) : async function \* [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } async function \* ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async function \* [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return false.

[MethodDefinition](#prod-MethodDefinition) : [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [FunctionBody](#prod-FunctionBody) } get [ClassElementName](#prod-ClassElementName) ( ) { [FunctionBody](#prod-FunctionBody) } set [ClassElementName](#prod-ClassElementName) ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody) } [GeneratorMethod](#prod-GeneratorMethod) : \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [GeneratorBody](#prod-GeneratorBody) } [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) : async \* [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncMethod](#prod-AsyncMethod) : async [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return [ContainsArguments](#sec-static-semantics-containsarguments) of [ClassElementName](#prod-ClassElementName).


# 15.7.10 Runtime Semantics: ClassFieldDefinitionEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ClassFieldDefinitionEvaluation takes argument _homeObject_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [ClassFieldDefinition Record](#sec-classfielddefinition-record-specification-type) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[FieldDefinition](#prod-FieldDefinition) : [ClassElementName](#prod-ClassElementName) [Initializer](#prod-Initializer)opt

1.  Let _name_ be ? [Evaluation](#sec-evaluation) of [ClassElementName](#prod-ClassElementName).
2.  If [Initializer](#prod-Initializer) is present, then
    1.  Let _formalParameterList_ be an instance of the production [FormalParameters](#prod-FormalParameters) : \[empty\] .
    2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
    3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
    4.  Let _sourceText_ be the empty sequence of Unicode code points.
    5.  Let _initializer_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, _formalParameterList_, [Initializer](#prod-Initializer), non-lexical-this, _env_, _privateEnv_).
    6.  Perform [MakeMethod](#sec-makemethod)(_initializer_, _homeObject_).
    7.  Set _initializer_._\[\[ClassFieldInitializerName\]\]_ to _name_.
3.  Else,
    1.  Let _initializer_ be empty.
4.  Return the [ClassFieldDefinition Record](#sec-classfielddefinition-record-specification-type) { _\[\[Name\]\]_: _name_, _\[\[Initializer\]\]_: _initializer_ }.

Note

The function created for _initializer_ is never directly accessible to ECMAScript code.


# 15.7.11 Runtime Semantics: ClassStaticBlockDefinitionEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ClassStaticBlockDefinitionEvaluation takes argument _homeObject_ (an Object) and returns a [ClassStaticBlockDefinition Record](#sec-classstaticblockdefinition-record-specification-type). It is defined piecewise over the following productions:

[ClassStaticBlock](#prod-ClassStaticBlock) : static { [ClassStaticBlockBody](#prod-ClassStaticBlockBody) }

1.  Let _lex_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
2.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
3.  Let _sourceText_ be the empty sequence of Unicode code points.
4.  Let _formalParameters_ be an instance of the production [FormalParameters](#prod-FormalParameters) : \[empty\] .
5.  Let _bodyFunction_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%Function.prototype%](#sec-properties-of-the-function-prototype-object), _sourceText_, _formalParameters_, [ClassStaticBlockBody](#prod-ClassStaticBlockBody), non-lexical-this, _lex_, _privateEnv_).
6.  Perform [MakeMethod](#sec-makemethod)(_bodyFunction_, _homeObject_).
7.  Return the [ClassStaticBlockDefinition Record](#sec-classstaticblockdefinition-record-specification-type) { _\[\[BodyFunction\]\]_: _bodyFunction_ }.

Note

The function _bodyFunction_ is never directly accessible to ECMAScript code.


# 15.7.12 Runtime Semantics: EvaluateClassStaticBlockBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateClassStaticBlockBody takes argument _functionObject_ (an ECMAScript [function object](#function-object)) and returns a [return completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[ClassStaticBlockBody](#prod-ClassStaticBlockBody) : [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList)

1.  [Assert](#assert): _functionObject_ is a synthetic function created by [ClassStaticBlockDefinitionEvaluation](#sec-runtime-semantics-classstaticblockdefinitionevaluation) step [5](#step-synthetic-class-static-block-fn).
2.  Perform ! [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)(_functionObject_, « »).
3.  Perform ? [Evaluation](#sec-evaluation) of [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList).
4.  Return [ReturnCompletion](#sec-returncompletion)(undefined).


# 15.7.13 Runtime Semantics: ClassElementEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ClassElementEvaluation takes argument _object_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a [ClassFieldDefinition Record](#sec-classfielddefinition-record-specification-type), a [ClassStaticBlockDefinition Record](#sec-classstaticblockdefinition-record-specification-type), a [PrivateElement](#sec-privateelement-specification-type), or unused, or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[ClassElement](#prod-ClassElement) : [FieldDefinition](#prod-FieldDefinition) ; static [FieldDefinition](#prod-FieldDefinition) ;

1.  Return ? [ClassFieldDefinitionEvaluation](#sec-runtime-semantics-classfielddefinitionevaluation) of [FieldDefinition](#prod-FieldDefinition) with argument _object_.

[ClassElement](#prod-ClassElement) : [MethodDefinition](#prod-MethodDefinition) static [MethodDefinition](#prod-MethodDefinition)

1.  Return ? [MethodDefinitionEvaluation](#sec-runtime-semantics-methoddefinitionevaluation) of [MethodDefinition](#prod-MethodDefinition) with arguments _object_ and false.

[ClassElement](#prod-ClassElement) : [ClassStaticBlock](#prod-ClassStaticBlock)

1.  Return the [ClassStaticBlockDefinitionEvaluation](#sec-runtime-semantics-classstaticblockdefinitionevaluation) of [ClassStaticBlock](#prod-ClassStaticBlock) with argument _object_.

[ClassElement](#prod-ClassElement) : ;

1.  Return unused.


# 15.7.14 Runtime Semantics: ClassDefinitionEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ClassDefinitionEvaluation takes arguments _classBinding_ (a String or undefined), _className_ (a [property key](#property-key) or a [Private Name](#sec-private-names)), and _sourceText_ ([ECMAScript source text](#sec-source-text)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [function object](#function-object) or an [abrupt completion](#sec-completion-record-specification-type).

Note

For ease of specification, private methods and accessors are included alongside private fields in the _\[\[PrivateElements\]\]_ slot of class instances. However, any given object has either all or none of the private methods and accessors defined by a given class. This feature has been designed so that implementations may choose to implement private methods and accessors using a strategy which does not require tracking each method or accessor individually.

For example, an implementation could directly associate instance private methods with their corresponding [Private Name](#sec-private-names) and track, for each object, which class [constructors](#constructor) have run with that object as their `this` value. Looking up an instance private method on an object then consists of checking that the class [constructor](#constructor) which defines the method has been used to initialize the object, then returning the method associated with the [Private Name](#sec-private-names).

This differs from private fields: because field initializers can throw during class instantiation, an individual object may have some proper subset of the private fields of a given class, and so private fields must in general be tracked individually.

It is defined piecewise over the following productions:

[ClassTail](#prod-ClassTail) : [ClassHeritage](#prod-ClassHeritage)opt { [ClassBody](#prod-ClassBody)opt }

1.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
2.  Let _classEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_env_).
3.  If _classBinding_ is not undefined, then
    1.  Perform ! _classEnv_.CreateImmutableBinding(_classBinding_, true).
4.  Let _outerPrivateEnvironment_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
5.  Let _classPrivateEnvironment_ be [NewPrivateEnvironment](#sec-newprivateenvironment)(_outerPrivateEnvironment_).
6.  If [ClassBody](#prod-ClassBody) is present, then
    1.  For each String _dn_ of the [PrivateBoundIdentifiers](#sec-static-semantics-privateboundidentifiers) of [ClassBody](#prod-ClassBody), do
        1.  If _classPrivateEnvironment_._\[\[Names\]\]_ contains a [Private Name](#sec-private-names) _pn_ such that _pn_._\[\[Description\]\]_ is _dn_, then
            1.  [Assert](#assert): This is only possible for getter/setter pairs.
        2.  Else,
            1.  Let _name_ be a new [Private Name](#sec-private-names) whose _\[\[Description\]\]_ is _dn_.
            2.  Append _name_ to _classPrivateEnvironment_._\[\[Names\]\]_.
7.  If [ClassHeritage](#prod-ClassHeritage) is not present, then
    1.  Let _protoParent_ be [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
    2.  Let _constructorParent_ be [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
8.  Else,
    1.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _classEnv_.
    2.  NOTE: The [running execution context](#running-execution-context)'s PrivateEnvironment is _outerPrivateEnvironment_ when evaluating [ClassHeritage](#prod-ClassHeritage).
    3.  Let _superclassRef_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [ClassHeritage](#prod-ClassHeritage)).
    4.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _env_.
    5.  Let _superclass_ be ? [GetValue](#sec-getvalue)(? _superclassRef_).
    6.  If _superclass_ is null, then
        1.  Let _protoParent_ be null.
        2.  Let _constructorParent_ be [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
    7.  Else if [IsConstructor](#sec-isconstructor)(_superclass_) is false, then
        1.  Throw a TypeError exception.
    8.  Else,
        1.  Let _protoParent_ be ? [Get](#sec-get-o-p)(_superclass_, "prototype").
        2.  If _protoParent_ [is not an Object](#sec-object-type) and _protoParent_ is not null, throw a TypeError exception.
        3.  Let _constructorParent_ be _superclass_.
9.  Let _proto_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(_protoParent_).
10.  If [ClassBody](#prod-ClassBody) is not present, let _constructor_ be empty.
11.  Else, let _constructor_ be the [ConstructorMethod](#sec-static-semantics-constructormethod) of [ClassBody](#prod-ClassBody).
12.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _classEnv_.
13.  Set the [running execution context](#running-execution-context)'s PrivateEnvironment to _classPrivateEnvironment_.
14.  If _constructor_ is empty, then
     1.  Let _defaultConstructor_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures nothing and performs the following steps when called:
         1.  Let _args_ be the [List](#sec-list-and-record-specification-type) of arguments that was passed to this function by _\[\[Call\]\]_ or _\[\[Construct\]\]_.
         2.  If NewTarget is undefined, throw a TypeError exception.
         3.  Let _F_ be the [active function object](#active-function-object).
         4.  If _F_._\[\[ConstructorKind\]\]_ is derived, then
             1.  NOTE: This branch behaves similarly to `constructor(...args) { super(...args); }`. The most notable distinction is that while the aforementioned [ECMAScript source text](#sec-source-text) observably calls the [%Symbol.iterator%](#sec-well-known-symbols) method on `%Array.prototype%`, this function does not.
             2.  Let _func_ be ! _F_._\[\[GetPrototypeOf\]\]_().
             3.  If [IsConstructor](#sec-isconstructor)(_func_) is false, throw a TypeError exception.
             4.  Let _result_ be ? [Construct](#sec-construct)(_func_, _args_, NewTarget).
         5.  Else,
             1.  NOTE: This branch behaves similarly to `constructor() {}`.
             2.  Let _result_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Object.prototype%").
         6.  Perform ? [InitializeInstanceElements](#sec-initializeinstanceelements)(_result_, _F_).
         7.  Return [NormalCompletion](#sec-normalcompletion)(_result_).
     2.  Let _F_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_defaultConstructor_, 0, _className_, « _\[\[ConstructorKind\]\]_, _\[\[SourceText\]\]_, _\[\[PrivateMethods\]\]_, _\[\[Fields\]\]_ », [the current Realm Record](#current-realm), _constructorParent_).
15.  Else,
     1.  Let _constructorInfo_ be ! [DefineMethod](#sec-runtime-semantics-definemethod) of _constructor_ with arguments _proto_ and _constructorParent_.
     2.  Let _F_ be _constructorInfo_._\[\[Closure\]\]_.
     3.  Perform [MakeClassConstructor](#sec-makeclassconstructor)(_F_).
     4.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, _className_).
16.  Set _F_._\[\[SourceText\]\]_ to _sourceText_.
17.  Perform [MakeConstructor](#sec-makeconstructor)(_F_, false, _proto_).
18.  If [ClassHeritage](#prod-ClassHeritage) is present, set _F_._\[\[ConstructorKind\]\]_ to derived.
19.  Perform ! [DefineMethodProperty](#sec-definemethodproperty)(_proto_, "constructor", _F_, false).
20.  If [ClassBody](#prod-ClassBody) is not present, let _elements_ be a new empty [List](#sec-list-and-record-specification-type).
21.  Else, let _elements_ be the [NonConstructorElements](#sec-static-semantics-nonconstructorelements) of [ClassBody](#prod-ClassBody).
22.  Let _instancePrivateMethods_ be a new empty [List](#sec-list-and-record-specification-type).
23.  Let _staticPrivateMethods_ be a new empty [List](#sec-list-and-record-specification-type).
24.  Let _instanceFields_ be a new empty [List](#sec-list-and-record-specification-type).
25.  Let _staticElements_ be a new empty [List](#sec-list-and-record-specification-type).
26.  For each [ClassElement](#prod-ClassElement) _e_ of _elements_, do
     1.  If [IsStatic](#sec-static-semantics-isstatic) of _e_ is false, then
         1.  Let _element_ be [Completion](#sec-completion-ao)([ClassElementEvaluation](#sec-static-semantics-classelementevaluation) of _e_ with argument _proto_).
     2.  Else,
         1.  Let _element_ be [Completion](#sec-completion-ao)([ClassElementEvaluation](#sec-static-semantics-classelementevaluation) of _e_ with argument _F_).
     3.  If _element_ is an [abrupt completion](#sec-completion-record-specification-type), then
         1.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _env_.
         2.  Set the [running execution context](#running-execution-context)'s PrivateEnvironment to _outerPrivateEnvironment_.
         3.  Return ? _element_.
     4.  Set _element_ to ! _element_.
     5.  If _element_ is a [PrivateElement](#sec-privateelement-specification-type), then
         1.  [Assert](#assert): _element_._\[\[Kind\]\]_ is either method or accessor.
         2.  If [IsStatic](#sec-static-semantics-isstatic) of _e_ is false, let _container_ be _instancePrivateMethods_.
         3.  Else, let _container_ be _staticPrivateMethods_.
         4.  If _container_ contains a [PrivateElement](#sec-privateelement-specification-type) _pe_ such that _pe_._\[\[Key\]\]_ is _element_._\[\[Key\]\]_, then
             1.  [Assert](#assert): _element_._\[\[Kind\]\]_ and _pe_._\[\[Kind\]\]_ are both accessor.
             2.  If _element_._\[\[Get\]\]_ is undefined, then
                 1.  Let _combined_ be [PrivateElement](#sec-privateelement-specification-type) { _\[\[Key\]\]_: _element_._\[\[Key\]\]_, _\[\[Kind\]\]_: accessor, _\[\[Get\]\]_: _pe_._\[\[Get\]\]_, _\[\[Set\]\]_: _element_._\[\[Set\]\]_ }.
             3.  Else,
                 1.  Let _combined_ be [PrivateElement](#sec-privateelement-specification-type) { _\[\[Key\]\]_: _element_._\[\[Key\]\]_, _\[\[Kind\]\]_: accessor, _\[\[Get\]\]_: _element_._\[\[Get\]\]_, _\[\[Set\]\]_: _pe_._\[\[Set\]\]_ }.
             4.  Replace _pe_ in _container_ with _combined_.
         5.  Else,
             1.  Append _element_ to _container_.
     6.  Else if _element_ is a [ClassFieldDefinition Record](#sec-classfielddefinition-record-specification-type), then
         1.  If [IsStatic](#sec-static-semantics-isstatic) of _e_ is false, append _element_ to _instanceFields_.
         2.  Else, append _element_ to _staticElements_.
     7.  Else if _element_ is a [ClassStaticBlockDefinition Record](#sec-classstaticblockdefinition-record-specification-type), then
         1.  Append _element_ to _staticElements_.
27.  Set the [running execution context](#running-execution-context)'s LexicalEnvironment to _env_.
28.  If _classBinding_ is not undefined, then
     1.  Perform ! _classEnv_.InitializeBinding(_classBinding_, _F_).
29.  Set _F_._\[\[PrivateMethods\]\]_ to _instancePrivateMethods_.
30.  Set _F_._\[\[Fields\]\]_ to _instanceFields_.
31.  For each [PrivateElement](#sec-privateelement-specification-type) _method_ of _staticPrivateMethods_, do
     1.  Perform ! [PrivateMethodOrAccessorAdd](#sec-privatemethodoraccessoradd)(_F_, _method_).
32.  For each element _elementRecord_ of _staticElements_, do
     1.  If _elementRecord_ is a [ClassFieldDefinition Record](#sec-classfielddefinition-record-specification-type), then
         1.  Let _result_ be [Completion](#sec-completion-ao)([DefineField](#sec-definefield)(_F_, _elementRecord_)).
     2.  Else,
         1.  [Assert](#assert): _elementRecord_ is a [ClassStaticBlockDefinition Record](#sec-classstaticblockdefinition-record-specification-type).
         2.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_elementRecord_._\[\[BodyFunction\]\]_, _F_)).
     3.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
         1.  Set the [running execution context](#running-execution-context)'s PrivateEnvironment to _outerPrivateEnvironment_.
         2.  Return ? _result_.
33.  Set the [running execution context](#running-execution-context)'s PrivateEnvironment to _outerPrivateEnvironment_.
34.  Return _F_.


# 15.7.15 Runtime Semantics: BindingClassDeclarationEvaluation

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) BindingClassDeclarationEvaluation takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) a [function object](#function-object) or an [abrupt completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[ClassDeclaration](#prod-ClassDeclaration) : class [BindingIdentifier](#prod-BindingIdentifier) [ClassTail](#prod-ClassTail)

1.  Let _className_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [ClassDeclaration](#prod-ClassDeclaration).
3.  Let _value_ be ? [ClassDefinitionEvaluation](#sec-runtime-semantics-classdefinitionevaluation) of [ClassTail](#prod-ClassTail) with arguments _className_, _className_, and _sourceText_.
4.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
5.  Perform ? [InitializeBoundName](#sec-initializeboundname)(_className_, _value_, _env_).
6.  Return _value_.

[ClassDeclaration](#prod-ClassDeclaration) : class [ClassTail](#prod-ClassTail)

1.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [ClassDeclaration](#prod-ClassDeclaration).
2.  Return ? [ClassDefinitionEvaluation](#sec-runtime-semantics-classdefinitionevaluation) of [ClassTail](#prod-ClassTail) with arguments undefined, "default", and _sourceText_.

Note

[ClassDeclaration](#prod-ClassDeclaration) : class [ClassTail](#prod-ClassTail) only occurs as part of an [ExportDeclaration](#prod-ExportDeclaration) and establishing its binding is handled as part of the evaluation action for that production. See [16.2.3.7](#sec-exports-runtime-semantics-evaluation).


# 15.7.16 Runtime Semantics: Evaluation

[ClassDeclaration](#prod-ClassDeclaration) : class [BindingIdentifier](#prod-BindingIdentifier) [ClassTail](#prod-ClassTail)

1.  Perform ? [BindingClassDeclarationEvaluation](#sec-runtime-semantics-bindingclassdeclarationevaluation) of this [ClassDeclaration](#prod-ClassDeclaration).
2.  Return empty.

Note

[ClassDeclaration](#prod-ClassDeclaration) : class [ClassTail](#prod-ClassTail) only occurs as part of an [ExportDeclaration](#prod-ExportDeclaration) and is never directly evaluated.

[ClassExpression](#prod-ClassExpression) : class [ClassTail](#prod-ClassTail)

1.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [ClassExpression](#prod-ClassExpression).
2.  Return ? [ClassDefinitionEvaluation](#sec-runtime-semantics-classdefinitionevaluation) of [ClassTail](#prod-ClassTail) with arguments undefined, "", and _sourceText_.

[ClassExpression](#prod-ClassExpression) : class [BindingIdentifier](#prod-BindingIdentifier) [ClassTail](#prod-ClassTail)

1.  Let _className_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [ClassExpression](#prod-ClassExpression).
3.  Return ? [ClassDefinitionEvaluation](#sec-runtime-semantics-classdefinitionevaluation) of [ClassTail](#prod-ClassTail) with arguments _className_, _className_, and _sourceText_.

[ClassElementName](#prod-ClassElementName) : [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Let _privateIdentifier_ be the [StringValue](#sec-static-semantics-stringvalue) of [PrivateIdentifier](#prod-PrivateIdentifier).
2.  Let _privateEnvRec_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
3.  Let _names_ be _privateEnvRec_._\[\[Names\]\]_.
4.  [Assert](#assert): Exactly one element of _names_ is a [Private Name](#sec-private-names) whose _\[\[Description\]\]_ is _privateIdentifier_.
5.  Let _privateName_ be the [Private Name](#sec-private-names) in _names_ whose _\[\[Description\]\]_ is _privateIdentifier_.
6.  Return _privateName_.

[ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : \[empty\]

1.  Return undefined.


# 15.8 Async Function Definitions


## Syntax

[AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration)\[Yield, Await, Default\] : async \[no [LineTerminator](#prod-LineTerminator) here\] function [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } \[+Default\] async \[no [LineTerminator](#prod-LineTerminator) here\] function ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async \[no [LineTerminator](#prod-LineTerminator) here\] function [BindingIdentifier](#prod-BindingIdentifier)\[~Yield, +Await\]opt ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncMethod](#prod-AsyncMethod)\[Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionBody](#prod-AsyncFunctionBody) : [FunctionBody](#prod-FunctionBody)\[~Yield, +Await\] [AwaitExpression](#prod-AwaitExpression)\[Yield\] : await [UnaryExpression](#prod-UnaryExpression)\[?Yield, +Await\] Note 1

`await` is parsed as a [keyword](#sec-keywords-and-reserved-words) of an [AwaitExpression](#prod-AwaitExpression) when the <sub>\[Await\]</sub> parameter is present. The <sub>\[Await\]</sub> parameter is present in the top level of the following contexts, although the parameter may be absent in some contexts depending on the nonterminals, such as [FunctionBody](#prod-FunctionBody):

-   In an [AsyncFunctionBody](#prod-AsyncFunctionBody).
-   In the [FormalParameters](#prod-FormalParameters) of an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncFunctionExpression](#prod-AsyncFunctionExpression), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), or [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression). [AwaitExpression](#prod-AwaitExpression) in this position is a Syntax error via [static semantics](#sec-static-semantic-rules).
-   In a [Module](#prod-Module).

When [Script](#prod-Script) is the syntactic [goal symbol](#sec-context-free-grammars), `await` may be parsed as an identifier when the <sub>\[Await\]</sub> parameter is absent. This includes the following contexts:

-   Anywhere outside of an [AsyncFunctionBody](#prod-AsyncFunctionBody) or [FormalParameters](#prod-FormalParameters) of an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncFunctionExpression](#prod-AsyncFunctionExpression), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), or [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression).
-   In the [BindingIdentifier](#prod-BindingIdentifier) of a [FunctionExpression](#prod-FunctionExpression), [GeneratorExpression](#prod-GeneratorExpression), or [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression).

Note 2

Unlike [YieldExpression](#prod-YieldExpression), it is a Syntax Error to omit the operand of an [AwaitExpression](#prod-AwaitExpression). You must await something.


# 15.8.1 Static Semantics: Early Errors

[AsyncMethod](#prod-AsyncMethod) : async [ClassElementName](#prod-ClassElementName) ( [UniqueFormalParameters](#prod-UniqueFormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [AsyncFunctionBody](#prod-AsyncFunctionBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [UniqueFormalParameters](#prod-UniqueFormalParameters) is false.
-   It is a Syntax Error if [HasDirectSuper](#sec-static-semantics-hasdirectsuper) of [AsyncMethod](#prod-AsyncMethod) is true.
-   It is a Syntax Error if [UniqueFormalParameters](#prod-UniqueFormalParameters) [Contains](#sec-static-semantics-contains) [AwaitExpression](#prod-AwaitExpression) is true.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [UniqueFormalParameters](#prod-UniqueFormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [AsyncFunctionBody](#prod-AsyncFunctionBody).

[AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

-   It is a Syntax Error if [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [AsyncFunctionBody](#prod-AsyncFunctionBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [FormalParameters](#prod-FormalParameters) is false.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [AwaitExpression](#prod-AwaitExpression) is true.
-   If [IsStrict](#sec-isstrict)([FormalParameters](#prod-FormalParameters)) is true, the Early Error rules for [UniqueFormalParameters](#prod-UniqueFormalParameters) : [FormalParameters](#prod-FormalParameters) are applied.
-   If [BindingIdentifier](#prod-BindingIdentifier) is present and [IsStrict](#sec-isstrict)([BindingIdentifier](#prod-BindingIdentifier)) is true, it is a Syntax Error if the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier) is either "eval" or "arguments".
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [FormalParameters](#prod-FormalParameters) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [AsyncFunctionBody](#prod-AsyncFunctionBody).
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [AsyncFunctionBody](#prod-AsyncFunctionBody) [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty) is true.
-   It is a Syntax Error if [FormalParameters](#prod-FormalParameters) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.
-   It is a Syntax Error if [AsyncFunctionBody](#prod-AsyncFunctionBody) [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall) is true.


# 15.8.2 Runtime Semantics: InstantiateAsyncFunctionObject

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateAsyncFunctionObject takes arguments _env_ (an [Environment Record](#sec-environment-records)) and _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Let _name_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration).
3.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncFunction.prototype%](#sec-async-function-prototype-properties), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncFunctionBody](#prod-AsyncFunctionBody), non-lexical-this, _env_, _privateEnv_).
4.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, _name_).
5.  Return _F_.

[AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration) : async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration).
2.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncFunction.prototype%](#sec-async-function-prototype-properties), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncFunctionBody](#prod-AsyncFunctionBody), non-lexical-this, _env_, _privateEnv_).
3.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, "default").
4.  Return _F_.


# 15.8.3 Runtime Semantics: InstantiateAsyncFunctionExpression

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateAsyncFunctionExpression takes optional argument _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  If _name_ is not present, set _name_ to "".
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncFunctionExpression](#prod-AsyncFunctionExpression).
5.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncFunction.prototype%](#sec-async-function-prototype-properties), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncFunctionBody](#prod-AsyncFunctionBody), non-lexical-this, _env_, _privateEnv_).
6.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
7.  Return _closure_.

[AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function [BindingIdentifier](#prod-BindingIdentifier) ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  [Assert](#assert): _name_ is not present.
2.  Set _name_ to the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
3.  Let _outerEnv_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
4.  Let _funcEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_outerEnv_).
5.  Perform ! _funcEnv_.CreateImmutableBinding(_name_, false).
6.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
7.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncFunctionExpression](#prod-AsyncFunctionExpression).
8.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncFunction.prototype%](#sec-async-function-prototype-properties), _sourceText_, [FormalParameters](#prod-FormalParameters), [AsyncFunctionBody](#prod-AsyncFunctionBody), non-lexical-this, _funcEnv_, _privateEnv_).
9.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
10.  Perform ! _funcEnv_.InitializeBinding(_name_, _closure_).
11.  Return _closure_.

Note

The [BindingIdentifier](#prod-BindingIdentifier) in an [AsyncFunctionExpression](#prod-AsyncFunctionExpression) can be referenced from inside the [AsyncFunctionExpression](#prod-AsyncFunctionExpression)'s [AsyncFunctionBody](#prod-AsyncFunctionBody) to allow the function to call itself recursively. However, unlike in a [FunctionDeclaration](#prod-FunctionDeclaration), the [BindingIdentifier](#prod-BindingIdentifier) in a [AsyncFunctionExpression](#prod-AsyncFunctionExpression) cannot be referenced from and does not affect the scope enclosing the [AsyncFunctionExpression](#prod-AsyncFunctionExpression).


# 15.8.4 Runtime Semantics: EvaluateAsyncFunctionBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateAsyncFunctionBody takes arguments _functionObject_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [return completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[AsyncFunctionBody](#prod-AsyncFunctionBody) : [FunctionBody](#prod-FunctionBody)

1.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
2.  Let _completion_ be [Completion](#sec-completion-ao)([FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)(_functionObject_, _argumentsList_)).
3.  If _completion_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _completion_._\[\[Value\]\]_ »).
4.  Else,
    1.  Perform [AsyncFunctionStart](#sec-async-functions-abstract-operations-async-function-start)(_promiseCapability_, [FunctionBody](#prod-FunctionBody)).
5.  Return [ReturnCompletion](#sec-returncompletion)(_promiseCapability_._\[\[Promise\]\]_).


# 15.8.5 Runtime Semantics: Evaluation

[AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async function [BindingIdentifier](#prod-BindingIdentifier)opt ( [FormalParameters](#prod-FormalParameters) ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return [InstantiateAsyncFunctionExpression](#sec-runtime-semantics-instantiateasyncfunctionexpression) of [AsyncFunctionExpression](#prod-AsyncFunctionExpression).

[AwaitExpression](#prod-AwaitExpression) : await [UnaryExpression](#prod-UnaryExpression)

1.  Let _exprRef_ be ? [Evaluation](#sec-evaluation) of [UnaryExpression](#prod-UnaryExpression).
2.  Let _value_ be ? [GetValue](#sec-getvalue)(_exprRef_).
3.  Return ? [Await](#await)(_value_).


# 15.9 Async Arrow Function Definitions


## Syntax

[AsyncArrowFunction](#prod-AsyncArrowFunction)\[In, Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier)\[?Yield\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [AsyncConciseBody](#prod-AsyncConciseBody)\[?In\] [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [AsyncConciseBody](#prod-AsyncConciseBody)\[?In\] [AsyncConciseBody](#prod-AsyncConciseBody)\[In\] : \[lookahead ≠ {\] [ExpressionBody](#prod-ExpressionBody)\[?In, +Await\] { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier)\[Yield\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, +Await\] [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\]


## Supplemental Syntax

When processing an instance of the production  
[AsyncArrowFunction](#prod-AsyncArrowFunction) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) \=> [AsyncConciseBody](#prod-AsyncConciseBody)  
the interpretation of [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) is refined using the following grammar:

[AsyncArrowHead](#prod-AsyncArrowHead) : async \[no [LineTerminator](#prod-LineTerminator) here\] [ArrowFormalParameters](#prod-ArrowFormalParameters)\[~Yield, +Await\]


# 15.9.1 Static Semantics: Early Errors

[AsyncArrowFunction](#prod-AsyncArrowFunction) : async [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [AsyncConciseBody](#prod-AsyncConciseBody).

[AsyncArrowFunction](#prod-AsyncArrowFunction) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

-   [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) [must cover](#must-cover) an [AsyncArrowHead](#prod-AsyncArrowHead).
-   It is a Syntax Error if [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) [Contains](#sec-static-semantics-contains) [YieldExpression](#prod-YieldExpression) is true.
-   It is a Syntax Error if [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) [Contains](#sec-static-semantics-contains) [AwaitExpression](#prod-AwaitExpression) is true.
-   It is a Syntax Error if any element of the [BoundNames](#sec-static-semantics-boundnames) of [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) also occurs in the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [AsyncConciseBody](#prod-AsyncConciseBody).
-   It is a Syntax Error if [AsyncConciseBodyContainsUseStrict](#sec-static-semantics-asyncconcisebodycontainsusestrict) of [AsyncConciseBody](#prod-AsyncConciseBody) is true and [IsSimpleParameterList](#sec-static-semantics-issimpleparameterlist) of [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) is false.


# 15.9.2 Static Semantics: AsyncConciseBodyContainsUseStrict

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) AsyncConciseBodyContainsUseStrict takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[AsyncConciseBody](#prod-AsyncConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Return false.

[AsyncConciseBody](#prod-AsyncConciseBody) : { [AsyncFunctionBody](#prod-AsyncFunctionBody) }

1.  Return [FunctionBodyContainsUseStrict](#sec-static-semantics-functionbodycontainsusestrict) of [AsyncFunctionBody](#prod-AsyncFunctionBody).


# 15.9.3 Runtime Semantics: EvaluateAsyncConciseBody

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) EvaluateAsyncConciseBody takes arguments _functionObject_ (an ECMAScript [function object](#function-object)) and _argumentsList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns a [return completion](#sec-completion-record-specification-type). It is defined piecewise over the following productions:

[AsyncConciseBody](#prod-AsyncConciseBody) : [ExpressionBody](#prod-ExpressionBody)

1.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
2.  Let _completion_ be [Completion](#sec-completion-ao)([FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)(_functionObject_, _argumentsList_)).
3.  If _completion_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _completion_._\[\[Value\]\]_ »).
4.  Else,
    1.  Perform [AsyncFunctionStart](#sec-async-functions-abstract-operations-async-function-start)(_promiseCapability_, [ExpressionBody](#prod-ExpressionBody)).
5.  Return [ReturnCompletion](#sec-returncompletion)(_promiseCapability_._\[\[Promise\]\]_).


# 15.9.4 Runtime Semantics: InstantiateAsyncArrowFunctionExpression

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) InstantiateAsyncArrowFunctionExpression takes optional argument _name_ (a [property key](#property-key) or a [Private Name](#sec-private-names)) and returns an ECMAScript [function object](#function-object). It is defined piecewise over the following productions:

[AsyncArrowFunction](#prod-AsyncArrowFunction) : async [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

1.  If _name_ is not present, set _name_ to "".
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncArrowFunction](#prod-AsyncArrowFunction).
5.  Let _parameters_ be [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier).
6.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncFunction.prototype%](#sec-async-function-prototype-properties), _sourceText_, _parameters_, [AsyncConciseBody](#prod-AsyncConciseBody), lexical-this, _env_, _privateEnv_).
7.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
8.  Return _closure_.

[AsyncArrowFunction](#prod-AsyncArrowFunction) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

1.  If _name_ is not present, set _name_ to "".
2.  Let _env_ be the LexicalEnvironment of the [running execution context](#running-execution-context).
3.  Let _privateEnv_ be the [running execution context](#running-execution-context)'s PrivateEnvironment.
4.  Let _sourceText_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [AsyncArrowFunction](#prod-AsyncArrowFunction).
5.  Let _head_ be the [AsyncArrowHead](#prod-AsyncArrowHead) that is [covered](#sec-syntactic-grammar) by [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead).
6.  Let _parameters_ be the [ArrowFormalParameters](#prod-ArrowFormalParameters) of _head_.
7.  Let _closure_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)([%AsyncFunction.prototype%](#sec-async-function-prototype-properties), _sourceText_, _parameters_, [AsyncConciseBody](#prod-AsyncConciseBody), lexical-this, _env_, _privateEnv_).
8.  Perform [SetFunctionName](#sec-setfunctionname)(_closure_, _name_).
9.  Return _closure_.


# 15.9.5 Runtime Semantics: Evaluation

[AsyncArrowFunction](#prod-AsyncArrowFunction) : async [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier) \=> [AsyncConciseBody](#prod-AsyncConciseBody) [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) \=> [AsyncConciseBody](#prod-AsyncConciseBody)

1.  Return [InstantiateAsyncArrowFunctionExpression](#sec-runtime-semantics-instantiateasyncarrowfunctionexpression) of [AsyncArrowFunction](#prod-AsyncArrowFunction).


# 15.10 Tail Position Calls


# 15.10.1 Static Semantics: IsInTailPosition ( _call_ )

The abstract operation IsInTailPosition takes argument _call_ (a [CallExpression](#prod-CallExpression) [Parse Node](#sec-syntactic-grammar), a [MemberExpression](#prod-MemberExpression) [Parse Node](#sec-syntactic-grammar), or an [OptionalChain](#prod-OptionalChain) [Parse Node](#sec-syntactic-grammar)) and returns a Boolean. It performs the following steps when called:

1.  If [IsStrict](#sec-isstrict)(_call_) is false, return false.
2.  If _call_ is not contained within a [FunctionBody](#prod-FunctionBody), a [ConciseBody](#prod-ConciseBody), or an [AsyncConciseBody](#prod-AsyncConciseBody), return false.
3.  Let _body_ be the [FunctionBody](#prod-FunctionBody), [ConciseBody](#prod-ConciseBody), or [AsyncConciseBody](#prod-AsyncConciseBody) that most closely contains _call_.
4.  If _body_ is the [FunctionBody](#prod-FunctionBody) of a [GeneratorBody](#prod-GeneratorBody), return false.
5.  If _body_ is the [FunctionBody](#prod-FunctionBody) of an [AsyncFunctionBody](#prod-AsyncFunctionBody), return false.
6.  If _body_ is the [FunctionBody](#prod-FunctionBody) of an [AsyncGeneratorBody](#prod-AsyncGeneratorBody), return false.
7.  If _body_ is an [AsyncConciseBody](#prod-AsyncConciseBody), return false.
8.  Return the result of [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of _body_ with argument _call_.

Note

Tail Position calls are only defined in [strict mode code](#sec-strict-mode-code) because of a common non-standard language extension (see [10.2.4](#sec-addrestrictedfunctionproperties)) that enables observation of the chain of caller contexts.


# 15.10.2 Static Semantics: HasCallInTailPosition

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) HasCallInTailPosition takes argument _call_ (a [CallExpression](#prod-CallExpression) [Parse Node](#sec-syntactic-grammar), a [MemberExpression](#prod-MemberExpression) [Parse Node](#sec-syntactic-grammar), or an [OptionalChain](#prod-OptionalChain) [Parse Node](#sec-syntactic-grammar)) and returns a Boolean.

Note 1

_call_ is a [Parse Node](#sec-syntactic-grammar) that represents a specific range of source text. When the following algorithms compare _call_ to another [Parse Node](#sec-syntactic-grammar), it is a test of whether they represent the same source text.

Note 2

A potential tail position call that is immediately followed by return [GetValue](#sec-getvalue) of the call result is also a possible tail position call. A function call cannot return a [Reference Record](#sec-reference-record-specification-type), so such a [GetValue](#sec-getvalue) operation will always return the same value as the actual function call result.

It is defined piecewise over the following productions:

[StatementList](#prod-StatementList) : [StatementList](#prod-StatementList) [StatementListItem](#prod-StatementListItem)

1.  Let _has_ be [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [StatementList](#prod-StatementList) with argument _call_.
2.  If _has_ is true, return true.
3.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [StatementListItem](#prod-StatementListItem) with argument _call_.

[FunctionStatementList](#prod-FunctionStatementList) : \[empty\] [StatementListItem](#prod-StatementListItem) : [Declaration](#prod-Declaration) [Statement](#prod-Statement) : [VariableStatement](#prod-VariableStatement) [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement) [ContinueStatement](#prod-ContinueStatement) [BreakStatement](#prod-BreakStatement) [ThrowStatement](#prod-ThrowStatement) [DebuggerStatement](#prod-DebuggerStatement) [Block](#prod-Block) : { } [ReturnStatement](#prod-ReturnStatement) : return ; [LabelledItem](#prod-LabelledItem) : [FunctionDeclaration](#prod-FunctionDeclaration) [ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) of [AssignmentExpression](#prod-AssignmentExpression) ) [Statement](#prod-Statement) [CaseBlock](#prod-CaseBlock) : { }

1.  Return false.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) else [Statement](#prod-Statement)

1.  Let _has_ be [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of the first [Statement](#prod-Statement) with argument _call_.
2.  If _has_ is true, return true.
3.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of the second [Statement](#prod-Statement) with argument _call_.

[IfStatement](#prod-IfStatement) : if ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) [DoWhileStatement](#prod-DoWhileStatement) : do [Statement](#prod-Statement) while ( [Expression](#prod-Expression) ) ; [WhileStatement](#prod-WhileStatement) : while ( [Expression](#prod-Expression) ) [Statement](#prod-Statement) [ForStatement](#prod-ForStatement) : for ( [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( var [VariableDeclarationList](#prod-VariableDeclarationList) ; [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) for ( [LexicalDeclaration](#prod-LexicalDeclaration) [Expression](#prod-Expression)opt ; [Expression](#prod-Expression)opt ) [Statement](#prod-Statement) [ForInOfStatement](#prod-ForInOfStatement) : for ( [LeftHandSideExpression](#prod-LeftHandSideExpression) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( var [ForBinding](#prod-ForBinding) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) for ( [ForDeclaration](#prod-ForDeclaration) in [Expression](#prod-Expression) ) [Statement](#prod-Statement) [WithStatement](#prod-WithStatement) : with ( [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [Statement](#prod-Statement) with argument _call_.

[LabelledStatement](#prod-LabelledStatement) : [LabelIdentifier](#prod-LabelIdentifier) : [LabelledItem](#prod-LabelledItem)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [LabelledItem](#prod-LabelledItem) with argument _call_.

[ReturnStatement](#prod-ReturnStatement) : return [Expression](#prod-Expression) ;

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [Expression](#prod-Expression) with argument _call_.

[SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [CaseBlock](#prod-CaseBlock) with argument _call_.

[CaseBlock](#prod-CaseBlock) : { [CaseClauses](#prod-CaseClauses)opt [DefaultClause](#prod-DefaultClause) [CaseClauses](#prod-CaseClauses)opt }

1.  Let _has_ be false.
2.  If the first [CaseClauses](#prod-CaseClauses) is present, set _has_ to [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of the first [CaseClauses](#prod-CaseClauses) with argument _call_.
3.  If _has_ is true, return true.
4.  Set _has_ to [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [DefaultClause](#prod-DefaultClause) with argument _call_.
5.  If _has_ is true, return true.
6.  If the second [CaseClauses](#prod-CaseClauses) is present, set _has_ to [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of the second [CaseClauses](#prod-CaseClauses) with argument _call_.
7.  Return _has_.

[CaseClauses](#prod-CaseClauses) : [CaseClauses](#prod-CaseClauses) [CaseClause](#prod-CaseClause)

1.  Let _has_ be [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [CaseClauses](#prod-CaseClauses) with argument _call_.
2.  If _has_ is true, return true.
3.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [CaseClause](#prod-CaseClause) with argument _call_.

[CaseClause](#prod-CaseClause) : case [Expression](#prod-Expression) : [StatementList](#prod-StatementList)opt [DefaultClause](#prod-DefaultClause) : default : [StatementList](#prod-StatementList)opt

1.  If [StatementList](#prod-StatementList) is present, return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [StatementList](#prod-StatementList) with argument _call_.
2.  Return false.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Catch](#prod-Catch)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [Catch](#prod-Catch) with argument _call_.

[TryStatement](#prod-TryStatement) : try [Block](#prod-Block) [Finally](#prod-Finally) try [Block](#prod-Block) [Catch](#prod-Catch) [Finally](#prod-Finally)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [Finally](#prod-Finally) with argument _call_.

[Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [Block](#prod-Block) with argument _call_.

[AssignmentExpression](#prod-AssignmentExpression) : [YieldExpression](#prod-YieldExpression) [ArrowFunction](#prod-ArrowFunction) [AsyncArrowFunction](#prod-AsyncArrowFunction) [LeftHandSideExpression](#prod-LeftHandSideExpression) \= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) [AssignmentOperator](#prod-AssignmentOperator) [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) &&= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ||= [AssignmentExpression](#prod-AssignmentExpression) [LeftHandSideExpression](#prod-LeftHandSideExpression) ??= [AssignmentExpression](#prod-AssignmentExpression) [BitwiseANDExpression](#prod-BitwiseANDExpression) : [BitwiseANDExpression](#prod-BitwiseANDExpression) & [EqualityExpression](#prod-EqualityExpression) [BitwiseXORExpression](#prod-BitwiseXORExpression) : [BitwiseXORExpression](#prod-BitwiseXORExpression) ^ [BitwiseANDExpression](#prod-BitwiseANDExpression) [BitwiseORExpression](#prod-BitwiseORExpression) : [BitwiseORExpression](#prod-BitwiseORExpression) | [BitwiseXORExpression](#prod-BitwiseXORExpression) [EqualityExpression](#prod-EqualityExpression) : [EqualityExpression](#prod-EqualityExpression) \== [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) != [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) \=== [RelationalExpression](#prod-RelationalExpression) [EqualityExpression](#prod-EqualityExpression) !== [RelationalExpression](#prod-RelationalExpression) [RelationalExpression](#prod-RelationalExpression) : [RelationalExpression](#prod-RelationalExpression) < [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) \> [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) <= [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) \>= [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) instanceof [ShiftExpression](#prod-ShiftExpression) [RelationalExpression](#prod-RelationalExpression) in [ShiftExpression](#prod-ShiftExpression) [PrivateIdentifier](#prod-PrivateIdentifier) in [ShiftExpression](#prod-ShiftExpression) [ShiftExpression](#prod-ShiftExpression) : [ShiftExpression](#prod-ShiftExpression) << [AdditiveExpression](#prod-AdditiveExpression) [ShiftExpression](#prod-ShiftExpression) \>> [AdditiveExpression](#prod-AdditiveExpression) [ShiftExpression](#prod-ShiftExpression) \>>> [AdditiveExpression](#prod-AdditiveExpression) [AdditiveExpression](#prod-AdditiveExpression) : [AdditiveExpression](#prod-AdditiveExpression) + [MultiplicativeExpression](#prod-MultiplicativeExpression) [AdditiveExpression](#prod-AdditiveExpression) \- [MultiplicativeExpression](#prod-MultiplicativeExpression) [MultiplicativeExpression](#prod-MultiplicativeExpression) : [MultiplicativeExpression](#prod-MultiplicativeExpression) [MultiplicativeOperator](#prod-MultiplicativeOperator) [ExponentiationExpression](#prod-ExponentiationExpression) [ExponentiationExpression](#prod-ExponentiationExpression) : [UpdateExpression](#prod-UpdateExpression) \*\* [ExponentiationExpression](#prod-ExponentiationExpression) [UpdateExpression](#prod-UpdateExpression) : [LeftHandSideExpression](#prod-LeftHandSideExpression) ++ [LeftHandSideExpression](#prod-LeftHandSideExpression) \-- ++ [UnaryExpression](#prod-UnaryExpression) \-- [UnaryExpression](#prod-UnaryExpression) [UnaryExpression](#prod-UnaryExpression) : delete [UnaryExpression](#prod-UnaryExpression) void [UnaryExpression](#prod-UnaryExpression) typeof [UnaryExpression](#prod-UnaryExpression) + [UnaryExpression](#prod-UnaryExpression) \- [UnaryExpression](#prod-UnaryExpression) ~ [UnaryExpression](#prod-UnaryExpression) ! [UnaryExpression](#prod-UnaryExpression) [AwaitExpression](#prod-AwaitExpression) [CallExpression](#prod-CallExpression) : [SuperCall](#prod-SuperCall) [ImportCall](#prod-ImportCall) [CallExpression](#prod-CallExpression) \[[Expression](#prod-Expression) \] [CallExpression](#prod-CallExpression) . [IdentifierName](#prod-IdentifierName) [CallExpression](#prod-CallExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) [NewExpression](#prod-NewExpression) : new [NewExpression](#prod-NewExpression) [MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) \[[Expression](#prod-Expression) \] [MemberExpression](#prod-MemberExpression) . [IdentifierName](#prod-IdentifierName) [SuperProperty](#prod-SuperProperty) [MetaProperty](#prod-MetaProperty) new [MemberExpression](#prod-MemberExpression) [Arguments](#prod-Arguments) [MemberExpression](#prod-MemberExpression) . [PrivateIdentifier](#prod-PrivateIdentifier) [PrimaryExpression](#prod-PrimaryExpression) : this [IdentifierReference](#prod-IdentifierReference) [Literal](#prod-Literal) [ArrayLiteral](#prod-ArrayLiteral) [ObjectLiteral](#prod-ObjectLiteral) [FunctionExpression](#prod-FunctionExpression) [ClassExpression](#prod-ClassExpression) [GeneratorExpression](#prod-GeneratorExpression) [AsyncFunctionExpression](#prod-AsyncFunctionExpression) [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateLiteral](#prod-TemplateLiteral)

1.  Return false.

[Expression](#prod-Expression) : [AssignmentExpression](#prod-AssignmentExpression) [Expression](#prod-Expression) , [AssignmentExpression](#prod-AssignmentExpression)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [AssignmentExpression](#prod-AssignmentExpression) with argument _call_.

[ConditionalExpression](#prod-ConditionalExpression) : [ShortCircuitExpression](#prod-ShortCircuitExpression) ? [AssignmentExpression](#prod-AssignmentExpression) : [AssignmentExpression](#prod-AssignmentExpression)

1.  Let _has_ be [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of the first [AssignmentExpression](#prod-AssignmentExpression) with argument _call_.
2.  If _has_ is true, return true.
3.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of the second [AssignmentExpression](#prod-AssignmentExpression) with argument _call_.

[LogicalANDExpression](#prod-LogicalANDExpression) : [LogicalANDExpression](#prod-LogicalANDExpression) && [BitwiseORExpression](#prod-BitwiseORExpression)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [BitwiseORExpression](#prod-BitwiseORExpression) with argument _call_.

[LogicalORExpression](#prod-LogicalORExpression) : [LogicalORExpression](#prod-LogicalORExpression) || [LogicalANDExpression](#prod-LogicalANDExpression)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [LogicalANDExpression](#prod-LogicalANDExpression) with argument _call_.

[CoalesceExpression](#prod-CoalesceExpression) : [CoalesceExpressionHead](#prod-CoalesceExpressionHead) ?? [BitwiseORExpression](#prod-BitwiseORExpression)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [BitwiseORExpression](#prod-BitwiseORExpression) with argument _call_.

[CallExpression](#prod-CallExpression) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) [CallExpression](#prod-CallExpression) [Arguments](#prod-Arguments) [CallExpression](#prod-CallExpression) [TemplateLiteral](#prod-TemplateLiteral)

1.  If this [CallExpression](#prod-CallExpression) is _call_, return true.
2.  Return false.

[OptionalExpression](#prod-OptionalExpression) : [MemberExpression](#prod-MemberExpression) [OptionalChain](#prod-OptionalChain) [CallExpression](#prod-CallExpression) [OptionalChain](#prod-OptionalChain) [OptionalExpression](#prod-OptionalExpression) [OptionalChain](#prod-OptionalChain)

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [OptionalChain](#prod-OptionalChain) with argument _call_.

[OptionalChain](#prod-OptionalChain) : ?. \[[Expression](#prod-Expression) \] ?. [IdentifierName](#prod-IdentifierName) ?. [PrivateIdentifier](#prod-PrivateIdentifier) [OptionalChain](#prod-OptionalChain) \[[Expression](#prod-Expression) \] [OptionalChain](#prod-OptionalChain) . [IdentifierName](#prod-IdentifierName) [OptionalChain](#prod-OptionalChain) . [PrivateIdentifier](#prod-PrivateIdentifier)

1.  Return false.

[OptionalChain](#prod-OptionalChain) : ?. [Arguments](#prod-Arguments) [OptionalChain](#prod-OptionalChain) [Arguments](#prod-Arguments)

1.  If this [OptionalChain](#prod-OptionalChain) is _call_, return true.
2.  Return false.

[MemberExpression](#prod-MemberExpression) : [MemberExpression](#prod-MemberExpression) [TemplateLiteral](#prod-TemplateLiteral)

1.  If this [MemberExpression](#prod-MemberExpression) is _call_, return true.
2.  Return false.

[PrimaryExpression](#prod-PrimaryExpression) : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)

1.  Let _expr_ be the [ParenthesizedExpression](#prod-ParenthesizedExpression) that is [covered](#sec-syntactic-grammar) by [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList).
2.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of _expr_ with argument _call_.

[ParenthesizedExpression](#prod-ParenthesizedExpression) : ( [Expression](#prod-Expression) )

1.  Return [HasCallInTailPosition](#sec-static-semantics-hascallintailposition) of [Expression](#prod-Expression) with argument _call_.


# 15.10.3 PrepareForTailCall ( )

The abstract operation PrepareForTailCall takes no arguments and returns unused. It performs the following steps when called:

1.  [Assert](#assert): The current [execution context](#sec-execution-contexts) will not subsequently be used for the evaluation of any ECMAScript code or built-in functions. The invocation of Call subsequent to the invocation of this abstract operation will create and push a new [execution context](#sec-execution-contexts) before performing any such evaluation.
2.  Discard all resources associated with the current [execution context](#sec-execution-contexts).
3.  Return unused.

A tail position call must either release any transient internal resources associated with the currently executing function [execution context](#sec-execution-contexts) before invoking the target function or reuse those resources in support of the target function.

Note

For example, a tail position call should only grow an implementation's activation record stack by the amount that the size of the target function's activation record exceeds the size of the calling function's activation record. If the target function's activation record is smaller, then the total size of the stack should decrease.


# 16 ECMAScript Language: Scripts and Modules


# 16.1 Scripts


## Syntax

[Script](#prod-Script) : [ScriptBody](#prod-ScriptBody)opt [ScriptBody](#prod-ScriptBody) : [StatementList](#prod-StatementList)\[~Yield, ~Await, ~Return\]


# 16.1.1 Static Semantics: Early Errors

[Script](#prod-Script) : [ScriptBody](#prod-ScriptBody)

-   It is a Syntax Error if the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ScriptBody](#prod-ScriptBody) contains any duplicate entries.
-   It is a Syntax Error if any element of the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ScriptBody](#prod-ScriptBody) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [ScriptBody](#prod-ScriptBody).

[ScriptBody](#prod-ScriptBody) : [StatementList](#prod-StatementList)

-   It is a Syntax Error if [StatementList](#prod-StatementList) [Contains](#sec-static-semantics-contains) `super` unless the source text containing `super` is eval code that is being processed by a [direct eval](#sec-function-calls-runtime-semantics-evaluation). Additional [early error](#early-error) rules for `super` within [direct eval](#sec-function-calls-runtime-semantics-evaluation) are defined in [19.2.1.1](#sec-performeval).
-   It is a Syntax Error if [StatementList](#prod-StatementList) [Contains](#sec-static-semantics-contains) [NewTarget](#prod-NewTarget) unless the source text containing [NewTarget](#prod-NewTarget) is eval code that is being processed by a [direct eval](#sec-function-calls-runtime-semantics-evaluation). Additional [early error](#early-error) rules for [NewTarget](#prod-NewTarget) in [direct eval](#sec-function-calls-runtime-semantics-evaluation) are defined in [19.2.1.1](#sec-performeval).
-   It is a Syntax Error if [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [StatementList](#prod-StatementList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [StatementList](#prod-StatementList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [StatementList](#prod-StatementList) with arguments « » and « » is true.
-   It is a Syntax Error if [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of [StatementList](#prod-StatementList) with argument « » is false unless the source text containing [ScriptBody](#prod-ScriptBody) is eval code that is being processed by a [direct eval](#sec-function-calls-runtime-semantics-evaluation).


# 16.1.2 Static Semantics: ScriptIsStrict

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ScriptIsStrict takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[Script](#prod-Script) : [ScriptBody](#prod-ScriptBody)opt

1.  If [ScriptBody](#prod-ScriptBody) is present and the [Directive Prologue](#directive-prologue) of [ScriptBody](#prod-ScriptBody) contains a [Use Strict Directive](#use-strict-directive), return true; otherwise return false.


# 16.1.3 Runtime Semantics: Evaluation

[Script](#prod-Script) : \[empty\]

1.  Return undefined.


# 16.1.4 Script Records

A Script Record encapsulates information about a script being evaluated. Each script record contains the fields listed in [Table 37](#table-script-records).

Table 37: [Script Record](#script-record) Fields

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Realm]]</var></td><td>a <emu-xref href="#realm-record" id="_ref_8251"><a href="#realm-record">Realm Record</a></emu-xref></td><td>The <emu-xref href="#realm" id="_ref_8252"><a href="#realm">realm</a></emu-xref> within which this script was created.</td></tr><tr><td><var class="field">[[ECMAScriptCode]]</var></td><td>a <emu-nt id="_ref_23034"><a href="#prod-Script">Script</a></emu-nt> <emu-xref href="#sec-syntactic-grammar" id="_ref_8253"><a href="#sec-syntactic-grammar">Parse Node</a></emu-xref></td><td>The result of parsing the source text of this script.</td></tr><tr><td><var class="field">[[LoadedModules]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8254"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#loadedmodulerequest-record" id="_ref_8255"><a href="#loadedmodulerequest-record">LoadedModuleRequest Records</a></emu-xref></td><td>A map from the specifier strings imported by this script to the resolved <emu-xref href="#sec-abstract-module-records" id="_ref_8256"><a href="#sec-abstract-module-records">Module Record</a></emu-xref>. The list does not contain two different <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8257"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> <var>r1</var> and <var>r2</var> such that <emu-xref aoid="ModuleRequestsEqual" id="_ref_8258"><a href="#sec-ModuleRequestsEqual">ModuleRequestsEqual</a></emu-xref>(<var>r1</var>, <var>r2</var>) is <emu-val>true</emu-val>.</td></tr><tr><td><var class="field">[[HostDefined]]</var></td><td>anything (default value is <emu-const>empty</emu-const>)</td><td>Field reserved for use by <emu-xref href="#host-environment" id="_ref_8259"><a href="#host-environment">host environments</a></emu-xref> that need to associate additional information with a script.</td></tr></tbody></table>


# 16.1.5 ParseScript ( _sourceText_, _realm_, _hostDefined_ )

The abstract operation ParseScript takes arguments _sourceText_ ([ECMAScript source text](#sec-source-text)), _realm_ (a [Realm Record](#realm-record)), and _hostDefined_ (anything) and returns a [Script Record](#script-record) or a non-empty [List](#sec-list-and-record-specification-type) of SyntaxError objects. It creates a [Script Record](#script-record) based upon the result of parsing _sourceText_ as a [Script](#prod-Script). It performs the following steps when called:

1.  Let _script_ be [ParseText](#sec-parsetext)(_sourceText_, [Script](#prod-Script)).
2.  If _script_ is a [List](#sec-list-and-record-specification-type) of errors, return _script_.
3.  Return [Script Record](#script-record) { _\[\[Realm\]\]_: _realm_, _\[\[ECMAScriptCode\]\]_: _script_, _\[\[LoadedModules\]\]_: « », _\[\[HostDefined\]\]_: _hostDefined_ }.

Note

An implementation may parse script source text and analyse it for Early Error conditions prior to evaluation of ParseScript for that script source text. However, the reporting of any errors must be deferred until the point where this specification actually performs ParseScript upon that source text.


# 16.1.6 ScriptEvaluation ( _scriptRecord_ )

The abstract operation ScriptEvaluation takes argument _scriptRecord_ (a [Script Record](#script-record)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _globalEnv_ be _scriptRecord_._\[\[Realm\]\]_._\[\[GlobalEnv\]\]_.
2.  Let _scriptContext_ be a new [ECMAScript code execution context](#ecmascript-code-execution-context).
3.  Set the Function of _scriptContext_ to null.
4.  Set the [Realm](#realm) of _scriptContext_ to _scriptRecord_._\[\[Realm\]\]_.
5.  Set the ScriptOrModule of _scriptContext_ to _scriptRecord_.
6.  Set the VariableEnvironment of _scriptContext_ to _globalEnv_.
7.  Set the LexicalEnvironment of _scriptContext_ to _globalEnv_.
8.  Set the PrivateEnvironment of _scriptContext_ to null.
9.  Suspend the [running execution context](#running-execution-context).
10.  Push _scriptContext_ onto the [execution context stack](#execution-context-stack); _scriptContext_ is now the [running execution context](#running-execution-context).
11.  Let _script_ be _scriptRecord_._\[\[ECMAScriptCode\]\]_.
12.  Let _result_ be [Completion](#sec-completion-ao)([GlobalDeclarationInstantiation](#sec-globaldeclarationinstantiation)(_script_, _globalEnv_)).
13.  If _result_ is a [normal completion](#sec-completion-record-specification-type), then
     1.  Set _result_ to [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _script_).
     2.  If _result_ is a [normal completion](#sec-completion-record-specification-type) and _result_._\[\[Value\]\]_ is empty, then
         1.  Set _result_ to [NormalCompletion](#sec-normalcompletion)(undefined).
14.  Suspend _scriptContext_ and remove it from the [execution context stack](#execution-context-stack).
15.  [Assert](#assert): The [execution context stack](#execution-context-stack) is not empty.
16.  Resume the context that is now on the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
17.  Return ? _result_.


# 16.1.7 GlobalDeclarationInstantiation ( _script_, _env_ )

The abstract operation GlobalDeclarationInstantiation takes arguments _script_ (a [Script](#prod-Script) [Parse Node](#sec-syntactic-grammar)) and _env_ (a [Global Environment Record](#sec-global-environment-records)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). _script_ is the [Script](#prod-Script) for which the [execution context](#sec-execution-contexts) is being established. _env_ is the global environment in which bindings are to be created.

Note 1

When an [execution context](#sec-execution-contexts) is established for evaluating scripts, declarations are instantiated in the current global environment. Each global binding declared in the code is instantiated.

It performs the following steps when called:

1.  Let _lexNames_ be the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of _script_.
2.  Let _varNames_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of _script_.
3.  For each element _name_ of _lexNames_, do
    1.  If [HasLexicalDeclaration](#sec-haslexicaldeclaration)(_env_, _name_) is true, throw a SyntaxError exception.
    2.  Let _hasRestrictedGlobal_ be ? [HasRestrictedGlobalProperty](#sec-hasrestrictedglobalproperty)(_env_, _name_).
    3.  NOTE: Global `var` and `function` bindings (except those that are introduced by non-strict [direct eval](#sec-function-calls-runtime-semantics-evaluation)) are non-configurable and are therefore restricted global properties.
    4.  If _hasRestrictedGlobal_ is true, throw a SyntaxError exception.
4.  For each element _name_ of _varNames_, do
    1.  If [HasLexicalDeclaration](#sec-haslexicaldeclaration)(_env_, _name_) is true, throw a SyntaxError exception.
5.  Let _varDeclarations_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of _script_.
6.  Let _functionsToInitialize_ be a new empty [List](#sec-list-and-record-specification-type).
7.  Let _declaredFunctionNames_ be a new empty [List](#sec-list-and-record-specification-type).
8.  For each element _d_ of _varDeclarations_, in reverse [List](#sec-list-and-record-specification-type) order, do
    1.  If _d_ is not either a [VariableDeclaration](#prod-VariableDeclaration), a [ForBinding](#prod-ForBinding), or a [BindingIdentifier](#prod-BindingIdentifier), then
        1.  [Assert](#assert): _d_ is either a [FunctionDeclaration](#prod-FunctionDeclaration), a [GeneratorDeclaration](#prod-GeneratorDeclaration), an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), or an [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration).
        2.  NOTE: If there are multiple function declarations for the same name, the last declaration is used.
        3.  Let _fn_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _d_.
        4.  If _declaredFunctionNames_ does not contain _fn_, then
            1.  Let _fnDefinable_ be ? [CanDeclareGlobalFunction](#sec-candeclareglobalfunction)(_env_, _fn_).
            2.  If _fnDefinable_ is false, throw a TypeError exception.
            3.  Append _fn_ to _declaredFunctionNames_.
            4.  Insert _d_ as the first element of _functionsToInitialize_.
9.  Let _declaredVarNames_ be a new empty [List](#sec-list-and-record-specification-type).
10.  For each element _d_ of _varDeclarations_, do
     1.  If _d_ is either a [VariableDeclaration](#prod-VariableDeclaration), a [ForBinding](#prod-ForBinding), or a [BindingIdentifier](#prod-BindingIdentifier), then
         1.  For each String _vn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
             1.  If _declaredFunctionNames_ does not contain _vn_, then
                 1.  Let _vnDefinable_ be ? [CanDeclareGlobalVar](#sec-candeclareglobalvar)(_env_, _vn_).
                 2.  If _vnDefinable_ is false, throw a TypeError exception.
                 3.  If _declaredVarNames_ does not contain _vn_, then
                     1.  Append _vn_ to _declaredVarNames_.
11.  NOTE: No abnormal terminations occur after this algorithm step if the [global object](#sec-global-object) is an [ordinary object](#ordinary-object). However, if the [global object](#sec-global-object) is a [Proxy exotic object](#proxy-exotic-object) it may exhibit behaviours that cause abnormal terminations in some of the following steps.
12.  [Normative Optional](#sec-conformance)
     
     If the [host](#host) is a web browser or otherwise supports [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), then
     1.  Let _strict_ be [ScriptIsStrict](#sec-scriptisstrict) of _script_.
     2.  If _strict_ is false, then
         1.  Let _declaredFunctionOrVarNames_ be the [list-concatenation](#list-concatenation) of _declaredFunctionNames_ and _declaredVarNames_.
         2.  For each [FunctionDeclaration](#prod-FunctionDeclaration) _f_ that is directly contained in the [StatementList](#prod-StatementList) of any [Block](#prod-Block), [CaseClause](#prod-CaseClause), or [DefaultClause](#prod-DefaultClause) _x_ such that _script_ [Contains](#sec-static-semantics-contains) _x_ is true, do
             1.  Let _F_ be the [StringValue](#sec-static-semantics-stringvalue) of the [BindingIdentifier](#prod-BindingIdentifier) of _f_.
             2.  If replacing the [FunctionDeclaration](#prod-FunctionDeclaration) _f_ with a [VariableStatement](#prod-VariableStatement) that has _F_ as a [BindingIdentifier](#prod-BindingIdentifier) would not produce any Early Errors for _script_, then
                 1.  If [HasLexicalDeclaration](#sec-haslexicaldeclaration)(_env_, _F_) is false, then
                     1.  Let _fnDefinable_ be ? [CanDeclareGlobalVar](#sec-candeclareglobalvar)(_env_, _F_).
                     2.  If _fnDefinable_ is true, then
                         1.  NOTE: A var binding for _F_ is only instantiated here if it is neither a VarDeclaredName nor the name of another [FunctionDeclaration](#prod-FunctionDeclaration).
                         2.  If _declaredFunctionOrVarNames_ does not contain _F_, then
                             1.  Perform ? [CreateGlobalVarBinding](#sec-createglobalvarbinding)(_env_, _F_, false).
                             2.  Append _F_ to _declaredFunctionOrVarNames_.
                         3.  When the [FunctionDeclaration](#prod-FunctionDeclaration) _f_ is evaluated, perform the following steps in place of the [FunctionDeclaration](#prod-FunctionDeclaration) [Evaluation](#sec-evaluation) algorithm provided in [15.2.6](#sec-function-definitions-runtime-semantics-evaluation):
                             1.  Let _gEnv_ be the [running execution context](#running-execution-context)'s VariableEnvironment.
                             2.  Let _bEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
                             3.  Let _fObj_ be ! _bEnv_.GetBindingValue(_F_, false).
                             4.  Perform ? _gEnv_.SetMutableBinding(_F_, _fObj_, false).
                             5.  Return unused.
13.  Let _lexDeclarations_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of _script_.
14.  Let _privateEnv_ be null.
15.  For each element _d_ of _lexDeclarations_, do
     1.  NOTE: Lexically declared names are only instantiated here but not initialized.
     2.  For each element _dn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
         1.  If [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of _d_ is true, then
             1.  Perform ? _env_.CreateImmutableBinding(_dn_, true).
         2.  Else,
             1.  Perform ? _env_.CreateMutableBinding(_dn_, false).
16.  For each [Parse Node](#sec-syntactic-grammar) _f_ of _functionsToInitialize_, do
     1.  Let _fn_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _f_.
     2.  Let _fo_ be [InstantiateFunctionObject](#sec-runtime-semantics-instantiatefunctionobject) of _f_ with arguments _env_ and _privateEnv_.
     3.  Perform ? [CreateGlobalFunctionBinding](#sec-createglobalfunctionbinding)(_env_, _fn_, _fo_, false).
17.  For each String _vn_ of _declaredVarNames_, do
     1.  Perform ? [CreateGlobalVarBinding](#sec-createglobalvarbinding)(_env_, _vn_, false).
18.  Return unused.

Note 2

[Early errors](#early-error) specified in [16.1.1](#sec-scripts-static-semantics-early-errors) prevent name conflicts between function/var declarations and let/const/class declarations as well as redeclaration of let/const/class bindings for declaration contained within a single [Script](#prod-Script). However, such conflicts and redeclarations that span more than one [Script](#prod-Script) are detected as runtime errors during GlobalDeclarationInstantiation. If any such errors are detected, no bindings are instantiated for the script. However, if the [global object](#sec-global-object) is defined using [Proxy exotic objects](#proxy-exotic-object) then the runtime tests for conflicting declarations may be unreliable resulting in an [abrupt completion](#sec-completion-record-specification-type) and some global declarations not being instantiated. If this occurs, the code for the [Script](#prod-Script) is not evaluated.

Unlike explicit var or function declarations, properties that are directly created on the [global object](#sec-global-object) result in global bindings that may be shadowed by let/const/class declarations.


# 16.2 Modules


## Syntax

[Module](#prod-Module) : [ModuleBody](#prod-ModuleBody)opt [ModuleBody](#prod-ModuleBody) : [ModuleItemList](#prod-ModuleItemList) [ModuleItemList](#prod-ModuleItemList) : [ModuleItem](#prod-ModuleItem) [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem) [ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [ExportDeclaration](#prod-ExportDeclaration) [StatementListItem](#prod-StatementListItem)\[~Yield, +Await, ~Return\] [ModuleExportName](#prod-ModuleExportName) : [IdentifierName](#prod-IdentifierName) [StringLiteral](#prod-StringLiteral)


# 16.2.1 Module Semantics


# 16.2.1.1 Static Semantics: Early Errors

[ModuleBody](#prod-ModuleBody) : [ModuleItemList](#prod-ModuleItemList)

-   It is a Syntax Error if the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ModuleItemList](#prod-ModuleItemList) contains any duplicate entries.
-   It is a Syntax Error if any element of the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ModuleItemList](#prod-ModuleItemList) also occurs in the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [ModuleItemList](#prod-ModuleItemList).
-   It is a Syntax Error if the [ExportedNames](#sec-static-semantics-exportednames) of [ModuleItemList](#prod-ModuleItemList) contains any duplicate entries.
-   It is a Syntax Error if any element of the [ExportedBindings](#sec-static-semantics-exportedbindings) of [ModuleItemList](#prod-ModuleItemList) does not also occur in either the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [ModuleItemList](#prod-ModuleItemList), or the [LexicallyDeclaredNames](#sec-static-semantics-lexicallydeclarednames) of [ModuleItemList](#prod-ModuleItemList).
-   It is a Syntax Error if [ModuleItemList](#prod-ModuleItemList) [Contains](#sec-static-semantics-contains) `super`.
-   It is a Syntax Error if [ModuleItemList](#prod-ModuleItemList) [Contains](#sec-static-semantics-contains) [NewTarget](#prod-NewTarget).
-   It is a Syntax Error if [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [ModuleItemList](#prod-ModuleItemList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [ModuleItemList](#prod-ModuleItemList) with argument « » is true.
-   It is a Syntax Error if [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [ModuleItemList](#prod-ModuleItemList) with arguments « » and « » is true.
-   It is a Syntax Error if [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of [ModuleItemList](#prod-ModuleItemList) with argument « » is false.

Note

The duplicate [ExportedNames](#sec-static-semantics-exportednames) rule implies that multiple `export default` [ExportDeclaration](#prod-ExportDeclaration) items within a [ModuleBody](#prod-ModuleBody) is a Syntax Error. Additional error conditions relating to conflicting or duplicate declarations are checked during module linking prior to evaluation of a [Module](#prod-Module). If any such errors are detected the [Module](#prod-Module) is not evaluated.

[ModuleExportName](#prod-ModuleExportName) : [StringLiteral](#prod-StringLiteral)

-   It is a Syntax Error if [IsStringWellFormedUnicode](#sec-isstringwellformedunicode)([SV](#sec-static-semantics-sv) of [StringLiteral](#prod-StringLiteral)) is false.


# 16.2.1.2 Static Semantics: ImportedLocalNames ( _importEntries_ )

The abstract operation ImportedLocalNames takes argument _importEntries_ (a [List](#sec-list-and-record-specification-type) of [ImportEntry Records](#importentry-record)) and returns a [List](#sec-list-and-record-specification-type) of Strings. It creates a [List](#sec-list-and-record-specification-type) of all of the local name bindings defined by _importEntries_. It performs the following steps when called:

1.  Let _localNames_ be a new empty [List](#sec-list-and-record-specification-type).
2.  For each [ImportEntry Record](#importentry-record) _i_ of _importEntries_, do
    1.  Append _i_._\[\[LocalName\]\]_ to _localNames_.
3.  Return _localNames_.


# 16.2.1.3 ModuleRequest Records

A ModuleRequest Record represents the request to import a module with given import attributes. It consists of the following fields:

Table 38: [ModuleRequest Record](#modulerequest-record) Fields

<table><tbody><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr><tr><td><var class="field">[[Specifier]]</var></td><td>a String</td><td>The module specifier</td></tr><tr><td><var class="field">[[Attributes]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8363"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#importattribute-record" id="_ref_8364"><a href="#importattribute-record">ImportAttribute Records</a></emu-xref></td><td>The import attributes</td></tr></tbody></table>

A LoadedModuleRequest Record represents the request to import a module together with the resulting [Module Record](#sec-abstract-module-records). It consists of the same fields defined in table [Table 38](#table-modulerequest-fields), with the addition of _\[\[Module\]\]_:

Table 39: [LoadedModuleRequest Record](#loadedmodulerequest-record) Fields

<table><tbody><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr><tr><td><var class="field">[[Specifier]]</var></td><td>a String</td><td>The module specifier</td></tr><tr><td><var class="field">[[Attributes]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8367"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#importattribute-record" id="_ref_8368"><a href="#importattribute-record">ImportAttribute Records</a></emu-xref></td><td>The import attributes</td></tr><tr><td><var class="field">[[Module]]</var></td><td>a <emu-xref href="#sec-abstract-module-records" id="_ref_8369"><a href="#sec-abstract-module-records">Module Record</a></emu-xref></td><td>The loaded module corresponding to this module request</td></tr></tbody></table>

An ImportAttribute Record consists of the following fields:

Table 40: [ImportAttribute Record](#importattribute-record) Fields

<table><tbody><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr><tr><td><var class="field">[[Key]]</var></td><td>a String</td><td>The attribute key</td></tr><tr><td><var class="field">[[Value]]</var></td><td>a String</td><td>The attribute value</td></tr></tbody></table>


# 16.2.1.3.1 ModuleRequestsEqual ( _left_, _right_ )

The abstract operation ModuleRequestsEqual takes arguments _left_ (a [ModuleRequest Record](#modulerequest-record) or a [LoadedModuleRequest Record](#loadedmodulerequest-record)) and _right_ (a [ModuleRequest Record](#modulerequest-record) or a [LoadedModuleRequest Record](#loadedmodulerequest-record)) and returns a Boolean. It performs the following steps when called:

1.  If _left_._\[\[Specifier\]\]_ is not _right_._\[\[Specifier\]\]_, return false.
2.  Let _leftAttrs_ be _left_._\[\[Attributes\]\]_.
3.  Let _rightAttrs_ be _right_._\[\[Attributes\]\]_.
4.  Let _leftAttrsCount_ be the number of elements in _leftAttrs_.
5.  Let _rightAttrsCount_ be the number of elements in _rightAttrs_.
6.  If _leftAttrsCount_ ≠ _rightAttrsCount_, return false.
7.  For each [ImportAttribute Record](#importattribute-record) _l_ of _leftAttrs_, do
    1.  If _rightAttrs_ does not contain an [ImportAttribute Record](#importattribute-record) _r_ such that _l_._\[\[Key\]\]_ is _r_._\[\[Key\]\]_ and _l_._\[\[Value\]\]_ is _r_._\[\[Value\]\]_, return false.
8.  Return true.


# 16.2.1.4 Static Semantics: ModuleRequests

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ModuleRequests takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [ModuleRequest Records](#modulerequest-record). It is defined piecewise over the following productions:

[Module](#prod-Module) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ModuleItemList](#prod-ModuleItemList) : [ModuleItem](#prod-ModuleItem)

1.  Return the [ModuleRequests](#sec-static-semantics-modulerequests) of [ModuleItem](#prod-ModuleItem).

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _requests_ be the [ModuleRequests](#sec-static-semantics-modulerequests) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _additionalRequests_ be the [ModuleRequests](#sec-static-semantics-modulerequests) of [ModuleItem](#prod-ModuleItem).
3.  For each [ModuleRequest Record](#modulerequest-record) _mr_ of _additionalRequests_, do
    1.  If _requests_ does not contain a [ModuleRequest Record](#modulerequest-record) _mr2_ such that [ModuleRequestsEqual](#sec-ModuleRequestsEqual)(_mr_, _mr2_) is true, then
        1.  Append _mr_ to _requests_.
4.  Return _requests_.

[ModuleItem](#prod-ModuleItem) : [StatementListItem](#prod-StatementListItem)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ImportDeclaration](#prod-ImportDeclaration) : import [ImportClause](#prod-ImportClause) [FromClause](#prod-FromClause) ;

1.  Let _specifier_ be the [SV](#sec-static-semantics-sv) of [FromClause](#prod-FromClause).
2.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [ModuleRequest Record](#modulerequest-record) { _\[\[Specifier\]\]_: _specifier_, _\[\[Attributes\]\]_: « » }.

[ImportDeclaration](#prod-ImportDeclaration) : import [ImportClause](#prod-ImportClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause) ;

1.  Let _specifier_ be the [SV](#sec-static-semantics-sv) of [FromClause](#prod-FromClause).
2.  Let _attributes_ be [WithClauseToAttributes](#sec-withclausetoattributes) of [WithClause](#prod-WithClause).
3.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [ModuleRequest Record](#modulerequest-record) { _\[\[Specifier\]\]_: _specifier_, _\[\[Attributes\]\]_: _attributes_ }.

[ImportDeclaration](#prod-ImportDeclaration) : import [ModuleSpecifier](#prod-ModuleSpecifier) ;

1.  Let _specifier_ be the [SV](#sec-static-semantics-sv) of [ModuleSpecifier](#prod-ModuleSpecifier).
2.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [ModuleRequest Record](#modulerequest-record) { _\[\[Specifier\]\]_: _specifier_, _\[\[Attributes\]\]_: « » }.

[ImportDeclaration](#prod-ImportDeclaration) : import [ModuleSpecifier](#prod-ModuleSpecifier) [WithClause](#prod-WithClause) ;

1.  Let _specifier_ be the [SV](#sec-static-semantics-sv) of [ModuleSpecifier](#prod-ModuleSpecifier).
2.  Let _attributes_ be [WithClauseToAttributes](#sec-withclausetoattributes) of [WithClause](#prod-WithClause).
3.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [ModuleRequest Record](#modulerequest-record) { _\[\[Specifier\]\]_: _specifier_, _\[\[Attributes\]\]_: _attributes_ }.

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) ;

1.  Let _specifier_ be the [SV](#sec-static-semantics-sv) of [FromClause](#prod-FromClause).
2.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [ModuleRequest Record](#modulerequest-record) { _\[\[Specifier\]\]_: _specifier_, _\[\[Attributes\]\]_: « » }.

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause) ;

1.  Let _specifier_ be the [SV](#sec-static-semantics-sv) of [FromClause](#prod-FromClause).
2.  Let _attributes_ be [WithClauseToAttributes](#sec-withclausetoattributes) of [WithClause](#prod-WithClause).
3.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [ModuleRequest Record](#modulerequest-record) { _\[\[Specifier\]\]_: _specifier_, _\[\[Attributes\]\]_: _attributes_ }.

[ExportDeclaration](#prod-ExportDeclaration) : export [NamedExports](#prod-NamedExports) ; export [VariableStatement](#prod-VariableStatement) export [Declaration](#prod-Declaration) export default [HoistableDeclaration](#prod-HoistableDeclaration) export default [ClassDeclaration](#prod-ClassDeclaration) export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  Return a new empty [List](#sec-list-and-record-specification-type).


# 16.2.1.5 Abstract Module Records

A Module Record encapsulates structural information about the imports and exports of a single module. This information is used to link the imports and exports of sets of connected modules. A Module Record includes four fields that are only used when evaluating a module.

For specification purposes Module Record values are values of the [Record](#sec-list-and-record-specification-type) specification type and can be thought of as existing in a simple object-oriented hierarchy where Module Record is an abstract class with both abstract and concrete subclasses. This specification defines the abstract subclass named [Cyclic Module Record](#cyclic-module-record) and its concrete subclass named [Source Text Module Record](#sourctextmodule-record). Other specifications and implementations may define additional Module Record subclasses corresponding to alternative module definition facilities that they defined.

Module Record defines the fields listed in [Table 41](#table-module-record-fields). All Module Definition subclasses include at least those fields. Module Record also defines the abstract method list in [Table 42](#table-abstract-methods-of-module-records). All Module definition subclasses must provide concrete implementations of these abstract methods.

Table 41: [Module Record](#sec-abstract-module-records) Fields

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Realm]]</var></td><td>a <emu-xref href="#realm-record" id="_ref_8414"><a href="#realm-record">Realm Record</a></emu-xref></td><td>The <emu-xref href="#realm" id="_ref_8415"><a href="#realm">Realm</a></emu-xref> within which this module was created.</td></tr><tr><td><var class="field">[[Environment]]</var></td><td>a <emu-xref href="#sec-module-environment-records" id="_ref_8416"><a href="#sec-module-environment-records">Module Environment Record</a></emu-xref> or <emu-const>empty</emu-const></td><td>The <emu-xref href="#sec-environment-records" id="_ref_8417"><a href="#sec-environment-records">Environment Record</a></emu-xref> containing the top level bindings for this module. This field is set when the module is linked.</td></tr><tr><td><var class="field">[[Namespace]]</var></td><td>an Object or <emu-const>empty</emu-const></td><td>The Module Namespace Object (<emu-xref href="#sec-module-namespace-objects" id="_ref_485"><a href="#sec-module-namespace-objects">28.3</a></emu-xref>) if one has been created for this module.</td></tr><tr><td><var class="field">[[HostDefined]]</var></td><td>anything (default value is <emu-val>undefined</emu-val>)</td><td>Field reserved for use by <emu-xref href="#host-environment" id="_ref_8418"><a href="#host-environment">host environments</a></emu-xref> that need to associate additional information with a module.</td></tr></tbody></table>

Table 42: Abstract Methods of [Module Records](#sec-abstract-module-records)

<table><thead><tr><th>Method</th><th>Purpose</th></tr></thead><tbody><tr><td>LoadRequestedModules([<var>hostDefined</var>])</td><td><p>Prepares the module for linking by recursively loading all its dependencies, and returns a promise.</p></td></tr><tr><td>GetExportedNames([<var>exportStarSet</var>])</td><td><p>Return a list of all names that are either directly or indirectly exported from this module.</p><p>LoadRequestedModules must have completed successfully prior to invoking this method.</p></td></tr><tr><td>ResolveExport(<var>exportName</var> [, <var>resolveSet</var>])</td><td><p>Return the binding of a name exported by this module. Bindings are represented by a <dfn id="resolvedbinding-record" variants="ResolvedBinding Records" tabindex="-1">ResolvedBinding Record</dfn>, of the form { <var class="field">[[Module]]</var>: <emu-xref href="#sec-abstract-module-records" id="_ref_8420"><a href="#sec-abstract-module-records">Module Record</a></emu-xref>, <var class="field">[[BindingName]]</var>: String | <emu-const>namespace</emu-const> }. If the export is a Module Namespace Object without a direct binding in any module, <var class="field">[[BindingName]]</var> will be set to <emu-const>namespace</emu-const>. Return <emu-val>null</emu-val> if the name cannot be resolved, or <emu-const>ambiguous</emu-const> if multiple bindings were found.</p><p>Each time this operation is called with a specific <var>exportName</var>, <var>resolveSet</var> pair as arguments it must return the same result.</p><p>LoadRequestedModules must have completed successfully prior to invoking this method.</p></td></tr><tr><td>Link()</td><td><p>Prepare the module for evaluation by transitively resolving all module dependencies and creating a <emu-xref href="#sec-module-environment-records" id="_ref_8421"><a href="#sec-module-environment-records">Module Environment Record</a></emu-xref>.</p><p>LoadRequestedModules must have completed successfully prior to invoking this method.</p></td></tr><tr><td>Evaluate()</td><td><p>Returns a promise for the evaluation of this module and its dependencies, resolving on successful evaluation or if it has already been evaluated successfully, and rejecting for an evaluation error or if it has already been evaluated unsuccessfully. If the promise is rejected, <emu-xref href="#host" id="_ref_8422"><a href="#host">hosts</a></emu-xref> are expected to handle the promise rejection and rethrow the evaluation error.</p><p>Link must have completed successfully prior to invoking this method.</p></td></tr></tbody></table>


# 16.2.1.5.1 EvaluateModuleSync ( _module_ )

The abstract operation EvaluateModuleSync takes argument _module_ (a [Module Record](#sec-abstract-module-records)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It synchronously evaluates _module_, provided that the caller guarantees that _module_'s evaluation will return an already settled promise. It performs the following steps when called:

1.  [Assert](#assert): _module_ is not a [Cyclic Module Record](#cyclic-module-record).
2.  Let _promise_ be _module_.Evaluate().
3.  [Assert](#assert): _promise_._\[\[PromiseState\]\]_ is either fulfilled or rejected.
4.  If _promise_._\[\[PromiseState\]\]_ is rejected, then
    1.  If _promise_._\[\[PromiseIsHandled\]\]_ is false, perform [HostPromiseRejectionTracker](#sec-host-promise-rejection-tracker)(_promise_, "handle").
    2.  Set _promise_._\[\[PromiseIsHandled\]\]_ to true.
    3.  Return [ThrowCompletion](#sec-throwcompletion)(_promise_._\[\[PromiseResult\]\]_).
5.  Return unused.


# 16.2.1.6 Cyclic Module Records

A Cyclic Module Record is used to represent information about a module that can participate in dependency cycles with other modules that are subclasses of the [Cyclic Module Record](#cyclic-module-record) type. [Module Records](#sec-abstract-module-records) that are not subclasses of the [Cyclic Module Record](#cyclic-module-record) type must not participate in dependency cycles with [Source Text Module Records](#sourctextmodule-record).

In addition to the fields defined in [Table 41](#table-module-record-fields) [Cyclic Module Records](#cyclic-module-record) have the additional fields listed in [Table 43](#table-cyclic-module-fields)

Table 43: Additional Fields of [Cyclic Module Records](#cyclic-module-record)

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Status]]</var></td><td><emu-const>new</emu-const>, <emu-const>unlinked</emu-const>, <emu-const>linking</emu-const>, <emu-const>linked</emu-const>, <emu-const>evaluating</emu-const>, <emu-const>evaluating-async</emu-const>, or <emu-const>evaluated</emu-const></td><td>Initially <emu-const>new</emu-const>. Transitions to <emu-const>unlinked</emu-const>, <emu-const>linking</emu-const>, <emu-const>linked</emu-const>, <emu-const>evaluating</emu-const>, possibly <emu-const>evaluating-async</emu-const>, <emu-const>evaluated</emu-const> (in that order) as the module progresses throughout its lifecycle. <emu-const>evaluating-async</emu-const> indicates this module is queued to execute on completion of its asynchronous dependencies or it is a module whose <var class="field">[[HasTLA]]</var> field is <emu-val>true</emu-val> that has been executed and is pending top-level completion.</td></tr><tr><td><var class="field">[[EvaluationError]]</var></td><td>a <emu-xref href="#sec-completion-record-specification-type" id="_ref_8437"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref> or <emu-const>empty</emu-const></td><td>A <emu-xref href="#sec-completion-record-specification-type" id="_ref_8438"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref> representing the exception that occurred during evaluation. <emu-val>undefined</emu-val> if no exception occurred or if <var class="field">[[Status]]</var> is not <emu-const>evaluated</emu-const>.</td></tr><tr><td><var class="field">[[DFSAncestorIndex]]</var></td><td>an <emu-xref href="#integer" id="_ref_8439"><a href="#integer">integer</a></emu-xref> or <emu-const>empty</emu-const></td><td>Auxiliary field used during Link and Evaluate only. If <var class="field">[[Status]]</var> is either <emu-const>linking</emu-const> or <emu-const>evaluating</emu-const>, this is either the module's depth-first traversal index or that of an "earlier" module in the same strongly connected component.</td></tr><tr><td><var class="field">[[RequestedModules]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8440"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#modulerequest-record" id="_ref_8441"><a href="#modulerequest-record">ModuleRequest Records</a></emu-xref></td><td>A <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8442"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of the <emu-xref href="#modulerequest-record" id="_ref_8443"><a href="#modulerequest-record">ModuleRequest Records</a></emu-xref> associated with the imports in this module. The <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8444"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> is in source text occurrence order of the imports.</td></tr><tr><td><var class="field">[[LoadedModules]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8445"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#loadedmodulerequest-record" id="_ref_8446"><a href="#loadedmodulerequest-record">LoadedModuleRequest Records</a></emu-xref></td><td>A map from the specifier strings used by the module represented by this record to request the importation of a module with the relative import attributes to the resolved <emu-xref href="#sec-abstract-module-records" id="_ref_8447"><a href="#sec-abstract-module-records">Module Record</a></emu-xref>. The list does not contain two different <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8448"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> <var>r1</var> and <var>r2</var> such that <emu-xref aoid="ModuleRequestsEqual" id="_ref_8449"><a href="#sec-ModuleRequestsEqual">ModuleRequestsEqual</a></emu-xref>(<var>r1</var>, <var>r2</var>) is <emu-val>true</emu-val>.</td></tr><tr><td><var class="field">[[CycleRoot]]</var></td><td>a <emu-xref href="#cyclic-module-record" id="_ref_8450"><a href="#cyclic-module-record">Cyclic Module Record</a></emu-xref> or <emu-const>empty</emu-const></td><td>The first visited module of the cycle, the root DFS ancestor of the strongly connected component. For a module not in a cycle, this would be the module itself. Once Evaluate has completed, a module's <var class="field">[[DFSAncestorIndex]]</var> is the depth-first traversal index of its <var class="field">[[CycleRoot]]</var>.</td></tr><tr><td><var class="field">[[HasTLA]]</var></td><td>a Boolean</td><td>Whether this module is individually asynchronous (for example, if it's a <emu-xref href="#sourctextmodule-record" id="_ref_8451"><a href="#sourctextmodule-record">Source Text Module Record</a></emu-xref> containing a top-level await). Having an asynchronous dependency does not mean this field is <emu-val>true</emu-val>. This field must not change after the module is parsed.</td></tr><tr><td><var class="field">[[AsyncEvaluationOrder]]</var></td><td><emu-const>unset</emu-const>, an <emu-xref href="#integer" id="_ref_8452"><a href="#integer">integer</a></emu-xref>, or <emu-const>done</emu-const></td><td>This field is initially set to <emu-const>unset</emu-const>, and remains <emu-const>unset</emu-const> for fully synchronous modules. For modules that are either themselves asynchronous or have an asynchronous dependency, it is set to an <emu-xref href="#integer" id="_ref_8453"><a href="#integer">integer</a></emu-xref> that determines the order in which execution of pending modules is queued by <emu-xref href="#sec-async-module-execution-fulfilled" id="_ref_488"><a href="#sec-async-module-execution-fulfilled">16.2.1.6.1.3.4</a></emu-xref>. Once the pending module is executed, the field is set to <emu-const>done</emu-const>.</td></tr><tr><td><var class="field">[[TopLevelCapability]]</var></td><td>a <emu-xref href="#sec-promisecapability-records" id="_ref_8454"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref> or <emu-const>empty</emu-const></td><td>If this module is the <var class="field">[[CycleRoot]]</var> of some cycle, and Evaluate() was called on some module in that cycle, this field contains the <emu-xref href="#sec-promisecapability-records" id="_ref_8455"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref> for that entire evaluation. It is used to settle the Promise object that is returned from the Evaluate() abstract method. This field will be <emu-const>empty</emu-const> for any dependencies of that module, unless a top-level Evaluate() has been initiated for some of those dependencies.</td></tr><tr><td><var class="field">[[AsyncParentModules]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8456"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#cyclic-module-record" id="_ref_8457"><a href="#cyclic-module-record">Cyclic Module Records</a></emu-xref></td><td>If this module or a dependency has <var class="field">[[HasTLA]]</var> <emu-val>true</emu-val>, and execution is in progress, this tracks the parent importers of this module for the top-level execution job. These parent modules will not start executing before this module has successfully completed execution.</td></tr><tr><td><var class="field">[[PendingAsyncDependencies]]</var></td><td>an <emu-xref href="#integer" id="_ref_8458"><a href="#integer">integer</a></emu-xref> or <emu-const>empty</emu-const></td><td>If this module has any asynchronous dependencies, this tracks the number of asynchronous dependency modules remaining to execute for this module. A module with asynchronous dependencies will be executed when this field reaches 0 and there are no execution errors.</td></tr></tbody></table>

In addition to the methods defined in [Table 42](#table-abstract-methods-of-module-records) [Cyclic Module Records](#cyclic-module-record) have the additional methods listed in [Table 44](#table-cyclic-module-methods)

Table 44: Additional Abstract Methods of [Cyclic Module Records](#cyclic-module-record)

<table><thead><tr><th>Method</th><th>Purpose</th></tr></thead><tbody><tr><td>InitializeEnvironment()</td><td>Initialize the <emu-xref href="#sec-environment-records" id="_ref_8461"><a href="#sec-environment-records">Environment Record</a></emu-xref> of the module, including resolving all imported bindings, and create the module's <emu-xref href="#sec-execution-contexts" id="_ref_8462"><a href="#sec-execution-contexts">execution context</a></emu-xref>.</td></tr><tr><td>ExecuteModule([<var>promiseCapability</var>])</td><td>Evaluate the module's code within its <emu-xref href="#sec-execution-contexts" id="_ref_8463"><a href="#sec-execution-contexts">execution context</a></emu-xref>. If this module has <emu-val>true</emu-val> in <var class="field">[[HasTLA]]</var>, then a <emu-xref href="#sec-promisecapability-records" id="_ref_8464"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref> is passed as an argument, and the method is expected to resolve or reject the given capability. In this case, the method must not throw an exception, but instead reject the <emu-xref href="#sec-promisecapability-records" id="_ref_8465"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref> if necessary.</td></tr></tbody></table>

A GraphLoadingState Record is a [Record](#sec-list-and-record-specification-type) that contains information about the loading process of a module graph. It's used to continue loading after a call to [HostLoadImportedModule](#sec-HostLoadImportedModule). Each [GraphLoadingState Record](#graphloadingstate-record) has the fields defined in [Table 45](#table-graphloadingstate-record-fields):

Table 45: [GraphLoadingState Record](#graphloadingstate-record) Fields

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[PromiseCapability]]</var></td><td>a <emu-xref href="#sec-promisecapability-records" id="_ref_8470"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref></td><td>The promise to resolve when the loading process finishes.</td></tr><tr><td><var class="field">[[IsLoading]]</var></td><td>a Boolean</td><td>It is true if the loading process has not finished yet, neither successfully nor with an error.</td></tr><tr><td><var class="field">[[PendingModulesCount]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_8471"><a href="#integer">integer</a></emu-xref></td><td>It tracks the number of pending <emu-xref aoid="HostLoadImportedModule" id="_ref_8472"><a href="#sec-HostLoadImportedModule">HostLoadImportedModule</a></emu-xref> calls.</td></tr><tr><td><var class="field">[[Visited]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8473"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#cyclic-module-record" id="_ref_8474"><a href="#cyclic-module-record">Cyclic Module Records</a></emu-xref></td><td>It is a list of the <emu-xref href="#cyclic-module-record" id="_ref_8475"><a href="#cyclic-module-record">Cyclic Module Records</a></emu-xref> that have been already loaded by the current loading process, to avoid infinite loops with circular dependencies.</td></tr><tr><td><var class="field">[[HostDefined]]</var></td><td>anything (default value is <emu-const>empty</emu-const>)</td><td>It contains <emu-xref href="#host-defined" id="_ref_8476"><a href="#host-defined">host-defined</a></emu-xref> data to pass from the LoadRequestedModules caller to <emu-xref aoid="HostLoadImportedModule" id="_ref_8477"><a href="#sec-HostLoadImportedModule">HostLoadImportedModule</a></emu-xref>.</td></tr></tbody></table>


# 16.2.1.6.1 Implementation of Module Record Abstract Methods

The following are the concrete methods for [Cyclic Module Record](#cyclic-module-record) that implement the corresponding [Module Record](#sec-abstract-module-records) abstract methods defined in [Table 42](#table-abstract-methods-of-module-records).


# 16.2.1.6.1.1 LoadRequestedModules ( \[_hostDefined_ \] )

The LoadRequestedModules concrete method of a [Cyclic Module Record](#cyclic-module-record) _module_ takes optional argument _hostDefined_ (anything) and returns a Promise. It populates the _\[\[LoadedModules\]\]_ of all the [Module Records](#sec-abstract-module-records) in the dependency graph of _module_ (most of the work is done by the auxiliary function [InnerModuleLoading](#sec-InnerModuleLoading)). It takes an optional _hostDefined_ parameter that is passed to the [HostLoadImportedModule](#sec-HostLoadImportedModule) hook. It performs the following steps when called:

1.  If _hostDefined_ is not present, let _hostDefined_ be empty.
2.  Let _pc_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
3.  Let _state_ be the [GraphLoadingState Record](#graphloadingstate-record) { _\[\[IsLoading\]\]_: true, _\[\[PendingModulesCount\]\]_: 1, _\[\[Visited\]\]_: « », _\[\[PromiseCapability\]\]_: _pc_, _\[\[HostDefined\]\]_: _hostDefined_ }.
4.  Perform [InnerModuleLoading](#sec-InnerModuleLoading)(_state_, _module_).
5.  Return _pc_._\[\[Promise\]\]_.

Note

The _hostDefined_ parameter can be used to pass additional information necessary to fetch the imported modules. It is used, for example, by HTML to set the correct fetch destination for `<link rel="preload" as="...">` tags. `import()` expressions never set the _hostDefined_ parameter.


# 16.2.1.6.1.1.1 InnerModuleLoading ( _state_, _module_ )

The abstract operation InnerModuleLoading takes arguments _state_ (a [GraphLoadingState Record](#graphloadingstate-record)) and _module_ (a [Module Record](#sec-abstract-module-records)) and returns unused. It is used by LoadRequestedModules to recursively perform the actual loading process for _module_'s dependency graph. It performs the following steps when called:

1.  [Assert](#assert): _state_._\[\[IsLoading\]\]_ is true.
2.  If _module_ is a [Cyclic Module Record](#cyclic-module-record), _module_._\[\[Status\]\]_ is new, and _state_._\[\[Visited\]\]_ does not contain _module_, then
    1.  Append _module_ to _state_._\[\[Visited\]\]_.
    2.  Let _requestedModulesCount_ be the number of elements in _module_._\[\[RequestedModules\]\]_.
    3.  Set _state_._\[\[PendingModulesCount\]\]_ to _state_._\[\[PendingModulesCount\]\]_ + _requestedModulesCount_.
    4.  For each [ModuleRequest Record](#modulerequest-record) _request_ of _module_._\[\[RequestedModules\]\]_, do
        1.  If [AllImportAttributesSupported](#sec-AllImportAttributesSupported)(_request_._\[\[Attributes\]\]_) is false, then
            1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created SyntaxError object).
            2.  Perform [ContinueModuleLoading](#sec-ContinueModuleLoading)(_state_, _error_).
        2.  Else if _module_._\[\[LoadedModules\]\]_ contains a [LoadedModuleRequest Record](#loadedmodulerequest-record) _record_ such that [ModuleRequestsEqual](#sec-ModuleRequestsEqual)(_record_, _request_) is true, then
            1.  Perform [InnerModuleLoading](#sec-InnerModuleLoading)(_state_, _record_._\[\[Module\]\]_).
        3.  Else,
            1.  Perform [HostLoadImportedModule](#sec-HostLoadImportedModule)(_module_, _request_, _state_._\[\[HostDefined\]\]_, _state_).
            2.  NOTE: [HostLoadImportedModule](#sec-HostLoadImportedModule) will call [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule), which re-enters the graph loading process through [ContinueModuleLoading](#sec-ContinueModuleLoading).
        4.  If _state_._\[\[IsLoading\]\]_ is false, return unused.
3.  [Assert](#assert): _state_._\[\[PendingModulesCount\]\]_ ≥ 1.
4.  Set _state_._\[\[PendingModulesCount\]\]_ to _state_._\[\[PendingModulesCount\]\]_ - 1.
5.  If _state_._\[\[PendingModulesCount\]\]_ = 0, then
    1.  Set _state_._\[\[IsLoading\]\]_ to false.
    2.  For each [Cyclic Module Record](#cyclic-module-record) _loaded_ of _state_._\[\[Visited\]\]_, do
        1.  If _loaded_._\[\[Status\]\]_ is new, set _loaded_._\[\[Status\]\]_ to unlinked.
    3.  Perform ! [Call](#sec-call)(_state_._\[\[PromiseCapability\]\]_._\[\[Resolve\]\]_, undefined, « undefined »).
6.  Return unused.


# 16.2.1.6.1.1.2 ContinueModuleLoading ( _state_, _moduleCompletion_ )

The abstract operation ContinueModuleLoading takes arguments _state_ (a [GraphLoadingState Record](#graphloadingstate-record)) and _moduleCompletion_ (either a [normal completion containing](#sec-completion-record-specification-type) a [Module Record](#sec-abstract-module-records) or a [throw completion](#sec-completion-record-specification-type)) and returns unused. It is used to re-enter the loading process after a call to [HostLoadImportedModule](#sec-HostLoadImportedModule). It performs the following steps when called:

1.  If _state_._\[\[IsLoading\]\]_ is false, return unused.
2.  If _moduleCompletion_ is a [normal completion](#sec-completion-record-specification-type), then
    1.  Perform [InnerModuleLoading](#sec-InnerModuleLoading)(_state_, _moduleCompletion_._\[\[Value\]\]_).
3.  Else,
    1.  Set _state_._\[\[IsLoading\]\]_ to false.
    2.  Perform ! [Call](#sec-call)(_state_._\[\[PromiseCapability\]\]_._\[\[Reject\]\]_, undefined, « _moduleCompletion_._\[\[Value\]\]_ »).
4.  Return unused.


# 16.2.1.6.1.2 Link ( )

The Link concrete method of a [Cyclic Module Record](#cyclic-module-record) _module_ takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). On success, Link transitions this module's _\[\[Status\]\]_ from unlinked to linked. On failure, an exception is thrown and this module's _\[\[Status\]\]_ remains unlinked. (Most of the work is done by the auxiliary function [InnerModuleLinking](#sec-InnerModuleLinking).) It performs the following steps when called:

1.  [Assert](#assert): _module_._\[\[Status\]\]_ is one of unlinked, linked, evaluating-async, or evaluated.
2.  Let _stack_ be a new empty [List](#sec-list-and-record-specification-type).
3.  Let _result_ be [Completion](#sec-completion-ao)([InnerModuleLinking](#sec-InnerModuleLinking)(_module_, _stack_, 0)).
4.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  For each [Cyclic Module Record](#cyclic-module-record) _m_ of _stack_, do
        1.  [Assert](#assert): _m_._\[\[Status\]\]_ is linking.
        2.  Set _m_._\[\[Status\]\]_ to unlinked.
    2.  [Assert](#assert): _module_._\[\[Status\]\]_ is unlinked.
    3.  Return ? _result_.
5.  [Assert](#assert): _module_._\[\[Status\]\]_ is one of linked, evaluating-async, or evaluated.
6.  [Assert](#assert): _stack_ is empty.
7.  Return unused.


# 16.2.1.6.1.2.1 InnerModuleLinking ( _module_, _stack_, _index_ )

The abstract operation InnerModuleLinking takes arguments _module_ (a [Module Record](#sec-abstract-module-records)), _stack_ (a [List](#sec-list-and-record-specification-type) of [Cyclic Module Records](#cyclic-module-record)), and _index_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a non-negative [integer](#integer) or a [throw completion](#sec-completion-record-specification-type). It is used by Link to perform the actual linking process for _module_, as well as recursively on all other modules in the dependency graph. The _stack_ and _index_ parameters, as well as a module's _\[\[DFSAncestorIndex\]\]_ field, keep track of the depth-first search (DFS) traversal. In particular, _\[\[DFSAncestorIndex\]\]_ is used to discover strongly connected components (SCCs), such that all modules in an SCC transition to linked together. It performs the following steps when called:

1.  If _module_ is not a [Cyclic Module Record](#cyclic-module-record), then
    1.  Perform ? _module_.Link().
    2.  Return _index_.
2.  If _module_._\[\[Status\]\]_ is one of linking, linked, evaluating-async, or evaluated, then
    1.  Return _index_.
3.  [Assert](#assert): _module_._\[\[Status\]\]_ is unlinked.
4.  Set _module_._\[\[Status\]\]_ to linking.
5.  Let _moduleIndex_ be _index_.
6.  Set _module_._\[\[DFSAncestorIndex\]\]_ to _index_.
7.  Set _index_ to _index_ + 1.
8.  Append _module_ to _stack_.
9.  For each [ModuleRequest Record](#modulerequest-record) _request_ of _module_._\[\[RequestedModules\]\]_, do
    1.  Let _requiredModule_ be [GetImportedModule](#sec-GetImportedModule)(_module_, _request_).
    2.  Set _index_ to ? [InnerModuleLinking](#sec-InnerModuleLinking)(_requiredModule_, _stack_, _index_).
    3.  If _requiredModule_ is a [Cyclic Module Record](#cyclic-module-record), then
        1.  [Assert](#assert): _requiredModule_._\[\[Status\]\]_ is one of linking, linked, evaluating-async, or evaluated.
        2.  [Assert](#assert): _requiredModule_._\[\[Status\]\]_ is linking if and only if _stack_ contains _requiredModule_.
        3.  If _requiredModule_._\[\[Status\]\]_ is linking, then
            1.  Set _module_._\[\[DFSAncestorIndex\]\]_ to [min](#eqn-min)(_module_._\[\[DFSAncestorIndex\]\]_, _requiredModule_._\[\[DFSAncestorIndex\]\]_).
10.  Perform ? _module_.InitializeEnvironment().
11.  [Assert](#assert): _module_ occurs exactly once in _stack_.
12.  [Assert](#assert): _module_._\[\[DFSAncestorIndex\]\]_ ≤ _moduleIndex_.
13.  If _module_._\[\[DFSAncestorIndex\]\]_ = _moduleIndex_, then
     1.  Let _done_ be false.
     2.  Repeat, while _done_ is false,
         1.  Let _requiredModule_ be the last element of _stack_.
         2.  Remove the last element of _stack_.
         3.  [Assert](#assert): _requiredModule_ is a [Cyclic Module Record](#cyclic-module-record).
         4.  Set _requiredModule_._\[\[Status\]\]_ to linked.
         5.  If _requiredModule_ and _module_ are the same [Module Record](#sec-abstract-module-records), set _done_ to true.
14.  Return _index_.


# 16.2.1.6.1.3 Evaluate ( )

The Evaluate concrete method of a [Cyclic Module Record](#cyclic-module-record) _module_ takes no arguments and returns a Promise. Evaluate transitions this module's _\[\[Status\]\]_ from linked to either evaluating-async or evaluated. The first time it is called on a module in a given strongly connected component, Evaluate creates and returns a Promise which resolves when the module has finished evaluating. This Promise is stored in the _\[\[TopLevelCapability\]\]_ field of the _\[\[CycleRoot\]\]_ for the component. Future invocations of Evaluate on any module in the component return the same Promise. (Most of the work is done by the auxiliary function [InnerModuleEvaluation](#sec-innermoduleevaluation).) It performs the following steps when called:

1.  [Assert](#assert): This call to Evaluate is not happening at the same time as another call to Evaluate within the [surrounding agent](#surrounding-agent).
2.  [Assert](#assert): _module_._\[\[Status\]\]_ is one of linked, evaluating-async, or evaluated.
3.  If _module_._\[\[Status\]\]_ is either evaluating-async or evaluated, then
    1.  If _module_._\[\[CycleRoot\]\]_ is not empty, then
        1.  Set _module_ to _module_._\[\[CycleRoot\]\]_.
    2.  Else,
        1.  [Assert](#assert): _module_._\[\[Status\]\]_ is evaluated and _module_._\[\[EvaluationError\]\]_ is a [throw completion](#sec-completion-record-specification-type).
4.  If _module_._\[\[TopLevelCapability\]\]_ is not empty, then
    1.  Return _module_._\[\[TopLevelCapability\]\]_._\[\[Promise\]\]_.
5.  Let _stack_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Let _capability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
7.  Set _module_._\[\[TopLevelCapability\]\]_ to _capability_.
8.  Let _result_ be [Completion](#sec-completion-ao)([InnerModuleEvaluation](#sec-innermoduleevaluation)(_module_, _stack_, 0)).
9.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  For each [Cyclic Module Record](#cyclic-module-record) _m_ of _stack_, do
        1.  [Assert](#assert): _m_._\[\[Status\]\]_ is evaluating.
        2.  [Assert](#assert): _m_._\[\[AsyncEvaluationOrder\]\]_ is unset.
        3.  Set _m_._\[\[Status\]\]_ to evaluated.
        4.  Set _m_._\[\[EvaluationError\]\]_ to _result_.
    2.  [Assert](#assert): _module_._\[\[Status\]\]_ is evaluated.
    3.  [Assert](#assert): _module_._\[\[EvaluationError\]\]_ and _result_ are the same [Completion Record](#sec-completion-record-specification-type).
    4.  Perform ! [Call](#sec-call)(_capability_._\[\[Reject\]\]_, undefined, « _result_._\[\[Value\]\]_ »).
10.  Else,
     1.  [Assert](#assert): _module_._\[\[Status\]\]_ is either evaluating-async or evaluated.
     2.  [Assert](#assert): _module_._\[\[EvaluationError\]\]_ is empty.
     3.  If _module_._\[\[Status\]\]_ is evaluated, then
         1.  [Assert](#assert): _module_._\[\[AsyncEvaluationOrder\]\]_ is either unset or done.
         2.  NOTE: _module_._\[\[AsyncEvaluationOrder\]\]_ is done if and only if _module_ had already been evaluated and that evaluation was asynchronous.
         3.  Perform ! [Call](#sec-call)(_capability_._\[\[Resolve\]\]_, undefined, « undefined »).
     4.  [Assert](#assert): _stack_ is empty.
11.  Return _capability_._\[\[Promise\]\]_.


# 16.2.1.6.1.3.1 InnerModuleEvaluation ( _module_, _stack_, _index_ )

The abstract operation InnerModuleEvaluation takes arguments _module_ (a [Module Record](#sec-abstract-module-records)), _stack_ (a [List](#sec-list-and-record-specification-type) of [Cyclic Module Records](#cyclic-module-record)), and _index_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a non-negative [integer](#integer) or a [throw completion](#sec-completion-record-specification-type). It is used by Evaluate to perform the actual evaluation process for _module_, as well as recursively on all other modules in the dependency graph. The _stack_ and _index_ parameters, as well as _module_'s _\[\[DFSAncestorIndex\]\]_ field, are used the same way as in [InnerModuleLinking](#sec-InnerModuleLinking). It performs the following steps when called:

1.  If _module_ is not a [Cyclic Module Record](#cyclic-module-record), then
    1.  Perform ? [EvaluateModuleSync](#sec-EvaluateModuleSync)(_module_).
    2.  Return _index_.
2.  If _module_._\[\[Status\]\]_ is either evaluating-async or evaluated, then
    1.  If _module_._\[\[EvaluationError\]\]_ is empty, return _index_.
    2.  Otherwise, return ? _module_._\[\[EvaluationError\]\]_.
3.  If _module_._\[\[Status\]\]_ is evaluating, return _index_.
4.  [Assert](#assert): _module_._\[\[Status\]\]_ is linked.
5.  Set _module_._\[\[Status\]\]_ to evaluating.
6.  Let _moduleIndex_ be _index_.
7.  Set _module_._\[\[DFSAncestorIndex\]\]_ to _index_.
8.  Set _module_._\[\[PendingAsyncDependencies\]\]_ to 0.
9.  Set _index_ to _index_ + 1.
10.  Append _module_ to _stack_.
11.  For each [ModuleRequest Record](#modulerequest-record) _request_ of _module_._\[\[RequestedModules\]\]_, do
     1.  Let _requiredModule_ be [GetImportedModule](#sec-GetImportedModule)(_module_, _request_).
     2.  Set _index_ to ? [InnerModuleEvaluation](#sec-innermoduleevaluation)(_requiredModule_, _stack_, _index_).
     3.  If _requiredModule_ is a [Cyclic Module Record](#cyclic-module-record), then
         1.  [Assert](#assert): _requiredModule_._\[\[Status\]\]_ is one of evaluating, evaluating-async, or evaluated.
         2.  [Assert](#assert): _requiredModule_._\[\[Status\]\]_ is evaluating if and only if _stack_ contains _requiredModule_.
         3.  If _requiredModule_._\[\[Status\]\]_ is evaluating, then
             1.  Set _module_._\[\[DFSAncestorIndex\]\]_ to [min](#eqn-min)(_module_._\[\[DFSAncestorIndex\]\]_, _requiredModule_._\[\[DFSAncestorIndex\]\]_).
         4.  Else,
             1.  Set _requiredModule_ to _requiredModule_._\[\[CycleRoot\]\]_.
             2.  [Assert](#assert): _requiredModule_._\[\[Status\]\]_ is either evaluating-async or evaluated.
             3.  If _requiredModule_._\[\[EvaluationError\]\]_ is not empty, return ? _requiredModule_._\[\[EvaluationError\]\]_.
         5.  If _requiredModule_._\[\[AsyncEvaluationOrder\]\]_ is an [integer](#integer), then
             1.  Set _module_._\[\[PendingAsyncDependencies\]\]_ to _module_._\[\[PendingAsyncDependencies\]\]_ + 1.
             2.  Append _module_ to _requiredModule_._\[\[AsyncParentModules\]\]_.
12.  If _module_._\[\[PendingAsyncDependencies\]\]_ > 0 or _module_._\[\[HasTLA\]\]_ is true, then
     1.  [Assert](#assert): _module_._\[\[AsyncEvaluationOrder\]\]_ is unset.
     2.  Set _module_._\[\[AsyncEvaluationOrder\]\]_ to [IncrementModuleAsyncEvaluationCount](#sec-IncrementModuleAsyncEvaluationCount)().
     3.  If _module_._\[\[PendingAsyncDependencies\]\]_ = 0, perform [ExecuteAsyncModule](#sec-execute-async-module)(_module_).
13.  Else,
     1.  Perform ? _module_.ExecuteModule().
14.  [Assert](#assert): _module_ occurs exactly once in _stack_.
15.  [Assert](#assert): _module_._\[\[DFSAncestorIndex\]\]_ ≤ _moduleIndex_.
16.  If _module_._\[\[DFSAncestorIndex\]\]_ = _moduleIndex_, then
     1.  Let _done_ be false.
     2.  Repeat, while _done_ is false,
         1.  Let _requiredModule_ be the last element of _stack_.
         2.  Remove the last element of _stack_.
         3.  [Assert](#assert): _requiredModule_ is a [Cyclic Module Record](#cyclic-module-record).
         4.  [Assert](#assert): _requiredModule_._\[\[AsyncEvaluationOrder\]\]_ is either an [integer](#integer) or unset.
         5.  If _requiredModule_._\[\[AsyncEvaluationOrder\]\]_ is unset, set _requiredModule_._\[\[Status\]\]_ to evaluated.
         6.  Otherwise, set _requiredModule_._\[\[Status\]\]_ to evaluating-async.
         7.  If _requiredModule_ and _module_ are the same [Module Record](#sec-abstract-module-records), set _done_ to true.
         8.  Set _requiredModule_._\[\[CycleRoot\]\]_ to _module_.
17.  Return _index_.

Note 1

A module is evaluating while it is being traversed by InnerModuleEvaluation. A module is evaluated on execution completion or evaluating-async during execution if its _\[\[HasTLA\]\]_ field is true or if it has asynchronous dependencies.

Note 2

Any modules depending on a module of an asynchronous cycle when that cycle is not evaluating will instead depend on the execution of the root of the cycle via _\[\[CycleRoot\]\]_. This ensures that the cycle state can be treated as a single strongly connected component through its root module state.


# 16.2.1.6.1.3.2 ExecuteAsyncModule ( _module_ )

The abstract operation ExecuteAsyncModule takes argument _module_ (a [Cyclic Module Record](#cyclic-module-record)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _module_._\[\[Status\]\]_ is either evaluating or evaluating-async.
2.  [Assert](#assert): _module_._\[\[HasTLA\]\]_ is true.
3.  Let _capability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
4.  Let _fulfilledClosure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _module_ and performs the following steps when called:
    1.  Perform [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled)(_module_).
    2.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
5.  Let _onFulfilled_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_fulfilledClosure_, 0, "", « »).
6.  Let _rejectedClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_error_) that captures _module_ and performs the following steps when called:
    1.  Perform [AsyncModuleExecutionRejected](#sec-async-module-execution-rejected)(_module_, _error_).
    2.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
7.  Let _onRejected_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_rejectedClosure_, 0, "", « »).
8.  Perform [PerformPromiseThen](#sec-performpromisethen)(_capability_._\[\[Promise\]\]_, _onFulfilled_, _onRejected_).
9.  Perform ! _module_.ExecuteModule(_capability_).
10.  Return unused.


# 16.2.1.6.1.3.3 GatherAvailableAncestors ( _module_, _execList_ )

The abstract operation GatherAvailableAncestors takes arguments _module_ (a [Cyclic Module Record](#cyclic-module-record)) and _execList_ (a [List](#sec-list-and-record-specification-type) of [Cyclic Module Records](#cyclic-module-record)) and returns unused. It performs the following steps when called:

1.  For each [Cyclic Module Record](#cyclic-module-record) _m_ of _module_._\[\[AsyncParentModules\]\]_, do
    1.  If _execList_ does not contain _m_ and _m_._\[\[CycleRoot\]\]_._\[\[EvaluationError\]\]_ is empty, then
        1.  [Assert](#assert): _m_._\[\[Status\]\]_ is evaluating-async.
        2.  [Assert](#assert): _m_._\[\[EvaluationError\]\]_ is empty.
        3.  [Assert](#assert): _m_._\[\[AsyncEvaluationOrder\]\]_ is an [integer](#integer).
        4.  [Assert](#assert): _m_._\[\[PendingAsyncDependencies\]\]_ > 0.
        5.  Set _m_._\[\[PendingAsyncDependencies\]\]_ to _m_._\[\[PendingAsyncDependencies\]\]_ - 1.
        6.  If _m_._\[\[PendingAsyncDependencies\]\]_ = 0, then
            1.  Append _m_ to _execList_.
            2.  If _m_._\[\[HasTLA\]\]_ is false, perform [GatherAvailableAncestors](#sec-gather-available-ancestors)(_m_, _execList_).
2.  Return unused.

Note

When an asynchronous execution for a root _module_ is fulfilled, this function determines the list of modules which are able to synchronously execute together on this completion, populating them in _execList_.


# 16.2.1.6.1.3.4 AsyncModuleExecutionFulfilled ( _module_ )

The abstract operation AsyncModuleExecutionFulfilled takes argument _module_ (a [Cyclic Module Record](#cyclic-module-record)) and returns unused. It performs the following steps when called:

1.  If _module_._\[\[Status\]\]_ is evaluated, then
    1.  [Assert](#assert): _module_._\[\[EvaluationError\]\]_ is not empty.
    2.  Return unused.
2.  [Assert](#assert): _module_._\[\[Status\]\]_ is evaluating-async.
3.  [Assert](#assert): _module_._\[\[AsyncEvaluationOrder\]\]_ is an [integer](#integer).
4.  [Assert](#assert): _module_._\[\[EvaluationError\]\]_ is empty.
5.  Set _module_._\[\[AsyncEvaluationOrder\]\]_ to done.
6.  Set _module_._\[\[Status\]\]_ to evaluated.
7.  If _module_._\[\[TopLevelCapability\]\]_ is not empty, then
    1.  [Assert](#assert): _module_._\[\[CycleRoot\]\]_ and _module_ are the same [Module Record](#sec-abstract-module-records).
    2.  Perform ! [Call](#sec-call)(_module_._\[\[TopLevelCapability\]\]_._\[\[Resolve\]\]_, undefined, « undefined »).
8.  Let _execList_ be a new empty [List](#sec-list-and-record-specification-type).
9.  Perform [GatherAvailableAncestors](#sec-gather-available-ancestors)(_module_, _execList_).
10.  [Assert](#assert): All elements of _execList_ have their _\[\[AsyncEvaluationOrder\]\]_ field set to an [integer](#integer), _\[\[PendingAsyncDependencies\]\]_ field set to 0, and _\[\[EvaluationError\]\]_ field set to empty.
11.  Let _sortedExecList_ be a [List](#sec-list-and-record-specification-type) whose elements are the elements of _execList_, sorted by their _\[\[AsyncEvaluationOrder\]\]_ field in ascending order.
12.  For each [Cyclic Module Record](#cyclic-module-record) _m_ of _sortedExecList_, do
     1.  If _m_._\[\[Status\]\]_ is evaluated, then
         1.  [Assert](#assert): _m_._\[\[EvaluationError\]\]_ is not empty.
     2.  Else if _m_._\[\[HasTLA\]\]_ is true, then
         1.  Perform [ExecuteAsyncModule](#sec-execute-async-module)(_m_).
     3.  Else,
         1.  Let _result_ be _m_.ExecuteModule().
         2.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
             1.  Perform [AsyncModuleExecutionRejected](#sec-async-module-execution-rejected)(_m_, _result_._\[\[Value\]\]_).
         3.  Else,
             1.  Set _m_._\[\[AsyncEvaluationOrder\]\]_ to done.
             2.  Set _m_._\[\[Status\]\]_ to evaluated.
             3.  If _m_._\[\[TopLevelCapability\]\]_ is not empty, then
                 1.  [Assert](#assert): _m_._\[\[CycleRoot\]\]_ and _m_ are the same [Module Record](#sec-abstract-module-records).
                 2.  Perform ! [Call](#sec-call)(_m_._\[\[TopLevelCapability\]\]_._\[\[Resolve\]\]_, undefined, « undefined »).
13.  Return unused.


# 16.2.1.6.1.3.5 AsyncModuleExecutionRejected ( _module_, _error_ )

The abstract operation AsyncModuleExecutionRejected takes arguments _module_ (a [Cyclic Module Record](#cyclic-module-record)) and _error_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It performs the following steps when called:

1.  If _module_._\[\[Status\]\]_ is evaluated, then
    1.  [Assert](#assert): _module_._\[\[EvaluationError\]\]_ is not empty.
    2.  Return unused.
2.  [Assert](#assert): _module_._\[\[Status\]\]_ is evaluating-async.
3.  [Assert](#assert): _module_._\[\[AsyncEvaluationOrder\]\]_ is an [integer](#integer).
4.  [Assert](#assert): _module_._\[\[EvaluationError\]\]_ is empty.
5.  Set _module_._\[\[EvaluationError\]\]_ to [ThrowCompletion](#sec-throwcompletion)(_error_).
6.  Set _module_._\[\[Status\]\]_ to evaluated.
7.  Set _module_._\[\[AsyncEvaluationOrder\]\]_ to done.
8.  NOTE: _module_._\[\[AsyncEvaluationOrder\]\]_ is set to done for symmetry with [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled). In [InnerModuleEvaluation](#sec-innermoduleevaluation), the value of a module's _\[\[AsyncEvaluationOrder\]\]_ internal slot is unused when its _\[\[EvaluationError\]\]_ internal slot is not empty.
9.  If _module_._\[\[TopLevelCapability\]\]_ is not empty, then
    1.  [Assert](#assert): _module_._\[\[CycleRoot\]\]_ and _module_ are the same [Module Record](#sec-abstract-module-records).
    2.  Perform ! [Call](#sec-call)(_module_._\[\[TopLevelCapability\]\]_._\[\[Reject\]\]_, undefined, « _error_ »).
10.  For each [Cyclic Module Record](#cyclic-module-record) _m_ of _module_._\[\[AsyncParentModules\]\]_, do
     1.  Perform [AsyncModuleExecutionRejected](#sec-async-module-execution-rejected)(_m_, _error_).
11.  Return unused.


# 16.2.1.6.2 Example Cyclic Module Record Graphs

This non-normative section gives a series of examples of the linking and evaluation of a few common module graphs, with a specific focus on how errors can occur.

First consider the following simple module graph:

Figure 2: A simple module graph

![A module graph in which module A depends on module B, and module B depends on module C](img/module-graph-simple.svg)

Let's first assume that there are no error conditions. When a [host](#host) first calls _A_.LoadRequestedModules(), this will complete successfully by assumption, and recursively load the dependencies of _B_ and _C_ as well (respectively, _C_ and none), and then set _A_._\[\[Status\]\]_ = _B_._\[\[Status\]\]_ = _C_._\[\[Status\]\]_ = unlinked. Then, when the [host](#host) calls _A_.Link(), it will complete successfully (again by assumption) such that _A_._\[\[Status\]\]_ = _B_._\[\[Status\]\]_ = _C_._\[\[Status\]\]_ = linked. These preparatory steps can be performed at any time. Later, when the [host](#host) is ready to incur any possible side effects of the modules, it can call _A_.Evaluate(), which will complete successfully, returning a Promise resolving to undefined (again by assumption), recursively having evaluated first _C_ and then _B_. Each module's _\[\[Status\]\]_ at this point will be evaluated.

Consider then cases involving linking errors, after a successful call to _A_.LoadRequestedModules(). If [InnerModuleLinking](#sec-InnerModuleLinking) of _C_ succeeds but, thereafter, fails for _B_, for example because it imports something that _C_ does not provide, then the original _A_.Link() will fail, and both _A_ and _B_'s _\[\[Status\]\]_ remain unlinked. _C_'s _\[\[Status\]\]_ has become linked, though.

Finally, consider a case involving evaluation errors after a successful call to Link(). If [InnerModuleEvaluation](#sec-innermoduleevaluation) of _C_ succeeds but, thereafter, fails for _B_, for example because _B_ contains code that throws an exception, then the original _A_.Evaluate() will fail, returning a rejected Promise. The resulting exception will be recorded in both _A_ and _B_'s _\[\[EvaluationError\]\]_ fields, and their _\[\[Status\]\]_ will become evaluated. _C_ will also become evaluated but, in contrast to _A_ and _B_, will remain without an _\[\[EvaluationError\]\]_, as it successfully completed evaluation. Storing the exception ensures that any time a [host](#host) tries to reuse _A_ or _B_ by calling their Evaluate() method, it will encounter the same exception. ([Hosts](#host) are not required to reuse [Cyclic Module Records](#cyclic-module-record); similarly, [hosts](#host) are not required to expose the exception objects thrown by these methods. However, the specification enables such uses.)

Now consider a different type of error condition:

Figure 3: A module graph with an unresolvable module

![A module graph in which module A depends on a missing (unresolvable) module, represented by ???](img/module-graph-missing.svg)

In this scenario, module _A_ declares a dependency on some other module, but no [Module Record](#sec-abstract-module-records) exists for that module, i.e. [HostLoadImportedModule](#sec-HostLoadImportedModule) calls [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule) with an exception when asked for it. This could occur for a variety of reasons, such as the corresponding resource not existing, or the resource existing but [ParseModule](#sec-parsemodule) returning some errors when trying to parse the resulting source text. [Hosts](#host) can choose to expose the cause of failure via the completion they pass to [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule). In any case, this exception causes a loading failure, which results in _A_'s _\[\[Status\]\]_ remaining new.

The difference here between loading, linking and evaluation errors is due to the following characteristic:

-   [Evaluation](#sec-evaluation) must be only performed once, as it can cause side effects; it is thus important to remember whether evaluation has already been performed, even if unsuccessfully. (In the error case, it makes sense to also remember the exception because otherwise subsequent Evaluate() calls would have to synthesize a new one.)
-   Linking, on the other hand, is side-effect-free, and thus even if it fails, it can be retried at a later time with no issues.
-   Loading closely interacts with the [host](#host), and it may be desirable for some of them to allow users to retry failed loads (for example, if the failure is caused by temporarily bad network conditions).

Now, consider a module graph with a cycle:

Figure 4: A cyclic module graph

![A module graph in which module A depends on module B and C, but module B also depends on module A](img/module-graph-cycle.svg)

Here we assume that the entry point is module _A_, so that the [host](#host) proceeds by calling _A_.LoadRequestedModules(), which performs [InnerModuleLoading](#sec-InnerModuleLoading) on _A_. This in turn calls [InnerModuleLoading](#sec-InnerModuleLoading) on _B_ and _C_. Because of the cycle, this again triggers [InnerModuleLoading](#sec-InnerModuleLoading) on _A_, but at this point it is a no-op since _A_'s dependencies loading has already been triggered during this LoadRequestedModules process. When all the modules in the graph have been successfully loaded, their _\[\[Status\]\]_ transitions from new to unlinked at the same time.

Then the [host](#host) proceeds by calling _A_.Link(), which performs [InnerModuleLinking](#sec-InnerModuleLinking) on _A_. This in turn calls [InnerModuleLinking](#sec-InnerModuleLinking) on _B_. Because of the cycle, this again triggers [InnerModuleLinking](#sec-InnerModuleLinking) on _A_, but at this point it is a no-op since _A_._\[\[Status\]\]_ is already linking. _B_._\[\[Status\]\]_ itself remains linking when control gets back to _A_ and [InnerModuleLinking](#sec-InnerModuleLinking) is triggered on _C_. After this returns with _C_._\[\[Status\]\]_ being linked, both _A_ and _B_ transition from linking to linked together; this is by design, since they form a strongly connected component. It's possible to transition the status of modules in the same SCC at the same time because during this phase the module graph is traversed with a depth-first search.

An analogous story occurs for the evaluation phase of a cyclic module graph, in the success case.

Now consider a case where _A_ has a linking error; for example, it tries to import a binding from _C_ that does not exist. In that case, the above steps still occur, including the early return from the second call to [InnerModuleLinking](#sec-InnerModuleLinking) on _A_. However, once we unwind back to the original [InnerModuleLinking](#sec-InnerModuleLinking) on _A_, it fails during InitializeEnvironment, namely right after _C_.ResolveExport(). The thrown SyntaxError exception propagates up to _A_.Link, which resets all modules that are currently on its _stack_ (these are always exactly the modules that are still linking). Hence both _A_ and _B_ become unlinked. Note that _C_ is left as linked.

Alternatively, consider a case where _A_ has an evaluation error; for example, its source code throws an exception. In that case, the evaluation-time analogue of the above steps still occurs, including the early return from the second call to [InnerModuleEvaluation](#sec-innermoduleevaluation) on _A_. However, once we unwind back to the original [InnerModuleEvaluation](#sec-innermoduleevaluation) on _A_, it fails by assumption. The exception thrown propagates up to _A_.Evaluate(), which records the error in all modules that are currently on its _stack_ (i.e., the modules that are still evaluating) as well as via _\[\[AsyncParentModules\]\]_, which form a chain for modules which contain or depend on top-level `await` through the whole dependency graph through the [AsyncModuleExecutionRejected](#sec-async-module-execution-rejected) algorithm. Hence both _A_ and _B_ become evaluated and the exception is recorded in both _A_ and _B_'s _\[\[EvaluationError\]\]_ fields, while _C_ is left as evaluated with no _\[\[EvaluationError\]\]_.

Lastly, consider a module graph with a cycle, where all modules complete asynchronously:

Figure 5: An asynchronous cyclic module graph

![A module graph in which module A depends on module B and C, module B depends on module D, module C depends on module D and E, and module D depends on module A](img/module-graph-cycle-async.svg)

Loading and linking happen as before, and all modules end up with _\[\[Status\]\]_ set to linked.

Calling _A_.Evaluate() calls [InnerModuleEvaluation](#sec-innermoduleevaluation) on _A_, _B_, and _D_, which all transition to evaluating. Then [InnerModuleEvaluation](#sec-innermoduleevaluation) is called on _A_ again, which is a no-op because it is already evaluating. At this point, _D_._\[\[PendingAsyncDependencies\]\]_ is 0, so [ExecuteAsyncModule](#sec-execute-async-module)(_D_) is called and we call _D_.ExecuteModule with a new PromiseCapability tracking the asynchronous execution of _D_. We unwind back to the [InnerModuleEvaluation](#sec-innermoduleevaluation) on _B_, setting _B_._\[\[PendingAsyncDependencies\]\]_ to 1 and _B_._\[\[AsyncEvaluationOrder\]\]_ to 1. We unwind back to the original [InnerModuleEvaluation](#sec-innermoduleevaluation) on _A_, setting _A_._\[\[PendingAsyncDependencies\]\]_ to 1. In the next iteration of the loop over _A_'s dependencies, we call [InnerModuleEvaluation](#sec-innermoduleevaluation) on _C_ and thus on _D_ (again a no-op) and _E_. As _E_ has no dependencies and is not part of a cycle, we call [ExecuteAsyncModule](#sec-execute-async-module)(_E_) in the same manner as _D_ and _E_ is immediately removed from the stack. We unwind once more to the [InnerModuleEvaluation](#sec-innermoduleevaluation) on _C_, setting _C_._\[\[AsyncEvaluationOrder\]\]_ to 3. Now we finish the loop over _A_'s dependencies, set _A_._\[\[AsyncEvaluationOrder\]\]_ to 4, and remove the entire strongly connected component from the stack, transitioning all of the modules to evaluating-async at once. At this point, the fields of the modules are as given in [Table 46](#table-module-graph-cycle-async-fields-1).

Table 46: Module fields after the initial Evaluate() call

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>A</var></th><th><var>B</var></th><th><var>C</var></th><th><var>D</var></th><th><var>E</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td><td>0</td><td>0</td><td>0</td><td>4</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluating-async</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td>4</td><td>1</td><td>3</td><td>0</td><td>2</td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« »</td><td>« <var>A</var> »</td><td>« <var>A</var> »</td><td>« <var>B</var>, <var>C</var> »</td><td>« <var>C</var> »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>2 (<var>B</var> and <var>C</var>)</td><td>1 (<var>D</var>)</td><td>2 (<var>D</var> and <var>E</var>)</td><td>0</td><td>0</td></tr></tbody></table>

Let us assume that _E_ finishes executing first. When that happens, [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled) is called, _E_._\[\[Status\]\]_ is set to evaluated and _C_._\[\[PendingAsyncDependencies\]\]_ is decremented to become 1. The fields of the updated modules are as given in [Table 47](#table-module-graph-cycle-async-fields-2).

Table 47: Module fields after module _E_ finishes executing

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>C</var></th><th><var>E</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td><td>4</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td>3</td><td><emu-const>done</emu-const></td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« <var>A</var> »</td><td>« <var>C</var> »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>1 (<var>D</var>)</td><td>0</td></tr></tbody></table>

_D_ is next to finish (as it was the only module that was still executing). When that happens, [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled) is called again and _D_._\[\[Status\]\]_ is set to evaluated. Its ancestors available for execution are _B_ (whose _\[\[AsyncEvaluationOrder\]\]_ is 1) and _C_ (whose _\[\[AsyncEvaluationOrder\]\]_ is 3), thus _B_ will be handled first: _B_._\[\[PendingAsyncDependencies\]\]_ is decremented to become 0, [ExecuteAsyncModule](#sec-execute-async-module) is called on _B_, and it starts executing. _C_._\[\[PendingAsyncDependencies\]\]_ is also decremented to become 0, and _C_ starts executing (potentially in parallel to _B_ if _B_ contains an `await`). The fields of the updated modules are as given in [Table 48](#table-module-graph-cycle-async-fields-3).

Table 48: Module fields after module _D_ finishes executing

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>B</var></th><th><var>C</var></th><th><var>D</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td><td>0</td><td>0</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td>1</td><td>3</td><td><emu-const>done</emu-const></td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« <var>A</var> »</td><td>« <var>A</var> »</td><td>« <var>B</var>, <var>C</var> »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>0</td><td>0</td><td>0</td></tr></tbody></table>

Let us assume that _C_ finishes executing next. When that happens, [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled) is called again, _C_._\[\[Status\]\]_ is set to evaluated and _A_._\[\[PendingAsyncDependencies\]\]_ is decremented to become 1. The fields of the updated modules are as given in [Table 49](#table-module-graph-cycle-async-fields-4).

Table 49: Module fields after module _C_ finishes executing

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>A</var></th><th><var>C</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td><td>0</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td>4</td><td><emu-const>done</emu-const></td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« »</td><td>« <var>A</var> »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>1 (<var>B</var>)</td><td>0</td></tr></tbody></table>

Then, _B_ finishes executing. When that happens, [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled) is called again and _B_._\[\[Status\]\]_ is set to evaluated. _A_._\[\[PendingAsyncDependencies\]\]_ is decremented to become 0, so [ExecuteAsyncModule](#sec-execute-async-module) is called and it starts executing. The fields of the updated modules are as given in [Table 50](#table-module-graph-cycle-async-fields-5).

Table 50: Module fields after module _B_ finishes executing

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>A</var></th><th><var>B</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td><td>0</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluating-async</emu-const></td><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td>4</td><td><emu-const>done</emu-const></td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« »</td><td>« <var>A</var> »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>0</td><td>0</td></tr></tbody></table>

Finally, _A_ finishes executing. When that happens, [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled) is called again and _A_._\[\[Status\]\]_ is set to evaluated. At this point, the Promise in _A_._\[\[TopLevelCapability\]\]_ (which was returned from _A_.Evaluate()) is resolved, and this concludes the handling of this module graph. The fields of the updated module are as given in [Table 51](#table-module-graph-cycle-async-fields-6).

Table 51: Module fields after module _A_ finishes executing

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>A</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td><emu-const>done</emu-const></td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>0</td></tr></tbody></table>

Alternatively, consider a failure case where _C_ fails execution and returns an error before _B_ has finished executing. When that happens, [AsyncModuleExecutionRejected](#sec-async-module-execution-rejected) is called, which sets _C_._\[\[Status\]\]_ to evaluated and _C_._\[\[EvaluationError\]\]_ to the error. It then propagates this error to all of the AsyncParentModules by performing [AsyncModuleExecutionRejected](#sec-async-module-execution-rejected) on each of them. The fields of the updated modules are as given in [Table 52](#table-module-graph-cycle-async-fields-7).

Table 52: Module fields after module _C_ finishes with an error

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>A</var></th><th><var>C</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td><td>0</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluated</emu-const></td><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td><emu-const>done</emu-const></td><td><emu-const>done</emu-const></td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« »</td><td>« <var>A</var> »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>1 (<var>B</var>)</td><td>0</td></tr><tr><th><var class="field">[[EvaluationError]]</var></th><td><emu-const>empty</emu-const></td><td><var>C</var>'s evaluation error</td></tr></tbody></table>

_A_ will be rejected with the same error as _C_ since _C_ will call [AsyncModuleExecutionRejected](#sec-async-module-execution-rejected) on _A_ with _C_'s error. _A_._\[\[Status\]\]_ is set to evaluated. At this point the Promise in _A_._\[\[TopLevelCapability\]\]_ (which was returned from _A_.Evaluate()) is rejected. The fields of the updated module are as given in [Table 53](#table-module-graph-cycle-async-fields-8).

Table 53: Module fields after module _A_ is rejected

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>A</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td><emu-const>done</emu-const></td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>0</td></tr><tr><th><var class="field">[[EvaluationError]]</var></th><td><var>C</var>'s <emu-xref aoid="Evaluation" id="_ref_8714"><a href="#sec-evaluation">Evaluation</a></emu-xref> Error</td></tr></tbody></table>

Then, _B_ finishes executing without an error. When that happens, [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled) is called again and _B_._\[\[Status\]\]_ is set to evaluated. [GatherAvailableAncestors](#sec-gather-available-ancestors) is called on _B_. However, _A_._\[\[CycleRoot\]\]_ is _A_ which has an evaluation error, so it will not be added to the returned _sortedExecList_ and [AsyncModuleExecutionFulfilled](#sec-async-module-execution-fulfilled) will return without further processing. Any future importer of _B_ will resolve the rejection of _B_._\[\[CycleRoot\]\]_._\[\[EvaluationError\]\]_ from the evaluation error from _C_ that was set on the cycle root _A_. The fields of the updated modules are as given in [Table 54](#table-module-graph-cycle-async-fields-9).

Table 54: Module fields after module _B_ finishes executing in an erroring graph

<table><thead><tr><th class="corner-cell"><span class="column">Field</span><div class="slash"></div><span class="row">Module</span></th><th><var>A</var></th><th><var>B</var></th></tr></thead><tbody><tr><th><var class="field">[[DFSAncestorIndex]]</var></th><td>0</td><td>0</td></tr><tr><th><var class="field">[[Status]]</var></th><td><emu-const>evaluated</emu-const></td><td><emu-const>evaluated</emu-const></td></tr><tr><th><var class="field">[[AsyncEvaluationOrder]]</var></th><td>4</td><td>1</td></tr><tr><th><var class="field">[[AsyncParentModules]]</var></th><td>« »</td><td>« <var>A</var> »</td></tr><tr><th><var class="field">[[PendingAsyncDependencies]]</var></th><td>0</td><td>0</td></tr><tr><th><var class="field">[[EvaluationError]]</var></th><td><var>C</var>'s <emu-xref aoid="Evaluation" id="_ref_8718"><a href="#sec-evaluation">Evaluation</a></emu-xref> Error</td><td><emu-const>empty</emu-const></td></tr></tbody></table>


# 16.2.1.7 Source Text Module Records

A Source Text Module Record is used to represent information about a module that was defined from [ECMAScript source text](#sec-source-text) ([11](#sec-ecmascript-language-source-code)) that was parsed using the [goal symbol](#sec-context-free-grammars) [Module](#prod-Module). Its fields contain digested information about the names that are imported and exported by the module, and its concrete methods use these digests to link and evaluate the module.

A [Source Text Module Record](#sourctextmodule-record) can exist in a module graph with other subclasses of the abstract [Module Record](#sec-abstract-module-records) type, and can participate in cycles with other subclasses of the [Cyclic Module Record](#cyclic-module-record) type.

In addition to the fields defined in [Table 43](#table-cyclic-module-fields), [Source Text Module Records](#sourctextmodule-record) have the additional fields listed in [Table 55](#table-additional-fields-of-source-text-module-records). Each of these fields is initially set in [ParseModule](#sec-parsemodule).

Table 55: Additional Fields of [Source Text Module Records](#sourctextmodule-record)

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[ECMAScriptCode]]</var></td><td>a <emu-xref href="#sec-syntactic-grammar" id="_ref_8727"><a href="#sec-syntactic-grammar">Parse Node</a></emu-xref></td><td>The result of parsing the source text of this module using <emu-nt id="_ref_23131"><a href="#prod-Module">Module</a></emu-nt> as the <emu-xref href="#sec-context-free-grammars" id="_ref_8728"><a href="#sec-context-free-grammars">goal symbol</a></emu-xref>.</td></tr><tr><td><var class="field">[[Context]]</var></td><td>an <emu-xref href="#ecmascript-code-execution-context" id="_ref_8729"><a href="#ecmascript-code-execution-context">ECMAScript code execution context</a></emu-xref> or <emu-const>empty</emu-const></td><td>The <emu-xref href="#sec-execution-contexts" id="_ref_8730"><a href="#sec-execution-contexts">execution context</a></emu-xref> associated with this module. It is <emu-const>empty</emu-const> until the module's environment has been initialized.</td></tr><tr><td><var class="field">[[ImportMeta]]</var></td><td>an Object or <emu-const>empty</emu-const></td><td>An object exposed through the <code>import.meta</code> meta property. It is <emu-const>empty</emu-const> until it is accessed by ECMAScript code.</td></tr><tr><td><var class="field">[[ImportEntries]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8731"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#importentry-record" id="_ref_8732"><a href="#importentry-record">ImportEntry Records</a></emu-xref></td><td>A <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8733"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of ImportEntry records derived from the code of this module.</td></tr><tr><td><var class="field">[[LocalExportEntries]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8734"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#exportentry-record" id="_ref_8735"><a href="#exportentry-record">ExportEntry Records</a></emu-xref></td><td>A <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8736"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of ExportEntry records derived from the code of this module that correspond to declarations that occur within the module.</td></tr><tr><td><var class="field">[[IndirectExportEntries]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8737"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#exportentry-record" id="_ref_8738"><a href="#exportentry-record">ExportEntry Records</a></emu-xref></td><td>A <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8739"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of ExportEntry records derived from the code of this module that correspond to reexported imports that occur within the module or exports from <code>export * as namespace</code> declarations.</td></tr><tr><td><var class="field">[[StarExportEntries]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8740"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#exportentry-record" id="_ref_8741"><a href="#exportentry-record">ExportEntry Records</a></emu-xref></td><td>A <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8742"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of ExportEntry records derived from the code of this module that correspond to <code>export *</code> declarations that occur within the module, not including <code>export * as namespace</code> declarations.</td></tr></tbody></table>

An ImportEntry Record is a [Record](#sec-list-and-record-specification-type) that digests information about a single declarative import. Each [ImportEntry Record](#importentry-record) has the fields defined in [Table 56](#table-importentry-record-fields):

Table 56: [ImportEntry Record](#importentry-record) Fields

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[ModuleRequest]]</var></td><td>a <emu-xref href="#modulerequest-record" id="_ref_8746"><a href="#modulerequest-record">ModuleRequest Record</a></emu-xref></td><td><emu-xref href="#modulerequest-record" id="_ref_8747"><a href="#modulerequest-record">ModuleRequest Record</a></emu-xref> representing the <emu-nt id="_ref_23132"><a href="#prod-ModuleSpecifier">ModuleSpecifier</a></emu-nt> and import attributes of the <emu-nt id="_ref_23133"><a href="#prod-ImportDeclaration">ImportDeclaration</a></emu-nt>.</td></tr><tr><td><var class="field">[[ImportName]]</var></td><td>a String or <emu-const>namespace-object</emu-const></td><td>The name under which the desired binding is exported by the module identified by <var class="field">[[ModuleRequest]]</var>. The value <emu-const>namespace-object</emu-const> indicates that the import request is for the target module's namespace object.</td></tr><tr><td><var class="field">[[LocalName]]</var></td><td>a String</td><td>The name that is used to locally access the imported value from within the importing module.</td></tr></tbody></table>

Note 1

[Table 57](#table-import-forms-mapping-to-importentry-records) gives examples of ImportEntry records fields used to represent the syntactic import forms:

Table 57 (Informative): Import Forms Mappings to [ImportEntry Records](#importentry-record)

<table><thead><tr><th>Import Statement Form</th><th><var class="field">[[ModuleRequest]]</var></th><th><var class="field">[[ImportName]]</var></th><th><var class="field">[[LocalName]]</var></th></tr></thead><tbody><tr><td><code>import v from "mod";</code></td><td><emu-val>"mod"</emu-val></td><td><emu-val>"default"</emu-val></td><td><emu-val>"v"</emu-val></td></tr><tr><td><code>import * as ns from "mod";</code></td><td><emu-val>"mod"</emu-val></td><td><emu-const>namespace-object</emu-const></td><td><emu-val>"ns"</emu-val></td></tr><tr><td><code>import {x} from "mod";</code></td><td><emu-val>"mod"</emu-val></td><td><emu-val>"x"</emu-val></td><td><emu-val>"x"</emu-val></td></tr><tr><td><code>import {x as v} from "mod";</code></td><td><emu-val>"mod"</emu-val></td><td><emu-val>"x"</emu-val></td><td><emu-val>"v"</emu-val></td></tr><tr><td><code>import "mod";</code></td><td colspan="3">An <emu-xref href="#importentry-record" id="_ref_8749"><a href="#importentry-record">ImportEntry Record</a></emu-xref> is not created.</td></tr></tbody></table>

An ExportEntry Record is a [Record](#sec-list-and-record-specification-type) that digests information about a single declarative export. Each [ExportEntry Record](#exportentry-record) has the fields defined in [Table 58](#table-exportentry-records):

Table 58: [ExportEntry Record](#exportentry-record) Fields

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[ExportName]]</var></td><td>a String or <emu-val>null</emu-val></td><td>The name used to export this binding by this module.</td></tr><tr><td><var class="field">[[ModuleRequest]]</var></td><td>a <emu-xref href="#modulerequest-record" id="_ref_8753"><a href="#modulerequest-record">ModuleRequest Record</a></emu-xref> or <emu-val>null</emu-val></td><td>The <emu-xref href="#modulerequest-record" id="_ref_8754"><a href="#modulerequest-record">ModuleRequest Record</a></emu-xref> representing the <emu-nt id="_ref_23134"><a href="#prod-ModuleSpecifier">ModuleSpecifier</a></emu-nt> and import attributes of the <emu-nt id="_ref_23135"><a href="#prod-ExportDeclaration">ExportDeclaration</a></emu-nt>. <emu-val>null</emu-val> if the <emu-nt id="_ref_23136"><a href="#prod-ExportDeclaration">ExportDeclaration</a></emu-nt> does not have a <emu-nt id="_ref_23137"><a href="#prod-ModuleSpecifier">ModuleSpecifier</a></emu-nt>.</td></tr><tr><td><var class="field">[[ImportName]]</var></td><td>a String, <emu-val>null</emu-val>, <emu-const>all</emu-const>, or <emu-const>all-but-default</emu-const></td><td>The name under which the desired binding is exported by the module identified by <var class="field">[[ModuleRequest]]</var>. <emu-val>null</emu-val> if the <emu-nt id="_ref_23138"><a href="#prod-ExportDeclaration">ExportDeclaration</a></emu-nt> does not have a <emu-nt id="_ref_23139"><a href="#prod-ModuleSpecifier">ModuleSpecifier</a></emu-nt>. <emu-const>all</emu-const> is used for <code>export * as ns from "mod"</code> declarations. <emu-const>all-but-default</emu-const> is used for <code>export * from "mod"</code> declarations.</td></tr><tr><td><var class="field">[[LocalName]]</var></td><td>a String or <emu-val>null</emu-val></td><td>The name that is used to locally access the exported value from within the importing module. <emu-val>null</emu-val> if the exported value is not locally accessible from within the module.</td></tr></tbody></table>

Note 2

[Table 59](#table-export-forms-mapping-to-exportentry-records) gives examples of the ExportEntry record fields used to represent the syntactic export forms:

Table 59 (Informative): Export Forms Mappings to [ExportEntry Records](#exportentry-record)

<table><thead><tr><th>Export Statement Form</th><th><var class="field">[[ExportName]]</var></th><th><var class="field">[[ModuleRequest]]</var></th><th><var class="field">[[ImportName]]</var></th><th><var class="field">[[LocalName]]</var></th></tr></thead><tbody><tr><td><code>export var v;</code></td><td><emu-val>"v"</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>"v"</emu-val></td></tr><tr><td><code>export default function f() {}</code></td><td><emu-val>"default"</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>"f"</emu-val></td></tr><tr><td><code>export default function () {}</code></td><td><emu-val>"default"</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>"*default*"</emu-val></td></tr><tr><td><code>export default 42;</code></td><td><emu-val>"default"</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>"*default*"</emu-val></td></tr><tr><td><code>export {x};</code></td><td><emu-val>"x"</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>"x"</emu-val></td></tr><tr><td><code>export {v as x};</code></td><td><emu-val>"x"</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>null</emu-val></td><td><emu-val>"v"</emu-val></td></tr><tr><td><code>export {x} from "mod";</code></td><td><emu-val>"x"</emu-val></td><td><emu-val>"mod"</emu-val></td><td><emu-val>"x"</emu-val></td><td><emu-val>null</emu-val></td></tr><tr><td><code>export {v as x} from "mod";</code></td><td><emu-val>"x"</emu-val></td><td><emu-val>"mod"</emu-val></td><td><emu-val>"v"</emu-val></td><td><emu-val>null</emu-val></td></tr><tr><td><code>export * from "mod";</code></td><td><emu-val>null</emu-val></td><td><emu-val>"mod"</emu-val></td><td><emu-const>all-but-default</emu-const></td><td><emu-val>null</emu-val></td></tr><tr><td><code>export * as ns from "mod";</code></td><td><emu-val>"ns"</emu-val></td><td><emu-val>"mod"</emu-val></td><td><emu-const>all</emu-const></td><td><emu-val>null</emu-val></td></tr></tbody></table>

The following definitions specify the required concrete methods and other [abstract operations](#sec-algorithm-conventions-abstract-operations) for [Source Text Module Records](#sourctextmodule-record)


# 16.2.1.7.1 ParseModule ( _sourceText_, _realm_, _hostDefined_ )

The abstract operation ParseModule takes arguments _sourceText_ ([ECMAScript source text](#sec-source-text)), _realm_ (a [Realm Record](#realm-record)), and _hostDefined_ (anything) and returns a [Source Text Module Record](#sourctextmodule-record) or a non-empty [List](#sec-list-and-record-specification-type) of SyntaxError objects. It creates a [Source Text Module Record](#sourctextmodule-record) based upon the result of parsing _sourceText_ as a [Module](#prod-Module). It performs the following steps when called:

1.  Let _body_ be [ParseText](#sec-parsetext)(_sourceText_, [Module](#prod-Module)).
2.  If _body_ is a [List](#sec-list-and-record-specification-type) of errors, return _body_.
3.  Let _requestedModules_ be the [ModuleRequests](#sec-static-semantics-modulerequests) of _body_.
4.  Let _importEntries_ be the [ImportEntries](#sec-static-semantics-importentries) of _body_.
5.  Let _importedBoundNames_ be [ImportedLocalNames](#sec-importedlocalnames)(_importEntries_).
6.  Let _indirectExportEntries_ be a new empty [List](#sec-list-and-record-specification-type).
7.  Let _localExportEntries_ be a new empty [List](#sec-list-and-record-specification-type).
8.  Let _starExportEntries_ be a new empty [List](#sec-list-and-record-specification-type).
9.  Let _exportEntries_ be the [ExportEntries](#sec-static-semantics-exportentries) of _body_.
10.  For each [ExportEntry Record](#exportentry-record) _ee_ of _exportEntries_, do
     1.  If _ee_._\[\[ModuleRequest\]\]_ is null, then
         1.  If _importedBoundNames_ does not contain _ee_._\[\[LocalName\]\]_, then
             1.  Append _ee_ to _localExportEntries_.
         2.  Else,
             1.  Let _ie_ be the element of _importEntries_ whose _\[\[LocalName\]\]_ is _ee_._\[\[LocalName\]\]_.
             2.  If _ie_._\[\[ImportName\]\]_ is namespace-object, then
                 1.  NOTE: This is a re-export of an imported module namespace object.
                 2.  Append _ee_ to _localExportEntries_.
             3.  Else,
                 1.  NOTE: This is a re-export of a single name.
                 2.  Append the [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: _ie_._\[\[ModuleRequest\]\]_, _\[\[ImportName\]\]_: _ie_._\[\[ImportName\]\]_, _\[\[LocalName\]\]_: null, _\[\[ExportName\]\]_: _ee_._\[\[ExportName\]\]_ } to _indirectExportEntries_.
     2.  Else if _ee_._\[\[ImportName\]\]_ is all-but-default, then
         1.  [Assert](#assert): _ee_._\[\[ExportName\]\]_ is null.
         2.  Append _ee_ to _starExportEntries_.
     3.  Else,
         1.  Append _ee_ to _indirectExportEntries_.
11.  Let _async_ be _body_ [Contains](#sec-static-semantics-contains) `await`.
12.  Return [Source Text Module Record](#sourctextmodule-record) { _\[\[Realm\]\]_: _realm_, _\[\[Environment\]\]_: empty, _\[\[Namespace\]\]_: empty, _\[\[CycleRoot\]\]_: empty, _\[\[HasTLA\]\]_: _async_, _\[\[AsyncEvaluationOrder\]\]_: unset, _\[\[TopLevelCapability\]\]_: empty, _\[\[AsyncParentModules\]\]_: « », _\[\[PendingAsyncDependencies\]\]_: empty, _\[\[Status\]\]_: new, _\[\[EvaluationError\]\]_: empty, _\[\[HostDefined\]\]_: _hostDefined_, _\[\[ECMAScriptCode\]\]_: _body_, _\[\[Context\]\]_: empty, _\[\[ImportMeta\]\]_: empty, _\[\[RequestedModules\]\]_: _requestedModules_, _\[\[LoadedModules\]\]_: « », _\[\[ImportEntries\]\]_: _importEntries_, _\[\[LocalExportEntries\]\]_: _localExportEntries_, _\[\[IndirectExportEntries\]\]_: _indirectExportEntries_, _\[\[StarExportEntries\]\]_: _starExportEntries_, _\[\[DFSAncestorIndex\]\]_: empty }.

Note

An implementation may parse module source text and analyse it for Early Error conditions prior to the evaluation of ParseModule for that module source text. However, the reporting of any errors must be deferred until the point where this specification actually performs ParseModule upon that source text.


# 16.2.1.7.2 Implementation of Module Record Abstract Methods

The following are the concrete methods for [Source Text Module Record](#sourctextmodule-record) that implement the corresponding [Module Record](#sec-abstract-module-records) abstract methods defined in [Table 42](#table-abstract-methods-of-module-records).


# 16.2.1.7.2.1 GetExportedNames ( \[_exportStarSet_ \] )

The GetExportedNames concrete method of a [Source Text Module Record](#sourctextmodule-record) _module_ takes optional argument _exportStarSet_ (a [List](#sec-list-and-record-specification-type) of [Source Text Module Records](#sourctextmodule-record)) and returns a [List](#sec-list-and-record-specification-type) of Strings. It performs the following steps when called:

1.  [Assert](#assert): _module_._\[\[Status\]\]_ is not new.
2.  If _exportStarSet_ is not present, set _exportStarSet_ to a new empty [List](#sec-list-and-record-specification-type).
3.  If _exportStarSet_ contains _module_, then
    1.  [Assert](#assert): We've reached the starting point of an `export *` circularity.
    2.  Return a new empty [List](#sec-list-and-record-specification-type).
4.  Append _module_ to _exportStarSet_.
5.  Let _exportedNames_ be a new empty [List](#sec-list-and-record-specification-type).
6.  For each [ExportEntry Record](#exportentry-record) _e_ of _module_._\[\[LocalExportEntries\]\]_, do
    1.  [Assert](#assert): _module_ provides the direct binding for this export.
    2.  [Assert](#assert): _e_._\[\[ExportName\]\]_ is not null.
    3.  Append _e_._\[\[ExportName\]\]_ to _exportedNames_.
7.  For each [ExportEntry Record](#exportentry-record) _e_ of _module_._\[\[IndirectExportEntries\]\]_, do
    1.  [Assert](#assert): _module_ imports a specific binding for this export.
    2.  [Assert](#assert): _e_._\[\[ExportName\]\]_ is not null.
    3.  Append _e_._\[\[ExportName\]\]_ to _exportedNames_.
8.  For each [ExportEntry Record](#exportentry-record) _e_ of _module_._\[\[StarExportEntries\]\]_, do
    1.  [Assert](#assert): _e_._\[\[ModuleRequest\]\]_ is not null.
    2.  Let _requestedModule_ be [GetImportedModule](#sec-GetImportedModule)(_module_, _e_._\[\[ModuleRequest\]\]_).
    3.  Let _starNames_ be _requestedModule_.GetExportedNames(_exportStarSet_).
    4.  For each element _n_ of _starNames_, do
        1.  If _n_ is not "default", then
            1.  If _exportedNames_ does not contain _n_, then
                1.  Append _n_ to _exportedNames_.
9.  Return _exportedNames_.

Note

GetExportedNames does not filter out or throw an exception for names that have ambiguous star export bindings.


# 16.2.1.7.2.2 ResolveExport ( _exportName_ \[, _resolveSet_ \] )

The ResolveExport concrete method of a [Source Text Module Record](#sourctextmodule-record) _module_ takes argument _exportName_ (a String) and optional argument _resolveSet_ (a [List](#sec-list-and-record-specification-type) of [Records](#sec-list-and-record-specification-type) with fields _\[\[Module\]\]_ (a [Module Record](#sec-abstract-module-records)) and _\[\[ExportName\]\]_ (a String)) and returns a [ResolvedBinding Record](#resolvedbinding-record), null, or ambiguous.

ResolveExport attempts to resolve an imported binding to the actual defining module and local binding name. The defining module may be the module represented by the [Module Record](#sec-abstract-module-records) this method was invoked on or some other module that is imported by that module. The parameter _resolveSet_ is used to detect unresolved circular import/export paths. If a pair consisting of specific [Module Record](#sec-abstract-module-records) and _exportName_ is reached that is already in _resolveSet_, an import circularity has been encountered. Before recursively calling ResolveExport, a pair consisting of _module_ and _exportName_ is added to _resolveSet_.

If a defining module is found, a [ResolvedBinding Record](#resolvedbinding-record) { _\[\[Module\]\]_, _\[\[BindingName\]\]_ } is returned. This record identifies the resolved binding of the originally requested export, unless this is the export of a namespace with no local binding. In this case, _\[\[BindingName\]\]_ will be set to namespace. If no definition was found or the request is found to be circular, null is returned. If the request is found to be ambiguous, ambiguous is returned.

It performs the following steps when called:

1.  [Assert](#assert): _module_._\[\[Status\]\]_ is not new.
2.  If _resolveSet_ is not present, set _resolveSet_ to a new empty [List](#sec-list-and-record-specification-type).
3.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Module\]\]_, _\[\[ExportName\]\]_ } _r_ of _resolveSet_, do
    1.  If _module_ and _r_._\[\[Module\]\]_ are the same [Module Record](#sec-abstract-module-records) and _exportName_ is _r_._\[\[ExportName\]\]_, then
        1.  [Assert](#assert): This is a circular import request.
        2.  Return null.
4.  Append the [Record](#sec-list-and-record-specification-type) { _\[\[Module\]\]_: _module_, _\[\[ExportName\]\]_: _exportName_ } to _resolveSet_.
5.  For each [ExportEntry Record](#exportentry-record) _e_ of _module_._\[\[LocalExportEntries\]\]_, do
    1.  If _e_._\[\[ExportName\]\]_ is _exportName_, then
        1.  [Assert](#assert): _module_ provides the direct binding for this export.
        2.  Return [ResolvedBinding Record](#resolvedbinding-record) { _\[\[Module\]\]_: _module_, _\[\[BindingName\]\]_: _e_._\[\[LocalName\]\]_ }.
6.  For each [ExportEntry Record](#exportentry-record) _e_ of _module_._\[\[IndirectExportEntries\]\]_, do
    1.  If _e_._\[\[ExportName\]\]_ is _exportName_, then
        1.  [Assert](#assert): _e_._\[\[ModuleRequest\]\]_ is not null.
        2.  Let _importedModule_ be [GetImportedModule](#sec-GetImportedModule)(_module_, _e_._\[\[ModuleRequest\]\]_).
        3.  If _e_._\[\[ImportName\]\]_ is all, then
            1.  [Assert](#assert): _module_ does not provide the direct binding for this export.
            2.  Return [ResolvedBinding Record](#resolvedbinding-record) { _\[\[Module\]\]_: _importedModule_, _\[\[BindingName\]\]_: namespace }.
        4.  Else,
            1.  [Assert](#assert): _module_ imports a specific binding for this export.
            2.  [Assert](#assert): _e_._\[\[ImportName\]\]_ [is a String](#sec-ecmascript-language-types-string-type).
            3.  Return _importedModule_.ResolveExport(_e_._\[\[ImportName\]\]_, _resolveSet_).
7.  If _exportName_ is "default", then
    1.  [Assert](#assert): A `default` export was not explicitly defined by this module.
    2.  Return null.
    3.  NOTE: A `default` export cannot be provided by an `export * from "mod"` declaration.
8.  Let _starResolution_ be null.
9.  For each [ExportEntry Record](#exportentry-record) _e_ of _module_._\[\[StarExportEntries\]\]_, do
    1.  [Assert](#assert): _e_._\[\[ModuleRequest\]\]_ is not null.
    2.  Let _importedModule_ be [GetImportedModule](#sec-GetImportedModule)(_module_, _e_._\[\[ModuleRequest\]\]_).
    3.  Let _resolution_ be _importedModule_.ResolveExport(_exportName_, _resolveSet_).
    4.  If _resolution_ is ambiguous, return ambiguous.
    5.  If _resolution_ is not null, then
        1.  [Assert](#assert): _resolution_ is a [ResolvedBinding Record](#resolvedbinding-record).
        2.  If _starResolution_ is null, then
            1.  Set _starResolution_ to _resolution_.
        3.  Else,
            1.  [Assert](#assert): There is more than one `*` export that includes the requested name.
            2.  If _resolution_._\[\[Module\]\]_ and _starResolution_._\[\[Module\]\]_ are not the same [Module Record](#sec-abstract-module-records), return ambiguous.
            3.  If _resolution_._\[\[BindingName\]\]_ is not _starResolution_._\[\[BindingName\]\]_, return ambiguous.
10.  Return _starResolution_.


# 16.2.1.7.3 Implementation of Cyclic Module Record Abstract Methods

The following are the concrete methods for [Source Text Module Record](#sourctextmodule-record) that implement the corresponding [Cyclic Module Record](#cyclic-module-record) abstract methods defined in [Table 44](#table-cyclic-module-methods).


# 16.2.1.7.3.1 InitializeEnvironment ( )

The InitializeEnvironment concrete method of a [Source Text Module Record](#sourctextmodule-record) _module_ takes no arguments and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  For each [ExportEntry Record](#exportentry-record) _e_ of _module_._\[\[IndirectExportEntries\]\]_, do
    1.  [Assert](#assert): _e_._\[\[ExportName\]\]_ is not null.
    2.  Let _resolution_ be _module_.ResolveExport(_e_._\[\[ExportName\]\]_).
    3.  If _resolution_ is either null or ambiguous, throw a SyntaxError exception.
    4.  [Assert](#assert): _resolution_ is a [ResolvedBinding Record](#resolvedbinding-record).
2.  [Assert](#assert): All named exports from _module_ are resolvable.
3.  Let _realm_ be _module_._\[\[Realm\]\]_.
4.  [Assert](#assert): _realm_ is not undefined.
5.  Let _env_ be [NewModuleEnvironment](#sec-newmoduleenvironment)(_realm_._\[\[GlobalEnv\]\]_).
6.  Set _module_._\[\[Environment\]\]_ to _env_.
7.  For each [ImportEntry Record](#importentry-record) _in_ of _module_._\[\[ImportEntries\]\]_, do
    1.  Let _importedModule_ be [GetImportedModule](#sec-GetImportedModule)(_module_, _in_._\[\[ModuleRequest\]\]_).
    2.  If _in_._\[\[ImportName\]\]_ is namespace-object, then
        1.  Let _namespace_ be [GetModuleNamespace](#sec-getmodulenamespace)(_importedModule_).
        2.  Perform ! _env_.CreateImmutableBinding(_in_._\[\[LocalName\]\]_, true).
        3.  Perform ! _env_.InitializeBinding(_in_._\[\[LocalName\]\]_, _namespace_).
    3.  Else,
        1.  Let _resolution_ be _importedModule_.ResolveExport(_in_._\[\[ImportName\]\]_).
        2.  If _resolution_ is either null or ambiguous, throw a SyntaxError exception.
        3.  If _resolution_._\[\[BindingName\]\]_ is namespace, then
            1.  Let _namespace_ be [GetModuleNamespace](#sec-getmodulenamespace)(_resolution_._\[\[Module\]\]_).
            2.  Perform ! _env_.CreateImmutableBinding(_in_._\[\[LocalName\]\]_, true).
            3.  Perform ! _env_.InitializeBinding(_in_._\[\[LocalName\]\]_, _namespace_).
        4.  Else,
            1.  Perform [CreateImportBinding](#sec-createimportbinding)(_env_, _in_._\[\[LocalName\]\]_, _resolution_._\[\[Module\]\]_, _resolution_._\[\[BindingName\]\]_).
8.  Let _moduleContext_ be a new [ECMAScript code execution context](#ecmascript-code-execution-context).
9.  Set the Function of _moduleContext_ to null.
10.  [Assert](#assert): _module_._\[\[Realm\]\]_ is not undefined.
11.  Set the [Realm](#realm) of _moduleContext_ to _module_._\[\[Realm\]\]_.
12.  Set the ScriptOrModule of _moduleContext_ to _module_.
13.  Set the VariableEnvironment of _moduleContext_ to _module_._\[\[Environment\]\]_.
14.  Set the LexicalEnvironment of _moduleContext_ to _module_._\[\[Environment\]\]_.
15.  Set the PrivateEnvironment of _moduleContext_ to null.
16.  Set _module_._\[\[Context\]\]_ to _moduleContext_.
17.  Push _moduleContext_ onto the [execution context stack](#execution-context-stack); _moduleContext_ is now the [running execution context](#running-execution-context).
18.  Let _code_ be _module_._\[\[ECMAScriptCode\]\]_.
19.  Let _varDeclarations_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of _code_.
20.  Let _declaredVarNames_ be a new empty [List](#sec-list-and-record-specification-type).
21.  For each element _d_ of _varDeclarations_, do
     1.  For each element _dn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
         1.  If _declaredVarNames_ does not contain _dn_, then
             1.  Perform ! _env_.CreateMutableBinding(_dn_, false).
             2.  Perform ! _env_.InitializeBinding(_dn_, undefined).
             3.  Append _dn_ to _declaredVarNames_.
22.  Let _lexDeclarations_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of _code_.
23.  Let _privateEnv_ be null.
24.  For each element _d_ of _lexDeclarations_, do
     1.  For each element _dn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
         1.  If [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of _d_ is true, then
             1.  Perform ! _env_.CreateImmutableBinding(_dn_, true).
         2.  Else,
             1.  Perform ! _env_.CreateMutableBinding(_dn_, false).
         3.  If _d_ is either a [FunctionDeclaration](#prod-FunctionDeclaration), a [GeneratorDeclaration](#prod-GeneratorDeclaration), an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), or an [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), then
             1.  Let _fo_ be [InstantiateFunctionObject](#sec-runtime-semantics-instantiatefunctionobject) of _d_ with arguments _env_ and _privateEnv_.
             2.  Perform ! _env_.InitializeBinding(_dn_, _fo_).
25.  Remove _moduleContext_ from the [execution context stack](#execution-context-stack).
26.  Return unused.


# 16.2.1.7.3.2 ExecuteModule ( \[_capability_ \] )

The ExecuteModule concrete method of a [Source Text Module Record](#sourctextmodule-record) _module_ takes optional argument _capability_ (a [PromiseCapability Record](#sec-promisecapability-records)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _moduleContext_ be a new [ECMAScript code execution context](#ecmascript-code-execution-context).
2.  Set the Function of _moduleContext_ to null.
3.  Set the [Realm](#realm) of _moduleContext_ to _module_._\[\[Realm\]\]_.
4.  Set the ScriptOrModule of _moduleContext_ to _module_.
5.  [Assert](#assert): _module_ has been linked and declarations in its module environment have been instantiated.
6.  Set the VariableEnvironment of _moduleContext_ to _module_._\[\[Environment\]\]_.
7.  Set the LexicalEnvironment of _moduleContext_ to _module_._\[\[Environment\]\]_.
8.  Suspend the [running execution context](#running-execution-context).
9.  If _module_._\[\[HasTLA\]\]_ is false, then
    1.  [Assert](#assert): _capability_ is not present.
    2.  Push _moduleContext_ onto the [execution context stack](#execution-context-stack); _moduleContext_ is now the [running execution context](#running-execution-context).
    3.  Let _result_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _module_._\[\[ECMAScriptCode\]\]_).
    4.  Suspend _moduleContext_ and remove it from the [execution context stack](#execution-context-stack).
    5.  Resume the context that is now on the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
    6.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  Return ? _result_.
10.  Else,
     1.  [Assert](#assert): _capability_ is a [PromiseCapability Record](#sec-promisecapability-records).
     2.  Perform [AsyncBlockStart](#sec-asyncblockstart)(_capability_, _module_._\[\[ECMAScriptCode\]\]_, _moduleContext_).
11.  Return unused.


# 16.2.1.8 Synthetic Module Records

A Synthetic Module Record is used to represent information about a module that is defined by specifications. Its exported names are statically defined at creation, while their corresponding values can change over time using [SetSyntheticModuleExport](#sec-setsyntheticmoduleexport). It has no imports or dependencies.

Note

A Synthetic Module Record could be used for defining a variety of module types: for example, JSON modules or CSS modules.

In addition to the fields defined in [Table 41](#table-module-record-fields) Synthetic Module Records have the additional fields listed in [Table 60](#table-synthetic-module-record-fields).

Table 60: Additional Fields of [Synthetic Module Records](#sec-synthetic-module-records)

<table><thead><tr><th>Field Name</th><th>Value Type</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[ExportNames]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_8882"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of Strings</td><td>The names of the exports of the module. This list does not contain duplicates.</td></tr><tr><td><var class="field">[[EvaluationSteps]]</var></td><td>an <emu-xref href="#sec-abstract-closure" id="_ref_8883"><a href="#sec-abstract-closure">Abstract Closure</a></emu-xref></td><td>The initialization logic to perform upon evaluation of the module, taking the <emu-xref href="#sec-synthetic-module-records" id="_ref_8884"><a href="#sec-synthetic-module-records">Synthetic Module Record</a></emu-xref> as its sole argument. It must not modify <var class="field">[[ExportNames]]</var>. It may return an <emu-xref href="#sec-completion-record-specification-type" id="_ref_8885"><a href="#sec-completion-record-specification-type">abrupt completion</a></emu-xref>.</td></tr></tbody></table>


# 16.2.1.8.1 CreateDefaultExportSyntheticModule ( _defaultExport_ )

The abstract operation CreateDefaultExportSyntheticModule takes argument _defaultExport_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a [Synthetic Module Record](#sec-synthetic-module-records). It creates a [Synthetic Module Record](#sec-synthetic-module-records) whose default export is _defaultExport_. It performs the following steps when called:

1.  Let _realm_ be [the current Realm Record](#current-realm).
2.  Let _setDefaultExport_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_module_) that captures _defaultExport_ and performs the following steps when called:
    1.  Perform [SetSyntheticModuleExport](#sec-setsyntheticmoduleexport)(_module_, "default", _defaultExport_).
    2.  Return [NormalCompletion](#sec-normalcompletion)(unused).
3.  Return the [Synthetic Module Record](#sec-synthetic-module-records) { _\[\[Realm\]\]_: _realm_, _\[\[Environment\]\]_: empty, _\[\[Namespace\]\]_: empty, _\[\[HostDefined\]\]_: undefined, _\[\[ExportNames\]\]_: « "default" », _\[\[EvaluationSteps\]\]_: _setDefaultExport_ }.


# 16.2.1.8.2 ParseJSONModule ( _source_ )

The abstract operation ParseJSONModule takes argument _source_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Synthetic Module Record](#sec-synthetic-module-records), or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _json_ be ? [ParseJSON](#sec-ParseJSON)(_source_).
2.  Return [CreateDefaultExportSyntheticModule](#sec-create-default-export-synthetic-module)(_json_).


# 16.2.1.8.3 SetSyntheticModuleExport ( _module_, _exportName_, _exportValue_ )

The abstract operation SetSyntheticModuleExport takes arguments _module_ (a [Synthetic Module Record](#sec-synthetic-module-records)), _exportName_ (a String), and _exportValue_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It can be used to set or change the exported value for an existing export of a [Synthetic Module Record](#sec-synthetic-module-records). It performs the following steps when called:

1.  [Assert](#assert): _module_._\[\[ExportNames\]\]_ contains _exportName_.
2.  Let _envRec_ be _module_._\[\[Environment\]\]_.
3.  [Assert](#assert): _envRec_ is not empty.
4.  Perform _envRec_.SetMutableBinding(_exportName_, _exportValue_, true).
5.  Return unused.


# 16.2.1.8.4 Implementation of Module Record Abstract Methods

The following are the concrete methods for [Synthetic Module Record](#sec-synthetic-module-records) that implement the corresponding [Module Record](#sec-abstract-module-records) abstract methods defined in [Table 42](#table-abstract-methods-of-module-records).


# 16.2.1.8.4.1 LoadRequestedModules ( )

The LoadRequestedModules concrete method of a [Synthetic Module Record](#sec-synthetic-module-records) _module_ takes no arguments and returns a Promise. It performs the following steps when called:

1.  Return ! [PromiseResolve](#sec-promise-resolve)([%Promise%](#sec-promise-constructor), undefined).

Note

[Synthetic Module Records](#sec-synthetic-module-records) have no dependencies.


# 16.2.1.8.4.2 GetExportedNames ( )

The GetExportedNames concrete method of a [Synthetic Module Record](#sec-synthetic-module-records) _module_ takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It performs the following steps when called:

1.  Return _module_._\[\[ExportNames\]\]_.


# 16.2.1.8.4.3 ResolveExport ( _exportName_ )

The ResolveExport concrete method of a [Synthetic Module Record](#sec-synthetic-module-records) _module_ takes argument _exportName_ (a String) and returns a [ResolvedBinding Record](#resolvedbinding-record) or null. It performs the following steps when called:

1.  If _module_._\[\[ExportNames\]\]_ does not contain _exportName_, return null.
2.  Return [ResolvedBinding Record](#resolvedbinding-record) { _\[\[Module\]\]_: _module_, _\[\[BindingName\]\]_: _exportName_ }.


# 16.2.1.8.4.4 Link ( )

The Link concrete method of a [Synthetic Module Record](#sec-synthetic-module-records) _module_ takes no arguments and returns a [normal completion containing](#sec-completion-record-specification-type) unused. It performs the following steps when called:

1.  Let _realm_ be _module_._\[\[Realm\]\]_.
2.  Let _env_ be [NewModuleEnvironment](#sec-newmoduleenvironment)(_realm_._\[\[GlobalEnv\]\]_).
3.  Set _module_._\[\[Environment\]\]_ to _env_.
4.  For each String _exportName_ of _module_._\[\[ExportNames\]\]_, do
    1.  Perform ! _env_.CreateMutableBinding(_exportName_, false).
    2.  Perform ! _env_.InitializeBinding(_exportName_, undefined).
5.  Return [NormalCompletion](#sec-normalcompletion)(unused).


# 16.2.1.8.4.5 Evaluate ( )

The Evaluate concrete method of a [Synthetic Module Record](#sec-synthetic-module-records) _module_ takes no arguments and returns a Promise. It performs the following steps when called:

1.  Let _moduleContext_ be a new [ECMAScript code execution context](#ecmascript-code-execution-context).
2.  Set the Function of _moduleContext_ to null.
3.  Set the [Realm](#realm) of _moduleContext_ to _module_._\[\[Realm\]\]_.
4.  Set the ScriptOrModule of _moduleContext_ to _module_.
5.  Set the VariableEnvironment of _moduleContext_ to _module_._\[\[Environment\]\]_.
6.  Set the LexicalEnvironment of _moduleContext_ to _module_._\[\[Environment\]\]_.
7.  Suspend the [running execution context](#running-execution-context).
8.  Push _moduleContext_ onto the [execution context stack](#execution-context-stack); _moduleContext_ is now the [running execution context](#running-execution-context).
9.  Let _steps_ be _module_._\[\[EvaluationSteps\]\]_.
10.  Let _result_ be [Completion](#sec-completion-ao)(_steps_(_module_)).
11.  Suspend _moduleContext_ and remove it from the [execution context stack](#execution-context-stack).
12.  Resume the context that is now on the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
13.  Let _pc_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
14.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _pc_).
15.  Perform ! [Call](#sec-call)(_pc_._\[\[Resolve\]\]_, undefined, « undefined »).
16.  Return _pc_._\[\[Promise\]\]_.


# 16.2.1.9 GetImportedModule ( _referrer_, _request_ )

The abstract operation GetImportedModule takes arguments _referrer_ (a [Cyclic Module Record](#cyclic-module-record)) and _request_ (a [ModuleRequest Record](#modulerequest-record)) and returns a [Module Record](#sec-abstract-module-records). It performs the following steps when called:

1.  Let _records_ be a [List](#sec-list-and-record-specification-type) consisting of each [LoadedModuleRequest Record](#loadedmodulerequest-record) _r_ of _referrer_._\[\[LoadedModules\]\]_ such that [ModuleRequestsEqual](#sec-ModuleRequestsEqual)(_r_, _request_) is true.
2.  [Assert](#assert): _records_ has exactly one element, since LoadRequestedModules has completed successfully on _referrer_ prior to invoking this abstract operation.
3.  Let _record_ be the sole element of _records_.
4.  Return _record_._\[\[Module\]\]_.


# 16.2.1.10 HostLoadImportedModule ( _referrer_, _moduleRequest_, _hostDefined_, _payload_ )

The [host-defined](#host-defined) abstract operation HostLoadImportedModule takes arguments _referrer_ (a [Script Record](#script-record), a [Cyclic Module Record](#cyclic-module-record), or a [Realm Record](#realm-record)), _moduleRequest_ (a [ModuleRequest Record](#modulerequest-record)), _hostDefined_ (anything), and _payload_ (a [GraphLoadingState Record](#graphloadingstate-record) or a [PromiseCapability Record](#sec-promisecapability-records)) and returns unused.

[Note 1](#note-HostLoadImportedModule-referrer-Realm-Record)

An example of when _referrer_ can be a [Realm Record](#realm-record) is in a web browser [host](#host). There, if a user clicks on a control given by

```
<button type="button" onclick="import('./foo.mjs')">Click me</button>
```

there will be no [active script or module](#job-activescriptormodule) at the time the [`import()`](#sec-import-calls) expression runs. More generally, this can happen in any situation where the [host](#host) pushes [execution contexts](#sec-execution-contexts) with null ScriptOrModule components onto the [execution context stack](#execution-context-stack).

An implementation of HostLoadImportedModule must conform to the following requirements:

-   The [host environment](#host-environment) must perform [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule)(_referrer_, _moduleRequest_, _payload_, _result_), where _result_ is either a [normal completion containing](#sec-completion-record-specification-type) the loaded [Module Record](#sec-abstract-module-records) or a [throw completion](#sec-completion-record-specification-type), either synchronously or asynchronously.
-   If this operation is called multiple times with two (_referrer_, _moduleRequest_) pairs such that:
    
    -   the first _referrer_ is the same as the second _referrer_;
    -   [ModuleRequestsEqual](#sec-ModuleRequestsEqual)(the first _moduleRequest_, the second _moduleRequest_) is true;
    
    and it performs [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule)(_referrer_, _moduleRequest_, _payload_, _result_) where _result_ is a [normal completion](#sec-completion-record-specification-type), then it must perform [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule)(_referrer_, _moduleRequest_, _payload_, _result_) with the same _result_ each time.
    
-   If _moduleRequest_._\[\[Attributes\]\]_ has an entry _entry_ such that _entry_._\[\[Key\]\]_ is "type" and _entry_._\[\[Value\]\]_ is "json", when the [host environment](#host-environment) performs [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule)(_referrer_, _moduleRequest_, _payload_, _result_), _result_ must either be the [Completion Record](#sec-completion-record-specification-type) returned by an invocation of [ParseJSONModule](#sec-parse-json-module) or a [throw completion](#sec-completion-record-specification-type).
    
-   The operation must treat _payload_ as an opaque value to be passed through to [FinishLoadingImportedModule](#sec-FinishLoadingImportedModule).

The actual process performed is [host-defined](#host-defined), but typically consists of performing whatever I/O operations are necessary to load the appropriate [Module Record](#sec-abstract-module-records). Multiple different (_referrer_, _moduleRequest_._\[\[Specifier\]\]_, _moduleRequest_._\[\[Attributes\]\]_) triples may map to the same [Module Record](#sec-abstract-module-records) instance. The actual mapping semantics is [host-defined](#host-defined) but typically a normalization process is applied to _specifier_ as part of the mapping process. A typical normalization process would include actions such as expansion of relative and abbreviated path specifiers.

Note 2

The above text requires that [hosts](#host) support JSON modules when imported with `type: "json"` (and HostLoadImportedModule completes normally), but it does not prohibit [hosts](#host) from supporting JSON modules when imported without `type: "json"`.


# 16.2.1.11 FinishLoadingImportedModule ( _referrer_, _moduleRequest_, _payload_, _result_ )

The abstract operation FinishLoadingImportedModule takes arguments _referrer_ (a [Script Record](#script-record), a [Cyclic Module Record](#cyclic-module-record), or a [Realm Record](#realm-record)), _moduleRequest_ (a [ModuleRequest Record](#modulerequest-record)), _payload_ (a [GraphLoadingState Record](#graphloadingstate-record) or a [PromiseCapability Record](#sec-promisecapability-records)), and _result_ (either a [normal completion containing](#sec-completion-record-specification-type) a [Module Record](#sec-abstract-module-records) or a [throw completion](#sec-completion-record-specification-type)) and returns unused. It performs the following steps when called:

1.  If _result_ is a [normal completion](#sec-completion-record-specification-type), then
    1.  If _referrer_._\[\[LoadedModules\]\]_ contains a [LoadedModuleRequest Record](#loadedmodulerequest-record) _record_ such that [ModuleRequestsEqual](#sec-ModuleRequestsEqual)(_record_, _moduleRequest_) is true, then
        1.  [Assert](#assert): _record_._\[\[Module\]\]_ and _result_._\[\[Value\]\]_ are the same [Module Record](#sec-abstract-module-records).
    2.  Else,
        1.  Append the [LoadedModuleRequest Record](#loadedmodulerequest-record) { _\[\[Specifier\]\]_: _moduleRequest_._\[\[Specifier\]\]_, _\[\[Attributes\]\]_: _moduleRequest_._\[\[Attributes\]\]_, _\[\[Module\]\]_: _result_._\[\[Value\]\]_ } to _referrer_._\[\[LoadedModules\]\]_.
2.  If _payload_ is a [GraphLoadingState Record](#graphloadingstate-record), then
    1.  Perform [ContinueModuleLoading](#sec-ContinueModuleLoading)(_payload_, _result_).
3.  Else,
    1.  Perform [ContinueDynamicImport](#sec-ContinueDynamicImport)(_payload_, _result_).
4.  Return unused.


# 16.2.1.12 AllImportAttributesSupported ( _attributes_ )

The abstract operation AllImportAttributesSupported takes argument _attributes_ (a [List](#sec-list-and-record-specification-type) of [ImportAttribute Records](#importattribute-record)) and returns a Boolean. It performs the following steps when called:

1.  Let _supported_ be [HostGetSupportedImportAttributes](#sec-hostgetsupportedimportattributes)().
2.  For each [ImportAttribute Record](#importattribute-record) _attribute_ of _attributes_, do
    1.  If _supported_ does not contain _attribute_._\[\[Key\]\]_, return false.
3.  Return true.


# 16.2.1.12.1 HostGetSupportedImportAttributes ( )

The [host-defined](#host-defined) abstract operation HostGetSupportedImportAttributes takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings. It allows [host environments](#host-environment) to specify which import attributes they support. Only attributes with supported keys will be provided to the [host](#host).

An implementation of HostGetSupportedImportAttributes must conform to the following requirements:

-   It must return a [List](#sec-list-and-record-specification-type) of Strings, each indicating a supported attribute.
-   Each time this operation is called, it must return the same [List](#sec-list-and-record-specification-type) with the same contents in the same order.

The default implementation of HostGetSupportedImportAttributes is to return a new empty [List](#sec-list-and-record-specification-type).

Note

The purpose of requiring the [host](#host) to specify its supported import attributes, rather than passing all attributes to the [host](#host) and letting it then choose which ones it wants to handle, is to ensure that unsupported attributes are handled in a consistent way across different [hosts](#host).


# 16.2.1.13 GetModuleNamespace ( _module_ )

The abstract operation GetModuleNamespace takes argument _module_ (an instance of a concrete subclass of [Module Record](#sec-abstract-module-records)) and returns a Module Namespace Object. It retrieves the Module Namespace Object representing _module_'s exports, lazily creating it the first time it was requested, and storing it in _module_._\[\[Namespace\]\]_ for future retrieval. It performs the following steps when called:

1.  [Assert](#assert): If _module_ is a [Cyclic Module Record](#cyclic-module-record), then _module_._\[\[Status\]\]_ is not new or unlinked.
2.  Let _namespace_ be _module_._\[\[Namespace\]\]_.
3.  If _namespace_ is empty, then
    1.  Let _exportedNames_ be _module_.GetExportedNames().
    2.  Let _unambiguousNames_ be a new empty [List](#sec-list-and-record-specification-type).
    3.  For each element _name_ of _exportedNames_, do
        1.  Let _resolution_ be _module_.ResolveExport(_name_).
        2.  If _resolution_ is a [ResolvedBinding Record](#resolvedbinding-record), append _name_ to _unambiguousNames_.
    4.  Set _namespace_ to [ModuleNamespaceCreate](#sec-modulenamespacecreate)(_module_, _unambiguousNames_).
4.  Return _namespace_.

Note

GetModuleNamespace never throws. Instead, unresolvable names are simply excluded from the namespace at this point. They will lead to a real linking error later unless they are all ambiguous star exports that are not explicitly requested anywhere.


# 16.2.1.14 Runtime Semantics: Evaluation

[Module](#prod-Module) : \[empty\]

1.  Return undefined.

[ModuleBody](#prod-ModuleBody) : [ModuleItemList](#prod-ModuleItemList)

1.  Let _result_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [ModuleItemList](#prod-ModuleItemList)).
2.  If _result_ is a [normal completion](#sec-completion-record-specification-type) and _result_._\[\[Value\]\]_ is empty, then
    1.  Return undefined.
3.  Return ? _result_.

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _sl_ be ? [Evaluation](#sec-evaluation) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _s_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of [ModuleItem](#prod-ModuleItem)).
3.  Return ? [UpdateEmpty](#sec-updateempty)(_s_, _sl_).

Note

The value of a [ModuleItemList](#prod-ModuleItemList) is the value of the last value-producing item in the [ModuleItemList](#prod-ModuleItemList).

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration)

1.  Return empty.


# 16.2.2 Imports


## Syntax

[ImportDeclaration](#prod-ImportDeclaration) : import [ImportClause](#prod-ImportClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ; import [ModuleSpecifier](#prod-ModuleSpecifier) [WithClause](#prod-WithClause)opt ; [ImportClause](#prod-ImportClause) : [ImportedDefaultBinding](#prod-ImportedDefaultBinding) [NameSpaceImport](#prod-NameSpaceImport) [NamedImports](#prod-NamedImports) [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NameSpaceImport](#prod-NameSpaceImport) [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NamedImports](#prod-NamedImports) [ImportedDefaultBinding](#prod-ImportedDefaultBinding) : [ImportedBinding](#prod-ImportedBinding) [NameSpaceImport](#prod-NameSpaceImport) : \* as [ImportedBinding](#prod-ImportedBinding) [NamedImports](#prod-NamedImports) : { } { [ImportsList](#prod-ImportsList) } { [ImportsList](#prod-ImportsList) , } [FromClause](#prod-FromClause) : from [ModuleSpecifier](#prod-ModuleSpecifier) [ImportsList](#prod-ImportsList) : [ImportSpecifier](#prod-ImportSpecifier) [ImportsList](#prod-ImportsList) , [ImportSpecifier](#prod-ImportSpecifier) [ImportSpecifier](#prod-ImportSpecifier) : [ImportedBinding](#prod-ImportedBinding) [ModuleExportName](#prod-ModuleExportName) as [ImportedBinding](#prod-ImportedBinding) [ModuleSpecifier](#prod-ModuleSpecifier) : [StringLiteral](#prod-StringLiteral) [ImportedBinding](#prod-ImportedBinding) : [BindingIdentifier](#prod-BindingIdentifier)\[~Yield, +Await\] [WithClause](#prod-WithClause) : with { } with { [WithEntries](#prod-WithEntries) ,opt } [WithEntries](#prod-WithEntries) : [AttributeKey](#prod-AttributeKey) : [StringLiteral](#prod-StringLiteral) [AttributeKey](#prod-AttributeKey) : [StringLiteral](#prod-StringLiteral) , [WithEntries](#prod-WithEntries) [AttributeKey](#prod-AttributeKey) : [IdentifierName](#prod-IdentifierName) [StringLiteral](#prod-StringLiteral)


# 16.2.2.1 Static Semantics: Early Errors

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration)

-   It is a Syntax Error if the [BoundNames](#sec-static-semantics-boundnames) of [ImportDeclaration](#prod-ImportDeclaration) contains any duplicate entries.

[WithClause](#prod-WithClause) : with { [WithEntries](#prod-WithEntries) ,opt }

-   It is a Syntax Error if [WithClauseToAttributes](#sec-withclausetoattributes) of [WithClause](#prod-WithClause) has two different entries _a_ and _b_ such that _a_._\[\[Key\]\]_ is _b_._\[\[Key\]\]_.


# 16.2.2.2 Static Semantics: ImportEntries

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ImportEntries takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [ImportEntry Records](#importentry-record). It is defined piecewise over the following productions:

[Module](#prod-Module) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _entries1_ be the [ImportEntries](#sec-static-semantics-importentries) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _entries2_ be the [ImportEntries](#sec-static-semantics-importentries) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _entries1_ and _entries2_.

[ModuleItem](#prod-ModuleItem) : [ExportDeclaration](#prod-ExportDeclaration) [StatementListItem](#prod-StatementListItem)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ImportDeclaration](#prod-ImportDeclaration) : import [ImportClause](#prod-ImportClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ;

1.  Let _module_ be the sole element of the [ModuleRequests](#sec-static-semantics-modulerequests) of [ImportDeclaration](#prod-ImportDeclaration).
2.  Return the [ImportEntriesForModule](#sec-static-semantics-importentriesformodule) of [ImportClause](#prod-ImportClause) with argument _module_.

[ImportDeclaration](#prod-ImportDeclaration) : import [ModuleSpecifier](#prod-ModuleSpecifier) [WithClause](#prod-WithClause)opt ;

1.  Return a new empty [List](#sec-list-and-record-specification-type).


# 16.2.2.3 Static Semantics: ImportEntriesForModule

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ImportEntriesForModule takes argument _module_ (a [ModuleRequest Record](#modulerequest-record)) and returns a [List](#sec-list-and-record-specification-type) of [ImportEntry Records](#importentry-record). It is defined piecewise over the following productions:

[ImportClause](#prod-ImportClause) : [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NameSpaceImport](#prod-NameSpaceImport)

1.  Let _entries1_ be the [ImportEntriesForModule](#sec-static-semantics-importentriesformodule) of [ImportedDefaultBinding](#prod-ImportedDefaultBinding) with argument _module_.
2.  Let _entries2_ be the [ImportEntriesForModule](#sec-static-semantics-importentriesformodule) of [NameSpaceImport](#prod-NameSpaceImport) with argument _module_.
3.  Return the [list-concatenation](#list-concatenation) of _entries1_ and _entries2_.

[ImportClause](#prod-ImportClause) : [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NamedImports](#prod-NamedImports)

1.  Let _entries1_ be the [ImportEntriesForModule](#sec-static-semantics-importentriesformodule) of [ImportedDefaultBinding](#prod-ImportedDefaultBinding) with argument _module_.
2.  Let _entries2_ be the [ImportEntriesForModule](#sec-static-semantics-importentriesformodule) of [NamedImports](#prod-NamedImports) with argument _module_.
3.  Return the [list-concatenation](#list-concatenation) of _entries1_ and _entries2_.

[ImportedDefaultBinding](#prod-ImportedDefaultBinding) : [ImportedBinding](#prod-ImportedBinding)

1.  Let _localName_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of [ImportedBinding](#prod-ImportedBinding).
2.  Let _defaultEntry_ be the [ImportEntry Record](#importentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: "default", _\[\[LocalName\]\]_: _localName_ }.
3.  Return « _defaultEntry_ ».

[NameSpaceImport](#prod-NameSpaceImport) : \* as [ImportedBinding](#prod-ImportedBinding)

1.  Let _localName_ be the [StringValue](#sec-static-semantics-stringvalue) of [ImportedBinding](#prod-ImportedBinding).
2.  Let _entry_ be the [ImportEntry Record](#importentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: namespace-object, _\[\[LocalName\]\]_: _localName_ }.
3.  Return « _entry_ ».

[NamedImports](#prod-NamedImports) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ImportsList](#prod-ImportsList) : [ImportsList](#prod-ImportsList) , [ImportSpecifier](#prod-ImportSpecifier)

1.  Let _specs1_ be the [ImportEntriesForModule](#sec-static-semantics-importentriesformodule) of [ImportsList](#prod-ImportsList) with argument _module_.
2.  Let _specs2_ be the [ImportEntriesForModule](#sec-static-semantics-importentriesformodule) of [ImportSpecifier](#prod-ImportSpecifier) with argument _module_.
3.  Return the [list-concatenation](#list-concatenation) of _specs1_ and _specs2_.

[ImportSpecifier](#prod-ImportSpecifier) : [ImportedBinding](#prod-ImportedBinding)

1.  Let _localName_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of [ImportedBinding](#prod-ImportedBinding).
2.  Let _entry_ be the [ImportEntry Record](#importentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: _localName_, _\[\[LocalName\]\]_: _localName_ }.
3.  Return « _entry_ ».

[ImportSpecifier](#prod-ImportSpecifier) : [ModuleExportName](#prod-ModuleExportName) as [ImportedBinding](#prod-ImportedBinding)

1.  Let _importName_ be the [StringValue](#sec-static-semantics-stringvalue) of [ModuleExportName](#prod-ModuleExportName).
2.  Let _localName_ be the [StringValue](#sec-static-semantics-stringvalue) of [ImportedBinding](#prod-ImportedBinding).
3.  Let _entry_ be the [ImportEntry Record](#importentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: _importName_, _\[\[LocalName\]\]_: _localName_ }.
4.  Return « _entry_ ».


# 16.2.2.4 Static Semantics: WithClauseToAttributes

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) WithClauseToAttributes takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [ImportAttribute Records](#importattribute-record). It is defined piecewise over the following productions:

[WithClause](#prod-WithClause) : with { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[WithClause](#prod-WithClause) : with { [WithEntries](#prod-WithEntries) ,opt }

1.  Let _attributes_ be [WithClauseToAttributes](#sec-withclausetoattributes) of [WithEntries](#prod-WithEntries).
2.  Sort _attributes_ according to the lexicographic order of their _\[\[Key\]\]_ field, treating the value of each such field as a sequence of UTF-16 code unit values. NOTE: This sorting is observable only in that [hosts](#host) are prohibited from changing behaviour based on the order in which attributes are enumerated.
3.  Return _attributes_.

[WithEntries](#prod-WithEntries) : [AttributeKey](#prod-AttributeKey) : [StringLiteral](#prod-StringLiteral)

1.  Let _key_ be the [PropName](#sec-static-semantics-propname) of [AttributeKey](#prod-AttributeKey).
2.  Let _entry_ be the [ImportAttribute Record](#importattribute-record) { _\[\[Key\]\]_: _key_, _\[\[Value\]\]_: the [SV](#sec-static-semantics-sv) of [StringLiteral](#prod-StringLiteral) }.
3.  Return « _entry_ ».

[WithEntries](#prod-WithEntries) : [AttributeKey](#prod-AttributeKey) : [StringLiteral](#prod-StringLiteral) , [WithEntries](#prod-WithEntries)

1.  Let _key_ be the [PropName](#sec-static-semantics-propname) of [AttributeKey](#prod-AttributeKey).
2.  Let _entry_ be the [ImportAttribute Record](#importattribute-record) { _\[\[Key\]\]_: _key_, _\[\[Value\]\]_: the [SV](#sec-static-semantics-sv) of [StringLiteral](#prod-StringLiteral) }.
3.  Let _rest_ be [WithClauseToAttributes](#sec-withclausetoattributes) of [WithEntries](#prod-WithEntries).
4.  Return the [list-concatenation](#list-concatenation) of « _entry_ » and _rest_.


# 16.2.3 Exports


## Syntax

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ; export [NamedExports](#prod-NamedExports) ; export [VariableStatement](#prod-VariableStatement)\[~Yield, +Await\] export [Declaration](#prod-Declaration)\[~Yield, +Await\] export default [HoistableDeclaration](#prod-HoistableDeclaration)\[~Yield, +Await, +Default\] export default [ClassDeclaration](#prod-ClassDeclaration)\[~Yield, +Await, +Default\] export default \[lookahead ∉ { function, async \[no [LineTerminator](#prod-LineTerminator) here\] function, class }\] [AssignmentExpression](#prod-AssignmentExpression)\[+In, ~Yield, +Await\] ; [ExportFromClause](#prod-ExportFromClause) : \* \* as [ModuleExportName](#prod-ModuleExportName) [NamedExports](#prod-NamedExports) [NamedExports](#prod-NamedExports) : { } { [ExportsList](#prod-ExportsList) } { [ExportsList](#prod-ExportsList) , } [ExportsList](#prod-ExportsList) : [ExportSpecifier](#prod-ExportSpecifier) [ExportsList](#prod-ExportsList) , [ExportSpecifier](#prod-ExportSpecifier) [ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName) [ModuleExportName](#prod-ModuleExportName) as [ModuleExportName](#prod-ModuleExportName)


# 16.2.3.1 Static Semantics: Early Errors

[ExportDeclaration](#prod-ExportDeclaration) : export [NamedExports](#prod-NamedExports) ;

-   It is a Syntax Error if the [ReferencedBindings](#sec-static-semantics-referencedbindings) of [NamedExports](#prod-NamedExports) contains any [StringLiteral](#prod-StringLiteral)s.
-   For each [IdentifierName](#prod-IdentifierName) _n_ in the [ReferencedBindings](#sec-static-semantics-referencedbindings) of [NamedExports](#prod-NamedExports): It is a Syntax Error if the [StringValue](#sec-static-semantics-stringvalue) of _n_ is a [ReservedWord](#prod-ReservedWord) or the [StringValue](#sec-static-semantics-stringvalue) of _n_ is one of "implements", "interface", "let", "package", "private", "protected", "public", or "static".

Note

The above rule means that each [ReferencedBindings](#sec-static-semantics-referencedbindings) of [NamedExports](#prod-NamedExports) is treated as an [IdentifierReference](#prod-IdentifierReference).


# 16.2.3.2 Static Semantics: ExportedBindings

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ExportedBindings takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings.

Note

ExportedBindings are the locally bound names that are explicitly associated with a [Module](#prod-Module)'s [ExportedNames](#sec-static-semantics-exportednames).

It is defined piecewise over the following productions:

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _names1_ be the [ExportedBindings](#sec-static-semantics-exportedbindings) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _names2_ be the [ExportedBindings](#sec-static-semantics-exportedbindings) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [StatementListItem](#prod-StatementListItem)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ;

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportDeclaration](#prod-ExportDeclaration) : export [NamedExports](#prod-NamedExports) ;

1.  Return the [ExportedBindings](#sec-static-semantics-exportedbindings) of [NamedExports](#prod-NamedExports).

[ExportDeclaration](#prod-ExportDeclaration) : export [VariableStatement](#prod-VariableStatement)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [VariableStatement](#prod-VariableStatement).

[ExportDeclaration](#prod-ExportDeclaration) : export [Declaration](#prod-Declaration)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [Declaration](#prod-Declaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [HoistableDeclaration](#prod-HoistableDeclaration) export default [ClassDeclaration](#prod-ClassDeclaration) export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of this [ExportDeclaration](#prod-ExportDeclaration).

[NamedExports](#prod-NamedExports) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportsList](#prod-ExportsList) : [ExportsList](#prod-ExportsList) , [ExportSpecifier](#prod-ExportSpecifier)

1.  Let _names1_ be the [ExportedBindings](#sec-static-semantics-exportedbindings) of [ExportsList](#prod-ExportsList).
2.  Let _names2_ be the [ExportedBindings](#sec-static-semantics-exportedbindings) of [ExportSpecifier](#prod-ExportSpecifier).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringValue](#sec-static-semantics-stringvalue) of [ModuleExportName](#prod-ModuleExportName).

[ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName) as [ModuleExportName](#prod-ModuleExportName)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringValue](#sec-static-semantics-stringvalue) of the first [ModuleExportName](#prod-ModuleExportName).


# 16.2.3.3 Static Semantics: ExportedNames

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ExportedNames takes no arguments and returns a [List](#sec-list-and-record-specification-type) of Strings.

Note

ExportedNames are the externally visible names that a [Module](#prod-Module) explicitly maps to one of its local name bindings.

It is defined piecewise over the following productions:

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _names1_ be the [ExportedNames](#sec-static-semantics-exportednames) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _names2_ be the [ExportedNames](#sec-static-semantics-exportednames) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ModuleItem](#prod-ModuleItem) : [ExportDeclaration](#prod-ExportDeclaration)

1.  Return the [ExportedNames](#sec-static-semantics-exportednames) of [ExportDeclaration](#prod-ExportDeclaration).

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [StatementListItem](#prod-StatementListItem)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ;

1.  Return the [ExportedNames](#sec-static-semantics-exportednames) of [ExportFromClause](#prod-ExportFromClause).

[ExportFromClause](#prod-ExportFromClause) : \*

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportFromClause](#prod-ExportFromClause) : \* as [ModuleExportName](#prod-ModuleExportName)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringValue](#sec-static-semantics-stringvalue) of [ModuleExportName](#prod-ModuleExportName).

[ExportFromClause](#prod-ExportFromClause) : [NamedExports](#prod-NamedExports)

1.  Return the [ExportedNames](#sec-static-semantics-exportednames) of [NamedExports](#prod-NamedExports).

[ExportDeclaration](#prod-ExportDeclaration) : export [VariableStatement](#prod-VariableStatement)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [VariableStatement](#prod-VariableStatement).

[ExportDeclaration](#prod-ExportDeclaration) : export [Declaration](#prod-Declaration)

1.  Return the [BoundNames](#sec-static-semantics-boundnames) of [Declaration](#prod-Declaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [HoistableDeclaration](#prod-HoistableDeclaration) export default [ClassDeclaration](#prod-ClassDeclaration) export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  Return « "default" ».

[NamedExports](#prod-NamedExports) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportsList](#prod-ExportsList) : [ExportsList](#prod-ExportsList) , [ExportSpecifier](#prod-ExportSpecifier)

1.  Let _names1_ be the [ExportedNames](#sec-static-semantics-exportednames) of [ExportsList](#prod-ExportsList).
2.  Let _names2_ be the [ExportedNames](#sec-static-semantics-exportednames) of [ExportSpecifier](#prod-ExportSpecifier).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringValue](#sec-static-semantics-stringvalue) of [ModuleExportName](#prod-ModuleExportName).

[ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName) as [ModuleExportName](#prod-ModuleExportName)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringValue](#sec-static-semantics-stringvalue) of the second [ModuleExportName](#prod-ModuleExportName).


# 16.2.3.4 Static Semantics: ExportEntries

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ExportEntries takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [ExportEntry Records](#exportentry-record). It is defined piecewise over the following productions:

[Module](#prod-Module) : \[empty\]

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ModuleItemList](#prod-ModuleItemList) : [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem)

1.  Let _entries1_ be the [ExportEntries](#sec-static-semantics-exportentries) of [ModuleItemList](#prod-ModuleItemList).
2.  Let _entries2_ be the [ExportEntries](#sec-static-semantics-exportentries) of [ModuleItem](#prod-ModuleItem).
3.  Return the [list-concatenation](#list-concatenation) of _entries1_ and _entries2_.

[ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [StatementListItem](#prod-StatementListItem)

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ;

1.  Let _module_ be the sole element of the [ModuleRequests](#sec-static-semantics-modulerequests) of [ExportDeclaration](#prod-ExportDeclaration).
2.  Return the [ExportEntriesForModule](#sec-static-semantics-exportentriesformodule) of [ExportFromClause](#prod-ExportFromClause) with argument _module_.

[ExportDeclaration](#prod-ExportDeclaration) : export [NamedExports](#prod-NamedExports) ;

1.  Return the [ExportEntriesForModule](#sec-static-semantics-exportentriesformodule) of [NamedExports](#prod-NamedExports) with argument null.

[ExportDeclaration](#prod-ExportDeclaration) : export [VariableStatement](#prod-VariableStatement)

1.  Let _entries_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Let _names_ be the [BoundNames](#sec-static-semantics-boundnames) of [VariableStatement](#prod-VariableStatement).
3.  For each element _name_ of _names_, do
    1.  Append the [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: null, _\[\[ImportName\]\]_: null, _\[\[LocalName\]\]_: _name_, _\[\[ExportName\]\]_: _name_ } to _entries_.
4.  Return _entries_.

[ExportDeclaration](#prod-ExportDeclaration) : export [Declaration](#prod-Declaration)

1.  Let _entries_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Let _names_ be the [BoundNames](#sec-static-semantics-boundnames) of [Declaration](#prod-Declaration).
3.  For each element _name_ of _names_, do
    1.  Append the [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: null, _\[\[ImportName\]\]_: null, _\[\[LocalName\]\]_: _name_, _\[\[ExportName\]\]_: _name_ } to _entries_.
4.  Return _entries_.

[ExportDeclaration](#prod-ExportDeclaration) : export default [HoistableDeclaration](#prod-HoistableDeclaration)

1.  Let _names_ be the [BoundNames](#sec-static-semantics-boundnames) of [HoistableDeclaration](#prod-HoistableDeclaration).
2.  Let _localName_ be the sole element of _names_.
3.  Return a [List](#sec-list-and-record-specification-type) whose sole element is a new [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: null, _\[\[ImportName\]\]_: null, _\[\[LocalName\]\]_: _localName_, _\[\[ExportName\]\]_: "default" }.

[ExportDeclaration](#prod-ExportDeclaration) : export default [ClassDeclaration](#prod-ClassDeclaration)

1.  Let _names_ be the [BoundNames](#sec-static-semantics-boundnames) of [ClassDeclaration](#prod-ClassDeclaration).
2.  Let _localName_ be the sole element of _names_.
3.  Return a [List](#sec-list-and-record-specification-type) whose sole element is a new [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: null, _\[\[ImportName\]\]_: null, _\[\[LocalName\]\]_: _localName_, _\[\[ExportName\]\]_: "default" }.

[ExportDeclaration](#prod-ExportDeclaration) : export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  Let _entry_ be the [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: null, _\[\[ImportName\]\]_: null, _\[\[LocalName\]\]_: "\*default\*", _\[\[ExportName\]\]_: "default" }.
2.  Return « _entry_ ».

Note

"\*default\*" is used within this specification as a synthetic name for anonymous default export values. See [this note](#note-star-default-star) for more details.


# 16.2.3.5 Static Semantics: ExportEntriesForModule

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ExportEntriesForModule takes argument _module_ (a [ModuleRequest Record](#modulerequest-record) or null) and returns a [List](#sec-list-and-record-specification-type) of [ExportEntry Records](#exportentry-record). It is defined piecewise over the following productions:

[ExportFromClause](#prod-ExportFromClause) : \*

1.  Let _entry_ be the [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: all-but-default, _\[\[LocalName\]\]_: null, _\[\[ExportName\]\]_: null }.
2.  Return « _entry_ ».

[ExportFromClause](#prod-ExportFromClause) : \* as [ModuleExportName](#prod-ModuleExportName)

1.  Let _exportName_ be the [StringValue](#sec-static-semantics-stringvalue) of [ModuleExportName](#prod-ModuleExportName).
2.  Let _entry_ be the [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: all, _\[\[LocalName\]\]_: null, _\[\[ExportName\]\]_: _exportName_ }.
3.  Return « _entry_ ».

[NamedExports](#prod-NamedExports) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportsList](#prod-ExportsList) : [ExportsList](#prod-ExportsList) , [ExportSpecifier](#prod-ExportSpecifier)

1.  Let _specs1_ be the [ExportEntriesForModule](#sec-static-semantics-exportentriesformodule) of [ExportsList](#prod-ExportsList) with argument _module_.
2.  Let _specs2_ be the [ExportEntriesForModule](#sec-static-semantics-exportentriesformodule) of [ExportSpecifier](#prod-ExportSpecifier) with argument _module_.
3.  Return the [list-concatenation](#list-concatenation) of _specs1_ and _specs2_.

[ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName)

1.  Let _sourceName_ be the [StringValue](#sec-static-semantics-stringvalue) of [ModuleExportName](#prod-ModuleExportName).
2.  If _module_ is null, then
    1.  Let _localName_ be _sourceName_.
    2.  Let _importName_ be null.
3.  Else,
    1.  Let _localName_ be null.
    2.  Let _importName_ be _sourceName_.
4.  Return a [List](#sec-list-and-record-specification-type) whose sole element is a new [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: _importName_, _\[\[LocalName\]\]_: _localName_, _\[\[ExportName\]\]_: _sourceName_ }.

[ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName) as [ModuleExportName](#prod-ModuleExportName)

1.  Let _sourceName_ be the [StringValue](#sec-static-semantics-stringvalue) of the first [ModuleExportName](#prod-ModuleExportName).
2.  Let _exportName_ be the [StringValue](#sec-static-semantics-stringvalue) of the second [ModuleExportName](#prod-ModuleExportName).
3.  If _module_ is null, then
    1.  Let _localName_ be _sourceName_.
    2.  Let _importName_ be null.
4.  Else,
    1.  Let _localName_ be null.
    2.  Let _importName_ be _sourceName_.
5.  Return a [List](#sec-list-and-record-specification-type) whose sole element is a new [ExportEntry Record](#exportentry-record) { _\[\[ModuleRequest\]\]_: _module_, _\[\[ImportName\]\]_: _importName_, _\[\[LocalName\]\]_: _localName_, _\[\[ExportName\]\]_: _exportName_ }.


# 16.2.3.6 Static Semantics: ReferencedBindings

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) ReferencedBindings takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [Parse Nodes](#sec-syntactic-grammar). It is defined piecewise over the following productions:

[NamedExports](#prod-NamedExports) : { }

1.  Return a new empty [List](#sec-list-and-record-specification-type).

[ExportsList](#prod-ExportsList) : [ExportsList](#prod-ExportsList) , [ExportSpecifier](#prod-ExportSpecifier)

1.  Let _names1_ be the [ReferencedBindings](#sec-static-semantics-referencedbindings) of [ExportsList](#prod-ExportsList).
2.  Let _names2_ be the [ReferencedBindings](#sec-static-semantics-referencedbindings) of [ExportSpecifier](#prod-ExportSpecifier).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

[ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName) as [ModuleExportName](#prod-ModuleExportName)

1.  Return the [ReferencedBindings](#sec-static-semantics-referencedbindings) of the first [ModuleExportName](#prod-ModuleExportName).

[ModuleExportName](#prod-ModuleExportName) : [IdentifierName](#prod-IdentifierName)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [IdentifierName](#prod-IdentifierName).

[ModuleExportName](#prod-ModuleExportName) : [StringLiteral](#prod-StringLiteral)

1.  Return a [List](#sec-list-and-record-specification-type) whose sole element is the [StringLiteral](#prod-StringLiteral).


# 16.2.3.7 Runtime Semantics: Evaluation

[ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ; export [NamedExports](#prod-NamedExports) ;

1.  Return empty.

[ExportDeclaration](#prod-ExportDeclaration) : export [VariableStatement](#prod-VariableStatement)

1.  Return ? [Evaluation](#sec-evaluation) of [VariableStatement](#prod-VariableStatement).

[ExportDeclaration](#prod-ExportDeclaration) : export [Declaration](#prod-Declaration)

1.  Return ? [Evaluation](#sec-evaluation) of [Declaration](#prod-Declaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [HoistableDeclaration](#prod-HoistableDeclaration)

1.  Return ? [Evaluation](#sec-evaluation) of [HoistableDeclaration](#prod-HoistableDeclaration).

[ExportDeclaration](#prod-ExportDeclaration) : export default [ClassDeclaration](#prod-ClassDeclaration)

1.  Let _value_ be ? [BindingClassDeclarationEvaluation](#sec-runtime-semantics-bindingclassdeclarationevaluation) of [ClassDeclaration](#prod-ClassDeclaration).
2.  Let _className_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of [ClassDeclaration](#prod-ClassDeclaration).
3.  If _className_ is "\*default\*", then
    1.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
    2.  Perform ? [InitializeBoundName](#sec-initializeboundname)("\*default\*", _value_, _env_).
4.  Return empty.

[ExportDeclaration](#prod-ExportDeclaration) : export default [AssignmentExpression](#prod-AssignmentExpression) ;

1.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([AssignmentExpression](#prod-AssignmentExpression)) is true, then
    1.  Let _value_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [AssignmentExpression](#prod-AssignmentExpression) with argument "default".
2.  Else,
    1.  Let _rhs_ be ? [Evaluation](#sec-evaluation) of [AssignmentExpression](#prod-AssignmentExpression).
    2.  Let _value_ be ? [GetValue](#sec-getvalue)(_rhs_).
3.  Let _env_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
4.  Perform ? [InitializeBoundName](#sec-initializeboundname)("\*default\*", _value_, _env_).
5.  Return empty.


# 17 Error Handling and Language Extensions

An implementation must report most errors at the time the relevant ECMAScript language construct is evaluated. An early error is an error that can be detected and reported prior to the evaluation of any construct in the [Script](#prod-Script) containing the error. The presence of an [early error](#early-error) prevents the evaluation of the construct. An implementation must report [early errors](#early-error) in a [Script](#prod-Script) as part of parsing that [Script](#prod-Script) in [ParseScript](#sec-parse-script). [Early errors](#early-error) in a [Module](#prod-Module) are reported at the point when the [Module](#prod-Module) would be evaluated and the [Module](#prod-Module) is never initialized. [Early errors](#early-error) in **eval** code are reported at the time `eval` is called and prevent evaluation of the **eval** code. All errors that are not [early errors](#early-error) are runtime errors.

An implementation must report as an [early error](#early-error) any occurrence of a condition that is listed in a “Static Semantics: Early Errors” subclause of this specification.

An implementation shall not treat other kinds of errors as [early errors](#early-error) even if the compiler can prove that a construct cannot execute without error under any circumstances. An implementation may issue an early warning in such a case, but it should not report the error until the relevant construct is actually executed.

An implementation shall report all errors as specified, except for the following:

-   Except as restricted in [17.1](#sec-forbidden-extensions), a [host](#host) or implementation may extend [Script](#prod-Script) syntax, [Module](#prod-Module) syntax, and regular expression pattern or flag syntax. To permit this, all operations (such as calling `eval`, using a regular expression literal, or using the Function or RegExp [constructor](#constructor)) that are allowed to throw SyntaxError are permitted to exhibit [host-defined](#host-defined) behaviour instead of throwing SyntaxError when they encounter a [host-defined](#host-defined) extension to the script syntax or regular expression pattern or flag syntax.
-   Except as restricted in [17.1](#sec-forbidden-extensions), a [host](#host) or implementation may provide additional types, values, objects, properties, and functions beyond those described in this specification. This may cause constructs (such as looking up a variable in the global scope) to have [host-defined](#host-defined) behaviour instead of throwing an error (such as ReferenceError).


# 17.1 Forbidden Extensions

An implementation must not extend this specification in the following ways:

-   ECMAScript [function objects](#function-object) defined using syntactic [constructors](#constructor) in [strict mode code](#sec-strict-mode-code) must not be created with own properties named "caller" or "arguments". Such own properties also must not be created for [function objects](#function-object) defined using an [ArrowFunction](#prod-ArrowFunction), [MethodDefinition](#prod-MethodDefinition), [GeneratorDeclaration](#prod-GeneratorDeclaration), [GeneratorExpression](#prod-GeneratorExpression), [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression), [ClassDeclaration](#prod-ClassDeclaration), [ClassExpression](#prod-ClassExpression), [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), [AsyncFunctionExpression](#prod-AsyncFunctionExpression), or [AsyncArrowFunction](#prod-AsyncArrowFunction) regardless of whether the definition is contained in [strict mode code](#sec-strict-mode-code). Built-in functions, [strict functions](#strict-function) created using the Function [constructor](#constructor), generator functions created using the Generator [constructor](#constructor), async functions created using the AsyncFunction [constructor](#constructor), and functions created using the `bind` method also must not be created with such own properties.
-   If an implementation extends any [function object](#function-object) with an own property named "caller" the value of that property, as observed using _\[\[Get\]\]_ or _\[\[GetOwnProperty\]\]_, must not be a [strict function](#strict-function) object. If it is an [accessor property](#sec-object-type), the function that is the value of the property's _\[\[Get\]\]_ attribute must never return a [strict function](#strict-function) when called.
-   Neither mapped nor unmapped arguments objects may be created with an own property named "caller".
-   The behaviour of built-in methods which are specified in ECMA-402, such as those named `toLocaleString`, must not be extended except as specified in ECMA-402.
-   The RegExp pattern grammars in [22.2.1](#sec-patterns) and [B.1.2](#sec-regular-expressions-patterns) must not be extended to recognize any of the source characters A-Z or a-z as [IdentityEscape](#prod-IdentityEscape)\[+UnicodeMode\] when the <sub>\[UnicodeMode\]</sub> grammar parameter is present.
-   The Syntactic Grammar must not be extended in any manner that allows the token `:` to immediately follow source text that is matched by the [BindingIdentifier](#prod-BindingIdentifier) nonterminal symbol.
-   When processing [strict mode code](#sec-strict-mode-code), an implementation must not relax the [early error](#early-error) rules of [12.9.3.1](#sec-numeric-literals-early-errors).
-   [TemplateEscapeSequence](#prod-TemplateEscapeSequence) must not be extended to include [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) or [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) as defined in [12.9.4](#sec-literals-string-literals).
-   When processing [strict mode code](#sec-strict-mode-code), the extensions defined in [B.3.1](#sec-labelled-function-declarations), [B.3.2](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), [B.3.3](#sec-functiondeclarations-in-ifstatement-statement-clauses), and [B.3.5](#sec-initializers-in-forin-statement-heads) must not be supported.
-   When parsing for the [Module](#prod-Module) [goal symbol](#sec-context-free-grammars), the lexical grammar extensions defined in [B.1.1](#sec-html-like-comments) must not be supported.
-   [ImportCall](#prod-ImportCall) must not be extended.


# 18 ECMAScript Standard Built-in Objects

There are certain built-in objects available whenever an ECMAScript [Script](#prod-Script) or [Module](#prod-Module) begins execution. One, the [global object](#sec-global-object), is part of the global environment of the executing program. Others are accessible as initial properties of the [global object](#sec-global-object) or indirectly as properties of accessible built-in objects.

Unless specified otherwise, a built-in object that is callable as a function is a built-in [function object](#function-object) with the characteristics described in [10.3](#sec-built-in-function-objects). Unless specified otherwise, the _\[\[Extensible\]\]_ internal slot of a built-in object initially has the value true. Every built-in [function object](#function-object) has a _\[\[Realm\]\]_ internal slot whose value is the [Realm Record](#realm-record) of the [realm](#realm) for which the object was initially created.

Many built-in objects are functions: they can be invoked with arguments. Some of them furthermore are [constructors](#constructor): they are functions intended for use with the `new` operator. For each built-in function, this specification describes the arguments required by that function and the properties of that [function object](#function-object). For each built-in [constructor](#constructor), this specification furthermore describes properties of the prototype object of that [constructor](#constructor) and properties of specific object instances returned by a `new` expression that invokes that [constructor](#constructor).

Unless otherwise specified in the description of a particular function, if a built-in function or [constructor](#constructor) is given fewer arguments than the function is specified to require, the function or [constructor](#constructor) shall behave exactly as if it had been given sufficient additional arguments, each such argument being the undefined value. Such missing arguments are considered to be “not present” and may be identified in that manner by specification algorithms. In the description of a particular function, the terms “this value” and “NewTarget” have the meanings given in [10.3](#sec-built-in-function-objects).

Unless otherwise specified in the description of a particular function, if a built-in function or [constructor](#constructor) described is given more arguments than the function is specified to allow, the extra arguments are evaluated by the call and then ignored by the function. However, an implementation may define implementation specific behaviour relating to such arguments as long as the behaviour is not the throwing of a TypeError exception that is predicated simply on the presence of an extra argument.

Note 1

Implementations that add additional capabilities to the set of built-in functions are encouraged to do so by adding new functions rather than adding new parameters to existing functions.

Unless otherwise specified every built-in function and every built-in [constructor](#constructor) has the [Function prototype object](#sec-properties-of-the-function-prototype-object), which is the initial value of the expression `Function.prototype` ([20.2.3](#sec-properties-of-the-function-prototype-object)), as the value of its _\[\[Prototype\]\]_ internal slot.

Unless otherwise specified every built-in prototype object has the [Object prototype object](#sec-properties-of-the-object-prototype-object), which is the initial value of the expression `Object.prototype` ([20.1.3](#sec-properties-of-the-object-prototype-object)), as the value of its _\[\[Prototype\]\]_ internal slot, except the [Object prototype object](#sec-properties-of-the-object-prototype-object) itself.

If this specification defines a built-in [constructor](#constructor)'s behaviour via algorithm steps, then that is its behaviour for the purposes of both _\[\[Call\]\]_ and _\[\[Construct\]\]_. If such an algorithm needs to distinguish the two cases, it checks whether NewTarget is undefined, which indicates a _\[\[Call\]\]_ invocation.

Built-in [function objects](#function-object) that are not identified as [constructors](#constructor) do not implement the _\[\[Construct\]\]_ internal method unless otherwise specified in the description of a particular function.

Built-in [function objects](#function-object) that are not [constructors](#constructor) do not have a "prototype" property unless otherwise specified in the description of a particular function.

Each built-in function defined in this specification is created by calling the [CreateBuiltinFunction](#sec-createbuiltinfunction) abstract operation ([10.3.4](#sec-createbuiltinfunction)). The values of the _length_ and _name_ parameters are the initial values of the "length" and "name" properties as discussed below. The values of the _prefix_ parameter are similarly discussed below.

Every built-in [function object](#function-object), including [constructors](#constructor), has a "length" property whose value is a non-negative [integral Number](#integral-number). Unless otherwise specified, this value is the number of required parameters shown in the subclause heading for the function description. Optional parameters and rest parameters are not included in the parameter count.

Note 2

For example, the [function object](#function-object) that is the initial value of the "map" property of the [Array prototype object](#sec-properties-of-the-array-prototype-object) is described under the subclause heading «Array.prototype.map (callback \[, thisArg\])» which shows the two named arguments callback and thisArg, the latter being optional; therefore the value of the "length" property of that [function object](#function-object) is 1<sub>𝔽</sub>.

Unless otherwise specified, the "length" property of a built-in [function object](#function-object) has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.

Every built-in [function object](#function-object), including [constructors](#constructor), has a "name" property whose value [is a String](#sec-ecmascript-language-types-string-type). Unless otherwise specified, this value is the name that is given to the function in this specification. Functions that are identified as anonymous functions use the empty String as the value of the "name" property. For functions that are specified as properties of objects, the name value is the [property name](#property-name) string used to access the function. Functions that are specified as get or set accessor functions of built-in properties have "get" or "set" (respectively) passed to the _prefix_ parameter when calling [CreateBuiltinFunction](#sec-createbuiltinfunction).

The value of the "name" property is explicitly specified for each built-in functions whose [property key](#property-key) [is a Symbol](#sec-ecmascript-language-types-symbol-type) value. If such an explicitly specified value starts with the prefix "get " or "set " and the function for which it is specified is a get or set accessor function of a built-in property, the value without the prefix is passed to the _name_ parameter, and the value "get" or "set" (respectively) is passed to the _prefix_ parameter when calling [CreateBuiltinFunction](#sec-createbuiltinfunction).

Unless otherwise specified, the "name" property of a built-in [function object](#function-object) has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.

Every other [data property](#sec-object-type) described in clauses [19](#sec-global-object) through [28](#sec-reflection) and in Annex [B.2](#sec-additional-built-in-properties) has the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true } unless otherwise specified.

Every [accessor property](#sec-object-type) described in clauses [19](#sec-global-object) through [28](#sec-reflection) and in Annex [B.2](#sec-additional-built-in-properties) has the attributes { _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true } unless otherwise specified. If only a get accessor function is described, the set accessor function is the default value, undefined. If only a set accessor is described the get accessor is the default value, undefined.


# 19 The Global Object

The global object:

-   is created before control enters any [execution context](#sec-execution-contexts).
-   does not have a _\[\[Construct\]\]_ internal method; it cannot be used as a [constructor](#constructor) with the `new` operator.
-   does not have a _\[\[Call\]\]_ internal method; it cannot be invoked as a function.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [host-defined](#host-defined).
-   may have [host-defined](#host-defined) properties in addition to the properties defined in this specification. This may include a property whose value is the global object itself.


# 19.1 Value Properties of the Global Object


# 19.1.1 globalThis

The initial value of the "globalThis" property of the [global object](#sec-global-object) in a [Realm Record](#realm-record) _realm_ is _realm_._\[\[GlobalEnv\]\]_._\[\[GlobalThisValue\]\]_.

This property has the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 19.1.2 Infinity

The value of `Infinity` is +∞<sub>𝔽</sub> (see [6.1.6.1](#sec-ecmascript-language-types-number-type)). This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 19.1.3 NaN

The value of `NaN` is NaN (see [6.1.6.1](#sec-ecmascript-language-types-number-type)). This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 19.1.4 undefined

The value of `undefined` is undefined (see [6.1.1](#sec-ecmascript-language-types-undefined-type)). This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 19.2 Function Properties of the Global Object


# 19.2.1 eval ( _x_ )

This function is the %eval% intrinsic object.

It performs the following steps when called:

1.  Return ? [PerformEval](#sec-performeval)(_x_, false, false).


# 19.2.1.1 PerformEval ( _x_, _strictCaller_, _direct_ )

The abstract operation PerformEval takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _strictCaller_ (a Boolean), and _direct_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): If _direct_ is false, then _strictCaller_ is also false.
2.  If _x_ [is not a String](#sec-ecmascript-language-types-string-type), return _x_.
3.  Let _evalRealm_ be [the current Realm Record](#current-realm).
4.  NOTE: In the case of a [direct eval](#sec-function-calls-runtime-semantics-evaluation), _evalRealm_ is the [realm](#realm) of both the caller of `eval` and of the `eval` function itself.
5.  Perform ? [HostEnsureCanCompileStrings](#sec-hostensurecancompilestrings)(_evalRealm_, « », _x_, _direct_).
6.  Let _inFunction_ be false.
7.  Let _inMethod_ be false.
8.  Let _inDerivedConstructor_ be false.
9.  Let _inClassFieldInitializer_ be false.
10.  If _direct_ is true, then
     1.  Let _thisEnvRec_ be [GetThisEnvironment](#sec-getthisenvironment)().
     2.  If _thisEnvRec_ is a [Function Environment Record](#sec-function-environment-records), then
         1.  Let _F_ be _thisEnvRec_._\[\[FunctionObject\]\]_.
         2.  Set _inFunction_ to true.
         3.  Set _inMethod_ to _thisEnvRec_.HasSuperBinding().
         4.  If _F_._\[\[ConstructorKind\]\]_ is derived, set _inDerivedConstructor_ to true.
         5.  Let _classFieldInitializerName_ be _F_._\[\[ClassFieldInitializerName\]\]_.
         6.  If _classFieldInitializerName_ is not empty, set _inClassFieldInitializer_ to true.
11.  Perform the following substeps in an [implementation-defined](#implementation-defined) order, possibly interleaving parsing and error detection:
     1.  Let _script_ be [ParseText](#sec-parsetext)(_x_, [Script](#prod-Script)).
     2.  If _script_ is a [List](#sec-list-and-record-specification-type) of errors, throw a SyntaxError exception.
     3.  If _script_ [Contains](#sec-static-semantics-contains) [ScriptBody](#prod-ScriptBody) is false, return undefined.
     4.  Let _body_ be the [ScriptBody](#prod-ScriptBody) of _script_.
     5.  If _inFunction_ is false and _body_ [Contains](#sec-static-semantics-contains) [NewTarget](#prod-NewTarget), throw a SyntaxError exception.
     6.  If _inMethod_ is false and _body_ [Contains](#sec-static-semantics-contains) [SuperProperty](#prod-SuperProperty), throw a SyntaxError exception.
     7.  If _inDerivedConstructor_ is false and _body_ [Contains](#sec-static-semantics-contains) [SuperCall](#prod-SuperCall), throw a SyntaxError exception.
     8.  If _inClassFieldInitializer_ is true and [ContainsArguments](#sec-static-semantics-containsarguments) of _body_ is true, throw a SyntaxError exception.
12.  If _strictCaller_ is true, let _strictEval_ be true.
13.  Else, let _strictEval_ be [ScriptIsStrict](#sec-scriptisstrict) of _script_.
14.  Let _runningContext_ be the [running execution context](#running-execution-context).
15.  NOTE: If _direct_ is true, _runningContext_ will be the [execution context](#sec-execution-contexts) that performed the [direct eval](#sec-function-calls-runtime-semantics-evaluation). If _direct_ is false, _runningContext_ will be the [execution context](#sec-execution-contexts) for the invocation of the `eval` function.
16.  If _direct_ is true, then
     1.  Let _lexEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_runningContext_'s LexicalEnvironment).
     2.  Let _varEnv_ be _runningContext_'s VariableEnvironment.
     3.  Let _privateEnv_ be _runningContext_'s PrivateEnvironment.
17.  Else,
     1.  Let _lexEnv_ be [NewDeclarativeEnvironment](#sec-newdeclarativeenvironment)(_evalRealm_._\[\[GlobalEnv\]\]_).
     2.  Let _varEnv_ be _evalRealm_._\[\[GlobalEnv\]\]_.
     3.  Let _privateEnv_ be null.
18.  If _strictEval_ is true, set _varEnv_ to _lexEnv_.
19.  If _runningContext_ is not already suspended, suspend _runningContext_.
20.  Let _evalContext_ be a new [ECMAScript code execution context](#ecmascript-code-execution-context).
21.  Set _evalContext_'s Function to null.
22.  Set _evalContext_'s [Realm](#realm) to _evalRealm_.
23.  Set _evalContext_'s ScriptOrModule to _runningContext_'s ScriptOrModule.
24.  Set _evalContext_'s VariableEnvironment to _varEnv_.
25.  Set _evalContext_'s LexicalEnvironment to _lexEnv_.
26.  Set _evalContext_'s PrivateEnvironment to _privateEnv_.
27.  Push _evalContext_ onto the [execution context stack](#execution-context-stack); _evalContext_ is now the [running execution context](#running-execution-context).
28.  Let _result_ be [Completion](#sec-completion-ao)([EvalDeclarationInstantiation](#sec-evaldeclarationinstantiation)(_body_, _varEnv_, _lexEnv_, _privateEnv_, _strictEval_)).
29.  If _result_ is a [normal completion](#sec-completion-record-specification-type), then
     1.  Set _result_ to [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _body_).
30.  If _result_ is a [normal completion](#sec-completion-record-specification-type) and _result_._\[\[Value\]\]_ is empty, then
     1.  Set _result_ to [NormalCompletion](#sec-normalcompletion)(undefined).
31.  Suspend _evalContext_ and remove it from the [execution context stack](#execution-context-stack).
32.  Resume the context that is now on the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
33.  Return ? _result_.

Note

The eval code cannot instantiate variable or function bindings in the variable environment of the calling context that invoked the eval if either the code of the calling context or the eval code is [strict mode code](#sec-strict-mode-code). Instead such bindings are instantiated in a new VariableEnvironment that is only accessible to the eval code. Bindings introduced by `let`, `const`, or `class` declarations are always instantiated in a new LexicalEnvironment.


# 19.2.1.2 HostEnsureCanCompileStrings ( _calleeRealm_, _parameterStrings_, _bodyString_, _direct_ )

The [host-defined](#host-defined) abstract operation HostEnsureCanCompileStrings takes arguments _calleeRealm_ (a [Realm Record](#realm-record)), _parameterStrings_ (a [List](#sec-list-and-record-specification-type) of Strings), _bodyString_ (a String), and _direct_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It allows [host environments](#host-environment) to block certain ECMAScript functions which allow developers to interpret and evaluate strings as ECMAScript code.

_parameterStrings_ represents the strings that, when using one of the function [constructors](#constructor), will be concatenated together to build the parameters list. _bodyString_ represents the function body or the string passed to an `eval` call. _direct_ signifies whether the evaluation is a [direct eval](#sec-function-calls-runtime-semantics-evaluation).

The default implementation of HostEnsureCanCompileStrings is to return [NormalCompletion](#sec-normalcompletion)(unused).


# 19.2.1.3 EvalDeclarationInstantiation ( _body_, _varEnv_, _lexEnv_, _privateEnv_, _strict_ )

The abstract operation EvalDeclarationInstantiation takes arguments _body_ (a [ScriptBody](#prod-ScriptBody) [Parse Node](#sec-syntactic-grammar)), _varEnv_ (an [Environment Record](#sec-environment-records)), _lexEnv_ (a [Declarative Environment Record](#sec-declarative-environment-records)), _privateEnv_ (a [PrivateEnvironment Record](#privateenvironment-record) or null), and _strict_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _varNames_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of _body_.
2.  Let _varDeclarations_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of _body_.
3.  If _strict_ is false, then
    1.  If _varEnv_ is a [Global Environment Record](#sec-global-environment-records), then
        1.  For each element _name_ of _varNames_, do
            1.  If [HasLexicalDeclaration](#sec-haslexicaldeclaration)(_varEnv_, _name_) is true, throw a SyntaxError exception.
            2.  NOTE: `eval` will not create a global var declaration that would be shadowed by a global lexical declaration.
    2.  Let _thisEnv_ be _lexEnv_.
    3.  [Assert](#assert): The following loop will terminate.
    4.  Repeat, while _thisEnv_ and _varEnv_ are not the same [Environment Record](#sec-environment-records),
        1.  If _thisEnv_ [is not an Object](#sec-object-type) [Environment Record](#sec-environment-records), then
            1.  NOTE: The environment of with statements cannot contain any lexical declaration so it doesn't need to be checked for var/let hoisting conflicts.
            2.  For each element _name_ of _varNames_, do
                1.  If ! _thisEnv_.HasBinding(_name_) is true, then
                    1.  [Normative Optional](#sec-conformance)
                        
                        If the [host](#host) is a web browser or otherwise supports [VariableStatements in Catch Blocks](#sec-variablestatements-in-catch-blocks), then
                        1.  If _thisEnv_ is not the [Environment Record](#sec-environment-records) for a [Catch](#prod-Catch) clause, throw a SyntaxError exception.
                    2.  Else,
                        1.  Throw a SyntaxError exception.
                2.  NOTE: A [direct eval](#sec-function-calls-runtime-semantics-evaluation) will not hoist var declaration over a like-named lexical declaration.
        2.  Set _thisEnv_ to _thisEnv_._\[\[OuterEnv\]\]_.
4.  Let _privateIdentifiers_ be a new empty [List](#sec-list-and-record-specification-type).
5.  Let _pointer_ be _privateEnv_.
6.  Repeat, while _pointer_ is not null,
    1.  For each [Private Name](#sec-private-names) _binding_ of _pointer_._\[\[Names\]\]_, do
        1.  If _privateIdentifiers_ does not contain _binding_._\[\[Description\]\]_, append _binding_._\[\[Description\]\]_ to _privateIdentifiers_.
    2.  Set _pointer_ to _pointer_._\[\[OuterPrivateEnvironment\]\]_.
7.  If [AllPrivateIdentifiersValid](#sec-static-semantics-allprivateidentifiersvalid) of _body_ with argument _privateIdentifiers_ is false, throw a SyntaxError exception.
8.  Let _functionsToInitialize_ be a new empty [List](#sec-list-and-record-specification-type).
9.  Let _declaredFunctionNames_ be a new empty [List](#sec-list-and-record-specification-type).
10.  For each element _d_ of _varDeclarations_, in reverse [List](#sec-list-and-record-specification-type) order, do
     1.  If _d_ is not either a [VariableDeclaration](#prod-VariableDeclaration), a [ForBinding](#prod-ForBinding), or a [BindingIdentifier](#prod-BindingIdentifier), then
         1.  [Assert](#assert): _d_ is either a [FunctionDeclaration](#prod-FunctionDeclaration), a [GeneratorDeclaration](#prod-GeneratorDeclaration), an [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration), or an [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration).
         2.  NOTE: If there are multiple function declarations for the same name, the last declaration is used.
         3.  Let _fn_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _d_.
         4.  If _declaredFunctionNames_ does not contain _fn_, then
             1.  If _varEnv_ is a [Global Environment Record](#sec-global-environment-records), then
                 1.  Let _fnDefinable_ be ? [CanDeclareGlobalFunction](#sec-candeclareglobalfunction)(_varEnv_, _fn_).
                 2.  If _fnDefinable_ is false, throw a TypeError exception.
             2.  Append _fn_ to _declaredFunctionNames_.
             3.  Insert _d_ as the first element of _functionsToInitialize_.
11.  Let _declaredVarNames_ be a new empty [List](#sec-list-and-record-specification-type).
12.  For each element _d_ of _varDeclarations_, do
     1.  If _d_ is either a [VariableDeclaration](#prod-VariableDeclaration), a [ForBinding](#prod-ForBinding), or a [BindingIdentifier](#prod-BindingIdentifier), then
         1.  For each String _vn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
             1.  If _declaredFunctionNames_ does not contain _vn_, then
                 1.  If _varEnv_ is a [Global Environment Record](#sec-global-environment-records), then
                     1.  Let _vnDefinable_ be ? [CanDeclareGlobalVar](#sec-candeclareglobalvar)(_varEnv_, _vn_).
                     2.  If _vnDefinable_ is false, throw a TypeError exception.
                 2.  If _declaredVarNames_ does not contain _vn_, then
                     1.  Append _vn_ to _declaredVarNames_.
13.  [Normative Optional](#sec-conformance)
     
     If _strict_ is false and the [host](#host) is a web browser or otherwise supports [Block-Level Function Declarations Web Legacy Compatibility Semantics](#sec-block-level-function-declarations-web-legacy-compatibility-semantics), then
     1.  Let _declaredFunctionOrVarNames_ be the [list-concatenation](#list-concatenation) of _declaredFunctionNames_ and _declaredVarNames_.
     2.  For each [FunctionDeclaration](#prod-FunctionDeclaration) _f_ that is directly contained in the [StatementList](#prod-StatementList) of any [Block](#prod-Block), [CaseClause](#prod-CaseClause), or [DefaultClause](#prod-DefaultClause) _x_ such that _body_ [Contains](#sec-static-semantics-contains) _x_ is true, do
         1.  Let _F_ be the [StringValue](#sec-static-semantics-stringvalue) of the [BindingIdentifier](#prod-BindingIdentifier) of _f_.
         2.  If replacing the [FunctionDeclaration](#prod-FunctionDeclaration) _f_ with a [VariableStatement](#prod-VariableStatement) that has _F_ as a [BindingIdentifier](#prod-BindingIdentifier) would not produce any Early Errors for _body_, then
             1.  Let _bindingExists_ be false.
             2.  Set _thisEnv_ to _lexEnv_.
             3.  [Assert](#assert): The following loop will terminate.
             4.  Repeat, while _thisEnv_ is not _varEnv_,
                 1.  If _thisEnv_ [is not an Object](#sec-object-type) [Environment Record](#sec-environment-records), then
                     1.  If ! _thisEnv_.HasBinding(_F_) is true, then
                         1.  [Normative Optional](#sec-conformance)
                             
                             If the [host](#host) is a web browser or otherwise supports [VariableStatements in Catch Blocks](#sec-variablestatements-in-catch-blocks), then
                             1.  If _thisEnv_ is not the [Environment Record](#sec-environment-records) for a [Catch](#prod-Catch) clause, set _bindingExists_ to true.
                         2.  Else,
                             1.  Set _bindingExists_ to true.
                 2.  Set _thisEnv_ to _thisEnv_._\[\[OuterEnv\]\]_.
             5.  If _bindingExists_ is false and _varEnv_ is a [Global Environment Record](#sec-global-environment-records), then
                 1.  If [HasLexicalDeclaration](#sec-haslexicaldeclaration)(_varEnv_, _F_) is false, then
                     1.  Let _fnDefinable_ be ? [CanDeclareGlobalVar](#sec-candeclareglobalvar)(_varEnv_, _F_).
                 2.  Else,
                     1.  Let _fnDefinable_ be false.
             6.  Else,
                 1.  Let _fnDefinable_ be true.
             7.  If _bindingExists_ is false and _fnDefinable_ is true, then
                 1.  If _declaredFunctionOrVarNames_ does not contain _F_, then
                     1.  If _varEnv_ is a [Global Environment Record](#sec-global-environment-records), then
                         1.  Perform ? [CreateGlobalVarBinding](#sec-createglobalvarbinding)(_varEnv_, _F_, true).
                     2.  Else,
                         1.  Set _bindingExists_ to ! _varEnv_.HasBinding(_F_).
                         2.  If _bindingExists_ is false, then
                             1.  Perform ! _varEnv_.CreateMutableBinding(_F_, true).
                             2.  Perform ! _varEnv_.InitializeBinding(_F_, undefined).
                     3.  Append _F_ to _declaredFunctionOrVarNames_.
                 2.  When the [FunctionDeclaration](#prod-FunctionDeclaration) _f_ is evaluated, perform the following steps in place of the [FunctionDeclaration](#prod-FunctionDeclaration) [Evaluation](#sec-evaluation) algorithm provided in [15.2.6](#sec-function-definitions-runtime-semantics-evaluation):
                     1.  Let _gEnv_ be the [running execution context](#running-execution-context)'s VariableEnvironment.
                     2.  Let _bEnv_ be the [running execution context](#running-execution-context)'s LexicalEnvironment.
                     3.  Let _fObj_ be ! _bEnv_.GetBindingValue(_F_, false).
                     4.  Perform ? _gEnv_.SetMutableBinding(_F_, _fObj_, false).
                     5.  Return unused.
14.  NOTE: No abnormal terminations occur after this algorithm step unless _varEnv_ is a [Global Environment Record](#sec-global-environment-records) and the [global object](#sec-global-object) is a [Proxy exotic object](#proxy-exotic-object).
15.  Let _lexDeclarations_ be the [LexicallyScopedDeclarations](#sec-static-semantics-lexicallyscopeddeclarations) of _body_.
16.  For each element _d_ of _lexDeclarations_, do
     1.  NOTE: Lexically declared names are only instantiated here but not initialized.
     2.  For each element _dn_ of the [BoundNames](#sec-static-semantics-boundnames) of _d_, do
         1.  If [IsConstantDeclaration](#sec-static-semantics-isconstantdeclaration) of _d_ is true, then
             1.  Perform ? _lexEnv_.CreateImmutableBinding(_dn_, true).
         2.  Else,
             1.  Perform ? _lexEnv_.CreateMutableBinding(_dn_, false).
17.  For each [Parse Node](#sec-syntactic-grammar) _f_ of _functionsToInitialize_, do
     1.  Let _fn_ be the sole element of the [BoundNames](#sec-static-semantics-boundnames) of _f_.
     2.  Let _fo_ be [InstantiateFunctionObject](#sec-runtime-semantics-instantiatefunctionobject) of _f_ with arguments _lexEnv_ and _privateEnv_.
     3.  If _varEnv_ is a [Global Environment Record](#sec-global-environment-records), then
         1.  Perform ? [CreateGlobalFunctionBinding](#sec-createglobalfunctionbinding)(_varEnv_, _fn_, _fo_, true).
     4.  Else,
         1.  Let _bindingExists_ be ! _varEnv_.HasBinding(_fn_).
         2.  If _bindingExists_ is false, then
             1.  NOTE: The following invocation cannot return an [abrupt completion](#sec-completion-record-specification-type) because of the validation preceding step [14](#step-evaldeclarationinstantiation-post-validation).
             2.  Perform ! _varEnv_.CreateMutableBinding(_fn_, true).
             3.  Perform ! _varEnv_.InitializeBinding(_fn_, _fo_).
         3.  Else,
             1.  Perform ! _varEnv_.SetMutableBinding(_fn_, _fo_, false).
18.  For each String _vn_ of _declaredVarNames_, do
     1.  If _varEnv_ is a [Global Environment Record](#sec-global-environment-records), then
         1.  Perform ? [CreateGlobalVarBinding](#sec-createglobalvarbinding)(_varEnv_, _vn_, true).
     2.  Else,
         1.  Let _bindingExists_ be ! _varEnv_.HasBinding(_vn_).
         2.  If _bindingExists_ is false, then
             1.  NOTE: The following invocation cannot return an [abrupt completion](#sec-completion-record-specification-type) because of the validation preceding step [14](#step-evaldeclarationinstantiation-post-validation).
             2.  Perform ! _varEnv_.CreateMutableBinding(_vn_, true).
             3.  Perform ! _varEnv_.InitializeBinding(_vn_, undefined).
19.  Return unused.


# 19.2.2 isFinite ( _number_ )

This function is the %isFinite% intrinsic object.

It performs the following steps when called:

1.  Let _num_ be ? [ToNumber](#sec-tonumber)(_number_).
2.  If _num_ is not [finite](#finite), return false.
3.  Otherwise, return true.


# 19.2.3 isNaN ( _number_ )

This function is the %isNaN% intrinsic object.

It performs the following steps when called:

1.  Let _num_ be ? [ToNumber](#sec-tonumber)(_number_).
2.  If _num_ is NaN, return true.
3.  Otherwise, return false.

Note

A reliable way for ECMAScript code to test if a value `X` is NaN is an expression of the form `X !== X`. The result will be true if and only if `X` is NaN.


# 19.2.4 parseFloat ( _string_ )

This function produces a Number value dictated by interpretation of the contents of the _string_ argument as a decimal literal.

It is the %parseFloat% intrinsic object.

It performs the following steps when called:

1.  Let _inputString_ be ? [ToString](#sec-tostring)(_string_).
2.  Let _trimmedString_ be ! [TrimString](#sec-trimstring)(_inputString_, start).
3.  Let _trimmed_ be [StringToCodePoints](#sec-stringtocodepoints)(_trimmedString_).
4.  Let _trimmedPrefix_ be the longest prefix of _trimmed_ that satisfies the syntax of a [StrDecimalLiteral](#prod-StrDecimalLiteral), which might be _trimmed_ itself. If there is no such prefix, return NaN.
5.  Let _parsedNumber_ be [ParseText](#sec-parsetext)(_trimmedPrefix_, [StrDecimalLiteral](#prod-StrDecimalLiteral)).
6.  [Assert](#assert): _parsedNumber_ is a [Parse Node](#sec-syntactic-grammar).
7.  Return the [StringNumericValue](#sec-runtime-semantics-stringnumericvalue) of _parsedNumber_.

Note

This function may interpret only a leading portion of _string_ as a Number value; it ignores any code units that cannot be interpreted as part of the notation of a decimal literal, and no indication is given that any such code units were ignored.


# 19.2.5 parseInt ( _string_, _radix_ )

This function produces an [integral Number](#integral-number) dictated by interpretation of the contents of _string_ according to the specified _radix_. Leading white space in _string_ is ignored. If _radix_ coerces to 0 (such as when it is undefined), it is assumed to be 10 except when the number representation begins with "0x" or "0X", in which case it is assumed to be 16. If _radix_ is 16, the number representation may optionally begin with "0x" or "0X".

It is the %parseInt% intrinsic object.

It performs the following steps when called:

1.  Let _inputString_ be ? [ToString](#sec-tostring)(_string_).
2.  Let _S_ be ! [TrimString](#sec-trimstring)(_inputString_, start).
3.  Let _sign_ be 1.
4.  If _S_ is not empty and the first code unit of _S_ is the code unit 0x002D (HYPHEN-MINUS), set _sign_ to -1.
5.  If _S_ is not empty and the first code unit of _S_ is either the code unit 0x002B (PLUS SIGN) or the code unit 0x002D (HYPHEN-MINUS), set _S_ to the [substring](#substring) of _S_ from index 1.
6.  Let _R_ be [ℝ](#ℝ)(? [ToInt32](#sec-toint32)(_radix_)).
7.  Let _stripPrefix_ be true.
8.  If _R_ ≠ 0, then
    1.  If _R_ < 2 or _R_ > 36, return NaN.
    2.  If _R_ ≠ 16, set _stripPrefix_ to false.
9.  Else,
    1.  Set _R_ to 10.
10.  If _stripPrefix_ is true, then
     1.  If the length of _S_ ≥ 2 and the first two code units of _S_ are either "0x" or "0X", then
         1.  Set _S_ to the [substring](#substring) of _S_ from index 2.
         2.  Set _R_ to 16.
11.  If _S_ contains a code unit that is not a radix-_R_ digit, let _end_ be the index within _S_ of the first such code unit; otherwise let _end_ be the length of _S_.
12.  Let _Z_ be the [substring](#substring) of _S_ from 0 to _end_.
13.  If _Z_ is empty, return NaN.
14.  Let _mathInt_ be the [integer](#integer) value that is represented by _Z_ in radix-_R_ notation, using the letters **A** through **Z** and **a** through **z** for digits with values 10 through 35. (However, if _R_ = 10 and _Z_ contains more than 20 significant digits, every significant digit after the 20th may be replaced by a 0 digit, at the option of the implementation; and if _R_ is not one of 2, 4, 8, 10, 16, or 32, then _mathInt_ may be an [implementation-approximated](#implementation-approximated) [integer](#integer) representing the [integer](#integer) value denoted by _Z_ in radix-_R_ notation.)
15.  If _mathInt_ = 0, then
     1.  If _sign_ = -1, return \-0<sub>𝔽</sub>.
     2.  Return +0<sub>𝔽</sub>.
16.  Return [𝔽](#𝔽)(_sign_ × _mathInt_).

Note

This function may interpret only a leading portion of _string_ as an [integer](#integer) value; it ignores any code units that cannot be interpreted as part of the notation of an [integer](#integer), and no indication is given that any such code units were ignored.


# 19.2.6 URI Handling Functions

Uniform Resource Identifiers, or URIs, are Strings that identify resources (e.g. web pages or files) and transport protocols by which to access them (e.g. HTTP or FTP) on the Internet. The ECMAScript language itself does not provide any support for using URIs except for functions that encode and decode URIs as described in this section. `encodeURI` and `decodeURI` are intended to work with complete URIs; they assume that any reserved characters are intended to have special meaning (e.g., as delimiters) and so are not encoded. `encodeURIComponent` and `decodeURIComponent` are intended to work with the individual components of a URI; they assume that any reserved characters represent text and must be encoded to avoid special meaning when the component is part of a complete URI.

Note 1

The set of reserved characters is based upon RFC 2396 and does not reflect changes introduced by the more recent RFC 3986.

Note 2

Many implementations of ECMAScript provide additional functions and methods that manipulate web pages; these functions are beyond the scope of this standard.


# 19.2.6.1 decodeURI ( _encodedURI_ )

This function computes a new version of a URI in which each escape sequence and UTF-8 encoding of the sort that might be introduced by the `encodeURI` function is replaced with the UTF-16 encoding of the code point that it represents. Escape sequences that could not have been introduced by `encodeURI` are not replaced.

It is the %decodeURI% intrinsic object.

It performs the following steps when called:

1.  Let _uriString_ be ? [ToString](#sec-tostring)(_encodedURI_).
2.  Let _preserveEscapeSet_ be ";/?:@&=+$,#".
3.  Return ? [Decode](#sec-decode)(_uriString_, _preserveEscapeSet_).


# 19.2.6.2 decodeURIComponent ( _encodedURIComponent_ )

This function computes a new version of a URI in which each escape sequence and UTF-8 encoding of the sort that might be introduced by the `encodeURIComponent` function is replaced with the UTF-16 encoding of the code point that it represents.

It is the %decodeURIComponent% intrinsic object.

It performs the following steps when called:

1.  Let _componentString_ be ? [ToString](#sec-tostring)(_encodedURIComponent_).
2.  Let _preserveEscapeSet_ be the empty String.
3.  Return ? [Decode](#sec-decode)(_componentString_, _preserveEscapeSet_).


# 19.2.6.3 encodeURI ( _uri_ )

This function computes a new version of a UTF-16 encoded ([6.1.4](#sec-ecmascript-language-types-string-type)) URI in which each instance of certain code points is replaced by one, two, three, or four escape sequences representing the UTF-8 encoding of the code point.

It is the %encodeURI% intrinsic object.

It performs the following steps when called:

1.  Let _uriString_ be ? [ToString](#sec-tostring)(_uri_).
2.  Let _extraUnescaped_ be ";/?:@&=+$,#".
3.  Return ? [Encode](#sec-encode)(_uriString_, _extraUnescaped_).


# 19.2.6.4 encodeURIComponent ( _uriComponent_ )

This function computes a new version of a UTF-16 encoded ([6.1.4](#sec-ecmascript-language-types-string-type)) URI in which each instance of certain code points is replaced by one, two, three, or four escape sequences representing the UTF-8 encoding of the code point.

It is the %encodeURIComponent% intrinsic object.

It performs the following steps when called:

1.  Let _componentString_ be ? [ToString](#sec-tostring)(_uriComponent_).
2.  Let _extraUnescaped_ be the empty String.
3.  Return ? [Encode](#sec-encode)(_componentString_, _extraUnescaped_).


# 19.2.6.5 Encode ( _string_, _extraUnescaped_ )

The abstract operation Encode takes arguments _string_ (a String) and _extraUnescaped_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It performs URI encoding and escaping, interpreting _string_ as a sequence of UTF-16 encoded code points as described in [6.1.4](#sec-ecmascript-language-types-string-type). If a character is identified as unreserved in RFC 2396 or appears in _extraUnescaped_, it is not escaped. It performs the following steps when called:

1.  Let _len_ be the length of _string_.
2.  Let _R_ be the empty String.
3.  Let _alwaysUnescaped_ be the [string-concatenation](#string-concatenation) of [the ASCII word characters](#ASCII-word-characters) and "-.!~\*'()".
4.  Let _unescapedSet_ be the [string-concatenation](#string-concatenation) of _alwaysUnescaped_ and _extraUnescaped_.
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _C_ be the code unit at index _k_ within _string_.
    2.  If _unescapedSet_ contains _C_, then
        1.  Set _k_ to _k_ + 1.
        2.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _C_.
    3.  Else,
        1.  Let _cp_ be [CodePointAt](#sec-codepointat)(_string_, _k_).
        2.  If _cp_._\[\[IsUnpairedSurrogate\]\]_ is true, throw a URIError exception.
        3.  Set _k_ to _k_ + _cp_._\[\[CodeUnitCount\]\]_.
        4.  Let _Octets_ be the [List](#sec-list-and-record-specification-type) of octets resulting by applying the UTF-8 transformation to _cp_._\[\[CodePoint\]\]_.
        5.  For each element _octet_ of _Octets_, do
            1.  Let _hex_ be the String representation of _octet_, formatted as an uppercase hexadecimal number.
            2.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_, "%", and [StringPad](#sec-stringpad)(_hex_, 2, "0", start).
7.  Return _R_.

Note

Because percent-encoding is used to represent individual octets, a single code point may be expressed as multiple consecutive escape sequences (one for each of its 8-bit UTF-8 code units).


# 19.2.6.6 Decode ( _string_, _preserveEscapeSet_ )

The abstract operation Decode takes arguments _string_ (a String) and _preserveEscapeSet_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It performs URI unescaping and decoding, preserving any escape sequences that correspond to Basic Latin characters in _preserveEscapeSet_. It performs the following steps when called:

1.  Let _len_ be the length of _string_.
2.  Let _R_ be the empty String.
3.  Let _k_ be 0.
4.  Repeat, while _k_ < _len_,
    1.  Let _C_ be the code unit at index _k_ within _string_.
    2.  Let _S_ be _C_.
    3.  If _C_ is the code unit 0x0025 (PERCENT SIGN), then
        1.  If _k_ + 3 > _len_, throw a URIError exception.
        2.  Let _escape_ be the [substring](#substring) of _string_ from _k_ to _k_ + 3.
        3.  Let _B_ be [ParseHexOctet](#sec-parsehexoctet)(_string_, _k_ + 1).
        4.  If _B_ is not an [integer](#integer), throw a URIError exception.
        5.  Set _k_ to _k_ + 2.
        6.  Let _n_ be the number of leading 1 bits in _B_.
        7.  If _n_ = 0, then
            1.  Let _asciiChar_ be the code unit whose numeric value is _B_.
            2.  If _preserveEscapeSet_ contains _asciiChar_, set _S_ to _escape_; otherwise set _S_ to _asciiChar_.
        8.  Else,
            1.  If _n_ = 1 or _n_ > 4, throw a URIError exception.
            2.  Let _Octets_ be « _B_ ».
            3.  Let _j_ be 1.
            4.  Repeat, while _j_ < _n_,
                1.  Set _k_ to _k_ + 1.
                2.  If _k_ + 3 > _len_, throw a URIError exception.
                3.  If the code unit at index _k_ within _string_ is not the code unit 0x0025 (PERCENT SIGN), throw a URIError exception.
                4.  Let _continuationByte_ be [ParseHexOctet](#sec-parsehexoctet)(_string_, _k_ + 1).
                5.  If _continuationByte_ is not an [integer](#integer), throw a URIError exception.
                6.  Append _continuationByte_ to _Octets_.
                7.  Set _k_ to _k_ + 2.
                8.  Set _j_ to _j_ + 1.
            5.  [Assert](#assert): The length of _Octets_ is _n_.
            6.  If _Octets_ does not contain a valid UTF-8 encoding of a Unicode code point, throw a URIError exception.
            7.  Let _V_ be the code point obtained by applying the UTF-8 transformation to _Octets_, that is, from a [List](#sec-list-and-record-specification-type) of octets into a 21-bit value.
            8.  Set _S_ to [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)(_V_).
    4.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _S_.
    5.  Set _k_ to _k_ + 1.
5.  Return _R_.

Note

RFC 3629 prohibits the decoding of invalid UTF-8 octet sequences. For example, the invalid sequence 0xC0 0x80 must not decode into the code unit 0x0000. Implementations of the Decode algorithm are required to throw a URIError when encountering such invalid sequences.


# 19.2.6.7 ParseHexOctet ( _string_, _position_ )

The abstract operation ParseHexOctet takes arguments _string_ (a String) and _position_ (a non-negative [integer](#integer)) and returns either a non-negative [integer](#integer) or a non-empty [List](#sec-list-and-record-specification-type) of SyntaxError objects. It parses a sequence of two hexadecimal characters at the specified _position_ in _string_ into an unsigned 8-bit [integer](#integer). It performs the following steps when called:

1.  Let _len_ be the length of _string_.
2.  [Assert](#assert): _position_ + 2 ≤ _len_.
3.  Let _hexDigits_ be the [substring](#substring) of _string_ from _position_ to _position_ + 2.
4.  Let _parseResult_ be [ParseText](#sec-parsetext)(_hexDigits_, [HexDigits](#prod-HexDigits)\[~Sep\]).
5.  If _parseResult_ is not a [Parse Node](#sec-syntactic-grammar), return _parseResult_.
6.  Let _n_ be the MV of _parseResult_.
7.  [Assert](#assert): _n_ is in the [inclusive interval](#inclusive-interval) from 0 to 255.
8.  Return _n_.


# 19.3 Constructor Properties of the Global Object


# 19.3.1 AggregateError ( . . . )

See [20.5.7.1](#sec-aggregate-error-constructor).


# 19.3.2 Array ( . . . )

See [23.1.1](#sec-array-constructor).


# 19.3.3 ArrayBuffer ( . . . )

See [25.1.4](#sec-arraybuffer-constructor).


# 19.3.4 BigInt ( . . . )

See [21.2.1](#sec-bigint-constructor).


# 19.3.5 BigInt64Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.6 BigUint64Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.7 Boolean ( . . . )

See [20.3.1](#sec-boolean-constructor).


# 19.3.8 DataView ( . . . )

See [25.3.2](#sec-dataview-constructor).


# 19.3.9 Date ( . . . )

See [21.4.2](#sec-date-constructor).


# 19.3.10 Error ( . . . )

See [20.5.1](#sec-error-constructor).


# 19.3.11 EvalError ( . . . )

See [20.5.5.1](#sec-native-error-types-used-in-this-standard-evalerror).


# 19.3.12 FinalizationRegistry ( . . . )

See [26.2.1](#sec-finalization-registry-constructor).


# 19.3.13 Float16Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.14 Float32Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.15 Float64Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.16 Function ( . . . )

See [20.2.1](#sec-function-constructor).


# 19.3.17 Int8Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.18 Int16Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.19 Int32Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.20 Iterator ( . . . )

See [27.1.3.1](#sec-iterator-constructor).


# 19.3.21 Map ( . . . )

See [24.1.1](#sec-map-constructor).


# 19.3.22 Number ( . . . )

See [21.1.1](#sec-number-constructor).


# 19.3.23 Object ( . . . )

See [20.1.1](#sec-object-constructor).


# 19.3.24 Promise ( . . . )

See [27.2.3](#sec-promise-constructor).


# 19.3.25 Proxy ( . . . )

See [28.2.1](#sec-proxy-constructor).


# 19.3.26 RangeError ( . . . )

See [20.5.5.2](#sec-native-error-types-used-in-this-standard-rangeerror).


# 19.3.27 ReferenceError ( . . . )

See [20.5.5.3](#sec-native-error-types-used-in-this-standard-referenceerror).


# 19.3.28 RegExp ( . . . )

See [22.2.4](#sec-regexp-constructor).


# 19.3.29 Set ( . . . )

See [24.2.2](#sec-set-constructor).


# 19.3.30 SharedArrayBuffer ( . . . )

See [25.2.3](#sec-sharedarraybuffer-constructor).


# 19.3.31 String ( . . . )

See [22.1.1](#sec-string-constructor).


# 19.3.32 Symbol ( . . . )

See [20.4.1](#sec-symbol-constructor).


# 19.3.33 SyntaxError ( . . . )

See [20.5.5.4](#sec-native-error-types-used-in-this-standard-syntaxerror).


# 19.3.34 TypeError ( . . . )

See [20.5.5.5](#sec-native-error-types-used-in-this-standard-typeerror).


# 19.3.35 Uint8Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.36 Uint8ClampedArray ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.37 Uint16Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.38 Uint32Array ( . . . )

See [23.2.5](#sec-typedarray-constructors).


# 19.3.39 URIError ( . . . )

See [20.5.5.6](#sec-native-error-types-used-in-this-standard-urierror).


# 19.3.40 WeakMap ( . . . )

See [24.3.1](#sec-weakmap-constructor).


# 19.3.41 WeakRef ( . . . )

See [26.1.1](#sec-weak-ref-constructor).


# 19.3.42 WeakSet ( . . . )

See [24.4](#sec-weakset-objects).


# 19.4 Other Properties of the Global Object


# 19.4.1 Atomics

See [25.4](#sec-atomics-object).


# 19.4.2 JSON

See [25.5](#sec-json-object).


# 19.4.3 Math

See [21.3](#sec-math-object).


# 19.4.4 Reflect

See [28.1](#sec-reflect-object).


# 20 Fundamental Objects


# 20.1 Object Objects


# 20.1.1 The Object Constructor

The Object [constructor](#constructor):

-   is %Object%.
-   is the initial value of the "Object" property of the [global object](#sec-global-object).
-   creates a new [ordinary object](#ordinary-object) when called as a [constructor](#constructor).
-   performs a type conversion when called as a function rather than as a [constructor](#constructor).
-   may be used as the value of an `extends` clause of a class definition.


# 20.1.1.1 Object ( _value_ )

This function performs the following steps when called:

1.  If NewTarget is neither undefined nor the [active function object](#active-function-object), then
    1.  Return ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Object.prototype%").
2.  If _value_ is either undefined or null, return [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
3.  Return ! [ToObject](#sec-toobject)(_value_).


# 20.1.2 Properties of the Object Constructor

The Object [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following additional properties:


# 20.1.2.1 Object.assign ( _target_, ..._sources_ )

This function copies the values of all of the enumerable own properties from one or more source objects to a _target_ object.

It performs the following steps when called:

1.  Let _to_ be ? [ToObject](#sec-toobject)(_target_).
2.  If only one argument was passed, return _to_.
3.  For each element _nextSource_ of _sources_, do
    1.  If _nextSource_ is neither undefined nor null, then
        1.  Let _from_ be ! [ToObject](#sec-toobject)(_nextSource_).
        2.  Let _keys_ be ? _from_._\[\[OwnPropertyKeys\]\]_().
        3.  For each element _nextKey_ of _keys_, do
            1.  Let _desc_ be ? _from_._\[\[GetOwnProperty\]\]_(_nextKey_).
            2.  If _desc_ is not undefined and _desc_._\[\[Enumerable\]\]_ is true, then
                1.  Let _propValue_ be ? [Get](#sec-get-o-p)(_from_, _nextKey_).
                2.  Perform ? [Set](#sec-set-o-p-v-throw)(_to_, _nextKey_, _propValue_, true).
4.  Return _to_.

The "length" property of this function is 2<sub>𝔽</sub>.


# 20.1.2.2 Object.create ( _O_, _Properties_ )

This function creates a new object with a specified prototype.

It performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type) and _O_ is not null, throw a TypeError exception.
2.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(_O_).
3.  If _Properties_ is not undefined, then
    1.  Return ? [ObjectDefineProperties](#sec-objectdefineproperties)(_obj_, _Properties_).
4.  Return _obj_.


# 20.1.2.3 Object.defineProperties ( _O_, _Properties_ )

This function adds own properties and/or updates the attributes of existing own properties of an object.

It performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Return ? [ObjectDefineProperties](#sec-objectdefineproperties)(_O_, _Properties_).


# 20.1.2.3.1 ObjectDefineProperties ( _O_, _Properties_ )

The abstract operation ObjectDefineProperties takes arguments _O_ (an Object) and _Properties_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _props_ be ? [ToObject](#sec-toobject)(_Properties_).
2.  Let _keys_ be ? _props_._\[\[OwnPropertyKeys\]\]_().
3.  Let _descriptors_ be a new empty [List](#sec-list-and-record-specification-type).
4.  For each element _nextKey_ of _keys_, do
    1.  Let _propDesc_ be ? _props_._\[\[GetOwnProperty\]\]_(_nextKey_).
    2.  If _propDesc_ is not undefined and _propDesc_._\[\[Enumerable\]\]_ is true, then
        1.  Let _descObj_ be ? [Get](#sec-get-o-p)(_props_, _nextKey_).
        2.  Let _desc_ be ? [ToPropertyDescriptor](#sec-topropertydescriptor)(_descObj_).
        3.  Append the [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_: _nextKey_, _\[\[Descriptor\]\]_: _desc_ } to _descriptors_.
5.  For each element _property_ of _descriptors_, do
    1.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, _property_._\[\[Key\]\]_, _property_._\[\[Descriptor\]\]_).
6.  Return _O_.


# 20.1.2.4 Object.defineProperty ( _O_, _P_, _Attributes_ )

This function adds an own property and/or updates the attributes of an existing own property of an object.

It performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_P_).
3.  Let _desc_ be ? [ToPropertyDescriptor](#sec-topropertydescriptor)(_Attributes_).
4.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, _key_, _desc_).
5.  Return _O_.


# 20.1.2.5 Object.entries ( _O_ )

This function performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Let _entryList_ be ? [EnumerableOwnProperties](#sec-enumerableownproperties)(_obj_, key+value).
3.  Return [CreateArrayFromList](#sec-createarrayfromlist)(_entryList_).


# 20.1.2.6 Object.freeze ( _O_ )

This function performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), return _O_.
2.  Let _status_ be ? [SetIntegrityLevel](#sec-setintegritylevel)(_O_, frozen).
3.  If _status_ is false, throw a TypeError exception.
4.  Return _O_.


# 20.1.2.7 Object.fromEntries ( _iterable_ )

This function performs the following steps when called:

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_iterable_).
2.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
3.  [Assert](#assert): _obj_ is an extensible [ordinary object](#ordinary-object) with no own properties.
4.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_key_, _value_) that captures _obj_ and performs the following steps when called:
    1.  Let _propertyKey_ be ? [ToPropertyKey](#sec-topropertykey)(_key_).
    2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, _propertyKey_, _value_).
    3.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
5.  Let _adder_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_closure_, 2, "", « »).
6.  Return ? [AddEntriesFromIterable](#sec-add-entries-from-iterable)(_obj_, _iterable_, _adder_).

Note

The function created for _adder_ is never directly accessible to ECMAScript code.


# 20.1.2.8 Object.getOwnPropertyDescriptor ( _O_, _P_ )

This function performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_P_).
3.  Let _desc_ be ? _obj_._\[\[GetOwnProperty\]\]_(_key_).
4.  Return [FromPropertyDescriptor](#sec-frompropertydescriptor)(_desc_).


# 20.1.2.9 Object.getOwnPropertyDescriptors ( _O_ )

This function performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Let _ownKeys_ be ? _obj_._\[\[OwnPropertyKeys\]\]_().
3.  Let _descriptors_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
4.  For each element _key_ of _ownKeys_, do
    1.  Let _desc_ be ? _obj_._\[\[GetOwnProperty\]\]_(_key_).
    2.  Let _descriptor_ be [FromPropertyDescriptor](#sec-frompropertydescriptor)(_desc_).
    3.  If _descriptor_ is not undefined, perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_descriptors_, _key_, _descriptor_).
5.  Return _descriptors_.


# 20.1.2.10 Object.getOwnPropertyNames ( _O_ )

This function performs the following steps when called:

1.  Return [CreateArrayFromList](#sec-createarrayfromlist)(? [GetOwnPropertyKeys](#sec-getownpropertykeys)(_O_, string)).


# 20.1.2.11 Object.getOwnPropertySymbols ( _O_ )

This function performs the following steps when called:

1.  Return [CreateArrayFromList](#sec-createarrayfromlist)(? [GetOwnPropertyKeys](#sec-getownpropertykeys)(_O_, symbol)).


# 20.1.2.11.1 GetOwnPropertyKeys ( _O_, _type_ )

The abstract operation GetOwnPropertyKeys takes arguments _O_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _type_ (string or symbol) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [property keys](#property-key) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Let _keys_ be ? _obj_._\[\[OwnPropertyKeys\]\]_().
3.  Let _nameList_ be a new empty [List](#sec-list-and-record-specification-type).
4.  For each element _nextKey_ of _keys_, do
    1.  If _nextKey_ [is a Symbol](#sec-ecmascript-language-types-symbol-type) and _type_ is symbol, or if _nextKey_ [is a String](#sec-ecmascript-language-types-string-type) and _type_ is string, then
        1.  Append _nextKey_ to _nameList_.
5.  Return _nameList_.


# 20.1.2.12 Object.getPrototypeOf ( _O_ )

This function performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Return ? _obj_._\[\[GetPrototypeOf\]\]_().


# 20.1.2.13 Object.groupBy ( _items_, _callback_ )

Note

_callback_ should be a function that accepts two arguments. `groupBy` calls _callback_ once for each element in _items_, in ascending order, and constructs a new object. Each value returned by _callback_ is coerced to a [property key](#property-key). For each such [property key](#property-key), the result object has a property whose key is that [property key](#property-key) and whose value is an array containing all the elements for which the _callback_ return value coerced to that key.

_callback_ is called with two arguments: the value of the element and the index of the element.

The return value of `groupBy` is an object that does not inherit from [%Object.prototype%](#sec-properties-of-the-object-prototype-object).

This function performs the following steps when called:

1.  Let _groups_ be ? [GroupBy](#sec-groupby)(_items_, _callback_, property).
2.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(null).
3.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Elements\]\]_ } _g_ of _groups_, do
    1.  Let _elements_ be [CreateArrayFromList](#sec-createarrayfromlist)(_g_._\[\[Elements\]\]_).
    2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, _g_._\[\[Key\]\]_, _elements_).
4.  Return _obj_.


# 20.1.2.14 Object.hasOwn ( _O_, _P_ )

This function performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_P_).
3.  Return ? [HasOwnProperty](#sec-hasownproperty)(_obj_, _key_).


# 20.1.2.15 Object.is ( _value1_, _value2_ )

This function performs the following steps when called:

1.  Return [SameValue](#sec-samevalue)(_value1_, _value2_).


# 20.1.2.16 Object.isExtensible ( _O_ )

This function performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), return false.
2.  Return ? [IsExtensible](#sec-isextensible-o)(_O_).


# 20.1.2.17 Object.isFrozen ( _O_ )

This function performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), return true.
2.  Return ? [TestIntegrityLevel](#sec-testintegritylevel)(_O_, frozen).


# 20.1.2.18 Object.isSealed ( _O_ )

This function performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), return true.
2.  Return ? [TestIntegrityLevel](#sec-testintegritylevel)(_O_, sealed).


# 20.1.2.19 Object.keys ( _O_ )

This function performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Let _keyList_ be ? [EnumerableOwnProperties](#sec-enumerableownproperties)(_obj_, key).
3.  Return [CreateArrayFromList](#sec-createarrayfromlist)(_keyList_).


# 20.1.2.20 Object.preventExtensions ( _O_ )

This function performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), return _O_.
2.  Let _status_ be ? _O_._\[\[PreventExtensions\]\]_().
3.  If _status_ is false, throw a TypeError exception.
4.  Return _O_.


# 20.1.2.21 Object.prototype

The initial value of `Object.prototype` is the [Object prototype object](#sec-properties-of-the-object-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.1.2.22 Object.seal ( _O_ )

This function performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), return _O_.
2.  Let _status_ be ? [SetIntegrityLevel](#sec-setintegritylevel)(_O_, sealed).
3.  If _status_ is false, throw a TypeError exception.
4.  Return _O_.


# 20.1.2.23 Object.setPrototypeOf ( _O_, _proto_ )

This function performs the following steps when called:

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
2.  If _proto_ [is not an Object](#sec-object-type) and _proto_ is not null, throw a TypeError exception.
3.  If _O_ [is not an Object](#sec-object-type), return _O_.
4.  Let _status_ be ? _O_._\[\[SetPrototypeOf\]\]_(_proto_).
5.  If _status_ is false, throw a TypeError exception.
6.  Return _O_.


# 20.1.2.24 Object.values ( _O_ )

This function performs the following steps when called:

1.  Let _obj_ be ? [ToObject](#sec-toobject)(_O_).
2.  Let _valueList_ be ? [EnumerableOwnProperties](#sec-enumerableownproperties)(_obj_, value).
3.  Return [CreateArrayFromList](#sec-createarrayfromlist)(_valueList_).


# 20.1.3 Properties of the Object Prototype Object

The Object prototype object:

-   is %Object.prototype%.
-   has an _\[\[Extensible\]\]_ internal slot whose value is true.
-   has the internal methods defined for [ordinary objects](#ordinary-object), except for the _\[\[SetPrototypeOf\]\]_ method, which is as defined in [10.4.7.1](#sec-immutable-prototype-exotic-objects-setprototypeof-v). (Thus, it is an [immutable prototype exotic object](#immutable-prototype-exotic-object).)
-   has a _\[\[Prototype\]\]_ internal slot whose value is null.


# 20.1.3.1 Object.prototype.constructor

The initial value of `Object.prototype.constructor` is [%Object%](#sec-object-constructor).


# 20.1.3.2 Object.prototype.hasOwnProperty ( _V_ )

This method performs the following steps when called:

1.  Let _P_ be ? [ToPropertyKey](#sec-topropertykey)(_V_).
2.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
3.  Return ? [HasOwnProperty](#sec-hasownproperty)(_O_, _P_).

Note

The ordering of steps [1](#step-hasownproperty-topropertykey) and [2](#step-hasownproperty-toobject) is chosen to ensure that any exception that would have been thrown by step [1](#step-hasownproperty-topropertykey) in previous editions of this specification will continue to be thrown even if the this value is undefined or null.


# 20.1.3.3 Object.prototype.isPrototypeOf ( _V_ )

This method performs the following steps when called:

1.  If _V_ [is not an Object](#sec-object-type), return false.
2.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
3.  Repeat,
    1.  Set _V_ to ? _V_._\[\[GetPrototypeOf\]\]_().
    2.  If _V_ is null, return false.
    3.  If [SameValue](#sec-samevalue)(_O_, _V_) is true, return true.

Note

The ordering of steps [1](#step-isprototypeof-check-object) and [2](#step-isprototypeof-toobject) preserves the behaviour specified by previous editions of this specification for the case where _V_ is not an object and the this value is undefined or null.


# 20.1.3.4 Object.prototype.propertyIsEnumerable ( _V_ )

This method performs the following steps when called:

1.  Let _P_ be ? [ToPropertyKey](#sec-topropertykey)(_V_).
2.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
3.  Let _desc_ be ? _O_._\[\[GetOwnProperty\]\]_(_P_).
4.  If _desc_ is undefined, return false.
5.  Return _desc_._\[\[Enumerable\]\]_.

Note 1

This method does not consider objects in the prototype chain.

Note 2

The ordering of steps [1](#step-propertyisenumerable-topropertykey) and [2](#step-propertyisenumerable-toobject) is chosen to ensure that any exception that would have been thrown by step [1](#step-propertyisenumerable-topropertykey) in previous editions of this specification will continue to be thrown even if the this value is undefined or null.


# 20.1.3.5 Object.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Return ? [Invoke](#sec-invoke)(_O_, "toString").

The optional parameters to this method are not used but are intended to correspond to the parameter pattern used by ECMA-402 `toLocaleString` methods. Implementations that do not include ECMA-402 support must not use those parameter positions for other purposes.

Note 1

This method provides a generic `toLocaleString` implementation for objects that have no locale-sensitive `toString` behaviour. `Array`, `Number`, `Date`, and [%TypedArray%](#sec-%typedarray%-intrinsic-object) provide their own locale-sensitive `toLocaleString` methods.

Note 2

ECMA-402 intentionally does not provide an alternative to this default implementation.


# 20.1.3.6 Object.prototype.toString ( )

This method performs the following steps when called:

1.  If the this value is undefined, return "\[object Undefined\]".
2.  If the this value is null, return "\[object Null\]".
3.  Let _O_ be ! [ToObject](#sec-toobject)(this value).
4.  Let _isArray_ be ? [IsArray](#sec-isarray)(_O_).
5.  If _isArray_ is true, let _builtinTag_ be "Array".
6.  Else if _O_ has a _\[\[ParameterMap\]\]_ internal slot, let _builtinTag_ be "Arguments".
7.  Else if _O_ has a _\[\[Call\]\]_ internal method, let _builtinTag_ be "Function".
8.  Else if _O_ has an _\[\[ErrorData\]\]_ internal slot, let _builtinTag_ be "Error".
9.  Else if _O_ has a _\[\[BooleanData\]\]_ internal slot, let _builtinTag_ be "Boolean".
10.  Else if _O_ has a _\[\[NumberData\]\]_ internal slot, let _builtinTag_ be "Number".
11.  Else if _O_ has a _\[\[StringData\]\]_ internal slot, let _builtinTag_ be "String".
12.  Else if _O_ has a _\[\[DateValue\]\]_ internal slot, let _builtinTag_ be "Date".
13.  Else if _O_ has a _\[\[RegExpMatcher\]\]_ internal slot, let _builtinTag_ be "RegExp".
14.  Else, let _builtinTag_ be "Object".
15.  Let _tag_ be ? [Get](#sec-get-o-p)(_O_, [%Symbol.toStringTag%](#sec-well-known-symbols)).
16.  If _tag_ [is not a String](#sec-ecmascript-language-types-string-type), set _tag_ to _builtinTag_.
17.  Return the [string-concatenation](#string-concatenation) of "\[object ", _tag_, and "\]".

Note

Historically, this method was occasionally used to access the String value of the _\[\[Class\]\]_ internal slot that was used in previous editions of this specification as a nominal type tag for various built-in objects. The above definition of `toString` preserves compatibility for legacy code that uses `toString` as a test for those specific kinds of built-in objects. It does not provide a reliable type testing mechanism for other kinds of built-in or program defined objects. In addition, programs can use [%Symbol.toStringTag%](#sec-well-known-symbols) in ways that will invalidate the reliability of such legacy type tests.


# 20.1.3.7 Object.prototype.valueOf ( )

This method performs the following steps when called:

1.  Return ? [ToObject](#sec-toobject)(this value).

[Normative Optional](#sec-conformance), [Legacy](#sec-conformance)


# 20.1.3.8 Object.prototype.\_\_proto\_\_

`Object.prototype.__proto__` is an [accessor property](#sec-object-type) with attributes { _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }. The _\[\[Get\]\]_ and _\[\[Set\]\]_ attributes are defined as follows:


# 20.1.3.8.1 get Object.prototype.\_\_proto\_\_

The value of the _\[\[Get\]\]_ attribute is a built-in function that requires no arguments. It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Return ? _O_._\[\[GetPrototypeOf\]\]_().


# 20.1.3.8.2 set Object.prototype.\_\_proto\_\_

The value of the _\[\[Set\]\]_ attribute is a built-in function that takes an argument _proto_. It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  If _proto_ [is not an Object](#sec-object-type) and _proto_ is not null, return undefined.
4.  If _O_ [is not an Object](#sec-object-type), return undefined.
5.  Let _status_ be ? _O_._\[\[SetPrototypeOf\]\]_(_proto_).
6.  If _status_ is false, throw a TypeError exception.
7.  Return undefined.

[Normative Optional](#sec-conformance), [Legacy](#sec-conformance)


# 20.1.3.9 Legacy Object.prototype Accessor Methods


# 20.1.3.9.1 Object.prototype.\_\_defineGetter\_\_ ( _P_, _getter_ )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  If [IsCallable](#sec-iscallable)(_getter_) is false, throw a TypeError exception.
3.  Let _desc_ be PropertyDescriptor { _\[\[Get\]\]_: _getter_, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: true }.
4.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_P_).
5.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, _key_, _desc_).
6.  Return undefined.


# 20.1.3.9.2 Object.prototype.\_\_defineSetter\_\_ ( _P_, _setter_ )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  If [IsCallable](#sec-iscallable)(_setter_) is false, throw a TypeError exception.
3.  Let _desc_ be PropertyDescriptor { _\[\[Set\]\]_: _setter_, _\[\[Enumerable\]\]_: true, _\[\[Configurable\]\]_: true }.
4.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_P_).
5.  Perform ? [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, _key_, _desc_).
6.  Return undefined.


# 20.1.3.9.3 Object.prototype.\_\_lookupGetter\_\_ ( _P_ )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_P_).
3.  Repeat,
    1.  Let _desc_ be ? _O_._\[\[GetOwnProperty\]\]_(_key_).
    2.  If _desc_ is not undefined, then
        1.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_desc_) is true, return _desc_._\[\[Get\]\]_.
        2.  Return undefined.
    3.  Set _O_ to ? _O_._\[\[GetPrototypeOf\]\]_().
    4.  If _O_ is null, return undefined.


# 20.1.3.9.4 Object.prototype.\_\_lookupSetter\_\_ ( _P_ )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_P_).
3.  Repeat,
    1.  Let _desc_ be ? _O_._\[\[GetOwnProperty\]\]_(_key_).
    2.  If _desc_ is not undefined, then
        1.  If [IsAccessorDescriptor](#sec-isaccessordescriptor)(_desc_) is true, return _desc_._\[\[Set\]\]_.
        2.  Return undefined.
    3.  Set _O_ to ? _O_._\[\[GetPrototypeOf\]\]_().
    4.  If _O_ is null, return undefined.


# 20.1.4 Properties of Object Instances

Object instances have no special properties beyond those inherited from the [Object prototype object](#sec-properties-of-the-object-prototype-object).


# 20.2 Function Objects


# 20.2.1 The Function Constructor

The Function [constructor](#constructor):

-   is %Function%.
-   is the initial value of the "Function" property of the [global object](#sec-global-object).
-   creates and initializes a new [function object](#function-object) when called as a function rather than as a [constructor](#constructor). Thus the function call `Function(…)` is equivalent to the object creation expression `new Function(…)` with the same arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Function behaviour must include a `super` call to the Function [constructor](#constructor) to create and initialize a subclass instance with the internal slots necessary for built-in function behaviour. All ECMAScript syntactic forms for defining [function objects](#function-object) create instances of Function. There is no syntactic means to create instances of Function subclasses except for the built-in GeneratorFunction, AsyncFunction, and AsyncGeneratorFunction subclasses.


# 20.2.1.1 Function ( ..._parameterArgs_, _bodyArg_ )

The last argument (if any) specifies the body (executable code) of a function; any preceding arguments specify formal parameters.

This function performs the following steps when called:

1.  Let _C_ be the [active function object](#active-function-object).
2.  If _bodyArg_ is not present, set _bodyArg_ to the empty String.
3.  Return ? [CreateDynamicFunction](#sec-createdynamicfunction)(_C_, NewTarget, normal, _parameterArgs_, _bodyArg_).

Note

It is permissible but not necessary to have one argument for each formal parameter to be specified. For example, all three of the following expressions produce the same result:

```
new Function("a", "b", "c", "return a+b+c")
new Function("a, b, c", "return a+b+c")
new Function("a,b", "c", "return a+b+c")
```


# 20.2.1.1.1 CreateDynamicFunction ( _constructor_, _newTarget_, _kind_, _parameterArgs_, _bodyArg_ )

The abstract operation CreateDynamicFunction takes arguments _constructor_ (a [constructor](#constructor)), _newTarget_ (a [constructor](#constructor) or undefined), _kind_ (normal, generator, async, or async-generator), _parameterArgs_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)), and _bodyArg_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an ECMAScript [function object](#function-object) or a [throw completion](#sec-completion-record-specification-type). _constructor_ is the [constructor](#constructor) function that is performing this action. _newTarget_ is the [constructor](#constructor) that `new` was initially applied to. _parameterArgs_ and _bodyArg_ reflect the argument values that were passed to _constructor_. It performs the following steps when called:

1.  If _newTarget_ is undefined, set _newTarget_ to _constructor_.
2.  If _kind_ is normal, then
    1.  Let _prefix_ be "function".
    2.  Let _exprSym_ be the grammar symbol [FunctionExpression](#prod-FunctionExpression).
    3.  Let _bodySym_ be the grammar symbol [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\].
    4.  Let _parameterSym_ be the grammar symbol [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\].
    5.  Let _fallbackProto_ be "%Function.prototype%".
3.  Else if _kind_ is generator, then
    1.  Let _prefix_ be "function\*".
    2.  Let _exprSym_ be the grammar symbol [GeneratorExpression](#prod-GeneratorExpression).
    3.  Let _bodySym_ be the grammar symbol [GeneratorBody](#prod-GeneratorBody).
    4.  Let _parameterSym_ be the grammar symbol [FormalParameters](#prod-FormalParameters)\[+Yield, ~Await\].
    5.  Let _fallbackProto_ be "%GeneratorFunction.prototype%".
4.  Else if _kind_ is async, then
    1.  Let _prefix_ be "async function".
    2.  Let _exprSym_ be the grammar symbol [AsyncFunctionExpression](#prod-AsyncFunctionExpression).
    3.  Let _bodySym_ be the grammar symbol [AsyncFunctionBody](#prod-AsyncFunctionBody).
    4.  Let _parameterSym_ be the grammar symbol [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\].
    5.  Let _fallbackProto_ be "%AsyncFunction.prototype%".
5.  Else,
    1.  [Assert](#assert): _kind_ is async-generator.
    2.  Let _prefix_ be "async function\*".
    3.  Let _exprSym_ be the grammar symbol [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression).
    4.  Let _bodySym_ be the grammar symbol [AsyncGeneratorBody](#prod-AsyncGeneratorBody).
    5.  Let _parameterSym_ be the grammar symbol [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\].
    6.  Let _fallbackProto_ be "%AsyncGeneratorFunction.prototype%".
6.  Let _argCount_ be the number of elements in _parameterArgs_.
7.  Let _parameterStrings_ be a new empty [List](#sec-list-and-record-specification-type).
8.  For each element _arg_ of _parameterArgs_, do
    1.  Append ? [ToString](#sec-tostring)(_arg_) to _parameterStrings_.
9.  Let _bodyString_ be ? [ToString](#sec-tostring)(_bodyArg_).
10.  Let _currentRealm_ be [the current Realm Record](#current-realm).
11.  Perform ? [HostEnsureCanCompileStrings](#sec-hostensurecancompilestrings)(_currentRealm_, _parameterStrings_, _bodyString_, false).
12.  Let _P_ be the empty String.
13.  If _argCount_ > 0, then
     1.  Set _P_ to _parameterStrings_\[0\].
     2.  Let _k_ be 1.
     3.  Repeat, while _k_ < _argCount_,
         1.  Let _nextArgString_ be _parameterStrings_\[_k_\].
         2.  Set _P_ to the [string-concatenation](#string-concatenation) of _P_, "," (a comma), and _nextArgString_.
         3.  Set _k_ to _k_ + 1.
14.  Let _bodyParseString_ be the [string-concatenation](#string-concatenation) of 0x000A (LINE FEED), _bodyString_, and 0x000A (LINE FEED).
15.  Let _sourceString_ be the [string-concatenation](#string-concatenation) of _prefix_, " anonymous(", _P_, 0x000A (LINE FEED), ") {", _bodyParseString_, and "}".
16.  Let _sourceText_ be [StringToCodePoints](#sec-stringtocodepoints)(_sourceString_).
17.  Let _parameters_ be [ParseText](#sec-parsetext)(_P_, _parameterSym_).
18.  If _parameters_ is a [List](#sec-list-and-record-specification-type) of errors, throw a SyntaxError exception.
19.  Let _body_ be [ParseText](#sec-parsetext)(_bodyParseString_, _bodySym_).
20.  If _body_ is a [List](#sec-list-and-record-specification-type) of errors, throw a SyntaxError exception.
21.  NOTE: The parameters and body are parsed separately to ensure that each is valid alone. For example, `new Function("/*", "*/ ) {")` does not evaluate to a function.
22.  NOTE: If this step is reached, _sourceText_ must have the syntax of _exprSym_ (although the reverse implication does not hold). The purpose of the next two steps is to enforce any Early Error rules which apply to _exprSym_ directly.
23.  Let _expr_ be [ParseText](#sec-parsetext)(_sourceText_, _exprSym_).
24.  If _expr_ is a [List](#sec-list-and-record-specification-type) of errors, throw a SyntaxError exception.
25.  Let _proto_ be ? [GetPrototypeFromConstructor](#sec-getprototypefromconstructor)(_newTarget_, _fallbackProto_).
26.  Let _env_ be _currentRealm_._\[\[GlobalEnv\]\]_.
27.  Let _privateEnv_ be null.
28.  Let _F_ be [OrdinaryFunctionCreate](#sec-ordinaryfunctioncreate)(_proto_, _sourceText_, _parameters_, _body_, non-lexical-this, _env_, _privateEnv_).
29.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, "anonymous").
30.  If _kind_ is generator, then
     1.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%GeneratorPrototype%](#sec-properties-of-generator-prototype)).
     2.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
31.  Else if _kind_ is async-generator, then
     1.  Let _prototype_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype)).
     2.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_F_, "prototype", PropertyDescriptor { _\[\[Value\]\]_: _prototype_, _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
32.  Else if _kind_ is normal, then
     1.  Perform [MakeConstructor](#sec-makeconstructor)(_F_).
33.  NOTE: Functions whose _kind_ is async are not constructable and do not have a _\[\[Construct\]\]_ internal method or a "prototype" property.
34.  Return _F_.

Note

CreateDynamicFunction defines a "prototype" property on any function it creates whose _kind_ is not async to provide for the possibility that the function will be used as a [constructor](#constructor).


# 20.2.2 Properties of the Function Constructor

The Function [constructor](#constructor):

-   is itself a built-in [function object](#function-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has a "length" property whose value is 1<sub>𝔽</sub>.
-   has the following properties:


# 20.2.2.1 Function.prototype

The value of `Function.prototype` is the [Function prototype object](#sec-properties-of-the-function-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.2.3 Properties of the Function Prototype Object

The Function prototype object:

-   is %Function.prototype%.
-   is itself a built-in [function object](#function-object).
-   accepts any arguments and returns undefined when invoked.
-   does not have a _\[\[Construct\]\]_ internal method; it cannot be used as a [constructor](#constructor) with the `new` operator.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   does not have a "prototype" property.
-   has a "length" property whose value is +0<sub>𝔽</sub>.
-   has a "name" property whose value is the empty String.

Note

The Function prototype object is specified to be a [function object](#function-object) to ensure compatibility with ECMAScript code that was created prior to the ECMAScript 2015 specification.


# 20.2.3.1 Function.prototype.apply ( _thisArg_, _argArray_ )

This method performs the following steps when called:

1.  Let _func_ be the this value.
2.  If [IsCallable](#sec-iscallable)(_func_) is false, throw a TypeError exception.
3.  If _argArray_ is either undefined or null, then
    1.  Perform [PrepareForTailCall](#sec-preparefortailcall)().
    2.  Return ? [Call](#sec-call)(_func_, _thisArg_).
4.  Let _argList_ be ? [CreateListFromArrayLike](#sec-createlistfromarraylike)(_argArray_).
5.  Perform [PrepareForTailCall](#sec-preparefortailcall)().
6.  Return ? [Call](#sec-call)(_func_, _thisArg_, _argList_).

Note 1

The _thisArg_ value is passed without modification as the this value. This is a change from Edition 3, where an undefined or null _thisArg_ is replaced with the [global object](#sec-global-object) and [ToObject](#sec-toobject) is applied to all other values and that result is passed as the this value. Even though the _thisArg_ is passed without modification, [non-strict functions](#non-strict-function) still perform these transformations upon entry to the function.

Note 2

If _func_ is either an arrow function or a [bound function exotic object](#bound-function-exotic-object), then the _thisArg_ will be ignored by the function _\[\[Call\]\]_ in step [6](#step-function-proto-apply-call).


# 20.2.3.2 Function.prototype.bind ( _thisArg_, ..._args_ )

This method performs the following steps when called:

1.  Let _Target_ be the this value.
2.  If [IsCallable](#sec-iscallable)(_Target_) is false, throw a TypeError exception.
3.  Let _F_ be ? [BoundFunctionCreate](#sec-boundfunctioncreate)(_Target_, _thisArg_, _args_).
4.  Let _L_ be 0.
5.  Let _targetHasLength_ be ? [HasOwnProperty](#sec-hasownproperty)(_Target_, "length").
6.  If _targetHasLength_ is true, then
    1.  Let _targetLen_ be ? [Get](#sec-get-o-p)(_Target_, "length").
    2.  If _targetLen_ [is a Number](#sec-ecmascript-language-types-number-type), then
        1.  If _targetLen_ is +∞<sub>𝔽</sub>, then
            1.  Set _L_ to +∞.
        2.  Else if _targetLen_ is \-∞<sub>𝔽</sub>, then
            1.  Set _L_ to 0.
        3.  Else,
            1.  Let _targetLenAsInt_ be ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_targetLen_).
            2.  [Assert](#assert): _targetLenAsInt_ is [finite](#finite).
            3.  Let _argCount_ be the number of elements in _args_.
            4.  Set _L_ to [max](#eqn-max)(_targetLenAsInt_ - _argCount_, 0).
7.  Perform [SetFunctionLength](#sec-setfunctionlength)(_F_, _L_).
8.  Let _targetName_ be ? [Get](#sec-get-o-p)(_Target_, "name").
9.  If _targetName_ [is not a String](#sec-ecmascript-language-types-string-type), set _targetName_ to the empty String.
10.  Perform [SetFunctionName](#sec-setfunctionname)(_F_, _targetName_, "bound").
11.  Return _F_.

Note 1

[Function objects](#function-object) created using `Function.prototype.bind` are [exotic objects](#exotic-object). They also do not have a "prototype" property.

Note 2

If _Target_ is either an arrow function or a [bound function exotic object](#bound-function-exotic-object), then the _thisArg_ passed to this method will not be used by subsequent calls to _F_.


# 20.2.3.3 Function.prototype.call ( _thisArg_, ..._args_ )

This method performs the following steps when called:

1.  Let _func_ be the this value.
2.  If [IsCallable](#sec-iscallable)(_func_) is false, throw a TypeError exception.
3.  Perform [PrepareForTailCall](#sec-preparefortailcall)().
4.  Return ? [Call](#sec-call)(_func_, _thisArg_, _args_).

Note 1

The _thisArg_ value is passed without modification as the this value. This is a change from Edition 3, where an undefined or null _thisArg_ is replaced with the [global object](#sec-global-object) and [ToObject](#sec-toobject) is applied to all other values and that result is passed as the this value. Even though the _thisArg_ is passed without modification, [non-strict functions](#non-strict-function) still perform these transformations upon entry to the function.

Note 2

If _func_ is either an arrow function or a [bound function exotic object](#bound-function-exotic-object), then the _thisArg_ will be ignored by the function _\[\[Call\]\]_ in step [4](#step-function-proto-call-call).


# 20.2.3.4 Function.prototype.constructor

The initial value of `Function.prototype.constructor` is [%Function%](#sec-function-constructor).


# 20.2.3.5 Function.prototype.toString ( )

This method performs the following steps when called:

1.  Let _func_ be the this value.
2.  If _func_ [is an Object](#sec-object-type), _func_ has a _\[\[SourceText\]\]_ internal slot, _func_._\[\[SourceText\]\]_ is a sequence of Unicode code points, and [HostHasSourceTextAvailable](#sec-hosthassourcetextavailable)(_func_) is true, then
    1.  Return [CodePointsToString](#sec-codepointstostring)(_func_._\[\[SourceText\]\]_).
3.  If _func_ is a [built-in function object](#sec-built-in-function-objects), return an [implementation-defined](#implementation-defined) String source code representation of _func_. The representation must have the syntax of a [NativeFunction](#prod-NativeFunction). Additionally, if _func_ has an _\[\[InitialName\]\]_ internal slot and _func_._\[\[InitialName\]\]_ [is a String](#sec-ecmascript-language-types-string-type), the portion of the returned String that would be matched by [NativeFunctionAccessor](#prod-NativeFunctionAccessor)opt [PropertyName](#prod-PropertyName) must be _func_._\[\[InitialName\]\]_.
4.  If _func_ [is an Object](#sec-object-type) and [IsCallable](#sec-iscallable)(_func_) is true, return an [implementation-defined](#implementation-defined) String source code representation of _func_. The representation must have the syntax of a [NativeFunction](#prod-NativeFunction).
5.  Throw a TypeError exception.

[NativeFunction](#prod-NativeFunction) : function [NativeFunctionAccessor](#prod-NativeFunctionAccessor)opt [PropertyName](#prod-PropertyName)\[~Yield, ~Await\]opt ( [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\] ) { \[native code \] } [NativeFunctionAccessor](#prod-NativeFunctionAccessor) : get set


# 20.2.3.6 Function.prototype \[%Symbol.hasInstance% \] ( _V_ )

This method performs the following steps when called:

1.  Let _F_ be the this value.
2.  Return ? [OrdinaryHasInstance](#sec-ordinaryhasinstance)(_F_, _V_).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

This is the default implementation of `%Symbol.hasInstance%` that most functions inherit. `%Symbol.hasInstance%` is called by the `instanceof` operator to determine whether a value is an instance of a specific [constructor](#constructor). An expression such as

```
v instanceof F
```

evaluates as

```
F[%Symbol.hasInstance%](v)
```

A [constructor](#constructor) function can control which objects are recognized as its instances by `instanceof` by exposing a different `%Symbol.hasInstance%` method on the function.

This property is non-writable and non-configurable to prevent tampering that could be used to globally expose the target function of a bound function.

The value of the "name" property of this method is "\[Symbol.hasInstance\]".


# 20.2.4 Function Instances

Every Function instance is an ECMAScript [function object](#function-object) and has the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects). [Function objects](#function-object) created using the `Function.prototype.bind` method ([20.2.3.2](#sec-function.prototype.bind)) have the internal slots listed in [Table 29](#table-internal-slots-of-bound-function-exotic-objects).

Function instances have the following properties:


# 20.2.4.1 length

The value of the "length" property is an [integral Number](#integral-number) that indicates the typical number of arguments expected by the function. However, the language permits the function to be invoked with some other number of arguments. The behaviour of a function when invoked on a number of arguments other than the number specified by its "length" property depends on the function. This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 20.2.4.2 name

The value of the "name" property [is a String](#sec-ecmascript-language-types-string-type) that is descriptive of the function. The name has no semantic significance but is typically a variable or [property name](#property-name) that is used to refer to the function at its point of definition in [ECMAScript source text](#sec-source-text). This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.

Anonymous [function objects](#function-object) that do not have a contextual name associated with them by this specification use the empty String as the value of the "name" property.


# 20.2.4.3 prototype

Function instances that can be used as a [constructor](#constructor) have a "prototype" property. Whenever such a Function instance is created another [ordinary object](#ordinary-object) is also created and is the initial value of the function's "prototype" property. Unless otherwise specified, the value of the "prototype" property is used to initialize the _\[\[Prototype\]\]_ internal slot of the object created when that function is invoked as a [constructor](#constructor).

This property has the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

[Function objects](#function-object) created using `Function.prototype.bind`, or by evaluating a [MethodDefinition](#prod-MethodDefinition) (that is not a [GeneratorMethod](#prod-GeneratorMethod) or [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod)) or an [ArrowFunction](#prod-ArrowFunction) do not have a "prototype" property.


# 20.2.5 HostHasSourceTextAvailable ( _func_ )

The [host-defined](#host-defined) abstract operation HostHasSourceTextAvailable takes argument _func_ (a [function object](#function-object)) and returns a Boolean. It allows [host environments](#host-environment) to prevent the source text from being provided for _func_.

An implementation of HostHasSourceTextAvailable must conform to the following requirements:

-   It must be deterministic with respect to its parameters. Each time it is called with a specific _func_ as its argument, it must return the same result.

The default implementation of HostHasSourceTextAvailable is to return true.


# 20.3 Boolean Objects


# 20.3.1 The Boolean Constructor

The Boolean [constructor](#constructor):

-   is %Boolean%.
-   is the initial value of the "Boolean" property of the [global object](#sec-global-object).
-   creates and initializes a new Boolean object when called as a [constructor](#constructor).
-   performs a type conversion when called as a function rather than as a [constructor](#constructor).
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Boolean behaviour must include a `super` call to the Boolean [constructor](#constructor) to create and initialize the subclass instance with a _\[\[BooleanData\]\]_ internal slot.


# 20.3.1.1 Boolean ( _value_ )

This function performs the following steps when called:

1.  Let _b_ be [ToBoolean](#sec-toboolean)(_value_).
2.  If NewTarget is undefined, return _b_.
3.  Let _O_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Boolean.prototype%", « _\[\[BooleanData\]\]_ »).
4.  Set _O_._\[\[BooleanData\]\]_ to _b_.
5.  Return _O_.


# 20.3.2 Properties of the Boolean Constructor

The Boolean [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 20.3.2.1 Boolean.prototype

The initial value of `Boolean.prototype` is the [Boolean prototype object](#sec-properties-of-the-boolean-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.3.3 Properties of the Boolean Prototype Object

The Boolean prototype object:

-   is %Boolean.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is itself a Boolean object; it has a _\[\[BooleanData\]\]_ internal slot with the value false.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).


# 20.3.3.1 Boolean.prototype.constructor

The initial value of `Boolean.prototype.constructor` is [%Boolean%](#sec-boolean-constructor).


# 20.3.3.2 Boolean.prototype.toString ( )

This method performs the following steps when called:

1.  Let _b_ be ? [ThisBooleanValue](#sec-thisbooleanvalue)(this value).
2.  If _b_ is true, return "true"; else return "false".


# 20.3.3.3 Boolean.prototype.valueOf ( )

This method performs the following steps when called:

1.  Return ? [ThisBooleanValue](#sec-thisbooleanvalue)(this value).


# 20.3.3.3.1 ThisBooleanValue ( _value_ )

The abstract operation ThisBooleanValue takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _value_ [is a Boolean](#sec-ecmascript-language-types-boolean-type), return _value_.
2.  If _value_ [is an Object](#sec-object-type) and _value_ has a _\[\[BooleanData\]\]_ internal slot, then
    1.  Let _b_ be _value_._\[\[BooleanData\]\]_.
    2.  [Assert](#assert): _b_ [is a Boolean](#sec-ecmascript-language-types-boolean-type).
    3.  Return _b_.
3.  Throw a TypeError exception.


# 20.3.4 Properties of Boolean Instances

Boolean instances are [ordinary objects](#ordinary-object) that inherit properties from the [Boolean prototype object](#sec-properties-of-the-boolean-prototype-object). Boolean instances have a _\[\[BooleanData\]\]_ internal slot. The _\[\[BooleanData\]\]_ internal slot is the Boolean value represented by this Boolean object.


# 20.4 Symbol Objects


# 20.4.1 The Symbol Constructor

The Symbol [constructor](#constructor):

-   is %Symbol%.
-   is the initial value of the "Symbol" property of the [global object](#sec-global-object).
-   returns a new Symbol value when called as a function.
-   is not intended to be used with the `new` operator.
-   is not intended to be subclassed.
-   may be used as the value of an `extends` clause of a class definition but a `super` call to it will cause an exception.


# 20.4.1.1 Symbol ( \[_description_ \] )

This function performs the following steps when called:

1.  If NewTarget is not undefined, throw a TypeError exception.
2.  If _description_ is undefined, let _descString_ be undefined.
3.  Else, let _descString_ be ? [ToString](#sec-tostring)(_description_).
4.  Return a new Symbol whose _\[\[Description\]\]_ is _descString_.


# 20.4.2 Properties of the Symbol Constructor

The Symbol [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 20.4.2.1 Symbol.asyncIterator

The initial value of `Symbol.asyncIterator` is the well-known symbol [%Symbol.asyncIterator%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.2 Symbol.for ( _key_ )

This function performs the following steps when called:

1.  Let _stringKey_ be ? [ToString](#sec-tostring)(_key_).
2.  For each element _e_ of the [GlobalSymbolRegistry List](#sec-symbol.for), do
    1.  If _e_._\[\[Key\]\]_ is _stringKey_, return _e_._\[\[Symbol\]\]_.
3.  [Assert](#assert): The [GlobalSymbolRegistry List](#sec-symbol.for) does not currently contain an entry for _stringKey_.
4.  Let _newSymbol_ be a new Symbol whose _\[\[Description\]\]_ is _stringKey_.
5.  Append the GlobalSymbolRegistry [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_: _stringKey_, _\[\[Symbol\]\]_: _newSymbol_ } to the [GlobalSymbolRegistry List](#sec-symbol.for).
6.  Return _newSymbol_.

The GlobalSymbolRegistry List is an append-only [List](#sec-list-and-record-specification-type) that is globally available. It is shared by all [realms](#realm). Prior to the evaluation of any ECMAScript code, it is initialized as a new empty [List](#sec-list-and-record-specification-type). Elements of the GlobalSymbolRegistry List are [Records](#sec-list-and-record-specification-type) with the structure defined in [Table 61](#table-globalsymbolregistry-record-fields).

Table 61: GlobalSymbolRegistry [Record](#sec-list-and-record-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Usage</th></tr></thead><tbody><tr><td><var class="field">[[Key]]</var></td><td>a String</td><td>A string key used to globally identify a Symbol.</td></tr><tr><td><var class="field">[[Symbol]]</var></td><td>a Symbol</td><td>A symbol that can be retrieved from any <emu-xref href="#realm" id="_ref_9746"><a href="#realm">realm</a></emu-xref>.</td></tr></tbody></table>


# 20.4.2.3 Symbol.hasInstance

The initial value of `Symbol.hasInstance` is the well-known symbol [%Symbol.hasInstance%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.4 Symbol.isConcatSpreadable

The initial value of `Symbol.isConcatSpreadable` is the well-known symbol [%Symbol.isConcatSpreadable%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.5 Symbol.iterator

The initial value of `Symbol.iterator` is the well-known symbol [%Symbol.iterator%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.6 Symbol.keyFor ( _sym_ )

This function performs the following steps when called:

1.  If _sym_ [is not a Symbol](#sec-ecmascript-language-types-symbol-type), throw a TypeError exception.
2.  Return [KeyForSymbol](#sec-keyforsymbol)(_sym_).


# 20.4.2.7 Symbol.match

The initial value of `Symbol.match` is the well-known symbol [%Symbol.match%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.8 Symbol.matchAll

The initial value of `Symbol.matchAll` is the well-known symbol [%Symbol.matchAll%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.9 Symbol.prototype

The initial value of `Symbol.prototype` is the [Symbol prototype object](#sec-properties-of-the-symbol-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.10 Symbol.replace

The initial value of `Symbol.replace` is the well-known symbol [%Symbol.replace%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.11 Symbol.search

The initial value of `Symbol.search` is the well-known symbol [%Symbol.search%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.12 Symbol.species

The initial value of `Symbol.species` is the well-known symbol [%Symbol.species%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.13 Symbol.split

The initial value of `Symbol.split` is the well-known symbol [%Symbol.split%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.14 Symbol.toPrimitive

The initial value of `Symbol.toPrimitive` is the well-known symbol [%Symbol.toPrimitive%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.15 Symbol.toStringTag

The initial value of `Symbol.toStringTag` is the well-known symbol [%Symbol.toStringTag%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.2.16 Symbol.unscopables

The initial value of `Symbol.unscopables` is the well-known symbol [%Symbol.unscopables%](#sec-well-known-symbols) ([Table 1](#table-well-known-symbols)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.4.3 Properties of the Symbol Prototype Object

The Symbol prototype object:

-   is %Symbol.prototype%.
-   is an [ordinary object](#ordinary-object).
-   [is not a Symbol](#sec-ecmascript-language-types-symbol-type) instance and does not have a _\[\[SymbolData\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).


# 20.4.3.1 Symbol.prototype.constructor

The initial value of `Symbol.prototype.constructor` is [%Symbol%](#sec-symbol-constructor).


# 20.4.3.2 get Symbol.prototype.description

`Symbol.prototype.description` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _s_ be the this value.
2.  Let _sym_ be ? [ThisSymbolValue](#sec-thissymbolvalue)(_s_).
3.  Return _sym_._\[\[Description\]\]_.


# 20.4.3.3 Symbol.prototype.toString ( )

This method performs the following steps when called:

1.  Let _sym_ be ? [ThisSymbolValue](#sec-thissymbolvalue)(this value).
2.  Return [SymbolDescriptiveString](#sec-symboldescriptivestring)(_sym_).


# 20.4.3.3.1 SymbolDescriptiveString ( _sym_ )

The abstract operation SymbolDescriptiveString takes argument _sym_ (a Symbol) and returns a String. It performs the following steps when called:

1.  Let _desc_ be _sym_._\[\[Description\]\]_.
2.  If _desc_ is undefined, set _desc_ to the empty String.
3.  [Assert](#assert): _desc_ [is a String](#sec-ecmascript-language-types-string-type).
4.  Return the [string-concatenation](#string-concatenation) of "Symbol(", _desc_, and ")".


# 20.4.3.4 Symbol.prototype.valueOf ( )

This method performs the following steps when called:

1.  Return ? [ThisSymbolValue](#sec-thissymbolvalue)(this value).


# 20.4.3.4.1 ThisSymbolValue ( _value_ )

The abstract operation ThisSymbolValue takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Symbol or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _value_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return _value_.
2.  If _value_ [is an Object](#sec-object-type) and _value_ has a _\[\[SymbolData\]\]_ internal slot, then
    1.  Let _s_ be _value_._\[\[SymbolData\]\]_.
    2.  [Assert](#assert): _s_ [is a Symbol](#sec-ecmascript-language-types-symbol-type).
    3.  Return _s_.
3.  Throw a TypeError exception.


# 20.4.3.5 Symbol.prototype \[%Symbol.toPrimitive% \] ( _hint_ )

This method is called by ECMAScript language operators to convert a Symbol object to a primitive value.

It performs the following steps when called:

1.  Return ? [ThisSymbolValue](#sec-thissymbolvalue)(this value).

Note

The argument is ignored.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.

The value of the "name" property of this method is "\[Symbol.toPrimitive\]".


# 20.4.3.6 Symbol.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Symbol".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 20.4.4 Properties of Symbol Instances

Symbol instances are [ordinary objects](#ordinary-object) that inherit properties from the [Symbol prototype object](#sec-properties-of-the-symbol-prototype-object). Symbol instances have a _\[\[SymbolData\]\]_ internal slot. The _\[\[SymbolData\]\]_ internal slot is the Symbol value represented by this Symbol object.


# 20.4.5 Abstract Operations for Symbols


# 20.4.5.1 KeyForSymbol ( _sym_ )

The abstract operation KeyForSymbol takes argument _sym_ (a Symbol) and returns a String or undefined. If _sym_ is in the [GlobalSymbolRegistry List](#sec-symbol.for), the String used to register _sym_ will be returned. It performs the following steps when called:

1.  For each element _e_ of the [GlobalSymbolRegistry List](#sec-symbol.for), do
    1.  If [SameValue](#sec-samevalue)(_e_._\[\[Symbol\]\]_, _sym_) is true, return _e_._\[\[Key\]\]_.
2.  [Assert](#assert): The [GlobalSymbolRegistry List](#sec-symbol.for) does not currently contain an entry for _sym_.
3.  Return undefined.


# 20.5 Error Objects

Instances of Error objects are thrown as exceptions when runtime errors occur. The Error objects may also serve as base objects for user-defined exception classes.

When an ECMAScript implementation detects a runtime error, it throws a new instance of one of the _NativeError_ objects defined in [20.5.5](#sec-native-error-types-used-in-this-standard) or a new instance of the AggregateError object defined in [20.5.7](#sec-aggregate-error-objects).


# 20.5.1 The Error Constructor

The Error [constructor](#constructor):

-   is %Error%.
-   is the initial value of the "Error" property of the [global object](#sec-global-object).
-   creates and initializes a new Error object when called as a function rather than as a [constructor](#constructor). Thus the function call `Error(…)` is equivalent to the object creation expression `new Error(…)` with the same arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Error behaviour must include a `super` call to the Error [constructor](#constructor) to create and initialize subclass instances with an _\[\[ErrorData\]\]_ internal slot.


# 20.5.1.1 Error ( _message_ \[, _options_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, let _newTarget_ be the [active function object](#active-function-object); else let _newTarget_ be NewTarget.
2.  Let _O_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_newTarget_, "%Error.prototype%", « _\[\[ErrorData\]\]_ »).
3.  If _message_ is not undefined, then
    1.  Let _msg_ be ? [ToString](#sec-tostring)(_message_).
    2.  Perform [CreateNonEnumerableDataPropertyOrThrow](#sec-createnonenumerabledatapropertyorthrow)(_O_, "message", _msg_).
4.  Perform ? [InstallErrorCause](#sec-installerrorcause)(_O_, _options_).
5.  Return _O_.


# 20.5.2 Properties of the Error Constructor

The Error [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 20.5.2.1 Error.isError ( _arg_ )

This function performs the following steps when called:

1.  If _arg_ [is not an Object](#sec-object-type), return false.
2.  If _arg_ does not have an _\[\[ErrorData\]\]_ internal slot, return false.
3.  Return true.


# 20.5.2.2 Error.prototype

The initial value of `Error.prototype` is the [Error prototype object](#sec-properties-of-the-error-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.5.3 Properties of the Error Prototype Object

The Error prototype object:

-   is %Error.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is not an Error instance and does not have an _\[\[ErrorData\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).


# 20.5.3.1 Error.prototype.constructor

The initial value of `Error.prototype.constructor` is [%Error%](#sec-error-constructor).


# 20.5.3.2 Error.prototype.message

The initial value of `Error.prototype.message` is the empty String.


# 20.5.3.3 Error.prototype.name

The initial value of `Error.prototype.name` is "Error".


# 20.5.3.4 Error.prototype.toString ( )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _name_ be ? [Get](#sec-get-o-p)(_O_, "name").
4.  If _name_ is undefined, set _name_ to "Error"; otherwise set _name_ to ? [ToString](#sec-tostring)(_name_).
5.  Let _msg_ be ? [Get](#sec-get-o-p)(_O_, "message").
6.  If _msg_ is undefined, set _msg_ to the empty String; otherwise set _msg_ to ? [ToString](#sec-tostring)(_msg_).
7.  If _name_ is the empty String, return _msg_.
8.  If _msg_ is the empty String, return _name_.
9.  Return the [string-concatenation](#string-concatenation) of _name_, the code unit 0x003A (COLON), the code unit 0x0020 (SPACE), and _msg_.


# 20.5.4 Properties of Error Instances

Error instances are [ordinary objects](#ordinary-object) that inherit properties from the [Error prototype object](#sec-properties-of-the-error-prototype-object) and have an _\[\[ErrorData\]\]_ internal slot whose value is undefined. The only specified use of _\[\[ErrorData\]\]_ is to identify Error, AggregateError, and _NativeError_ instances as Error objects within `Object.prototype.toString` and `Error.isError`.


# 20.5.5 Native Error Types Used in This Standard

A new instance of one of the _NativeError_ objects below or of the AggregateError object is thrown when a runtime error is detected. All _NativeError_ objects share the same structure, as described in [20.5.6](#sec-nativeerror-object-structure).


# 20.5.5.1 EvalError

The EvalError [constructor](#constructor) is %EvalError%.

This exception is not currently used within this specification. This object remains for compatibility with previous editions of this specification.


# 20.5.5.2 RangeError

The RangeError [constructor](#constructor) is %RangeError%.

Indicates a value that is not in the set or range of allowable values.


# 20.5.5.3 ReferenceError

The ReferenceError [constructor](#constructor) is %ReferenceError%.

Indicate that an invalid reference has been detected.


# 20.5.5.4 SyntaxError

The SyntaxError [constructor](#constructor) is %SyntaxError%.

Indicates that a parsing error has occurred.


# 20.5.5.5 TypeError

The TypeError [constructor](#constructor) is %TypeError%.

TypeError is used to indicate an unsuccessful operation when none of the other _NativeError_ objects are an appropriate indication of the failure cause.


# 20.5.5.6 URIError

The URIError [constructor](#constructor) is %URIError%.

Indicates that one of the global URI handling functions was used in a way that is incompatible with its definition.


# 20.5.6 _NativeError_ Object Structure

Each of these objects has the structure described below, differing only in the name used as the [constructor](#constructor) name and in the "name" property of the prototype object.

For each error object, references to _NativeError_ in the definition should be replaced with the appropriate error object name from [20.5.5](#sec-native-error-types-used-in-this-standard).


# 20.5.6.1 The _NativeError_ Constructors

Each _NativeError_ [constructor](#constructor):

-   creates and initializes a new _NativeError_ object when called as a function rather than as a [constructor](#constructor). A call of the object as a function is equivalent to calling it as a [constructor](#constructor) with the same arguments. Thus the function call `_NativeError_(…)` is equivalent to the object creation expression `new _NativeError_(…)` with the same arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified _NativeError_ behaviour must include a `super` call to the _NativeError_ [constructor](#constructor) to create and initialize subclass instances with an _\[\[ErrorData\]\]_ internal slot.


# 20.5.6.1.1 _NativeError_ ( _message_ \[, _options_ \] )

Each _NativeError_ function performs the following steps when called:

1.  If NewTarget is undefined, let _newTarget_ be the [active function object](#active-function-object); else let _newTarget_ be NewTarget.
2.  Let _O_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_newTarget_, `"%_NativeError_.prototype%"`, « _\[\[ErrorData\]\]_ »).
3.  If _message_ is not undefined, then
    1.  Let _msg_ be ? [ToString](#sec-tostring)(_message_).
    2.  Perform [CreateNonEnumerableDataPropertyOrThrow](#sec-createnonenumerabledatapropertyorthrow)(_O_, "message", _msg_).
4.  Perform ? [InstallErrorCause](#sec-installerrorcause)(_O_, _options_).
5.  Return _O_.

The actual value of the string passed in step [2](#step-nativeerror-ordinarycreatefromconstructor) is either "%EvalError.prototype%", "%RangeError.prototype%", "%ReferenceError.prototype%", "%SyntaxError.prototype%", "%TypeError.prototype%", or "%URIError.prototype%" corresponding to which _NativeError_ [constructor](#constructor) is being defined.


# 20.5.6.2 Properties of the _NativeError_ Constructors

Each _NativeError_ [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Error%](#sec-error-constructor).
-   has a "name" property whose value is the String value "_NativeError_".
-   has the following properties:


# 20.5.6.2.1 _NativeError_.prototype

The initial value of `_NativeError_.prototype` is a _NativeError_ prototype object ([20.5.6.3](#sec-properties-of-the-nativeerror-prototype-objects)). Each _NativeError_ [constructor](#constructor) has a distinct prototype object.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.5.6.3 Properties of the _NativeError_ Prototype Objects

Each _NativeError_ prototype object:

-   is an [ordinary object](#ordinary-object).
-   is not an Error instance and does not have an _\[\[ErrorData\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Error.prototype%](#sec-properties-of-the-error-prototype-object).


# 20.5.6.3.1 _NativeError_.prototype.constructor

The initial value of the "constructor" property of the prototype for a given _NativeError_ [constructor](#constructor) is the [constructor](#constructor) itself.


# 20.5.6.3.2 _NativeError_.prototype.message

The initial value of the "message" property of the prototype for a given _NativeError_ [constructor](#constructor) is the empty String.


# 20.5.6.3.3 _NativeError_.prototype.name

The initial value of the "name" property of the prototype for a given _NativeError_ [constructor](#constructor) is the String value consisting of the name of the [constructor](#constructor) (the name used instead of _NativeError_).


# 20.5.6.4 Properties of _NativeError_ Instances

_NativeError_ instances are [ordinary objects](#ordinary-object) that inherit properties from their _NativeError_ prototype object and have an _\[\[ErrorData\]\]_ internal slot whose value is undefined. The only specified use of _\[\[ErrorData\]\]_ is by `Object.prototype.toString` ([20.1.3.6](#sec-object.prototype.tostring)) and `Error.isError` ([20.5.2.1](#sec-error.iserror)) to identify Error, AggregateError, or _NativeError_ instances.


# 20.5.7 AggregateError Objects


# 20.5.7.1 The AggregateError Constructor

The AggregateError [constructor](#constructor):

-   is %AggregateError%.
-   is the initial value of the "AggregateError" property of the [global object](#sec-global-object).
-   creates and initializes a new AggregateError object when called as a function rather than as a [constructor](#constructor). Thus the function call `AggregateError(…)` is equivalent to the object creation expression `new AggregateError(…)` with the same arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified AggregateError behaviour must include a `super` call to the AggregateError [constructor](#constructor) to create and initialize subclass instances with an _\[\[ErrorData\]\]_ internal slot.


# 20.5.7.1.1 AggregateError ( _errors_, _message_ \[, _options_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, let _newTarget_ be the [active function object](#active-function-object); else let _newTarget_ be NewTarget.
2.  Let _O_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_newTarget_, "%AggregateError.prototype%", « _\[\[ErrorData\]\]_ »).
3.  If _message_ is not undefined, then
    1.  Let _msg_ be ? [ToString](#sec-tostring)(_message_).
    2.  Perform [CreateNonEnumerableDataPropertyOrThrow](#sec-createnonenumerabledatapropertyorthrow)(_O_, "message", _msg_).
4.  Perform ? [InstallErrorCause](#sec-installerrorcause)(_O_, _options_).
5.  Let _errorsList_ be ? [IteratorToList](#sec-iteratortolist)(? [GetIterator](#sec-getiterator)(_errors_, sync)).
6.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_O_, "errors", PropertyDescriptor { _\[\[Configurable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Writable\]\]_: true, _\[\[Value\]\]_: [CreateArrayFromList](#sec-createarrayfromlist)(_errorsList_) }).
7.  Return _O_.


# 20.5.7.2 Properties of the AggregateError Constructor

The AggregateError [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Error%](#sec-error-constructor).
-   has the following properties:


# 20.5.7.2.1 AggregateError.prototype

The initial value of `AggregateError.prototype` is [%AggregateError.prototype%](#sec-properties-of-the-aggregate-error-prototype-objects).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 20.5.7.3 Properties of the AggregateError Prototype Object

The AggregateError prototype object:

-   is %AggregateError.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is not an Error instance or an AggregateError instance and does not have an _\[\[ErrorData\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Error.prototype%](#sec-properties-of-the-error-prototype-object).


# 20.5.7.3.1 AggregateError.prototype.constructor

The initial value of `AggregateError.prototype.constructor` is [%AggregateError%](#sec-aggregate-error-constructor).


# 20.5.7.3.2 AggregateError.prototype.message

The initial value of `AggregateError.prototype.message` is the empty String.


# 20.5.7.3.3 AggregateError.prototype.name

The initial value of `AggregateError.prototype.name` is "AggregateError".


# 20.5.7.4 Properties of AggregateError Instances

AggregateError instances are [ordinary objects](#ordinary-object) that inherit properties from their [AggregateError prototype object](#sec-properties-of-the-aggregate-error-prototype-objects) and have an _\[\[ErrorData\]\]_ internal slot whose value is undefined. The only specified use of _\[\[ErrorData\]\]_ is by `Object.prototype.toString` ([20.1.3.6](#sec-object.prototype.tostring)) and `Error.isError` ([20.5.2.1](#sec-error.iserror)) to identify Error, AggregateError, or _NativeError_ instances.


# 20.5.8 Abstract Operations for Error Objects


# 20.5.8.1 InstallErrorCause ( _O_, _options_ )

The abstract operation InstallErrorCause takes arguments _O_ (an Object) and _options_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It is used to create a "cause" property on _O_ when a "cause" property is present on _options_. It performs the following steps when called:

1.  If _options_ [is an Object](#sec-object-type) and ? [HasProperty](#sec-hasproperty)(_options_, "cause") is true, then
    1.  Let _cause_ be ? [Get](#sec-get-o-p)(_options_, "cause").
    2.  Perform [CreateNonEnumerableDataPropertyOrThrow](#sec-createnonenumerabledatapropertyorthrow)(_O_, "cause", _cause_).
2.  Return unused.


# 21 Numbers and Dates


# 21.1 Number Objects


# 21.1.1 The Number Constructor

The Number [constructor](#constructor):

-   is %Number%.
-   is the initial value of the "Number" property of the [global object](#sec-global-object).
-   creates and initializes a new Number object when called as a [constructor](#constructor).
-   performs a type conversion when called as a function rather than as a [constructor](#constructor).
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Number behaviour must include a `super` call to the Number [constructor](#constructor) to create and initialize the subclass instance with a _\[\[NumberData\]\]_ internal slot.


# 21.1.1.1 Number ( _value_ )

This function performs the following steps when called:

1.  If _value_ is present, then
    1.  Let _prim_ be ? [ToNumeric](#sec-tonumeric)(_value_).
    2.  If _prim_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), let _n_ be [𝔽](#𝔽)([ℝ](#ℝ)(_prim_)).
    3.  Otherwise, let _n_ be _prim_.
2.  Else,
    1.  Let _n_ be +0<sub>𝔽</sub>.
3.  If NewTarget is undefined, return _n_.
4.  Let _O_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Number.prototype%", « _\[\[NumberData\]\]_ »).
5.  Set _O_._\[\[NumberData\]\]_ to _n_.
6.  Return _O_.


# 21.1.2 Properties of the Number Constructor

The Number [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 21.1.2.1 Number.EPSILON

The value of `Number.EPSILON` is the [Number value for](#number-value-for) the magnitude of the difference between 1 and the smallest value greater than 1 that is representable as a Number value, which is approximately 2.2204460492503130808472633361816 × 10<sup>\-16</sup>.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.2 Number.isFinite ( _number_ )

This function performs the following steps when called:

1.  If _number_ [is not a Number](#sec-ecmascript-language-types-number-type), return false.
2.  If _number_ is not [finite](#finite), return false.
3.  Otherwise, return true.


# 21.1.2.3 Number.isInteger ( _number_ )

This function performs the following steps when called:

1.  If _number_ is an [integral Number](#integral-number), return true.
2.  Return false.


# 21.1.2.4 Number.isNaN ( _number_ )

This function performs the following steps when called:

1.  If _number_ [is not a Number](#sec-ecmascript-language-types-number-type), return false.
2.  If _number_ is NaN, return true.
3.  Otherwise, return false.

Note

This function differs from the global isNaN function ([19.2.3](#sec-isnan-number)) in that it does not convert its argument to a Number before determining whether it is NaN.


# 21.1.2.5 Number.isSafeInteger ( _number_ )

Note

An [integer](#integer) _n_ is a "safe integer" if and only if the [Number value for](#number-value-for) _n_ is not the [Number value for](#number-value-for) any other [integer](#integer).

This function performs the following steps when called:

1.  If _number_ is an [integral Number](#integral-number), then
    1.  If [abs](#eqn-abs)([ℝ](#ℝ)(_number_)) ≤ 2<sup>53</sup> - 1, return true.
2.  Return false.


# 21.1.2.6 Number.MAX\_SAFE\_INTEGER

Note

Due to rounding behaviour necessitated by precision limitations of [IEEE 754-2019](#sec-bibliography), the [Number value for](#number-value-for) every [integer](#integer) greater than `Number.MAX_SAFE_INTEGER` is shared with at least one other [integer](#integer). Such large-magnitude [integers](#integer) are therefore not [safe](#safe-integer), and are not guaranteed to be exactly representable as Number values or even to be distinguishable from each other. For example, both `9007199254740992` and `9007199254740993` evaluate to the Number value 9007199254740992<sub>𝔽</sub>.

The value of `Number.MAX_SAFE_INTEGER` is 9007199254740991<sub>𝔽</sub> ([𝔽](#𝔽)(2<sup>53</sup> - 1)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.7 Number.MAX\_VALUE

The value of `Number.MAX_VALUE` is the largest positive [finite](#finite) value of the [Number type](#sec-ecmascript-language-types-number-type), which is approximately 1.7976931348623157 × 10<sup>308</sup>.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.8 Number.MIN\_SAFE\_INTEGER

Note

Due to rounding behaviour necessitated by precision limitations of [IEEE 754-2019](#sec-bibliography), the [Number value for](#number-value-for) every [integer](#integer) less than `Number.MIN_SAFE_INTEGER` is shared with at least one other [integer](#integer). Such large-magnitude [integers](#integer) are therefore not [safe](#safe-integer), and are not guaranteed to be exactly representable as Number values or even to be distinguishable from each other. For example, both `-9007199254740992` and `-9007199254740993` evaluate to the Number value \-9007199254740992<sub>𝔽</sub>.

The value of `Number.MIN_SAFE_INTEGER` is \-9007199254740991<sub>𝔽</sub> ([𝔽](#𝔽)(-(2<sup>53</sup> - 1))).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.9 Number.MIN\_VALUE

The value of `Number.MIN_VALUE` is the smallest positive value of the [Number type](#sec-ecmascript-language-types-number-type), which is approximately 5 × 10<sup>\-324</sup>.

In the [IEEE 754-2019](#sec-bibliography) double precision binary representation, the smallest possible value is a denormalized number. If an implementation does not support denormalized values, the value of `Number.MIN_VALUE` must be the smallest non-zero positive value that can actually be represented by the implementation.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.10 Number.NaN

The value of `Number.NaN` is NaN.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.11 Number.NEGATIVE\_INFINITY

The value of `Number.NEGATIVE_INFINITY` is \-∞<sub>𝔽</sub>.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.12 Number.parseFloat ( _string_ )

The initial value of the "parseFloat" property is [%parseFloat%](#sec-parsefloat-string).


# 21.1.2.13 Number.parseInt ( _string_, _radix_ )

The initial value of the "parseInt" property is [%parseInt%](#sec-parseint-string-radix).


# 21.1.2.14 Number.POSITIVE\_INFINITY

The value of `Number.POSITIVE_INFINITY` is +∞<sub>𝔽</sub>.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.2.15 Number.prototype

The initial value of `Number.prototype` is the [Number prototype object](#sec-properties-of-the-number-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.1.3 Properties of the Number Prototype Object

The Number prototype object:

-   is %Number.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is itself a Number object; it has a _\[\[NumberData\]\]_ internal slot with the value +0<sub>𝔽</sub>.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).

Unless explicitly stated otherwise, the methods of the Number prototype object defined below are not generic and the this value passed to them must be either a Number value or an object that has a _\[\[NumberData\]\]_ internal slot that has been initialized to a Number value.

The phrase “this Number value” within the specification of a method refers to the result returned by calling the abstract operation [ThisNumberValue](#sec-thisnumbervalue) with the this value of the method invocation passed as the argument.


# 21.1.3.1 Number.prototype.constructor

The initial value of `Number.prototype.constructor` is [%Number%](#sec-number-constructor).


# 21.1.3.2 Number.prototype.toExponential ( _fractionDigits_ )

This method returns a String containing this Number value represented in decimal exponential notation with one digit before the significand's decimal point and _fractionDigits_ digits after the significand's decimal point. If _fractionDigits_ is undefined, it includes as many significand digits as necessary to uniquely specify the Number (just like in [ToString](#sec-tostring) except that in this case the Number is always output in exponential notation).

It performs the following steps when called:

1.  Let _x_ be ? [ThisNumberValue](#sec-thisnumbervalue)(this value).
2.  Let _f_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fractionDigits_).
3.  [Assert](#assert): If _fractionDigits_ is undefined, then _f_ is 0.
4.  If _x_ is not [finite](#finite), return [Number::toString](#sec-numeric-types-number-tostring)(_x_, 10).
5.  If _f_ < 0 or _f_ > 100, throw a RangeError exception.
6.  Set _x_ to [ℝ](#ℝ)(_x_).
7.  Let _s_ be the empty String.
8.  If _x_ < 0, then
    1.  Set _s_ to "-".
    2.  Set _x_ to -_x_.
9.  If _x_ = 0, then
    1.  Let _m_ be the String value consisting of _f_ + 1 occurrences of the code unit 0x0030 (DIGIT ZERO).
    2.  Let _e_ be 0.
10.  Else,
     1.  If _fractionDigits_ is not undefined, then
         1.  Let _e_ and _n_ be [integers](#integer) such that 10<sup>_f_</sup> ≤ _n_ < 10<sup>_f_ + 1</sup> and for which _n_ × 10<sup>_e_ - _f_</sup> - _x_ is as close to zero as possible. If there are two such sets of _e_ and _n_, pick the _e_ and _n_ for which _n_ × 10<sup>_e_ - _f_</sup> is larger.
     2.  Else,
         1.  Let _e_, _n_, and _ff_ be [integers](#integer) such that _ff_ ≥ 0, 10<sup>_ff_</sup> ≤ _n_ < 10<sup>_ff_ + 1</sup>, [𝔽](#𝔽)(_n_ × 10<sup>_e_ - _ff_</sup>) is [𝔽](#𝔽)(_x_), and _ff_ is as small as possible. Note that the decimal representation of _n_ has _ff_ + 1 digits, _n_ is not divisible by 10, and the least significant digit of _n_ is not necessarily uniquely determined by these criteria.
         2.  Set _f_ to _ff_.
     3.  Let _m_ be the String value consisting of the digits of the decimal representation of _n_ (in order, with no leading zeroes).
11.  If _f_ ≠ 0, then
     1.  Let _a_ be the first code unit of _m_.
     2.  Let _b_ be the other _f_ code units of _m_.
     3.  Set _m_ to the [string-concatenation](#string-concatenation) of _a_, ".", and _b_.
12.  If _e_ = 0, then
     1.  Let _c_ be "+".
     2.  Let _d_ be "0".
13.  Else,
     1.  If _e_ > 0, then
         1.  Let _c_ be "+".
     2.  Else,
         1.  [Assert](#assert): _e_ < 0.
         2.  Let _c_ be "-".
         3.  Set _e_ to -_e_.
     3.  Let _d_ be the String value consisting of the digits of the decimal representation of _e_ (in order, with no leading zeroes).
14.  Set _m_ to the [string-concatenation](#string-concatenation) of _m_, "e", _c_, and _d_.
15.  Return the [string-concatenation](#string-concatenation) of _s_ and _m_.

Note

For implementations that provide more accurate conversions than required by the rules above, it is recommended that the following alternative version of step [10.b.i](#step-number-proto-toexponential-intermediate-values) be used as a guideline:

1.  Let _e_, _n_, and _ff_ be [integers](#integer) such that _ff_ ≥ 0, 10<sup>_ff_</sup> ≤ _n_ < 10<sup>_ff_ + 1</sup>, [𝔽](#𝔽)(_n_ × 10<sup>_e_ - _ff_</sup>) is [𝔽](#𝔽)(_x_), and _ff_ is as small as possible. If there are multiple possibilities for _n_, choose the value of _n_ for which [𝔽](#𝔽)(_n_ × 10<sup>_e_ - _ff_</sup>) is closest in value to [𝔽](#𝔽)(_x_). If there are two such possible values of _n_, choose the one that is even.


# 21.1.3.3 Number.prototype.toFixed ( _fractionDigits_ )

Note 1

This method returns a String containing this Number value represented in decimal fixed-point notation with _fractionDigits_ digits after the decimal point. If _fractionDigits_ is undefined, 0 is assumed.

It performs the following steps when called:

1.  Let _x_ be ? [ThisNumberValue](#sec-thisnumbervalue)(this value).
2.  Let _f_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fractionDigits_).
3.  [Assert](#assert): If _fractionDigits_ is undefined, then _f_ is 0.
4.  If _f_ is not [finite](#finite), throw a RangeError exception.
5.  If _f_ < 0 or _f_ > 100, throw a RangeError exception.
6.  If _x_ is not [finite](#finite), return [Number::toString](#sec-numeric-types-number-tostring)(_x_, 10).
7.  Set _x_ to [ℝ](#ℝ)(_x_).
8.  Let _s_ be the empty String.
9.  If _x_ < 0, then
    1.  Set _s_ to "-".
    2.  Set _x_ to -_x_.
10.  If _x_ ≥ 10<sup>21</sup>, then
     1.  Let _m_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_x_)).
11.  Else,
     1.  Let _n_ be an [integer](#integer) for which _n_ / 10<sup>_f_</sup> - _x_ is as close to zero as possible. If there are two such _n_, pick the larger _n_.
     2.  If _n_ = 0, let _m_ be "0"; otherwise let _m_ be the String value consisting of the digits of the decimal representation of _n_ (in order, with no leading zeroes).
     3.  If _f_ ≠ 0, then
         1.  Let _k_ be the length of _m_.
         2.  If _k_ ≤ _f_, then
             1.  Let _z_ be the String value consisting of _f_ + 1 - _k_ occurrences of the code unit 0x0030 (DIGIT ZERO).
             2.  Set _m_ to the [string-concatenation](#string-concatenation) of _z_ and _m_.
             3.  Set _k_ to _f_ + 1.
         3.  Let _a_ be the first _k_ - _f_ code units of _m_.
         4.  Let _b_ be the other _f_ code units of _m_.
         5.  Set _m_ to the [string-concatenation](#string-concatenation) of _a_, ".", and _b_.
12.  Return the [string-concatenation](#string-concatenation) of _s_ and _m_.

Note 2

The output of `toFixed` may be more precise than `toString` for some values because toString only prints enough significant digits to distinguish the number from adjacent Number values. For example,

`(1000000000000000128).toString()` returns "1000000000000000100", while  
`(1000000000000000128).toFixed(0)` returns "1000000000000000128".


# 21.1.3.4 Number.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method produces a String value that represents this Number value formatted according to the conventions of the [host environment](#host-environment)'s current locale. This method is [implementation-defined](#implementation-defined), and it is permissible, but not encouraged, for it to return the same thing as `toString`.

The meanings of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.


# 21.1.3.5 Number.prototype.toPrecision ( _precision_ )

This method returns a String containing this Number value represented either in decimal exponential notation with one digit before the significand's decimal point and _precision_ - 1 digits after the significand's decimal point or in decimal fixed notation with _precision_ significant digits. If _precision_ is undefined, it calls [ToString](#sec-tostring) instead.

It performs the following steps when called:

1.  Let _x_ be ? [ThisNumberValue](#sec-thisnumbervalue)(this value).
2.  If _precision_ is undefined, return ! [ToString](#sec-tostring)(_x_).
3.  Let _p_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_precision_).
4.  If _x_ is not [finite](#finite), return [Number::toString](#sec-numeric-types-number-tostring)(_x_, 10).
5.  If _p_ < 1 or _p_ > 100, throw a RangeError exception.
6.  Set _x_ to [ℝ](#ℝ)(_x_).
7.  Let _s_ be the empty String.
8.  If _x_ < 0, then
    1.  Set _s_ to the code unit 0x002D (HYPHEN-MINUS).
    2.  Set _x_ to -_x_.
9.  If _x_ = 0, then
    1.  Let _m_ be the String value consisting of _p_ occurrences of the code unit 0x0030 (DIGIT ZERO).
    2.  Let _e_ be 0.
10.  Else,
     1.  Let _e_ and _n_ be [integers](#integer) such that 10<sup>_p_ - 1</sup> ≤ _n_ < 10<sup>_p_</sup> and for which _n_ × 10<sup>_e_ - _p_ + 1</sup> - _x_ is as close to zero as possible. If there are two such sets of _e_ and _n_, pick the _e_ and _n_ for which _n_ × 10<sup>_e_ - _p_ + 1</sup> is larger.
     2.  Let _m_ be the String value consisting of the digits of the decimal representation of _n_ (in order, with no leading zeroes).
     3.  If _e_ < -6 or _e_ ≥ _p_, then
         1.  [Assert](#assert): _e_ ≠ 0.
         2.  If _p_ ≠ 1, then
             1.  Let _a_ be the first code unit of _m_.
             2.  Let _b_ be the other _p_ - 1 code units of _m_.
             3.  Set _m_ to the [string-concatenation](#string-concatenation) of _a_, ".", and _b_.
         3.  If _e_ > 0, then
             1.  Let _c_ be the code unit 0x002B (PLUS SIGN).
         4.  Else,
             1.  [Assert](#assert): _e_ < 0.
             2.  Let _c_ be the code unit 0x002D (HYPHEN-MINUS).
             3.  Set _e_ to -_e_.
         5.  Let _d_ be the String value consisting of the digits of the decimal representation of _e_ (in order, with no leading zeroes).
         6.  Return the [string-concatenation](#string-concatenation) of _s_, _m_, the code unit 0x0065 (LATIN SMALL LETTER E), _c_, and _d_.
11.  If _e_ = _p_ - 1, return the [string-concatenation](#string-concatenation) of _s_ and _m_.
12.  If _e_ ≥ 0, then
     1.  Set _m_ to the [string-concatenation](#string-concatenation) of the first _e_ + 1 code units of _m_, the code unit 0x002E (FULL STOP), and the remaining _p_ - (_e_ + 1) code units of _m_.
13.  Else,
     1.  Set _m_ to the [string-concatenation](#string-concatenation) of the code unit 0x0030 (DIGIT ZERO), the code unit 0x002E (FULL STOP), -(_e_ + 1) occurrences of the code unit 0x0030 (DIGIT ZERO), and the String _m_.
14.  Return the [string-concatenation](#string-concatenation) of _s_ and _m_.


# 21.1.3.6 Number.prototype.toString ( \[_radix_ \] )

Note

The optional _radix_ should be an [integral Number](#integral-number) value in the [inclusive interval](#inclusive-interval) from 2<sub>𝔽</sub> to 36<sub>𝔽</sub>. If _radix_ is undefined then 10<sub>𝔽</sub> is used as the value of _radix_.

This method performs the following steps when called:

1.  Let _x_ be ? [ThisNumberValue](#sec-thisnumbervalue)(this value).
2.  If _radix_ is undefined, let _radixMV_ be 10.
3.  Else, let _radixMV_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_radix_).
4.  If _radixMV_ is not in the [inclusive interval](#inclusive-interval) from 2 to 36, throw a RangeError exception.
5.  Return [Number::toString](#sec-numeric-types-number-tostring)(_x_, _radixMV_).

This method is not generic; it throws a TypeError exception if its this value [is not a Number](#sec-ecmascript-language-types-number-type) or a Number object. Therefore, it cannot be transferred to other kinds of objects for use as a method.

The "length" property of this method is 1<sub>𝔽</sub>.


# 21.1.3.7 Number.prototype.valueOf ( )

1.  Return ? [ThisNumberValue](#sec-thisnumbervalue)(this value).


# 21.1.3.7.1 ThisNumberValue ( _value_ )

The abstract operation ThisNumberValue takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Number or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _value_ [is a Number](#sec-ecmascript-language-types-number-type), return _value_.
2.  If _value_ [is an Object](#sec-object-type) and _value_ has a _\[\[NumberData\]\]_ internal slot, then
    1.  Let _n_ be _value_._\[\[NumberData\]\]_.
    2.  [Assert](#assert): _n_ [is a Number](#sec-ecmascript-language-types-number-type).
    3.  Return _n_.
3.  Throw a TypeError exception.


# 21.1.4 Properties of Number Instances

Number instances are [ordinary objects](#ordinary-object) that inherit properties from the [Number prototype object](#sec-properties-of-the-number-prototype-object). Number instances also have a _\[\[NumberData\]\]_ internal slot. The _\[\[NumberData\]\]_ internal slot is the Number value represented by this Number object.


# 21.2 BigInt Objects


# 21.2.1 The BigInt Constructor

The BigInt [constructor](#constructor):

-   is %BigInt%.
-   is the initial value of the "BigInt" property of the [global object](#sec-global-object).
-   performs a type conversion when called as a function rather than as a [constructor](#constructor).
-   is not intended to be used with the `new` operator or to be subclassed. It may be used as the value of an `extends` clause of a class definition but a `super` call to the BigInt [constructor](#constructor) will cause an exception.


# 21.2.1.1 BigInt ( _value_ )

This function performs the following steps when called:

1.  If NewTarget is not undefined, throw a TypeError exception.
2.  Let _prim_ be ? [ToPrimitive](#sec-toprimitive)(_value_, number).
3.  If _prim_ [is a Number](#sec-ecmascript-language-types-number-type), return ? [NumberToBigInt](#sec-numbertobigint)(_prim_).
4.  Otherwise, return ? [ToBigInt](#sec-tobigint)(_prim_).


# 21.2.1.1.1 NumberToBigInt ( _number_ )

The abstract operation NumberToBigInt takes argument _number_ (a Number) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _number_ is not an [integral Number](#integral-number), throw a RangeError exception.
2.  Return [ℤ](#ℤ)([ℝ](#ℝ)(_number_)).


# 21.2.2 Properties of the BigInt Constructor

The BigInt [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 21.2.2.1 BigInt.asIntN ( _bits_, _bigint_ )

This function performs the following steps when called:

1.  Set _bits_ to ? [ToIndex](#sec-toindex)(_bits_).
2.  Set _bigint_ to ? [ToBigInt](#sec-tobigint)(_bigint_).
3.  Let _mod_ be [ℝ](#ℝ)(_bigint_) [modulo](#eqn-modulo) 2<sup>_bits_</sup>.
4.  If _mod_ ≥ 2<sup>_bits_ - 1</sup>, return [ℤ](#ℤ)(_mod_ - 2<sup>_bits_</sup>); otherwise return [ℤ](#ℤ)(_mod_).


# 21.2.2.2 BigInt.asUintN ( _bits_, _bigint_ )

This function performs the following steps when called:

1.  Set _bits_ to ? [ToIndex](#sec-toindex)(_bits_).
2.  Set _bigint_ to ? [ToBigInt](#sec-tobigint)(_bigint_).
3.  Return [ℤ](#ℤ)([ℝ](#ℝ)(_bigint_) [modulo](#eqn-modulo) 2<sup>_bits_</sup>).


# 21.2.2.3 BigInt.prototype

The initial value of `BigInt.prototype` is the [BigInt prototype object](#sec-properties-of-the-bigint-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.2.3 Properties of the BigInt Prototype Object

The BigInt prototype object:

-   is %BigInt.prototype%.
-   is an [ordinary object](#ordinary-object).
-   [is not a BigInt](#sec-ecmascript-language-types-bigint-type) object; it does not have a _\[\[BigIntData\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).

The phrase “this BigInt value” within the specification of a method refers to the result returned by calling the abstract operation [ThisBigIntValue](#sec-thisbigintvalue) with the this value of the method invocation passed as the argument.


# 21.2.3.1 BigInt.prototype.constructor

The initial value of `BigInt.prototype.constructor` is [%BigInt%](#sec-bigint-constructor).


# 21.2.3.2 BigInt.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method produces a String value that represents this BigInt value formatted according to the conventions of the [host environment](#host-environment)'s current locale. This method is [implementation-defined](#implementation-defined), and it is permissible, but not encouraged, for it to return the same thing as `toString`.

The meanings of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.


# 21.2.3.3 BigInt.prototype.toString ( \[_radix_ \] )

Note

The optional _radix_ should be an [integral Number](#integral-number) value in the [inclusive interval](#inclusive-interval) from 2<sub>𝔽</sub> to 36<sub>𝔽</sub>. If _radix_ is undefined then 10<sub>𝔽</sub> is used as the value of _radix_.

This method performs the following steps when called:

1.  Let _x_ be ? [ThisBigIntValue](#sec-thisbigintvalue)(this value).
2.  If _radix_ is undefined, let _radixMV_ be 10.
3.  Else, let _radixMV_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_radix_).
4.  If _radixMV_ is not in the [inclusive interval](#inclusive-interval) from 2 to 36, throw a RangeError exception.
5.  Return [BigInt::toString](#sec-numeric-types-bigint-tostring)(_x_, _radixMV_).

This method is not generic; it throws a TypeError exception if its this value [is not a BigInt](#sec-ecmascript-language-types-bigint-type) or a BigInt object. Therefore, it cannot be transferred to other kinds of objects for use as a method.


# 21.2.3.4 BigInt.prototype.valueOf ( )

1.  Return ? [ThisBigIntValue](#sec-thisbigintvalue)(this value).


# 21.2.3.4.1 ThisBigIntValue ( _value_ )

The abstract operation ThisBigIntValue takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a BigInt or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _value_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), return _value_.
2.  If _value_ [is an Object](#sec-object-type) and _value_ has a _\[\[BigIntData\]\]_ internal slot, then
    1.  [Assert](#assert): _value_._\[\[BigIntData\]\]_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
    2.  Return _value_._\[\[BigIntData\]\]_.
3.  Throw a TypeError exception.


# 21.2.3.5 BigInt.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "BigInt".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 21.2.4 Properties of BigInt Instances

BigInt instances are [ordinary objects](#ordinary-object) that inherit properties from the [BigInt prototype object](#sec-properties-of-the-bigint-prototype-object). BigInt instances also have a _\[\[BigIntData\]\]_ internal slot. The _\[\[BigIntData\]\]_ internal slot is the BigInt value represented by this BigInt object.


# 21.3 The Math Object

The Math object:

-   is %Math%.
-   is the initial value of the "Math" property of the [global object](#sec-global-object).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is not a [function object](#function-object).
-   does not have a _\[\[Construct\]\]_ internal method; it cannot be used as a [constructor](#constructor) with the `new` operator.
-   does not have a _\[\[Call\]\]_ internal method; it cannot be invoked as a function.

Note

In this specification, the phrase “the [Number value for](#number-value-for) _x_” has a technical meaning defined in [6.1.6.1](#sec-ecmascript-language-types-number-type).


# 21.3.1 Value Properties of the Math Object


# 21.3.1.1 Math.E

The [Number value for](#number-value-for) *e*, the base of the natural logarithms, which is approximately 2.7182818284590452354.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.3.1.2 Math.LN10

The [Number value for](#number-value-for) the natural logarithm of 10, which is approximately 2.302585092994046.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.3.1.3 Math.LN2

The [Number value for](#number-value-for) the natural logarithm of 2, which is approximately 0.6931471805599453.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.3.1.4 Math.LOG10E

The [Number value for](#number-value-for) the base-10 logarithm of *e*, the base of the natural logarithms; this value is approximately 0.4342944819032518.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

The value of `Math.LOG10E` is approximately the reciprocal of the value of `Math.LN10`.


# 21.3.1.5 Math.LOG2E

The [Number value for](#number-value-for) the base-2 logarithm of *e*, the base of the natural logarithms; this value is approximately 1.4426950408889634.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

The value of `Math.LOG2E` is approximately the reciprocal of the value of `Math.LN2`.


# 21.3.1.6 Math.PI

The [Number value for](#number-value-for) π, the ratio of the circumference of a circle to its diameter, which is approximately 3.1415926535897932.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.3.1.7 Math.SQRT1\_2

The [Number value for](#number-value-for) the square root of ½, which is approximately 0.7071067811865476.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

The value of `Math.SQRT1_2` is approximately the reciprocal of the value of `Math.SQRT2`.


# 21.3.1.8 Math.SQRT2

The [Number value for](#number-value-for) the square root of 2, which is approximately 1.4142135623730951.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.3.1.9 Math \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Math".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 21.3.2 Function Properties of the Math Object

Note

The behaviour of the functions `acos`, `acosh`, `asin`, `asinh`, `atan`, `atanh`, `atan2`, `cbrt`, `cos`, `cosh`, `exp`, `expm1`, `hypot`, `log`, `log1p`, `log2`, `log10`, `pow`, `random`, `sin`, `sinh`, `tan`, and `tanh` is not precisely specified here except to require specific results for certain argument values that represent boundary cases of interest. For other argument values, these functions are intended to compute approximations to the results of familiar mathematical functions, but some latitude is allowed in the choice of approximation algorithms. The general intent is that an implementer should be able to use the same mathematical library for ECMAScript on a given hardware platform that is available to C programmers on that platform.

Although the choice of algorithms is left to the implementation, it is recommended (but not specified by this standard) that implementations use the approximation algorithms for [IEEE 754-2019](#sec-bibliography) arithmetic contained in `fdlibm`, the freely distributable mathematical library from Sun Microsystems ([http://www.netlib.org/fdlibm](http://www.netlib.org/fdlibm)).


# 21.3.2.1 Math.abs ( _x_ )

This function returns the absolute value of _x_; the result has the same magnitude as _x_ but has positive sign.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is NaN, return NaN.
3.  If _n_ is \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ is \-∞<sub>𝔽</sub>, return +∞<sub>𝔽</sub>.
5.  If _n_ < \-0<sub>𝔽</sub>, return -_n_.
6.  Return _n_.


# 21.3.2.2 Math.acos ( _x_ )

This function returns the inverse cosine of _x_. The result is expressed in radians and is in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to [𝔽](#𝔽)(π).

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is NaN, _n_ > 1<sub>𝔽</sub>, or _n_ < \-1<sub>𝔽</sub>, return NaN.
3.  If _n_ is 1<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  Return an [implementation-approximated](#implementation-approximated) Number value representing the inverse cosine of [ℝ](#ℝ)(_n_).


# 21.3.2.3 Math.acosh ( _x_ )

This function returns the inverse hyperbolic cosine of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is either NaN or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ is 1<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ < 1<sub>𝔽</sub>, return NaN.
5.  Return an [implementation-approximated](#implementation-approximated) Number value representing the inverse hyperbolic cosine of [ℝ](#ℝ)(_n_).


# 21.3.2.4 Math.asin ( _x_ )

This function returns the inverse sine of _x_. The result is expressed in radians and is in the [inclusive interval](#inclusive-interval) from [𝔽](#𝔽)(-π / 2) to [𝔽](#𝔽)(π / 2).

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ > 1<sub>𝔽</sub> or _n_ < \-1<sub>𝔽</sub>, return NaN.
4.  Return an [implementation-approximated](#implementation-approximated) Number value representing the inverse sine of [ℝ](#ℝ)(_n_).


# 21.3.2.5 Math.asinh ( _x_ )

This function returns the inverse hyperbolic sine of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite) or _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return _n_.
3.  Return an [implementation-approximated](#implementation-approximated) Number value representing the inverse hyperbolic sine of [ℝ](#ℝ)(_n_).


# 21.3.2.6 Math.atan ( _x_ )

This function returns the inverse tangent of _x_. The result is expressed in radians and is in the [inclusive interval](#inclusive-interval) from [𝔽](#𝔽)(-π / 2) to [𝔽](#𝔽)(π / 2).

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ is +∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing π / 2.
4.  If _n_ is \-∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing -π / 2.
5.  Return an [implementation-approximated](#implementation-approximated) Number value representing the inverse tangent of [ℝ](#ℝ)(_n_).


# 21.3.2.7 Math.atanh ( _x_ )

This function returns the inverse hyperbolic tangent of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ > 1<sub>𝔽</sub> or _n_ < \-1<sub>𝔽</sub>, return NaN.
4.  If _n_ is 1<sub>𝔽</sub>, return +∞<sub>𝔽</sub>.
5.  If _n_ is \-1<sub>𝔽</sub>, return \-∞<sub>𝔽</sub>.
6.  Return an [implementation-approximated](#implementation-approximated) Number value representing the inverse hyperbolic tangent of [ℝ](#ℝ)(_n_).


# 21.3.2.8 Math.atan2 ( _y_, _x_ )

This function returns the inverse tangent of the quotient _y_ / _x_ of the arguments _y_ and _x_, where the signs of _y_ and _x_ are used to determine the quadrant of the result. Note that it is intentional and traditional for the two-argument inverse tangent function that the argument named _y_ be first and the argument named _x_ be second. The result is expressed in radians and is in the [inclusive interval](#inclusive-interval) from -π to +π.

It performs the following steps when called:

1.  Let _ny_ be ? [ToNumber](#sec-tonumber)(_y_).
2.  Let _nx_ be ? [ToNumber](#sec-tonumber)(_x_).
3.  If _ny_ is NaN or _nx_ is NaN, return NaN.
4.  If _ny_ is +∞<sub>𝔽</sub>, then
    1.  If _nx_ is +∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing π / 4.
    2.  If _nx_ is \-∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing 3π / 4.
    3.  Return an [implementation-approximated](#implementation-approximated) Number value representing π / 2.
5.  If _ny_ is \-∞<sub>𝔽</sub>, then
    1.  If _nx_ is +∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing -π / 4.
    2.  If _nx_ is \-∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing -3π / 4.
    3.  Return an [implementation-approximated](#implementation-approximated) Number value representing -π / 2.
6.  If _ny_ is +0<sub>𝔽</sub>, then
    1.  If _nx_ > +0<sub>𝔽</sub> or _nx_ is +0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
    2.  Return an [implementation-approximated](#implementation-approximated) Number value representing π.
7.  If _ny_ is \-0<sub>𝔽</sub>, then
    1.  If _nx_ > +0<sub>𝔽</sub> or _nx_ is +0<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
    2.  Return an [implementation-approximated](#implementation-approximated) Number value representing -π.
8.  [Assert](#assert): _ny_ is [finite](#finite) and is neither +0<sub>𝔽</sub> nor \-0<sub>𝔽</sub>.
9.  If _ny_ > +0<sub>𝔽</sub>, then
    1.  If _nx_ is +∞<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
    2.  If _nx_ is \-∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing π.
    3.  If _nx_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing π / 2.
10.  If _ny_ < \-0<sub>𝔽</sub>, then
     1.  If _nx_ is +∞<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
     2.  If _nx_ is \-∞<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing -π.
     3.  If _nx_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return an [implementation-approximated](#implementation-approximated) Number value representing -π / 2.
11.  [Assert](#assert): _nx_ is [finite](#finite) and is neither +0<sub>𝔽</sub> nor \-0<sub>𝔽</sub>.
12.  Let _r_ be the inverse tangent of [abs](#eqn-abs)([ℝ](#ℝ)(_ny_) / [ℝ](#ℝ)(_nx_)).
13.  If _nx_ < \-0<sub>𝔽</sub>, then
     1.  If _ny_ > +0<sub>𝔽</sub>, set _r_ to π - _r_.
     2.  Else, set _r_ to -π + _r_.
14.  Else,
     1.  If _ny_ < \-0<sub>𝔽</sub>, set _r_ to -_r_.
15.  Return an [implementation-approximated](#implementation-approximated) Number value representing _r_.


# 21.3.2.9 Math.cbrt ( _x_ )

This function returns the cube root of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite) or _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return _n_.
3.  Return an [implementation-approximated](#implementation-approximated) Number value representing the cube root of [ℝ](#ℝ)(_n_).


# 21.3.2.10 Math.ceil ( _x_ )

This function returns the smallest (closest to -∞) [integral Number](#integral-number) value that is not less than _x_. If _x_ is already an [integral Number](#integral-number), the result is _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite) or _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ < \-0<sub>𝔽</sub> and _n_ > \-1<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
4.  If _n_ is an [integral Number](#integral-number), return _n_.
5.  Return the smallest (closest to -∞) [integral Number](#integral-number) value that is not less than _n_.

Note

The value of `Math.ceil(x)` is the same as the value of `-Math.floor(-x)`.


# 21.3.2.11 Math.clz32 ( _x_ )

This function performs the following steps when called:

1.  Let _n_ be ? [ToUint32](#sec-touint32)(_x_).
2.  Let _p_ be the number of leading zero bits in the unsigned 32-bit binary representation of _n_.
3.  Return [𝔽](#𝔽)(_p_).

Note

If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, this method returns 32<sub>𝔽</sub>. If the most significant bit of the 32-bit binary encoding of _n_ is 1, this method returns +0<sub>𝔽</sub>.


# 21.3.2.12 Math.cos ( _x_ )

This function returns the cosine of _x_. The argument is expressed in radians.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite), return NaN.
3.  If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return 1<sub>𝔽</sub>.
4.  Return an [implementation-approximated](#implementation-approximated) Number value representing the cosine of [ℝ](#ℝ)(_n_).


# 21.3.2.13 Math.cosh ( _x_ )

This function returns the hyperbolic cosine of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is NaN, return NaN.
3.  If _n_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return +∞<sub>𝔽</sub>.
4.  If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return 1<sub>𝔽</sub>.
5.  Return an [implementation-approximated](#implementation-approximated) Number value representing the hyperbolic cosine of [ℝ](#ℝ)(_n_).

Note

The value of `Math.cosh(x)` is the same as the value of `(Math.exp(x) + Math.exp(-x)) / 2`.


# 21.3.2.14 Math.exp ( _x_ )

This function returns the exponential function of _x_ (_e_ raised to the power of _x_, where _e_ is the base of the natural logarithms).

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is either NaN or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return 1<sub>𝔽</sub>.
4.  If _n_ is \-∞<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
5.  Return an [implementation-approximated](#implementation-approximated) Number value representing the exponential function of [ℝ](#ℝ)(_n_).


# 21.3.2.15 Math.expm1 ( _x_ )

This function returns the result of subtracting 1 from the exponential function of _x_ (_e_ raised to the power of _x_, where _e_ is the base of the natural logarithms). The result is computed in a way that is accurate even when the value of _x_ is close to 0.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, \-0<sub>𝔽</sub>, or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ is \-∞<sub>𝔽</sub>, return \-1<sub>𝔽</sub>.
4.  Let _exp_ be the exponential function of [ℝ](#ℝ)(_n_).
5.  Return an [implementation-approximated](#implementation-approximated) Number value representing _exp_ - 1.


# 21.3.2.16 Math.floor ( _x_ )

This function returns the greatest (closest to +∞) [integral Number](#integral-number) value that is not greater than _x_. If _x_ is already an [integral Number](#integral-number), the result is _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite) or _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ < 1<sub>𝔽</sub> and _n_ > +0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ is an [integral Number](#integral-number), return _n_.
5.  Return the greatest (closest to +∞) [integral Number](#integral-number) value that is not greater than _n_.

Note

The value of `Math.floor(x)` is the same as the value of `-Math.ceil(-x)`.


# 21.3.2.17 Math.fround ( _x_ )

This function performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is NaN, return NaN.
3.  If _n_ is one of +0<sub>𝔽</sub>, \-0<sub>𝔽</sub>, +∞<sub>𝔽</sub>, or \-∞<sub>𝔽</sub>, return _n_.
4.  Let _n32_ be the result of converting _n_ to [IEEE 754-2019](#sec-bibliography) binary32 format using roundTiesToEven mode.
5.  Let _n64_ be the result of converting _n32_ to [IEEE 754-2019](#sec-bibliography) binary64 format.
6.  Return the ECMAScript Number value corresponding to _n64_.


# 21.3.2.18 Math.f16round ( _x_ )

This function performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is NaN, return NaN.
3.  If _n_ is one of +0<sub>𝔽</sub>, \-0<sub>𝔽</sub>, +∞<sub>𝔽</sub>, or \-∞<sub>𝔽</sub>, return _n_.
4.  Let _n16_ be the result of converting _n_ to [IEEE 754-2019](#sec-bibliography) binary16 format using roundTiesToEven mode.
5.  Let _n64_ be the result of converting _n16_ to [IEEE 754-2019](#sec-bibliography) binary64 format.
6.  Return the ECMAScript Number value corresponding to _n64_.

Note

This operation is not the same as casting to binary32 and then to binary16 because of the possibility of double-rounding: consider the number _k_ = 1.00048828125000022204<sub>𝔽</sub>, for example, for which Math.f16round(_k_) is 1.0009765625<sub>𝔽</sub>, but Math.f16round(Math.fround(_k_)) is 1<sub>𝔽</sub>.

Not all platforms provide native support for casting from binary64 to binary16. There are various libraries which can provide this, including the MIT-licensed [half](https://half.sourceforge.net/) library. Alternatively, it is possible to first cast from binary64 to binary32 under roundTiesToEven and then check whether the result could lead to incorrect double-rounding. Such cases can be handled explicitly by adjusting the mantissa of the binary32 value so that it is the value which would be produced by performing the initial cast under roundTiesToOdd. Casting the adjusted value to binary16 under roundTiesToEven then produces the correct value.


# 21.3.2.19 Math.hypot ( ..._args_ )

Given zero or more arguments, this function returns the square root of the sum of squares of its arguments.

It performs the following steps when called:

1.  Let _coerced_ be a new empty [List](#sec-list-and-record-specification-type).
2.  For each element _arg_ of _args_, do
    1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_arg_).
    2.  Append _n_ to _coerced_.
3.  For each element _number_ of _coerced_, do
    1.  If _number_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return +∞<sub>𝔽</sub>.
4.  Let _onlyZero_ be true.
5.  For each element _number_ of _coerced_, do
    1.  If _number_ is NaN, return NaN.
    2.  If _number_ is neither +0<sub>𝔽</sub> nor \-0<sub>𝔽</sub>, set _onlyZero_ to false.
6.  If _onlyZero_ is true, return +0<sub>𝔽</sub>.
7.  Return an [implementation-approximated](#implementation-approximated) Number value representing the square root of the sum of squares of the [mathematical values](#mathematical-value) of the elements of _coerced_.

The "length" property of this function is 2<sub>𝔽</sub>.

Note

Implementations should take care to avoid the loss of precision from overflows and underflows that are prone to occur in naive implementations when this function is called with two or more arguments.


# 21.3.2.20 Math.imul ( _x_, _y_ )

This function performs the following steps when called:

1.  Let _a_ be [ℝ](#ℝ)(? [ToUint32](#sec-touint32)(_x_)).
2.  Let _b_ be [ℝ](#ℝ)(? [ToUint32](#sec-touint32)(_y_)).
3.  Let _product_ be (_a_ × _b_) [modulo](#eqn-modulo) 2<sup>32</sup>.
4.  If _product_ ≥ 2<sup>31</sup>, return [𝔽](#𝔽)(_product_ - 2<sup>32</sup>); otherwise return [𝔽](#𝔽)(_product_).


# 21.3.2.21 Math.log ( _x_ )

This function returns the natural logarithm of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is either NaN or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ is 1<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return \-∞<sub>𝔽</sub>.
5.  If _n_ < \-0<sub>𝔽</sub>, return NaN.
6.  Return an [implementation-approximated](#implementation-approximated) Number value representing the natural logarithm of [ℝ](#ℝ)(_n_).


# 21.3.2.22 Math.log1p ( _x_ )

This function returns the natural logarithm of 1 + _x_. The result is computed in a way that is accurate even when the value of x is close to zero.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, \-0<sub>𝔽</sub>, or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ is \-1<sub>𝔽</sub>, return \-∞<sub>𝔽</sub>.
4.  If _n_ < \-1<sub>𝔽</sub>, return NaN.
5.  Return an [implementation-approximated](#implementation-approximated) Number value representing the natural logarithm of 1 + [ℝ](#ℝ)(_n_).


# 21.3.2.23 Math.log10 ( _x_ )

This function returns the base 10 logarithm of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is either NaN or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ is 1<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return \-∞<sub>𝔽</sub>.
5.  If _n_ < \-0<sub>𝔽</sub>, return NaN.
6.  Return an [implementation-approximated](#implementation-approximated) Number value representing the base 10 logarithm of [ℝ](#ℝ)(_n_).


# 21.3.2.24 Math.log2 ( _x_ )

This function returns the base 2 logarithm of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is either NaN or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ is 1<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return \-∞<sub>𝔽</sub>.
5.  If _n_ < \-0<sub>𝔽</sub>, return NaN.
6.  Return an [implementation-approximated](#implementation-approximated) Number value representing the base 2 logarithm of [ℝ](#ℝ)(_n_).


# 21.3.2.25 Math.max ( ..._args_ )

Given zero or more arguments, this function calls [ToNumber](#sec-tonumber) on each of the arguments and returns the largest of the resulting values.

It performs the following steps when called:

1.  Let _coerced_ be a new empty [List](#sec-list-and-record-specification-type).
2.  For each element _arg_ of _args_, do
    1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_arg_).
    2.  Append _n_ to _coerced_.
3.  Let _highest_ be \-∞<sub>𝔽</sub>.
4.  For each element _number_ of _coerced_, do
    1.  If _number_ is NaN, return NaN.
    2.  If _number_ is +0<sub>𝔽</sub> and _highest_ is \-0<sub>𝔽</sub>, set _highest_ to +0<sub>𝔽</sub>.
    3.  If _number_ > _highest_, set _highest_ to _number_.
5.  Return _highest_.

Note

The comparison of values to determine the largest value is done using the [IsLessThan](#sec-islessthan) algorithm except that +0<sub>𝔽</sub> is considered to be larger than \-0<sub>𝔽</sub>.

The "length" property of this function is 2<sub>𝔽</sub>.


# 21.3.2.26 Math.min ( ..._args_ )

Given zero or more arguments, this function calls [ToNumber](#sec-tonumber) on each of the arguments and returns the smallest of the resulting values.

It performs the following steps when called:

1.  Let _coerced_ be a new empty [List](#sec-list-and-record-specification-type).
2.  For each element _arg_ of _args_, do
    1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_arg_).
    2.  Append _n_ to _coerced_.
3.  Let _lowest_ be +∞<sub>𝔽</sub>.
4.  For each element _number_ of _coerced_, do
    1.  If _number_ is NaN, return NaN.
    2.  If _number_ is \-0<sub>𝔽</sub> and _lowest_ is +0<sub>𝔽</sub>, set _lowest_ to \-0<sub>𝔽</sub>.
    3.  If _number_ < _lowest_, set _lowest_ to _number_.
5.  Return _lowest_.

Note

The comparison of values to determine the largest value is done using the [IsLessThan](#sec-islessthan) algorithm except that +0<sub>𝔽</sub> is considered to be larger than \-0<sub>𝔽</sub>.

The "length" property of this function is 2<sub>𝔽</sub>.


# 21.3.2.27 Math.pow ( _base_, _exponent_ )

This function performs the following steps when called:

1.  Set _base_ to ? [ToNumber](#sec-tonumber)(_base_).
2.  Set _exponent_ to ? [ToNumber](#sec-tonumber)(_exponent_).
3.  Return [Number::exponentiate](#sec-numeric-types-number-exponentiate)(_base_, _exponent_).


# 21.3.2.28 Math.random ( )

This function returns a Number value with positive sign, greater than or equal to +0<sub>𝔽</sub> but strictly less than 1<sub>𝔽</sub>, chosen randomly or pseudo randomly with approximately uniform distribution over that range, using an [implementation-defined](#implementation-defined) algorithm or strategy.

Each `Math.random` function created for distinct [realms](#realm) must produce a distinct sequence of values from successive calls.


# 21.3.2.29 Math.round ( _x_ )

This function returns the Number value that is closest to _x_ and is integral. If two [integral Numbers](#integral-number) are equally close to _x_, then the result is the Number value that is closer to +∞. If _x_ is already integral, the result is _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite) or _n_ is an [integral Number](#integral-number), return _n_.
3.  If _n_ < 0.5<sub>𝔽</sub> and _n_ > +0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ < \-0<sub>𝔽</sub> and _n_ ≥ \-0.5<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
5.  Return the [integral Number](#integral-number) closest to _n_, preferring the Number closer to +∞ in the case of a tie.

Note 1

`Math.round(3.5)` returns 4, but `Math.round(-3.5)` returns -3.

Note 2

The value of `Math.round(x)` is not always the same as the value of `Math.floor(x + 0.5)`. When `x` is \-0<sub>𝔽</sub> or `x` is less than \-0<sub>𝔽</sub> but greater than or equal to \-0.5<sub>𝔽</sub>, `Math.round(x)` returns \-0<sub>𝔽</sub>, but `Math.floor(x + 0.5)` returns +0<sub>𝔽</sub>. `Math.round(x)` may also differ from the value of `Math.floor(x + 0.5)`because of internal rounding when computing `x + 0.5`.


# 21.3.2.30 Math.sign ( _x_ )

This function returns the sign of _x_, indicating whether _x_ is positive, negative, or zero.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ < \-0<sub>𝔽</sub>, return \-1<sub>𝔽</sub>.
4.  Return 1<sub>𝔽</sub>.


# 21.3.2.31 Math.sin ( _x_ )

This function returns the sine of _x_. The argument is expressed in radians.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return NaN.
4.  Return an [implementation-approximated](#implementation-approximated) Number value representing the sine of [ℝ](#ℝ)(_n_).


# 21.3.2.32 Math.sinh ( _x_ )

This function returns the hyperbolic sine of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite) or _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return _n_.
3.  Return an [implementation-approximated](#implementation-approximated) Number value representing the hyperbolic sine of [ℝ](#ℝ)(_n_).

Note

The value of `Math.sinh(x)` is the same as the value of `(Math.exp(x) - Math.exp(-x)) / 2`.


# 21.3.2.33 Math.sqrt ( _x_ )

This function returns the square root of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, \-0<sub>𝔽</sub>, or +∞<sub>𝔽</sub>, return _n_.
3.  If _n_ < \-0<sub>𝔽</sub>, return NaN.
4.  Return [𝔽](#𝔽)(the square root of [ℝ](#ℝ)(_n_)).


# 21.3.2.34 Math.sumPrecise ( _items_ )

Given an [iterable](#sec-iterable-interface) of Numbers, this function sums each value in the [iterable](#sec-iterable-interface) and returns their sum. If any value [is not a Number](#sec-ecmascript-language-types-number-type) it throws a TypeError exception.

It performs the following steps when called:

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_items_).
2.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_items_, sync).
3.  Let _state_ be minus-zero.
4.  Let _sum_ be 0.
5.  Let _count_ be 0.
6.  Let _next_ be not-started.
7.  Repeat, while _next_ is not done,
    1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is not done, then
        1.  If _count_ ≥ 2<sup>53</sup> - 1, then
            1.  NOTE: This step is not expected to be reached in practice and is included only so that implementations may rely on inputs being "reasonably sized" without violating this specification.
            2.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created RangeError object).
            3.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _error_).
        2.  If _next_ [is not a Number](#sec-ecmascript-language-types-number-type), then
            1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
            2.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _error_).
        3.  Let _n_ be _next_.
        4.  If _state_ is not not-a-number, then
            1.  If _n_ is NaN, then
                1.  Set _state_ to not-a-number.
            2.  Else if _n_ is +∞<sub>𝔽</sub>, then
                1.  If _state_ is minus-infinity, set _state_ to not-a-number.
                2.  Else, set _state_ to plus-infinity.
            3.  Else if _n_ is \-∞<sub>𝔽</sub>, then
                1.  If _state_ is plus-infinity, set _state_ to not-a-number.
                2.  Else, set _state_ to minus-infinity.
            4.  Else if _n_ is not \-0<sub>𝔽</sub> and _state_ is either minus-zero or finite, then
                1.  Set _state_ to finite.
                2.  Set _sum_ to _sum_ + [ℝ](#ℝ)(_n_).
        5.  Set _count_ to _count_ + 1.
8.  If _state_ is not-a-number, return NaN.
9.  If _state_ is plus-infinity, return +∞<sub>𝔽</sub>.
10.  If _state_ is minus-infinity, return \-∞<sub>𝔽</sub>.
11.  If _state_ is minus-zero, return \-0<sub>𝔽</sub>.
12.  Return [𝔽](#𝔽)(_sum_).

Note

The value of _sum_ can be computed without arbitrary-precision arithmetic by a variety of algorithms. One such is the "Grow-Expansion" algorithm given in *Adaptive Precision Floating-Point Arithmetic and Fast Robust Geometric Predicates* by Jonathan Richard Shewchuk. A more recent algorithm is given in "[Fast exact summation using small and large superaccumulators](https://arxiv.org/abs/1505.05571)", code for which is available at [https://gitlab.com/radfordneal/xsum](https://gitlab.com/radfordneal/xsum).


# 21.3.2.35 Math.tan ( _x_ )

This function returns the tangent of _x_. The argument is expressed in radians.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ is either +∞<sub>𝔽</sub> or \-∞<sub>𝔽</sub>, return NaN.
4.  Return an [implementation-approximated](#implementation-approximated) Number value representing the tangent of [ℝ](#ℝ)(_n_).


# 21.3.2.36 Math.tanh ( _x_ )

This function returns the hyperbolic tangent of _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is one of NaN, +0<sub>𝔽</sub>, or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ is +∞<sub>𝔽</sub>, return 1<sub>𝔽</sub>.
4.  If _n_ is \-∞<sub>𝔽</sub>, return \-1<sub>𝔽</sub>.
5.  Return an [implementation-approximated](#implementation-approximated) Number value representing the hyperbolic tangent of [ℝ](#ℝ)(_n_).

Note

The value of `Math.tanh(x)` is the same as the value of `(Math.exp(x) - Math.exp(-x)) / (Math.exp(x) + Math.exp(-x))`.


# 21.3.2.37 Math.trunc ( _x_ )

This function returns the integral part of the number _x_, removing any fractional digits. If _x_ is already integral, the result is _x_.

It performs the following steps when called:

1.  Let _n_ be ? [ToNumber](#sec-tonumber)(_x_).
2.  If _n_ is not [finite](#finite) or _n_ is either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub>, return _n_.
3.  If _n_ < 1<sub>𝔽</sub> and _n_ > +0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _n_ < \-0<sub>𝔽</sub> and _n_ > \-1<sub>𝔽</sub>, return \-0<sub>𝔽</sub>.
5.  Return the [integral Number](#integral-number) nearest _n_ in the direction of +0<sub>𝔽</sub>.


# 21.4 Date Objects


# 21.4.1 Overview of Date Objects and Definitions of Abstract Operations

The following [abstract operations](#sec-algorithm-conventions-abstract-operations) operate on [time values](#sec-time-values-and-time-range) (defined in [21.4.1.1](#sec-time-values-and-time-range)). Note that, in every case, if any argument to one of these functions is NaN, the result will be NaN.


# 21.4.1.1 Time Values and Time Range

Time measurement in ECMAScript is analogous to time measurement in POSIX, in particular sharing definition in terms of the proleptic Gregorian calendar, an epoch of midnight at the beginning of 1 January 1970 UTC, and an accounting of every day as comprising exactly 86,400 seconds (each of which is 1000 milliseconds long).

An ECMAScript time value [is a Number](#sec-ecmascript-language-types-number-type), either a [finite](#finite) [integral Number](#integral-number) representing an instant in time to millisecond precision or NaN representing no specific instant. A time value that is a multiple of 24 × 60 × 60 × 1000 = 86,400,000 (i.e., is 86,400,000 × _d_ for some [integer](#integer) _d_) represents the instant at the start of the UTC day that follows the [epoch](#epoch) by _d_ whole UTC days (preceding the [epoch](#epoch) for negative _d_). Every other [finite](#finite) time value _t_ is defined relative to the greatest preceding time value _s_ that is such a multiple, and represents the instant that occurs within the same UTC day as _s_ but follows it by (_t_ - _s_) milliseconds.

Time values do not account for UTC leap seconds—there are no time values representing instants within positive leap seconds, and there are time values representing instants removed from the UTC timeline by negative leap seconds. However, the definition of time values nonetheless yields piecewise alignment with UTC, with discontinuities only at leap second boundaries and zero difference outside of leap seconds.

A Number can exactly represent all [integers](#integer) from -9,007,199,254,740,992 to 9,007,199,254,740,992 ([21.1.2.8](#sec-number.min_safe_integer) and [21.1.2.6](#sec-number.max_safe_integer)). A time value supports a slightly smaller range of -8,640,000,000,000,000 to 8,640,000,000,000,000 milliseconds. This yields a supported time value range of exactly -100,000,000 days to 100,000,000 days relative to midnight at the beginning of 1 January 1970 UTC.

The exact moment of midnight at the beginning of 1 January 1970 UTC is represented by the time value +0<sub>𝔽</sub>.

Note

In the proleptic Gregorian calendar, leap years are precisely those which are both divisible by 4 and either divisible by 400 or not divisible by 100.

The 400 year cycle of the proleptic Gregorian calendar contains 97 leap years. This yields an average of 365.2425 days per year, which is 31,556,952,000 milliseconds. Therefore, the maximum range a Number could represent exactly with millisecond precision is approximately -285,426 to 285,426 years relative to 1970. The smaller range supported by a time value as specified in this section is approximately -273,790 to 273,790 years relative to 1970.


# 21.4.1.2 Time-related Constants

These constants are referenced by algorithms in the following sections.

HoursPerDay = 24

MinutesPerHour = 60

SecondsPerMinute = 60

msPerSecond = 1000<sub>𝔽</sub>

msPerMinute = 60000<sub>𝔽</sub> = [msPerSecond](#eqn-msPerSecond) × [𝔽](#𝔽)([SecondsPerMinute](#eqn-SecondsPerMinute))

msPerHour = 3600000<sub>𝔽</sub> = [msPerMinute](#eqn-msPerMinute) × [𝔽](#𝔽)([MinutesPerHour](#eqn-MinutesPerHour))

msPerDay = 86400000<sub>𝔽</sub> = [msPerHour](#eqn-msPerHour) × [𝔽](#𝔽)([HoursPerDay](#eqn-HoursPerDay))


# 21.4.1.3 Day ( _t_ )

The abstract operation Day takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number). It returns the day number of the day in which _t_ falls. It performs the following steps when called:

1.  Return [𝔽](#𝔽)([floor](#eqn-floor)([ℝ](#ℝ)(_t_ / [msPerDay](#eqn-msPerDay)))).


# 21.4.1.4 TimeWithinDay ( _t_ )

The abstract operation TimeWithinDay takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [interval](#interval) from +0<sub>𝔽</sub> (inclusive) to [msPerDay](#eqn-msPerDay) (exclusive). It returns the number of milliseconds since the start of the day in which _t_ falls. It performs the following steps when called:

1.  Return [𝔽](#𝔽)([ℝ](#ℝ)(_t_) [modulo](#eqn-modulo) [ℝ](#ℝ)([msPerDay](#eqn-msPerDay))).


# 21.4.1.5 DaysInYear ( _y_ )

The abstract operation DaysInYear takes argument _y_ (an [integral Number](#integral-number)) and returns 365<sub>𝔽</sub> or 366<sub>𝔽</sub>. It returns the number of days in year _y_. Leap years have 366 days; all other years have 365. It performs the following steps when called:

1.  Let _ry_ be [ℝ](#ℝ)(_y_).
2.  If (_ry_ [modulo](#eqn-modulo) 400) = 0, return 366<sub>𝔽</sub>.
3.  If (_ry_ [modulo](#eqn-modulo) 100) = 0, return 365<sub>𝔽</sub>.
4.  If (_ry_ [modulo](#eqn-modulo) 4) = 0, return 366<sub>𝔽</sub>.
5.  Return 365<sub>𝔽</sub>.


# 21.4.1.6 DayFromYear ( _y_ )

The abstract operation DayFromYear takes argument _y_ (an [integral Number](#integral-number)) and returns an [integral Number](#integral-number). It returns the day number of the first day of year _y_. It performs the following steps when called:

1.  Let _ry_ be [ℝ](#ℝ)(_y_).
2.  NOTE: In the following steps, _numYears1_, _numYears4_, _numYears100_, and _numYears400_ represent the number of years divisible by 1, 4, 100, and 400, respectively, that occur between the [epoch](#epoch) and the start of year _y_. The number is negative if _y_ is before the [epoch](#epoch).
3.  Let _numYears1_ be (_ry_ - 1970).
4.  Let _numYears4_ be [floor](#eqn-floor)((_ry_ - 1969) / 4).
5.  Let _numYears100_ be [floor](#eqn-floor)((_ry_ - 1901) / 100).
6.  Let _numYears400_ be [floor](#eqn-floor)((_ry_ - 1601) / 400).
7.  Return [𝔽](#𝔽)(365 × _numYears1_ + _numYears4_ - _numYears100_ + _numYears400_).


# 21.4.1.7 TimeFromYear ( _y_ )

The abstract operation TimeFromYear takes argument _y_ (an [integral Number](#integral-number)) and returns a [time value](#sec-time-values-and-time-range). It returns the [time value](#sec-time-values-and-time-range) of the start of year _y_. It performs the following steps when called:

1.  Return [msPerDay](#eqn-msPerDay) × [DayFromYear](#sec-dayfromyear)(_y_).


# 21.4.1.8 YearFromTime ( _t_ )

The abstract operation YearFromTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number). It returns the year in which _t_ falls. It performs the following steps when called:

1.  Return the largest [integral Number](#integral-number) _y_ (closest to +∞) such that [TimeFromYear](#sec-timefromyear)(_y_) ≤ _t_.


# 21.4.1.9 DayWithinYear ( _t_ )

The abstract operation DayWithinYear takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 365<sub>𝔽</sub>. It performs the following steps when called:

1.  Return [Day](#sec-day)(_t_) - [DayFromYear](#sec-dayfromyear)([YearFromTime](#sec-yearfromtime)(_t_)).


# 21.4.1.10 InLeapYear ( _t_ )

The abstract operation InLeapYear takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns +0<sub>𝔽</sub> or 1<sub>𝔽</sub>. It returns 1<sub>𝔽</sub> if _t_ is within a leap year and +0<sub>𝔽</sub> otherwise. It performs the following steps when called:

1.  If [DaysInYear](#sec-daysinyear)([YearFromTime](#sec-yearfromtime)(_t_)) is 366<sub>𝔽</sub>, return 1<sub>𝔽</sub>; else return +0<sub>𝔽</sub>.


# 21.4.1.11 MonthFromTime ( _t_ )

The abstract operation MonthFromTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 11<sub>𝔽</sub>. It returns a Number identifying the month in which _t_ falls. A month value of +0<sub>𝔽</sub> specifies January; 1<sub>𝔽</sub> specifies February; 2<sub>𝔽</sub> specifies March; 3<sub>𝔽</sub> specifies April; 4<sub>𝔽</sub> specifies May; 5<sub>𝔽</sub> specifies June; 6<sub>𝔽</sub> specifies July; 7<sub>𝔽</sub> specifies August; 8<sub>𝔽</sub> specifies September; 9<sub>𝔽</sub> specifies October; 10<sub>𝔽</sub> specifies November; and 11<sub>𝔽</sub> specifies December. Note that MonthFromTime(+0<sub>𝔽</sub>) = +0<sub>𝔽</sub>, corresponding to Thursday, 1 January 1970. It performs the following steps when called:

1.  Let _inLeapYear_ be [InLeapYear](#sec-inleapyear)(_t_).
2.  Let _dayWithinYear_ be [DayWithinYear](#sec-daywithinyear)(_t_).
3.  If _dayWithinYear_ < 31<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
4.  If _dayWithinYear_ < 59<sub>𝔽</sub> + _inLeapYear_, return 1<sub>𝔽</sub>.
5.  If _dayWithinYear_ < 90<sub>𝔽</sub> + _inLeapYear_, return 2<sub>𝔽</sub>.
6.  If _dayWithinYear_ < 120<sub>𝔽</sub> + _inLeapYear_, return 3<sub>𝔽</sub>.
7.  If _dayWithinYear_ < 151<sub>𝔽</sub> + _inLeapYear_, return 4<sub>𝔽</sub>.
8.  If _dayWithinYear_ < 181<sub>𝔽</sub> + _inLeapYear_, return 5<sub>𝔽</sub>.
9.  If _dayWithinYear_ < 212<sub>𝔽</sub> + _inLeapYear_, return 6<sub>𝔽</sub>.
10.  If _dayWithinYear_ < 243<sub>𝔽</sub> + _inLeapYear_, return 7<sub>𝔽</sub>.
11.  If _dayWithinYear_ < 273<sub>𝔽</sub> + _inLeapYear_, return 8<sub>𝔽</sub>.
12.  If _dayWithinYear_ < 304<sub>𝔽</sub> + _inLeapYear_, return 9<sub>𝔽</sub>.
13.  If _dayWithinYear_ < 334<sub>𝔽</sub> + _inLeapYear_, return 10<sub>𝔽</sub>.
14.  [Assert](#assert): _dayWithinYear_ < 365<sub>𝔽</sub> + _inLeapYear_.
15.  Return 11<sub>𝔽</sub>.


# 21.4.1.12 DateFromTime ( _t_ )

The abstract operation DateFromTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from 1<sub>𝔽</sub> to 31<sub>𝔽</sub>. It returns the day of the month in which _t_ falls. It performs the following steps when called:

1.  Let _inLeapYear_ be [InLeapYear](#sec-inleapyear)(_t_).
2.  Let _dayWithinYear_ be [DayWithinYear](#sec-daywithinyear)(_t_).
3.  Let _month_ be [MonthFromTime](#sec-monthfromtime)(_t_).
4.  If _month_ is +0<sub>𝔽</sub>, return _dayWithinYear_ + 1<sub>𝔽</sub>.
5.  If _month_ is 1<sub>𝔽</sub>, return _dayWithinYear_ - 30<sub>𝔽</sub>.
6.  If _month_ is 2<sub>𝔽</sub>, return _dayWithinYear_ - 58<sub>𝔽</sub> - _inLeapYear_.
7.  If _month_ is 3<sub>𝔽</sub>, return _dayWithinYear_ - 89<sub>𝔽</sub> - _inLeapYear_.
8.  If _month_ is 4<sub>𝔽</sub>, return _dayWithinYear_ - 119<sub>𝔽</sub> - _inLeapYear_.
9.  If _month_ is 5<sub>𝔽</sub>, return _dayWithinYear_ - 150<sub>𝔽</sub> - _inLeapYear_.
10.  If _month_ is 6<sub>𝔽</sub>, return _dayWithinYear_ - 180<sub>𝔽</sub> - _inLeapYear_.
11.  If _month_ is 7<sub>𝔽</sub>, return _dayWithinYear_ - 211<sub>𝔽</sub> - _inLeapYear_.
12.  If _month_ is 8<sub>𝔽</sub>, return _dayWithinYear_ - 242<sub>𝔽</sub> - _inLeapYear_.
13.  If _month_ is 9<sub>𝔽</sub>, return _dayWithinYear_ - 272<sub>𝔽</sub> - _inLeapYear_.
14.  If _month_ is 10<sub>𝔽</sub>, return _dayWithinYear_ - 303<sub>𝔽</sub> - _inLeapYear_.
15.  [Assert](#assert): _month_ is 11<sub>𝔽</sub>.
16.  Return _dayWithinYear_ - 333<sub>𝔽</sub> - _inLeapYear_.


# 21.4.1.13 WeekDay ( _t_ )

The abstract operation WeekDay takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 6<sub>𝔽</sub>. It returns a Number identifying the day of the week in which _t_ falls. A weekday value of +0<sub>𝔽</sub> specifies Sunday; 1<sub>𝔽</sub> specifies Monday; 2<sub>𝔽</sub> specifies Tuesday; 3<sub>𝔽</sub> specifies Wednesday; 4<sub>𝔽</sub> specifies Thursday; 5<sub>𝔽</sub> specifies Friday; and 6<sub>𝔽</sub> specifies Saturday. Note that WeekDay(+0<sub>𝔽</sub>) = 4<sub>𝔽</sub>, corresponding to Thursday, 1 January 1970. It performs the following steps when called:

1.  Return [𝔽](#𝔽)([ℝ](#ℝ)([Day](#sec-day)(_t_) + 4<sub>𝔽</sub>) [modulo](#eqn-modulo) 7).


# 21.4.1.14 HourFromTime ( _t_ )

The abstract operation HourFromTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 23<sub>𝔽</sub>. It returns the hour of the day in which _t_ falls. It performs the following steps when called:

1.  Return [𝔽](#𝔽)([floor](#eqn-floor)([ℝ](#ℝ)(_t_ / [msPerHour](#eqn-msPerHour))) [modulo](#eqn-modulo) [HoursPerDay](#eqn-HoursPerDay)).


# 21.4.1.15 MinFromTime ( _t_ )

The abstract operation MinFromTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 59<sub>𝔽</sub>. It returns the minute of the hour in which _t_ falls. It performs the following steps when called:

1.  Return [𝔽](#𝔽)([floor](#eqn-floor)([ℝ](#ℝ)(_t_ / [msPerMinute](#eqn-msPerMinute))) [modulo](#eqn-modulo) [MinutesPerHour](#eqn-MinutesPerHour)).


# 21.4.1.16 SecFromTime ( _t_ )

The abstract operation SecFromTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 59<sub>𝔽</sub>. It returns the second of the minute in which _t_ falls. It performs the following steps when called:

1.  Return [𝔽](#𝔽)([floor](#eqn-floor)([ℝ](#ℝ)(_t_ / [msPerSecond](#eqn-msPerSecond))) [modulo](#eqn-modulo) [SecondsPerMinute](#eqn-SecondsPerMinute)).


# 21.4.1.17 msFromTime ( _t_ )

The abstract operation msFromTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number) in the [inclusive interval](#inclusive-interval) from +0<sub>𝔽</sub> to 999<sub>𝔽</sub>. It returns the millisecond of the second in which _t_ falls. It performs the following steps when called:

1.  Return [𝔽](#𝔽)([ℝ](#ℝ)(_t_) [modulo](#eqn-modulo) [ℝ](#ℝ)([msPerSecond](#eqn-msPerSecond))).


# 21.4.1.18 GetUTCEpochNanoseconds ( _year_, _month_, _day_, _hour_, _minute_, _second_, _millisecond_, _microsecond_, _nanosecond_ )

The abstract operation GetUTCEpochNanoseconds takes arguments _year_ (an [integer](#integer)), _month_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 1 to 12), _day_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 1 to 31), _hour_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 23), _minute_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 59), _second_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 59), _millisecond_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 999), _microsecond_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 999), and _nanosecond_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 999) and returns a BigInt. The returned value represents a number of nanoseconds since the [epoch](#epoch) that corresponds to the given ISO 8601 calendar date and wall-clock time in UTC. It performs the following steps when called:

1.  Let _date_ be [MakeDay](#sec-makeday)([𝔽](#𝔽)(_year_), [𝔽](#𝔽)(_month_ - 1), [𝔽](#𝔽)(_day_)).
2.  Let _time_ be [MakeTime](#sec-maketime)([𝔽](#𝔽)(_hour_), [𝔽](#𝔽)(_minute_), [𝔽](#𝔽)(_second_), [𝔽](#𝔽)(_millisecond_)).
3.  Let _ms_ be [MakeDate](#sec-makedate)(_date_, _time_).
4.  [Assert](#assert): _ms_ is an [integral Number](#integral-number).
5.  Return [ℤ](#ℤ)([ℝ](#ℝ)(_ms_) × 10<sup>6</sup> + _microsecond_ × 10<sup>3</sup> + _nanosecond_).


# 21.4.1.19 Time Zone Identifiers

Time zones in ECMAScript are represented by time zone identifiers, which are Strings composed entirely of code units in the [inclusive interval](#inclusive-interval) from 0x0000 to 0x007F. Time zones supported by an ECMAScript implementation may be available named time zones, represented by the _\[\[Identifier\]\]_ field of the [Time Zone Identifier Records](#sec-time-zone-identifier-record) returned by [AvailableNamedTimeZoneIdentifiers](#sec-availablenamedtimezoneidentifiers), or offset time zones, represented by Strings for which [IsTimeZoneOffsetString](#sec-istimezoneoffsetstring) returns true.

A primary time zone identifier is the preferred identifier for an available named time zone. A non-primary time zone identifier is an identifier for an available named time zone that is not a primary time zone identifier. An available named time zone identifier is either a primary time zone identifier or a non-primary time zone identifier. Each available named time zone identifier is associated with exactly one available named time zone. Each available named time zone is associated with exactly one primary time zone identifier and zero or more non-primary time zone identifiers.

ECMAScript implementations must support an available named time zone with the identifier "UTC", which must be the primary time zone identifier for the UTC time zone. In addition, implementations may support any number of other available named time zones.

Implementations that follow the requirements for time zones as described in the ECMA-402 Internationalization API specification are called time zone aware. Time zone aware implementations must support available named time zones corresponding to the Zone and Link names of the IANA Time Zone Database, and only such names. In time zone aware implementations, a primary time zone identifier is a Zone name, and a non-primary time zone identifier is a Link name, respectively, in the IANA Time Zone Database except as specifically overridden by [AvailableNamedTimeZoneIdentifiers](#sec-availablenamedtimezoneidentifiers) as specified in the ECMA-402 specification. Implementations that do not support the entire IANA Time Zone Database are still recommended to use IANA Time Zone Database names as identifiers to represent time zones.


# 21.4.1.20 GetNamedTimeZoneEpochNanoseconds ( _timeZoneIdentifier_, _year_, _month_, _day_, _hour_, _minute_, _second_, _millisecond_, _microsecond_, _nanosecond_ )

The [implementation-defined](#implementation-defined) abstract operation GetNamedTimeZoneEpochNanoseconds takes arguments _timeZoneIdentifier_ (a String), _year_ (an [integer](#integer)), _month_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 1 to 12), _day_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 1 to 31), _hour_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 23), _minute_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 59), _second_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 59), _millisecond_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 999), _microsecond_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 999), and _nanosecond_ (an [integer](#integer) in the [inclusive interval](#inclusive-interval) from 0 to 999) and returns a [List](#sec-list-and-record-specification-type) of BigInts. Each value in the returned [List](#sec-list-and-record-specification-type) represents a number of nanoseconds since the [epoch](#epoch) that corresponds to the given ISO 8601 calendar date and wall-clock time in the named time zone identified by _timeZoneIdentifier_.

When the input represents a local time occurring more than once because of a negative time zone transition (e.g. when daylight saving time ends or the time zone offset is decreased due to a time zone rule change), the returned [List](#sec-list-and-record-specification-type) will have more than one element and will be sorted by ascending numerical value. When the input represents a local time skipped because of a positive time zone transition (e.g. when daylight saving time begins or the time zone offset is increased due to a time zone rule change), the returned [List](#sec-list-and-record-specification-type) will be empty. Otherwise, the returned [List](#sec-list-and-record-specification-type) will have one element.

The default implementation of GetNamedTimeZoneEpochNanoseconds, to be used for ECMAScript implementations that do not include local political rules for any time zones, performs the following steps when called:

1.  [Assert](#assert): _timeZoneIdentifier_ is "UTC".
2.  Let _epochNanoseconds_ be [GetUTCEpochNanoseconds](#sec-getutcepochnanoseconds)(_year_, _month_, _day_, _hour_, _minute_, _second_, _millisecond_, _microsecond_, _nanosecond_).
3.  Return « _epochNanoseconds_ ».

Note

It is required for [time zone aware](#sec-time-zone-identifiers) implementations (and recommended for all others) to use the time zone information of the IANA Time Zone Database [https://www.iana.org/time-zones/](https://www.iana.org/time-zones/).

1:30 AM on 5 November 2017 in America/New\_York is repeated twice, so GetNamedTimeZoneEpochNanoseconds("America/New\_York", 2017, 11, 5, 1, 30, 0, 0, 0, 0) would return a [List](#sec-list-and-record-specification-type) of length 2 in which the first element represents 05:30 UTC (corresponding with 01:30 US Eastern Daylight Time at UTC offset -04:00) and the second element represents 06:30 UTC (corresponding with 01:30 US Eastern Standard Time at UTC offset -05:00).

2:30 AM on 12 March 2017 in America/New\_York does not exist, so GetNamedTimeZoneEpochNanoseconds("America/New\_York", 2017, 3, 12, 2, 30, 0, 0, 0, 0) would return an empty [List](#sec-list-and-record-specification-type).


# 21.4.1.21 GetNamedTimeZoneOffsetNanoseconds ( _timeZoneIdentifier_, _epochNanoseconds_ )

The [implementation-defined](#implementation-defined) abstract operation GetNamedTimeZoneOffsetNanoseconds takes arguments _timeZoneIdentifier_ (a String) and _epochNanoseconds_ (a BigInt) and returns an [integer](#integer).

The returned [integer](#integer) represents the offset from UTC of the named time zone identified by _timeZoneIdentifier_, at the instant corresponding with _epochNanoseconds_ relative to the [epoch](#epoch), both in nanoseconds.

The default implementation of GetNamedTimeZoneOffsetNanoseconds, to be used for ECMAScript implementations that do not include local political rules for any time zones, performs the following steps when called:

1.  [Assert](#assert): _timeZoneIdentifier_ is "UTC".
2.  Return 0.

Note

Time zone offset values may be positive or negative.


# 21.4.1.22 Time Zone Identifier Record

A Time Zone Identifier Record is a [Record](#sec-list-and-record-specification-type) used to describe an [available named time zone identifier](#sec-time-zone-identifiers) and its corresponding [primary time zone identifier](#sec-time-zone-identifiers).

Time Zone Identifier Records have the fields listed in [Table 62](#table-time-zone-identifier-record-fields).

Table 62: [Time Zone Identifier Record](#sec-time-zone-identifier-record) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Identifier]]</var></td><td>a String</td><td>An <emu-xref href="#sec-time-zone-identifiers" id="_ref_10429"><a href="#sec-time-zone-identifiers">available named time zone identifier</a></emu-xref> that is supported by the implementation.</td></tr><tr><td><var class="field">[[PrimaryIdentifier]]</var></td><td>a String</td><td>The <emu-xref href="#sec-time-zone-identifiers" id="_ref_10430"><a href="#sec-time-zone-identifiers">primary time zone identifier</a></emu-xref> that <var class="field">[[Identifier]]</var> resolves to.</td></tr></tbody></table>

Note

If _\[\[Identifier\]\]_ is a [primary time zone identifier](#sec-time-zone-identifiers), then _\[\[Identifier\]\]_ is _\[\[PrimaryIdentifier\]\]_.


# 21.4.1.23 AvailableNamedTimeZoneIdentifiers ( )

The [implementation-defined](#implementation-defined) abstract operation AvailableNamedTimeZoneIdentifiers takes no arguments and returns a [List](#sec-list-and-record-specification-type) of [Time Zone Identifier Records](#sec-time-zone-identifier-record). Its result describes all [available named time zone identifiers](#sec-time-zone-identifiers) in this implementation, as well as the [primary time zone identifier](#sec-time-zone-identifiers) corresponding to each [available named time zone identifier](#sec-time-zone-identifiers). The [List](#sec-list-and-record-specification-type) is ordered according to the _\[\[Identifier\]\]_ field of each [Time Zone Identifier Record](#sec-time-zone-identifier-record).

[Time zone aware](#sec-time-zone-identifiers) implementations, including all implementations that implement the ECMA-402 Internationalization API, must implement the AvailableNamedTimeZoneIdentifiers abstract operation as specified in the ECMA-402 specification. For implementations that are not [time zone aware](#sec-time-zone-identifiers), AvailableNamedTimeZoneIdentifiers performs the following steps when called:

1.  If the implementation does not include local political rules for any time zones, then
    1.  Return « the [Time Zone Identifier Record](#sec-time-zone-identifier-record) { _\[\[Identifier\]\]_: "UTC", _\[\[PrimaryIdentifier\]\]_: "UTC" } ».
2.  Let _identifiers_ be the [List](#sec-list-and-record-specification-type) of unique [available named time zone identifiers](#sec-time-zone-identifiers), sorted according to [lexicographic code unit order](#lexicographic-code-unit-order).
3.  Let _result_ be a new empty [List](#sec-list-and-record-specification-type).
4.  For each element _identifier_ of _identifiers_, do
    1.  Let _primary_ be _identifier_.
    2.  If _identifier_ is a [non-primary time zone identifier](#sec-time-zone-identifiers) in this implementation and _identifier_ is not "UTC", then
        1.  Set _primary_ to the [primary time zone identifier](#sec-time-zone-identifiers) associated with _identifier_.
        2.  NOTE: An implementation may need to resolve _identifier_ iteratively to obtain the [primary time zone identifier](#sec-time-zone-identifiers).
    3.  Let _record_ be the [Time Zone Identifier Record](#sec-time-zone-identifier-record) { _\[\[Identifier\]\]_: _identifier_, _\[\[PrimaryIdentifier\]\]_: _primary_ }.
    4.  Append _record_ to _result_.
5.  [Assert](#assert): _result_ contains a [Time Zone Identifier Record](#sec-time-zone-identifier-record) _r_ such that _r_._\[\[Identifier\]\]_ is "UTC" and _r_._\[\[PrimaryIdentifier\]\]_ is "UTC".
6.  Return _result_.


# 21.4.1.24 SystemTimeZoneIdentifier ( )

The [implementation-defined](#implementation-defined) abstract operation SystemTimeZoneIdentifier takes no arguments and returns a String. It returns a String representing the [host environment](#host-environment)'s current time zone, which is either a String representing a UTC offset for which [IsTimeZoneOffsetString](#sec-istimezoneoffsetstring) returns true, or a [primary time zone identifier](#sec-time-zone-identifiers). It performs the following steps when called:

1.  If the implementation only supports the UTC time zone, return "UTC".
2.  Let _systemTimeZoneString_ be the String representing the [host environment](#host-environment)'s current time zone, either a [primary time zone identifier](#sec-time-zone-identifiers) or an [offset time zone](#sec-time-zone-identifiers) identifier.
3.  Return _systemTimeZoneString_.

Note

To ensure the level of functionality that implementations commonly provide in the methods of the Date object, it is recommended that SystemTimeZoneIdentifier return an IANA time zone name corresponding to the [host environment](#host-environment)'s time zone setting, if such a thing exists. [GetNamedTimeZoneEpochNanoseconds](#sec-getnamedtimezoneepochnanoseconds) and [GetNamedTimeZoneOffsetNanoseconds](#sec-getnamedtimezoneoffsetnanoseconds) must reflect the local political rules for standard time and daylight saving time in that time zone, if such rules exist.

For example, if the [host environment](#host-environment) is a browser on a system where the user has chosen US Eastern Time as their time zone, SystemTimeZoneIdentifier returns "America/New\_York".


# 21.4.1.25 LocalTime ( _t_ )

The abstract operation LocalTime takes argument _t_ (a [finite](#finite) [time value](#sec-time-values-and-time-range)) and returns an [integral Number](#integral-number). It converts _t_ from UTC to local time. The local political rules for standard time and daylight saving time in effect at _t_ should be used to determine the result in the way specified in this section. It performs the following steps when called:

1.  Let _systemTimeZoneIdentifier_ be [SystemTimeZoneIdentifier](#sec-systemtimezoneidentifier)().
2.  If [IsTimeZoneOffsetString](#sec-istimezoneoffsetstring)(_systemTimeZoneIdentifier_) is true, then
    1.  Let _offsetNs_ be [ParseTimeZoneOffsetString](#sec-parsetimezoneoffsetstring)(_systemTimeZoneIdentifier_).
3.  Else,
    1.  Let _offsetNs_ be [GetNamedTimeZoneOffsetNanoseconds](#sec-getnamedtimezoneoffsetnanoseconds)(_systemTimeZoneIdentifier_, [ℤ](#ℤ)([ℝ](#ℝ)(_t_) × 10<sup>6</sup>)).
4.  Let _offsetMs_ be [truncate](#eqn-truncate)(_offsetNs_ / 10<sup>6</sup>).
5.  Return _t_ + [𝔽](#𝔽)(_offsetMs_).

Note 1

If political rules for the local time _t_ are not available within the implementation, the result is _t_ because [SystemTimeZoneIdentifier](#sec-systemtimezoneidentifier) returns "UTC" and [GetNamedTimeZoneOffsetNanoseconds](#sec-getnamedtimezoneoffsetnanoseconds) returns 0.

Note 2

It is required for [time zone aware](#sec-time-zone-identifiers) implementations (and recommended for all others) to use the time zone information of the IANA Time Zone Database [https://www.iana.org/time-zones/](https://www.iana.org/time-zones/).

Note 3

Two different input [time values](#sec-time-values-and-time-range) _t_<sub>UTC</sub> are converted to the same local time t<sub>local</sub> at a negative time zone transition when there are repeated times (e.g. the daylight saving time ends or the time zone adjustment is decreased.).

LocalTime([UTC](#sec-utc-t)(_t_<sub>local</sub>)) is not necessarily always equal to _t_<sub>local</sub>. Correspondingly, [UTC](#sec-utc-t)(LocalTime(_t_<sub>UTC</sub>)) is not necessarily always equal to _t_<sub>UTC</sub>.


# 21.4.1.26 UTC ( _t_ )

The abstract operation UTC takes argument _t_ (a Number) and returns a [time value](#sec-time-values-and-time-range). It converts _t_ from local time to a UTC [time value](#sec-time-values-and-time-range). The local political rules for standard time and daylight saving time in effect at _t_ should be used to determine the result in the way specified in this section. It performs the following steps when called:

1.  If _t_ is not [finite](#finite), return NaN.
2.  Let _systemTimeZoneIdentifier_ be [SystemTimeZoneIdentifier](#sec-systemtimezoneidentifier)().
3.  If [IsTimeZoneOffsetString](#sec-istimezoneoffsetstring)(_systemTimeZoneIdentifier_) is true, then
    1.  Let _offsetNs_ be [ParseTimeZoneOffsetString](#sec-parsetimezoneoffsetstring)(_systemTimeZoneIdentifier_).
4.  Else,
    1.  Let _possibleInstants_ be [GetNamedTimeZoneEpochNanoseconds](#sec-getnamedtimezoneepochnanoseconds)(_systemTimeZoneIdentifier_, [ℝ](#ℝ)([YearFromTime](#sec-yearfromtime)(_t_)), [ℝ](#ℝ)([MonthFromTime](#sec-monthfromtime)(_t_)) + 1, [ℝ](#ℝ)([DateFromTime](#sec-datefromtime)(_t_)), [ℝ](#ℝ)([HourFromTime](#sec-hourfromtime)(_t_)), [ℝ](#ℝ)([MinFromTime](#sec-minfromtime)(_t_)), [ℝ](#ℝ)([SecFromTime](#sec-secfromtime)(_t_)), [ℝ](#ℝ)([msFromTime](#sec-msfromtime)(_t_)), 0, 0).
    2.  NOTE: The following steps ensure that when _t_ represents local time repeating multiple times at a negative time zone transition (e.g. when the daylight saving time ends or the time zone offset is decreased due to a time zone rule change) or skipped local time at a positive time zone transition (e.g. when the daylight saving time starts or the time zone offset is increased due to a time zone rule change), _t_ is interpreted using the time zone offset before the transition.
    3.  If _possibleInstants_ is not empty, then
        1.  Let _disambiguatedInstant_ be _possibleInstants_\[0\].
    4.  Else,
        1.  NOTE: _t_ represents a local time skipped at a positive time zone transition (e.g. due to daylight saving time starting or a time zone rule change increasing the UTC offset).
        2.  Let _possibleInstantsBefore_ be [GetNamedTimeZoneEpochNanoseconds](#sec-getnamedtimezoneepochnanoseconds)(_systemTimeZoneIdentifier_, [ℝ](#ℝ)([YearFromTime](#sec-yearfromtime)(_tBefore_)), [ℝ](#ℝ)([MonthFromTime](#sec-monthfromtime)(_tBefore_)) + 1, [ℝ](#ℝ)([DateFromTime](#sec-datefromtime)(_tBefore_)), [ℝ](#ℝ)([HourFromTime](#sec-hourfromtime)(_tBefore_)), [ℝ](#ℝ)([MinFromTime](#sec-minfromtime)(_tBefore_)), [ℝ](#ℝ)([SecFromTime](#sec-secfromtime)(_tBefore_)), [ℝ](#ℝ)([msFromTime](#sec-msfromtime)(_tBefore_)), 0, 0), where _tBefore_ is the largest [integral Number](#integral-number) < _t_ for which _possibleInstantsBefore_ is not empty (i.e., _tBefore_ represents the last local time before the transition).
        3.  Let _disambiguatedInstant_ be the last element of _possibleInstantsBefore_.
    5.  Let _offsetNs_ be [GetNamedTimeZoneOffsetNanoseconds](#sec-getnamedtimezoneoffsetnanoseconds)(_systemTimeZoneIdentifier_, _disambiguatedInstant_).
5.  Let _offsetMs_ be [truncate](#eqn-truncate)(_offsetNs_ / 10<sup>6</sup>).
6.  Return _t_ - [𝔽](#𝔽)(_offsetMs_).

Input _t_ is nominally a [time value](#sec-time-values-and-time-range) but may be any Number value. The algorithm must not limit _t_ to the [time value](#sec-time-values-and-time-range) range, so that inputs corresponding with a boundary of the [time value](#sec-time-values-and-time-range) range can be supported regardless of local UTC offset. For example, the maximum [time value](#sec-time-values-and-time-range) is 8.64 × 10<sup>15</sup>, corresponding with "+275760-09-13T00:00:00Z". In an environment where the local time zone offset is ahead of UTC by 1 hour at that instant, it is represented by the larger input of 8.64 × 10<sup>15</sup> + 3.6 × 10<sup>6</sup>, corresponding with "+275760-09-13T01:00:00+01:00".

If political rules for the local time _t_ are not available within the implementation, the result is _t_ because [SystemTimeZoneIdentifier](#sec-systemtimezoneidentifier) returns "UTC" and [GetNamedTimeZoneOffsetNanoseconds](#sec-getnamedtimezoneoffsetnanoseconds) returns 0.

Note 1

It is required for [time zone aware](#sec-time-zone-identifiers) implementations (and recommended for all others) to use the time zone information of the IANA Time Zone Database [https://www.iana.org/time-zones/](https://www.iana.org/time-zones/).

1:30 AM on 5 November 2017 in America/New\_York is repeated twice (fall backward), but it must be interpreted as 1:30 AM UTC-04 instead of 1:30 AM UTC-05. In UTC([TimeClip](#sec-timeclip)([MakeDate](#sec-makedate)([MakeDay](#sec-makeday)(2017, 10, 5), [MakeTime](#sec-maketime)(1, 30, 0, 0)))), the value of _offsetMs_ is \-4 × [msPerHour](#eqn-msPerHour).

2:30 AM on 12 March 2017 in America/New\_York does not exist, but it must be interpreted as 2:30 AM UTC-05 (equivalent to 3:30 AM UTC-04). In UTC([TimeClip](#sec-timeclip)([MakeDate](#sec-makedate)([MakeDay](#sec-makeday)(2017, 2, 12), [MakeTime](#sec-maketime)(2, 30, 0, 0)))), the value of _offsetMs_ is \-5 × [msPerHour](#eqn-msPerHour).

Note 2

UTC([LocalTime](#sec-localtime)(_t_<sub>UTC</sub>)) is not necessarily always equal to _t_<sub>UTC</sub>. Correspondingly, [LocalTime](#sec-localtime)(UTC(_t_<sub>local</sub>)) is not necessarily always equal to _t_<sub>local</sub>.


# 21.4.1.27 MakeTime ( _hour_, _min_, _sec_, _ms_ )

The abstract operation MakeTime takes arguments _hour_ (a Number), _min_ (a Number), _sec_ (a Number), and _ms_ (a Number) and returns a Number. It calculates a number of milliseconds. It performs the following steps when called:

1.  If _hour_ is not [finite](#finite), _min_ is not [finite](#finite), _sec_ is not [finite](#finite), or _ms_ is not [finite](#finite), return NaN.
2.  Let _h_ be [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_hour_)).
3.  Let _m_ be [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_min_)).
4.  Let _s_ be [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_sec_)).
5.  Let _milli_ be [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_ms_)).
6.  Return ((_h_ × [msPerHour](#eqn-msPerHour) + _m_ × [msPerMinute](#eqn-msPerMinute)) + _s_ × [msPerSecond](#eqn-msPerSecond)) + _milli_.

Note

The arithmetic in MakeTime is floating-point arithmetic, which is not associative, so the operations must be performed in the correct order.


# 21.4.1.28 MakeDay ( _year_, _month_, _date_ )

The abstract operation MakeDay takes arguments _year_ (a Number), _month_ (a Number), and _date_ (a Number) and returns a Number. It calculates a number of days. It performs the following steps when called:

1.  If _year_ is not [finite](#finite), _month_ is not [finite](#finite), or _date_ is not [finite](#finite), return NaN.
2.  Let _y_ be [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_year_)).
3.  Let _m_ be [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_month_)).
4.  Let _dt_ be [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_date_)).
5.  Let _ym_ be _y_ + [𝔽](#𝔽)([floor](#eqn-floor)([ℝ](#ℝ)(_m_) / 12)).
6.  If _ym_ is not [finite](#finite), return NaN.
7.  Let _mn_ be [𝔽](#𝔽)([ℝ](#ℝ)(_m_) [modulo](#eqn-modulo) 12).
8.  Find a [finite](#finite) [time value](#sec-time-values-and-time-range) _t_ such that [YearFromTime](#sec-yearfromtime)(_t_) is _ym_, [MonthFromTime](#sec-monthfromtime)(_t_) is _mn_, and [DateFromTime](#sec-datefromtime)(_t_) is 1<sub>𝔽</sub>; but if this is not possible (because some argument is out of range), return NaN.
9.  Return [Day](#sec-day)(_t_) + _dt_ - 1<sub>𝔽</sub>.


# 21.4.1.29 MakeDate ( _day_, _time_ )

The abstract operation MakeDate takes arguments _day_ (a Number) and _time_ (a Number) and returns a Number. It calculates a number of milliseconds. It performs the following steps when called:

1.  If _day_ is not [finite](#finite) or _time_ is not [finite](#finite), return NaN.
2.  Let _tv_ be _day_ × [msPerDay](#eqn-msPerDay) + _time_.
3.  If _tv_ is not [finite](#finite), return NaN.
4.  Return _tv_.


# 21.4.1.30 MakeFullYear ( _year_ )

The abstract operation MakeFullYear takes argument _year_ (a Number) and returns an [integral Number](#integral-number) or NaN. It returns the full year associated with the [integer](#integer) part of _year_, interpreting any value in the [inclusive interval](#inclusive-interval) from 0 to 99 as a count of years since the start of 1900. For alignment with the proleptic Gregorian calendar, "full year" is defined as the signed count of complete years since the start of year 0 (1 B.C.). It performs the following steps when called:

1.  If _year_ is NaN, return NaN.
2.  Let _truncated_ be ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_year_).
3.  If _truncated_ is in the [inclusive interval](#inclusive-interval) from 0 to 99, return 1900<sub>𝔽</sub> + [𝔽](#𝔽)(_truncated_).
4.  Return [𝔽](#𝔽)(_truncated_).


# 21.4.1.31 TimeClip ( _time_ )

The abstract operation TimeClip takes argument _time_ (a Number) and returns a Number. It calculates a number of milliseconds. It performs the following steps when called:

1.  If _time_ is not [finite](#finite), return NaN.
2.  If [abs](#eqn-abs)([ℝ](#ℝ)(_time_)) > 8.64 × 10<sup>15</sup>, return NaN.
3.  Return [𝔽](#𝔽)(! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_time_)).


# 21.4.1.32 Date Time String Format

ECMAScript defines a string interchange format for date-times based upon a simplification of the ISO 8601 calendar date extended format. The format is as follows: `YYYY-MM-DDTHH:mm:ss.sssZ`

Where the elements are as follows:

<table class="lightweight-table"><tbody><tr><td><code>YYYY</code></td><td>is the year in the proleptic Gregorian calendar as four decimal digits from 0000 to 9999, or as an <emu-xref href="#sec-expanded-years" id="_ref_644"><a href="#sec-expanded-years">expanded year</a></emu-xref> of <emu-val>"+"</emu-val> or <emu-val>"-"</emu-val> followed by six decimal digits.</td></tr><tr><td><code>-</code></td><td><emu-val>"-"</emu-val> (hyphen) appears literally twice in the string.</td></tr><tr><td><code>MM</code></td><td>is the month of the year as two decimal digits from 01 (January) to 12 (December).</td></tr><tr><td><code>DD</code></td><td>is the day of the month as two decimal digits from 01 to 31.</td></tr><tr><td><code>T</code></td><td><emu-val>"T"</emu-val> appears literally in the string, to indicate the beginning of the time element.</td></tr><tr><td><code>HH</code></td><td>is the number of complete hours that have passed since midnight as two decimal digits from 00 to 24.</td></tr><tr><td><code>:</code></td><td><emu-val>":"</emu-val> (colon) appears literally twice in the string.</td></tr><tr><td><code>mm</code></td><td>is the number of complete minutes since the start of the hour as two decimal digits from 00 to 59.</td></tr><tr><td><code>ss</code></td><td>is the number of complete seconds since the start of the minute as two decimal digits from 00 to 59.</td></tr><tr><td><code>.</code></td><td><emu-val>"."</emu-val> (dot) appears literally in the string.</td></tr><tr><td><code>sss</code></td><td>is the number of complete milliseconds since the start of the second as three decimal digits.</td></tr><tr><td><code>Z</code></td><td>is the UTC offset representation specified as <emu-val>"Z"</emu-val> (for UTC with no offset) or as either <emu-val>"+"</emu-val> or <emu-val>"-"</emu-val> followed by a time expression <code>HH:mm</code> (a subset of the <emu-xref href="#sec-time-zone-offset-strings" id="_ref_645"><a href="#sec-time-zone-offset-strings">time zone offset string format</a></emu-xref> for indicating local time ahead of or behind UTC, respectively)</td></tr></tbody></table>

This format includes date-only forms:

YYYY
YYYY-MM
YYYY-MM-DD
        

It also includes “date-time” forms that consist of one of the above date-only forms immediately followed by one of the following time forms with an optional UTC offset representation appended:

THH:mm
THH:mm:ss
THH:mm:ss.sss
        

A string containing out-of-bounds or nonconforming elements is not a valid instance of this format.

Note 1

As every day both starts and ends with midnight, the two notations `00:00` and `24:00` are available to distinguish the two midnights that can be associated with one date. This means that the following two notations refer to exactly the same point in time: `1995-02-04T24:00` and `1995-02-05T00:00`. This interpretation of the latter form as "end of a calendar day" is consistent with ISO 8601, even though that specification reserves it for describing time intervals and does not permit it within representations of single points in time.

Note 2

There exists no international standard that specifies abbreviations for civil time zones like CET, EST, etc. and sometimes the same abbreviation is even used for two very different time zones. For this reason, both ISO 8601 and this format specify numeric representations of time zone offsets.


# 21.4.1.32.1 Expanded Years

Covering the full [time value](#sec-time-values-and-time-range) range of approximately 273,790 years forward or backward from 1 January 1970 ([21.4.1.1](#sec-time-values-and-time-range)) requires representing years before 0 or after 9999. ISO 8601 permits expansion of the year representation, but only by mutual agreement of the partners in information interchange. In the simplified ECMAScript format, such an expanded year representation shall have 6 digits and is always prefixed with a + or - sign. The year 0 is considered positive and must be prefixed with a + sign. The representation of the year 0 as -000000 is invalid. Strings matching the [Date Time String Format](#sec-date-time-string-format) with expanded years representing instants in time outside the range of a [time value](#sec-time-values-and-time-range) are treated as unrecognizable by [`Date.parse`](#sec-date.parse) and cause that function to return NaN without falling back to implementation-specific behaviour or heuristics.

Note

Examples of date-time values with expanded years:

<table class="lightweight-table"><tbody><tr><td>-271821-04-20T00:00:00Z</td><td>271822 B.C.</td></tr><tr><td>-000001-01-01T00:00:00Z</td><td>2 B.C.</td></tr><tr><td>+000000-01-01T00:00:00Z</td><td>1 B.C.</td></tr><tr><td>+000001-01-01T00:00:00Z</td><td>1 A.D.</td></tr><tr><td>+001970-01-01T00:00:00Z</td><td>1970 A.D.</td></tr><tr><td>+002009-12-15T00:00:00Z</td><td>2009 A.D.</td></tr><tr><td>+275760-09-13T00:00:00Z</td><td>275760 A.D.</td></tr></tbody></table>


# 21.4.1.33 Time Zone Offset String Format

ECMAScript defines a string interchange format for UTC offsets, derived from ISO 8601. The format is described by the following grammar.


## Syntax

[UTCOffset](#prod-UTCOffset) ::: [ASCIISign](#prod-ASCIISign) [Hour](#prod-Hour) [ASCIISign](#prod-ASCIISign) [Hour](#prod-Hour) [HourSubcomponents](#prod-HourSubcomponents)\[+Extended\] [ASCIISign](#prod-ASCIISign) [Hour](#prod-Hour) [HourSubcomponents](#prod-HourSubcomponents)\[~Extended\] [ASCIISign](#prod-ASCIISign) ::: one of + \- [Hour](#prod-Hour) ::: 0 [DecimalDigit](#prod-DecimalDigit) 1 [DecimalDigit](#prod-DecimalDigit) 20 21 22 23 [HourSubcomponents](#prod-HourSubcomponents)\[Extended\] ::: [TimeSeparator](#prod-TimeSeparator)\[?Extended\] [MinuteSecond](#prod-MinuteSecond) [TimeSeparator](#prod-TimeSeparator)\[?Extended\] [MinuteSecond](#prod-MinuteSecond) [TimeSeparator](#prod-TimeSeparator)\[?Extended\] [MinuteSecond](#prod-MinuteSecond) [TemporalDecimalFraction](#prod-TemporalDecimalFraction)opt [TimeSeparator](#prod-TimeSeparator)\[Extended\] ::: \[+Extended\] : \[~Extended\] \[empty\] [MinuteSecond](#prod-MinuteSecond) ::: 0 [DecimalDigit](#prod-DecimalDigit) 1 [DecimalDigit](#prod-DecimalDigit) 2 [DecimalDigit](#prod-DecimalDigit) 3 [DecimalDigit](#prod-DecimalDigit) 4 [DecimalDigit](#prod-DecimalDigit) 5 [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalFraction](#prod-TemporalDecimalFraction) ::: [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) ::: one of . ,


# 21.4.1.33.1 IsTimeZoneOffsetString ( _offsetString_ )

The abstract operation IsTimeZoneOffsetString takes argument _offsetString_ (a String) and returns a Boolean. The return value indicates whether _offsetString_ conforms to the grammar given by [UTCOffset](#prod-UTCOffset). It performs the following steps when called:

1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_offsetString_, [UTCOffset](#prod-UTCOffset)).
2.  If _parseResult_ is a [List](#sec-list-and-record-specification-type) of errors, return false.
3.  Return true.


# 21.4.1.33.2 ParseTimeZoneOffsetString ( _offsetString_ )

The abstract operation ParseTimeZoneOffsetString takes argument _offsetString_ (a String) and returns an [integer](#integer). The return value is the UTC offset, as a number of nanoseconds, that corresponds to the String _offsetString_. It performs the following steps when called:

1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_offsetString_, [UTCOffset](#prod-UTCOffset)).
2.  [Assert](#assert): _parseResult_ is not a [List](#sec-list-and-record-specification-type) of errors.
3.  [Assert](#assert): _parseResult_ contains a [ASCIISign](#prod-ASCIISign) [Parse Node](#sec-syntactic-grammar).
4.  Let _parsedSign_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the [ASCIISign](#prod-ASCIISign) [Parse Node](#sec-syntactic-grammar) contained within _parseResult_.
5.  If _parsedSign_ is the single code point U+002D (HYPHEN-MINUS), then
    1.  Let _sign_ be -1.
6.  Else,
    1.  Let _sign_ be 1.
7.  NOTE: Applications of [StringToNumber](#sec-stringtonumber) below do not lose precision, since each of the parsed values is guaranteed to be a sufficiently short string of decimal digits.
8.  [Assert](#assert): _parseResult_ contains an [Hour](#prod-Hour) [Parse Node](#sec-syntactic-grammar).
9.  Let _parsedHours_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the [Hour](#prod-Hour) [Parse Node](#sec-syntactic-grammar) contained within _parseResult_.
10.  Let _hours_ be [ℝ](#ℝ)([StringToNumber](#sec-stringtonumber)([CodePointsToString](#sec-codepointstostring)(_parsedHours_))).
11.  If _parseResult_ does not contain a [MinuteSecond](#prod-MinuteSecond) [Parse Node](#sec-syntactic-grammar), then
     1.  Let _minutes_ be 0.
12.  Else,
     1.  Let _parsedMinutes_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the first [MinuteSecond](#prod-MinuteSecond) [Parse Node](#sec-syntactic-grammar) contained within _parseResult_.
     2.  Let _minutes_ be [ℝ](#ℝ)([StringToNumber](#sec-stringtonumber)([CodePointsToString](#sec-codepointstostring)(_parsedMinutes_))).
13.  If _parseResult_ does not contain two [MinuteSecond](#prod-MinuteSecond) [Parse Nodes](#sec-syntactic-grammar), then
     1.  Let _seconds_ be 0.
14.  Else,
     1.  Let _parsedSeconds_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the second [MinuteSecond](#prod-MinuteSecond) [Parse Node](#sec-syntactic-grammar) contained within _parseResult_.
     2.  Let _seconds_ be [ℝ](#ℝ)([StringToNumber](#sec-stringtonumber)([CodePointsToString](#sec-codepointstostring)(_parsedSeconds_))).
15.  If _parseResult_ does not contain a [TemporalDecimalFraction](#prod-TemporalDecimalFraction) [Parse Node](#sec-syntactic-grammar), then
     1.  Let _nanoseconds_ be 0.
16.  Else,
     1.  Let _parsedFraction_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the [TemporalDecimalFraction](#prod-TemporalDecimalFraction) [Parse Node](#sec-syntactic-grammar) contained within _parseResult_.
     2.  Let _fraction_ be the [string-concatenation](#string-concatenation) of [CodePointsToString](#sec-codepointstostring)(_parsedFraction_) and "000000000".
     3.  Let _nanosecondsString_ be the [substring](#substring) of _fraction_ from 1 to 10.
     4.  Let _nanoseconds_ be [ℝ](#ℝ)([StringToNumber](#sec-stringtonumber)(_nanosecondsString_)).
17.  Return _sign_ × (((_hours_ × 60 + _minutes_) × 60 + _seconds_) × 10<sup>9</sup> + _nanoseconds_).


# 21.4.2 The Date Constructor

The Date [constructor](#constructor):

-   is %Date%.
-   is the initial value of the "Date" property of the [global object](#sec-global-object).
-   creates and initializes a new Date when called as a [constructor](#constructor).
-   returns a String representing the current time (UTC) when called as a function rather than as a [constructor](#constructor).
-   is a function whose behaviour differs based upon the number and types of its arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Date behaviour must include a `super` call to the Date [constructor](#constructor) to create and initialize the subclass instance with a _\[\[DateValue\]\]_ internal slot.


# 21.4.2.1 Date ( ..._values_ )

This function performs the following steps when called:

1.  If NewTarget is undefined, then
    1.  Let _now_ be the [time value](#sec-time-values-and-time-range) (UTC) identifying the current time.
    2.  Return [ToDateString](#sec-todatestring)(_now_).
2.  Let _numberOfArgs_ be the number of elements in _values_.
3.  If _numberOfArgs_ = 0, then
    1.  Let _dv_ be the [time value](#sec-time-values-and-time-range) (UTC) identifying the current time.
4.  Else if _numberOfArgs_ = 1, then
    1.  Let _value_ be _values_\[0\].
    2.  If _value_ [is an Object](#sec-object-type) and _value_ has a _\[\[DateValue\]\]_ internal slot, then
        1.  Let _tv_ be _value_._\[\[DateValue\]\]_.
    3.  Else,
        1.  Let _v_ be ? [ToPrimitive](#sec-toprimitive)(_value_).
        2.  If _v_ [is a String](#sec-ecmascript-language-types-string-type), then
            1.  [Assert](#assert): The next step never returns an [abrupt completion](#sec-completion-record-specification-type) because _v_ [is a String](#sec-ecmascript-language-types-string-type).
            2.  Let _tv_ be the result of parsing _v_ as a date, in exactly the same manner as for the `parse` method ([21.4.3.2](#sec-date.parse)).
        3.  Else,
            1.  Let _tv_ be ? [ToNumber](#sec-tonumber)(_v_).
    4.  Let _dv_ be [TimeClip](#sec-timeclip)(_tv_).
5.  Else,
    1.  [Assert](#assert): _numberOfArgs_ ≥ 2.
    2.  Let _y_ be ? [ToNumber](#sec-tonumber)(_values_\[0\]).
    3.  Let _m_ be ? [ToNumber](#sec-tonumber)(_values_\[1\]).
    4.  If _numberOfArgs_ > 2, let _dt_ be ? [ToNumber](#sec-tonumber)(_values_\[2\]); else let _dt_ be 1<sub>𝔽</sub>.
    5.  If _numberOfArgs_ > 3, let _h_ be ? [ToNumber](#sec-tonumber)(_values_\[3\]); else let _h_ be +0<sub>𝔽</sub>.
    6.  If _numberOfArgs_ > 4, let _min_ be ? [ToNumber](#sec-tonumber)(_values_\[4\]); else let _min_ be +0<sub>𝔽</sub>.
    7.  If _numberOfArgs_ > 5, let _s_ be ? [ToNumber](#sec-tonumber)(_values_\[5\]); else let _s_ be +0<sub>𝔽</sub>.
    8.  If _numberOfArgs_ > 6, let _milli_ be ? [ToNumber](#sec-tonumber)(_values_\[6\]); else let _milli_ be +0<sub>𝔽</sub>.
    9.  Let _yr_ be [MakeFullYear](#sec-makefullyear)(_y_).
    10.  Let _finalDate_ be [MakeDate](#sec-makedate)([MakeDay](#sec-makeday)(_yr_, _m_, _dt_), [MakeTime](#sec-maketime)(_h_, _min_, _s_, _milli_)).
    11.  Let _dv_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_finalDate_)).
6.  Let _O_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Date.prototype%", « _\[\[DateValue\]\]_ »).
7.  Set _O_._\[\[DateValue\]\]_ to _dv_.
8.  Return _O_.


# 21.4.3 Properties of the Date Constructor

The Date [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has a "length" property whose value is 7<sub>𝔽</sub>.
-   has the following properties:


# 21.4.3.1 Date.now ( )

This function returns the [time value](#sec-time-values-and-time-range) designating the UTC date and time of the occurrence of the call to it.


# 21.4.3.2 Date.parse ( _string_ )

This function applies the [ToString](#sec-tostring) operator to its argument. If [ToString](#sec-tostring) results in an [abrupt completion](#sec-completion-record-specification-type) the [Completion Record](#sec-completion-record-specification-type) is immediately returned. Otherwise, this function interprets the resulting String as a date and time; it returns a Number, the UTC [time value](#sec-time-values-and-time-range) corresponding to the date and time. The String may be interpreted as a local time, a UTC time, or a time in some other time zone, depending on the contents of the String. The function first attempts to parse the String according to the format described in Date Time String Format ([21.4.1.32](#sec-date-time-string-format)), including expanded years. If the String does not conform to that format the function may fall back to any implementation-specific heuristics or implementation-specific date formats. Strings that are unrecognizable or contain out-of-bounds format element values shall cause this function to return NaN.

If the String conforms to the [Date Time String Format](#sec-date-time-string-format), substitute values take the place of absent format elements. When the `MM` or `DD` elements are absent, "01" is used. When the `HH`, `mm`, or `ss` elements are absent, "00" is used. When the `sss` element is absent, "000" is used. When the UTC offset representation is absent, date-only forms are interpreted as a UTC time and date-time forms are interpreted as a local time.

If `x` is any Date whose milliseconds amount is zero within a particular implementation of ECMAScript, then all of the following expressions should produce the same numeric value in that implementation, if all the properties referenced have their initial values:

```
x.valueOf()
Date.parse(x.toString())
Date.parse(x.toUTCString())
Date.parse(x.toISOString())
```

However, the expression

```
Date.parse(x.toLocaleString())
```

is not required to produce the same Number value as the preceding three expressions and, in general, the value produced by this function is [implementation-defined](#implementation-defined) when given any String value that does not conform to the Date Time String Format ([21.4.1.32](#sec-date-time-string-format)) and that could not be produced in that implementation by the `toString` or `toUTCString` method.


# 21.4.3.3 Date.prototype

The initial value of `Date.prototype` is the [Date prototype object](#sec-properties-of-the-date-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 21.4.3.4 Date.UTC ( _year_ \[, _month_ \[, _date_ \[, _hours_ \[, _minutes_ \[, _seconds_ \[, _ms_ \] \] \] \] \] \] )

This function performs the following steps when called:

1.  Let _y_ be ? [ToNumber](#sec-tonumber)(_year_).
2.  If _month_ is present, let _m_ be ? [ToNumber](#sec-tonumber)(_month_); else let _m_ be +0<sub>𝔽</sub>.
3.  If _date_ is present, let _dt_ be ? [ToNumber](#sec-tonumber)(_date_); else let _dt_ be 1<sub>𝔽</sub>.
4.  If _hours_ is present, let _h_ be ? [ToNumber](#sec-tonumber)(_hours_); else let _h_ be +0<sub>𝔽</sub>.
5.  If _minutes_ is present, let _min_ be ? [ToNumber](#sec-tonumber)(_minutes_); else let _min_ be +0<sub>𝔽</sub>.
6.  If _seconds_ is present, let _s_ be ? [ToNumber](#sec-tonumber)(_seconds_); else let _s_ be +0<sub>𝔽</sub>.
7.  If _ms_ is present, let _milli_ be ? [ToNumber](#sec-tonumber)(_ms_); else let _milli_ be +0<sub>𝔽</sub>.
8.  Let _yr_ be [MakeFullYear](#sec-makefullyear)(_y_).
9.  Return [TimeClip](#sec-timeclip)([MakeDate](#sec-makedate)([MakeDay](#sec-makeday)(_yr_, _m_, _dt_), [MakeTime](#sec-maketime)(_h_, _min_, _s_, _milli_))).

The "length" property of this function is 7<sub>𝔽</sub>.

Note

This function differs from the Date [constructor](#constructor) in two ways: it returns a [time value](#sec-time-values-and-time-range) as a Number, rather than creating a Date, and it interprets the arguments in UTC rather than as local time.


# 21.4.4 Properties of the Date Prototype Object

The Date prototype object:

-   is %Date.prototype%.
-   is itself an [ordinary object](#ordinary-object).
-   is not a Date instance and does not have a _\[\[DateValue\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).

Unless explicitly defined otherwise, the methods of the Date prototype object defined below are not generic and the this value passed to them must be an object that has a _\[\[DateValue\]\]_ internal slot that has been initialized to a [time value](#sec-time-values-and-time-range).


# 21.4.4.1 Date.prototype.constructor

The initial value of `Date.prototype.constructor` is [%Date%](#sec-date-constructor).


# 21.4.4.2 Date.prototype.getDate ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [DateFromTime](#sec-datefromtime)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.3 Date.prototype.getDay ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [WeekDay](#sec-weekday)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.4 Date.prototype.getFullYear ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [YearFromTime](#sec-yearfromtime)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.5 Date.prototype.getHours ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [HourFromTime](#sec-hourfromtime)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.6 Date.prototype.getMilliseconds ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [msFromTime](#sec-msfromtime)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.7 Date.prototype.getMinutes ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [MinFromTime](#sec-minfromtime)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.8 Date.prototype.getMonth ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [MonthFromTime](#sec-monthfromtime)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.9 Date.prototype.getSeconds ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [SecFromTime](#sec-secfromtime)([LocalTime](#sec-localtime)(_t_)).


# 21.4.4.10 Date.prototype.getTime ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Return _dateObject_._\[\[DateValue\]\]_.


# 21.4.4.11 Date.prototype.getTimezoneOffset ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return (_t_ - [LocalTime](#sec-localtime)(_t_)) / [msPerMinute](#eqn-msPerMinute).


# 21.4.4.12 Date.prototype.getUTCDate ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [DateFromTime](#sec-datefromtime)(_t_).


# 21.4.4.13 Date.prototype.getUTCDay ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [WeekDay](#sec-weekday)(_t_).


# 21.4.4.14 Date.prototype.getUTCFullYear ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [YearFromTime](#sec-yearfromtime)(_t_).


# 21.4.4.15 Date.prototype.getUTCHours ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [HourFromTime](#sec-hourfromtime)(_t_).


# 21.4.4.16 Date.prototype.getUTCMilliseconds ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [msFromTime](#sec-msfromtime)(_t_).


# 21.4.4.17 Date.prototype.getUTCMinutes ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [MinFromTime](#sec-minfromtime)(_t_).


# 21.4.4.18 Date.prototype.getUTCMonth ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [MonthFromTime](#sec-monthfromtime)(_t_).


# 21.4.4.19 Date.prototype.getUTCSeconds ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [SecFromTime](#sec-secfromtime)(_t_).


# 21.4.4.20 Date.prototype.setDate ( _date_ )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _dt_ be ? [ToNumber](#sec-tonumber)(_date_).
5.  If _t_ is NaN, return NaN.
6.  Set _t_ to [LocalTime](#sec-localtime)(_t_).
7.  Let _newDate_ be [MakeDate](#sec-makedate)([MakeDay](#sec-makeday)([YearFromTime](#sec-yearfromtime)(_t_), [MonthFromTime](#sec-monthfromtime)(_t_), _dt_), [TimeWithinDay](#sec-timewithinday)(_t_)).
8.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_newDate_)).
9.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
10.  Return _u_.


# 21.4.4.21 Date.prototype.setFullYear ( _year_ \[, _month_ \[, _date_ \] \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _y_ be ? [ToNumber](#sec-tonumber)(_year_).
5.  If _t_ is NaN, set _t_ to +0<sub>𝔽</sub>; otherwise set _t_ to [LocalTime](#sec-localtime)(_t_).
6.  If _month_ is not present, let _m_ be [MonthFromTime](#sec-monthfromtime)(_t_); otherwise let _m_ be ? [ToNumber](#sec-tonumber)(_month_).
7.  If _date_ is not present, let _dt_ be [DateFromTime](#sec-datefromtime)(_t_); otherwise let _dt_ be ? [ToNumber](#sec-tonumber)(_date_).
8.  Let _newDate_ be [MakeDate](#sec-makedate)([MakeDay](#sec-makeday)(_y_, _m_, _dt_), [TimeWithinDay](#sec-timewithinday)(_t_)).
9.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_newDate_)).
10.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
11.  Return _u_.

The "length" property of this method is 3<sub>𝔽</sub>.

Note

If _month_ is not present, this method behaves as if _month_ was present with the value `getMonth()`. If _date_ is not present, it behaves as if _date_ was present with the value `getDate()`.


# 21.4.4.22 Date.prototype.setHours ( _hour_ \[, _min_ \[, _sec_ \[, _ms_ \] \] \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _h_ be ? [ToNumber](#sec-tonumber)(_hour_).
5.  If _min_ is present, let _m_ be ? [ToNumber](#sec-tonumber)(_min_).
6.  If _sec_ is present, let _s_ be ? [ToNumber](#sec-tonumber)(_sec_).
7.  If _ms_ is present, let _milli_ be ? [ToNumber](#sec-tonumber)(_ms_).
8.  If _t_ is NaN, return NaN.
9.  Set _t_ to [LocalTime](#sec-localtime)(_t_).
10.  If _min_ is not present, let _m_ be [MinFromTime](#sec-minfromtime)(_t_).
11.  If _sec_ is not present, let _s_ be [SecFromTime](#sec-secfromtime)(_t_).
12.  If _ms_ is not present, let _milli_ be [msFromTime](#sec-msfromtime)(_t_).
13.  Let _date_ be [MakeDate](#sec-makedate)([Day](#sec-day)(_t_), [MakeTime](#sec-maketime)(_h_, _m_, _s_, _milli_)).
14.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_date_)).
15.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
16.  Return _u_.

The "length" property of this method is 4<sub>𝔽</sub>.

Note

If _min_ is not present, this method behaves as if _min_ was present with the value `getMinutes()`. If _sec_ is not present, it behaves as if _sec_ was present with the value `getSeconds()`. If _ms_ is not present, it behaves as if _ms_ was present with the value `getMilliseconds()`.


# 21.4.4.23 Date.prototype.setMilliseconds ( _ms_ )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Set _ms_ to ? [ToNumber](#sec-tonumber)(_ms_).
5.  If _t_ is NaN, return NaN.
6.  Set _t_ to [LocalTime](#sec-localtime)(_t_).
7.  Let _time_ be [MakeTime](#sec-maketime)([HourFromTime](#sec-hourfromtime)(_t_), [MinFromTime](#sec-minfromtime)(_t_), [SecFromTime](#sec-secfromtime)(_t_), _ms_).
8.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)([MakeDate](#sec-makedate)([Day](#sec-day)(_t_), _time_))).
9.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
10.  Return _u_.


# 21.4.4.24 Date.prototype.setMinutes ( _min_ \[, _sec_ \[, _ms_ \] \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _m_ be ? [ToNumber](#sec-tonumber)(_min_).
5.  If _sec_ is present, let _s_ be ? [ToNumber](#sec-tonumber)(_sec_).
6.  If _ms_ is present, let _milli_ be ? [ToNumber](#sec-tonumber)(_ms_).
7.  If _t_ is NaN, return NaN.
8.  Set _t_ to [LocalTime](#sec-localtime)(_t_).
9.  If _sec_ is not present, let _s_ be [SecFromTime](#sec-secfromtime)(_t_).
10.  If _ms_ is not present, let _milli_ be [msFromTime](#sec-msfromtime)(_t_).
11.  Let _date_ be [MakeDate](#sec-makedate)([Day](#sec-day)(_t_), [MakeTime](#sec-maketime)([HourFromTime](#sec-hourfromtime)(_t_), _m_, _s_, _milli_)).
12.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_date_)).
13.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
14.  Return _u_.

The "length" property of this method is 3<sub>𝔽</sub>.

Note

If _sec_ is not present, this method behaves as if _sec_ was present with the value `getSeconds()`. If _ms_ is not present, this behaves as if _ms_ was present with the value `getMilliseconds()`.


# 21.4.4.25 Date.prototype.setMonth ( _month_ \[, _date_ \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _m_ be ? [ToNumber](#sec-tonumber)(_month_).
5.  If _date_ is present, let _dt_ be ? [ToNumber](#sec-tonumber)(_date_).
6.  If _t_ is NaN, return NaN.
7.  Set _t_ to [LocalTime](#sec-localtime)(_t_).
8.  If _date_ is not present, let _dt_ be [DateFromTime](#sec-datefromtime)(_t_).
9.  Let _newDate_ be [MakeDate](#sec-makedate)([MakeDay](#sec-makeday)([YearFromTime](#sec-yearfromtime)(_t_), _m_, _dt_), [TimeWithinDay](#sec-timewithinday)(_t_)).
10.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_newDate_)).
11.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
12.  Return _u_.

The "length" property of this method is 2<sub>𝔽</sub>.

Note

If _date_ is not present, this method behaves as if _date_ was present with the value `getDate()`.


# 21.4.4.26 Date.prototype.setSeconds ( _sec_ \[, _ms_ \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _s_ be ? [ToNumber](#sec-tonumber)(_sec_).
5.  If _ms_ is present, let _milli_ be ? [ToNumber](#sec-tonumber)(_ms_).
6.  If _t_ is NaN, return NaN.
7.  Set _t_ to [LocalTime](#sec-localtime)(_t_).
8.  If _ms_ is not present, let _milli_ be [msFromTime](#sec-msfromtime)(_t_).
9.  Let _date_ be [MakeDate](#sec-makedate)([Day](#sec-day)(_t_), [MakeTime](#sec-maketime)([HourFromTime](#sec-hourfromtime)(_t_), [MinFromTime](#sec-minfromtime)(_t_), _s_, _milli_)).
10.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_date_)).
11.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
12.  Return _u_.

The "length" property of this method is 2<sub>𝔽</sub>.

Note

If _ms_ is not present, this method behaves as if _ms_ was present with the value `getMilliseconds()`.


# 21.4.4.27 Date.prototype.setTime ( _time_ )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be ? [ToNumber](#sec-tonumber)(_time_).
4.  Let _v_ be [TimeClip](#sec-timeclip)(_t_).
5.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
6.  Return _v_.


# 21.4.4.28 Date.prototype.setUTCDate ( _date_ )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _dt_ be ? [ToNumber](#sec-tonumber)(_date_).
5.  If _t_ is NaN, return NaN.
6.  Let _newDate_ be [MakeDate](#sec-makedate)([MakeDay](#sec-makeday)([YearFromTime](#sec-yearfromtime)(_t_), [MonthFromTime](#sec-monthfromtime)(_t_), _dt_), [TimeWithinDay](#sec-timewithinday)(_t_)).
7.  Let _v_ be [TimeClip](#sec-timeclip)(_newDate_).
8.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
9.  Return _v_.


# 21.4.4.29 Date.prototype.setUTCFullYear ( _year_ \[, _month_ \[, _date_ \] \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, set _t_ to +0<sub>𝔽</sub>.
5.  Let _y_ be ? [ToNumber](#sec-tonumber)(_year_).
6.  If _month_ is not present, let _m_ be [MonthFromTime](#sec-monthfromtime)(_t_); otherwise let _m_ be ? [ToNumber](#sec-tonumber)(_month_).
7.  If _date_ is not present, let _dt_ be [DateFromTime](#sec-datefromtime)(_t_); otherwise let _dt_ be ? [ToNumber](#sec-tonumber)(_date_).
8.  Let _newDate_ be [MakeDate](#sec-makedate)([MakeDay](#sec-makeday)(_y_, _m_, _dt_), [TimeWithinDay](#sec-timewithinday)(_t_)).
9.  Let _v_ be [TimeClip](#sec-timeclip)(_newDate_).
10.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
11.  Return _v_.

The "length" property of this method is 3<sub>𝔽</sub>.

Note

If _month_ is not present, this method behaves as if _month_ was present with the value `getUTCMonth()`. If _date_ is not present, it behaves as if _date_ was present with the value `getUTCDate()`.


# 21.4.4.30 Date.prototype.setUTCHours ( _hour_ \[, _min_ \[, _sec_ \[, _ms_ \] \] \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _h_ be ? [ToNumber](#sec-tonumber)(_hour_).
5.  If _min_ is present, let _m_ be ? [ToNumber](#sec-tonumber)(_min_).
6.  If _sec_ is present, let _s_ be ? [ToNumber](#sec-tonumber)(_sec_).
7.  If _ms_ is present, let _milli_ be ? [ToNumber](#sec-tonumber)(_ms_).
8.  If _t_ is NaN, return NaN.
9.  If _min_ is not present, let _m_ be [MinFromTime](#sec-minfromtime)(_t_).
10.  If _sec_ is not present, let _s_ be [SecFromTime](#sec-secfromtime)(_t_).
11.  If _ms_ is not present, let _milli_ be [msFromTime](#sec-msfromtime)(_t_).
12.  Let _date_ be [MakeDate](#sec-makedate)([Day](#sec-day)(_t_), [MakeTime](#sec-maketime)(_h_, _m_, _s_, _milli_)).
13.  Let _v_ be [TimeClip](#sec-timeclip)(_date_).
14.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
15.  Return _v_.

The "length" property of this method is 4<sub>𝔽</sub>.

Note

If _min_ is not present, this method behaves as if _min_ was present with the value `getUTCMinutes()`. If _sec_ is not present, it behaves as if _sec_ was present with the value `getUTCSeconds()`. If _ms_ is not present, it behaves as if _ms_ was present with the value `getUTCMilliseconds()`.


# 21.4.4.31 Date.prototype.setUTCMilliseconds ( _ms_ )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Set _ms_ to ? [ToNumber](#sec-tonumber)(_ms_).
5.  If _t_ is NaN, return NaN.
6.  Let _time_ be [MakeTime](#sec-maketime)([HourFromTime](#sec-hourfromtime)(_t_), [MinFromTime](#sec-minfromtime)(_t_), [SecFromTime](#sec-secfromtime)(_t_), _ms_).
7.  Let _v_ be [TimeClip](#sec-timeclip)([MakeDate](#sec-makedate)([Day](#sec-day)(_t_), _time_)).
8.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
9.  Return _v_.


# 21.4.4.32 Date.prototype.setUTCMinutes ( _min_ \[, _sec_ \[, _ms_ \] \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _m_ be ? [ToNumber](#sec-tonumber)(_min_).
5.  If _sec_ is present, let _s_ be ? [ToNumber](#sec-tonumber)(_sec_).
6.  If _ms_ is present, let _milli_ be ? [ToNumber](#sec-tonumber)(_ms_).
7.  If _t_ is NaN, return NaN.
8.  If _sec_ is not present, let _s_ be [SecFromTime](#sec-secfromtime)(_t_).
9.  If _ms_ is not present, let _milli_ be [msFromTime](#sec-msfromtime)(_t_).
10.  Let _date_ be [MakeDate](#sec-makedate)([Day](#sec-day)(_t_), [MakeTime](#sec-maketime)([HourFromTime](#sec-hourfromtime)(_t_), _m_, _s_, _milli_)).
11.  Let _v_ be [TimeClip](#sec-timeclip)(_date_).
12.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
13.  Return _v_.

The "length" property of this method is 3<sub>𝔽</sub>.

Note

If _sec_ is not present, this method behaves as if _sec_ was present with the value `getUTCSeconds()`. If _ms_ is not present, it behaves as if _ms_ was present with the value return by `getUTCMilliseconds()`.


# 21.4.4.33 Date.prototype.setUTCMonth ( _month_ \[, _date_ \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _m_ be ? [ToNumber](#sec-tonumber)(_month_).
5.  If _date_ is present, let _dt_ be ? [ToNumber](#sec-tonumber)(_date_).
6.  If _t_ is NaN, return NaN.
7.  If _date_ is not present, let _dt_ be [DateFromTime](#sec-datefromtime)(_t_).
8.  Let _newDate_ be [MakeDate](#sec-makedate)([MakeDay](#sec-makeday)([YearFromTime](#sec-yearfromtime)(_t_), _m_, _dt_), [TimeWithinDay](#sec-timewithinday)(_t_)).
9.  Let _v_ be [TimeClip](#sec-timeclip)(_newDate_).
10.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
11.  Return _v_.

The "length" property of this method is 2<sub>𝔽</sub>.

Note

If _date_ is not present, this method behaves as if _date_ was present with the value `getUTCDate()`.


# 21.4.4.34 Date.prototype.setUTCSeconds ( _sec_ \[, _ms_ \] )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _s_ be ? [ToNumber](#sec-tonumber)(_sec_).
5.  If _ms_ is present, let _milli_ be ? [ToNumber](#sec-tonumber)(_ms_).
6.  If _t_ is NaN, return NaN.
7.  If _ms_ is not present, let _milli_ be [msFromTime](#sec-msfromtime)(_t_).
8.  Let _date_ be [MakeDate](#sec-makedate)([Day](#sec-day)(_t_), [MakeTime](#sec-maketime)([HourFromTime](#sec-hourfromtime)(_t_), [MinFromTime](#sec-minfromtime)(_t_), _s_, _milli_)).
9.  Let _v_ be [TimeClip](#sec-timeclip)(_date_).
10.  Set _dateObject_._\[\[DateValue\]\]_ to _v_.
11.  Return _v_.

The "length" property of this method is 2<sub>𝔽</sub>.

Note

If _ms_ is not present, this method behaves as if _ms_ was present with the value `getUTCMilliseconds()`.


# 21.4.4.35 Date.prototype.toDateString ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _tv_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _tv_ is NaN, return "Invalid Date".
5.  Let _t_ be [LocalTime](#sec-localtime)(_tv_).
6.  Return [DateString](#sec-datestring)(_t_).


# 21.4.4.36 Date.prototype.toISOString ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _tv_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _tv_ is NaN, throw a RangeError exception.
5.  [Assert](#assert): _tv_ is an [integral Number](#integral-number).
6.  If _tv_ corresponds with a year that cannot be represented in the [Date Time String Format](#sec-date-time-string-format), throw a RangeError exception.
7.  Return a String representation of _tv_ in the [Date Time String Format](#sec-date-time-string-format) on the UTC time scale, including all format elements and the UTC offset representation "Z".


# 21.4.4.37 Date.prototype.toJSON ( _key_ )

This method provides a String representation of a Date for use by `JSON.stringify` ([25.5.2](#sec-json.stringify)).

It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _tv_ be ? [ToPrimitive](#sec-toprimitive)(_O_, number).
3.  If _tv_ [is a Number](#sec-ecmascript-language-types-number-type) and _tv_ is not [finite](#finite), return null.
4.  Return ? [Invoke](#sec-invoke)(_O_, "toISOString").

Note 1

The argument is ignored.

Note 2

This method is intentionally generic; it does not require that its this value be a Date. Therefore, it can be transferred to other kinds of objects for use as a method. However, it does require that any such object have a `toISOString` method.


# 21.4.4.38 Date.prototype.toLocaleDateString ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method returns a String value. The contents of the String are [implementation-defined](#implementation-defined), but are intended to represent the “date” portion of the Date in the current time zone in a convenient, human-readable form that corresponds to the conventions of the [host environment](#host-environment)'s current locale.

The meaning of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.


# 21.4.4.39 Date.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method returns a String value. The contents of the String are [implementation-defined](#implementation-defined), but are intended to represent the Date in the current time zone in a convenient, human-readable form that corresponds to the conventions of the [host environment](#host-environment)'s current locale.

The meaning of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.


# 21.4.4.40 Date.prototype.toLocaleTimeString ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method returns a String value. The contents of the String are [implementation-defined](#implementation-defined), but are intended to represent the “time” portion of the Date in the current time zone in a convenient, human-readable form that corresponds to the conventions of the [host environment](#host-environment)'s current locale.

The meaning of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.


# 21.4.4.41 Date.prototype.toString ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _tv_ be _dateObject_._\[\[DateValue\]\]_.
4.  Return [ToDateString](#sec-todatestring)(_tv_).

Note 1

For any Date `d` such that `d._[[DateValue]]_` is evenly divisible by 1000, the result of `Date.parse(d.toString())` = `d.valueOf()`. See [21.4.3.2](#sec-date.parse).

Note 2

This method is not generic; it throws a TypeError exception if its this value is not a Date. Therefore, it cannot be transferred to other kinds of objects for use as a method.


# 21.4.4.41.1 TimeString ( _tv_ )

The abstract operation TimeString takes argument _tv_ (a Number, but not NaN) and returns a String. It performs the following steps when called:

1.  Let _hour_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([ℝ](#ℝ)([HourFromTime](#sec-hourfromtime)(_tv_)), 2).
2.  Let _minute_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([ℝ](#ℝ)([MinFromTime](#sec-minfromtime)(_tv_)), 2).
3.  Let _second_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([ℝ](#ℝ)([SecFromTime](#sec-secfromtime)(_tv_)), 2).
4.  Return the [string-concatenation](#string-concatenation) of _hour_, ":", _minute_, ":", _second_, the code unit 0x0020 (SPACE), and "GMT".


# 21.4.4.41.2 DateString ( _tv_ )

The abstract operation DateString takes argument _tv_ (a Number, but not NaN) and returns a String. It performs the following steps when called:

1.  Let _weekday_ be the Name of the entry in [Table 63](#sec-todatestring-day-names) with the Number [WeekDay](#sec-weekday)(_tv_).
2.  Let _month_ be the Name of the entry in [Table 64](#sec-todatestring-month-names) with the Number [MonthFromTime](#sec-monthfromtime)(_tv_).
3.  Let _day_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([ℝ](#ℝ)([DateFromTime](#sec-datefromtime)(_tv_)), 2).
4.  Let _yv_ be [YearFromTime](#sec-yearfromtime)(_tv_).
5.  If _yv_ is +0<sub>𝔽</sub> or _yv_ > +0<sub>𝔽</sub>, let _yearSign_ be the empty String; otherwise let _yearSign_ be "-".
6.  Let _paddedYear_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([abs](#eqn-abs)([ℝ](#ℝ)(_yv_)), 4).
7.  Return the [string-concatenation](#string-concatenation) of _weekday_, the code unit 0x0020 (SPACE), _month_, the code unit 0x0020 (SPACE), _day_, the code unit 0x0020 (SPACE), _yearSign_, and _paddedYear_.

Table 63: Names of days of the week

<table><thead><tr><th>Number</th><th>Name</th></tr></thead><tbody><tr><td><emu-val>+0</emu-val><sub>𝔽</sub></td><td><emu-val>"Sun"</emu-val></td></tr><tr><td><emu-val>1</emu-val><sub>𝔽</sub></td><td><emu-val>"Mon"</emu-val></td></tr><tr><td><emu-val>2</emu-val><sub>𝔽</sub></td><td><emu-val>"Tue"</emu-val></td></tr><tr><td><emu-val>3</emu-val><sub>𝔽</sub></td><td><emu-val>"Wed"</emu-val></td></tr><tr><td><emu-val>4</emu-val><sub>𝔽</sub></td><td><emu-val>"Thu"</emu-val></td></tr><tr><td><emu-val>5</emu-val><sub>𝔽</sub></td><td><emu-val>"Fri"</emu-val></td></tr><tr><td><emu-val>6</emu-val><sub>𝔽</sub></td><td><emu-val>"Sat"</emu-val></td></tr></tbody></table>

Table 64: Names of months of the year

<table><thead><tr><th>Number</th><th>Name</th></tr></thead><tbody><tr><td><emu-val>+0</emu-val><sub>𝔽</sub></td><td><emu-val>"Jan"</emu-val></td></tr><tr><td><emu-val>1</emu-val><sub>𝔽</sub></td><td><emu-val>"Feb"</emu-val></td></tr><tr><td><emu-val>2</emu-val><sub>𝔽</sub></td><td><emu-val>"Mar"</emu-val></td></tr><tr><td><emu-val>3</emu-val><sub>𝔽</sub></td><td><emu-val>"Apr"</emu-val></td></tr><tr><td><emu-val>4</emu-val><sub>𝔽</sub></td><td><emu-val>"May"</emu-val></td></tr><tr><td><emu-val>5</emu-val><sub>𝔽</sub></td><td><emu-val>"Jun"</emu-val></td></tr><tr><td><emu-val>6</emu-val><sub>𝔽</sub></td><td><emu-val>"Jul"</emu-val></td></tr><tr><td><emu-val>7</emu-val><sub>𝔽</sub></td><td><emu-val>"Aug"</emu-val></td></tr><tr><td><emu-val>8</emu-val><sub>𝔽</sub></td><td><emu-val>"Sep"</emu-val></td></tr><tr><td><emu-val>9</emu-val><sub>𝔽</sub></td><td><emu-val>"Oct"</emu-val></td></tr><tr><td><emu-val>10</emu-val><sub>𝔽</sub></td><td><emu-val>"Nov"</emu-val></td></tr><tr><td><emu-val>11</emu-val><sub>𝔽</sub></td><td><emu-val>"Dec"</emu-val></td></tr></tbody></table>


# 21.4.4.41.3 TimeZoneString ( _tv_ )

The abstract operation TimeZoneString takes argument _tv_ (an [integral Number](#integral-number)) and returns a String. It performs the following steps when called:

1.  Let _systemTimeZoneIdentifier_ be [SystemTimeZoneIdentifier](#sec-systemtimezoneidentifier)().
2.  If [IsTimeZoneOffsetString](#sec-istimezoneoffsetstring)(_systemTimeZoneIdentifier_) is true, then
    1.  Let _offsetNs_ be [ParseTimeZoneOffsetString](#sec-parsetimezoneoffsetstring)(_systemTimeZoneIdentifier_).
3.  Else,
    1.  Let _offsetNs_ be [GetNamedTimeZoneOffsetNanoseconds](#sec-getnamedtimezoneoffsetnanoseconds)(_systemTimeZoneIdentifier_, [ℤ](#ℤ)([ℝ](#ℝ)(_tv_) × 10<sup>6</sup>)).
4.  Let _offset_ be [𝔽](#𝔽)([truncate](#eqn-truncate)(_offsetNs_ / 10<sup>6</sup>)).
5.  If _offset_ is +0<sub>𝔽</sub> or _offset_ > +0<sub>𝔽</sub>, then
    1.  Let _offsetSign_ be "+".
    2.  Let _absOffset_ be _offset_.
6.  Else,
    1.  Let _offsetSign_ be "-".
    2.  Let _absOffset_ be -_offset_.
7.  Let _offsetMin_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([ℝ](#ℝ)([MinFromTime](#sec-minfromtime)(_absOffset_)), 2).
8.  Let _offsetHour_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([ℝ](#ℝ)([HourFromTime](#sec-hourfromtime)(_absOffset_)), 2).
9.  Let _tzName_ be an [implementation-defined](#implementation-defined) string that is either the empty String or the [string-concatenation](#string-concatenation) of the code unit 0x0020 (SPACE), the code unit 0x0028 (LEFT PARENTHESIS), an [implementation-defined](#implementation-defined) timezone name, and the code unit 0x0029 (RIGHT PARENTHESIS).
10.  Return the [string-concatenation](#string-concatenation) of _offsetSign_, _offsetHour_, _offsetMin_, and _tzName_.


# 21.4.4.41.4 ToDateString ( _tv_ )

The abstract operation ToDateString takes argument _tv_ (an [integral Number](#integral-number) or NaN) and returns a String. It performs the following steps when called:

1.  If _tv_ is NaN, return "Invalid Date".
2.  Let _t_ be [LocalTime](#sec-localtime)(_tv_).
3.  Return the [string-concatenation](#string-concatenation) of [DateString](#sec-datestring)(_t_), the code unit 0x0020 (SPACE), [TimeString](#sec-timestring)(_t_), and [TimeZoneString](#sec-timezoneestring)(_tv_).


# 21.4.4.42 Date.prototype.toTimeString ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _tv_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _tv_ is NaN, return "Invalid Date".
5.  Let _t_ be [LocalTime](#sec-localtime)(_tv_).
6.  Return the [string-concatenation](#string-concatenation) of [TimeString](#sec-timestring)(_t_) and [TimeZoneString](#sec-timezoneestring)(_tv_).


# 21.4.4.43 Date.prototype.toUTCString ( )

This method returns a String value representing the instant in time corresponding to the this value. The format of the String is based upon "HTTP-date" from RFC 7231, generalized to support the full range of times supported by ECMAScript Dates.

It performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _tv_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _tv_ is NaN, return "Invalid Date".
5.  Let _weekday_ be the Name of the entry in [Table 63](#sec-todatestring-day-names) with the Number [WeekDay](#sec-weekday)(_tv_).
6.  Let _month_ be the Name of the entry in [Table 64](#sec-todatestring-month-names) with the Number [MonthFromTime](#sec-monthfromtime)(_tv_).
7.  Let _day_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([ℝ](#ℝ)([DateFromTime](#sec-datefromtime)(_tv_)), 2).
8.  Let _yv_ be [YearFromTime](#sec-yearfromtime)(_tv_).
9.  If _yv_ is +0<sub>𝔽</sub> or _yv_ > +0<sub>𝔽</sub>, let _yearSign_ be the empty String; otherwise let _yearSign_ be "-".
10.  Let _paddedYear_ be [ToZeroPaddedDecimalString](#sec-tozeropaddeddecimalstring)([abs](#eqn-abs)([ℝ](#ℝ)(_yv_)), 4).
11.  Return the [string-concatenation](#string-concatenation) of _weekday_, ",", the code unit 0x0020 (SPACE), _day_, the code unit 0x0020 (SPACE), _month_, the code unit 0x0020 (SPACE), _yearSign_, _paddedYear_, the code unit 0x0020 (SPACE), and [TimeString](#sec-timestring)(_tv_).


# 21.4.4.44 Date.prototype.valueOf ( )

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Return _dateObject_._\[\[DateValue\]\]_.


# 21.4.4.45 Date.prototype \[%Symbol.toPrimitive% \] ( _hint_ )

This method is called by ECMAScript language operators to convert a Date to a primitive value. The allowed values for _hint_ are "default", "number", and "string". Dates are unique among built-in ECMAScript object in that they treat "default" as being equivalent to "string", All other built-in ECMAScript objects treat "default" as being equivalent to "number".

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  If _hint_ is either "string" or "default", then
    1.  Let _tryFirst_ be string.
4.  Else if _hint_ is "number", then
    1.  Let _tryFirst_ be number.
5.  Else,
    1.  Throw a TypeError exception.
6.  Return ? [OrdinaryToPrimitive](#sec-ordinarytoprimitive)(_O_, _tryFirst_).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.

The value of the "name" property of this method is "\[Symbol.toPrimitive\]".


# 21.4.5 Properties of Date Instances

Date instances are [ordinary objects](#ordinary-object) that inherit properties from the [Date prototype object](#sec-properties-of-the-date-prototype-object). Date instances also have a _\[\[DateValue\]\]_ internal slot. The _\[\[DateValue\]\]_ internal slot is the [time value](#sec-time-values-and-time-range) represented by this Date.


# 22 Text Processing


# 22.1 String Objects


# 22.1.1 The String Constructor

The String [constructor](#constructor):

-   is %String%.
-   is the initial value of the "String" property of the [global object](#sec-global-object).
-   creates and initializes a new String object when called as a [constructor](#constructor).
-   performs a type conversion when called as a function rather than as a [constructor](#constructor).
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified String behaviour must include a `super` call to the String [constructor](#constructor) to create and initialize the subclass instance with a _\[\[StringData\]\]_ internal slot.


# 22.1.1.1 String ( _value_ )

This function performs the following steps when called:

1.  If _value_ is not present, then
    1.  Let _s_ be the empty String.
2.  Else,
    1.  If NewTarget is undefined and _value_ [is a Symbol](#sec-ecmascript-language-types-symbol-type), return [SymbolDescriptiveString](#sec-symboldescriptivestring)(_value_).
    2.  Let _s_ be ? [ToString](#sec-tostring)(_value_).
3.  If NewTarget is undefined, return _s_.
4.  Return [StringCreate](#sec-stringcreate)(_s_, ? [GetPrototypeFromConstructor](#sec-getprototypefromconstructor)(NewTarget, "%String.prototype%")).


# 22.1.2 Properties of the String Constructor

The String [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 22.1.2.1 String.fromCharCode ( ..._codeUnits_ )

This function may be called with any number of arguments which form the rest parameter _codeUnits_.

It performs the following steps when called:

1.  Let _result_ be the empty String.
2.  For each element _next_ of _codeUnits_, do
    1.  Let _nextCU_ be the code unit whose numeric value is [ℝ](#ℝ)(? [ToUint16](#sec-touint16)(_next_)).
    2.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_ and _nextCU_.
3.  Return _result_.

The "length" property of this function is 1<sub>𝔽</sub>.


# 22.1.2.2 String.fromCodePoint ( ..._codePoints_ )

This function may be called with any number of arguments which form the rest parameter _codePoints_.

It performs the following steps when called:

1.  Let _result_ be the empty String.
2.  For each element _next_ of _codePoints_, do
    1.  Let _nextCP_ be ? [ToNumber](#sec-tonumber)(_next_).
    2.  If _nextCP_ is not an [integral Number](#integral-number), throw a RangeError exception.
    3.  If [ℝ](#ℝ)(_nextCP_) < 0 or [ℝ](#ℝ)(_nextCP_) > 0x10FFFF, throw a RangeError exception.
    4.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_ and [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)([ℝ](#ℝ)(_nextCP_)).
3.  [Assert](#assert): If _codePoints_ is empty, then _result_ is the empty String.
4.  Return _result_.

The "length" property of this function is 1<sub>𝔽</sub>.


# 22.1.2.3 String.prototype

The initial value of `String.prototype` is the [String prototype object](#sec-properties-of-the-string-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 22.1.2.4 String.raw ( _template_, ..._substitutions_ )

This function may be called with a variable number of arguments. The first argument is _template_ and the remainder of the arguments form the [List](#sec-list-and-record-specification-type) _substitutions_.

It performs the following steps when called:

1.  Let _substitutionCount_ be the number of elements in _substitutions_.
2.  Let _cooked_ be ? [ToObject](#sec-toobject)(_template_).
3.  Let _literals_ be ? [ToObject](#sec-toobject)(? [Get](#sec-get-o-p)(_cooked_, "raw")).
4.  Let _literalCount_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_literals_).
5.  If _literalCount_ ≤ 0, return the empty String.
6.  Let _R_ be the empty String.
7.  Let _nextIndex_ be 0.
8.  Repeat,
    1.  Let _nextLiteralVal_ be ? [Get](#sec-get-o-p)(_literals_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_nextIndex_))).
    2.  Let _nextLiteral_ be ? [ToString](#sec-tostring)(_nextLiteralVal_).
    3.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _nextLiteral_.
    4.  If _nextIndex_ + 1 = _literalCount_, return _R_.
    5.  If _nextIndex_ < _substitutionCount_, then
        1.  Let _nextSubVal_ be _substitutions_\[_nextIndex_\].
        2.  Let _nextSub_ be ? [ToString](#sec-tostring)(_nextSubVal_).
        3.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _nextSub_.
    6.  Set _nextIndex_ to _nextIndex_ + 1.

Note

This function is intended for use as a tag function of a Tagged Template ([13.3.11](#sec-tagged-templates)). When called as such, the first argument will be a well formed template object and the rest parameter will contain the substitution values.


# 22.1.3 Properties of the String Prototype Object

The String prototype object:

-   is %String.prototype%.
-   [is a String](#sec-ecmascript-language-types-string-type) [exotic object](#exotic-object) and has the internal methods specified for such objects.
-   has a _\[\[StringData\]\]_ internal slot whose value is the empty String.
-   has a "length" property whose initial value is +0<sub>𝔽</sub> and whose attributes are { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).

Unless explicitly stated otherwise, the methods of the String prototype object defined below are not generic and the this value passed to them must be either a String value or an object that has a _\[\[StringData\]\]_ internal slot that has been initialized to a String value.


# 22.1.3.1 String.prototype.at ( _index_ )

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _len_ be the length of _S_.
5.  Let _relativeIndex_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_index_).
6.  If _relativeIndex_ ≥ 0, then
    1.  Let _k_ be _relativeIndex_.
7.  Else,
    1.  Let _k_ be _len_ + _relativeIndex_.
8.  If _k_ < 0 or _k_ ≥ _len_, return undefined.
9.  Return the [substring](#substring) of _S_ from _k_ to _k_ + 1.


# 22.1.3.2 String.prototype.charAt ( _pos_ )

Note 1

This method returns a single element String containing the code unit at index _pos_ within the String value resulting from converting this object to a String. If there is no element at that index, the result is the empty String. The result [is a String](#sec-ecmascript-language-types-string-type) value, not a String object.

If `pos` is an [integral Number](#integral-number), then the result of `x.charAt(pos)` is equivalent to the result of `x.substring(pos, pos + 1)`.

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _position_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_pos_).
5.  Let _size_ be the length of _S_.
6.  If _position_ < 0 or _position_ ≥ _size_, return the empty String.
7.  Return the [substring](#substring) of _S_ from _position_ to _position_ + 1.

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.3 String.prototype.charCodeAt ( _pos_ )

Note 1

This method returns a Number (a non-negative [integral Number](#integral-number) less than 2<sup>16</sup>) that is the numeric value of the code unit at index _pos_ within the String resulting from converting this object to a String. If there is no element at that index, the result is NaN.

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _position_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_pos_).
5.  Let _size_ be the length of _S_.
6.  If _position_ < 0 or _position_ ≥ _size_, return NaN.
7.  Return the [Number value for](#number-value-for) the numeric value of the code unit at index _position_ within the String _S_.

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.


# 22.1.3.4 String.prototype.codePointAt ( _pos_ )

Note 1

This method returns a non-negative [integral Number](#integral-number) less than or equal to 0x10FFFF<sub>𝔽</sub> that is the numeric value of the UTF-16 encoded code point ([6.1.4](#sec-ecmascript-language-types-string-type)) starting at the string element at index _pos_ within the String resulting from converting this object to a String. If there is no element at that index, the result is undefined. If a valid UTF-16 [surrogate pair](#surrogate-pair) does not begin at _pos_, the result is the code unit at _pos_.

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _position_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_pos_).
5.  Let _size_ be the length of _S_.
6.  If _position_ < 0 or _position_ ≥ _size_, return undefined.
7.  Let _cp_ be [CodePointAt](#sec-codepointat)(_S_, _position_).
8.  Return [𝔽](#𝔽)(_cp_._\[\[CodePoint\]\]_).

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.


# 22.1.3.5 String.prototype.concat ( ..._args_ )

Note 1

When this method is called it returns the String value consisting of the code units of the this value (converted to a String) followed by the code units of each of the arguments converted to a String. The result [is a String](#sec-ecmascript-language-types-string-type) value, not a String object.

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _R_ be _S_.
5.  For each element _next_ of _args_, do
    1.  Let _nextString_ be ? [ToString](#sec-tostring)(_next_).
    2.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _nextString_.
6.  Return _R_.

The "length" property of this method is 1<sub>𝔽</sub>.

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.


# 22.1.3.6 String.prototype.constructor

The initial value of `String.prototype.constructor` is [%String%](#sec-string-constructor).


# 22.1.3.7 String.prototype.endsWith ( _searchString_ \[, _endPosition_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _isRegExp_ be ? [IsRegExp](#sec-isregexp)(_searchString_).
5.  If _isRegExp_ is true, throw a TypeError exception.
6.  Let _searchStr_ be ? [ToString](#sec-tostring)(_searchString_).
7.  Let _len_ be the length of _S_.
8.  If _endPosition_ is undefined, let _pos_ be _len_; else let _pos_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_endPosition_).
9.  Let _end_ be the result of [clamping](#clamping) _pos_ between 0 and _len_.
10.  Let _searchLength_ be the length of _searchStr_.
11.  If _searchLength_ = 0, return true.
12.  Let _start_ be _end_ - _searchLength_.
13.  If _start_ < 0, return false.
14.  Let _substring_ be the [substring](#substring) of _S_ from _start_ to _end_.
15.  If _substring_ is _searchStr_, return true.
16.  Return false.

Note 1

This method returns true if the sequence of code units of _searchString_ converted to a String is the same as the corresponding code units of this object (converted to a String) starting at _endPosition_ - length(this). Otherwise it returns false.

Note 2

Throwing an exception if the first argument is a RegExp is specified in order to allow future editions to define extensions that allow such argument values.

Note 3

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.8 String.prototype.includes ( _searchString_ \[, _position_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _isRegExp_ be ? [IsRegExp](#sec-isregexp)(_searchString_).
5.  If _isRegExp_ is true, throw a TypeError exception.
6.  Let _searchStr_ be ? [ToString](#sec-tostring)(_searchString_).
7.  Let _pos_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_position_).
8.  [Assert](#assert): If _position_ is undefined, then _pos_ is 0.
9.  Let _len_ be the length of _S_.
10.  Let _start_ be the result of [clamping](#clamping) _pos_ between 0 and _len_.
11.  Let _index_ be [StringIndexOf](#sec-stringindexof)(_S_, _searchStr_, _start_).
12.  If _index_ is not-found, return false.
13.  Return true.

Note 1

If _searchString_ appears as a substring of the result of converting this object to a String, at one or more indices that are greater than or equal to _position_, this function returns true; otherwise, it returns false. If _position_ is undefined, 0 is assumed, so as to search all of the String.

Note 2

Throwing an exception if the first argument is a RegExp is specified in order to allow future editions to define extensions that allow such argument values.

Note 3

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.9 String.prototype.indexOf ( _searchString_ \[, _position_ \] )

Note 1

If _searchString_ appears as a substring of the result of converting this object to a String, at one or more indices that are greater than or equal to _position_, then the smallest such index is returned; otherwise, \-1<sub>𝔽</sub> is returned. If _position_ is undefined, +0<sub>𝔽</sub> is assumed, so as to search all of the String.

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _searchStr_ be ? [ToString](#sec-tostring)(_searchString_).
5.  Let _pos_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_position_).
6.  [Assert](#assert): If _position_ is undefined, then _pos_ is 0.
7.  Let _len_ be the length of _S_.
8.  Let _start_ be the result of [clamping](#clamping) _pos_ between 0 and _len_.
9.  Let _result_ be [StringIndexOf](#sec-stringindexof)(_S_, _searchStr_, _start_).
10.  If _result_ is not-found, return \-1<sub>𝔽</sub>.
11.  Return [𝔽](#𝔽)(_result_).

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.10 String.prototype.isWellFormed ( )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Return [IsStringWellFormedUnicode](#sec-isstringwellformedunicode)(_S_).


# 22.1.3.11 String.prototype.lastIndexOf ( _searchString_ \[, _position_ \] )

Note 1

If _searchString_ appears as a substring of the result of converting this object to a String at one or more indices that are smaller than or equal to _position_, then the greatest such index is returned; otherwise, \-1<sub>𝔽</sub> is returned. If _position_ is undefined, the length of the String value is assumed, so as to search all of the String.

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _searchStr_ be ? [ToString](#sec-tostring)(_searchString_).
5.  Let _numPos_ be ? [ToNumber](#sec-tonumber)(_position_).
6.  [Assert](#assert): If _position_ is undefined, then _numPos_ is NaN.
7.  If _numPos_ is NaN, let _pos_ be +∞; otherwise let _pos_ be ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_numPos_).
8.  Let _len_ be the length of _S_.
9.  Let _searchLen_ be the length of _searchStr_.
10.  If _len_ < _searchLen_, return \-1<sub>𝔽</sub>.
11.  Let _start_ be the result of [clamping](#clamping) _pos_ between 0 and _len_ - _searchLen_.
12.  Let _result_ be [StringLastIndexOf](#sec-stringlastindexof)(_S_, _searchStr_, _start_).
13.  If _result_ is not-found, return \-1<sub>𝔽</sub>.
14.  Return [𝔽](#𝔽)(_result_).

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.12 String.prototype.localeCompare ( _that_ \[, _reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method returns a Number other than NaN representing the result of an [implementation-defined](#implementation-defined) locale-sensitive String comparison of the this value (converted to a String _S_) with _that_ (converted to a String _thatValue_). The result is intended to correspond with a [sort order](#sort-order) of String values according to conventions of the [host environment](#host-environment)'s current locale, and will be negative when _S_ is ordered before _thatValue_, positive when _S_ is ordered after _thatValue_, and zero in all other cases (representing no relative ordering between _S_ and _thatValue_).

Before performing the comparisons, this method performs the following steps to prepare the Strings:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _thatValue_ be ? [ToString](#sec-tostring)(_that_).

The meaning of the optional second and third parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not assign any other interpretation to those parameter positions.

The actual return values are [implementation-defined](#implementation-defined) to permit encoding additional information in them, but this method, when considered as a method of two arguments, is required to be a [consistent comparator](#consistent-comparator) defining a total ordering on the set of all Strings. This method is also required to recognize and honour canonical equivalence according to the Unicode Standard, including returning +0<sub>𝔽</sub> when comparing distinguishable Strings that are canonically equivalent.

Note 1

This method itself is not directly suitable as an argument to `Array.prototype.sort` because the latter requires a function of two arguments.

Note 2

This method may rely on whatever language- and/or locale-sensitive comparison functionality is available to the ECMAScript environment from the [host environment](#host-environment), and is intended to compare according to the conventions of the [host environment](#host-environment)'s current locale. However, regardless of comparison capabilities, this method must recognize and honour canonical equivalence according to the Unicode Standard—for example, the following comparisons must all return +0<sub>𝔽</sub>:

```
// Å ANGSTROM SIGN vs.
// Å LATIN CAPITAL LETTER A + COMBINING RING ABOVE
"\u212B".localeCompare("A\u030A")

// Ω OHM SIGN vs.
// Ω GREEK CAPITAL LETTER OMEGA
"\u2126".localeCompare("\u03A9")

// ṩ LATIN SMALL LETTER S WITH DOT BELOW AND DOT ABOVE vs.
// ṩ LATIN SMALL LETTER S + COMBINING DOT ABOVE + COMBINING DOT BELOW
"\u1E69".localeCompare("s\u0307\u0323")

// ḍ̇ LATIN SMALL LETTER D WITH DOT ABOVE + COMBINING DOT BELOW vs.
// ḍ̇ LATIN SMALL LETTER D WITH DOT BELOW + COMBINING DOT ABOVE
"\u1E0B\u0323".localeCompare("\u1E0D\u0307")

// 가 HANGUL CHOSEONG KIYEOK + HANGUL JUNGSEONG A vs.
// 가 HANGUL SYLLABLE GA
"\u1100\u1161".localeCompare("\uAC00")
```

For a definition and discussion of canonical equivalence see the Unicode Standard, chapters 2 and 3, as well as [Unicode Standard Annex #15, Unicode Normalization Forms](https://unicode.org/reports/tr15/) and [Unicode Technical Note #5, Canonical Equivalence in Applications](https://unicode.org/notes/tn5/). Also see [Unicode Technical Standard #10, Unicode Collation Algorithm](https://unicode.org/reports/tr10/).

It is recommended that this method should not honour Unicode compatibility equivalents or compatibility decompositions as defined in the Unicode Standard, chapter 3, section 3.7.

Note 3

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.13 String.prototype.match ( _regexp_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  If _regexp_ [is an Object](#sec-object-type), then
    1.  Let _matcher_ be ? [GetMethod](#sec-getmethod)(_regexp_, [%Symbol.match%](#sec-well-known-symbols)).
    2.  If _matcher_ is not undefined, then
        1.  Return ? [Call](#sec-call)(_matcher_, _regexp_, « _O_ »).
4.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
5.  Let _rx_ be ? [RegExpCreate](#sec-regexpcreate)(_regexp_, undefined).
6.  Return ? [Invoke](#sec-invoke)(_rx_, [%Symbol.match%](#sec-well-known-symbols), « _S_ »).

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.14 String.prototype.matchAll ( _regexp_ )

This method performs a regular expression match of the String representing the this value against _regexp_ and returns an [iterator](#sec-iterator-interface) that yields match results. Each match result is an Array containing the matched portion of the String as the first element, followed by the portions matched by any capturing groups. If the regular expression never matches, the returned [iterator](#sec-iterator-interface) does not yield any match results.

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  If _regexp_ [is an Object](#sec-object-type), then
    1.  Let _isRegExp_ be ? [IsRegExp](#sec-isregexp)(_regexp_).
    2.  If _isRegExp_ is true, then
        1.  Let _flags_ be ? [Get](#sec-get-o-p)(_regexp_, "flags").
        2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_flags_).
        3.  If ? [ToString](#sec-tostring)(_flags_) does not contain "g", throw a TypeError exception.
    3.  Let _matcher_ be ? [GetMethod](#sec-getmethod)(_regexp_, [%Symbol.matchAll%](#sec-well-known-symbols)).
    4.  If _matcher_ is not undefined, then
        1.  Return ? [Call](#sec-call)(_matcher_, _regexp_, « _O_ »).
4.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
5.  Let _rx_ be ? [RegExpCreate](#sec-regexpcreate)(_regexp_, "g").
6.  Return ? [Invoke](#sec-invoke)(_rx_, [%Symbol.matchAll%](#sec-well-known-symbols), « _S_ »).

Note 1

This method is intentionally generic, it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.

Note 2

Similarly to `String.prototype.split`, `String.prototype.matchAll` is designed to typically act without mutating its inputs.


# 22.1.3.15 String.prototype.normalize ( \[_form_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  If _form_ is undefined, let _f_ be "NFC".
5.  Else, let _f_ be ? [ToString](#sec-tostring)(_form_).
6.  If _f_ is not one of "NFC", "NFD", "NFKC", or "NFKD", throw a RangeError exception.
7.  Let _ns_ be the String value that is the result of normalizing _S_ into the normalization form named by _f_ as specified in [the latest Unicode Standard, Normalization Forms](https://www.unicode.org/versions/latest/ch03.pdf).
8.  Return _ns_.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.


# 22.1.3.16 String.prototype.padEnd ( _maxLength_ \[, _fillString_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Return ? [StringPaddingBuiltinsImpl](#sec-stringpaddingbuiltinsimpl)(_O_, _maxLength_, _fillString_, end).


# 22.1.3.17 String.prototype.padStart ( _maxLength_ \[, _fillString_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Return ? [StringPaddingBuiltinsImpl](#sec-stringpaddingbuiltinsimpl)(_O_, _maxLength_, _fillString_, start).


# 22.1.3.17.1 StringPaddingBuiltinsImpl ( _O_, _maxLength_, _fillString_, _placement_ )

The abstract operation StringPaddingBuiltinsImpl takes arguments _O_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _maxLength_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _fillString_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _placement_ (start or end) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
2.  Let _intMaxLength_ be [ℝ](#ℝ)(? [ToLength](#sec-tolength)(_maxLength_)).
3.  Let _stringLength_ be the length of _S_.
4.  If _intMaxLength_ ≤ _stringLength_, return _S_.
5.  If _fillString_ is undefined, set _fillString_ to the String value consisting solely of the code unit 0x0020 (SPACE).
6.  Else, set _fillString_ to ? [ToString](#sec-tostring)(_fillString_).
7.  Return [StringPad](#sec-stringpad)(_S_, _intMaxLength_, _fillString_, _placement_).


# 22.1.3.17.2 StringPad ( _S_, _maxLength_, _fillString_, _placement_ )

The abstract operation StringPad takes arguments _S_ (a String), _maxLength_ (a non-negative [integer](#integer)), _fillString_ (a String), and _placement_ (start or end) and returns a String. It performs the following steps when called:

1.  Let _stringLength_ be the length of _S_.
2.  If _maxLength_ ≤ _stringLength_, return _S_.
3.  If _fillString_ is the empty String, return _S_.
4.  Let _fillLen_ be _maxLength_ - _stringLength_.
5.  Let _truncatedStringFiller_ be the String value consisting of repeated concatenations of _fillString_ truncated to length _fillLen_.
6.  If _placement_ is start, return the [string-concatenation](#string-concatenation) of _truncatedStringFiller_ and _S_.
7.  Else, return the [string-concatenation](#string-concatenation) of _S_ and _truncatedStringFiller_.

Note 1

The argument _maxLength_ will be clamped such that it can be no smaller than the length of _S_.

Note 2

The argument _fillString_ defaults to " " (the String value consisting of the code unit 0x0020 SPACE).


# 22.1.3.17.3 ToZeroPaddedDecimalString ( _n_, _minLength_ )

The abstract operation ToZeroPaddedDecimalString takes arguments _n_ (a non-negative [integer](#integer)) and _minLength_ (a non-negative [integer](#integer)) and returns a String. It performs the following steps when called:

1.  Let _S_ be the String representation of _n_, formatted as a decimal number.
2.  Return [StringPad](#sec-stringpad)(_S_, _minLength_, "0", start).


# 22.1.3.18 String.prototype.repeat ( _count_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_count_).
5.  If _n_ < 0 or _n_ = +∞, throw a RangeError exception.
6.  If _n_ = 0, return the empty String.
7.  Return the String value that is made from _n_ copies of _S_ appended together.

Note 1

This method creates the String value consisting of the code units of the this value (converted to String) repeated _count_ times.

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.19 String.prototype.replace ( _searchValue_, _replaceValue_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  If _searchValue_ [is an Object](#sec-object-type), then
    1.  Let _replacer_ be ? [GetMethod](#sec-getmethod)(_searchValue_, [%Symbol.replace%](#sec-well-known-symbols)).
    2.  If _replacer_ is not undefined, then
        1.  Return ? [Call](#sec-call)(_replacer_, _searchValue_, « _O_, _replaceValue_ »).
4.  Let _string_ be ? [ToString](#sec-tostring)(_O_).
5.  Let _searchString_ be ? [ToString](#sec-tostring)(_searchValue_).
6.  Let _functionalReplace_ be [IsCallable](#sec-iscallable)(_replaceValue_).
7.  If _functionalReplace_ is false, then
    1.  Set _replaceValue_ to ? [ToString](#sec-tostring)(_replaceValue_).
8.  Let _searchLength_ be the length of _searchString_.
9.  Let _position_ be [StringIndexOf](#sec-stringindexof)(_string_, _searchString_, 0).
10.  If _position_ is not-found, return _string_.
11.  Let _preceding_ be the [substring](#substring) of _string_ from 0 to _position_.
12.  Let _following_ be the [substring](#substring) of _string_ from _position_ + _searchLength_.
13.  If _functionalReplace_ is true, then
     1.  Let _replacement_ be ? [ToString](#sec-tostring)(? [Call](#sec-call)(_replaceValue_, undefined, « _searchString_, [𝔽](#𝔽)(_position_), _string_ »)).
14.  Else,
     1.  [Assert](#assert): _replaceValue_ [is a String](#sec-ecmascript-language-types-string-type).
     2.  Let _captures_ be a new empty [List](#sec-list-and-record-specification-type).
     3.  Let _replacement_ be ! [GetSubstitution](#sec-getsubstitution)(_searchString_, _string_, _position_, _captures_, undefined, _replaceValue_).
15.  Return the [string-concatenation](#string-concatenation) of _preceding_, _replacement_, and _following_.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.19.1 GetSubstitution ( _matched_, _str_, _position_, _captures_, _namedCaptures_, _replacementTemplate_ )

The abstract operation GetSubstitution takes arguments _matched_ (a String), _str_ (a String), _position_ (a non-negative [integer](#integer)), _captures_ (a [List](#sec-list-and-record-specification-type) of either Strings or undefined), _namedCaptures_ (an Object or undefined), and _replacementTemplate_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). For the purposes of this abstract operation, a *decimal digit* is a code unit in the [inclusive interval](#inclusive-interval) from 0x0030 (DIGIT ZERO) to 0x0039 (DIGIT NINE). It performs the following steps when called:

1.  Let _stringLength_ be the length of _str_.
2.  [Assert](#assert): _position_ ≤ _stringLength_.
3.  Let _result_ be the empty String.
4.  Let _templateRemainder_ be _replacementTemplate_.
5.  Repeat, while _templateRemainder_ is not the empty String,
    1.  NOTE: The following steps isolate _ref_ (a prefix of _templateRemainder_), determine _refReplacement_ (its replacement), and then append that replacement to _result_.
    2.  If _templateRemainder_ starts with "$$", then
        1.  Let _ref_ be "$$".
        2.  Let _refReplacement_ be "$".
    3.  Else if _templateRemainder_ starts with "$\`", then
        1.  Let _ref_ be "$\`".
        2.  Let _refReplacement_ be the [substring](#substring) of _str_ from 0 to _position_.
    4.  Else if _templateRemainder_ starts with "$&", then
        1.  Let _ref_ be "$&".
        2.  Let _refReplacement_ be _matched_.
    5.  Else if _templateRemainder_ starts with "$'" (0x0024 (DOLLAR SIGN) followed by 0x0027 (APOSTROPHE)), then
        1.  Let _ref_ be "$'".
        2.  Let _matchLength_ be the length of _matched_.
        3.  Let _tailPos_ be _position_ + _matchLength_.
        4.  Let _refReplacement_ be the [substring](#substring) of _str_ from [min](#eqn-min)(_tailPos_, _stringLength_).
        5.  NOTE: _tailPos_ can exceed _stringLength_ only if this abstract operation was invoked by a call to the intrinsic [%Symbol.replace%](#sec-well-known-symbols) method of [%RegExp.prototype%](#sec-properties-of-the-regexp-prototype-object) on an object whose "exec" property is not the intrinsic %RegExp.prototype.exec%.
    6.  Else if _templateRemainder_ starts with "$" followed by 1 or more decimal digits, then
        1.  If _templateRemainder_ starts with "$" followed by 2 or more decimal digits, let _digitCount_ be 2; otherwise let _digitCount_ be 1.
        2.  Let _digits_ be the [substring](#substring) of _templateRemainder_ from 1 to 1 + _digitCount_.
        3.  Let _index_ be [ℝ](#ℝ)([StringToNumber](#sec-stringtonumber)(_digits_)).
        4.  [Assert](#assert): 0 ≤ _index_ ≤ 99.
        5.  Let _captureLen_ be the number of elements in _captures_.
        6.  If _index_ > _captureLen_ and _digitCount_ = 2, then
            1.  NOTE: When a two-digit replacement pattern specifies an index exceeding the count of capturing groups, it is treated as a one-digit replacement pattern followed by a literal digit.
            2.  Set _digitCount_ to 1.
            3.  Set _digits_ to the [substring](#substring) of _digits_ from 0 to 1.
            4.  Set _index_ to [ℝ](#ℝ)([StringToNumber](#sec-stringtonumber)(_digits_)).
        7.  Let _ref_ be the [substring](#substring) of _templateRemainder_ from 0 to 1 + _digitCount_.
        8.  If 1 ≤ _index_ ≤ _captureLen_, then
            1.  Let _capture_ be _captures_\[_index_ - 1\].
            2.  If _capture_ is undefined, then
                1.  Let _refReplacement_ be the empty String.
            3.  Else,
                1.  Let _refReplacement_ be _capture_.
        9.  Else,
            1.  Let _refReplacement_ be _ref_.
    7.  Else if _templateRemainder_ starts with "$<", then
        1.  Let _gtPos_ be [StringIndexOf](#sec-stringindexof)(_templateRemainder_, ">", 0).
        2.  If _gtPos_ is not-found or _namedCaptures_ is undefined, then
            1.  Let _ref_ be "$<".
            2.  Let _refReplacement_ be _ref_.
        3.  Else,
            1.  Let _ref_ be the [substring](#substring) of _templateRemainder_ from 0 to _gtPos_ + 1.
            2.  Let _groupName_ be the [substring](#substring) of _templateRemainder_ from 2 to _gtPos_.
            3.  [Assert](#assert): _namedCaptures_ [is an Object](#sec-object-type).
            4.  Let _capture_ be ? [Get](#sec-get-o-p)(_namedCaptures_, _groupName_).
            5.  If _capture_ is undefined, then
                1.  Let _refReplacement_ be the empty String.
            6.  Else,
                1.  Let _refReplacement_ be ? [ToString](#sec-tostring)(_capture_).
    8.  Else,
        1.  Let _ref_ be the [substring](#substring) of _templateRemainder_ from 0 to 1.
        2.  Let _refReplacement_ be _ref_.
    9.  Let _refLength_ be the length of _ref_.
    10.  Set _templateRemainder_ to the [substring](#substring) of _templateRemainder_ from _refLength_.
    11.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_ and _refReplacement_.
6.  Return _result_.


# 22.1.3.20 String.prototype.replaceAll ( _searchValue_, _replaceValue_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  If _searchValue_ [is an Object](#sec-object-type), then
    1.  Let _isRegExp_ be ? [IsRegExp](#sec-isregexp)(_searchValue_).
    2.  If _isRegExp_ is true, then
        1.  Let _flags_ be ? [Get](#sec-get-o-p)(_searchValue_, "flags").
        2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_flags_).
        3.  If ? [ToString](#sec-tostring)(_flags_) does not contain "g", throw a TypeError exception.
    3.  Let _replacer_ be ? [GetMethod](#sec-getmethod)(_searchValue_, [%Symbol.replace%](#sec-well-known-symbols)).
    4.  If _replacer_ is not undefined, then
        1.  Return ? [Call](#sec-call)(_replacer_, _searchValue_, « _O_, _replaceValue_ »).
4.  Let _string_ be ? [ToString](#sec-tostring)(_O_).
5.  Let _searchString_ be ? [ToString](#sec-tostring)(_searchValue_).
6.  Let _functionalReplace_ be [IsCallable](#sec-iscallable)(_replaceValue_).
7.  If _functionalReplace_ is false, then
    1.  Set _replaceValue_ to ? [ToString](#sec-tostring)(_replaceValue_).
8.  Let _searchLength_ be the length of _searchString_.
9.  Let _advanceBy_ be [max](#eqn-max)(1, _searchLength_).
10.  Let _matchPositions_ be a new empty [List](#sec-list-and-record-specification-type).
11.  Let _position_ be [StringIndexOf](#sec-stringindexof)(_string_, _searchString_, 0).
12.  Repeat, while _position_ is not not-found,
     1.  Append _position_ to _matchPositions_.
     2.  Set _position_ to [StringIndexOf](#sec-stringindexof)(_string_, _searchString_, _position_ + _advanceBy_).
13.  Let _endOfLastMatch_ be 0.
14.  Let _result_ be the empty String.
15.  For each element _p_ of _matchPositions_, do
     1.  Let _preserved_ be the [substring](#substring) of _string_ from _endOfLastMatch_ to _p_.
     2.  If _functionalReplace_ is true, then
         1.  Let _replacement_ be ? [ToString](#sec-tostring)(? [Call](#sec-call)(_replaceValue_, undefined, « _searchString_, [𝔽](#𝔽)(_p_), _string_ »)).
     3.  Else,
         1.  [Assert](#assert): _replaceValue_ [is a String](#sec-ecmascript-language-types-string-type).
         2.  Let _captures_ be a new empty [List](#sec-list-and-record-specification-type).
         3.  Let _replacement_ be ! [GetSubstitution](#sec-getsubstitution)(_searchString_, _string_, _p_, _captures_, undefined, _replaceValue_).
     4.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_, _preserved_, and _replacement_.
     5.  Set _endOfLastMatch_ to _p_ + _searchLength_.
16.  If _endOfLastMatch_ < the length of _string_, then
     1.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_ and the [substring](#substring) of _string_ from _endOfLastMatch_.
17.  Return _result_.


# 22.1.3.21 String.prototype.search ( _regexp_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  If _regexp_ [is an Object](#sec-object-type), then
    1.  Let _searcher_ be ? [GetMethod](#sec-getmethod)(_regexp_, [%Symbol.search%](#sec-well-known-symbols)).
    2.  If _searcher_ is not undefined, then
        1.  Return ? [Call](#sec-call)(_searcher_, _regexp_, « _O_ »).
4.  Let _string_ be ? [ToString](#sec-tostring)(_O_).
5.  Let _rx_ be ? [RegExpCreate](#sec-regexpcreate)(_regexp_, undefined).
6.  Return ? [Invoke](#sec-invoke)(_rx_, [%Symbol.search%](#sec-well-known-symbols), « _string_ »).

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.22 String.prototype.slice ( _start_, _end_ )

This method returns a substring of the result of converting this object to a String, starting from index _start_ and running to, but not including, index _end_ (or through the end of the String if _end_ is undefined). If _start_ is negative, it is treated as _sourceLength_ + _start_ where _sourceLength_ is the length of the String. If _end_ is negative, it is treated as _sourceLength_ + _end_ where _sourceLength_ is the length of the String. The result [is a String](#sec-ecmascript-language-types-string-type) value, not a String object.

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _len_ be the length of _S_.
5.  Let _intStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
6.  If _intStart_ = -∞, let _from_ be 0.
7.  Else if _intStart_ < 0, let _from_ be [max](#eqn-max)(_len_ + _intStart_, 0).
8.  Else, let _from_ be [min](#eqn-min)(_intStart_, _len_).
9.  If _end_ is undefined, let _intEnd_ be _len_; else let _intEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
10.  If _intEnd_ = -∞, let _to_ be 0.
11.  Else if _intEnd_ < 0, let _to_ be [max](#eqn-max)(_len_ + _intEnd_, 0).
12.  Else, let _to_ be [min](#eqn-min)(_intEnd_, _len_).
13.  If _from_ ≥ _to_, return the empty String.
14.  Return the [substring](#substring) of _S_ from _from_ to _to_.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.


# 22.1.3.23 String.prototype.split ( _separator_, _limit_ )

This method returns an Array into which substrings of the result of converting this object to a String have been stored. The substrings are determined by searching from left to right for occurrences of _separator_; these occurrences are not part of any String in the returned array, but serve to divide up the String value. The value of _separator_ may be a String of any length or it may be an object, such as a RegExp, that has a [%Symbol.split%](#sec-well-known-symbols) method.

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  If _separator_ [is an Object](#sec-object-type), then
    1.  Let _splitter_ be ? [GetMethod](#sec-getmethod)(_separator_, [%Symbol.split%](#sec-well-known-symbols)).
    2.  If _splitter_ is not undefined, then
        1.  Return ? [Call](#sec-call)(_splitter_, _separator_, « _O_, _limit_ »).
4.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
5.  If _limit_ is undefined, let _lim_ be 2<sup>32</sup> - 1; else let _lim_ be [ℝ](#ℝ)(? [ToUint32](#sec-touint32)(_limit_)).
6.  Let _R_ be ? [ToString](#sec-tostring)(_separator_).
7.  If _lim_ = 0, then
    1.  Return [CreateArrayFromList](#sec-createarrayfromlist)(« »).
8.  If _separator_ is undefined, then
    1.  Return [CreateArrayFromList](#sec-createarrayfromlist)(« _S_ »).
9.  Let _separatorLength_ be the length of _R_.
10.  If _separatorLength_ = 0, then
     1.  Let _strLen_ be the length of _S_.
     2.  Let _outLen_ be the result of [clamping](#clamping) _lim_ between 0 and _strLen_.
     3.  Let _head_ be the [substring](#substring) of _S_ from 0 to _outLen_.
     4.  Let _codeUnits_ be a [List](#sec-list-and-record-specification-type) consisting of the sequence of code units that are the elements of _head_.
     5.  Return [CreateArrayFromList](#sec-createarrayfromlist)(_codeUnits_).
11.  If _S_ is the empty String, return [CreateArrayFromList](#sec-createarrayfromlist)(« _S_ »).
12.  Let _substrings_ be a new empty [List](#sec-list-and-record-specification-type).
13.  Let _i_ be 0.
14.  Let _j_ be [StringIndexOf](#sec-stringindexof)(_S_, _R_, 0).
15.  Repeat, while _j_ is not not-found,
     1.  Let _T_ be the [substring](#substring) of _S_ from _i_ to _j_.
     2.  Append _T_ to _substrings_.
     3.  If the number of elements in _substrings_ is _lim_, return [CreateArrayFromList](#sec-createarrayfromlist)(_substrings_).
     4.  Set _i_ to _j_ + _separatorLength_.
     5.  Set _j_ to [StringIndexOf](#sec-stringindexof)(_S_, _R_, _i_).
16.  Let _T_ be the [substring](#substring) of _S_ from _i_.
17.  Append _T_ to _substrings_.
18.  Return [CreateArrayFromList](#sec-createarrayfromlist)(_substrings_).

Note 1

The value of _separator_ may be an empty String. In this case, _separator_ does not match the empty substring at the beginning or end of the input String, nor does it match the empty substring at the end of the previous separator match. If _separator_ is the empty String, the String is split up into individual code unit elements; the length of the result array equals the length of the String, and each substring contains one code unit.

If the this value is (or converts to) the empty String, the result depends on whether _separator_ can match the empty String. If it can, the result array contains no elements. Otherwise, the result array contains one element, which is the empty String.

If _separator_ is undefined, then the result array contains just one String, which is the this value (converted to a String). If _limit_ is not undefined, then the output array is truncated so that it contains no more than _limit_ elements.

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.24 String.prototype.startsWith ( _searchString_ \[, _position_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _isRegExp_ be ? [IsRegExp](#sec-isregexp)(_searchString_).
5.  If _isRegExp_ is true, throw a TypeError exception.
6.  Let _searchStr_ be ? [ToString](#sec-tostring)(_searchString_).
7.  Let _len_ be the length of _S_.
8.  If _position_ is undefined, let _pos_ be 0; else let _pos_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_position_).
9.  Let _start_ be the result of [clamping](#clamping) _pos_ between 0 and _len_.
10.  Let _searchLength_ be the length of _searchStr_.
11.  If _searchLength_ = 0, return true.
12.  Let _end_ be _start_ + _searchLength_.
13.  If _end_ > _len_, return false.
14.  Let _substring_ be the [substring](#substring) of _S_ from _start_ to _end_.
15.  If _substring_ is _searchStr_, return true.
16.  Return false.

Note 1

This method returns true if the sequence of code units of _searchString_ converted to a String is the same as the corresponding code units of this object (converted to a String) starting at index _position_. Otherwise it returns false.

Note 2

Throwing an exception if the first argument is a RegExp is specified in order to allow future editions to define extensions that allow such argument values.

Note 3

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.25 String.prototype.substring ( _start_, _end_ )

This method returns a substring of the result of converting this object to a String, starting from index _start_ and running to, but not including, index _end_ of the String (or through the end of the String if _end_ is undefined). The result [is a String](#sec-ecmascript-language-types-string-type) value, not a String object.

If either argument is NaN or negative, it is replaced with zero; if either argument is strictly greater than the length of the String, it is replaced with the length of the String.

If _start_ is strictly greater than _end_, they are swapped.

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _len_ be the length of _S_.
5.  Let _intStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
6.  If _end_ is undefined, let _intEnd_ be _len_; else let _intEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
7.  Let _finalStart_ be the result of [clamping](#clamping) _intStart_ between 0 and _len_.
8.  Let _finalEnd_ be the result of [clamping](#clamping) _intEnd_ between 0 and _len_.
9.  Let _from_ be [min](#eqn-min)(_finalStart_, _finalEnd_).
10.  Let _to_ be [max](#eqn-max)(_finalStart_, _finalEnd_).
11.  Return the [substring](#substring) of _S_ from _from_ to _to_.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.26 String.prototype.toLocaleLowerCase ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method interprets a String value as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type).

It works exactly the same as `toLowerCase` except that it is intended to yield a locale-sensitive result corresponding with conventions of the [host environment](#host-environment)'s current locale. There will only be a difference in the few cases (such as Turkish) where the rules for that language conflict with the regular Unicode case mappings.

The meaning of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.27 String.prototype.toLocaleUpperCase ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used:

This method interprets a String value as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type).

It works exactly the same as `toUpperCase` except that it is intended to yield a locale-sensitive result corresponding with conventions of the [host environment](#host-environment)'s current locale. There will only be a difference in the few cases (such as Turkish) where the rules for that language conflict with the regular Unicode case mappings.

The meaning of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.28 String.prototype.toLowerCase ( )

This method interprets a String value as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type).

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _sText_ be [StringToCodePoints](#sec-stringtocodepoints)(_S_).
5.  Let _lowerText_ be toLowercase(_sText_), according to the Unicode Default Case Conversion algorithm.
6.  Let _L_ be [CodePointsToString](#sec-codepointstostring)(_lowerText_).
7.  Return _L_.

The result must be derived according to the locale-insensitive case mappings in the Unicode Character Database (this explicitly includes not only the file [`UnicodeData.txt`](https://unicode.org/Public/UCD/latest/ucd/UnicodeData.txt), but also all locale-insensitive mappings in the file [`SpecialCasing.txt`](https://unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt) that accompanies it).

Note 1

The case mapping of some code points may produce multiple code points. In this case the result String may not be the same length as the source String. Because both `toUpperCase` and `toLowerCase` have context-sensitive behaviour, the methods are not symmetrical. In other words, `s.toUpperCase().toLowerCase()` is not necessarily equal to `s.toLowerCase()`.

Note 2

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.29 String.prototype.toString ( )

This method performs the following steps when called:

1.  Return ? [ThisStringValue](#sec-thisstringvalue)(this value).

Note

For a String object, this method happens to return the same thing as the `valueOf` method.


# 22.1.3.30 String.prototype.toUpperCase ( )

This method interprets a String value as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type).

It behaves in exactly the same way as `String.prototype.toLowerCase`, except that the String is mapped using the toUppercase algorithm of the Unicode Default Case Conversion.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.31 String.prototype.toWellFormed ( )

This method returns a String representation of this object with all [leading surrogates](#leading-surrogate) and [trailing surrogates](#trailing-surrogate) that are not part of a [surrogate pair](#surrogate-pair) replaced with U+FFFD (REPLACEMENT CHARACTER).

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _strLen_ be the length of _S_.
5.  Let _k_ be 0.
6.  Let _result_ be the empty String.
7.  Repeat, while _k_ < _strLen_,
    1.  Let _cp_ be [CodePointAt](#sec-codepointat)(_S_, _k_).
    2.  If _cp_._\[\[IsUnpairedSurrogate\]\]_ is true, then
        1.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_ and 0xFFFD (REPLACEMENT CHARACTER).
    3.  Else,
        1.  Set _result_ to the [string-concatenation](#string-concatenation) of _result_ and [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)(_cp_._\[\[CodePoint\]\]_).
    4.  Set _k_ to _k_ + _cp_._\[\[CodeUnitCount\]\]_.
8.  Return _result_.


# 22.1.3.32 String.prototype.trim ( )

This method interprets a String value as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type).

It performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [TrimString](#sec-trimstring)(_S_, start+end).

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.32.1 TrimString ( _string_, _where_ )

The abstract operation TrimString takes arguments _string_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _where_ (start, end, or start+end) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It interprets _string_ as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type). It performs the following steps when called:

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_string_).
2.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
3.  If _where_ is start, then
    1.  Let _T_ be the String value that is a copy of _S_ with leading white space removed.
4.  Else if _where_ is end, then
    1.  Let _T_ be the String value that is a copy of _S_ with trailing white space removed.
5.  Else,
    1.  [Assert](#assert): _where_ is start+end.
    2.  Let _T_ be the String value that is a copy of _S_ with both leading and trailing white space removed.
6.  Return _T_.

The definition of white space is the union of [WhiteSpace](#prod-WhiteSpace) and [LineTerminator](#prod-LineTerminator). When determining whether a Unicode code point is in Unicode general category “Space\_Separator” (“Zs”), code unit sequences are interpreted as UTF-16 encoded code point sequences as specified in [6.1.4](#sec-ecmascript-language-types-string-type).


# 22.1.3.33 String.prototype.trimEnd ( )

This method interprets a String value as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type).

It performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [TrimString](#sec-trimstring)(_S_, end).

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.34 String.prototype.trimStart ( )

This method interprets a String value as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type).

It performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [TrimString](#sec-trimstring)(_S_, start).

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.


# 22.1.3.35 String.prototype.valueOf ( )

This method performs the following steps when called:

1.  Return ? [ThisStringValue](#sec-thisstringvalue)(this value).


# 22.1.3.35.1 ThisStringValue ( _value_ )

The abstract operation ThisStringValue takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _value_ [is a String](#sec-ecmascript-language-types-string-type), return _value_.
2.  If _value_ [is an Object](#sec-object-type) and _value_ has a _\[\[StringData\]\]_ internal slot, then
    1.  Let _s_ be _value_._\[\[StringData\]\]_.
    2.  [Assert](#assert): _s_ [is a String](#sec-ecmascript-language-types-string-type).
    3.  Return _s_.
3.  Throw a TypeError exception.


# 22.1.3.36 String.prototype \[%Symbol.iterator% \] ( )

This method returns an [iterator object](#sec-iterator-interface) that iterates over the code points of a String value, returning each code point as a String value.

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _s_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _s_ and performs the following steps when called:
    1.  Let _len_ be the length of _s_.
    2.  Let _position_ be 0.
    3.  Repeat, while _position_ < _len_,
        1.  Let _cp_ be [CodePointAt](#sec-codepointat)(_s_, _position_).
        2.  Let _nextIndex_ be _position_ + _cp_._\[\[CodeUnitCount\]\]_.
        3.  Let _resultString_ be the [substring](#substring) of _s_ from _position_ to _nextIndex_.
        4.  Set _position_ to _nextIndex_.
        5.  Perform ? [GeneratorYield](#sec-generatoryield)([CreateIteratorResultObject](#sec-createiterresultobject)(_resultString_, false)).
    4.  Return [NormalCompletion](#sec-normalcompletion)(unused).
5.  Return [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "%StringIteratorPrototype%", [%StringIteratorPrototype%](#sec-%stringiteratorprototype%-object)).

The value of the "name" property of this method is "\[Symbol.iterator\]".


# 22.1.4 Properties of String Instances

String instances are [String exotic objects](#string-exotic-object) and have the internal methods specified for such objects. String instances inherit properties from the [String prototype object](#sec-properties-of-the-string-prototype-object). String instances also have a _\[\[StringData\]\]_ internal slot. The _\[\[StringData\]\]_ internal slot is the String value represented by this String object.

String instances have a "length" property, and a set of enumerable properties with [integer-indexed](#integer-index) names.


# 22.1.4.1 length

The number of elements in the String value represented by this String object.

Once a String object is initialized, this property is unchanging. It has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 22.1.5 String Iterator Objects

A String Iterator is an object that represents a specific iteration over some specific String instance object. There is not a named [constructor](#constructor) for String Iterator objects. Instead, String Iterator objects are created by calling certain methods of String instance objects.


# 22.1.5.1 The %StringIteratorPrototype% Object

The %StringIteratorPrototype% object:

-   has properties that are inherited by all [String Iterator objects](#sec-string-iterator-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   has the following properties:


# 22.1.5.1.1 %StringIteratorPrototype%.next ( )

1.  Return ? [GeneratorResume](#sec-generatorresume)(this value, empty, "%StringIteratorPrototype%").


# 22.1.5.1.2 %StringIteratorPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "String Iterator".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 22.2 RegExp (Regular Expression) Objects

A RegExp object contains a regular expression and the associated flags.

Note

The form and functionality of regular expressions is modelled after the regular expression facility in the Perl 5 programming language.


# 22.2.1 Patterns

The RegExp [constructor](#constructor) applies the following grammar to the input pattern String. An error occurs if the grammar cannot interpret the String as an expansion of [Pattern](#prod-Pattern).


## Syntax

[Pattern](#prod-Pattern)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Disjunction](#prod-Disjunction)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [Alternative](#prod-Alternative)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Alternative](#prod-Alternative)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] | [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Alternative](#prod-Alternative)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: \[empty\] [Alternative](#prod-Alternative)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Term](#prod-Term)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Term](#prod-Term)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [Assertion](#prod-Assertion)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Atom](#prod-Atom)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Atom](#prod-Atom)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Quantifier](#prod-Quantifier) [Assertion](#prod-Assertion)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: ^ $ \\b \\B (?= [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (?! [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (?<= [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (?<! [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) [Quantifier](#prod-Quantifier) :: [QuantifierPrefix](#prod-QuantifierPrefix) [QuantifierPrefix](#prod-QuantifierPrefix) ? [QuantifierPrefix](#prod-QuantifierPrefix) :: \* + ? { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] } { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] ,} { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] , [DecimalDigits](#prod-DecimalDigits)\[~Sep\] } [Atom](#prod-Atom)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [PatternCharacter](#prod-PatternCharacter) . \\ [AtomEscape](#prod-AtomEscape)\[?UnicodeMode, ?NamedCaptureGroups\] [CharacterClass](#prod-CharacterClass)\[?UnicodeMode, ?UnicodeSetsMode\] ( [GroupSpecifier](#prod-GroupSpecifier)\[?UnicodeMode\]opt [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) \- [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) [RegularExpressionModifiers](#prod-RegularExpressionModifiers) :: \[empty\] [RegularExpressionModifiers](#prod-RegularExpressionModifiers) [RegularExpressionModifier](#prod-RegularExpressionModifier) [RegularExpressionModifier](#prod-RegularExpressionModifier) :: one of i m s [SyntaxCharacter](#prod-SyntaxCharacter) :: one of ^ $ \\ . \* + ? ( ) \[\] { } | [PatternCharacter](#prod-PatternCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not [SyntaxCharacter](#prod-SyntaxCharacter) [AtomEscape](#prod-AtomEscape)\[UnicodeMode, NamedCaptureGroups\] :: [DecimalEscape](#prod-DecimalEscape) [CharacterClassEscape](#prod-CharacterClassEscape)\[?UnicodeMode\] [CharacterEscape](#prod-CharacterEscape)\[?UnicodeMode\] \[+NamedCaptureGroups\] k [GroupName](#prod-GroupName)\[?UnicodeMode\] [CharacterEscape](#prod-CharacterEscape)\[UnicodeMode\] :: [ControlEscape](#prod-ControlEscape) c [AsciiLetter](#prod-AsciiLetter) 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [HexEscapeSequence](#prod-HexEscapeSequence) [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[?UnicodeMode\] [IdentityEscape](#prod-IdentityEscape)\[?UnicodeMode\] [ControlEscape](#prod-ControlEscape) :: one of f n r t v [GroupSpecifier](#prod-GroupSpecifier)\[UnicodeMode\] :: ? [GroupName](#prod-GroupName)\[?UnicodeMode\] [GroupName](#prod-GroupName)\[UnicodeMode\] :: < [RegExpIdentifierName](#prod-RegExpIdentifierName)\[?UnicodeMode\] \> [RegExpIdentifierName](#prod-RegExpIdentifierName)\[UnicodeMode\] :: [RegExpIdentifierStart](#prod-RegExpIdentifierStart)\[?UnicodeMode\] [RegExpIdentifierName](#prod-RegExpIdentifierName)\[?UnicodeMode\] [RegExpIdentifierPart](#prod-RegExpIdentifierPart)\[?UnicodeMode\] [RegExpIdentifierStart](#prod-RegExpIdentifierStart)\[UnicodeMode\] :: [IdentifierStartChar](#prod-IdentifierStartChar) \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[+UnicodeMode\] \[~UnicodeMode\] [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate) [RegExpIdentifierPart](#prod-RegExpIdentifierPart)\[UnicodeMode\] :: [IdentifierPartChar](#prod-IdentifierPartChar) \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[+UnicodeMode\] \[~UnicodeMode\] [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate) [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[UnicodeMode\] :: \[+UnicodeMode\] u [HexLeadSurrogate](#prod-HexLeadSurrogate) \\u [HexTrailSurrogate](#prod-HexTrailSurrogate) \[+UnicodeMode\] u [HexLeadSurrogate](#prod-HexLeadSurrogate) \[+UnicodeMode\] u [HexTrailSurrogate](#prod-HexTrailSurrogate) \[+UnicodeMode\] u [HexNonSurrogate](#prod-HexNonSurrogate) \[~UnicodeMode\] u [Hex4Digits](#prod-Hex4Digits) \[+UnicodeMode\] u{ [CodePoint](#prod-CodePoint) } [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) :: any Unicode code point in the inclusive interval from U+D800 to U+DBFF [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate) :: any Unicode code point in the inclusive interval from U+DC00 to U+DFFF

Each `\u` [HexTrailSurrogate](#prod-HexTrailSurrogate) for which the choice of associated `u` [HexLeadSurrogate](#prod-HexLeadSurrogate) is ambiguous shall be associated with the nearest possible `u` [HexLeadSurrogate](#prod-HexLeadSurrogate) that would otherwise have no corresponding `\u` [HexTrailSurrogate](#prod-HexTrailSurrogate).

[HexLeadSurrogate](#prod-HexLeadSurrogate) :: [Hex4Digits](#prod-Hex4Digits) but only if the MV of [Hex4Digits](#prod-Hex4Digits) is in the [inclusive interval](#inclusive-interval) from 0xD800 to 0xDBFF [HexTrailSurrogate](#prod-HexTrailSurrogate) :: [Hex4Digits](#prod-Hex4Digits) but only if the MV of [Hex4Digits](#prod-Hex4Digits) is in the [inclusive interval](#inclusive-interval) from 0xDC00 to 0xDFFF [HexNonSurrogate](#prod-HexNonSurrogate) :: [Hex4Digits](#prod-Hex4Digits) but only if the MV of [Hex4Digits](#prod-Hex4Digits) is not in the [inclusive interval](#inclusive-interval) from 0xD800 to 0xDFFF [IdentityEscape](#prod-IdentityEscape)\[UnicodeMode\] :: \[+UnicodeMode\] [SyntaxCharacter](#prod-SyntaxCharacter) \[+UnicodeMode\] / \[~UnicodeMode\] [SourceCharacter](#prod-SourceCharacter) but not [UnicodeIDContinue](#prod-UnicodeIDContinue) [DecimalEscape](#prod-DecimalEscape) :: [NonZeroDigit](#prod-NonZeroDigit) [DecimalDigits](#prod-DecimalDigits)\[~Sep\]opt \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [CharacterClassEscape](#prod-CharacterClassEscape)\[UnicodeMode\] :: d D s S w W \[+UnicodeMode\] p{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) } \[+UnicodeMode\] P{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) } [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [UnicodePropertyName](#prod-UnicodePropertyName) \= [UnicodePropertyValue](#prod-UnicodePropertyValue) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue) [UnicodePropertyName](#prod-UnicodePropertyName) :: [UnicodePropertyNameCharacters](#prod-UnicodePropertyNameCharacters) [UnicodePropertyNameCharacters](#prod-UnicodePropertyNameCharacters) :: [UnicodePropertyNameCharacter](#prod-UnicodePropertyNameCharacter) [UnicodePropertyNameCharacters](#prod-UnicodePropertyNameCharacters)opt [UnicodePropertyValue](#prod-UnicodePropertyValue) :: [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue) :: [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters) [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters) :: [UnicodePropertyValueCharacter](#prod-UnicodePropertyValueCharacter) [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters)opt [UnicodePropertyValueCharacter](#prod-UnicodePropertyValueCharacter) :: [UnicodePropertyNameCharacter](#prod-UnicodePropertyNameCharacter) [DecimalDigit](#prod-DecimalDigit) [UnicodePropertyNameCharacter](#prod-UnicodePropertyNameCharacter) :: [AsciiLetter](#prod-AsciiLetter) \_ [CharacterClass](#prod-CharacterClass)\[UnicodeMode, UnicodeSetsMode\] :: \[\[lookahead ≠ ^\] [ClassContents](#prod-ClassContents)\[?UnicodeMode, ?UnicodeSetsMode\] \] \[^ [ClassContents](#prod-ClassContents)\[?UnicodeMode, ?UnicodeSetsMode\] \] [ClassContents](#prod-ClassContents)\[UnicodeMode, UnicodeSetsMode\] :: \[empty\] \[~UnicodeSetsMode\] [NonemptyClassRanges](#prod-NonemptyClassRanges)\[?UnicodeMode\] \[+UnicodeSetsMode\] [ClassSetExpression](#prod-ClassSetExpression) [NonemptyClassRanges](#prod-NonemptyClassRanges)\[UnicodeMode\] :: [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)\[?UnicodeMode\] [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] \- [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassContents](#prod-ClassContents)\[?UnicodeMode, ~UnicodeSetsMode\] [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)\[UnicodeMode\] :: [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassAtomNoDash](#prod-ClassAtomNoDash)\[?UnicodeMode\] [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)\[?UnicodeMode\] [ClassAtomNoDash](#prod-ClassAtomNoDash)\[?UnicodeMode\] \- [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassContents](#prod-ClassContents)\[?UnicodeMode, ~UnicodeSetsMode\] [ClassAtom](#prod-ClassAtom)\[UnicodeMode\] :: \- [ClassAtomNoDash](#prod-ClassAtomNoDash)\[?UnicodeMode\] [ClassAtomNoDash](#prod-ClassAtomNoDash)\[UnicodeMode\] :: [SourceCharacter](#prod-SourceCharacter) but not one of \\ or \] or \- \\ [ClassEscape](#prod-ClassEscape)\[?UnicodeMode\] [ClassEscape](#prod-ClassEscape)\[UnicodeMode\] :: b \[+UnicodeMode\] \- [CharacterClassEscape](#prod-CharacterClassEscape)\[?UnicodeMode\] [CharacterEscape](#prod-CharacterEscape)\[?UnicodeMode\] [ClassSetExpression](#prod-ClassSetExpression) :: [ClassUnion](#prod-ClassUnion) [ClassIntersection](#prod-ClassIntersection) [ClassSubtraction](#prod-ClassSubtraction) [ClassUnion](#prod-ClassUnion) :: [ClassSetRange](#prod-ClassSetRange) [ClassUnion](#prod-ClassUnion)opt [ClassSetOperand](#prod-ClassSetOperand) [ClassUnion](#prod-ClassUnion)opt [ClassIntersection](#prod-ClassIntersection) :: [ClassSetOperand](#prod-ClassSetOperand) && \[lookahead ≠ &\] [ClassSetOperand](#prod-ClassSetOperand) [ClassIntersection](#prod-ClassIntersection) && \[lookahead ≠ &\] [ClassSetOperand](#prod-ClassSetOperand) [ClassSubtraction](#prod-ClassSubtraction) :: [ClassSetOperand](#prod-ClassSetOperand) \-- [ClassSetOperand](#prod-ClassSetOperand) [ClassSubtraction](#prod-ClassSubtraction) \-- [ClassSetOperand](#prod-ClassSetOperand) [ClassSetRange](#prod-ClassSetRange) :: [ClassSetCharacter](#prod-ClassSetCharacter) \- [ClassSetCharacter](#prod-ClassSetCharacter) [ClassSetOperand](#prod-ClassSetOperand) :: [NestedClass](#prod-NestedClass) [ClassStringDisjunction](#prod-ClassStringDisjunction) [ClassSetCharacter](#prod-ClassSetCharacter) [NestedClass](#prod-NestedClass) :: \[\[lookahead ≠ ^\] [ClassContents](#prod-ClassContents)\[+UnicodeMode, +UnicodeSetsMode\] \] \[^ [ClassContents](#prod-ClassContents)\[+UnicodeMode, +UnicodeSetsMode\] \] \\ [CharacterClassEscape](#prod-CharacterClassEscape)\[+UnicodeMode\] Note 1

The first two lines here are equivalent to CharacterClass.

[ClassStringDisjunction](#prod-ClassStringDisjunction) :: \\q{ [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) } [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) :: [ClassString](#prod-ClassString) [ClassString](#prod-ClassString) | [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) [ClassString](#prod-ClassString) :: \[empty\] [NonEmptyClassString](#prod-NonEmptyClassString) [NonEmptyClassString](#prod-NonEmptyClassString) :: [ClassSetCharacter](#prod-ClassSetCharacter) [NonEmptyClassString](#prod-NonEmptyClassString)opt [ClassSetCharacter](#prod-ClassSetCharacter) :: \[lookahead ∉ [ClassSetReservedDoublePunctuator](#prod-ClassSetReservedDoublePunctuator)\] [SourceCharacter](#prod-SourceCharacter) but not [ClassSetSyntaxCharacter](#prod-ClassSetSyntaxCharacter) \\ [CharacterEscape](#prod-CharacterEscape)\[+UnicodeMode\] \\ [ClassSetReservedPunctuator](#prod-ClassSetReservedPunctuator) \\b [ClassSetReservedDoublePunctuator](#prod-ClassSetReservedDoublePunctuator) :: one of && !! ## $$ %% \*\* ++ ,, .. :: ;; << \== \>> ?? @@ ^^ \`\` ~~ [ClassSetSyntaxCharacter](#prod-ClassSetSyntaxCharacter) :: one of ( ) \[\] { } / \- \\ | [ClassSetReservedPunctuator](#prod-ClassSetReservedPunctuator) :: one of & \- ! # % , : ; < \= \> @ \` ~ Note 2

A number of productions in this section are given alternative definitions in section [B.1.2](#sec-regular-expressions-patterns).


# 22.2.1.1 Static Semantics: Early Errors

Note

This section is amended in [B.1.2.1](#sec-patterns-static-semantics-early-errors-annexb).

[Pattern](#prod-Pattern) :: [Disjunction](#prod-Disjunction)

-   It is a Syntax Error if [CountLeftCapturingParensWithin](#sec-countleftcapturingparenswithin)([Pattern](#prod-Pattern)) ≥ 2<sup>32</sup> - 1.
-   It is a Syntax Error if [Pattern](#prod-Pattern) contains two distinct [GroupSpecifier](#prod-GroupSpecifier)s _x_ and _y_ such that the [CapturingGroupName](#sec-static-semantics-capturinggroupname) of _x_ is the [CapturingGroupName](#sec-static-semantics-capturinggroupname) of _y_ and such that [MightBothParticipate](#sec-mightbothparticipate)(_x_, _y_) is true.

[QuantifierPrefix](#prod-QuantifierPrefix) :: { [DecimalDigits](#prod-DecimalDigits) , [DecimalDigits](#prod-DecimalDigits) }

-   It is a Syntax Error if the MV of the first [DecimalDigits](#prod-DecimalDigits) is strictly greater than the MV of the second [DecimalDigits](#prod-DecimalDigits).

[Atom](#prod-Atom) :: (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction) )

-   It is a Syntax Error if the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [RegularExpressionModifiers](#prod-RegularExpressionModifiers) contains the same code point more than once.

[Atom](#prod-Atom) :: (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) \- [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction) )

-   It is a Syntax Error if the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the first [RegularExpressionModifiers](#prod-RegularExpressionModifiers) and the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the second [RegularExpressionModifiers](#prod-RegularExpressionModifiers) are both empty.
-   It is a Syntax Error if the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the first [RegularExpressionModifiers](#prod-RegularExpressionModifiers) contains the same code point more than once.
-   It is a Syntax Error if the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the second [RegularExpressionModifiers](#prod-RegularExpressionModifiers) contains the same code point more than once.
-   It is a Syntax Error if any code point in the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the first [RegularExpressionModifiers](#prod-RegularExpressionModifiers) is also contained in the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the second [RegularExpressionModifiers](#prod-RegularExpressionModifiers).

[AtomEscape](#prod-AtomEscape) :: k [GroupName](#prod-GroupName)

-   It is a Syntax Error if [GroupSpecifiersThatMatch](#sec-groupspecifiersthatmatch)([GroupName](#prod-GroupName)) is empty.

[AtomEscape](#prod-AtomEscape) :: [DecimalEscape](#prod-DecimalEscape)

-   It is a Syntax Error if the [CapturingGroupNumber](#sec-patterns-static-semantics-capturing-group-number) of [DecimalEscape](#prod-DecimalEscape) is strictly greater than [CountLeftCapturingParensWithin](#sec-countleftcapturingparenswithin)(the [Pattern](#prod-Pattern) containing [AtomEscape](#prod-AtomEscape)).

[NonemptyClassRanges](#prod-NonemptyClassRanges) :: [ClassAtom](#prod-ClassAtom) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the first [ClassAtom](#prod-ClassAtom) is true or [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the second [ClassAtom](#prod-ClassAtom) is true.
-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the first [ClassAtom](#prod-ClassAtom) is false, [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the second [ClassAtom](#prod-ClassAtom) is false, and the [CharacterValue](#sec-patterns-static-semantics-character-value) of the first [ClassAtom](#prod-ClassAtom) is strictly greater than the [CharacterValue](#sec-patterns-static-semantics-character-value) of the second [ClassAtom](#prod-ClassAtom).

[NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash) :: [ClassAtomNoDash](#prod-ClassAtomNoDash) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtomNoDash](#prod-ClassAtomNoDash) is true or [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtom](#prod-ClassAtom) is true.
-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtomNoDash](#prod-ClassAtomNoDash) is false, [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtom](#prod-ClassAtom) is false, and the [CharacterValue](#sec-patterns-static-semantics-character-value) of [ClassAtomNoDash](#prod-ClassAtomNoDash) is strictly greater than the [CharacterValue](#sec-patterns-static-semantics-character-value) of [ClassAtom](#prod-ClassAtom).

[RegExpIdentifierStart](#prod-RegExpIdentifierStart) :: \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)

-   It is a Syntax Error if the [CharacterValue](#sec-patterns-static-semantics-character-value) of [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence) is not the numeric value of some code point matched by the [IdentifierStartChar](#prod-IdentifierStartChar) lexical grammar production.

[RegExpIdentifierStart](#prod-RegExpIdentifierStart) :: [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate)

-   It is a Syntax Error if the [RegExpIdentifierCodePoint](#sec-regexpidentifiercodepoint) of [RegExpIdentifierStart](#prod-RegExpIdentifierStart) is not matched by the [UnicodeIDStart](#prod-UnicodeIDStart) lexical grammar production.

[RegExpIdentifierPart](#prod-RegExpIdentifierPart) :: \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)

-   It is a Syntax Error if the [CharacterValue](#sec-patterns-static-semantics-character-value) of [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence) is not the numeric value of some code point matched by the [IdentifierPartChar](#prod-IdentifierPartChar) lexical grammar production.

[RegExpIdentifierPart](#prod-RegExpIdentifierPart) :: [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate)

-   It is a Syntax Error if the [RegExpIdentifierCodePoint](#sec-regexpidentifiercodepoint) of [RegExpIdentifierPart](#prod-RegExpIdentifierPart) is not matched by the [UnicodeIDContinue](#prod-UnicodeIDContinue) lexical grammar production.

[UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [UnicodePropertyName](#prod-UnicodePropertyName) \= [UnicodePropertyValue](#prod-UnicodePropertyValue)

-   It is a Syntax Error if the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [UnicodePropertyName](#prod-UnicodePropertyName) is not a Unicode property name or property alias listed in the “Property name and aliases” column of [Table 67](#table-nonbinary-unicode-properties).
-   It is a Syntax Error if the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [UnicodePropertyValue](#prod-UnicodePropertyValue) is not a property value or property value alias for the Unicode property or property alias given by the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [UnicodePropertyName](#prod-UnicodePropertyName) listed in [`PropertyValueAliases.txt`](https://unicode.org/Public/UCD/latest/ucd/PropertyValueAliases.txt).

[UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue)

-   It is a Syntax Error if the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue) is not a Unicode property value or property value alias for the General\_Category (gc) property listed in [`PropertyValueAliases.txt`](https://unicode.org/Public/UCD/latest/ucd/PropertyValueAliases.txt), nor a binary property or binary property alias listed in the “Property name and aliases” column of [Table 68](#table-binary-unicode-properties), nor a binary property of strings listed in the “Property name” column of [Table 69](#table-binary-unicode-properties-of-strings).
-   It is a Syntax Error if the enclosing [Pattern](#prod-Pattern) does not have a <sub>\[UnicodeSetsMode\]</sub> parameter and the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue) is a binary property of strings listed in the “Property name” column of [Table 69](#table-binary-unicode-properties-of-strings).

[CharacterClassEscape](#prod-CharacterClassEscape) :: P{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) }

-   It is a Syntax Error if [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) is true.

[CharacterClass](#prod-CharacterClass) :: \[^ [ClassContents](#prod-ClassContents) \]

-   It is a Syntax Error if [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassContents](#prod-ClassContents) is true.

[NestedClass](#prod-NestedClass) :: \[^ [ClassContents](#prod-ClassContents) \]

-   It is a Syntax Error if [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassContents](#prod-ClassContents) is true.

[ClassSetRange](#prod-ClassSetRange) :: [ClassSetCharacter](#prod-ClassSetCharacter) \- [ClassSetCharacter](#prod-ClassSetCharacter)

-   It is a Syntax Error if the [CharacterValue](#sec-patterns-static-semantics-character-value) of the first [ClassSetCharacter](#prod-ClassSetCharacter) is strictly greater than the [CharacterValue](#sec-patterns-static-semantics-character-value) of the second [ClassSetCharacter](#prod-ClassSetCharacter).


# 22.2.1.2 Static Semantics: CountLeftCapturingParensWithin ( _node_ )

The abstract operation CountLeftCapturingParensWithin takes argument _node_ (a [Parse Node](#sec-syntactic-grammar)) and returns a non-negative [integer](#integer). It returns the number of left-capturing parentheses in _node_. A left-capturing parenthesis is any `(` pattern character that is matched by the `(` terminal of the [Atom](#prod-Atom) :: ( [GroupSpecifier](#prod-GroupSpecifier)opt [Disjunction](#prod-Disjunction) ) production.

Note

This section is amended in [B.1.2.2](#sec-countleftcapturingparens-annexb).

It performs the following steps when called:

1.  [Assert](#assert): _node_ is an instance of a production in [the RegExp Pattern grammar](#sec-patterns).
2.  Return the number of [Atom](#prod-Atom) :: ( [GroupSpecifier](#prod-GroupSpecifier)opt [Disjunction](#prod-Disjunction) ) [Parse Nodes](#sec-syntactic-grammar) contained within _node_.


# 22.2.1.3 Static Semantics: CountLeftCapturingParensBefore ( _node_ )

The abstract operation CountLeftCapturingParensBefore takes argument _node_ (a [Parse Node](#sec-syntactic-grammar)) and returns a non-negative [integer](#integer). It returns the number of [left-capturing parentheses](#sec-countleftcapturingparenswithin) within the enclosing pattern that occur to the left of _node_.

Note

This section is amended in [B.1.2.2](#sec-countleftcapturingparens-annexb).

It performs the following steps when called:

1.  [Assert](#assert): _node_ is an instance of a production in [the RegExp Pattern grammar](#sec-patterns).
2.  Let _pattern_ be the [Pattern](#prod-Pattern) containing _node_.
3.  Return the number of [Atom](#prod-Atom) :: ( [GroupSpecifier](#prod-GroupSpecifier)opt [Disjunction](#prod-Disjunction) ) [Parse Nodes](#sec-syntactic-grammar) contained within _pattern_ that either occur before _node_ or contain _node_.


# 22.2.1.4 Static Semantics: MightBothParticipate ( _x_, _y_ )

The abstract operation MightBothParticipate takes arguments _x_ (a [Parse Node](#sec-syntactic-grammar)) and _y_ (a [Parse Node](#sec-syntactic-grammar)) and returns a Boolean. It performs the following steps when called:

1.  [Assert](#assert): _x_ and _y_ have the same enclosing [Pattern](#prod-Pattern).
2.  If the enclosing [Pattern](#prod-Pattern) contains a [Disjunction](#prod-Disjunction) :: [Alternative](#prod-Alternative) | [Disjunction](#prod-Disjunction) [Parse Node](#sec-syntactic-grammar) such that either _x_ is contained within the [Alternative](#prod-Alternative) and _y_ is contained within the derived [Disjunction](#prod-Disjunction), or _x_ is contained within the derived [Disjunction](#prod-Disjunction) and _y_ is contained within the [Alternative](#prod-Alternative), return false.
3.  Return true.


# 22.2.1.5 Static Semantics: CapturingGroupNumber

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CapturingGroupNumber takes no arguments and returns a positive [integer](#integer).

Note

This section is amended in [B.1.2.1](#sec-patterns-static-semantics-early-errors-annexb).

It is defined piecewise over the following productions:

[DecimalEscape](#prod-DecimalEscape) :: [NonZeroDigit](#prod-NonZeroDigit)

1.  Return the MV of [NonZeroDigit](#prod-NonZeroDigit).

[DecimalEscape](#prod-DecimalEscape) :: [NonZeroDigit](#prod-NonZeroDigit) [DecimalDigits](#prod-DecimalDigits)

1.  Let _n_ be the number of code points in [DecimalDigits](#prod-DecimalDigits).
2.  Return (the MV of [NonZeroDigit](#prod-NonZeroDigit) × 10<sup>_n_</sup> plus the MV of [DecimalDigits](#prod-DecimalDigits)).

The definitions of “the MV of [NonZeroDigit](#prod-NonZeroDigit)” and “the MV of [DecimalDigits](#prod-DecimalDigits)” are in [12.9.3](#sec-literals-numeric-literals).


# 22.2.1.6 Static Semantics: IsCharacterClass

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) IsCharacterClass takes no arguments and returns a Boolean.

Note

This section is amended in [B.1.2.3](#sec-patterns-static-semantics-is-character-class-annexb).

It is defined piecewise over the following productions:

[ClassAtom](#prod-ClassAtom) :: \- [ClassAtomNoDash](#prod-ClassAtomNoDash) :: [SourceCharacter](#prod-SourceCharacter) but not one of \\ or \] or \- [ClassEscape](#prod-ClassEscape) :: b \- [CharacterEscape](#prod-CharacterEscape)

1.  Return false.

[ClassEscape](#prod-ClassEscape) :: [CharacterClassEscape](#prod-CharacterClassEscape)

1.  Return true.


# 22.2.1.7 Static Semantics: CharacterValue

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CharacterValue takes no arguments and returns a non-negative [integer](#integer).

Note 1

This section is amended in [B.1.2.4](#sec-patterns-static-semantics-character-value-annexb).

It is defined piecewise over the following productions:

[ClassAtom](#prod-ClassAtom) :: \-

1.  Return the numeric value of U+002D (HYPHEN-MINUS).

[ClassAtomNoDash](#prod-ClassAtomNoDash) :: [SourceCharacter](#prod-SourceCharacter) but not one of \\ or \] or \-

1.  Let _ch_ be the code point matched by [SourceCharacter](#prod-SourceCharacter).
2.  Return the numeric value of _ch_.

[ClassEscape](#prod-ClassEscape) :: b

1.  Return the numeric value of U+0008 (BACKSPACE).

[ClassEscape](#prod-ClassEscape) :: \-

1.  Return the numeric value of U+002D (HYPHEN-MINUS).

[CharacterEscape](#prod-CharacterEscape) :: [ControlEscape](#prod-ControlEscape)

1.  Return the numeric value according to [Table 65](#table-controlescape-code-point-values).

Table 65: ControlEscape Code Point Values

<table><thead><tr><th>ControlEscape</th><th>Numeric Value</th><th>Code Point</th><th>Unicode Name</th><th>Symbol</th></tr></thead><tbody><tr><td><code>t</code></td><td>9</td><td><code>U+0009</code></td><td>CHARACTER TABULATION</td><td>&lt;HT&gt;</td></tr><tr><td><code>n</code></td><td>10</td><td><code>U+000A</code></td><td>LINE FEED (LF)</td><td>&lt;LF&gt;</td></tr><tr><td><code>v</code></td><td>11</td><td><code>U+000B</code></td><td>LINE TABULATION</td><td>&lt;VT&gt;</td></tr><tr><td><code>f</code></td><td>12</td><td><code>U+000C</code></td><td>FORM FEED (FF)</td><td>&lt;FF&gt;</td></tr><tr><td><code>r</code></td><td>13</td><td><code>U+000D</code></td><td>CARRIAGE RETURN (CR)</td><td>&lt;CR&gt;</td></tr></tbody></table>

[CharacterEscape](#prod-CharacterEscape) :: c [AsciiLetter](#prod-AsciiLetter)

1.  Let _ch_ be the code point matched by [AsciiLetter](#prod-AsciiLetter).
2.  Let _i_ be the numeric value of _ch_.
3.  Return the remainder of dividing _i_ by 32.

[CharacterEscape](#prod-CharacterEscape) :: 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\]

1.  Return the numeric value of U+0000 (NULL).

Note 2

`\0` represents the <NUL> character and cannot be followed by a decimal digit.

[CharacterEscape](#prod-CharacterEscape) :: [HexEscapeSequence](#prod-HexEscapeSequence)

1.  Return the MV of [HexEscapeSequence](#prod-HexEscapeSequence).

[RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence) :: u [HexLeadSurrogate](#prod-HexLeadSurrogate) \\u [HexTrailSurrogate](#prod-HexTrailSurrogate)

1.  Let _lead_ be the [CharacterValue](#sec-patterns-static-semantics-character-value) of [HexLeadSurrogate](#prod-HexLeadSurrogate).
2.  Let _trail_ be the [CharacterValue](#sec-patterns-static-semantics-character-value) of [HexTrailSurrogate](#prod-HexTrailSurrogate).
3.  Let _cp_ be [UTF16SurrogatePairToCodePoint](#sec-utf16decodesurrogatepair)(_lead_, _trail_).
4.  Return the numeric value of _cp_.

[RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence) :: u [Hex4Digits](#prod-Hex4Digits)

1.  Return the MV of [Hex4Digits](#prod-Hex4Digits).

[RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence) :: u{ [CodePoint](#prod-CodePoint) }

1.  Return the MV of [CodePoint](#prod-CodePoint).

[HexLeadSurrogate](#prod-HexLeadSurrogate) :: [Hex4Digits](#prod-Hex4Digits) [HexTrailSurrogate](#prod-HexTrailSurrogate) :: [Hex4Digits](#prod-Hex4Digits) [HexNonSurrogate](#prod-HexNonSurrogate) :: [Hex4Digits](#prod-Hex4Digits)

1.  Return the MV of [Hex4Digits](#prod-Hex4Digits).

[CharacterEscape](#prod-CharacterEscape) :: [IdentityEscape](#prod-IdentityEscape)

1.  Let _ch_ be the code point matched by [IdentityEscape](#prod-IdentityEscape).
2.  Return the numeric value of _ch_.

[ClassSetCharacter](#prod-ClassSetCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not [ClassSetSyntaxCharacter](#prod-ClassSetSyntaxCharacter)

1.  Let _ch_ be the code point matched by [SourceCharacter](#prod-SourceCharacter).
2.  Return the numeric value of _ch_.

[ClassSetCharacter](#prod-ClassSetCharacter) :: \\ [ClassSetReservedPunctuator](#prod-ClassSetReservedPunctuator)

1.  Let _ch_ be the code point matched by [ClassSetReservedPunctuator](#prod-ClassSetReservedPunctuator).
2.  Return the numeric value of _ch_.

[ClassSetCharacter](#prod-ClassSetCharacter) :: \\b

1.  Return the numeric value of U+0008 (BACKSPACE).


# 22.2.1.8 Static Semantics: MayContainStrings

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) MayContainStrings takes no arguments and returns a Boolean. It is defined piecewise over the following productions:

[CharacterClassEscape](#prod-CharacterClassEscape) :: d D s S w W P{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) } [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [UnicodePropertyName](#prod-UnicodePropertyName) \= [UnicodePropertyValue](#prod-UnicodePropertyValue) [NestedClass](#prod-NestedClass) :: \[^ [ClassContents](#prod-ClassContents) \] [ClassContents](#prod-ClassContents) :: \[empty\] [NonemptyClassRanges](#prod-NonemptyClassRanges) [ClassSetOperand](#prod-ClassSetOperand) :: [ClassSetCharacter](#prod-ClassSetCharacter)

1.  Return false.

[UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue)

1.  If the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue) is a binary property of strings listed in the “Property name” column of [Table 69](#table-binary-unicode-properties-of-strings), return true.
2.  Return false.

[ClassUnion](#prod-ClassUnion) :: [ClassSetRange](#prod-ClassSetRange) [ClassUnion](#prod-ClassUnion)opt

1.  If the [ClassUnion](#prod-ClassUnion) is present, return [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassUnion](#prod-ClassUnion).
2.  Return false.

[ClassUnion](#prod-ClassUnion) :: [ClassSetOperand](#prod-ClassSetOperand) [ClassUnion](#prod-ClassUnion)opt

1.  If [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassSetOperand](#prod-ClassSetOperand) is true, return true.
2.  If [ClassUnion](#prod-ClassUnion) is present, return [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassUnion](#prod-ClassUnion).
3.  Return false.

[ClassIntersection](#prod-ClassIntersection) :: [ClassSetOperand](#prod-ClassSetOperand) && [ClassSetOperand](#prod-ClassSetOperand)

1.  If [MayContainStrings](#sec-static-semantics-maycontainstrings) of the first [ClassSetOperand](#prod-ClassSetOperand) is false, return false.
2.  If [MayContainStrings](#sec-static-semantics-maycontainstrings) of the second [ClassSetOperand](#prod-ClassSetOperand) is false, return false.
3.  Return true.

[ClassIntersection](#prod-ClassIntersection) :: [ClassIntersection](#prod-ClassIntersection) && [ClassSetOperand](#prod-ClassSetOperand)

1.  If [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassIntersection](#prod-ClassIntersection) is false, return false.
2.  If [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassSetOperand](#prod-ClassSetOperand) is false, return false.
3.  Return true.

[ClassSubtraction](#prod-ClassSubtraction) :: [ClassSetOperand](#prod-ClassSetOperand) \-- [ClassSetOperand](#prod-ClassSetOperand)

1.  Return [MayContainStrings](#sec-static-semantics-maycontainstrings) of the first [ClassSetOperand](#prod-ClassSetOperand).

[ClassSubtraction](#prod-ClassSubtraction) :: [ClassSubtraction](#prod-ClassSubtraction) \-- [ClassSetOperand](#prod-ClassSetOperand)

1.  Return [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassSubtraction](#prod-ClassSubtraction).

[ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) :: [ClassString](#prod-ClassString) | [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents)

1.  If [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassString](#prod-ClassString) is true, return true.
2.  Return [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents).

[ClassString](#prod-ClassString) :: \[empty\]

1.  Return true.

[ClassString](#prod-ClassString) :: [NonEmptyClassString](#prod-NonEmptyClassString)

1.  Return [MayContainStrings](#sec-static-semantics-maycontainstrings) of the [NonEmptyClassString](#prod-NonEmptyClassString).

[NonEmptyClassString](#prod-NonEmptyClassString) :: [ClassSetCharacter](#prod-ClassSetCharacter) [NonEmptyClassString](#prod-NonEmptyClassString)opt

1.  If [NonEmptyClassString](#prod-NonEmptyClassString) is present, return true.
2.  Return false.


# 22.2.1.9 Static Semantics: GroupSpecifiersThatMatch ( _thisGroupName_ )

The abstract operation GroupSpecifiersThatMatch takes argument _thisGroupName_ (a [GroupName](#prod-GroupName) [Parse Node](#sec-syntactic-grammar)) and returns a [List](#sec-list-and-record-specification-type) of [GroupSpecifier](#prod-GroupSpecifier) [Parse Nodes](#sec-syntactic-grammar). It performs the following steps when called:

1.  Let _name_ be the [CapturingGroupName](#sec-static-semantics-capturinggroupname) of _thisGroupName_.
2.  Let _pattern_ be the [Pattern](#prod-Pattern) containing _thisGroupName_.
3.  Let _result_ be a new empty [List](#sec-list-and-record-specification-type).
4.  For each [GroupSpecifier](#prod-GroupSpecifier) _gs_ that _pattern_ contains, do
    1.  If the [CapturingGroupName](#sec-static-semantics-capturinggroupname) of _gs_ is _name_, then
        1.  Append _gs_ to _result_.
5.  Return _result_.


# 22.2.1.10 Static Semantics: CapturingGroupName

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CapturingGroupName takes no arguments and returns a String. It is defined piecewise over the following productions:

[GroupName](#prod-GroupName) :: < [RegExpIdentifierName](#prod-RegExpIdentifierName) \>

1.  Let _idTextUnescaped_ be the [RegExpIdentifierCodePoints](#sec-regexpidentifiercodepoints) of [RegExpIdentifierName](#prod-RegExpIdentifierName).
2.  Return [CodePointsToString](#sec-codepointstostring)(_idTextUnescaped_).


# 22.2.1.11 Static Semantics: RegExpIdentifierCodePoints

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) RegExpIdentifierCodePoints takes no arguments and returns a [List](#sec-list-and-record-specification-type) of code points. It is defined piecewise over the following productions:

[RegExpIdentifierName](#prod-RegExpIdentifierName) :: [RegExpIdentifierStart](#prod-RegExpIdentifierStart)

1.  Let _cp_ be the [RegExpIdentifierCodePoint](#sec-regexpidentifiercodepoint) of [RegExpIdentifierStart](#prod-RegExpIdentifierStart).
2.  Return « _cp_ ».

[RegExpIdentifierName](#prod-RegExpIdentifierName) :: [RegExpIdentifierName](#prod-RegExpIdentifierName) [RegExpIdentifierPart](#prod-RegExpIdentifierPart)

1.  Let _cps_ be the [RegExpIdentifierCodePoints](#sec-regexpidentifiercodepoints) of the derived [RegExpIdentifierName](#prod-RegExpIdentifierName).
2.  Let _cp_ be the [RegExpIdentifierCodePoint](#sec-regexpidentifiercodepoint) of [RegExpIdentifierPart](#prod-RegExpIdentifierPart).
3.  Return the [list-concatenation](#list-concatenation) of _cps_ and « _cp_ ».


# 22.2.1.12 Static Semantics: RegExpIdentifierCodePoint

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) RegExpIdentifierCodePoint takes no arguments and returns a code point. It is defined piecewise over the following productions:

[RegExpIdentifierStart](#prod-RegExpIdentifierStart) :: [IdentifierStartChar](#prod-IdentifierStartChar)

1.  Return the code point matched by [IdentifierStartChar](#prod-IdentifierStartChar).

[RegExpIdentifierPart](#prod-RegExpIdentifierPart) :: [IdentifierPartChar](#prod-IdentifierPartChar)

1.  Return the code point matched by [IdentifierPartChar](#prod-IdentifierPartChar).

[RegExpIdentifierStart](#prod-RegExpIdentifierStart) :: \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence) [RegExpIdentifierPart](#prod-RegExpIdentifierPart) :: \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)

1.  Return the code point whose numeric value is the [CharacterValue](#sec-patterns-static-semantics-character-value) of [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence).

[RegExpIdentifierStart](#prod-RegExpIdentifierStart) :: [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate) [RegExpIdentifierPart](#prod-RegExpIdentifierPart) :: [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate)

1.  Let _lead_ be the code unit whose numeric value is the numeric value of the code point matched by [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate).
2.  Let _trail_ be the code unit whose numeric value is the numeric value of the code point matched by [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate).
3.  Return [UTF16SurrogatePairToCodePoint](#sec-utf16decodesurrogatepair)(_lead_, _trail_).


# 22.2.2 Pattern Semantics

A regular expression pattern is converted into an [Abstract Closure](#sec-abstract-closure) using the process described below. An implementation is encouraged to use more efficient algorithms than the ones listed below, as long as the results are the same. The [Abstract Closure](#sec-abstract-closure) is used as the value of a RegExp object's _\[\[RegExpMatcher\]\]_ internal slot.

A [Pattern](#prod-Pattern) is a BMP pattern if its associated flags contain neither a `u` nor a `v`. Otherwise, it is a Unicode pattern. A BMP pattern matches against a String interpreted as consisting of a sequence of 16-bit values that are Unicode code points in the range of the Basic Multilingual Plane. A Unicode pattern matches against a String interpreted as consisting of Unicode code points encoded using UTF-16. In the context of describing the behaviour of a BMP pattern “character” means a single 16-bit Unicode BMP code point. In the context of describing the behaviour of a Unicode pattern “character” means a UTF-16 encoded code point ([6.1.4](#sec-ecmascript-language-types-string-type)). In either context, “character value” means the numeric value of the corresponding non-encoded code point.

The syntax and semantics of [Pattern](#prod-Pattern) is defined as if the source text for the [Pattern](#prod-Pattern) was a [List](#sec-list-and-record-specification-type) of [SourceCharacter](#prod-SourceCharacter) values where each [SourceCharacter](#prod-SourceCharacter) corresponds to a Unicode code point. If a BMP pattern contains a non-BMP [SourceCharacter](#prod-SourceCharacter) the entire pattern is encoded using UTF-16 and the individual code units of that encoding are used as the elements of the [List](#sec-list-and-record-specification-type).

Note

For example, consider a pattern expressed in source text as the single non-BMP character U+1D11E (MUSICAL SYMBOL G CLEF). Interpreted as a Unicode pattern, it would be a single element (character) [List](#sec-list-and-record-specification-type) consisting of the single code point U+1D11E. However, interpreted as a BMP pattern, it is first UTF-16 encoded to produce a two element [List](#sec-list-and-record-specification-type) consisting of the code units 0xD834 and 0xDD1E.

Patterns are passed to the RegExp [constructor](#constructor) as ECMAScript String values in which non-BMP characters are UTF-16 encoded. For example, the single character MUSICAL SYMBOL G CLEF pattern, expressed as a String value, [is a String](#sec-ecmascript-language-types-string-type) of length 2 whose elements were the code units 0xD834 and 0xDD1E. So no further translation of the string would be necessary to process it as a BMP pattern consisting of two pattern characters. However, to process it as a Unicode pattern [UTF16SurrogatePairToCodePoint](#sec-utf16decodesurrogatepair) must be used in producing a [List](#sec-list-and-record-specification-type) whose sole element is a single pattern character, the code point U+1D11E.

An implementation may not actually perform such translations to or from UTF-16, but the semantics of this specification requires that the result of pattern matching be as if such translations were performed.


# 22.2.2.1 Notation

The descriptions below use the following internal data structures:

-   A CharSetElement is one of the two following entities:
    -   If _rer_._\[\[UnicodeSets\]\]_ is false, then a CharSetElement is a character in the sense of the Pattern Semantics above.
    -   If _rer_._\[\[UnicodeSets\]\]_ is true, then a CharSetElement is a sequence whose elements are characters in the sense of the Pattern Semantics above. This includes the empty sequence, sequences of one character, and sequences of more than one character. For convenience, when working with CharSetElements of this kind, an individual character is treated interchangeably with a sequence of one character.
-   A CharSet is a mathematical set of CharSetElements.
-   A CaptureRange is a [Record](#sec-list-and-record-specification-type) { _\[\[StartIndex\]\]_, _\[\[EndIndex\]\]_ } that represents the range of characters included in a capture, where _\[\[StartIndex\]\]_ is an [integer](#integer) representing the start index (inclusive) of the range within _Input_, and _\[\[EndIndex\]\]_ is an [integer](#integer) representing the end index (exclusive) of the range within _Input_. For any [CaptureRange](#pattern-capturerange), these indices must satisfy the invariant that _\[\[StartIndex\]\]_ ≤ _\[\[EndIndex\]\]_.
-   A MatchState is a [Record](#sec-list-and-record-specification-type) { _\[\[Input\]\]_, _\[\[EndIndex\]\]_, _\[\[Captures\]\]_ } where _\[\[Input\]\]_ is a [List](#sec-list-and-record-specification-type) of characters representing the String being matched, _\[\[EndIndex\]\]_ is an [integer](#integer), and _\[\[Captures\]\]_ is a [List](#sec-list-and-record-specification-type) of values, one for each [left-capturing parenthesis](#sec-countleftcapturingparenswithin) in the pattern. [MatchStates](#pattern-matchstate) are used to represent partial match states in the regular expression matching algorithms. The _\[\[EndIndex\]\]_ is one plus the index of the last input character matched so far by the pattern, while _\[\[Captures\]\]_ holds the results of capturing parentheses. The _n_<sup>th</sup> element of _\[\[Captures\]\]_ is either a [CaptureRange](#pattern-capturerange) representing the range of characters captured by the _n_<sup>th</sup> set of capturing parentheses, or undefined if the _n_<sup>th</sup> set of capturing parentheses hasn't been reached yet. Due to backtracking, many [MatchStates](#pattern-matchstate) may be in use at any time during the matching process.
-   A MatcherContinuation is an [Abstract Closure](#sec-abstract-closure) that takes one [MatchState](#pattern-matchstate) argument and returns either a [MatchState](#pattern-matchstate) or failure. The [MatcherContinuation](#pattern-matchercontinuation) attempts to match the remaining portion (specified by the closure's captured values) of the pattern against _Input_, starting at the intermediate state given by its [MatchState](#pattern-matchstate) argument. If the match succeeds, the [MatcherContinuation](#pattern-matchercontinuation) returns the final [MatchState](#pattern-matchstate) that it reached; if the match fails, the [MatcherContinuation](#pattern-matchercontinuation) returns failure.
-   A Matcher is an [Abstract Closure](#sec-abstract-closure) that takes two arguments—a [MatchState](#pattern-matchstate) and a [MatcherContinuation](#pattern-matchercontinuation)—and returns either a [MatchState](#pattern-matchstate) or failure. A [Matcher](#pattern-matcher) attempts to match a middle subpattern (specified by the closure's captured values) of the pattern against the [MatchState](#pattern-matchstate)'s _\[\[Input\]\]_, starting at the intermediate state given by its [MatchState](#pattern-matchstate) argument. The [MatcherContinuation](#pattern-matchercontinuation) argument should be a closure that matches the rest of the pattern. After matching the subpattern of a pattern to obtain a new [MatchState](#pattern-matchstate), the [Matcher](#pattern-matcher) then calls [MatcherContinuation](#pattern-matchercontinuation) on that new [MatchState](#pattern-matchstate) to test if the rest of the pattern can match as well. If it can, the [Matcher](#pattern-matcher) returns the [MatchState](#pattern-matchstate) returned by [MatcherContinuation](#pattern-matchercontinuation); if not, the [Matcher](#pattern-matcher) may try different choices at its choice points, repeatedly calling [MatcherContinuation](#pattern-matchercontinuation) until it either succeeds or all possibilities have been exhausted.


# 22.2.2.1.1 RegExp Records

A RegExp Record is a [Record](#sec-list-and-record-specification-type) value used to store information about a RegExp that is needed during compilation and possibly during matching.

It has the following fields:

Table 66: [RegExp Record](#sec-regexp-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[IgnoreCase]]</var></td><td>a Boolean</td><td>indicates whether <emu-val>"i"</emu-val> appears in the RegExp's flags</td></tr><tr><td><var class="field">[[Multiline]]</var></td><td>a Boolean</td><td>indicates whether <emu-val>"m"</emu-val> appears in the RegExp's flags</td></tr><tr><td><var class="field">[[DotAll]]</var></td><td>a Boolean</td><td>indicates whether <emu-val>"s"</emu-val> appears in the RegExp's flags</td></tr><tr><td><var class="field">[[Unicode]]</var></td><td>a Boolean</td><td>indicates whether <emu-val>"u"</emu-val> appears in the RegExp's flags</td></tr><tr><td><var class="field">[[UnicodeSets]]</var></td><td>a Boolean</td><td>indicates whether <emu-val>"v"</emu-val> appears in the RegExp's flags</td></tr><tr><td><var class="field">[[CapturingGroupsCount]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_11478"><a href="#integer">integer</a></emu-xref></td><td>the number of <emu-xref href="#sec-countleftcapturingparenswithin" id="_ref_11479"><a href="#sec-countleftcapturingparenswithin">left-capturing parentheses</a></emu-xref> in the RegExp's pattern</td></tr></tbody></table>


# 22.2.2.2 Runtime Semantics: CompilePattern

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompilePattern takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns an [Abstract Closure](#sec-abstract-closure) that takes a [List](#sec-list-and-record-specification-type) of characters and a non-negative [integer](#integer) and returns either a [MatchState](#pattern-matchstate) or failure. It is defined piecewise over the following productions:

[Pattern](#prod-Pattern) :: [Disjunction](#prod-Disjunction)

1.  Let _m_ be [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _rer_ and forward.
2.  Return a new [Abstract Closure](#sec-abstract-closure) with parameters (_Input_, _index_) that captures _rer_ and _m_ and performs the following steps when called:
    1.  [Assert](#assert): _Input_ is a [List](#sec-list-and-record-specification-type) of characters.
    2.  [Assert](#assert): 0 ≤ _index_ ≤ the number of elements in _Input_.
    3.  Let _c_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures nothing and performs the following steps when called:
        1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
        2.  Return _y_.
    4.  Let _cap_ be a [List](#sec-list-and-record-specification-type) of _rer_._\[\[CapturingGroupsCount\]\]_ undefined values, indexed 1 through _rer_._\[\[CapturingGroupsCount\]\]_.
    5.  Let _x_ be the [MatchState](#pattern-matchstate) { _\[\[Input\]\]_: _Input_, _\[\[EndIndex\]\]_: _index_, _\[\[Captures\]\]_: _cap_ }.
    6.  Return _m_(_x_, _c_).

Note

A Pattern compiles to an [Abstract Closure](#sec-abstract-closure) value. [RegExpBuiltinExec](#sec-regexpbuiltinexec) can then apply this procedure to a [List](#sec-list-and-record-specification-type) of characters and an offset within that [List](#sec-list-and-record-specification-type) to determine whether the pattern would match starting at exactly that offset within the [List](#sec-list-and-record-specification-type), and, if it does match, what the values of the capturing parentheses would be. The algorithms in [22.2.2](#sec-pattern-semantics) are designed so that compiling a pattern may throw a SyntaxError exception; on the other hand, once the pattern is successfully compiled, applying the resulting [Abstract Closure](#sec-abstract-closure) to find a match in a [List](#sec-list-and-record-specification-type) of characters cannot throw an exception (except for any [implementation-defined](#implementation-defined) exceptions that can occur anywhere such as out-of-memory).


# 22.2.2.3 Runtime Semantics: CompileSubpattern

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileSubpattern takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)) and _direction_ (forward or backward) and returns a [Matcher](#pattern-matcher).

Note 1

This section is amended in [B.1.2.5](#sec-compilesubpattern-annexb).

It is defined piecewise over the following productions:

[Disjunction](#prod-Disjunction) :: [Alternative](#prod-Alternative) | [Disjunction](#prod-Disjunction)

1.  Let _m1_ be [CompileSubpattern](#sec-compilesubpattern) of [Alternative](#prod-Alternative) with arguments _rer_ and _direction_.
2.  Let _m2_ be [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _rer_ and _direction_.
3.  Return [MatchTwoAlternatives](#sec-matchtwoalternatives)(_m1_, _m2_).

Note 2

The `|` regular expression operator separates two alternatives. The pattern first tries to match the left [Alternative](#prod-Alternative) (followed by the sequel of the regular expression); if it fails, it tries to match the right [Disjunction](#prod-Disjunction) (followed by the sequel of the regular expression). If the left [Alternative](#prod-Alternative), the right [Disjunction](#prod-Disjunction), and the sequel all have choice points, all choices in the sequel are tried before moving on to the next choice in the left [Alternative](#prod-Alternative). If choices in the left [Alternative](#prod-Alternative) are exhausted, the right [Disjunction](#prod-Disjunction) is tried instead of the left [Alternative](#prod-Alternative). Any capturing parentheses inside a portion of the pattern skipped by `|` produce undefined values instead of Strings. Thus, for example,

```
/a|ab/.exec("abc")
```

returns the result "a" and not "ab". Moreover,

```
/((a)|(ab))((c)|(bc))/.exec("abc")
```

returns the array

```
["abc", "a", "a", undefined, "bc", undefined, "bc"]
```

and not

```
["abc", "ab", undefined, "ab", "c", "c", undefined]
```

The order in which the two alternatives are tried is independent of the value of _direction_.

[Alternative](#prod-Alternative) :: \[empty\]

1.  Return [EmptyMatcher](#sec-emptymatcher)().

[Alternative](#prod-Alternative) :: [Alternative](#prod-Alternative) [Term](#prod-Term)

1.  Let _m1_ be [CompileSubpattern](#sec-compilesubpattern) of [Alternative](#prod-Alternative) with arguments _rer_ and _direction_.
2.  Let _m2_ be [CompileSubpattern](#sec-compilesubpattern) of [Term](#prod-Term) with arguments _rer_ and _direction_.
3.  Return [MatchSequence](#sec-matchsequence)(_m1_, _m2_, _direction_).

Note 3

Consecutive [Term](#prod-Term)s try to simultaneously match consecutive portions of _Input_. When _direction_ is forward, if the left [Alternative](#prod-Alternative), the right [Term](#prod-Term), and the sequel of the regular expression all have choice points, all choices in the sequel are tried before moving on to the next choice in the right [Term](#prod-Term), and all choices in the right [Term](#prod-Term) are tried before moving on to the next choice in the left [Alternative](#prod-Alternative). When _direction_ is backward, the evaluation order of [Alternative](#prod-Alternative) and [Term](#prod-Term) are reversed.

[Term](#prod-Term) :: [Assertion](#prod-Assertion)

1.  Return [CompileAssertion](#sec-compileassertion) of [Assertion](#prod-Assertion) with argument _rer_.

Note 4

The resulting [Matcher](#pattern-matcher) is independent of _direction_.

[Term](#prod-Term) :: [Atom](#prod-Atom)

1.  Return [CompileAtom](#sec-compileatom) of [Atom](#prod-Atom) with arguments _rer_ and _direction_.

[Term](#prod-Term) :: [Atom](#prod-Atom) [Quantifier](#prod-Quantifier)

1.  Let _m_ be [CompileAtom](#sec-compileatom) of [Atom](#prod-Atom) with arguments _rer_ and _direction_.
2.  Let _q_ be [CompileQuantifier](#sec-compilequantifier) of [Quantifier](#prod-Quantifier).
3.  [Assert](#assert): _q_._\[\[Min\]\]_ ≤ _q_._\[\[Max\]\]_.
4.  Let _parenIndex_ be [CountLeftCapturingParensBefore](#sec-countleftcapturingparensbefore)([Term](#prod-Term)).
5.  Let _parenCount_ be [CountLeftCapturingParensWithin](#sec-countleftcapturingparenswithin)([Atom](#prod-Atom)).
6.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m_, _q_, _parenIndex_, and _parenCount_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Return [RepeatMatcher](#sec-runtime-semantics-repeatmatcher-abstract-operation)(_m_, _q_._\[\[Min\]\]_, _q_._\[\[Max\]\]_, _q_._\[\[Greedy\]\]_, _x_, _c_, _parenIndex_, _parenCount_).


# 22.2.2.3.1 RepeatMatcher ( _m_, _min_, _max_, _greedy_, _x_, _c_, _parenIndex_, _parenCount_ )

The abstract operation RepeatMatcher takes arguments _m_ (a [Matcher](#pattern-matcher)), _min_ (a non-negative [integer](#integer)), _max_ (a non-negative [integer](#integer) or +∞), _greedy_ (a Boolean), _x_ (a [MatchState](#pattern-matchstate)), _c_ (a [MatcherContinuation](#pattern-matchercontinuation)), _parenIndex_ (a non-negative [integer](#integer)), and _parenCount_ (a non-negative [integer](#integer)) and returns either a [MatchState](#pattern-matchstate) or failure. It performs the following steps when called:

1.  If _max_ = 0, return _c_(_x_).
2.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures _m_, _min_, _max_, _greedy_, _x_, _c_, _parenIndex_, and _parenCount_ and performs the following steps when called:
    1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
    2.  If _min_ = 0 and _y_._\[\[EndIndex\]\]_ = _x_._\[\[EndIndex\]\]_, return failure.
    3.  If _min_ = 0, let _min2_ be 0; otherwise let _min2_ be _min_ - 1.
    4.  If _max_ = +∞, let _max2_ be +∞; otherwise let _max2_ be _max_ - 1.
    5.  Return [RepeatMatcher](#sec-runtime-semantics-repeatmatcher-abstract-operation)(_m_, _min2_, _max2_, _greedy_, _y_, _c_, _parenIndex_, _parenCount_).
3.  Let _cap_ be a copy of _x_._\[\[Captures\]\]_.
4.  For each [integer](#integer) _k_ in the [inclusive interval](#inclusive-interval) from _parenIndex_ + 1 to _parenIndex_ + _parenCount_, set _cap_\[_k_\] to undefined.
5.  Let _Input_ be _x_._\[\[Input\]\]_.
6.  Let _e_ be _x_._\[\[EndIndex\]\]_.
7.  Let _xr_ be the [MatchState](#pattern-matchstate) { _\[\[Input\]\]_: _Input_, _\[\[EndIndex\]\]_: _e_, _\[\[Captures\]\]_: _cap_ }.
8.  If _min_ ≠ 0, return _m_(_xr_, _d_).
9.  If _greedy_ is false, then
    1.  Let _z_ be _c_(_x_).
    2.  If _z_ is not failure, return _z_.
    3.  Return _m_(_xr_, _d_).
10.  Let _z_ be _m_(_xr_, _d_).
11.  If _z_ is not failure, return _z_.
12.  Return _c_(_x_).

Note 1

An [Atom](#prod-Atom) followed by a [Quantifier](#prod-Quantifier) is repeated the number of times specified by the [Quantifier](#prod-Quantifier). A [Quantifier](#prod-Quantifier) can be non-greedy, in which case the [Atom](#prod-Atom) pattern is repeated as few times as possible while still matching the sequel, or it can be greedy, in which case the [Atom](#prod-Atom) pattern is repeated as many times as possible while still matching the sequel. The [Atom](#prod-Atom) pattern is repeated rather than the input character sequence that it matches, so different repetitions of the [Atom](#prod-Atom) can match different input substrings.

Note 2

If the [Atom](#prod-Atom) and the sequel of the regular expression all have choice points, the [Atom](#prod-Atom) is first matched as many (or as few, if non-greedy) times as possible. All choices in the sequel are tried before moving on to the next choice in the last repetition of [Atom](#prod-Atom). All choices in the last (n<sup>th</sup>) repetition of [Atom](#prod-Atom) are tried before moving on to the next choice in the next-to-last (n - 1)<sup>st</sup> repetition of [Atom](#prod-Atom); at which point it may turn out that more or fewer repetitions of [Atom](#prod-Atom) are now possible; these are exhausted (again, starting with either as few or as many as possible) before moving on to the next choice in the (n - 1)<sup>st</sup> repetition of [Atom](#prod-Atom) and so on.

Compare

```
/a[a-z]{2,4}/.exec("abcdefghi")
```

which returns "abcde" with

```
/a[a-z]{2,4}?/.exec("abcdefghi")
```

which returns "abc".

Consider also

```
/(aa|aabaac|ba|b|c)*/.exec("aabaac")
```

which, by the choice point ordering above, returns the array

```
["aaba", "ba"]
```

and not any of:

```
["aabaac", "aabaac"]
["aabaac", "c"]
```

The above ordering of choice points can be used to write a regular expression that calculates the greatest common divisor of two numbers (represented in unary notation). The following example calculates the gcd of 10 and 15:

```
"aaaaaaaaaa,aaaaaaaaaaaaaaa".replace(/^(a+)\1*,\1+$/, "$1")
```

which returns the gcd in unary notation "aaaaa".

Note 3

Step [4](#step-repeatmatcher-clear-captures) of the RepeatMatcher clears [Atom](#prod-Atom)'s captures each time [Atom](#prod-Atom) is repeated. We can see its behaviour in the regular expression

```
/(z)((a+)?(b+)?(c))*/.exec("zaacbbbcac")
```

which returns the array

```
["zaacbbbcac", "z", "ac", "a", undefined, "c"]
```

and not

```
["zaacbbbcac", "z", "ac", "a", "bbb", "c"]
```

because each iteration of the outermost `*` clears all captured Strings contained in the quantified [Atom](#prod-Atom), which in this case includes capture Strings numbered 2, 3, 4, and 5.

Note 4

Step [2.b](#step-repeatmatcher-done) of the RepeatMatcher states that once the minimum number of repetitions has been satisfied, any more expansions of [Atom](#prod-Atom) that match the empty character sequence are not considered for further repetitions. This prevents the regular expression engine from falling into an infinite loop on patterns such as:

```
/(a*)*/.exec("b")
```

or the slightly more complicated:

```
/(a*)b\1+/.exec("baaaac")
```

which returns the array

```
["b", ""]
```


# 22.2.2.3.2 EmptyMatcher ( )

The abstract operation EmptyMatcher takes no arguments and returns a [Matcher](#pattern-matcher). It performs the following steps when called:

1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures nothing and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Return _c_(_x_).


# 22.2.2.3.3 MatchTwoAlternatives ( _m1_, _m2_ )

The abstract operation MatchTwoAlternatives takes arguments _m1_ (a [Matcher](#pattern-matcher)) and _m2_ (a [Matcher](#pattern-matcher)) and returns a [Matcher](#pattern-matcher). It performs the following steps when called:

1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m1_ and _m2_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _r_ be _m1_(_x_, _c_).
    4.  If _r_ is not failure, return _r_.
    5.  Return _m2_(_x_, _c_).


# 22.2.2.3.4 MatchSequence ( _m1_, _m2_, _direction_ )

The abstract operation MatchSequence takes arguments _m1_ (a [Matcher](#pattern-matcher)), _m2_ (a [Matcher](#pattern-matcher)), and _direction_ (forward or backward) and returns a [Matcher](#pattern-matcher). It performs the following steps when called:

1.  If _direction_ is forward, then
    1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m1_ and _m2_ and performs the following steps when called:
        1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
        2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
        3.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures _c_ and _m2_ and performs the following steps when called:
            1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
            2.  Return _m2_(_y_, _c_).
        4.  Return _m1_(_x_, _d_).
2.  Else,
    1.  [Assert](#assert): _direction_ is backward.
    2.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m1_ and _m2_ and performs the following steps when called:
        1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
        2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
        3.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures _c_ and _m1_ and performs the following steps when called:
            1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
            2.  Return _m1_(_y_, _c_).
        4.  Return _m2_(_x_, _d_).


# 22.2.2.4 Runtime Semantics: CompileAssertion

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileAssertion takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns a [Matcher](#pattern-matcher).

Note 1

This section is amended in [B.1.2.6](#sec-compileassertion-annexb).

It is defined piecewise over the following productions:

[Assertion](#prod-Assertion) :: ^

1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _rer_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _Input_ be _x_._\[\[Input\]\]_.
    4.  Let _e_ be _x_._\[\[EndIndex\]\]_.
    5.  If _e_ = 0, or if _rer_._\[\[Multiline\]\]_ is true and the character _Input_\[_e_ - 1\] is matched by [LineTerminator](#prod-LineTerminator), then
        1.  Return _c_(_x_).
    6.  Return failure.

Note 2

Even when the `y` flag is used with a pattern, `^` always matches only at the beginning of _Input_, or (if _rer_._\[\[Multiline\]\]_ is true) at the beginning of a line.

[Assertion](#prod-Assertion) :: $

1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _rer_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _Input_ be _x_._\[\[Input\]\]_.
    4.  Let _e_ be _x_._\[\[EndIndex\]\]_.
    5.  Let _InputLength_ be the number of elements in _Input_.
    6.  If _e_ = _InputLength_, or if _rer_._\[\[Multiline\]\]_ is true and the character _Input_\[_e_\] is matched by [LineTerminator](#prod-LineTerminator), then
        1.  Return _c_(_x_).
    7.  Return failure.

[Assertion](#prod-Assertion) :: \\b

1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _rer_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _Input_ be _x_._\[\[Input\]\]_.
    4.  Let _e_ be _x_._\[\[EndIndex\]\]_.
    5.  Let _a_ be [IsWordChar](#sec-runtime-semantics-iswordchar-abstract-operation)(_rer_, _Input_, _e_ - 1).
    6.  Let _b_ be [IsWordChar](#sec-runtime-semantics-iswordchar-abstract-operation)(_rer_, _Input_, _e_).
    7.  If _a_ is true and _b_ is false, or if _a_ is false and _b_ is true, return _c_(_x_).
    8.  Return failure.

[Assertion](#prod-Assertion) :: \\B

1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _rer_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _Input_ be _x_._\[\[Input\]\]_.
    4.  Let _e_ be _x_._\[\[EndIndex\]\]_.
    5.  Let _a_ be [IsWordChar](#sec-runtime-semantics-iswordchar-abstract-operation)(_rer_, _Input_, _e_ - 1).
    6.  Let _b_ be [IsWordChar](#sec-runtime-semantics-iswordchar-abstract-operation)(_rer_, _Input_, _e_).
    7.  If _a_ is true and _b_ is true, or if _a_ is false and _b_ is false, return _c_(_x_).
    8.  Return failure.

[Assertion](#prod-Assertion) :: (?= [Disjunction](#prod-Disjunction) )

1.  Let _m_ be [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _rer_ and forward.
2.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures nothing and performs the following steps when called:
        1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
        2.  Return _y_.
    4.  Let _r_ be _m_(_x_, _d_).
    5.  If _r_ is failure, return failure.
    6.  [Assert](#assert): _r_ is a [MatchState](#pattern-matchstate).
    7.  Let _cap_ be _r_._\[\[Captures\]\]_.
    8.  Let _Input_ be _x_._\[\[Input\]\]_.
    9.  Let _xe_ be _x_._\[\[EndIndex\]\]_.
    10.  Let _z_ be the [MatchState](#pattern-matchstate) { _\[\[Input\]\]_: _Input_, _\[\[EndIndex\]\]_: _xe_, _\[\[Captures\]\]_: _cap_ }.
    11.  Return _c_(_z_).

Note 3

The form `(?=` [Disjunction](#prod-Disjunction) `)` specifies a zero-width positive lookahead. In order for it to succeed, the pattern inside [Disjunction](#prod-Disjunction) must match at the current position, but the current position is not advanced before matching the sequel. If [Disjunction](#prod-Disjunction) can match at the current position in several ways, only the first one is tried. Unlike other regular expression operators, there is no backtracking into a `(?=` form (this unusual behaviour is inherited from Perl). This only matters when the [Disjunction](#prod-Disjunction) contains capturing parentheses and the sequel of the pattern contains backreferences to those captures.

For example,

```
/(?=(a+))/.exec("baaabac")
```

matches the empty String immediately after the first `b` and therefore returns the array:

```
["", "aaa"]
```

To illustrate the lack of backtracking into the lookahead, consider:

```
/(?=(a+))a*b\1/.exec("baaabac")
```

This expression returns

```
["aba", "a"]
```

and not:

```
["aaaba", "a"]
```

[Assertion](#prod-Assertion) :: (?! [Disjunction](#prod-Disjunction) )

1.  Let _m_ be [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _rer_ and forward.
2.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures nothing and performs the following steps when called:
        1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
        2.  Return _y_.
    4.  Let _r_ be _m_(_x_, _d_).
    5.  If _r_ is not failure, return failure.
    6.  Return _c_(_x_).

Note 4

The form `(?!` [Disjunction](#prod-Disjunction) `)` specifies a zero-width negative lookahead. In order for it to succeed, the pattern inside [Disjunction](#prod-Disjunction) must fail to match at the current position. The current position is not advanced before matching the sequel. [Disjunction](#prod-Disjunction) can contain capturing parentheses, but backreferences to them only make sense from within [Disjunction](#prod-Disjunction) itself. Backreferences to these capturing parentheses from elsewhere in the pattern always return undefined because the negative lookahead must fail for the pattern to succeed. For example,

```
/(.*?)a(?!(a+)b\2c)\2(.*)/.exec("baaabaac")
```

looks for an `a` not immediately followed by some positive number n of `a`'s, a `b`, another n `a`'s (specified by the first `\2`) and a `c`. The second `\2` is outside the negative lookahead, so it matches against undefined and therefore always succeeds. The whole expression returns the array:

```
["baaabaac", "ba", undefined, "abaac"]
```

[Assertion](#prod-Assertion) :: (?<= [Disjunction](#prod-Disjunction) )

1.  Let _m_ be [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _rer_ and backward.
2.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures nothing and performs the following steps when called:
        1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
        2.  Return _y_.
    4.  Let _r_ be _m_(_x_, _d_).
    5.  If _r_ is failure, return failure.
    6.  [Assert](#assert): _r_ is a [MatchState](#pattern-matchstate).
    7.  Let _cap_ be _r_._\[\[Captures\]\]_.
    8.  Let _Input_ be _x_._\[\[Input\]\]_.
    9.  Let _xe_ be _x_._\[\[EndIndex\]\]_.
    10.  Let _z_ be the [MatchState](#pattern-matchstate) { _\[\[Input\]\]_: _Input_, _\[\[EndIndex\]\]_: _xe_, _\[\[Captures\]\]_: _cap_ }.
    11.  Return _c_(_z_).

[Assertion](#prod-Assertion) :: (?<! [Disjunction](#prod-Disjunction) )

1.  Let _m_ be [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _rer_ and backward.
2.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _m_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures nothing and performs the following steps when called:
        1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
        2.  Return _y_.
    4.  Let _r_ be _m_(_x_, _d_).
    5.  If _r_ is not failure, return failure.
    6.  Return _c_(_x_).


# 22.2.2.4.1 IsWordChar ( _rer_, _Input_, _e_ )

The abstract operation IsWordChar takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)), _Input_ (a [List](#sec-list-and-record-specification-type) of characters), and _e_ (an [integer](#integer)) and returns a Boolean. It performs the following steps when called:

1.  Let _InputLength_ be the number of elements in _Input_.
2.  If _e_ = -1 or _e_ = _InputLength_, return false.
3.  Let _c_ be the character _Input_\[_e_\].
4.  If [WordCharacters](#sec-wordcharacters)(_rer_) contains _c_, return true.
5.  Return false.


# 22.2.2.5 Runtime Semantics: CompileQuantifier

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileQuantifier takes no arguments and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[Min\]\]_ (a non-negative [integer](#integer)), _\[\[Max\]\]_ (a non-negative [integer](#integer) or +∞), and _\[\[Greedy\]\]_ (a Boolean). It is defined piecewise over the following productions:

[Quantifier](#prod-Quantifier) :: [QuantifierPrefix](#prod-QuantifierPrefix)

1.  Let _qp_ be [CompileQuantifierPrefix](#sec-compilequantifierprefix) of [QuantifierPrefix](#prod-QuantifierPrefix).
2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: _qp_._\[\[Min\]\]_, _\[\[Max\]\]_: _qp_._\[\[Max\]\]_, _\[\[Greedy\]\]_: true }.

[Quantifier](#prod-Quantifier) :: [QuantifierPrefix](#prod-QuantifierPrefix) ?

1.  Let _qp_ be [CompileQuantifierPrefix](#sec-compilequantifierprefix) of [QuantifierPrefix](#prod-QuantifierPrefix).
2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: _qp_._\[\[Min\]\]_, _\[\[Max\]\]_: _qp_._\[\[Max\]\]_, _\[\[Greedy\]\]_: false }.


# 22.2.2.6 Runtime Semantics: CompileQuantifierPrefix

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileQuantifierPrefix takes no arguments and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[Min\]\]_ (a non-negative [integer](#integer)) and _\[\[Max\]\]_ (a non-negative [integer](#integer) or +∞). It is defined piecewise over the following productions:

[QuantifierPrefix](#prod-QuantifierPrefix) :: \*

1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: 0, _\[\[Max\]\]_: +∞ }.

[QuantifierPrefix](#prod-QuantifierPrefix) :: +

1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: 1, _\[\[Max\]\]_: +∞ }.

[QuantifierPrefix](#prod-QuantifierPrefix) :: ?

1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: 0, _\[\[Max\]\]_: 1 }.

[QuantifierPrefix](#prod-QuantifierPrefix) :: { [DecimalDigits](#prod-DecimalDigits) }

1.  Let _i_ be the MV of [DecimalDigits](#prod-DecimalDigits) (see [12.9.3](#sec-literals-numeric-literals)).
2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: _i_, _\[\[Max\]\]_: _i_ }.

[QuantifierPrefix](#prod-QuantifierPrefix) :: { [DecimalDigits](#prod-DecimalDigits) ,}

1.  Let _i_ be the MV of [DecimalDigits](#prod-DecimalDigits).
2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: _i_, _\[\[Max\]\]_: +∞ }.

[QuantifierPrefix](#prod-QuantifierPrefix) :: { [DecimalDigits](#prod-DecimalDigits) , [DecimalDigits](#prod-DecimalDigits) }

1.  Let _i_ be the MV of the first [DecimalDigits](#prod-DecimalDigits).
2.  Let _j_ be the MV of the second [DecimalDigits](#prod-DecimalDigits).
3.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Min\]\]_: _i_, _\[\[Max\]\]_: _j_ }.


# 22.2.2.7 Runtime Semantics: CompileAtom

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileAtom takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)) and _direction_ (forward or backward) and returns a [Matcher](#pattern-matcher).

Note 1

This section is amended in [B.1.2.7](#sec-compileatom-annexb).

It is defined piecewise over the following productions:

[Atom](#prod-Atom) :: [PatternCharacter](#prod-PatternCharacter)

1.  Let _ch_ be the character matched by [PatternCharacter](#prod-PatternCharacter).
2.  Let _A_ be a one-element [CharSet](#pattern-charset) containing the character _ch_.
3.  Return [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _A_, false, _direction_).

[Atom](#prod-Atom) :: .

1.  Let _A_ be [AllCharacters](#sec-allcharacters)(_rer_).
2.  If _rer_._\[\[DotAll\]\]_ is not true, then
    1.  Remove from _A_ all characters corresponding to a code point on the right-hand side of the [LineTerminator](#prod-LineTerminator) production.
3.  Return [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _A_, false, _direction_).

[Atom](#prod-Atom) :: [CharacterClass](#prod-CharacterClass)

1.  Let _cc_ be [CompileCharacterClass](#sec-compilecharacterclass) of [CharacterClass](#prod-CharacterClass) with argument _rer_.
2.  Let _cs_ be _cc_._\[\[CharSet\]\]_.
3.  If _rer_._\[\[UnicodeSets\]\]_ is false, or if every [CharSetElement](#sec-pattern-notation) of _cs_ consists of a single character (including if _cs_ is empty), return [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _cs_, _cc_._\[\[Invert\]\]_, _direction_).
4.  [Assert](#assert): _cc_._\[\[Invert\]\]_ is false.
5.  Let _lm_ be an empty [List](#sec-list-and-record-specification-type) of [Matchers](#pattern-matcher).
6.  For each [CharSetElement](#sec-pattern-notation) _s_ in _cs_ containing more than 1 character, iterating in descending order of length, do
    1.  Let _cs2_ be a one-element [CharSet](#pattern-charset) containing the last code point of _s_.
    2.  Let _m2_ be [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _cs2_, false, _direction_).
    3.  For each code point _c1_ in _s_, iterating backwards from its second-to-last code point, do
        1.  Let _cs1_ be a one-element [CharSet](#pattern-charset) containing _c1_.
        2.  Let _m1_ be [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _cs1_, false, _direction_).
        3.  Set _m2_ to [MatchSequence](#sec-matchsequence)(_m1_, _m2_, _direction_).
    4.  Append _m2_ to _lm_.
7.  Let _singles_ be the [CharSet](#pattern-charset) containing every [CharSetElement](#sec-pattern-notation) of _cs_ that consists of a single character.
8.  Append [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _singles_, false, _direction_) to _lm_.
9.  If _cs_ contains the empty sequence of characters, append [EmptyMatcher](#sec-emptymatcher)() to _lm_.
10.  Let _m2_ be the last [Matcher](#pattern-matcher) in _lm_.
11.  For each [Matcher](#pattern-matcher) _m1_ of _lm_, iterating backwards from its second-to-last element, do
     1.  Set _m2_ to [MatchTwoAlternatives](#sec-matchtwoalternatives)(_m1_, _m2_).
12.  Return _m2_.

[Atom](#prod-Atom) :: ( [GroupSpecifier](#prod-GroupSpecifier)opt [Disjunction](#prod-Disjunction) )

1.  Let _m_ be [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _rer_ and _direction_.
2.  Let _parenIndex_ be [CountLeftCapturingParensBefore](#sec-countleftcapturingparensbefore)([Atom](#prod-Atom)).
3.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _direction_, _m_, and _parenIndex_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _d_ be a new [MatcherContinuation](#pattern-matchercontinuation) with parameters (_y_) that captures _x_, _c_, _direction_, and _parenIndex_ and performs the following steps when called:
        1.  [Assert](#assert): _y_ is a [MatchState](#pattern-matchstate).
        2.  Let _cap_ be a copy of _y_._\[\[Captures\]\]_.
        3.  Let _Input_ be _x_._\[\[Input\]\]_.
        4.  Let _xe_ be _x_._\[\[EndIndex\]\]_.
        5.  Let _ye_ be _y_._\[\[EndIndex\]\]_.
        6.  If _direction_ is forward, then
            1.  [Assert](#assert): _xe_ ≤ _ye_.
            2.  Let _r_ be the [CaptureRange](#pattern-capturerange) { _\[\[StartIndex\]\]_: _xe_, _\[\[EndIndex\]\]_: _ye_ }.
        7.  Else,
            1.  [Assert](#assert): _direction_ is backward.
            2.  [Assert](#assert): _ye_ ≤ _xe_.
            3.  Let _r_ be the [CaptureRange](#pattern-capturerange) { _\[\[StartIndex\]\]_: _ye_, _\[\[EndIndex\]\]_: _xe_ }.
        8.  Set _cap_\[_parenIndex_ + 1\] to _r_.
        9.  Let _z_ be the [MatchState](#pattern-matchstate) { _\[\[Input\]\]_: _Input_, _\[\[EndIndex\]\]_: _ye_, _\[\[Captures\]\]_: _cap_ }.
        10.  Return _c_(_z_).
    4.  Return _m_(_x_, _d_).

Note 2

Parentheses of the form `(` [Disjunction](#prod-Disjunction) `)` serve both to group the components of the [Disjunction](#prod-Disjunction) pattern together and to save the result of the match. The result can be used either in a backreference (`\` followed by a non-zero decimal number), referenced in a replace String, or returned as part of an array from the regular expression matching [Abstract Closure](#sec-abstract-closure). To inhibit the capturing behaviour of parentheses, use the form `(?:` [Disjunction](#prod-Disjunction) `)` instead.

[Atom](#prod-Atom) :: (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction) )

1.  Let _addModifiers_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [RegularExpressionModifiers](#prod-RegularExpressionModifiers).
2.  Let _removeModifiers_ be the empty String.
3.  Let _modifiedRer_ be [UpdateModifiers](#sec-updatemodifiers)(_rer_, [CodePointsToString](#sec-codepointstostring)(_addModifiers_), _removeModifiers_).
4.  Return [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _modifiedRer_ and _direction_.

[Atom](#prod-Atom) :: (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) \- [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction) )

1.  Let _addModifiers_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the first [RegularExpressionModifiers](#prod-RegularExpressionModifiers).
2.  Let _removeModifiers_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) the second [RegularExpressionModifiers](#prod-RegularExpressionModifiers).
3.  Let _modifiedRer_ be [UpdateModifiers](#sec-updatemodifiers)(_rer_, [CodePointsToString](#sec-codepointstostring)(_addModifiers_), [CodePointsToString](#sec-codepointstostring)(_removeModifiers_)).
4.  Return [CompileSubpattern](#sec-compilesubpattern) of [Disjunction](#prod-Disjunction) with arguments _modifiedRer_ and _direction_.

[AtomEscape](#prod-AtomEscape) :: [DecimalEscape](#prod-DecimalEscape)

1.  Let _n_ be the [CapturingGroupNumber](#sec-patterns-static-semantics-capturing-group-number) of [DecimalEscape](#prod-DecimalEscape).
2.  [Assert](#assert): _n_ ≤ _rer_._\[\[CapturingGroupsCount\]\]_.
3.  Return [BackreferenceMatcher](#sec-backreference-matcher)(_rer_, « _n_ », _direction_).

Note 3

An escape sequence of the form `\` followed by a non-zero decimal number _n_ matches the result of the _n_<sup>th</sup> set of capturing parentheses ([22.2.2.1](#sec-pattern-notation)). It is an error if the regular expression has fewer than _n_ capturing parentheses. If the regular expression has _n_ or more capturing parentheses but the _n_<sup>th</sup> one is undefined because it has not captured anything, then the backreference always succeeds.

[AtomEscape](#prod-AtomEscape) :: [CharacterEscape](#prod-CharacterEscape)

1.  Let _cv_ be the [CharacterValue](#sec-patterns-static-semantics-character-value) of [CharacterEscape](#prod-CharacterEscape).
2.  Let _ch_ be the character whose character value is _cv_.
3.  Let _A_ be a one-element [CharSet](#pattern-charset) containing the character _ch_.
4.  Return [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _A_, false, _direction_).

[AtomEscape](#prod-AtomEscape) :: [CharacterClassEscape](#prod-CharacterClassEscape)

1.  Let _cs_ be [CompileToCharSet](#sec-compiletocharset) of [CharacterClassEscape](#prod-CharacterClassEscape) with argument _rer_.
2.  If _rer_._\[\[UnicodeSets\]\]_ is false, or if every [CharSetElement](#sec-pattern-notation) of _cs_ consists of a single character (including if _cs_ is empty), return [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _cs_, false, _direction_).
3.  Let _lm_ be an empty [List](#sec-list-and-record-specification-type) of [Matchers](#pattern-matcher).
4.  For each [CharSetElement](#sec-pattern-notation) _s_ in _cs_ containing more than 1 character, iterating in descending order of length, do
    1.  Let _cs2_ be a one-element [CharSet](#pattern-charset) containing the last code point of _s_.
    2.  Let _m2_ be [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _cs2_, false, _direction_).
    3.  For each code point _c1_ in _s_, iterating backwards from its second-to-last code point, do
        1.  Let _cs1_ be a one-element [CharSet](#pattern-charset) containing _c1_.
        2.  Let _m1_ be [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _cs1_, false, _direction_).
        3.  Set _m2_ to [MatchSequence](#sec-matchsequence)(_m1_, _m2_, _direction_).
    4.  Append _m2_ to _lm_.
5.  Let _singles_ be the [CharSet](#pattern-charset) containing every [CharSetElement](#sec-pattern-notation) of _cs_ that consists of a single character.
6.  Append [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _singles_, false, _direction_) to _lm_.
7.  If _cs_ contains the empty sequence of characters, append [EmptyMatcher](#sec-emptymatcher)() to _lm_.
8.  Let _m2_ be the last [Matcher](#pattern-matcher) in _lm_.
9.  For each [Matcher](#pattern-matcher) _m1_ of _lm_, iterating backwards from its second-to-last element, do
    1.  Set _m2_ to [MatchTwoAlternatives](#sec-matchtwoalternatives)(_m1_, _m2_).
10.  Return _m2_.

[AtomEscape](#prod-AtomEscape) :: k [GroupName](#prod-GroupName)

1.  Let _matchingGroupSpecifiers_ be [GroupSpecifiersThatMatch](#sec-groupspecifiersthatmatch)([GroupName](#prod-GroupName)).
2.  Let _parenIndices_ be a new empty [List](#sec-list-and-record-specification-type).
3.  For each [GroupSpecifier](#prod-GroupSpecifier) _groupSpecifier_ of _matchingGroupSpecifiers_, do
    1.  Let _parenIndex_ be [CountLeftCapturingParensBefore](#sec-countleftcapturingparensbefore)(_groupSpecifier_).
    2.  Append _parenIndex_ to _parenIndices_.
4.  Return [BackreferenceMatcher](#sec-backreference-matcher)(_rer_, _parenIndices_, _direction_).


# 22.2.2.7.1 CharacterSetMatcher ( _rer_, _A_, _invert_, _direction_ )

The abstract operation CharacterSetMatcher takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)), _A_ (a [CharSet](#pattern-charset)), _invert_ (a Boolean), and _direction_ (forward or backward) and returns a [Matcher](#pattern-matcher). It performs the following steps when called:

1.  If _rer_._\[\[UnicodeSets\]\]_ is true, then
    1.  [Assert](#assert): _invert_ is false.
    2.  [Assert](#assert): Every [CharSetElement](#sec-pattern-notation) of _A_ consists of a single character.
2.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _rer_, _A_, _invert_, and _direction_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _Input_ be _x_._\[\[Input\]\]_.
    4.  Let _e_ be _x_._\[\[EndIndex\]\]_.
    5.  If _direction_ is forward, let _f_ be _e_ + 1.
    6.  Else, let _f_ be _e_ - 1.
    7.  Let _InputLength_ be the number of elements in _Input_.
    8.  If _f_ < 0 or _f_ > _InputLength_, return failure.
    9.  Let _index_ be [min](#eqn-min)(_e_, _f_).
    10.  Let _ch_ be the character _Input_\[_index_\].
    11.  Let _cc_ be [Canonicalize](#sec-runtime-semantics-canonicalize-ch)(_rer_, _ch_).
    12.  If there exists a [CharSetElement](#sec-pattern-notation) in _A_ containing exactly one character _a_ such that [Canonicalize](#sec-runtime-semantics-canonicalize-ch)(_rer_, _a_) is _cc_, let _found_ be true; otherwise let _found_ be false.
    13.  If _invert_ is false and _found_ is false, return failure.
    14.  If _invert_ is true and _found_ is true, return failure.
    15.  Let _cap_ be _x_._\[\[Captures\]\]_.
    16.  Let _y_ be the [MatchState](#pattern-matchstate) { _\[\[Input\]\]_: _Input_, _\[\[EndIndex\]\]_: _f_, _\[\[Captures\]\]_: _cap_ }.
    17.  Return _c_(_y_).


# 22.2.2.7.2 BackreferenceMatcher ( _rer_, _ns_, _direction_ )

The abstract operation BackreferenceMatcher takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)), _ns_ (a [List](#sec-list-and-record-specification-type) of positive [integers](#integer)), and _direction_ (forward or backward) and returns a [Matcher](#pattern-matcher). It performs the following steps when called:

1.  Return a new [Matcher](#pattern-matcher) with parameters (_x_, _c_) that captures _rer_, _ns_, and _direction_ and performs the following steps when called:
    1.  [Assert](#assert): _x_ is a [MatchState](#pattern-matchstate).
    2.  [Assert](#assert): _c_ is a [MatcherContinuation](#pattern-matchercontinuation).
    3.  Let _Input_ be _x_._\[\[Input\]\]_.
    4.  Let _cap_ be _x_._\[\[Captures\]\]_.
    5.  Let _r_ be undefined.
    6.  For each [integer](#integer) _n_ of _ns_, do
        1.  If _cap_\[_n_\] is not undefined, then
            1.  [Assert](#assert): _r_ is undefined.
            2.  Set _r_ to _cap_\[_n_\].
    7.  If _r_ is undefined, return _c_(_x_).
    8.  Let _e_ be _x_._\[\[EndIndex\]\]_.
    9.  Let _rs_ be _r_._\[\[StartIndex\]\]_.
    10.  Let _re_ be _r_._\[\[EndIndex\]\]_.
    11.  Let _len_ be _re_ - _rs_.
    12.  If _direction_ is forward, let _f_ be _e_ + _len_.
    13.  Else, let _f_ be _e_ - _len_.
    14.  Let _InputLength_ be the number of elements in _Input_.
    15.  If _f_ < 0 or _f_ > _InputLength_, return failure.
    16.  Let _g_ be [min](#eqn-min)(_e_, _f_).
    17.  If there exists an [integer](#integer) _i_ in the [interval](#interval) from 0 (inclusive) to _len_ (exclusive) such that [Canonicalize](#sec-runtime-semantics-canonicalize-ch)(_rer_, _Input_\[_rs_ + _i_\]) is not [Canonicalize](#sec-runtime-semantics-canonicalize-ch)(_rer_, _Input_\[_g_ + _i_\]), return failure.
    18.  Let _y_ be the [MatchState](#pattern-matchstate) { _\[\[Input\]\]_: _Input_, _\[\[EndIndex\]\]_: _f_, _\[\[Captures\]\]_: _cap_ }.
    19.  Return _c_(_y_).


# 22.2.2.7.3 Canonicalize ( _rer_, _ch_ )

The abstract operation Canonicalize takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)) and _ch_ (a character) and returns a character. It performs the following steps when called:

1.  If [HasEitherUnicodeFlag](#sec-runtime-semantics-haseitherunicodeflag-abstract-operation)(_rer_) is true and _rer_._\[\[IgnoreCase\]\]_ is true, then
    1.  If the file [`CaseFolding.txt`](https://unicode.org/Public/UCD/latest/ucd/CaseFolding.txt) of the Unicode Character Database provides a simple or common case folding mapping for _ch_, return the result of applying that mapping to _ch_.
    2.  Return _ch_.
2.  If _rer_._\[\[IgnoreCase\]\]_ is false, return _ch_.
3.  [Assert](#assert): _ch_ is a UTF-16 code unit.
4.  Let _cp_ be the code point whose numeric value is the numeric value of _ch_.
5.  Let _u_ be toUppercase(« _cp_ »), according to the Unicode Default Case Conversion algorithm.
6.  Let _uStr_ be [CodePointsToString](#sec-codepointstostring)(_u_).
7.  If the length of _uStr_ ≠ 1, return _ch_.
8.  Let _cu_ be _uStr_'s single code unit element.
9.  If the numeric value of _ch_ ≥ 128 and the numeric value of _cu_ < 128, return _ch_.
10.  Return _cu_.

Note

In case-insignificant matches when [HasEitherUnicodeFlag](#sec-runtime-semantics-haseitherunicodeflag-abstract-operation)(_rer_) is true, all characters are implicitly case-folded using the simple mapping provided by the Unicode Standard immediately before they are compared. The simple mapping always maps to a single code point, so it does not map, for example, `ß` (U+00DF LATIN SMALL LETTER SHARP S) to `ss` or `SS`. It may however map code points outside the Basic Latin block to code points within it—for example, `ſ` (U+017F LATIN SMALL LETTER LONG S) case-folds to `s` (U+0073 LATIN SMALL LETTER S) and `K` (U+212A KELVIN SIGN) case-folds to `k` (U+006B LATIN SMALL LETTER K). Strings containing those code points are matched by regular expressions such as `/[a-z]/ui`.

In case-insignificant matches when [HasEitherUnicodeFlag](#sec-runtime-semantics-haseitherunicodeflag-abstract-operation)(_rer_) is false, the mapping is based on Unicode Default Case Conversion algorithm toUppercase rather than toCasefold, which results in some subtle differences. For example, `Ω` (U+2126 OHM SIGN) is mapped by toUppercase to itself but by toCasefold to `ω` (U+03C9 GREEK SMALL LETTER OMEGA) along with `Ω` (U+03A9 GREEK CAPITAL LETTER OMEGA), so "\\u2126" is matched by `/[ω]/ui` and `/[\u03A9]/ui` but not by `/[ω]/i` or `/[\u03A9]/i`. Also, no code point outside the Basic Latin block is mapped to a code point within it, so strings such as "\\u017F ſ" and "\\u212A K" are not matched by `/[a-z]/i`.


# 22.2.2.7.4 UpdateModifiers ( _rer_, _add_, _remove_ )

The abstract operation UpdateModifiers takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)), _add_ (a String), and _remove_ (a String) and returns a [RegExp Record](#sec-regexp-records). It performs the following steps when called:

1.  [Assert](#assert): _add_ and _remove_ have no elements in common.
2.  Let _ignoreCase_ be _rer_._\[\[IgnoreCase\]\]_.
3.  Let _multiline_ be _rer_._\[\[Multiline\]\]_.
4.  Let _dotAll_ be _rer_._\[\[DotAll\]\]_.
5.  Let _unicode_ be _rer_._\[\[Unicode\]\]_.
6.  Let _unicodeSets_ be _rer_._\[\[UnicodeSets\]\]_.
7.  Let _capturingGroupsCount_ be _rer_._\[\[CapturingGroupsCount\]\]_.
8.  If _remove_ contains "i", set _ignoreCase_ to false.
9.  Else if _add_ contains "i", set _ignoreCase_ to true.
10.  If _remove_ contains "m", set _multiline_ to false.
11.  Else if _add_ contains "m", set _multiline_ to true.
12.  If _remove_ contains "s", set _dotAll_ to false.
13.  Else if _add_ contains "s", set _dotAll_ to true.
14.  Return the [RegExp Record](#sec-regexp-records) { _\[\[IgnoreCase\]\]_: _ignoreCase_, _\[\[Multiline\]\]_: _multiline_, _\[\[DotAll\]\]_: _dotAll_, _\[\[Unicode\]\]_: _unicode_, _\[\[UnicodeSets\]\]_: _unicodeSets_, _\[\[CapturingGroupsCount\]\]_: _capturingGroupsCount_ }.


# 22.2.2.8 Runtime Semantics: CompileCharacterClass

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileCharacterClass takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[CharSet\]\]_ (a [CharSet](#pattern-charset)) and _\[\[Invert\]\]_ (a Boolean). It is defined piecewise over the following productions:

[CharacterClass](#prod-CharacterClass) :: \[[ClassContents](#prod-ClassContents) \]

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.
2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[CharSet\]\]_: _A_, _\[\[Invert\]\]_: false }.

[CharacterClass](#prod-CharacterClass) :: \[^ [ClassContents](#prod-ClassContents) \]

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.
2.  If _rer_._\[\[UnicodeSets\]\]_ is true, then
    1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[CharSet\]\]_: [CharacterComplement](#sec-charactercomplement)(_rer_, _A_), _\[\[Invert\]\]_: false }.
3.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[CharSet\]\]_: _A_, _\[\[Invert\]\]_: true }.


# 22.2.2.9 Runtime Semantics: CompileToCharSet

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileToCharSet takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns a [CharSet](#pattern-charset).

Note 1

This section is amended in [B.1.2.8](#sec-compiletocharset-annexb).

It is defined piecewise over the following productions:

[ClassContents](#prod-ClassContents) :: \[empty\]

1.  Return the empty [CharSet](#pattern-charset).

[NonemptyClassRanges](#prod-NonemptyClassRanges) :: [ClassAtom](#prod-ClassAtom) [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassAtom](#prod-ClassAtom) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash) with argument _rer_.
3.  Return the union of [CharSets](#pattern-charset) _A_ and _B_.

[NonemptyClassRanges](#prod-NonemptyClassRanges) :: [ClassAtom](#prod-ClassAtom) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of the first [ClassAtom](#prod-ClassAtom) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of the second [ClassAtom](#prod-ClassAtom) with argument _rer_.
3.  Let _C_ be [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.
4.  Let _D_ be [CharacterRange](#sec-runtime-semantics-characterrange-abstract-operation)(_A_, _B_).
5.  Return the union of _D_ and _C_.

[NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash) :: [ClassAtomNoDash](#prod-ClassAtomNoDash) [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassAtomNoDash](#prod-ClassAtomNoDash) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash) with argument _rer_.
3.  Return the union of [CharSets](#pattern-charset) _A_ and _B_.

[NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash) :: [ClassAtomNoDash](#prod-ClassAtomNoDash) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassAtomNoDash](#prod-ClassAtomNoDash) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of [ClassAtom](#prod-ClassAtom) with argument _rer_.
3.  Let _C_ be [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.
4.  Let _D_ be [CharacterRange](#sec-runtime-semantics-characterrange-abstract-operation)(_A_, _B_).
5.  Return the union of _D_ and _C_.

Note 2

[ClassContents](#prod-ClassContents) can expand into a single [ClassAtom](#prod-ClassAtom) and/or ranges of two [ClassAtom](#prod-ClassAtom) separated by dashes. In the latter case the [ClassContents](#prod-ClassContents) includes all characters between the first [ClassAtom](#prod-ClassAtom) and the second [ClassAtom](#prod-ClassAtom), inclusive; an error occurs if either [ClassAtom](#prod-ClassAtom) does not represent a single character (for example, if one is \\w) or if the first [ClassAtom](#prod-ClassAtom)'s character value is strictly greater than the second [ClassAtom](#prod-ClassAtom)'s character value.

Note 3

Even if the pattern ignores case, the case of the two ends of a range is significant in determining which characters belong to the range. Thus, for example, the pattern `/[E-F]/i` matches only the letters `E`, `F`, `e`, and `f`, while the pattern `/[E-f]/i` matches all uppercase and lowercase letters in the Unicode Basic Latin block as well as the symbols `[`, `\`, `]`, `^`, `_`, and `` ` ``.

Note 4

A `-` character can be treated literally or it can denote a range. It is treated literally if it is the first or last character of [ClassContents](#prod-ClassContents), the beginning or end limit of a range specification, or immediately follows a range specification.

[ClassAtom](#prod-ClassAtom) :: \-

1.  Return the [CharSet](#pattern-charset) containing the single character `-` U+002D (HYPHEN-MINUS).

[ClassAtomNoDash](#prod-ClassAtomNoDash) :: [SourceCharacter](#prod-SourceCharacter) but not one of \\ or \] or \-

1.  Return the [CharSet](#pattern-charset) containing the character matched by [SourceCharacter](#prod-SourceCharacter).

[ClassEscape](#prod-ClassEscape) :: b \- [CharacterEscape](#prod-CharacterEscape)

1.  Let _cv_ be the [CharacterValue](#sec-patterns-static-semantics-character-value) of this [ClassEscape](#prod-ClassEscape).
2.  Let _c_ be the character whose character value is _cv_.
3.  Return the [CharSet](#pattern-charset) containing the single character _c_.

Note 5

A [ClassAtom](#prod-ClassAtom) can use any of the escape sequences that are allowed in the rest of the regular expression except for `\b`, `\B`, and backreferences. Inside a [CharacterClass](#prod-CharacterClass), `\b` means the backspace character, while `\B` and backreferences raise errors. Using a backreference inside a [ClassAtom](#prod-ClassAtom) causes an error.

[CharacterClassEscape](#prod-CharacterClassEscape) :: d

1.  Return the ten-element [CharSet](#pattern-charset) containing the characters `0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, and `9`.

[CharacterClassEscape](#prod-CharacterClassEscape) :: D

1.  Let _S_ be the [CharSet](#pattern-charset) returned by [CharacterClassEscape](#prod-CharacterClassEscape) :: d .
2.  Return [CharacterComplement](#sec-charactercomplement)(_rer_, _S_).

[CharacterClassEscape](#prod-CharacterClassEscape) :: s

1.  Return the [CharSet](#pattern-charset) containing all characters corresponding to a code point on the right-hand side of the [WhiteSpace](#prod-WhiteSpace) or [LineTerminator](#prod-LineTerminator) productions.

[CharacterClassEscape](#prod-CharacterClassEscape) :: S

1.  Let _S_ be the [CharSet](#pattern-charset) returned by [CharacterClassEscape](#prod-CharacterClassEscape) :: s .
2.  Return [CharacterComplement](#sec-charactercomplement)(_rer_, _S_).

[CharacterClassEscape](#prod-CharacterClassEscape) :: w

1.  Return [MaybeSimpleCaseFolding](#sec-maybesimplecasefolding)(_rer_, [WordCharacters](#sec-wordcharacters)(_rer_)).

[CharacterClassEscape](#prod-CharacterClassEscape) :: W

1.  Let _S_ be the [CharSet](#pattern-charset) returned by [CharacterClassEscape](#prod-CharacterClassEscape) :: w .
2.  Return [CharacterComplement](#sec-charactercomplement)(_rer_, _S_).

[CharacterClassEscape](#prod-CharacterClassEscape) :: p{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) }

1.  Return [CompileToCharSet](#sec-compiletocharset) of [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) with argument _rer_.

[CharacterClassEscape](#prod-CharacterClassEscape) :: P{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) }

1.  Let _S_ be [CompileToCharSet](#sec-compiletocharset) of [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) with argument _rer_.
2.  [Assert](#assert): _S_ contains only single code points.
3.  Return [CharacterComplement](#sec-charactercomplement)(_rer_, _S_).

[UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [UnicodePropertyName](#prod-UnicodePropertyName) \= [UnicodePropertyValue](#prod-UnicodePropertyValue)

1.  Let _ps_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [UnicodePropertyName](#prod-UnicodePropertyName).
2.  Let _p_ be [UnicodeMatchProperty](#sec-runtime-semantics-unicodematchproperty-p)(_rer_, _ps_).
3.  [Assert](#assert): _p_ is a Unicode property name or property alias listed in the “Property name and aliases” column of [Table 67](#table-nonbinary-unicode-properties).
4.  Let _vs_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [UnicodePropertyValue](#prod-UnicodePropertyValue).
5.  Let _v_ be [UnicodeMatchPropertyValue](#sec-runtime-semantics-unicodematchpropertyvalue-p-v)(_p_, _vs_).
6.  Let _A_ be the [CharSet](#pattern-charset) containing all Unicode code points whose character database definition includes the property _p_ with value _v_.
7.  Return [MaybeSimpleCaseFolding](#sec-maybesimplecasefolding)(_rer_, _A_).

[UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue)

1.  Let _s_ be the [source text matched by](#sec-algorithm-conventions-syntax-directed-operations) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue).
2.  If [UnicodeMatchPropertyValue](#sec-runtime-semantics-unicodematchpropertyvalue-p-v)(`General_Category`, _s_) is a Unicode property value or property value alias for the General\_Category (gc) property listed in [`PropertyValueAliases.txt`](https://unicode.org/Public/UCD/latest/ucd/PropertyValueAliases.txt), then
    1.  Return the [CharSet](#pattern-charset) containing all Unicode code points whose character database definition includes the property “General\_Category” with value _s_.
3.  Let _p_ be [UnicodeMatchProperty](#sec-runtime-semantics-unicodematchproperty-p)(_rer_, _s_).
4.  [Assert](#assert): _p_ is a binary Unicode property or binary property alias listed in the “Property name and aliases” column of [Table 68](#table-binary-unicode-properties), or a binary Unicode property of strings listed in the “Property name” column of [Table 69](#table-binary-unicode-properties-of-strings).
5.  Let _A_ be the [CharSet](#pattern-charset) containing all CharSetElements whose character database definition includes the property _p_ with value “True”.
6.  Return [MaybeSimpleCaseFolding](#sec-maybesimplecasefolding)(_rer_, _A_).

[ClassUnion](#prod-ClassUnion) :: [ClassSetRange](#prod-ClassSetRange) [ClassUnion](#prod-ClassUnion)opt

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassSetRange](#prod-ClassSetRange) with argument _rer_.
2.  If [ClassUnion](#prod-ClassUnion) is present, then
    1.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of [ClassUnion](#prod-ClassUnion) with argument _rer_.
    2.  Return the union of [CharSets](#pattern-charset) _A_ and _B_.
3.  Return _A_.

[ClassUnion](#prod-ClassUnion) :: [ClassSetOperand](#prod-ClassSetOperand) [ClassUnion](#prod-ClassUnion)opt

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassSetOperand](#prod-ClassSetOperand) with argument _rer_.
2.  If [ClassUnion](#prod-ClassUnion) is present, then
    1.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of [ClassUnion](#prod-ClassUnion) with argument _rer_.
    2.  Return the union of [CharSets](#pattern-charset) _A_ and _B_.
3.  Return _A_.

[ClassIntersection](#prod-ClassIntersection) :: [ClassSetOperand](#prod-ClassSetOperand) && [ClassSetOperand](#prod-ClassSetOperand)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of the first [ClassSetOperand](#prod-ClassSetOperand) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of the second [ClassSetOperand](#prod-ClassSetOperand) with argument _rer_.
3.  Return the intersection of [CharSets](#pattern-charset) _A_ and _B_.

[ClassIntersection](#prod-ClassIntersection) :: [ClassIntersection](#prod-ClassIntersection) && [ClassSetOperand](#prod-ClassSetOperand)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of the [ClassIntersection](#prod-ClassIntersection) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of the [ClassSetOperand](#prod-ClassSetOperand) with argument _rer_.
3.  Return the intersection of [CharSets](#pattern-charset) _A_ and _B_.

[ClassSubtraction](#prod-ClassSubtraction) :: [ClassSetOperand](#prod-ClassSetOperand) \-- [ClassSetOperand](#prod-ClassSetOperand)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of the first [ClassSetOperand](#prod-ClassSetOperand) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of the second [ClassSetOperand](#prod-ClassSetOperand) with argument _rer_.
3.  Return the [CharSet](#pattern-charset) containing the CharSetElements of _A_ which are not also CharSetElements of _B_.

[ClassSubtraction](#prod-ClassSubtraction) :: [ClassSubtraction](#prod-ClassSubtraction) \-- [ClassSetOperand](#prod-ClassSetOperand)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of the [ClassSubtraction](#prod-ClassSubtraction) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of the [ClassSetOperand](#prod-ClassSetOperand) with argument _rer_.
3.  Return the [CharSet](#pattern-charset) containing the CharSetElements of _A_ which are not also CharSetElements of _B_.

[ClassSetRange](#prod-ClassSetRange) :: [ClassSetCharacter](#prod-ClassSetCharacter) \- [ClassSetCharacter](#prod-ClassSetCharacter)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of the first [ClassSetCharacter](#prod-ClassSetCharacter) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of the second [ClassSetCharacter](#prod-ClassSetCharacter) with argument _rer_.
3.  Return [MaybeSimpleCaseFolding](#sec-maybesimplecasefolding)(_rer_, [CharacterRange](#sec-runtime-semantics-characterrange-abstract-operation)(_A_, _B_)).

Note 6

The result will often consist of two or more ranges. When UnicodeSets is true and IgnoreCase is true, then [MaybeSimpleCaseFolding](#sec-maybesimplecasefolding)(_rer_, \[Ā-č\]) will include only the odd-numbered code points of that range.

[ClassSetOperand](#prod-ClassSetOperand) :: [ClassSetCharacter](#prod-ClassSetCharacter)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassSetCharacter](#prod-ClassSetCharacter) with argument _rer_.
2.  Return [MaybeSimpleCaseFolding](#sec-maybesimplecasefolding)(_rer_, _A_).

[ClassSetOperand](#prod-ClassSetOperand) :: [ClassStringDisjunction](#prod-ClassStringDisjunction)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassStringDisjunction](#prod-ClassStringDisjunction) with argument _rer_.
2.  Return [MaybeSimpleCaseFolding](#sec-maybesimplecasefolding)(_rer_, _A_).

[ClassSetOperand](#prod-ClassSetOperand) :: [NestedClass](#prod-NestedClass)

1.  Return [CompileToCharSet](#sec-compiletocharset) of [NestedClass](#prod-NestedClass) with argument _rer_.

[NestedClass](#prod-NestedClass) :: \[[ClassContents](#prod-ClassContents) \]

1.  Return [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.

[NestedClass](#prod-NestedClass) :: \[^ [ClassContents](#prod-ClassContents) \]

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.
2.  Return [CharacterComplement](#sec-charactercomplement)(_rer_, _A_).

[NestedClass](#prod-NestedClass) :: \\ [CharacterClassEscape](#prod-CharacterClassEscape)

1.  Return [CompileToCharSet](#sec-compiletocharset) of [CharacterClassEscape](#prod-CharacterClassEscape) with argument _rer_.

[ClassStringDisjunction](#prod-ClassStringDisjunction) :: \\q{ [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) }

1.  Return [CompileToCharSet](#sec-compiletocharset) of [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) with argument _rer_.

[ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) :: [ClassString](#prod-ClassString)

1.  Let _s_ be [CompileClassSetString](#sec-compileclasssetstring) of [ClassString](#prod-ClassString) with argument _rer_.
2.  Return the [CharSet](#pattern-charset) containing the one string _s_.

[ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) :: [ClassString](#prod-ClassString) | [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents)

1.  Let _s_ be [CompileClassSetString](#sec-compileclasssetstring) of [ClassString](#prod-ClassString) with argument _rer_.
2.  Let _A_ be the [CharSet](#pattern-charset) containing the one string _s_.
3.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) with argument _rer_.
4.  Return the union of [CharSets](#pattern-charset) _A_ and _B_.

[ClassSetCharacter](#prod-ClassSetCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not [ClassSetSyntaxCharacter](#prod-ClassSetSyntaxCharacter) \\ [CharacterEscape](#prod-CharacterEscape) \\ [ClassSetReservedPunctuator](#prod-ClassSetReservedPunctuator)

1.  Let _cv_ be the [CharacterValue](#sec-patterns-static-semantics-character-value) of this [ClassSetCharacter](#prod-ClassSetCharacter).
2.  Let _c_ be the character whose character value is _cv_.
3.  Return the [CharSet](#pattern-charset) containing the single character _c_.

[ClassSetCharacter](#prod-ClassSetCharacter) :: \\b

1.  Return the [CharSet](#pattern-charset) containing the single character U+0008 (BACKSPACE).


# 22.2.2.9.1 CharacterRange ( _A_, _B_ )

The abstract operation CharacterRange takes arguments _A_ (a [CharSet](#pattern-charset)) and _B_ (a [CharSet](#pattern-charset)) and returns a [CharSet](#pattern-charset). It performs the following steps when called:

1.  [Assert](#assert): _A_ and _B_ each contain exactly one character.
2.  Let _a_ be the one character in [CharSet](#pattern-charset) _A_.
3.  Let _b_ be the one character in [CharSet](#pattern-charset) _B_.
4.  Let _i_ be the character value of character _a_.
5.  Let _j_ be the character value of character _b_.
6.  [Assert](#assert): _i_ ≤ _j_.
7.  Return the [CharSet](#pattern-charset) containing all characters with a character value in the [inclusive interval](#inclusive-interval) from _i_ to _j_.


# 22.2.2.9.2 HasEitherUnicodeFlag ( _rer_ )

The abstract operation HasEitherUnicodeFlag takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns a Boolean. It performs the following steps when called:

1.  If _rer_._\[\[Unicode\]\]_ is true or _rer_._\[\[UnicodeSets\]\]_ is true, then
    1.  Return true.
2.  Return false.


# 22.2.2.9.3 WordCharacters ( _rer_ )

The abstract operation WordCharacters takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns a [CharSet](#pattern-charset). Returns a [CharSet](#pattern-charset) containing the characters considered "word characters" for the purposes of `\b`, `\B`, `\w`, and `\W` It performs the following steps when called:

1.  Let _basicWordChars_ be the [CharSet](#pattern-charset) containing every character in [the ASCII word characters](#ASCII-word-characters).
2.  Let _extraWordChars_ be the [CharSet](#pattern-charset) containing all characters _c_ such that _c_ is not in _basicWordChars_ but [Canonicalize](#sec-runtime-semantics-canonicalize-ch)(_rer_, _c_) is in _basicWordChars_.
3.  [Assert](#assert): _extraWordChars_ is empty unless [HasEitherUnicodeFlag](#sec-runtime-semantics-haseitherunicodeflag-abstract-operation)(_rer_) is true and _rer_._\[\[IgnoreCase\]\]_ is true.
4.  Return the union of _basicWordChars_ and _extraWordChars_.


# 22.2.2.9.4 AllCharacters ( _rer_ )

The abstract operation AllCharacters takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns a [CharSet](#pattern-charset). Returns the set of “all characters” according to the regular expression flags. It performs the following steps when called:

1.  If _rer_._\[\[UnicodeSets\]\]_ is true and _rer_._\[\[IgnoreCase\]\]_ is true, then
    1.  Return the [CharSet](#pattern-charset) containing all Unicode code points _c_ that do not have a [Simple Case Folding](https://www.unicode.org/reports/tr44/#Simple_Case_Folding) mapping (that is, [scf](#eqn-scf)(_c_)=_c_).
2.  Else if [HasEitherUnicodeFlag](#sec-runtime-semantics-haseitherunicodeflag-abstract-operation)(_rer_) is true, then
    1.  Return the [CharSet](#pattern-charset) containing all code point values.
3.  Else,
    1.  Return the [CharSet](#pattern-charset) containing all code unit values.


# 22.2.2.9.5 MaybeSimpleCaseFolding ( _rer_, _A_ )

The abstract operation MaybeSimpleCaseFolding takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)) and _A_ (a [CharSet](#pattern-charset)) and returns a [CharSet](#pattern-charset). If _rer_._\[\[UnicodeSets\]\]_ is false or _rer_._\[\[IgnoreCase\]\]_ is false, it returns _A_. Otherwise, it uses the [Simple Case Folding](https://www.unicode.org/reports/tr44/#Simple_Case_Folding) (scf(_cp_)) definitions in the file [`CaseFolding.txt`](https://unicode.org/Public/UCD/latest/ucd/CaseFolding.txt) of the Unicode Character Database (each of which maps a single code point to another single code point) to map each [CharSetElement](#sec-pattern-notation) of _A_ character-by-character into a canonical form and returns the resulting [CharSet](#pattern-charset). It performs the following steps when called:

1.  If _rer_._\[\[UnicodeSets\]\]_ is false or _rer_._\[\[IgnoreCase\]\]_ is false, return _A_.
2.  Let _B_ be a new empty [CharSet](#pattern-charset).
3.  For each [CharSetElement](#sec-pattern-notation) _s_ of _A_, do
    1.  Let _t_ be an empty sequence of characters.
    2.  For each single code point _cp_ in _s_, do
        1.  Append [scf](#eqn-scf)(_cp_) to _t_.
    3.  Add _t_ to _B_.
4.  Return _B_.


# 22.2.2.9.6 CharacterComplement ( _rer_, _S_ )

The abstract operation CharacterComplement takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)) and _S_ (a [CharSet](#pattern-charset)) and returns a [CharSet](#pattern-charset). It performs the following steps when called:

1.  Let _A_ be [AllCharacters](#sec-allcharacters)(_rer_).
2.  Return the [CharSet](#pattern-charset) containing the CharSetElements of _A_ which are not also CharSetElements of _S_.


# 22.2.2.9.7 UnicodeMatchProperty ( _rer_, _p_ )

The abstract operation UnicodeMatchProperty takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)) and _p_ ([ECMAScript source text](#sec-source-text)) and returns a Unicode property name. It performs the following steps when called:

1.  If _rer_._\[\[UnicodeSets\]\]_ is true and _p_ is a Unicode property name listed in the “Property name” column of [Table 69](#table-binary-unicode-properties-of-strings), then
    1.  Return the [List](#sec-list-and-record-specification-type) of Unicode code points _p_.
2.  [Assert](#assert): _p_ is a Unicode property name or property alias listed in the “Property name and aliases” column of [Table 67](#table-nonbinary-unicode-properties) or [Table 68](#table-binary-unicode-properties).
3.  Let _c_ be the canonical property name of _p_ as given in the “Canonical property name” column of the corresponding row.
4.  Return the [List](#sec-list-and-record-specification-type) of Unicode code points _c_.

Implementations must support the Unicode property names and aliases listed in [Table 67](#table-nonbinary-unicode-properties), [Table 68](#table-binary-unicode-properties), and [Table 69](#table-binary-unicode-properties-of-strings). To ensure interoperability, implementations must not support any other property names or aliases.

Note 1

For example, `Script_Extensions` (property name) and `scx` (property alias) are valid, but `script_extensions` or `Scx` aren't.

Note 2

The listed properties form a superset of what [UTS18 RL1.2](https://unicode.org/reports/tr18/#RL1.2) requires.

Note 3

The spellings of entries in these tables (including casing) match the spellings used in the file [`PropertyAliases.txt`](https://unicode.org/Public/UCD/latest/ucd/PropertyAliases.txt) in the Unicode Character Database. The precise spellings in that file are [guaranteed to be stable](https://www.unicode.org/policies/stability_policy.html#Alias_Stability).

Table 67: Non-binary Unicode property aliases and their canonical property names

<table class="real-table unicode-property-table"><thead><tr><th><emu-not-ref>Property name and aliases</emu-not-ref></th><th><emu-not-ref>Canonical property name</emu-not-ref></th></tr></thead><tbody><tr><td><code>General_Category</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr18/#General_Category_Property"><code>General_Category</code></a></td></tr><tr><td><code>gc</code></td></tr><tr><td><code>Script</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr24/#Script"><code>Script</code></a></td></tr><tr><td><code>sc</code></td></tr><tr><td><code>Script_Extensions</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr24/#Script_Extensions"><code>Script_Extensions</code></a></td></tr><tr><td><code>scx</code></td></tr></tbody></table>

Table 68: Binary Unicode property aliases and their canonical property names

<table class="real-table unicode-property-table"><thead><tr><th><emu-not-ref>Property name and aliases</emu-not-ref></th><th><emu-not-ref>Canonical property name</emu-not-ref></th></tr></thead><tbody><tr><td><code>ASCII</code></td><td><a href="https://unicode.org/reports/tr18/#General_Category_Property"><code>ASCII</code></a></td></tr><tr><td><code>ASCII_Hex_Digit</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#ASCII_Hex_Digit"><code>ASCII_Hex_Digit</code></a></td></tr><tr><td><code>AHex</code></td></tr><tr><td><code>Alphabetic</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Alphabetic"><code>Alphabetic</code></a></td></tr><tr><td><code>Alpha</code></td></tr><tr><td><code>Any</code></td><td><a href="https://unicode.org/reports/tr18/#General_Category_Property"><code>Any</code></a></td></tr><tr><td><code>Assigned</code></td><td><a href="https://unicode.org/reports/tr18/#General_Category_Property"><code>Assigned</code></a></td></tr><tr><td><code>Bidi_Control</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Bidi_Control"><code>Bidi_Control</code></a></td></tr><tr><td><code>Bidi_C</code></td></tr><tr><td><code>Bidi_Mirrored</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Bidi_Mirrored"><code>Bidi_Mirrored</code></a></td></tr><tr><td><code>Bidi_M</code></td></tr><tr><td><code>Case_Ignorable</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Case_Ignorable"><code>Case_Ignorable</code></a></td></tr><tr><td><code>CI</code></td></tr><tr><td><code>Cased</code></td><td><a href="https://unicode.org/reports/tr44/#Cased"><code>Cased</code></a></td></tr><tr><td><code>Changes_When_Casefolded</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#CWCF"><code>Changes_When_Casefolded</code></a></td></tr><tr><td><code>CWCF</code></td></tr><tr><td><code>Changes_When_Casemapped</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#CWCM"><code>Changes_When_Casemapped</code></a></td></tr><tr><td><code>CWCM</code></td></tr><tr><td><code>Changes_When_Lowercased</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#CWL"><code>Changes_When_Lowercased</code></a></td></tr><tr><td><code>CWL</code></td></tr><tr><td><code>Changes_When_NFKC_Casefolded</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#CWKCF"><code>Changes_When_NFKC_Casefolded</code></a></td></tr><tr><td><code>CWKCF</code></td></tr><tr><td><code>Changes_When_Titlecased</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#CWT"><code>Changes_When_Titlecased</code></a></td></tr><tr><td><code>CWT</code></td></tr><tr><td><code>Changes_When_Uppercased</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#CWU"><code>Changes_When_Uppercased</code></a></td></tr><tr><td><code>CWU</code></td></tr><tr><td><code>Dash</code></td><td><a href="https://unicode.org/reports/tr44/#Dash"><code>Dash</code></a></td></tr><tr><td><code>Default_Ignorable_Code_Point</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Default_Ignorable_Code_Point"><code>Default_Ignorable_Code_Point</code></a></td></tr><tr><td><code>DI</code></td></tr><tr><td><code>Deprecated</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Deprecated"><code>Deprecated</code></a></td></tr><tr><td><code>Dep</code></td></tr><tr><td><code>Diacritic</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Diacritic"><code>Diacritic</code></a></td></tr><tr><td><code>Dia</code></td></tr><tr><td><code>Emoji</code></td><td><a href="https://unicode.org/reports/tr51/#Emoji_Properties"><code>Emoji</code></a></td></tr><tr><td><code>Emoji_Component</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr51/#Emoji_Properties"><code>Emoji_Component</code></a></td></tr><tr><td><code>EComp</code></td></tr><tr><td><code>Emoji_Modifier</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr51/#Emoji_Properties"><code>Emoji_Modifier</code></a></td></tr><tr><td><code>EMod</code></td></tr><tr><td><code>Emoji_Modifier_Base</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr51/#Emoji_Properties"><code>Emoji_Modifier_Base</code></a></td></tr><tr><td><code>EBase</code></td></tr><tr><td><code>Emoji_Presentation</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr51/#Emoji_Properties"><code>Emoji_Presentation</code></a></td></tr><tr><td><code>EPres</code></td></tr><tr><td><code>Extended_Pictographic</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr51/#Emoji_Properties"><code>Extended_Pictographic</code></a></td></tr><tr><td><code>ExtPict</code></td></tr><tr><td><code>Extender</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Extender"><code>Extender</code></a></td></tr><tr><td><code>Ext</code></td></tr><tr><td><code>Grapheme_Base</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Grapheme_Base"><code>Grapheme_Base</code></a></td></tr><tr><td><code>Gr_Base</code></td></tr><tr><td><code>Grapheme_Extend</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Grapheme_Extend"><code>Grapheme_Extend</code></a></td></tr><tr><td><code>Gr_Ext</code></td></tr><tr><td><code>Hex_Digit</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Hex_Digit"><code>Hex_Digit</code></a></td></tr><tr><td><code>Hex</code></td></tr><tr><td><code>IDS_Binary_Operator</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#IDS_Binary_Operator"><code>IDS_Binary_Operator</code></a></td></tr><tr><td><code>IDSB</code></td></tr><tr><td><code>IDS_Trinary_Operator</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#IDS_Trinary_Operator"><code>IDS_Trinary_Operator</code></a></td></tr><tr><td><code>IDST</code></td></tr><tr><td><code>ID_Continue</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#ID_Continue"><code>ID_Continue</code></a></td></tr><tr><td><code>IDC</code></td></tr><tr><td><code>ID_Start</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#ID_Start"><code>ID_Start</code></a></td></tr><tr><td><code>IDS</code></td></tr><tr><td><code>Ideographic</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Ideographic"><code>Ideographic</code></a></td></tr><tr><td><code>Ideo</code></td></tr><tr><td><code>Join_Control</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Join_Control"><code>Join_Control</code></a></td></tr><tr><td><code>Join_C</code></td></tr><tr><td><code>Logical_Order_Exception</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Logical_Order_Exception"><code>Logical_Order_Exception</code></a></td></tr><tr><td><code>LOE</code></td></tr><tr><td><code>Lowercase</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Lowercase"><code>Lowercase</code></a></td></tr><tr><td><code>Lower</code></td></tr><tr><td><code>Math</code></td><td><a href="https://unicode.org/reports/tr44/#Math"><code>Math</code></a></td></tr><tr><td><code>Noncharacter_Code_Point</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Noncharacter_Code_Point"><code>Noncharacter_Code_Point</code></a></td></tr><tr><td><code>NChar</code></td></tr><tr><td><code>Pattern_Syntax</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Pattern_Syntax"><code>Pattern_Syntax</code></a></td></tr><tr><td><code>Pat_Syn</code></td></tr><tr><td><code>Pattern_White_Space</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Pattern_White_Space"><code>Pattern_White_Space</code></a></td></tr><tr><td><code>Pat_WS</code></td></tr><tr><td><code>Quotation_Mark</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Quotation_Mark"><code>Quotation_Mark</code></a></td></tr><tr><td><code>QMark</code></td></tr><tr><td><code>Radical</code></td><td><a href="https://unicode.org/reports/tr44/#Radical"><code>Radical</code></a></td></tr><tr><td><code>Regional_Indicator</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Regional_Indicator"><code>Regional_Indicator</code></a></td></tr><tr><td><code>RI</code></td></tr><tr><td><code>Sentence_Terminal</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#STerm"><code>Sentence_Terminal</code></a></td></tr><tr><td><code>STerm</code></td></tr><tr><td><code>Soft_Dotted</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Soft_Dotted"><code>Soft_Dotted</code></a></td></tr><tr><td><code>SD</code></td></tr><tr><td><code>Terminal_Punctuation</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Terminal_Punctuation"><code>Terminal_Punctuation</code></a></td></tr><tr><td><code>Term</code></td></tr><tr><td><code>Unified_Ideograph</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Unified_Ideograph"><code>Unified_Ideograph</code></a></td></tr><tr><td><code>UIdeo</code></td></tr><tr><td><code>Uppercase</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Uppercase"><code>Uppercase</code></a></td></tr><tr><td><code>Upper</code></td></tr><tr><td><code>Variation_Selector</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#Variation_Selector"><code>Variation_Selector</code></a></td></tr><tr><td><code>VS</code></td></tr><tr><td><code>White_Space</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#White_Space"><code>White_Space</code></a></td></tr><tr><td><code>space</code></td></tr><tr><td><code>XID_Continue</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#XID_Continue"><code>XID_Continue</code></a></td></tr><tr><td><code>XIDC</code></td></tr><tr><td><code>XID_Start</code></td><td rowspan="2"><a href="https://unicode.org/reports/tr44/#XID_Start"><code>XID_Start</code></a></td></tr><tr><td><code>XIDS</code></td></tr></tbody></table>

Table 69: Binary Unicode properties of strings

<table class="real-table unicode-property-table"><thead><tr><th><emu-not-ref>Property name</emu-not-ref></th></tr></thead><tbody><tr><td><code>Basic_Emoji</code></td></tr><tr><td><code>Emoji_Keycap_Sequence</code></td></tr><tr><td><code>RGI_Emoji_Modifier_Sequence</code></td></tr><tr><td><code>RGI_Emoji_Flag_Sequence</code></td></tr><tr><td><code>RGI_Emoji_Tag_Sequence</code></td></tr><tr><td><code>RGI_Emoji_ZWJ_Sequence</code></td></tr><tr><td><code>RGI_Emoji</code></td></tr></tbody></table>


# 22.2.2.9.8 UnicodeMatchPropertyValue ( _p_, _v_ )

The abstract operation UnicodeMatchPropertyValue takes arguments _p_ ([ECMAScript source text](#sec-source-text)) and _v_ ([ECMAScript source text](#sec-source-text)) and returns a Unicode property value. It performs the following steps when called:

1.  [Assert](#assert): _p_ is a canonical, unaliased Unicode property name listed in the “Canonical property name” column of [Table 67](#table-nonbinary-unicode-properties).
2.  [Assert](#assert): _v_ is a property value or property value alias for the Unicode property _p_ listed in [`PropertyValueAliases.txt`](https://unicode.org/Public/UCD/latest/ucd/PropertyValueAliases.txt).
3.  Let _value_ be the canonical property value of _v_ as given in the “Canonical property value” column of the corresponding row.
4.  Return the [List](#sec-list-and-record-specification-type) of Unicode code points _value_.

Implementations must support the Unicode property values and property value aliases listed in [`PropertyValueAliases.txt`](https://unicode.org/Public/UCD/latest/ucd/PropertyValueAliases.txt) for the properties listed in [Table 67](#table-nonbinary-unicode-properties). To ensure interoperability, implementations must not support any other property values or property value aliases.

Note 1

For example, `Xpeo` and `Old_Persian` are valid `Script_Extensions` values, but `xpeo` and `Old Persian` aren't.

Note 2

This algorithm differs from [the matching rules for symbolic values listed in UAX44](https://unicode.org/reports/tr44/#Matching_Symbolic): case, [white space](#sec-white-space), U+002D (HYPHEN-MINUS), and U+005F (LOW LINE) are not ignored, and the `Is` prefix is not supported.


# 22.2.2.10 Runtime Semantics: CompileClassSetString

The [syntax-directed operation](#sec-algorithm-conventions-syntax-directed-operations) CompileClassSetString takes argument _rer_ (a [RegExp Record](#sec-regexp-records)) and returns a sequence of characters. It is defined piecewise over the following productions:

[ClassString](#prod-ClassString) :: \[empty\]

1.  Return an empty sequence of characters.

[ClassString](#prod-ClassString) :: [NonEmptyClassString](#prod-NonEmptyClassString)

1.  Return [CompileClassSetString](#sec-compileclasssetstring) of [NonEmptyClassString](#prod-NonEmptyClassString) with argument _rer_.

[NonEmptyClassString](#prod-NonEmptyClassString) :: [ClassSetCharacter](#prod-ClassSetCharacter) [NonEmptyClassString](#prod-NonEmptyClassString)opt

1.  Let _cs_ be [CompileToCharSet](#sec-compiletocharset) of [ClassSetCharacter](#prod-ClassSetCharacter) with argument _rer_.
2.  Let _s1_ be the sequence of characters that is the single [CharSetElement](#sec-pattern-notation) of _cs_.
3.  If [NonEmptyClassString](#prod-NonEmptyClassString) is present, then
    1.  Let _s2_ be [CompileClassSetString](#sec-compileclasssetstring) of [NonEmptyClassString](#prod-NonEmptyClassString) with argument _rer_.
    2.  Return the concatenation of _s1_ and _s2_.
4.  Return _s1_.


# 22.2.3 Abstract Operations for RegExp Creation


# 22.2.3.1 RegExpCreate ( _P_, _F_ )

The abstract operation RegExpCreate takes arguments _P_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _F_ (a String or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _obj_ be ! [RegExpAlloc](#sec-regexpalloc)([%RegExp%](#sec-regexp-constructor)).
2.  Return ? [RegExpInitialize](#sec-regexpinitialize)(_obj_, _P_, _F_).


# 22.2.3.2 RegExpAlloc ( _newTarget_ )

The abstract operation RegExpAlloc takes argument _newTarget_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _obj_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_newTarget_, "%RegExp.prototype%", « _\[\[OriginalSource\]\]_, _\[\[OriginalFlags\]\]_, _\[\[RegExpRecord\]\]_, _\[\[RegExpMatcher\]\]_ »).
2.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_obj_, "lastIndex", PropertyDescriptor { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }).
3.  Return _obj_.


# 22.2.3.3 RegExpInitialize ( _obj_, _pattern_, _flags_ )

The abstract operation RegExpInitialize takes arguments _obj_ (an Object), _pattern_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _flags_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an Object or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _pattern_ is undefined, let _P_ be the empty String.
2.  Else, let _P_ be ? [ToString](#sec-tostring)(_pattern_).
3.  If _flags_ is undefined, let _F_ be the empty String.
4.  Else, let _F_ be ? [ToString](#sec-tostring)(_flags_).
5.  If _F_ contains any code unit other than "d", "g", "i", "m", "s", "u", "v", or "y", or if _F_ contains any code unit more than once, throw a SyntaxError exception.
6.  If _F_ contains "i", let _i_ be true; else let _i_ be false.
7.  If _F_ contains "m", let _m_ be true; else let _m_ be false.
8.  If _F_ contains "s", let _s_ be true; else let _s_ be false.
9.  If _F_ contains "u", let _u_ be true; else let _u_ be false.
10.  If _F_ contains "v", let _v_ be true; else let _v_ be false.
11.  If _u_ is true or _v_ is true, then
     1.  Let _patternText_ be [StringToCodePoints](#sec-stringtocodepoints)(_P_).
12.  Else,
     1.  Let _patternText_ be the result of interpreting each of _P_'s 16-bit elements as a Unicode BMP code point. UTF-16 decoding is not applied to the elements.
13.  Let _parseResult_ be [ParsePattern](#sec-parsepattern)(_patternText_, _u_, _v_).
14.  If _parseResult_ is a non-empty [List](#sec-list-and-record-specification-type) of SyntaxError objects, throw a SyntaxError exception.
15.  [Assert](#assert): _parseResult_ is a [Pattern](#prod-Pattern) [Parse Node](#sec-syntactic-grammar).
16.  Set _obj_._\[\[OriginalSource\]\]_ to _P_.
17.  Set _obj_._\[\[OriginalFlags\]\]_ to _F_.
18.  Let _capturingGroupsCount_ be [CountLeftCapturingParensWithin](#sec-countleftcapturingparenswithin)(_parseResult_).
19.  Let _rer_ be the [RegExp Record](#sec-regexp-records) { _\[\[IgnoreCase\]\]_: _i_, _\[\[Multiline\]\]_: _m_, _\[\[DotAll\]\]_: _s_, _\[\[Unicode\]\]_: _u_, _\[\[UnicodeSets\]\]_: _v_, _\[\[CapturingGroupsCount\]\]_: _capturingGroupsCount_ }.
20.  Set _obj_._\[\[RegExpRecord\]\]_ to _rer_.
21.  Set _obj_._\[\[RegExpMatcher\]\]_ to [CompilePattern](#sec-compilepattern) of _parseResult_ with argument _rer_.
22.  Perform ? [Set](#sec-set-o-p-v-throw)(_obj_, "lastIndex", +0<sub>𝔽</sub>, true).
23.  Return _obj_.


# 22.2.3.4 Static Semantics: ParsePattern ( _patternText_, _u_, _v_ )

The abstract operation ParsePattern takes arguments _patternText_ (a sequence of Unicode code points), _u_ (a Boolean), and _v_ (a Boolean) and returns a [Parse Node](#sec-syntactic-grammar) or a non-empty [List](#sec-list-and-record-specification-type) of SyntaxError objects.

Note

This section is amended in [B.1.2.9](#sec-parsepattern-annexb).

It performs the following steps when called:

1.  If _v_ is true and _u_ is true, then
    1.  Let _parseResult_ be a [List](#sec-list-and-record-specification-type) containing one or more SyntaxError objects.
2.  Else if _v_ is true, then
    1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_patternText_, [Pattern](#prod-Pattern)\[+UnicodeMode, +UnicodeSetsMode, +NamedCaptureGroups\]).
3.  Else if _u_ is true, then
    1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_patternText_, [Pattern](#prod-Pattern)\[+UnicodeMode, ~UnicodeSetsMode, +NamedCaptureGroups\]).
4.  Else,
    1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_patternText_, [Pattern](#prod-Pattern)\[~UnicodeMode, ~UnicodeSetsMode, +NamedCaptureGroups\]).
5.  Return _parseResult_.


# 22.2.4 The RegExp Constructor

The RegExp [constructor](#constructor):

-   is %RegExp%.
-   is the initial value of the "RegExp" property of the [global object](#sec-global-object).
-   creates and initializes a new RegExp object when called as a [constructor](#constructor).
-   when called as a function rather than as a [constructor](#constructor), returns either a new RegExp object, or the argument itself if the only argument is a RegExp object.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified RegExp behaviour must include a `super` call to the RegExp [constructor](#constructor) to create and initialize subclass instances with the necessary internal slots.


# 22.2.4.1 RegExp ( _pattern_, _flags_ )

This function performs the following steps when called:

1.  Let _patternIsRegExp_ be ? [IsRegExp](#sec-isregexp)(_pattern_).
2.  If NewTarget is undefined, then
    1.  Let _newTarget_ be the [active function object](#active-function-object).
    2.  If _patternIsRegExp_ is true and _flags_ is undefined, then
        1.  Let _patternConstructor_ be ? [Get](#sec-get-o-p)(_pattern_, "constructor").
        2.  If [SameValue](#sec-samevalue)(_newTarget_, _patternConstructor_) is true, return _pattern_.
3.  Else,
    1.  Let _newTarget_ be NewTarget.
4.  If _pattern_ [is an Object](#sec-object-type) and _pattern_ has a _\[\[RegExpMatcher\]\]_ internal slot, then
    1.  Let _P_ be _pattern_._\[\[OriginalSource\]\]_.
    2.  If _flags_ is undefined, let _F_ be _pattern_._\[\[OriginalFlags\]\]_.
    3.  Else, let _F_ be _flags_.
5.  Else if _patternIsRegExp_ is true, then
    1.  Let _P_ be ? [Get](#sec-get-o-p)(_pattern_, "source").
    2.  If _flags_ is undefined, then
        1.  Let _F_ be ? [Get](#sec-get-o-p)(_pattern_, "flags").
    3.  Else,
        1.  Let _F_ be _flags_.
6.  Else,
    1.  Let _P_ be _pattern_.
    2.  Let _F_ be _flags_.
7.  Let _O_ be ? [RegExpAlloc](#sec-regexpalloc)(_newTarget_).
8.  Return ? [RegExpInitialize](#sec-regexpinitialize)(_O_, _P_, _F_).

Note

If pattern is supplied using a [StringLiteral](#prod-StringLiteral), the usual escape sequence substitutions are performed before the String is processed by this function. If pattern must contain an escape sequence to be recognized by this function, any U+005C (REVERSE SOLIDUS) code points must be escaped within the [StringLiteral](#prod-StringLiteral) to prevent them being removed when the contents of the [StringLiteral](#prod-StringLiteral) are formed.


# 22.2.5 Properties of the RegExp Constructor

The RegExp [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 22.2.5.1 RegExp.escape ( _S_ )

This function returns a copy of _S_ in which characters that are potentially special in a regular expression [Pattern](#prod-Pattern) have been replaced by equivalent escape sequences.

It performs the following steps when called:

1.  If _S_ [is not a String](#sec-ecmascript-language-types-string-type), throw a TypeError exception.
2.  Let _escaped_ be the empty String.
3.  Let _cpList_ be [StringToCodePoints](#sec-stringtocodepoints)(_S_).
4.  For each code point _cp_ of _cpList_, do
    1.  If _escaped_ is the empty String and _cp_ is matched by either [DecimalDigit](#prod-DecimalDigit) or [AsciiLetter](#prod-AsciiLetter), then
        1.  NOTE: Escaping a leading digit ensures that output corresponds with pattern text which may be used after a `\0` character escape or a [DecimalEscape](#prod-DecimalEscape) such as `\1` and still match _S_ rather than be interpreted as an extension of the preceding escape sequence. Escaping a leading ASCII letter does the same for the context after `\c`.
        2.  Let _numericValue_ be the numeric value of _cp_.
        3.  Let _hex_ be [Number::toString](#sec-numeric-types-number-tostring)([𝔽](#𝔽)(_numericValue_), 16).
        4.  [Assert](#assert): The length of _hex_ is 2.
        5.  Set _escaped_ to the [string-concatenation](#string-concatenation) of the code unit 0x005C (REVERSE SOLIDUS), "x", and _hex_.
    2.  Else,
        1.  Set _escaped_ to the [string-concatenation](#string-concatenation) of _escaped_ and [EncodeForRegExpEscape](#sec-encodeforregexpescape)(_cp_).
5.  Return _escaped_.

Note

Despite having similar names, [EscapeRegExpPattern](#sec-escaperegexppattern) and `RegExp.escape` do not perform similar actions. The former escapes a pattern for representation as a string, while this function escapes a string for representation inside a pattern.


# 22.2.5.1.1 EncodeForRegExpEscape ( _cp_ )

The abstract operation EncodeForRegExpEscape takes argument _cp_ (a code point) and returns a String. It returns a String representing a [Pattern](#prod-Pattern) for matching _cp_. If _cp_ is white space or an ASCII punctuator, the returned value is an escape sequence. Otherwise, the returned value [is a String](#sec-ecmascript-language-types-string-type) representation of _cp_ itself. It performs the following steps when called:

1.  If _cp_ is matched by [SyntaxCharacter](#prod-SyntaxCharacter) or _cp_ is U+002F (SOLIDUS), then
    1.  Return the [string-concatenation](#string-concatenation) of 0x005C (REVERSE SOLIDUS) and [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)(_cp_).
2.  Else if _cp_ is a code point listed in the “Code Point” column of [Table 65](#table-controlescape-code-point-values), then
    1.  Return the [string-concatenation](#string-concatenation) of 0x005C (REVERSE SOLIDUS) and the string in the “ControlEscape” column of the row whose “Code Point” column contains _cp_.
3.  Let _otherPunctuators_ be the [string-concatenation](#string-concatenation) of ",-=<>#&!%:;@~'\`" and the code unit 0x0022 (QUOTATION MARK).
4.  Let _toEscape_ be [StringToCodePoints](#sec-stringtocodepoints)(_otherPunctuators_).
5.  If _toEscape_ contains _cp_, _cp_ is matched by either [WhiteSpace](#prod-WhiteSpace) or [LineTerminator](#prod-LineTerminator), or _cp_ has the same numeric value as a [leading surrogate](#leading-surrogate) or [trailing surrogate](#trailing-surrogate), then
    1.  Let _cpNum_ be the numeric value of _cp_.
    2.  If _cpNum_ ≤ 0xFF, then
        1.  Let _hex_ be [Number::toString](#sec-numeric-types-number-tostring)([𝔽](#𝔽)(_cpNum_), 16).
        2.  Return the [string-concatenation](#string-concatenation) of the code unit 0x005C (REVERSE SOLIDUS), "x", and [StringPad](#sec-stringpad)(_hex_, 2, "0", start).
    3.  Let _escaped_ be the empty String.
    4.  Let _codeUnits_ be [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)(_cp_).
    5.  For each code unit _cu_ of _codeUnits_, do
        1.  Set _escaped_ to the [string-concatenation](#string-concatenation) of _escaped_ and [UnicodeEscape](#sec-unicodeescape)(_cu_).
    6.  Return _escaped_.
6.  Return [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)(_cp_).


# 22.2.5.2 RegExp.prototype

The initial value of `RegExp.prototype` is the [RegExp prototype object](#sec-properties-of-the-regexp-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 22.2.5.3 get RegExp \[%Symbol.species% \]

`RegExp[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".

Note

RegExp prototype methods normally use their this value's [constructor](#constructor) to create a derived object. However, a subclass [constructor](#constructor) may over-ride that default behaviour by redefining its [%Symbol.species%](#sec-well-known-symbols) property.


# 22.2.6 Properties of the RegExp Prototype Object

The RegExp prototype object:

-   is %RegExp.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is not a RegExp instance and does not have a _\[\[RegExpMatcher\]\]_ internal slot or any of the other internal slots of RegExp instance objects.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).

Note

The RegExp prototype object does not have a "valueOf" property of its own; however, it inherits the "valueOf" property from the [Object prototype object](#sec-properties-of-the-object-prototype-object).


# 22.2.6.1 RegExp.prototype.constructor

The initial value of `RegExp.prototype.constructor` is [%RegExp%](#sec-regexp-constructor).


# 22.2.6.2 RegExp.prototype.exec ( _string_ )

This method searches _string_ for an occurrence of the regular expression pattern and returns an Array containing the results of the match, or null if _string_ did not match.

It performs the following steps when called:

1.  Let _R_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_R_, _\[\[RegExpMatcher\]\]_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
4.  Return ? [RegExpBuiltinExec](#sec-regexpbuiltinexec)(_R_, _S_).


# 22.2.6.3 get RegExp.prototype.dotAll

`RegExp.prototype.dotAll` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x0073 (LATIN SMALL LETTER S).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.6.4 get RegExp.prototype.flags

`RegExp.prototype.flags` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  If _R_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _codeUnits_ be a new empty [List](#sec-list-and-record-specification-type).
4.  Let _hasIndices_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "hasIndices")).
5.  If _hasIndices_ is true, append the code unit 0x0064 (LATIN SMALL LETTER D) to _codeUnits_.
6.  Let _global_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "global")).
7.  If _global_ is true, append the code unit 0x0067 (LATIN SMALL LETTER G) to _codeUnits_.
8.  Let _ignoreCase_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "ignoreCase")).
9.  If _ignoreCase_ is true, append the code unit 0x0069 (LATIN SMALL LETTER I) to _codeUnits_.
10.  Let _multiline_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "multiline")).
11.  If _multiline_ is true, append the code unit 0x006D (LATIN SMALL LETTER M) to _codeUnits_.
12.  Let _dotAll_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "dotAll")).
13.  If _dotAll_ is true, append the code unit 0x0073 (LATIN SMALL LETTER S) to _codeUnits_.
14.  Let _unicode_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "unicode")).
15.  If _unicode_ is true, append the code unit 0x0075 (LATIN SMALL LETTER U) to _codeUnits_.
16.  Let _unicodeSets_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "unicodeSets")).
17.  If _unicodeSets_ is true, append the code unit 0x0076 (LATIN SMALL LETTER V) to _codeUnits_.
18.  Let _sticky_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_R_, "sticky")).
19.  If _sticky_ is true, append the code unit 0x0079 (LATIN SMALL LETTER Y) to _codeUnits_.
20.  Return the String value whose code units are the elements of the [List](#sec-list-and-record-specification-type) _codeUnits_. If _codeUnits_ has no elements, the empty String is returned.


# 22.2.6.4.1 RegExpHasFlag ( _R_, _codeUnit_ )

The abstract operation RegExpHasFlag takes arguments _R_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _codeUnit_ (a code unit) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a Boolean or undefined, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _R_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  If _R_ does not have an _\[\[OriginalFlags\]\]_ internal slot, then
    1.  If [SameValue](#sec-samevalue)(_R_, [%RegExp.prototype%](#sec-properties-of-the-regexp-prototype-object)) is true, return undefined.
    2.  Otherwise, throw a TypeError exception.
3.  Let _flags_ be _R_._\[\[OriginalFlags\]\]_.
4.  If _flags_ contains _codeUnit_, return true.
5.  Return false.


# 22.2.6.5 get RegExp.prototype.global

`RegExp.prototype.global` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x0067 (LATIN SMALL LETTER G).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.6.6 get RegExp.prototype.hasIndices

`RegExp.prototype.hasIndices` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x0064 (LATIN SMALL LETTER D).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.6.7 get RegExp.prototype.ignoreCase

`RegExp.prototype.ignoreCase` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x0069 (LATIN SMALL LETTER I).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.6.8 RegExp.prototype \[%Symbol.match% \] ( _string_ )

This method performs the following steps when called:

1.  Let _rx_ be the this value.
2.  If _rx_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
4.  Let _flags_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_rx_, "flags")).
5.  If _flags_ does not contain "g", then
    1.  Return ? [RegExpExec](#sec-regexpexec)(_rx_, _S_).
6.  Else,
    1.  If _flags_ contains "u" or _flags_ contains "v", let _fullUnicode_ be true; otherwise let _fullUnicode_ be false.
    2.  Perform ? [Set](#sec-set-o-p-v-throw)(_rx_, "lastIndex", +0<sub>𝔽</sub>, true).
    3.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(0).
    4.  Let _n_ be 0.
    5.  Repeat,
        1.  Let _result_ be ? [RegExpExec](#sec-regexpexec)(_rx_, _S_).
        2.  If _result_ is null, then
            1.  If _n_ = 0, return null.
            2.  Return _A_.
        3.  Else,
            1.  Let _matchStr_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_result_, "0")).
            2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _matchStr_).
            3.  If _matchStr_ is the empty String, then
                1.  Let _thisIndex_ be [ℝ](#ℝ)(? [ToLength](#sec-tolength)(? [Get](#sec-get-o-p)(_rx_, "lastIndex"))).
                2.  Let _nextIndex_ be [AdvanceStringIndex](#sec-advancestringindex)(_S_, _thisIndex_, _fullUnicode_).
                3.  Perform ? [Set](#sec-set-o-p-v-throw)(_rx_, "lastIndex", [𝔽](#𝔽)(_nextIndex_), true).
            4.  Set _n_ to _n_ + 1.

The value of the "name" property of this method is "\[Symbol.match\]".

Note

The [%Symbol.match%](#sec-well-known-symbols) property is used by the [IsRegExp](#sec-isregexp) abstract operation to identify objects that have the basic behaviour of regular expressions. The absence of a [%Symbol.match%](#sec-well-known-symbols) property or the existence of such a property whose value does not Boolean coerce to true indicates that the object is not intended to be used as a regular expression object.


# 22.2.6.9 RegExp.prototype \[%Symbol.matchAll% \] ( _string_ )

This method performs the following steps when called:

1.  Let _R_ be the this value.
2.  If _R_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
4.  Let _C_ be ? [SpeciesConstructor](#sec-speciesconstructor)(_R_, [%RegExp%](#sec-regexp-constructor)).
5.  Let _flags_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_R_, "flags")).
6.  Let _matcher_ be ? [Construct](#sec-construct)(_C_, « _R_, _flags_ »).
7.  Let _lastIndex_ be ? [ToLength](#sec-tolength)(? [Get](#sec-get-o-p)(_R_, "lastIndex")).
8.  Perform ? [Set](#sec-set-o-p-v-throw)(_matcher_, "lastIndex", _lastIndex_, true).
9.  If _flags_ contains "g", let _global_ be true.
10.  Else, let _global_ be false.
11.  If _flags_ contains "u" or _flags_ contains "v", let _fullUnicode_ be true.
12.  Else, let _fullUnicode_ be false.
13.  Return [CreateRegExpStringIterator](#sec-createregexpstringiterator)(_matcher_, _S_, _global_, _fullUnicode_).

The value of the "name" property of this method is "\[Symbol.matchAll\]".


# 22.2.6.10 get RegExp.prototype.multiline

`RegExp.prototype.multiline` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x006D (LATIN SMALL LETTER M).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.6.11 RegExp.prototype \[%Symbol.replace% \] ( _string_, _replaceValue_ )

This method performs the following steps when called:

1.  Let _rx_ be the this value.
2.  If _rx_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
4.  Let _lengthS_ be the length of _S_.
5.  Let _functionalReplace_ be [IsCallable](#sec-iscallable)(_replaceValue_).
6.  If _functionalReplace_ is false, then
    1.  Set _replaceValue_ to ? [ToString](#sec-tostring)(_replaceValue_).
7.  Let _flags_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_rx_, "flags")).
8.  If _flags_ contains "g", let _global_ be true; otherwise let _global_ be false.
9.  If _global_ is true, then
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_rx_, "lastIndex", +0<sub>𝔽</sub>, true).
10.  Let _results_ be a new empty [List](#sec-list-and-record-specification-type).
11.  Let _done_ be false.
12.  Repeat, while _done_ is false,
     1.  Let _result_ be ? [RegExpExec](#sec-regexpexec)(_rx_, _S_).
     2.  If _result_ is null, then
         1.  Set _done_ to true.
     3.  Else,
         1.  Append _result_ to _results_.
         2.  If _global_ is false, then
             1.  Set _done_ to true.
         3.  Else,
             1.  Let _matchStr_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_result_, "0")).
             2.  If _matchStr_ is the empty String, then
                 1.  Let _thisIndex_ be [ℝ](#ℝ)(? [ToLength](#sec-tolength)(? [Get](#sec-get-o-p)(_rx_, "lastIndex"))).
                 2.  If _flags_ contains "u" or _flags_ contains "v", let _fullUnicode_ be true; otherwise let _fullUnicode_ be false.
                 3.  Let _nextIndex_ be [AdvanceStringIndex](#sec-advancestringindex)(_S_, _thisIndex_, _fullUnicode_).
                 4.  Perform ? [Set](#sec-set-o-p-v-throw)(_rx_, "lastIndex", [𝔽](#𝔽)(_nextIndex_), true).
13.  Let _accumulatedResult_ be the empty String.
14.  Let _nextSourcePosition_ be 0.
15.  For each element _result_ of _results_, do
     1.  Let _resultLength_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_result_).
     2.  Let _nCaptures_ be [max](#eqn-max)(_resultLength_ - 1, 0).
     3.  Let _matched_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_result_, "0")).
     4.  Let _matchLength_ be the length of _matched_.
     5.  Let _position_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(? [Get](#sec-get-o-p)(_result_, "index")).
     6.  Set _position_ to the result of [clamping](#clamping) _position_ between 0 and _lengthS_.
     7.  Let _captures_ be a new empty [List](#sec-list-and-record-specification-type).
     8.  Let _n_ be 1.
     9.  Repeat, while _n_ ≤ _nCaptures_,
         1.  Let _capN_ be ? [Get](#sec-get-o-p)(_result_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_))).
         2.  If _capN_ is not undefined, then
             1.  Set _capN_ to ? [ToString](#sec-tostring)(_capN_).
         3.  Append _capN_ to _captures_.
         4.  NOTE: When _n_ = 1, the preceding step puts the first element into _captures_ (at index 0). More generally, the _n_<sup>th</sup> capture (the characters captured by the _n_<sup>th</sup> set of capturing parentheses) is at _captures_\[_n_ - 1\].
         5.  Set _n_ to _n_ + 1.
     10.  Let _namedCaptures_ be ? [Get](#sec-get-o-p)(_result_, "groups").
     11.  If _functionalReplace_ is true, then
          1.  Let _replacerArgs_ be the [list-concatenation](#list-concatenation) of « _matched_ », _captures_, and « [𝔽](#𝔽)(_position_), _S_ ».
          2.  If _namedCaptures_ is not undefined, then
              1.  Append _namedCaptures_ to _replacerArgs_.
          3.  Let _replacementValue_ be ? [Call](#sec-call)(_replaceValue_, undefined, _replacerArgs_).
          4.  Let _replacementString_ be ? [ToString](#sec-tostring)(_replacementValue_).
     12.  Else,
          1.  If _namedCaptures_ is not undefined, then
              1.  Set _namedCaptures_ to ? [ToObject](#sec-toobject)(_namedCaptures_).
          2.  Let _replacementString_ be ? [GetSubstitution](#sec-getsubstitution)(_matched_, _S_, _position_, _captures_, _namedCaptures_, _replaceValue_).
     13.  If _position_ ≥ _nextSourcePosition_, then
          1.  NOTE: _position_ should not normally move backwards. If it does, it is an indication of an ill-behaving RegExp subclass or use of an access triggered side-effect to change the global flag or other characteristics of _rx_. In such cases, the corresponding substitution is ignored.
          2.  Set _accumulatedResult_ to the [string-concatenation](#string-concatenation) of _accumulatedResult_, the [substring](#substring) of _S_ from _nextSourcePosition_ to _position_, and _replacementString_.
          3.  Set _nextSourcePosition_ to _position_ + _matchLength_.
16.  If _nextSourcePosition_ ≥ _lengthS_, return _accumulatedResult_.
17.  Return the [string-concatenation](#string-concatenation) of _accumulatedResult_ and the [substring](#substring) of _S_ from _nextSourcePosition_.

The value of the "name" property of this method is "\[Symbol.replace\]".


# 22.2.6.12 RegExp.prototype \[%Symbol.search% \] ( _string_ )

This method performs the following steps when called:

1.  Let _rx_ be the this value.
2.  If _rx_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
4.  Let _previousLastIndex_ be ? [Get](#sec-get-o-p)(_rx_, "lastIndex").
5.  If _previousLastIndex_ is not +0<sub>𝔽</sub>, then
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_rx_, "lastIndex", +0<sub>𝔽</sub>, true).
6.  Let _result_ be ? [RegExpExec](#sec-regexpexec)(_rx_, _S_).
7.  Let _currentLastIndex_ be ? [Get](#sec-get-o-p)(_rx_, "lastIndex").
8.  If [SameValue](#sec-samevalue)(_currentLastIndex_, _previousLastIndex_) is false, then
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_rx_, "lastIndex", _previousLastIndex_, true).
9.  If _result_ is null, return \-1<sub>𝔽</sub>.
10.  Return ? [Get](#sec-get-o-p)(_result_, "index").

The value of the "name" property of this method is "\[Symbol.search\]".

Note

The "lastIndex" and "global" properties of this RegExp object are ignored when performing the search. The "lastIndex" property is left unchanged.


# 22.2.6.13 get RegExp.prototype.source

`RegExp.prototype.source` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  If _R_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  If _R_ does not have an _\[\[OriginalSource\]\]_ internal slot, then
    1.  If [SameValue](#sec-samevalue)(_R_, [%RegExp.prototype%](#sec-properties-of-the-regexp-prototype-object)) is true, return "(?:)".
    2.  Otherwise, throw a TypeError exception.
4.  [Assert](#assert): _R_ has an _\[\[OriginalFlags\]\]_ internal slot.
5.  Let _src_ be _R_._\[\[OriginalSource\]\]_.
6.  Let _flags_ be _R_._\[\[OriginalFlags\]\]_.
7.  Return [EscapeRegExpPattern](#sec-escaperegexppattern)(_src_, _flags_).


# 22.2.6.13.1 EscapeRegExpPattern ( _P_, _F_ )

The abstract operation EscapeRegExpPattern takes arguments _P_ (a String) and _F_ (a String) and returns a String. It performs the following steps when called:

1.  If _F_ contains "v", then
    1.  Let _patternSymbol_ be [Pattern](#prod-Pattern)\[+UnicodeMode, +UnicodeSetsMode\].
2.  Else if _F_ contains "u", then
    1.  Let _patternSymbol_ be [Pattern](#prod-Pattern)\[+UnicodeMode, ~UnicodeSetsMode\].
3.  Else,
    1.  Let _patternSymbol_ be [Pattern](#prod-Pattern)\[~UnicodeMode, ~UnicodeSetsMode\].
4.  Let _S_ be a String in the form of a _patternSymbol_ equivalent to _P_ interpreted as UTF-16 encoded Unicode code points ([6.1.4](#sec-ecmascript-language-types-string-type)), in which certain code points are escaped as described below. _S_ may or may not differ from _P_; however, the [Abstract Closure](#sec-abstract-closure) that would result from evaluating _S_ as a _patternSymbol_ must behave identically to the [Abstract Closure](#sec-abstract-closure) given by the constructed object's _\[\[RegExpMatcher\]\]_ internal slot. Multiple calls to this abstract operation using the same values for _P_ and _F_ must produce identical results.
5.  The code points `/` or any [LineTerminator](#prod-LineTerminator) occurring in the pattern shall be escaped in _S_ as necessary to ensure that the [string-concatenation](#string-concatenation) of "/", _S_, "/", and _F_ can be parsed (in an appropriate lexical context) as a [RegularExpressionLiteral](#prod-RegularExpressionLiteral) that behaves identically to the constructed regular expression. For example, if _P_ is "/", then _S_ could be "\\/" or "\\u002F", among other possibilities, but not "/", because `///` followed by _F_ would be parsed as a [SingleLineComment](#prod-SingleLineComment) rather than a [RegularExpressionLiteral](#prod-RegularExpressionLiteral). If _P_ is the empty String, this specification can be met by letting _S_ be "(?:)".
6.  Return _S_.

Note

Despite having similar names, `RegExp.escape` and EscapeRegExpPattern do not perform similar actions. The former escapes a string for representation inside a pattern, while this function escapes a pattern for representation as a string.


# 22.2.6.14 RegExp.prototype \[%Symbol.split% \] ( _string_, _limit_ )

Note 1

This method returns an Array into which substrings of the result of converting _string_ to a String have been stored. The substrings are determined by searching from left to right for matches of the this value regular expression; these occurrences are not part of any String in the returned array, but serve to divide up the String value.

The this value may be an empty regular expression or a regular expression that can match an empty String. In this case, the regular expression does not match the empty substring at the beginning or end of the input String, nor does it match the empty substring at the end of the previous separator match. (For example, if the regular expression matches the empty String, the String is split up into individual code unit elements; the length of the result array equals the length of the String, and each substring contains one code unit.) Only the first match at a given index of the String is considered, even if backtracking could yield a non-empty substring match at that index. (For example, `/a*?/[Symbol.split]("ab")` evaluates to the array `["a", "b"]`, while `/a*/[Symbol.split]("ab")` evaluates to the array `["","b"]`.)

If _string_ is (or converts to) the empty String, the result depends on whether the regular expression can match the empty String. If it can, the result array contains no elements. Otherwise, the result array contains one element, which is the empty String.

If the regular expression contains capturing parentheses, then each time _separator_ is matched the results (including any undefined results) of the capturing parentheses are spliced into the output array. For example,

```
/<(\/)?([^<>]+)>/[Symbol.split]("A<B>bold</B>and<CODE>coded</CODE>")
```

evaluates to the array

```
["A", undefined, "B", "bold", "/", "B", "and", undefined, "CODE", "coded", "/", "CODE", ""]
```

If _limit_ is not undefined, then the output array is truncated so that it contains no more than _limit_ elements.

This method performs the following steps when called:

1.  Let _rx_ be the this value.
2.  If _rx_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
4.  Let _C_ be ? [SpeciesConstructor](#sec-speciesconstructor)(_rx_, [%RegExp%](#sec-regexp-constructor)).
5.  Let _flags_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_rx_, "flags")).
6.  If _flags_ contains "u" or _flags_ contains "v", let _unicodeMatching_ be true.
7.  Else, let _unicodeMatching_ be false.
8.  If _flags_ contains "y", let _newFlags_ be _flags_.
9.  Else, let _newFlags_ be the [string-concatenation](#string-concatenation) of _flags_ and "y".
10.  Let _splitter_ be ? [Construct](#sec-construct)(_C_, « _rx_, _newFlags_ »).
11.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(0).
12.  Let _lengthA_ be 0.
13.  If _limit_ is undefined, let _lim_ be 2<sup>32</sup> - 1; else let _lim_ be [ℝ](#ℝ)(? [ToUint32](#sec-touint32)(_limit_)).
14.  If _lim_ = 0, return _A_.
15.  If _S_ is the empty String, then
     1.  Let _z_ be ? [RegExpExec](#sec-regexpexec)(_splitter_, _S_).
     2.  If _z_ is not null, return _A_.
     3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, "0", _S_).
     4.  Return _A_.
16.  Let _size_ be the length of _S_.
17.  Let _p_ be 0.
18.  Let _q_ be _p_.
19.  Repeat, while _q_ < _size_,
     1.  Perform ? [Set](#sec-set-o-p-v-throw)(_splitter_, "lastIndex", [𝔽](#𝔽)(_q_), true).
     2.  Let _z_ be ? [RegExpExec](#sec-regexpexec)(_splitter_, _S_).
     3.  If _z_ is null, then
         1.  Set _q_ to [AdvanceStringIndex](#sec-advancestringindex)(_S_, _q_, _unicodeMatching_).
     4.  Else,
         1.  Let _e_ be [ℝ](#ℝ)(? [ToLength](#sec-tolength)(? [Get](#sec-get-o-p)(_splitter_, "lastIndex"))).
         2.  Set _e_ to [min](#eqn-min)(_e_, _size_).
         3.  If _e_ = _p_, then
             1.  Set _q_ to [AdvanceStringIndex](#sec-advancestringindex)(_S_, _q_, _unicodeMatching_).
         4.  Else,
             1.  Let _T_ be the [substring](#substring) of _S_ from _p_ to _q_.
             2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_lengthA_)), _T_).
             3.  Set _lengthA_ to _lengthA_ + 1.
             4.  If _lengthA_ = _lim_, return _A_.
             5.  Set _p_ to _e_.
             6.  Let _numberOfCaptures_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_z_).
             7.  Set _numberOfCaptures_ to [max](#eqn-max)(_numberOfCaptures_ - 1, 0).
             8.  Let _i_ be 1.
             9.  Repeat, while _i_ ≤ _numberOfCaptures_,
                 1.  Let _nextCapture_ be ? [Get](#sec-get-o-p)(_z_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_))).
                 2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_lengthA_)), _nextCapture_).
                 3.  Set _i_ to _i_ + 1.
                 4.  Set _lengthA_ to _lengthA_ + 1.
                 5.  If _lengthA_ = _lim_, return _A_.
             10.  Set _q_ to _p_.
20.  Let _T_ be the [substring](#substring) of _S_ from _p_ to _size_.
21.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_lengthA_)), _T_).
22.  Return _A_.

The value of the "name" property of this method is "\[Symbol.split\]".

Note 2

This method ignores the value of the "global" and "sticky" properties of this RegExp object.


# 22.2.6.15 get RegExp.prototype.sticky

`RegExp.prototype.sticky` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x0079 (LATIN SMALL LETTER Y).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.6.16 RegExp.prototype.test ( _S_ )

This method performs the following steps when called:

1.  Let _R_ be the this value.
2.  If _R_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _string_ be ? [ToString](#sec-tostring)(_S_).
4.  Let _match_ be ? [RegExpExec](#sec-regexpexec)(_R_, _string_).
5.  If _match_ is not null, return true; else return false.


# 22.2.6.17 RegExp.prototype.toString ( )

1.  Let _R_ be the this value.
2.  If _R_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _pattern_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_R_, "source")).
4.  Let _flags_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_R_, "flags")).
5.  Let _result_ be the [string-concatenation](#string-concatenation) of "/", _pattern_, "/", and _flags_.
6.  Return _result_.

Note

The returned String has the form of a [RegularExpressionLiteral](#prod-RegularExpressionLiteral) that evaluates to another RegExp object with the same behaviour as this object.


# 22.2.6.18 get RegExp.prototype.unicode

`RegExp.prototype.unicode` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x0075 (LATIN SMALL LETTER U).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.6.19 get RegExp.prototype.unicodeSets

`RegExp.prototype.unicodeSets` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _R_ be the this value.
2.  Let _cu_ be the code unit 0x0076 (LATIN SMALL LETTER V).
3.  Return ? [RegExpHasFlag](#sec-regexphasflag)(_R_, _cu_).


# 22.2.7 Abstract Operations for RegExp Matching


# 22.2.7.1 RegExpExec ( _R_, _S_ )

The abstract operation RegExpExec takes arguments _R_ (an Object) and _S_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an Object or null, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _exec_ be ? [Get](#sec-get-o-p)(_R_, "exec").
2.  If [IsCallable](#sec-iscallable)(_exec_) is true, then
    1.  Let _result_ be ? [Call](#sec-call)(_exec_, _R_, « _S_ »).
    2.  If _result_ [is not an Object](#sec-object-type) and _result_ is not null, throw a TypeError exception.
    3.  Return _result_.
3.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_R_, _\[\[RegExpMatcher\]\]_).
4.  Return ? [RegExpBuiltinExec](#sec-regexpbuiltinexec)(_R_, _S_).

Note

If a callable "exec" property is not found this algorithm falls back to attempting to use the built-in RegExp matching algorithm. This provides compatible behaviour for code written for prior editions where most built-in algorithms that use regular expressions did not perform a dynamic property lookup of "exec".


# 22.2.7.2 RegExpBuiltinExec ( _R_, _S_ )

The abstract operation RegExpBuiltinExec takes arguments _R_ (an initialized RegExp instance) and _S_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an [Array exotic object](#array-exotic-object) or null, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _length_ be the length of _S_.
2.  Let _lastIndex_ be [ℝ](#ℝ)(? [ToLength](#sec-tolength)(! [Get](#sec-get-o-p)(_R_, "lastIndex"))).
3.  Let _flags_ be _R_._\[\[OriginalFlags\]\]_.
4.  If _flags_ contains "g", let _global_ be true; else let _global_ be false.
5.  If _flags_ contains "y", let _sticky_ be true; else let _sticky_ be false.
6.  If _flags_ contains "d", let _hasIndices_ be true; else let _hasIndices_ be false.
7.  If _global_ is false and _sticky_ is false, set _lastIndex_ to 0.
8.  Let _matcher_ be _R_._\[\[RegExpMatcher\]\]_.
9.  If _flags_ contains "u" or _flags_ contains "v", let _fullUnicode_ be true; else let _fullUnicode_ be false.
10.  Let _matchSucceeded_ be false.
11.  If _fullUnicode_ is true, let _input_ be [StringToCodePoints](#sec-stringtocodepoints)(_S_); otherwise let _input_ be a [List](#sec-list-and-record-specification-type) whose elements are the code units that are the elements of _S_.
12.  NOTE: Each element of _input_ is considered to be a character.
13.  Repeat, while _matchSucceeded_ is false,
     1.  If _lastIndex_ > _length_, then
         1.  If _global_ is true or _sticky_ is true, then
             1.  Perform ? [Set](#sec-set-o-p-v-throw)(_R_, "lastIndex", +0<sub>𝔽</sub>, true).
         2.  Return null.
     2.  Let _inputIndex_ be the index into _input_ of the character that was obtained from element _lastIndex_ of _S_.
     3.  Let _r_ be _matcher_(_input_, _inputIndex_).
     4.  If _r_ is failure, then
         1.  If _sticky_ is true, then
             1.  Perform ? [Set](#sec-set-o-p-v-throw)(_R_, "lastIndex", +0<sub>𝔽</sub>, true).
             2.  Return null.
         2.  Set _lastIndex_ to [AdvanceStringIndex](#sec-advancestringindex)(_S_, _lastIndex_, _fullUnicode_).
     5.  Else,
         1.  [Assert](#assert): _r_ is a [MatchState](#pattern-matchstate).
         2.  Set _matchSucceeded_ to true.
14.  Let _e_ be _r_._\[\[EndIndex\]\]_.
15.  If _fullUnicode_ is true, set _e_ to [GetStringIndex](#sec-getstringindex)(_S_, _e_).
16.  If _global_ is true or _sticky_ is true, then
     1.  Perform ? [Set](#sec-set-o-p-v-throw)(_R_, "lastIndex", [𝔽](#𝔽)(_e_), true).
17.  Let _n_ be the number of elements in _r_._\[\[Captures\]\]_.
18.  [Assert](#assert): _n_ = _R_._\[\[RegExpRecord\]\]_._\[\[CapturingGroupsCount\]\]_.
19.  [Assert](#assert): _n_ < 2<sup>32</sup> - 1.
20.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(_n_ + 1).
21.  [Assert](#assert): The [mathematical value of](#mathematical-value-of) _A_'s "length" property is _n_ + 1.
22.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, "index", [𝔽](#𝔽)(_lastIndex_)).
23.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, "input", _S_).
24.  Let _match_ be the [Match Record](#sec-match-records) { _\[\[StartIndex\]\]_: _lastIndex_, _\[\[EndIndex\]\]_: _e_ }.
25.  Let _indices_ be a new empty [List](#sec-list-and-record-specification-type).
26.  Let _groupNames_ be a new empty [List](#sec-list-and-record-specification-type).
27.  Append _match_ to _indices_.
28.  Let _matchedSubstr_ be [GetMatchString](#sec-getmatchstring)(_S_, _match_).
29.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, "0", _matchedSubstr_).
30.  If _R_ contains any [GroupName](#prod-GroupName), then
     1.  Let _groups_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(null).
     2.  Let _hasGroups_ be true.
31.  Else,
     1.  Let _groups_ be undefined.
     2.  Let _hasGroups_ be false.
32.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, "groups", _groups_).
33.  Let _matchedGroupNames_ be a new empty [List](#sec-list-and-record-specification-type).
34.  For each [integer](#integer) _i_ such that 1 ≤ _i_ ≤ _n_, in ascending order, do
     1.  Let _captureI_ be _i_<sup>th</sup> element of _r_._\[\[Captures\]\]_.
     2.  If _captureI_ is undefined, then
         1.  Let _capturedValue_ be undefined.
         2.  Append undefined to _indices_.
     3.  Else,
         1.  Let _captureStart_ be _captureI_._\[\[StartIndex\]\]_.
         2.  Let _captureEnd_ be _captureI_._\[\[EndIndex\]\]_.
         3.  If _fullUnicode_ is true, then
             1.  Set _captureStart_ to [GetStringIndex](#sec-getstringindex)(_S_, _captureStart_).
             2.  Set _captureEnd_ to [GetStringIndex](#sec-getstringindex)(_S_, _captureEnd_).
         4.  Let _capture_ be the [Match Record](#sec-match-records) { _\[\[StartIndex\]\]_: _captureStart_, _\[\[EndIndex\]\]_: _captureEnd_ }.
         5.  Let _capturedValue_ be [GetMatchString](#sec-getmatchstring)(_S_, _capture_).
         6.  Append _capture_ to _indices_.
     4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_)), _capturedValue_).
     5.  If the _i_<sup>th</sup> capture of _R_ was defined with a [GroupName](#prod-GroupName), then
         1.  Let _s_ be the [CapturingGroupName](#sec-static-semantics-capturinggroupname) of that [GroupName](#prod-GroupName).
         2.  If _matchedGroupNames_ contains _s_, then
             1.  [Assert](#assert): _capturedValue_ is undefined.
             2.  Append undefined to _groupNames_.
         3.  Else,
             1.  If _capturedValue_ is not undefined, append _s_ to _matchedGroupNames_.
             2.  NOTE: If there are multiple groups named _s_, _groups_ may already have an _s_ property at this point. However, because _groups_ is an [ordinary object](#ordinary-object) whose properties are all writable [data properties](#sec-object-type), the call to [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow) is nevertheless guaranteed to succeed.
             3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_groups_, _s_, _capturedValue_).
             4.  Append _s_ to _groupNames_.
     6.  Else,
         1.  Append undefined to _groupNames_.
35.  If _hasIndices_ is true, then
     1.  Let _indicesArray_ be [MakeMatchIndicesIndexPairArray](#sec-makematchindicesindexpairarray)(_S_, _indices_, _groupNames_, _hasGroups_).
     2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, "indices", _indicesArray_).
36.  Return _A_.


# 22.2.7.3 AdvanceStringIndex ( _S_, _index_, _unicode_ )

The abstract operation AdvanceStringIndex takes arguments _S_ (a String), _index_ (a non-negative [integer](#integer)), and _unicode_ (a Boolean) and returns an [integer](#integer). It performs the following steps when called:

1.  [Assert](#assert): _index_ ≤ 2<sup>53</sup> - 1.
2.  If _unicode_ is false, return _index_ + 1.
3.  Let _length_ be the length of _S_.
4.  If _index_ + 1 ≥ _length_, return _index_ + 1.
5.  Let _cp_ be [CodePointAt](#sec-codepointat)(_S_, _index_).
6.  Return _index_ + _cp_._\[\[CodeUnitCount\]\]_.


# 22.2.7.4 GetStringIndex ( _S_, _codePointIndex_ )

The abstract operation GetStringIndex takes arguments _S_ (a String) and _codePointIndex_ (a non-negative [integer](#integer)) and returns a non-negative [integer](#integer). It interprets _S_ as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type), and returns the code unit index corresponding to code point index _codePointIndex_ when such an index exists. Otherwise, it returns the length of _S_. It performs the following steps when called:

1.  If _S_ is the empty String, return 0.
2.  Let _len_ be the length of _S_.
3.  Let _codeUnitCount_ be 0.
4.  Let _codePointCount_ be 0.
5.  Repeat, while _codeUnitCount_ < _len_,
    1.  If _codePointCount_ = _codePointIndex_, return _codeUnitCount_.
    2.  Let _cp_ be [CodePointAt](#sec-codepointat)(_S_, _codeUnitCount_).
    3.  Set _codeUnitCount_ to _codeUnitCount_ + _cp_._\[\[CodeUnitCount\]\]_.
    4.  Set _codePointCount_ to _codePointCount_ + 1.
6.  Return _len_.


# 22.2.7.5 Match Records

A Match Record is a [Record](#sec-list-and-record-specification-type) value used to encapsulate the start and end indices of a regular expression match or capture.

Match Records have the fields listed in [Table 70](#table-match-record).

Table 70: [Match Record](#sec-match-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[StartIndex]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_12280"><a href="#integer">integer</a></emu-xref></td><td>The number of code units from the start of a string at which the match begins (inclusive).</td></tr><tr><td><var class="field">[[EndIndex]]</var></td><td>an <emu-xref href="#integer" id="_ref_12281"><a href="#integer">integer</a></emu-xref> ≥ <var class="field">[[StartIndex]]</var></td><td>The number of code units from the start of a string at which the match ends (exclusive).</td></tr></tbody></table>


# 22.2.7.6 GetMatchString ( _S_, _match_ )

The abstract operation GetMatchString takes arguments _S_ (a String) and _match_ (a [Match Record](#sec-match-records)) and returns a String. It performs the following steps when called:

1.  [Assert](#assert): _match_._\[\[StartIndex\]\]_ ≤ _match_._\[\[EndIndex\]\]_ ≤ the length of _S_.
2.  Return the [substring](#substring) of _S_ from _match_._\[\[StartIndex\]\]_ to _match_._\[\[EndIndex\]\]_.


# 22.2.7.7 GetMatchIndexPair ( _S_, _match_ )

The abstract operation GetMatchIndexPair takes arguments _S_ (a String) and _match_ (a [Match Record](#sec-match-records)) and returns an Array. It performs the following steps when called:

1.  [Assert](#assert): _match_._\[\[StartIndex\]\]_ ≤ _match_._\[\[EndIndex\]\]_ ≤ the length of _S_.
2.  Return [CreateArrayFromList](#sec-createarrayfromlist)(« [𝔽](#𝔽)(_match_._\[\[StartIndex\]\]_), [𝔽](#𝔽)(_match_._\[\[EndIndex\]\]_) »).


# 22.2.7.8 MakeMatchIndicesIndexPairArray ( _S_, _indices_, _groupNames_, _hasGroups_ )

The abstract operation MakeMatchIndicesIndexPairArray takes arguments _S_ (a String), _indices_ (a [List](#sec-list-and-record-specification-type) of either [Match Records](#sec-match-records) or undefined), _groupNames_ (a [List](#sec-list-and-record-specification-type) of either Strings or undefined), and _hasGroups_ (a Boolean) and returns an Array. It performs the following steps when called:

1.  Let _n_ be the number of elements in _indices_.
2.  [Assert](#assert): _n_ < 2<sup>32</sup> - 1.
3.  [Assert](#assert): _groupNames_ has _n_ - 1 elements.
4.  NOTE: The _groupNames_ [List](#sec-list-and-record-specification-type) contains elements aligned with the _indices_ [List](#sec-list-and-record-specification-type) starting at _indices_\[1\].
5.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(_n_).
6.  If _hasGroups_ is true, then
    1.  Let _groups_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(null).
7.  Else,
    1.  Let _groups_ be undefined.
8.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, "groups", _groups_).
9.  For each [integer](#integer) _i_ such that 0 ≤ _i_ < _n_, in ascending order, do
    1.  Let _matchIndices_ be _indices_\[_i_\].
    2.  If _matchIndices_ is not undefined, then
        1.  Let _matchIndexPair_ be [GetMatchIndexPair](#sec-getmatchindexpair)(_S_, _matchIndices_).
    3.  Else,
        1.  Let _matchIndexPair_ be undefined.
    4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_)), _matchIndexPair_).
    5.  If _i_ > 0, then
        1.  Let _s_ be _groupNames_\[_i_ - 1\].
        2.  If _s_ is not undefined, then
            1.  [Assert](#assert): _groups_ is not undefined.
            2.  NOTE: If there are multiple groups named _s_, _groups_ may already have an _s_ property at this point. However, because _groups_ is an [ordinary object](#ordinary-object) whose properties are all writable [data properties](#sec-object-type), the call to [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow) is nevertheless guaranteed to succeed.
            3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_groups_, _s_, _matchIndexPair_).
10.  Return _A_.


# 22.2.8 Properties of RegExp Instances

RegExp instances are [ordinary objects](#ordinary-object) that inherit properties from the [RegExp prototype object](#sec-properties-of-the-regexp-prototype-object). RegExp instances have internal slots _\[\[OriginalSource\]\]_, _\[\[OriginalFlags\]\]_, _\[\[RegExpRecord\]\]_, and _\[\[RegExpMatcher\]\]_. The value of the _\[\[RegExpMatcher\]\]_ internal slot is an [Abstract Closure](#sec-abstract-closure) representation of the [Pattern](#prod-Pattern) of the RegExp object.

Note

Prior to ECMAScript 2015, RegExp instances were specified as having the own [data properties](#sec-object-type) "source", "global", "ignoreCase", and "multiline". Those properties are now specified as [accessor properties](#sec-object-type) of `RegExp.prototype`.

RegExp instances also have the following property:


# 22.2.8.1 lastIndex

The value of the "lastIndex" property specifies the String index at which to start the next match. It is coerced to an [integral Number](#integral-number) when used (see [22.2.7.2](#sec-regexpbuiltinexec)). This property shall have the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 22.2.9 RegExp String Iterator Objects

A RegExp String Iterator is an object that represents a specific iteration over some specific String instance object, matching against some specific RegExp instance object. There is not a named [constructor](#constructor) for RegExp String Iterator objects. Instead, RegExp String Iterator objects are created by calling certain methods of RegExp instance objects.


# 22.2.9.1 CreateRegExpStringIterator ( _R_, _S_, _global_, _fullUnicode_ )

The abstract operation CreateRegExpStringIterator takes arguments _R_ (an Object), _S_ (a String), _global_ (a Boolean), and _fullUnicode_ (a Boolean) and returns an Object. It performs the following steps when called:

1.  Let _iterator_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%RegExpStringIteratorPrototype%](#sec-%regexpstringiteratorprototype%-object), « _\[\[IteratingRegExp\]\]_, _\[\[IteratedString\]\]_, _\[\[Global\]\]_, _\[\[Unicode\]\]_, _\[\[Done\]\]_ »).
2.  Set _iterator_._\[\[IteratingRegExp\]\]_ to _R_.
3.  Set _iterator_._\[\[IteratedString\]\]_ to _S_.
4.  Set _iterator_._\[\[Global\]\]_ to _global_.
5.  Set _iterator_._\[\[Unicode\]\]_ to _fullUnicode_.
6.  Set _iterator_._\[\[Done\]\]_ to false.
7.  Return _iterator_.


# 22.2.9.2 The %RegExpStringIteratorPrototype% Object

The %RegExpStringIteratorPrototype% object:

-   has properties that are inherited by all [RegExp String Iterator objects](#sec-regexp-string-iterator-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   has the following properties:


# 22.2.9.2.1 %RegExpStringIteratorPrototype%.next ( )

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  If _O_ does not have all of the internal slots of a [RegExp String Iterator](#sec-regexp-string-iterator-objects) Object Instance (see [22.2.9.3](#sec-properties-of-regexp-string-iterator-instances)), throw a TypeError exception.
4.  If _O_._\[\[Done\]\]_ is true, then
    1.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
5.  Let _R_ be _O_._\[\[IteratingRegExp\]\]_.
6.  Let _S_ be _O_._\[\[IteratedString\]\]_.
7.  Let _global_ be _O_._\[\[Global\]\]_.
8.  Let _fullUnicode_ be _O_._\[\[Unicode\]\]_.
9.  Let _match_ be ? [RegExpExec](#sec-regexpexec)(_R_, _S_).
10.  If _match_ is null, then
     1.  Set _O_._\[\[Done\]\]_ to true.
     2.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
11.  If _global_ is false, then
     1.  Set _O_._\[\[Done\]\]_ to true.
     2.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(_match_, false).
12.  Let _matchStr_ be ? [ToString](#sec-tostring)(? [Get](#sec-get-o-p)(_match_, "0")).
13.  If _matchStr_ is the empty String, then
     1.  Let _thisIndex_ be [ℝ](#ℝ)(? [ToLength](#sec-tolength)(? [Get](#sec-get-o-p)(_R_, "lastIndex"))).
     2.  Let _nextIndex_ be [AdvanceStringIndex](#sec-advancestringindex)(_S_, _thisIndex_, _fullUnicode_).
     3.  Perform ? [Set](#sec-set-o-p-v-throw)(_R_, "lastIndex", [𝔽](#𝔽)(_nextIndex_), true).
14.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(_match_, false).


# 22.2.9.2.2 %RegExpStringIteratorPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "RegExp String Iterator".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 22.2.9.3 Properties of RegExp String Iterator Instances

[RegExp String Iterator](#sec-regexp-string-iterator-objects) instances are [ordinary objects](#ordinary-object) that inherit properties from the [%RegExpStringIteratorPrototype%](#sec-%regexpstringiteratorprototype%-object) intrinsic object. [RegExp String Iterator](#sec-regexp-string-iterator-objects) instances are initially created with the internal slots listed in [Table 71](#table-regexp-string-iterator-instance-slots).

Table 71: Internal Slots of [RegExp String Iterator](#sec-regexp-string-iterator-objects) Instances

<table><tbody><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr><tr><td><var class="field">[[IteratingRegExp]]</var></td><td>an Object</td><td>The regular expression used for iteration. <emu-xref aoid="IsRegExp" id="_ref_12343"><a href="#sec-isregexp">IsRegExp</a></emu-xref>(<var class="field">[[IteratingRegExp]]</var>) is initially <emu-val>true</emu-val>.</td></tr><tr><td><var class="field">[[IteratedString]]</var></td><td>a String</td><td>The String value being iterated upon.</td></tr><tr><td><var class="field">[[Global]]</var></td><td>a Boolean</td><td>Indicates whether the <var class="field">[[IteratingRegExp]]</var> is global or not.</td></tr><tr><td><var class="field">[[Unicode]]</var></td><td>a Boolean</td><td>Indicates whether the <var class="field">[[IteratingRegExp]]</var> is in Unicode mode or not.</td></tr><tr><td><var class="field">[[Done]]</var></td><td>a Boolean</td><td>Indicates whether the iteration is complete or not.</td></tr></tbody></table>


# 23 Indexed Collections


# 23.1 Array Objects

Arrays are [exotic objects](#exotic-object) that give special treatment to a certain class of [property names](#property-name). See [10.4.2](#sec-array-exotic-objects) for a definition of this special treatment.


# 23.1.1 The Array Constructor

The Array [constructor](#constructor):

-   is %Array%.
-   is the initial value of the "Array" property of the [global object](#sec-global-object).
-   creates and initializes a new Array when called as a [constructor](#constructor).
-   also creates and initializes a new Array when called as a function rather than as a [constructor](#constructor). Thus the function call `Array(…)` is equivalent to the object creation expression `new Array(…)` with the same arguments.
-   is a function whose behaviour differs based upon the number and types of its arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the exotic Array behaviour must include a `super` call to the Array [constructor](#constructor) to initialize subclass instances that are [Array exotic objects](#array-exotic-object). However, most of the `Array.prototype` methods are generic methods that are not dependent upon their this value being an [Array exotic object](#array-exotic-object).


# 23.1.1.1 Array ( ..._values_ )

This function performs the following steps when called:

1.  If NewTarget is undefined, let _newTarget_ be the [active function object](#active-function-object); else let _newTarget_ be NewTarget.
2.  Let _proto_ be ? [GetPrototypeFromConstructor](#sec-getprototypefromconstructor)(_newTarget_, "%Array.prototype%").
3.  Let _numberOfArgs_ be the number of elements in _values_.
4.  If _numberOfArgs_ = 0, then
    1.  Return ! [ArrayCreate](#sec-arraycreate)(0, _proto_).
5.  Else if _numberOfArgs_ = 1, then
    1.  Let _len_ be _values_\[0\].
    2.  Let _array_ be ! [ArrayCreate](#sec-arraycreate)(0, _proto_).
    3.  If _len_ [is not a Number](#sec-ecmascript-language-types-number-type), then
        1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_array_, "0", _len_).
        2.  Let _intLen_ be 1<sub>𝔽</sub>.
    4.  Else,
        1.  Let _intLen_ be ! [ToUint32](#sec-touint32)(_len_).
        2.  If [SameValueZero](#sec-samevaluezero)(_intLen_, _len_) is false, throw a RangeError exception.
    5.  Perform ! [Set](#sec-set-o-p-v-throw)(_array_, "length", _intLen_, true).
    6.  Return _array_.
6.  Else,
    1.  [Assert](#assert): _numberOfArgs_ ≥ 2.
    2.  Let _array_ be ? [ArrayCreate](#sec-arraycreate)(_numberOfArgs_, _proto_).
    3.  Let _k_ be 0.
    4.  Repeat, while _k_ < _numberOfArgs_,
        1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
        2.  Let _itemK_ be _values_\[_k_\].
        3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_array_, _Pk_, _itemK_).
        4.  Set _k_ to _k_ + 1.
    5.  [Assert](#assert): The [mathematical value of](#mathematical-value-of) _array_'s "length" property is _numberOfArgs_.
    6.  Return _array_.


# 23.1.2 Properties of the Array Constructor

The Array [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has a "length" property whose value is 1<sub>𝔽</sub>.
-   has the following properties:


# 23.1.2.1 Array.from ( _items_ \[, _mapper_ \[, _thisArg_ \] \] )

This function performs the following steps when called:

1.  Let _C_ be the this value.
2.  If _mapper_ is undefined, then
    1.  Let _mapping_ be false.
3.  Else,
    1.  If [IsCallable](#sec-iscallable)(_mapper_) is false, throw a TypeError exception.
    2.  Let _mapping_ be true.
4.  Let _usingIterator_ be ? [GetMethod](#sec-getmethod)(_items_, [%Symbol.iterator%](#sec-well-known-symbols)).
5.  If _usingIterator_ is not undefined, then
    1.  If [IsConstructor](#sec-isconstructor)(_C_) is true, then
        1.  Let _A_ be ? [Construct](#sec-construct)(_C_).
    2.  Else,
        1.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(0).
    3.  Let _iteratorRecord_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_items_, _usingIterator_).
    4.  Let _k_ be 0.
    5.  Repeat,
        1.  If _k_ ≥ 2<sup>53</sup> - 1, then
            1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
            2.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _error_).
        2.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
        3.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
        4.  If _next_ is done, then
            1.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", [𝔽](#𝔽)(_k_), true).
            2.  Return _A_.
        5.  If _mapping_ is true, then
            1.  Let _mappedValue_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_mapper_, _thisArg_, « _next_, [𝔽](#𝔽)(_k_) »)).
            2.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_mappedValue_, _iteratorRecord_).
        6.  Else,
            1.  Let _mappedValue_ be _next_.
        7.  Let _defineStatus_ be [Completion](#sec-completion-ao)([CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _mappedValue_)).
        8.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_defineStatus_, _iteratorRecord_).
        9.  Set _k_ to _k_ + 1.
6.  NOTE: _items_ is not [iterable](#sec-iterable-interface) so assume it is an [array-like object](#sec-lengthofarraylike).
7.  Let _arrayLike_ be ! [ToObject](#sec-toobject)(_items_).
8.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_arrayLike_).
9.  If [IsConstructor](#sec-isconstructor)(_C_) is true, then
    1.  Let _A_ be ? [Construct](#sec-construct)(_C_, « [𝔽](#𝔽)(_len_) »).
10.  Else,
     1.  Let _A_ be ? [ArrayCreate](#sec-arraycreate)(_len_).
11.  Let _k_ be 0.
12.  Repeat, while _k_ < _len_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Let _kValue_ be ? [Get](#sec-get-o-p)(_arrayLike_, _Pk_).
     3.  If _mapping_ is true, then
         1.  Let _mappedValue_ be ? [Call](#sec-call)(_mapper_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_) »).
     4.  Else,
         1.  Let _mappedValue_ be _kValue_.
     5.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _mappedValue_).
     6.  Set _k_ to _k_ + 1.
13.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", [𝔽](#𝔽)(_len_), true).
14.  Return _A_.

Note

This method is an intentionally generic factory method; it does not require that its this value be the Array [constructor](#constructor). Therefore it can be transferred to or inherited by any other [constructors](#constructor) that may be called with a single numeric argument.


# 23.1.2.2 Array.fromAsync ( _items_ \[, _mapper_ \[, _thisArg_ \] \] )

This async function performs the following steps when called:

1.  Let _C_ be the this value.
2.  Let _mapping_ be false.
3.  If _mapper_ is not undefined, then
    1.  If [IsCallable](#sec-iscallable)(_mapper_) is false, throw a TypeError exception.
    2.  Set _mapping_ to true.
4.  Let _iteratorRecord_ be undefined.
5.  Let _usingAsyncIterator_ be ? [GetMethod](#sec-getmethod)(_items_, [%Symbol.asyncIterator%](#sec-well-known-symbols)).
6.  If _usingAsyncIterator_ is undefined, then
    1.  Let _usingSyncIterator_ be ? [GetMethod](#sec-getmethod)(_items_, [%Symbol.iterator%](#sec-well-known-symbols)).
    2.  If _usingSyncIterator_ is not undefined, then
        1.  Set _iteratorRecord_ to [CreateAsyncFromSyncIterator](#sec-createasyncfromsynciterator)(? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_items_, _usingSyncIterator_)).
7.  Else,
    1.  Set _iteratorRecord_ to ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_items_, _usingAsyncIterator_).
8.  If _iteratorRecord_ is not undefined, then
    1.  If [IsConstructor](#sec-isconstructor)(_C_) is true, then
        1.  Let _A_ be ? [Construct](#sec-construct)(_C_).
    2.  Else,
        1.  Let _A_ be ! [ArrayCreate](#sec-arraycreate)(0).
    3.  Let _k_ be 0.
    4.  Repeat,
        1.  If _k_ ≥ 2<sup>53</sup> - 1, then
            1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
            2.  Return ? [AsyncIteratorClose](#sec-asynciteratorclose)(_iteratorRecord_, _error_).
        2.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
        3.  Let _nextResult_ be ? [Call](#sec-call)(_iteratorRecord_._\[\[NextMethod\]\]_, _iteratorRecord_._\[\[Iterator\]\]_).
        4.  Set _nextResult_ to ? [Await](#await)(_nextResult_).
        5.  If _nextResult_ [is not an Object](#sec-object-type), throw a TypeError exception.
        6.  Let _done_ be ? [IteratorComplete](#sec-iteratorcomplete)(_nextResult_).
        7.  If _done_ is true, then
            1.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", [𝔽](#𝔽)(_k_), true).
            2.  Return _A_.
        8.  Let _nextValue_ be ? [IteratorValue](#sec-iteratorvalue)(_nextResult_).
        9.  If _mapping_ is true, then
            1.  Let _mappedValue_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_mapper_, _thisArg_, « _nextValue_, [𝔽](#𝔽)(_k_) »)).
            2.  [IfAbruptCloseAsyncIterator](#sec-ifabruptcloseasynciterator)(_mappedValue_, _iteratorRecord_).
            3.  Set _mappedValue_ to [Completion](#sec-completion-ao)([Await](#await)(_mappedValue_)).
            4.  [IfAbruptCloseAsyncIterator](#sec-ifabruptcloseasynciterator)(_mappedValue_, _iteratorRecord_).
        10.  Else,
             1.  Let _mappedValue_ be _nextValue_.
        11.  Let _defineStatus_ be [Completion](#sec-completion-ao)([CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _mappedValue_)).
        12.  [IfAbruptCloseAsyncIterator](#sec-ifabruptcloseasynciterator)(_defineStatus_, _iteratorRecord_).
        13.  Set _k_ to _k_ + 1.
9.  Else,
    1.  NOTE: _items_ is neither [async iterable](#sec-asynciterable-interface) nor [iterable](#sec-iterable-interface) so assume it is an [array-like object](#sec-lengthofarraylike).
    2.  Let _arrayLike_ be ! [ToObject](#sec-toobject)(_items_).
    3.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_arrayLike_).
    4.  If [IsConstructor](#sec-isconstructor)(_C_) is true, then
        1.  Let _A_ be ? [Construct](#sec-construct)(_C_, « [𝔽](#𝔽)(_len_) »).
    5.  Else,
        1.  Let _A_ be ? [ArrayCreate](#sec-arraycreate)(_len_).
    6.  Let _k_ be 0.
    7.  Repeat, while _k_ < _len_,
        1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
        2.  Let _kValue_ be ? [Get](#sec-get-o-p)(_arrayLike_, _Pk_).
        3.  Set _kValue_ to ? [Await](#await)(_kValue_).
        4.  If _mapping_ is true, then
            1.  Let _mappedValue_ be ? [Call](#sec-call)(_mapper_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_) »).
            2.  Set _mappedValue_ to ? [Await](#await)(_mappedValue_).
        5.  Else,
            1.  Let _mappedValue_ be _kValue_.
        6.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _mappedValue_).
        7.  Set _k_ to _k_ + 1.
    8.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", [𝔽](#𝔽)(_len_), true).
    9.  Return _A_.

Note

This method is an intentionally generic factory method; it does not require that its this value be the Array [constructor](#constructor). Therefore it can be transferred to or inherited by any other [constructors](#constructor) that may be called with a single numeric argument.


# 23.1.2.3 Array.isArray ( _arg_ )

This function performs the following steps when called:

1.  Return ? [IsArray](#sec-isarray)(_arg_).


# 23.1.2.4 Array.of ( ..._items_ )

This method performs the following steps when called:

1.  Let _len_ be the number of elements in _items_.
2.  Let _lenNumber_ be [𝔽](#𝔽)(_len_).
3.  Let _C_ be the this value.
4.  If [IsConstructor](#sec-isconstructor)(_C_) is true, then
    1.  Let _A_ be ? [Construct](#sec-construct)(_C_, « _lenNumber_ »).
5.  Else,
    1.  Let _A_ be ? [ArrayCreate](#sec-arraycreate)(_len_).
6.  Let _k_ be 0.
7.  Repeat, while _k_ < _len_,
    1.  Let _kValue_ be _items_\[_k_\].
    2.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    3.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _kValue_).
    4.  Set _k_ to _k_ + 1.
8.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", _lenNumber_, true).
9.  Return _A_.

Note

This method is an intentionally generic factory method; it does not require that its this value be the Array [constructor](#constructor). Therefore it can be transferred to or inherited by other [constructors](#constructor) that may be called with a single numeric argument.


# 23.1.2.5 Array.prototype

The value of `Array.prototype` is the [Array prototype object](#sec-properties-of-the-array-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 23.1.2.6 get Array \[%Symbol.species% \]

`Array[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".

Note

Array prototype methods normally use their this value's [constructor](#constructor) to create a derived object. However, a subclass [constructor](#constructor) may over-ride that default behaviour by redefining its [%Symbol.species%](#sec-well-known-symbols) property.


# 23.1.3 Properties of the Array Prototype Object

The Array prototype object:

-   is %Array.prototype%.
-   is an [Array exotic object](#array-exotic-object) and has the internal methods specified for such objects.
-   has a "length" property whose initial value is +0<sub>𝔽</sub> and whose attributes are { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).

Note

The Array prototype object is specified to be an [Array exotic object](#array-exotic-object) to ensure compatibility with ECMAScript code that was created prior to the ECMAScript 2015 specification.


# 23.1.3.1 Array.prototype.at ( _index_ )

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _relativeIndex_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_index_).
4.  If _relativeIndex_ ≥ 0, then
    1.  Let _k_ be _relativeIndex_.
5.  Else,
    1.  Let _k_ be _len_ + _relativeIndex_.
6.  If _k_ < 0 or _k_ ≥ _len_, return undefined.
7.  Return ? [Get](#sec-get-o-p)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_))).


# 23.1.3.2 Array.prototype.concat ( ..._items_ )

This method returns an array containing the array elements of the object followed by the array elements of each argument.

It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _A_ be ? [ArraySpeciesCreate](#sec-arrayspeciescreate)(_O_, 0).
3.  Let _n_ be 0.
4.  Prepend _O_ to _items_.
5.  For each element _E_ of _items_, do
    1.  Let _spreadable_ be ? [IsConcatSpreadable](#sec-isconcatspreadable)(_E_).
    2.  If _spreadable_ is true, then
        1.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_E_).
        2.  If _n_ + _len_ > 2<sup>53</sup> - 1, throw a TypeError exception.
        3.  Let _k_ be 0.
        4.  Repeat, while _k_ < _len_,
            1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
            2.  Let _exists_ be ? [HasProperty](#sec-hasproperty)(_E_, _Pk_).
            3.  If _exists_ is true, then
                1.  Let _subElement_ be ? [Get](#sec-get-o-p)(_E_, _Pk_).
                2.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _subElement_).
            4.  Set _n_ to _n_ + 1.
            5.  Set _k_ to _k_ + 1.
    3.  Else,
        1.  NOTE: _E_ is added as a single item rather than spread.
        2.  If _n_ ≥ 2<sup>53</sup> - 1, throw a TypeError exception.
        3.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _E_).
        4.  Set _n_ to _n_ + 1.
6.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", [𝔽](#𝔽)(_n_), true).
7.  Return _A_.

The "length" property of this method is 1<sub>𝔽</sub>.

Note 1

The explicit setting of the "length" property in step [6](#step-array-proto-concat-set-length) is intended to ensure the length is correct when the final non-empty element of _items_ has trailing holes or when _A_ is not a built-in Array.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.2.1 IsConcatSpreadable ( _O_ )

The abstract operation IsConcatSpreadable takes argument _O_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Boolean or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _O_ [is not an Object](#sec-object-type), return false.
2.  Let _spreadable_ be ? [Get](#sec-get-o-p)(_O_, [%Symbol.isConcatSpreadable%](#sec-well-known-symbols)).
3.  If _spreadable_ is not undefined, return [ToBoolean](#sec-toboolean)(_spreadable_).
4.  Return ? [IsArray](#sec-isarray)(_O_).


# 23.1.3.3 Array.prototype.constructor

The initial value of `Array.prototype.constructor` is [%Array%](#sec-array-constructor).


# 23.1.3.4 Array.prototype.copyWithin ( _target_, _start_ \[, _end_ \] )

Note 1

The _end_ argument is optional. If it is not provided, the length of the this value is used.

Note 2

If _target_ is negative, it is treated as _length_ + _target_ where _length_ is the length of the array. If _start_ is negative, it is treated as _length_ + _start_. If _end_ is negative, it is treated as _length_ + _end_.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _relativeTarget_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_target_).
4.  If _relativeTarget_ = -∞, let _to_ be 0.
5.  Else if _relativeTarget_ < 0, let _to_ be [max](#eqn-max)(_len_ + _relativeTarget_, 0).
6.  Else, let _to_ be [min](#eqn-min)(_relativeTarget_, _len_).
7.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
8.  If _relativeStart_ = -∞, let _from_ be 0.
9.  Else if _relativeStart_ < 0, let _from_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
10.  Else, let _from_ be [min](#eqn-min)(_relativeStart_, _len_).
11.  If _end_ is undefined, let _relativeEnd_ be _len_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
12.  If _relativeEnd_ = -∞, let _final_ be 0.
13.  Else if _relativeEnd_ < 0, let _final_ be [max](#eqn-max)(_len_ + _relativeEnd_, 0).
14.  Else, let _final_ be [min](#eqn-min)(_relativeEnd_, _len_).
15.  Let _count_ be [min](#eqn-min)(_final_ - _from_, _len_ - _to_).
16.  If _from_ < _to_ and _to_ < _from_ + _count_, then
     1.  Let _direction_ be -1.
     2.  Set _from_ to _from_ + _count_ - 1.
     3.  Set _to_ to _to_ + _count_ - 1.
17.  Else,
     1.  Let _direction_ be 1.
18.  Repeat, while _count_ > 0,
     1.  Let _fromKey_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_from_)).
     2.  Let _toKey_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_to_)).
     3.  Let _fromPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _fromKey_).
     4.  If _fromPresent_ is true, then
         1.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _fromKey_).
         2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _toKey_, _fromValue_, true).
     5.  Else,
         1.  [Assert](#assert): _fromPresent_ is false.
         2.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _toKey_).
     6.  Set _from_ to _from_ + _direction_.
     7.  Set _to_ to _to_ + _direction_.
     8.  Set _count_ to _count_ - 1.
19.  Return _O_.

Note 3

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.5 Array.prototype.entries ( )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Return [CreateArrayIterator](#sec-createarrayiterator)(_O_, key+value).


# 23.1.3.6 Array.prototype.every ( _callback_ \[, _thisArg_ \] )

Note 1

_callback_ should be a function that accepts three arguments and returns a value that is coercible to a Boolean value. `every` calls _callback_ once for each element present in the array, in ascending order, until it finds one where _callback_ returns false. If such an element is found, `every` immediately returns false. Otherwise, `every` returns true. _callback_ is called only for elements of the array which actually exist; it is not called for missing elements of the array.

If a _thisArg_ parameter is provided, it will be used as the this value for each invocation of _callback_. If it is not provided, undefined is used instead.

_callback_ is called with three arguments: the value of the element, the index of the element, and the object being traversed.

`every` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

The range of elements processed by `every` is set before the first call to _callback_. Elements which are appended to the array after the call to `every` begins will not be visited by _callback_. If existing elements of the array are changed, their value as passed to _callback_ will be the value at the time `every` visits them; elements that are deleted after the call to `every` begins and before being visited are not visited. `every` acts like the "for all" quantifier in mathematics. In particular, for an empty array, it returns true.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  Let _k_ be 0.
5.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  Let _testResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »)).
        3.  If _testResult_ is false, return false.
    4.  Set _k_ to _k_ + 1.
6.  Return true.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.7 Array.prototype.fill ( _value_ \[, _start_ \[, _end_ \] \] )

Note 1

The _start_ argument is optional. If it is not provided, +0<sub>𝔽</sub> is used.

The _end_ argument is optional. If it is not provided, the length of the this value is used.

Note 2

If _start_ is negative, it is treated as _length_ + _start_ where _length_ is the length of the array. If _end_ is negative, it is treated as _length_ + _end_.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
4.  If _relativeStart_ = -∞, let _k_ be 0.
5.  Else if _relativeStart_ < 0, let _k_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
6.  Else, let _k_ be [min](#eqn-min)(_relativeStart_, _len_).
7.  If _end_ is undefined, let _relativeEnd_ be _len_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
8.  If _relativeEnd_ = -∞, let _final_ be 0.
9.  Else if _relativeEnd_ < 0, let _final_ be [max](#eqn-max)(_len_ + _relativeEnd_, 0).
10.  Else, let _final_ be [min](#eqn-min)(_relativeEnd_, _len_).
11.  Repeat, while _k_ < _final_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _Pk_, _value_, true).
     3.  Set _k_ to _k_ + 1.
12.  Return _O_.

Note 3

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.8 Array.prototype.filter ( _callback_ \[, _thisArg_ \] )

Note 1

_callback_ should be a function that accepts three arguments and returns a value that is coercible to a Boolean value. `filter` calls _callback_ once for each element in the array, in ascending order, and constructs a new array of all the values for which _callback_ returns true. _callback_ is called only for elements of the array which actually exist; it is not called for missing elements of the array.

If a _thisArg_ parameter is provided, it will be used as the this value for each invocation of _callback_. If it is not provided, undefined is used instead.

_callback_ is called with three arguments: the value of the element, the index of the element, and the object being traversed.

`filter` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

The range of elements processed by `filter` is set before the first call to _callback_. Elements which are appended to the array after the call to `filter` begins will not be visited by _callback_. If existing elements of the array are changed their value as passed to _callback_ will be the value at the time `filter` visits them; elements that are deleted after the call to `filter` begins and before being visited are not visited.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  Let _A_ be ? [ArraySpeciesCreate](#sec-arrayspeciescreate)(_O_, 0).
5.  Let _k_ be 0.
6.  Let _to_ be 0.
7.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  Let _selected_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »)).
        3.  If _selected_ is true, then
            1.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_to_)), _kValue_).
            2.  Set _to_ to _to_ + 1.
    4.  Set _k_ to _k_ + 1.
8.  Return _A_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.9 Array.prototype.find ( _predicate_ \[, _thisArg_ \] )

Note 1

This method calls _predicate_ once for each element of the array, in ascending index order, until it finds one where _predicate_ returns a value that coerces to true. If such an element is found, `find` immediately returns that element value. Otherwise, `find` returns undefined.

See [FindViaPredicate](#sec-findviapredicate) for additional information.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, ascending, _predicate_, _thisArg_).
4.  Return _findRec_._\[\[Value\]\]_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.10 Array.prototype.findIndex ( _predicate_ \[, _thisArg_ \] )

Note 1

This method calls _predicate_ once for each element of the array, in ascending index order, until it finds one where _predicate_ returns a value that coerces to true. If such an element is found, `findIndex` immediately returns the index of that element value. Otherwise, `findIndex` returns -1.

See [FindViaPredicate](#sec-findviapredicate) for additional information.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, ascending, _predicate_, _thisArg_).
4.  Return _findRec_._\[\[Index\]\]_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.11 Array.prototype.findLast ( _predicate_ \[, _thisArg_ \] )

Note 1

This method calls _predicate_ once for each element of the array, in descending index order, until it finds one where _predicate_ returns a value that coerces to true. If such an element is found, `findLast` immediately returns that element value. Otherwise, `findLast` returns undefined.

See [FindViaPredicate](#sec-findviapredicate) for additional information.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, descending, _predicate_, _thisArg_).
4.  Return _findRec_._\[\[Value\]\]_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array object. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.12 Array.prototype.findLastIndex ( _predicate_ \[, _thisArg_ \] )

Note 1

This method calls _predicate_ once for each element of the array, in descending index order, until it finds one where _predicate_ returns a value that coerces to true. If such an element is found, `findLastIndex` immediately returns the index of that element value. Otherwise, `findLastIndex` returns -1.

See [FindViaPredicate](#sec-findviapredicate) for additional information.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, descending, _predicate_, _thisArg_).
4.  Return _findRec_._\[\[Index\]\]_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array object. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.12.1 FindViaPredicate ( _O_, _len_, _direction_, _predicate_, _thisArg_ )

The abstract operation FindViaPredicate takes arguments _O_ (an Object), _len_ (a non-negative [integer](#integer)), _direction_ (ascending or descending), _predicate_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _thisArg_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Record](#sec-list-and-record-specification-type) with fields _\[\[Index\]\]_ (an [integral Number](#integral-number)) and _\[\[Value\]\]_ (an [ECMAScript language value](#sec-ecmascript-language-types)) or a [throw completion](#sec-completion-record-specification-type).

_O_ should be an [array-like object](#sec-lengthofarraylike) or a [TypedArray](#typedarray). This operation calls _predicate_ once for each element of _O_, in either ascending index order or descending index order (as indicated by _direction_), until it finds one where _predicate_ returns a value that coerces to true. At that point, this operation returns a [Record](#sec-list-and-record-specification-type) that gives the index and value of the element found. If no such element is found, this operation returns a [Record](#sec-list-and-record-specification-type) that specifies \-1<sub>𝔽</sub> for the index and undefined for the value.

_predicate_ should be a function. When called for an element of the array, it is passed three arguments: the value of the element, the index of the element, and the object being traversed. Its return value will be coerced to a Boolean value.

_thisArg_ will be used as the this value for each invocation of _predicate_.

This operation does not directly mutate the object on which it is called, but the object may be mutated by the calls to _predicate_.

The range of elements processed is set before the first call to _predicate_, just before the traversal begins. Elements that are appended to the array after this will not be visited by _predicate_. If existing elements of the array are changed, their value as passed to _predicate_ will be the value at the time that this operation visits them. Elements that are deleted after traversal begins and before being visited are still visited and are either looked up from the prototype or are undefined.

It performs the following steps when called:

1.  If [IsCallable](#sec-iscallable)(_predicate_) is false, throw a TypeError exception.
2.  If _direction_ is ascending, then
    1.  Let _indices_ be a [List](#sec-list-and-record-specification-type) of the [integers](#integer) in the [interval](#interval) from 0 (inclusive) to _len_ (exclusive), in ascending order.
3.  Else,
    1.  Let _indices_ be a [List](#sec-list-and-record-specification-type) of the [integers](#integer) in the [interval](#interval) from 0 (inclusive) to _len_ (exclusive), in descending order.
4.  For each [integer](#integer) _k_ of _indices_, do
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  NOTE: If _O_ is a [TypedArray](#typedarray), the following invocation of [Get](#sec-get-o-p) will return a [normal completion](#sec-completion-record-specification-type).
    3.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
    4.  Let _testResult_ be ? [Call](#sec-call)(_predicate_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
    5.  If [ToBoolean](#sec-toboolean)(_testResult_) is true, return the [Record](#sec-list-and-record-specification-type) { _\[\[Index\]\]_: [𝔽](#𝔽)(_k_), _\[\[Value\]\]_: _kValue_ }.
5.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Index\]\]_: \-1<sub>𝔽</sub>, _\[\[Value\]\]_: undefined }.


# 23.1.3.13 Array.prototype.flat ( \[_depth_ \] )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _sourceLen_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _depthNum_ be 1.
4.  If _depth_ is not undefined, then
    1.  Set _depthNum_ to ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_depth_).
    2.  If _depthNum_ < 0, set _depthNum_ to 0.
5.  Let _A_ be ? [ArraySpeciesCreate](#sec-arrayspeciescreate)(_O_, 0).
6.  Perform ? [FlattenIntoArray](#sec-flattenintoarray)(_A_, _O_, _sourceLen_, 0, _depthNum_).
7.  Return _A_.


# 23.1.3.13.1 FlattenIntoArray ( _target_, _source_, _sourceLen_, _start_, _depth_ \[, _mapperFunction_ \[, _thisArg_ \] \] )

The abstract operation FlattenIntoArray takes arguments _target_ (an Object), _source_ (an Object), _sourceLen_ (a non-negative [integer](#integer)), _start_ (a non-negative [integer](#integer)), and _depth_ (a non-negative [integer](#integer) or +∞) and optional arguments _mapperFunction_ (a [function object](#function-object)) and _thisArg_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a non-negative [integer](#integer) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): If _mapperFunction_ is present, then [IsCallable](#sec-iscallable)(_mapperFunction_) is true, _thisArg_ is present, and _depth_ is 1.
2.  Let _targetIndex_ be _start_.
3.  Let _sourceIndex_ be +0<sub>𝔽</sub>.
4.  Repeat, while [ℝ](#ℝ)(_sourceIndex_) < _sourceLen_,
    1.  Let _P_ be ! [ToString](#sec-tostring)(_sourceIndex_).
    2.  Let _exists_ be ? [HasProperty](#sec-hasproperty)(_source_, _P_).
    3.  If _exists_ is true, then
        1.  Let _element_ be ? [Get](#sec-get-o-p)(_source_, _P_).
        2.  If _mapperFunction_ is present, then
            1.  Set _element_ to ? [Call](#sec-call)(_mapperFunction_, _thisArg_, « _element_, _sourceIndex_, _source_ »).
        3.  Let _shouldFlatten_ be false.
        4.  If _depth_ > 0, then
            1.  Set _shouldFlatten_ to ? [IsArray](#sec-isarray)(_element_).
        5.  If _shouldFlatten_ is true, then
            1.  If _depth_ = +∞, let _newDepth_ be +∞.
            2.  Else, let _newDepth_ be _depth_ - 1.
            3.  Let _elementLen_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_element_).
            4.  Set _targetIndex_ to ? [FlattenIntoArray](#sec-flattenintoarray)(_target_, _element_, _elementLen_, _targetIndex_, _newDepth_).
        6.  Else,
            1.  If _targetIndex_ ≥ 2<sup>53</sup> - 1, throw a TypeError exception.
            2.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_target_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_targetIndex_)), _element_).
            3.  Set _targetIndex_ to _targetIndex_ + 1.
    4.  Set _sourceIndex_ to _sourceIndex_ + 1<sub>𝔽</sub>.
5.  Return _targetIndex_.


# 23.1.3.14 Array.prototype.flatMap ( _mapperFunction_ \[, _thisArg_ \] )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _sourceLen_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_mapperFunction_) is false, throw a TypeError exception.
4.  Let _A_ be ? [ArraySpeciesCreate](#sec-arrayspeciescreate)(_O_, 0).
5.  Perform ? [FlattenIntoArray](#sec-flattenintoarray)(_A_, _O_, _sourceLen_, 0, 1, _mapperFunction_, _thisArg_).
6.  Return _A_.


# 23.1.3.15 Array.prototype.forEach ( _callback_ \[, _thisArg_ \] )

Note 1

_callback_ should be a function that accepts three arguments. `forEach` calls _callback_ once for each element present in the array, in ascending order. _callback_ is called only for elements of the array which actually exist; it is not called for missing elements of the array.

If a _thisArg_ parameter is provided, it will be used as the this value for each invocation of _callback_. If it is not provided, undefined is used instead.

_callback_ is called with three arguments: the value of the element, the index of the element, and the object being traversed.

`forEach` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

The range of elements processed by `forEach` is set before the first call to _callback_. Elements which are appended to the array after the call to `forEach` begins will not be visited by _callback_. If existing elements of the array are changed, their value as passed to _callback_ will be the value at the time `forEach` visits them; elements that are deleted after the call to `forEach` begins and before being visited are not visited.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  Let _k_ be 0.
5.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  Perform ? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
    4.  Set _k_ to _k_ + 1.
6.  Return undefined.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.16 Array.prototype.includes ( _searchElement_ \[, _fromIndex_ \] )

Note 1

This method compares _searchElement_ to the elements of the array, in ascending order, using the [SameValueZero](#sec-samevaluezero) algorithm, and if found at any position, returns true; otherwise, it returns false.

The optional second argument _fromIndex_ defaults to +0<sub>𝔽</sub> (i.e. the whole array is searched). If it is greater than or equal to the length of the array, false is returned, i.e. the array will not be searched. If it is less than \-0<sub>𝔽</sub>, it is used as the offset from the end of the array to compute _fromIndex_. If the computed index is less than or equal to +0<sub>𝔽</sub>, the whole array will be searched.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If _len_ = 0, return false.
4.  Let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fromIndex_).
5.  [Assert](#assert): If _fromIndex_ is undefined, then _n_ is 0.
6.  If _n_ = +∞, return false.
7.  Else if _n_ = -∞, set _n_ to 0.
8.  If _n_ ≥ 0, then
    1.  Let _k_ be _n_.
9.  Else,
    1.  Let _k_ be _len_ + _n_.
    2.  If _k_ < 0, set _k_ to 0.
10.  Repeat, while _k_ < _len_,
     1.  Let _elementK_ be ? [Get](#sec-get-o-p)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_))).
     2.  If [SameValueZero](#sec-samevaluezero)(_searchElement_, _elementK_) is true, return true.
     3.  Set _k_ to _k_ + 1.
11.  Return false.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.

Note 3

This method intentionally differs from the similar `indexOf` method in two ways. First, it uses the [SameValueZero](#sec-samevaluezero) algorithm, instead of [IsStrictlyEqual](#sec-isstrictlyequal), allowing it to detect NaN array elements. Second, it does not skip missing array elements, instead treating them as undefined.


# 23.1.3.17 Array.prototype.indexOf ( _searchElement_ \[, _fromIndex_ \] )

This method compares _searchElement_ to the elements of the array, in ascending order, using the [IsStrictlyEqual](#sec-isstrictlyequal) algorithm, and if found at one or more indices, returns the smallest such index; otherwise, it returns \-1<sub>𝔽</sub>.

Note 1

The optional second argument _fromIndex_ defaults to +0<sub>𝔽</sub> (i.e. the whole array is searched). If it is greater than or equal to the length of the array, \-1<sub>𝔽</sub> is returned, i.e. the array will not be searched. If it is less than \-0<sub>𝔽</sub>, it is used as the offset from the end of the array to compute _fromIndex_. If the computed index is less than or equal to +0<sub>𝔽</sub>, the whole array will be searched.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If _len_ = 0, return \-1<sub>𝔽</sub>.
4.  Let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fromIndex_).
5.  [Assert](#assert): If _fromIndex_ is undefined, then _n_ is 0.
6.  If _n_ = +∞, return \-1<sub>𝔽</sub>.
7.  Else if _n_ = -∞, set _n_ to 0.
8.  If _n_ ≥ 0, then
    1.  Let _k_ be _n_.
9.  Else,
    1.  Let _k_ be _len_ + _n_.
    2.  If _k_ < 0, set _k_ to 0.
10.  Repeat, while _k_ < _len_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
     3.  If _kPresent_ is true, then
         1.  Let _elementK_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
         2.  If [IsStrictlyEqual](#sec-isstrictlyequal)(_searchElement_, _elementK_) is true, return [𝔽](#𝔽)(_k_).
     4.  Set _k_ to _k_ + 1.
11.  Return \-1<sub>𝔽</sub>.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.18 Array.prototype.join ( _separator_ )

This method converts the elements of the array to Strings, and then concatenates these Strings, separated by occurrences of the _separator_. If no separator is provided, a single comma is used as the separator.

It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If _separator_ is undefined, let _sep_ be ",".
4.  Else, let _sep_ be ? [ToString](#sec-tostring)(_separator_).
5.  Let _R_ be the empty String.
6.  Let _k_ be 0.
7.  Repeat, while _k_ < _len_,
    1.  If _k_ > 0, set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _sep_.
    2.  Let _element_ be ? [Get](#sec-get-o-p)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_))).
    3.  If _element_ is neither undefined nor null, then
        1.  Let _S_ be ? [ToString](#sec-tostring)(_element_).
        2.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _S_.
    4.  Set _k_ to _k_ + 1.
8.  Return _R_.

Note

This method is intentionally generic; it does not require that its this value be an Array. Therefore, it can be transferred to other kinds of objects for use as a method.


# 23.1.3.19 Array.prototype.keys ( )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Return [CreateArrayIterator](#sec-createarrayiterator)(_O_, key).


# 23.1.3.20 Array.prototype.lastIndexOf ( _searchElement_ \[, _fromIndex_ \] )

Note 1

This method compares _searchElement_ to the elements of the array in descending order using the [IsStrictlyEqual](#sec-isstrictlyequal) algorithm, and if found at one or more indices, returns the largest such index; otherwise, it returns \-1<sub>𝔽</sub>.

The optional second argument _fromIndex_ defaults to the array's length minus one (i.e. the whole array is searched). If it is greater than or equal to the length of the array, the whole array will be searched. If it is less than \-0<sub>𝔽</sub>, it is used as the offset from the end of the array to compute _fromIndex_. If the computed index is less than or equal to +0<sub>𝔽</sub>, \-1<sub>𝔽</sub> is returned.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If _len_ = 0, return \-1<sub>𝔽</sub>.
4.  If _fromIndex_ is present, let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fromIndex_); else let _n_ be _len_ - 1.
5.  If _n_ = -∞, return \-1<sub>𝔽</sub>.
6.  If _n_ ≥ 0, then
    1.  Let _k_ be [min](#eqn-min)(_n_, _len_ - 1).
7.  Else,
    1.  Let _k_ be _len_ + _n_.
8.  Repeat, while _k_ ≥ 0,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _elementK_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  If [IsStrictlyEqual](#sec-isstrictlyequal)(_searchElement_, _elementK_) is true, return [𝔽](#𝔽)(_k_).
    4.  Set _k_ to _k_ - 1.
9.  Return \-1<sub>𝔽</sub>.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.21 Array.prototype.map ( _callback_ \[, _thisArg_ \] )

Note 1

_callback_ should be a function that accepts three arguments. `map` calls _callback_ once for each element in the array, in ascending order, and constructs a new Array from the results. _callback_ is called only for elements of the array which actually exist; it is not called for missing elements of the array.

If a _thisArg_ parameter is provided, it will be used as the this value for each invocation of _callback_. If it is not provided, undefined is used instead.

_callback_ is called with three arguments: the value of the element, the index of the element, and the object being traversed.

`map` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

The range of elements processed by `map` is set before the first call to _callback_. Elements which are appended to the array after the call to `map` begins will not be visited by _callback_. If existing elements of the array are changed, their value as passed to _callback_ will be the value at the time `map` visits them; elements that are deleted after the call to `map` begins and before being visited are not visited.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  Let _A_ be ? [ArraySpeciesCreate](#sec-arrayspeciescreate)(_O_, _len_).
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  Let _mappedValue_ be ? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
        3.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _mappedValue_).
    4.  Set _k_ to _k_ + 1.
7.  Return _A_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.22 Array.prototype.pop ( )

Note 1

This method removes the last element of the array and returns it.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If _len_ = 0, then
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, "length", +0<sub>𝔽</sub>, true).
    2.  Return undefined.
4.  Else,
    1.  [Assert](#assert): _len_ > 0.
    2.  Let _newLen_ be [𝔽](#𝔽)(_len_ - 1).
    3.  Let _index_ be ! [ToString](#sec-tostring)(_newLen_).
    4.  Let _element_ be ? [Get](#sec-get-o-p)(_O_, _index_).
    5.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _index_).
    6.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, "length", _newLen_, true).
    7.  Return _element_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.23 Array.prototype.push ( ..._items_ )

Note 1

This method appends the arguments to the end of the array, in the order in which they appear. It returns the new length of the array.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _argCount_ be the number of elements in _items_.
4.  If _len_ + _argCount_ > 2<sup>53</sup> - 1, throw a TypeError exception.
5.  For each element _E_ of _items_, do
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_len_)), _E_, true).
    2.  Set _len_ to _len_ + 1.
6.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, "length", [𝔽](#𝔽)(_len_), true).
7.  Return [𝔽](#𝔽)(_len_).

The "length" property of this method is 1<sub>𝔽</sub>.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.24 Array.prototype.reduce ( _callback_ \[, _initialValue_ \] )

Note 1

_callback_ should be a function that takes four arguments. `reduce` calls the callback, as a function, once for each element after the first element present in the array, in ascending order.

_callback_ is called with four arguments: the _previousValue_ (value from the previous call to _callback_), the _currentValue_ (value of the current element), the _currentIndex_, and the object being traversed. The first time that callback is called, the _previousValue_ and _currentValue_ can be one of two values. If an _initialValue_ was supplied in the call to `reduce`, then _previousValue_ will be _initialValue_ and _currentValue_ will be the first value in the array. If no _initialValue_ was supplied, then _previousValue_ will be the first value in the array and _currentValue_ will be the second. It is a TypeError if the array contains no elements and _initialValue_ is not provided.

`reduce` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

The range of elements processed by `reduce` is set before the first call to _callback_. Elements that are appended to the array after the call to `reduce` begins will not be visited by _callback_. If existing elements of the array are changed, their value as passed to _callback_ will be the value at the time `reduce` visits them; elements that are deleted after the call to `reduce` begins and before being visited are not visited.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  If _len_ = 0 and _initialValue_ is not present, throw a TypeError exception.
5.  Let _k_ be 0.
6.  Let _accumulator_ be undefined.
7.  If _initialValue_ is present, then
    1.  Set _accumulator_ to _initialValue_.
8.  Else,
    1.  Let _kPresent_ be false.
    2.  Repeat, while _kPresent_ is false and _k_ < _len_,
        1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
        2.  Set _kPresent_ to ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
        3.  If _kPresent_ is true, then
            1.  Set _accumulator_ to ? [Get](#sec-get-o-p)(_O_, _Pk_).
        4.  Set _k_ to _k_ + 1.
    3.  If _kPresent_ is false, throw a TypeError exception.
9.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  Set _accumulator_ to ? [Call](#sec-call)(_callback_, undefined, « _accumulator_, _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
    4.  Set _k_ to _k_ + 1.
10.  Return _accumulator_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.25 Array.prototype.reduceRight ( _callback_ \[, _initialValue_ \] )

Note 1

_callback_ should be a function that takes four arguments. `reduceRight` calls the callback, as a function, once for each element after the first element present in the array, in descending order.

_callback_ is called with four arguments: the _previousValue_ (value from the previous call to _callback_), the _currentValue_ (value of the current element), the _currentIndex_, and the object being traversed. The first time the function is called, the _previousValue_ and _currentValue_ can be one of two values. If an _initialValue_ was supplied in the call to `reduceRight`, then _previousValue_ will be _initialValue_ and _currentValue_ will be the last value in the array. If no _initialValue_ was supplied, then _previousValue_ will be the last value in the array and _currentValue_ will be the second-to-last value. It is a TypeError if the array contains no elements and _initialValue_ is not provided.

`reduceRight` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

The range of elements processed by `reduceRight` is set before the first call to _callback_. Elements that are appended to the array after the call to `reduceRight` begins will not be visited by _callback_. If existing elements of the array are changed by _callback_, their value as passed to _callback_ will be the value at the time `reduceRight` visits them; elements that are deleted after the call to `reduceRight` begins and before being visited are not visited.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  If _len_ = 0 and _initialValue_ is not present, throw a TypeError exception.
5.  Let _k_ be _len_ - 1.
6.  Let _accumulator_ be undefined.
7.  If _initialValue_ is present, then
    1.  Set _accumulator_ to _initialValue_.
8.  Else,
    1.  Let _kPresent_ be false.
    2.  Repeat, while _kPresent_ is false and _k_ ≥ 0,
        1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
        2.  Set _kPresent_ to ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
        3.  If _kPresent_ is true, then
            1.  Set _accumulator_ to ? [Get](#sec-get-o-p)(_O_, _Pk_).
        4.  Set _k_ to _k_ - 1.
    3.  If _kPresent_ is false, throw a TypeError exception.
9.  Repeat, while _k_ ≥ 0,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  Set _accumulator_ to ? [Call](#sec-call)(_callback_, undefined, « _accumulator_, _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
    4.  Set _k_ to _k_ - 1.
10.  Return _accumulator_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.26 Array.prototype.reverse ( )

Note 1

This method rearranges the elements of the array so as to reverse their order. It returns the reversed array.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _middle_ be [floor](#eqn-floor)(_len_ / 2).
4.  Let _lower_ be 0.
5.  Repeat, while _lower_ ≠ _middle_,
    1.  Let _upper_ be _len_ - _lower_ - 1.
    2.  Let _upperP_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_upper_)).
    3.  Let _lowerP_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_lower_)).
    4.  Let _lowerExists_ be ? [HasProperty](#sec-hasproperty)(_O_, _lowerP_).
    5.  If _lowerExists_ is true, then
        1.  Let _lowerValue_ be ? [Get](#sec-get-o-p)(_O_, _lowerP_).
    6.  Let _upperExists_ be ? [HasProperty](#sec-hasproperty)(_O_, _upperP_).
    7.  If _upperExists_ is true, then
        1.  Let _upperValue_ be ? [Get](#sec-get-o-p)(_O_, _upperP_).
    8.  If _lowerExists_ is true and _upperExists_ is true, then
        1.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _lowerP_, _upperValue_, true).
        2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _upperP_, _lowerValue_, true).
    9.  Else if _lowerExists_ is false and _upperExists_ is true, then
        1.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _lowerP_, _upperValue_, true).
        2.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _upperP_).
    10.  Else if _lowerExists_ is true and _upperExists_ is false, then
         1.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _lowerP_).
         2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _upperP_, _lowerValue_, true).
    11.  Else,
         1.  [Assert](#assert): _lowerExists_ and _upperExists_ are both false.
         2.  NOTE: No action is required.
    12.  Set _lower_ to _lower_ + 1.
6.  Return _O_.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore, it can be transferred to other kinds of objects for use as a method.


# 23.1.3.27 Array.prototype.shift ( )

This method removes the first element of the array and returns it.

It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If _len_ = 0, then
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, "length", +0<sub>𝔽</sub>, true).
    2.  Return undefined.
4.  Let _first_ be ? [Get](#sec-get-o-p)(_O_, "0").
5.  Let _k_ be 1.
6.  Repeat, while _k_ < _len_,
    1.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _to_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ - 1)).
    3.  Let _fromPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _from_).
    4.  If _fromPresent_ is true, then
        1.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _from_).
        2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _to_, _fromValue_, true).
    5.  Else,
        1.  [Assert](#assert): _fromPresent_ is false.
        2.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _to_).
    6.  Set _k_ to _k_ + 1.
7.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_len_ - 1))).
8.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, "length", [𝔽](#𝔽)(_len_ - 1), true).
9.  Return _first_.

Note

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.28 Array.prototype.slice ( _start_, _end_ )

This method returns an array containing the elements of the array from element _start_ up to, but not including, element _end_ (or through the end of the array if _end_ is undefined). If _start_ is negative, it is treated as _length_ + _start_ where _length_ is the length of the array. If _end_ is negative, it is treated as _length_ + _end_ where _length_ is the length of the array.

It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
4.  If _relativeStart_ = -∞, let _k_ be 0.
5.  Else if _relativeStart_ < 0, let _k_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
6.  Else, let _k_ be [min](#eqn-min)(_relativeStart_, _len_).
7.  If _end_ is undefined, let _relativeEnd_ be _len_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
8.  If _relativeEnd_ = -∞, let _final_ be 0.
9.  Else if _relativeEnd_ < 0, let _final_ be [max](#eqn-max)(_len_ + _relativeEnd_, 0).
10.  Else, let _final_ be [min](#eqn-min)(_relativeEnd_, _len_).
11.  Let _count_ be [max](#eqn-max)(_final_ - _k_, 0).
12.  Let _A_ be ? [ArraySpeciesCreate](#sec-arrayspeciescreate)(_O_, _count_).
13.  Let _n_ be 0.
14.  Repeat, while _k_ < _final_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
     3.  If _kPresent_ is true, then
         1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
         2.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _kValue_).
     4.  Set _k_ to _k_ + 1.
     5.  Set _n_ to _n_ + 1.
15.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", [𝔽](#𝔽)(_n_), true).
16.  Return _A_.

Note 1

The explicit setting of the "length" property in step [15](#step-array-proto-slice-set-length) is intended to ensure the length is correct even when _A_ is not a built-in Array.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.29 Array.prototype.some ( _callback_ \[, _thisArg_ \] )

Note 1

_callback_ should be a function that accepts three arguments and returns a value that is coercible to a Boolean value. `some` calls _callback_ once for each element present in the array, in ascending order, until it finds one where _callback_ returns true. If such an element is found, `some` immediately returns true. Otherwise, `some` returns false. _callback_ is called only for elements of the array which actually exist; it is not called for missing elements of the array.

If a _thisArg_ parameter is provided, it will be used as the this value for each invocation of _callback_. If it is not provided, undefined is used instead.

_callback_ is called with three arguments: the value of the element, the index of the element, and the object being traversed.

`some` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

The range of elements processed by `some` is set before the first call to _callback_. Elements that are appended to the array after the call to `some` begins will not be visited by _callback_. If existing elements of the array are changed, their value as passed to _callback_ will be the value at the time that `some` visits them; elements that are deleted after the call to `some` begins and before being visited are not visited. `some` acts like the "exists" quantifier in mathematics. In particular, for an empty array, it returns false.

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  Let _k_ be 0.
5.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  Let _testResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »)).
        3.  If _testResult_ is true, return true.
    4.  Set _k_ to _k_ + 1.
6.  Return false.

Note 2

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.30 Array.prototype.sort ( _comparator_ )

This method sorts the elements of this array. If _comparator_ is not undefined, it should be a function that accepts two arguments _x_ and _y_ and returns a negative Number if _x_ < _y_, a positive Number if _x_ > _y_, or a zero otherwise.

It performs the following steps when called:

1.  If _comparator_ is not undefined and [IsCallable](#sec-iscallable)(_comparator_) is false, throw a TypeError exception.
2.  Let _obj_ be ? [ToObject](#sec-toobject)(this value).
3.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_obj_).
4.  Let _SortCompare_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_x_, _y_) that captures _comparator_ and performs the following steps when called:
    1.  Return ? [CompareArrayElements](#sec-comparearrayelements)(_x_, _y_, _comparator_).
5.  Let _sortedList_ be ? [SortIndexedProperties](#sec-sortindexedproperties)(_obj_, _len_, _SortCompare_, skip-holes).
6.  Let _itemCount_ be the number of elements in _sortedList_.
7.  Let _j_ be 0.
8.  Repeat, while _j_ < _itemCount_,
    1.  Perform ? [Set](#sec-set-o-p-v-throw)(_obj_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_j_)), _sortedList_\[_j_\], true).
    2.  Set _j_ to _j_ + 1.
9.  NOTE: The call to [SortIndexedProperties](#sec-sortindexedproperties) in step [5](#step-array-sortindexedproperties) uses skip-holes. The remaining indices are deleted to preserve the number of holes that were detected and excluded from the sort.
10.  Repeat, while _j_ < _len_,
     1.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_obj_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_j_))).
     2.  Set _j_ to _j_ + 1.
11.  Return _obj_.

Note 1

Because non-existent property values always compare greater than undefined property values, and undefined always compares greater than any other value (see [CompareArrayElements](#sec-comparearrayelements)), undefined property values always sort to the end of the result, followed by non-existent property values.

Note 2

Method calls performed by the [ToString](#sec-tostring) [abstract operations](#sec-algorithm-conventions-abstract-operations) in steps [5](#step-sortcompare-tostring-x) and [6](#step-sortcompare-tostring-y) have the potential to cause _SortCompare_ to not behave as a [consistent comparator](#consistent-comparator).

Note 3

This method is intentionally generic; it does not require that its this value be an Array. Therefore, it can be transferred to other kinds of objects for use as a method.


# 23.1.3.30.1 SortIndexedProperties ( _obj_, _len_, _SortCompare_, _holes_ )

The abstract operation SortIndexedProperties takes arguments _obj_ (an Object), _len_ (a non-negative [integer](#integer)), _SortCompare_ (an [Abstract Closure](#sec-abstract-closure) with two parameters), and _holes_ (skip-holes or read-through-holes) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _items_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Let _k_ be 0.
3.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  If _holes_ is skip-holes, then
        1.  Let _kRead_ be ? [HasProperty](#sec-hasproperty)(_obj_, _Pk_).
    3.  Else,
        1.  [Assert](#assert): _holes_ is read-through-holes.
        2.  Let _kRead_ be true.
    4.  If _kRead_ is true, then
        1.  Let _kValue_ be ? [Get](#sec-get-o-p)(_obj_, _Pk_).
        2.  Append _kValue_ to _items_.
    5.  Set _k_ to _k_ + 1.
4.  Sort _items_ using an [implementation-defined](#implementation-defined) sequence of calls to _SortCompare_. If any such call returns an [abrupt completion](#sec-completion-record-specification-type), stop before performing any further calls to _SortCompare_ and return that [Completion Record](#sec-completion-record-specification-type).
5.  Return _items_.

The sort order is the ordering of _items_ after completion of step [4](#step-array-sort) of the algorithm above. The [sort order](#sort-order) is [implementation-defined](#implementation-defined) if _SortCompare_ is not a [consistent comparator](#consistent-comparator) for the elements of _items_. When SortIndexedProperties is invoked by [Array.prototype.sort](#sec-array.prototype.sort) or [Array.prototype.toSorted](#sec-array.prototype.tosorted), the [sort order](#sort-order) is also [implementation-defined](#implementation-defined) if _comparator_ is undefined, and all applications of [ToString](#sec-tostring), to any specific value passed as an argument to _SortCompare_, do not produce the same result.

Unless the [sort order](#sort-order) is specified to be [implementation-defined](#implementation-defined), it must satisfy all of the following conditions:

-   There must be some mathematical permutation π of the non-negative [integers](#integer) less than _itemCount_, such that for every non-negative [integer](#integer) _j_ less than _itemCount_, the element old\[_j_\] is exactly the same as new\[π(_j_)\].
-   Then for all non-negative [integers](#integer) _j_ and _k_, each less than _itemCount_, if [ℝ](#ℝ)(_SortCompare_(old\[_j_\], old\[_k_\])) < 0, then π(_j_) < π(_k_).
-   And for all non-negative [integers](#integer) _j_ and _k_ such that _j_ < _k_ < _itemCount_, if [ℝ](#ℝ)(_SortCompare_(old\[_j_\], old\[_k_\])) = 0, then π(_j_) < π(_k_); i.e., the sort is stable.

Here the notation old\[_j_\] is used to refer to _items_\[_j_\] before step [4](#step-array-sort) is executed, and the notation new\[_j_\] to refer to _items_\[_j_\] after step [4](#step-array-sort) has been executed.

An abstract closure or function _comparator_ is a consistent comparator for a set of values _S_ if all of the requirements below are met for all values _a_, _b_, and _c_ (possibly the same value) in the set _S_: The notation _a_ <<sub>C</sub> _b_ means [ℝ](#ℝ)(_comparator_(_a_, _b_)) < 0; _a_ =<sub>C</sub> _b_ means [ℝ](#ℝ)(_comparator_(_a_, _b_)) = 0; and _a_ ><sub>C</sub> _b_ means [ℝ](#ℝ)(_comparator_(_a_, _b_)) > 0.

-   Calling _comparator_(_a_, _b_) always returns the same value _v_ when given a specific pair of values _a_ and _b_ as its two arguments. Furthermore, _v_ [is a Number](#sec-ecmascript-language-types-number-type), and _v_ is not NaN. Note that this implies that exactly one of _a_ <<sub>C</sub> _b_, _a_ =<sub>C</sub> _b_, and _a_ ><sub>C</sub> _b_ will be true for a given pair of _a_ and _b_.
-   Calling _comparator_(_a_, _b_) does not modify _obj_ or any object on _obj_'s prototype chain.
-   _a_ =<sub>C</sub> _a_ (reflexivity)
-   If _a_ =<sub>C</sub> _b_, then _b_ =<sub>C</sub> _a_ (symmetry)
-   If _a_ =<sub>C</sub> _b_ and _b_ =<sub>C</sub> _c_, then _a_ =<sub>C</sub> _c_ (transitivity of =<sub>C</sub>)
-   If _a_ <<sub>C</sub> _b_ and _b_ <<sub>C</sub> _c_, then _a_ <<sub>C</sub> _c_ (transitivity of <<sub>C</sub>)
-   If _a_ ><sub>C</sub> _b_ and _b_ ><sub>C</sub> _c_, then _a_ ><sub>C</sub> _c_ (transitivity of ><sub>C</sub>)

Note

The above conditions are necessary and sufficient to ensure that _comparator_ divides the set _S_ into equivalence classes and that these equivalence classes are totally ordered.


# 23.1.3.30.2 CompareArrayElements ( _x_, _y_, _comparator_ )

The abstract operation CompareArrayElements takes arguments _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _y_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _comparator_ (a [function object](#function-object) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Number or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _x_ and _y_ are both undefined, return +0<sub>𝔽</sub>.
2.  If _x_ is undefined, return 1<sub>𝔽</sub>.
3.  If _y_ is undefined, return \-1<sub>𝔽</sub>.
4.  If _comparator_ is not undefined, then
    1.  Let _v_ be ? [ToNumber](#sec-tonumber)(? [Call](#sec-call)(_comparator_, undefined, « _x_, _y_ »)).
    2.  If _v_ is NaN, return +0<sub>𝔽</sub>.
    3.  Return _v_.
5.  Let _xString_ be ? [ToString](#sec-tostring)(_x_).
6.  Let _yString_ be ? [ToString](#sec-tostring)(_y_).
7.  Let _xSmaller_ be ! [IsLessThan](#sec-islessthan)(_xString_, _yString_, true).
8.  If _xSmaller_ is true, return \-1<sub>𝔽</sub>.
9.  Let _ySmaller_ be ! [IsLessThan](#sec-islessthan)(_yString_, _xString_, true).
10.  If _ySmaller_ is true, return 1<sub>𝔽</sub>.
11.  Return +0<sub>𝔽</sub>.


# 23.1.3.31 Array.prototype.splice ( _start_, _deleteCount_, ..._items_ )

Note 1

This method deletes the _deleteCount_ elements of the array starting at [integer index](#integer-index) _start_ and replaces them with the elements of _items_. It returns an Array containing the deleted elements (if any).

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
4.  If _relativeStart_ = -∞, let _actualStart_ be 0.
5.  Else if _relativeStart_ < 0, let _actualStart_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
6.  Else, let _actualStart_ be [min](#eqn-min)(_relativeStart_, _len_).
7.  Let _itemCount_ be the number of elements in _items_.
8.  If _start_ is not present, then
    1.  Let _actualDeleteCount_ be 0.
9.  Else if _deleteCount_ is not present, then
    1.  Let _actualDeleteCount_ be _len_ - _actualStart_.
10.  Else,
     1.  Let _dc_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_deleteCount_).
     2.  Let _actualDeleteCount_ be the result of [clamping](#clamping) _dc_ between 0 and _len_ - _actualStart_.
11.  If _len_ + _itemCount_ - _actualDeleteCount_ > 2<sup>53</sup> - 1, throw a TypeError exception.
12.  Let _A_ be ? [ArraySpeciesCreate](#sec-arrayspeciescreate)(_O_, _actualDeleteCount_).
13.  Let _k_ be 0.
14.  Repeat, while _k_ < _actualDeleteCount_,
     1.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_actualStart_ + _k_)).
     2.  If ? [HasProperty](#sec-hasproperty)(_O_, _from_) is true, then
         1.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _from_).
         2.  Perform ? [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)), _fromValue_).
     3.  Set _k_ to _k_ + 1.
15.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, "length", [𝔽](#𝔽)(_actualDeleteCount_), true).
16.  If _itemCount_ < _actualDeleteCount_, then
     1.  Set _k_ to _actualStart_.
     2.  Repeat, while _k_ < (_len_ - _actualDeleteCount_),
         1.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ + _actualDeleteCount_)).
         2.  Let _to_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ + _itemCount_)).
         3.  If ? [HasProperty](#sec-hasproperty)(_O_, _from_) is true, then
             1.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _from_).
             2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _to_, _fromValue_, true).
         4.  Else,
             1.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _to_).
         5.  Set _k_ to _k_ + 1.
     3.  Set _k_ to _len_.
     4.  Repeat, while _k_ > (_len_ - _actualDeleteCount_ + _itemCount_),
         1.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ - 1))).
         2.  Set _k_ to _k_ - 1.
17.  Else if _itemCount_ > _actualDeleteCount_, then
     1.  Set _k_ to (_len_ - _actualDeleteCount_).
     2.  Repeat, while _k_ > _actualStart_,
         1.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ + _actualDeleteCount_ - 1)).
         2.  Let _to_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ + _itemCount_ - 1)).
         3.  If ? [HasProperty](#sec-hasproperty)(_O_, _from_) is true, then
             1.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _from_).
             2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _to_, _fromValue_, true).
         4.  Else,
             1.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _to_).
         5.  Set _k_ to _k_ - 1.
18.  Set _k_ to _actualStart_.
19.  For each element _E_ of _items_, do
     1.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)), _E_, true).
     2.  Set _k_ to _k_ + 1.
20.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, "length", [𝔽](#𝔽)(_len_ - _actualDeleteCount_ + _itemCount_), true).
21.  Return _A_.

Note 2

The explicit setting of the "length" property in steps [15](#step-array-proto-splice-set-length) and [20](#step-array-proto-splice-set-length-2) is intended to ensure the lengths are correct even when the objects are not built-in Arrays.

Note 3

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.32 Array.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )

An ECMAScript implementation that includes the ECMA-402 Internationalization API must implement this method as specified in the ECMA-402 specification. If an ECMAScript implementation does not include the ECMA-402 API the following specification of this method is used.

Note 1

The first edition of ECMA-402 did not include a replacement specification for this method.

The meanings of the optional parameters to this method are defined in the ECMA-402 specification; implementations that do not include ECMA-402 support must not use those parameter positions for anything else.

This method performs the following steps when called:

1.  Let _array_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_array_).
3.  Let _separator_ be the [implementation-defined](#implementation-defined) list-separator String value appropriate for the [host environment](#host-environment)'s current locale (such as ", ").
4.  Let _R_ be the empty String.
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  If _k_ > 0, set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _separator_.
    2.  Let _element_ be ? [Get](#sec-get-o-p)(_array_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_))).
    3.  If _element_ is neither undefined nor null, then
        1.  Let _S_ be ? [ToString](#sec-tostring)(? [Invoke](#sec-invoke)(_element_, "toLocaleString")).
        2.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _S_.
    4.  Set _k_ to _k_ + 1.
7.  Return _R_.

Note 2

This method converts the elements of the array to Strings using their `toLocaleString` methods, and then concatenates these Strings, separated by occurrences of an [implementation-defined](#implementation-defined) locale-sensitive separator String. This method is analogous to `toString` except that it is intended to yield a locale-sensitive result corresponding with conventions of the [host environment](#host-environment)'s current locale.

Note 3

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.33 Array.prototype.toReversed ( )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _A_ be ? [ArrayCreate](#sec-arraycreate)(_len_).
4.  Let _k_ be 0.
5.  Repeat, while _k_ < _len_,
    1.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_len_ - _k_ - 1)).
    2.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    3.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _from_).
    4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _fromValue_).
    5.  Set _k_ to _k_ + 1.
6.  Return _A_.


# 23.1.3.34 Array.prototype.toSorted ( _comparator_ )

This method performs the following steps when called:

1.  If _comparator_ is not undefined and [IsCallable](#sec-iscallable)(_comparator_) is false, throw a TypeError exception.
2.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
3.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
4.  Let _A_ be ? [ArrayCreate](#sec-arraycreate)(_len_).
5.  Let _SortCompare_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_x_, _y_) that captures _comparator_ and performs the following steps when called:
    1.  Return ? [CompareArrayElements](#sec-comparearrayelements)(_x_, _y_, _comparator_).
6.  Let _sortedList_ be ? [SortIndexedProperties](#sec-sortindexedproperties)(_O_, _len_, _SortCompare_, read-through-holes).
7.  Let _j_ be 0.
8.  Repeat, while _j_ < _len_,
    1.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_j_)), _sortedList_\[_j_\]).
    2.  Set _j_ to _j_ + 1.
9.  Return _A_.


# 23.1.3.35 Array.prototype.toSpliced ( _start_, _skipCount_, ..._items_ )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
4.  If _relativeStart_ = -∞, let _actualStart_ be 0.
5.  Else if _relativeStart_ < 0, let _actualStart_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
6.  Else, let _actualStart_ be [min](#eqn-min)(_relativeStart_, _len_).
7.  Let _insertCount_ be the number of elements in _items_.
8.  If _start_ is not present, then
    1.  Let _actualSkipCount_ be 0.
9.  Else if _skipCount_ is not present, then
    1.  Let _actualSkipCount_ be _len_ - _actualStart_.
10.  Else,
     1.  Let _sc_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_skipCount_).
     2.  Let _actualSkipCount_ be the result of [clamping](#clamping) _sc_ between 0 and _len_ - _actualStart_.
11.  Let _newLen_ be _len_ + _insertCount_ - _actualSkipCount_.
12.  If _newLen_ > 2<sup>53</sup> - 1, throw a TypeError exception.
13.  Let _A_ be ? [ArrayCreate](#sec-arraycreate)(_newLen_).
14.  Let _i_ be 0.
15.  Let _r_ be _actualStart_ + _actualSkipCount_.
16.  Repeat, while _i_ < _actualStart_,
     1.  Let _Pi_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_)).
     2.  Let _iValue_ be ? [Get](#sec-get-o-p)(_O_, _Pi_).
     3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pi_, _iValue_).
     4.  Set _i_ to _i_ + 1.
17.  For each element _E_ of _items_, do
     1.  Let _Pi_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_)).
     2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pi_, _E_).
     3.  Set _i_ to _i_ + 1.
18.  Repeat, while _i_ < _newLen_,
     1.  Let _Pi_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_i_)).
     2.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_r_)).
     3.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _from_).
     4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pi_, _fromValue_).
     5.  Set _i_ to _i_ + 1.
     6.  Set _r_ to _r_ + 1.
19.  Return _A_.


# 23.1.3.36 Array.prototype.toString ( )

This method performs the following steps when called:

1.  Let _array_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _func_ be ? [Get](#sec-get-o-p)(_array_, "join").
3.  If [IsCallable](#sec-iscallable)(_func_) is false, set _func_ to the intrinsic function %Object.prototype.toString%.
4.  Return ? [Call](#sec-call)(_func_, _array_).

Note

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.37 Array.prototype.unshift ( ..._items_ )

This method prepends the arguments to the start of the array, such that their order within the array is the same as the order in which they appear in the argument list.

It performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _argCount_ be the number of elements in _items_.
4.  If _argCount_ > 0, then
    1.  If _len_ + _argCount_ > 2<sup>53</sup> - 1, throw a TypeError exception.
    2.  Let _k_ be _len_.
    3.  Repeat, while _k_ > 0,
        1.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ - 1)).
        2.  Let _to_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_ + _argCount_ - 1)).
        3.  Let _fromPresent_ be ? [HasProperty](#sec-hasproperty)(_O_, _from_).
        4.  If _fromPresent_ is true, then
            1.  Let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _from_).
            2.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _to_, _fromValue_, true).
        5.  Else,
            1.  [Assert](#assert): _fromPresent_ is false.
            2.  Perform ? [DeletePropertyOrThrow](#sec-deletepropertyorthrow)(_O_, _to_).
        6.  Set _k_ to _k_ - 1.
    4.  Let _j_ be +0<sub>𝔽</sub>.
    5.  For each element _E_ of _items_, do
        1.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, ! [ToString](#sec-tostring)(_j_), _E_, true).
        2.  Set _j_ to _j_ + 1<sub>𝔽</sub>.
5.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, "length", [𝔽](#𝔽)(_len_ + _argCount_), true).
6.  Return [𝔽](#𝔽)(_len_ + _argCount_).

The "length" property of this method is 1<sub>𝔽</sub>.

Note

This method is intentionally generic; it does not require that its this value be an Array. Therefore it can be transferred to other kinds of objects for use as a method.


# 23.1.3.38 Array.prototype.values ( )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Return [CreateArrayIterator](#sec-createarrayiterator)(_O_, value).


# 23.1.3.39 Array.prototype.with ( _index_, _value_ )

This method performs the following steps when called:

1.  Let _O_ be ? [ToObject](#sec-toobject)(this value).
2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_O_).
3.  Let _relativeIndex_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_index_).
4.  If _relativeIndex_ ≥ 0, let _actualIndex_ be _relativeIndex_.
5.  Else, let _actualIndex_ be _len_ + _relativeIndex_.
6.  If _actualIndex_ ≥ _len_ or _actualIndex_ < 0, throw a RangeError exception.
7.  Let _A_ be ? [ArrayCreate](#sec-arraycreate)(_len_).
8.  Let _k_ be 0.
9.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  If _k_ = _actualIndex_, let _fromValue_ be _value_.
    3.  Else, let _fromValue_ be ? [Get](#sec-get-o-p)(_O_, _Pk_).
    4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_A_, _Pk_, _fromValue_).
    5.  Set _k_ to _k_ + 1.
10.  Return _A_.


# 23.1.3.40 Array.prototype \[%Symbol.iterator% \] ( )

The initial value of the [%Symbol.iterator%](#sec-well-known-symbols) property is %Array.prototype.values%, defined in [23.1.3.38](#sec-array.prototype.values).


# 23.1.3.41 Array.prototype \[%Symbol.unscopables% \]

The initial value of the [%Symbol.unscopables%](#sec-well-known-symbols) [data property](#sec-object-type) is an object created by the following steps:

1.  Let _unscopableList_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(null).
2.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "at", true).
3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "copyWithin", true).
4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "entries", true).
5.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "fill", true).
6.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "find", true).
7.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "findIndex", true).
8.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "findLast", true).
9.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "findLastIndex", true).
10.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "flat", true).
11.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "flatMap", true).
12.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "includes", true).
13.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "keys", true).
14.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "toReversed", true).
15.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "toSorted", true).
16.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "toSpliced", true).
17.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_unscopableList_, "values", true).
18.  Return _unscopableList_.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.

Note

The own [property names](#property-name) of this object are [property names](#property-name) that were not included as standard properties of `Array.prototype` prior to the ECMAScript 2015 specification. These names are ignored for `with` statement binding purposes in order to preserve the behaviour of existing code that might use one of these names as a binding in an outer scope that is shadowed by a `with` statement whose binding object is an Array.

The reason that "with" is not included in the _unscopableList_ is because it is already a [reserved word](#sec-keywords-and-reserved-words).


# 23.1.4 Properties of Array Instances

Array instances are [Array exotic objects](#array-exotic-object) and have the internal methods specified for such objects. Array instances inherit properties from the [Array prototype object](#sec-properties-of-the-array-prototype-object).

Array instances have a "length" property, and a set of enumerable properties with [array index](#array-index) names.


# 23.1.4.1 length

The "length" property of an Array instance is a [data property](#sec-object-type) whose value is always numerically greater than the name of every configurable own property whose name is an [array index](#array-index).

The "length" property initially has the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

Reducing the value of the "length" property has the side-effect of deleting own array elements whose [array index](#array-index) is between the old and new length values. However, non-configurable properties can not be deleted. Attempting to set the "length" property of an Array to a value that is numerically less than or equal to the largest numeric own [property name](#property-name) of an existing non-configurable [array-indexed](#array-index) property of the array will result in the length being set to a numeric value that is one greater than that non-configurable numeric own [property name](#property-name). See [10.4.2.1](#sec-array-exotic-objects-defineownproperty-p-desc).


# 23.1.5 Array Iterator Objects

An Array Iterator is an object that represents a specific iteration over some specific Array instance object. There is not a named [constructor](#constructor) for Array Iterator objects. Instead, Array Iterator objects are created by calling certain methods of Array instance objects.


# 23.1.5.1 CreateArrayIterator ( _array_, _kind_ )

The abstract operation CreateArrayIterator takes arguments _array_ (an Object) and _kind_ (key+value, key, or value) and returns an Object. It is used to create [iterator objects](#sec-iterator-interface) for Array methods that return such [iterators](#sec-iterator-interface). It performs the following steps when called:

1.  Let _iterator_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%ArrayIteratorPrototype%](#sec-%arrayiteratorprototype%-object), « _\[\[IteratedArrayLike\]\]_, _\[\[ArrayLikeNextIndex\]\]_, _\[\[ArrayLikeIterationKind\]\]_ »).
2.  Set _iterator_._\[\[IteratedArrayLike\]\]_ to _array_.
3.  Set _iterator_._\[\[ArrayLikeNextIndex\]\]_ to 0.
4.  Set _iterator_._\[\[ArrayLikeIterationKind\]\]_ to _kind_.
5.  Return _iterator_.


# 23.1.5.2 The %ArrayIteratorPrototype% Object

The %ArrayIteratorPrototype% object:

-   has properties that are inherited by all [Array Iterator objects](#sec-array-iterator-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   has the following properties:


# 23.1.5.2.1 %ArrayIteratorPrototype%.next ( )

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  If _O_ does not have all of the internal slots of an [Array Iterator](#sec-array-iterator-objects) Instance ([23.1.5.3](#sec-properties-of-array-iterator-instances)), throw a TypeError exception.
4.  Let _array_ be _O_._\[\[IteratedArrayLike\]\]_.
5.  If _array_ is undefined, return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
6.  Let _index_ be _O_._\[\[ArrayLikeNextIndex\]\]_.
7.  Let _kind_ be _O_._\[\[ArrayLikeIterationKind\]\]_.
8.  If _array_ has a _\[\[TypedArrayName\]\]_ internal slot, then
    1.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_array_, seq-cst).
    2.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
    3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
9.  Else,
    1.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_array_).
10.  If _index_ ≥ _len_, then
     1.  Set _O_._\[\[IteratedArrayLike\]\]_ to undefined.
     2.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
11.  Set _O_._\[\[ArrayLikeNextIndex\]\]_ to _index_ + 1.
12.  Let _indexNumber_ be [𝔽](#𝔽)(_index_).
13.  If _kind_ is key, then
     1.  Let _result_ be _indexNumber_.
14.  Else,
     1.  Let _elementKey_ be ! [ToString](#sec-tostring)(_indexNumber_).
     2.  Let _elementValue_ be ? [Get](#sec-get-o-p)(_array_, _elementKey_).
     3.  If _kind_ is value, then
         1.  Let _result_ be _elementValue_.
     4.  Else,
         1.  [Assert](#assert): _kind_ is key+value.
         2.  Let _result_ be [CreateArrayFromList](#sec-createarrayfromlist)(« _indexNumber_, _elementValue_ »).
15.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(_result_, false).


# 23.1.5.2.2 %ArrayIteratorPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Array Iterator".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 23.1.5.3 Properties of Array Iterator Instances

[Array Iterator](#sec-array-iterator-objects) instances are [ordinary objects](#ordinary-object) that inherit properties from the [%ArrayIteratorPrototype%](#sec-%arrayiteratorprototype%-object) intrinsic object. [Array Iterator](#sec-array-iterator-objects) instances are initially created with the internal slots listed in [Table 72](#table-internal-slots-of-array-iterator-instances).

Table 72: Internal Slots of [Array Iterator](#sec-array-iterator-objects) Instances

<table><tbody><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr><tr><td><var class="field">[[IteratedArrayLike]]</var></td><td>an Object or <emu-val>undefined</emu-val></td><td>The <emu-xref href="#sec-lengthofarraylike" id="_ref_13067"><a href="#sec-lengthofarraylike">array-like object</a></emu-xref> that is being iterated.</td></tr><tr><td><var class="field">[[ArrayLikeNextIndex]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_13068"><a href="#integer">integer</a></emu-xref></td><td>The <emu-xref href="#integer-index" id="_ref_13069"><a href="#integer-index">integer index</a></emu-xref> of the next element to be examined by this <emu-xref href="#sec-iterator-interface" id="_ref_13070"><a href="#sec-iterator-interface">iterator</a></emu-xref>.</td></tr><tr><td><var class="field">[[ArrayLikeIterationKind]]</var></td><td><emu-const>key+value</emu-const>, <emu-const>key</emu-const>, or <emu-const>value</emu-const></td><td>A value that identifies what is returned for each element of the iteration.</td></tr></tbody></table>


# 23.2 TypedArray Objects

A _TypedArray_ presents an array-like view of an underlying binary data buffer ([25.1](#sec-arraybuffer-objects)). A TypedArray element type is the underlying binary scalar data type that all elements of a _TypedArray_ instance have. There is a distinct _TypedArray_ [constructor](#constructor), listed in [Table 73](#table-the-typedarray-constructors), for each of the supported element types. Each [constructor](#constructor) in [Table 73](#table-the-typedarray-constructors) has a corresponding distinct prototype object.

Table 73: The [TypedArray](#typedarray) [Constructors](#constructor)

<table><thead><tr><th><emu-xref href="#constructor" id="_ref_13075"><a href="#constructor">Constructor</a></emu-xref> Name and Intrinsic</th><th>Element Type</th><th>Element Size</th><th>Conversion Operation</th><th>Description</th></tr></thead><tbody><tr><td>Int8Array<br><dfn tabindex="-1">%Int8Array%</dfn></td><td><emu-const>int8</emu-const></td><td>1</td><td><emu-xref aoid="ToInt8" id="_ref_13076"><a href="#sec-toint8">ToInt8</a></emu-xref></td><td>8-bit two's complement signed <emu-xref href="#integer" id="_ref_13077"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>Uint8Array<br><dfn tabindex="-1">%Uint8Array%</dfn></td><td><emu-const>uint8</emu-const></td><td>1</td><td><emu-xref aoid="ToUint8" id="_ref_13078"><a href="#sec-touint8">ToUint8</a></emu-xref></td><td>8-bit unsigned <emu-xref href="#integer" id="_ref_13079"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>Uint8ClampedArray<br><dfn tabindex="-1">%Uint8ClampedArray%</dfn></td><td><emu-const>uint8clamped</emu-const></td><td>1</td><td><emu-xref aoid="ToUint8Clamp" id="_ref_13080"><a href="#sec-touint8clamp">ToUint8Clamp</a></emu-xref></td><td>8-bit unsigned <emu-xref href="#integer" id="_ref_13081"><a href="#integer">integer</a></emu-xref> (clamped conversion)</td></tr><tr><td>Int16Array<br><dfn tabindex="-1">%Int16Array%</dfn></td><td><emu-const>int16</emu-const></td><td>2</td><td><emu-xref aoid="ToInt16" id="_ref_13082"><a href="#sec-toint16">ToInt16</a></emu-xref></td><td>16-bit two's complement signed <emu-xref href="#integer" id="_ref_13083"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>Uint16Array<br><dfn tabindex="-1">%Uint16Array%</dfn></td><td><emu-const>uint16</emu-const></td><td>2</td><td><emu-xref aoid="ToUint16" id="_ref_13084"><a href="#sec-touint16">ToUint16</a></emu-xref></td><td>16-bit unsigned <emu-xref href="#integer" id="_ref_13085"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>Int32Array<br><dfn tabindex="-1">%Int32Array%</dfn></td><td><emu-const>int32</emu-const></td><td>4</td><td><emu-xref aoid="ToInt32" id="_ref_13086"><a href="#sec-toint32">ToInt32</a></emu-xref></td><td>32-bit two's complement signed <emu-xref href="#integer" id="_ref_13087"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>Uint32Array<br><dfn tabindex="-1">%Uint32Array%</dfn></td><td><emu-const>uint32</emu-const></td><td>4</td><td><emu-xref aoid="ToUint32" id="_ref_13088"><a href="#sec-touint32">ToUint32</a></emu-xref></td><td>32-bit unsigned <emu-xref href="#integer" id="_ref_13089"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>BigInt64Array<br><dfn tabindex="-1">%BigInt64Array%</dfn></td><td><emu-const>bigint64</emu-const></td><td>8</td><td><emu-xref aoid="ToBigInt64" id="_ref_13090"><a href="#sec-tobigint64">ToBigInt64</a></emu-xref></td><td>64-bit two's complement signed <emu-xref href="#integer" id="_ref_13091"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>BigUint64Array<br><dfn tabindex="-1">%BigUint64Array%</dfn></td><td><emu-const>biguint64</emu-const></td><td>8</td><td><emu-xref aoid="ToBigUint64" id="_ref_13092"><a href="#sec-tobiguint64">ToBigUint64</a></emu-xref></td><td>64-bit unsigned <emu-xref href="#integer" id="_ref_13093"><a href="#integer">integer</a></emu-xref></td></tr><tr><td>Float16Array<br><dfn tabindex="-1">%Float16Array%</dfn></td><td><emu-const>float16</emu-const></td><td>2</td><td></td><td>16-bit IEEE floating point</td></tr><tr><td>Float32Array<br><dfn tabindex="-1">%Float32Array%</dfn></td><td><emu-const>float32</emu-const></td><td>4</td><td></td><td>32-bit IEEE floating point</td></tr><tr><td>Float64Array<br><dfn tabindex="-1">%Float64Array%</dfn></td><td><emu-const>float64</emu-const></td><td>8</td><td></td><td>64-bit IEEE floating point</td></tr></tbody></table>

In the definitions below, references to _TypedArray_ should be replaced with the appropriate [constructor](#constructor) name from the above table.


# 23.2.1 The %TypedArray% Intrinsic Object

The %TypedArray% intrinsic object:

-   is a [constructor](#constructor) [function object](#function-object) that all of the _TypedArray_ [constructor](#constructor) objects inherit from.
-   along with its corresponding prototype object, provides common properties that are inherited by all _TypedArray_ [constructors](#constructor) and their instances.
-   does not have a global name or appear as a property of the [global object](#sec-global-object).
-   acts as the abstract superclass of the various _TypedArray_ [constructors](#constructor).
-   will throw an error when invoked, because it is an abstract class [constructor](#constructor). The _TypedArray_ [constructors](#constructor) do not perform a `super` call to it.


# 23.2.1.1 %TypedArray% ( )

This function performs the following steps when called:

1.  Throw a TypeError exception.

The "length" property of this function is +0<sub>𝔽</sub>.


# 23.2.2 Properties of the %TypedArray% Intrinsic Object

The [%TypedArray%](#sec-%typedarray%-intrinsic-object) intrinsic object:

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has a "name" property whose value is "TypedArray".
-   has the following properties:


# 23.2.2.1 %TypedArray%.from ( _source_ \[, _mapper_ \[, _thisArg_ \] \] )

This method performs the following steps when called:

1.  Let _C_ be the this value.
2.  If [IsConstructor](#sec-isconstructor)(_C_) is false, throw a TypeError exception.
3.  If _mapper_ is undefined, then
    1.  Let _mapping_ be false.
4.  Else,
    1.  If [IsCallable](#sec-iscallable)(_mapper_) is false, throw a TypeError exception.
    2.  Let _mapping_ be true.
5.  Let _usingIterator_ be ? [GetMethod](#sec-getmethod)(_source_, [%Symbol.iterator%](#sec-well-known-symbols)).
6.  If _usingIterator_ is not undefined, then
    1.  Let _values_ be ? [IteratorToList](#sec-iteratortolist)(? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_source_, _usingIterator_)).
    2.  Let _len_ be the number of elements in _values_.
    3.  Let _targetObj_ be ? [TypedArrayCreateFromConstructor](#sec-typedarraycreatefromconstructor)(_C_, « [𝔽](#𝔽)(_len_) »).
    4.  Let _k_ be 0.
    5.  Repeat, while _k_ < _len_,
        1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
        2.  Let _kValue_ be the first element of _values_.
        3.  Remove the first element from _values_.
        4.  If _mapping_ is true, then
            1.  Let _mappedValue_ be ? [Call](#sec-call)(_mapper_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_) »).
        5.  Else,
            1.  Let _mappedValue_ be _kValue_.
        6.  Perform ? [Set](#sec-set-o-p-v-throw)(_targetObj_, _Pk_, _mappedValue_, true).
        7.  Set _k_ to _k_ + 1.
    6.  [Assert](#assert): _values_ is now an empty [List](#sec-list-and-record-specification-type).
    7.  Return _targetObj_.
7.  NOTE: _source_ is not an [iterable object](#sec-iterable-interface), so assume it is already an [array-like object](#sec-lengthofarraylike).
8.  Let _arrayLike_ be ! [ToObject](#sec-toobject)(_source_).
9.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_arrayLike_).
10.  Let _targetObj_ be ? [TypedArrayCreateFromConstructor](#sec-typedarraycreatefromconstructor)(_C_, « [𝔽](#𝔽)(_len_) »).
11.  Let _k_ be 0.
12.  Repeat, while _k_ < _len_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Let _kValue_ be ? [Get](#sec-get-o-p)(_arrayLike_, _Pk_).
     3.  If _mapping_ is true, then
         1.  Let _mappedValue_ be ? [Call](#sec-call)(_mapper_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_) »).
     4.  Else,
         1.  Let _mappedValue_ be _kValue_.
     5.  Perform ? [Set](#sec-set-o-p-v-throw)(_targetObj_, _Pk_, _mappedValue_, true).
     6.  Set _k_ to _k_ + 1.
13.  Return _targetObj_.


# 23.2.2.2 %TypedArray%.of ( ..._items_ )

This method performs the following steps when called:

1.  Let _len_ be the number of elements in _items_.
2.  Let _C_ be the this value.
3.  If [IsConstructor](#sec-isconstructor)(_C_) is false, throw a TypeError exception.
4.  Let _newObj_ be ? [TypedArrayCreateFromConstructor](#sec-typedarraycreatefromconstructor)(_C_, « [𝔽](#𝔽)(_len_) »).
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _kValue_ be _items_\[_k_\].
    2.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    3.  Perform ? [Set](#sec-set-o-p-v-throw)(_newObj_, _Pk_, _kValue_, true).
    4.  Set _k_ to _k_ + 1.
7.  Return _newObj_.


# 23.2.2.3 %TypedArray%.prototype

The initial value of [%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype` is the [%TypedArray% prototype object](#sec-properties-of-the-%typedarrayprototype%-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 23.2.2.4 get %TypedArray% \[%Symbol.species% \]

[%TypedArray%](#sec-%typedarray%-intrinsic-object)`[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".

Note

[%TypedArray.prototype%](#sec-properties-of-the-%typedarrayprototype%-object) methods normally use their this value's [constructor](#constructor) to create a derived object. However, a subclass [constructor](#constructor) may over-ride that default behaviour by redefining its [%Symbol.species%](#sec-well-known-symbols) property.


# 23.2.3 Properties of the %TypedArray% Prototype Object

The %TypedArray% prototype object:

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is %TypedArray.prototype%.
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[ViewedArrayBuffer\]\]_ or any other of the internal slots that are specific to _TypedArray_ instance objects.


# 23.2.3.1 %TypedArray%.prototype.at ( _index_ )

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _relativeIndex_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_index_).
5.  If _relativeIndex_ ≥ 0, then
    1.  Let _k_ be _relativeIndex_.
6.  Else,
    1.  Let _k_ be _len_ + _relativeIndex_.
7.  If _k_ < 0 or _k_ ≥ _len_, return undefined.
8.  Return ! [Get](#sec-get-o-p)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_))).


# 23.2.3.2 get %TypedArray%.prototype.buffer

[%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype.buffer` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[TypedArrayName\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _buffer_ be _O_._\[\[ViewedArrayBuffer\]\]_.
5.  Return _buffer_.


# 23.2.3.3 get %TypedArray%.prototype.byteLength

[%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype.byteLength` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[TypedArrayName\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
5.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, return +0<sub>𝔽</sub>.
6.  Let _size_ be [TypedArrayByteLength](#sec-typedarraybytelength)(_taRecord_).
7.  Return [𝔽](#𝔽)(_size_).


# 23.2.3.4 get %TypedArray%.prototype.byteOffset

[%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype.byteOffset` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[TypedArrayName\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
5.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, return +0<sub>𝔽</sub>.
6.  Let _offset_ be _O_._\[\[ByteOffset\]\]_.
7.  Return [𝔽](#𝔽)(_offset_).


# 23.2.3.5 %TypedArray%.prototype.constructor

The initial value of [%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype.constructor` is [%TypedArray%](#sec-%typedarray%-intrinsic-object).


# 23.2.3.6 %TypedArray%.prototype.copyWithin ( _target_, _start_ \[, _end_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.copyWithin` as defined in [23.1.3.4](#sec-array.prototype.copywithin).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _relativeTarget_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_target_).
5.  If _relativeTarget_ = -∞, let _targetIndex_ be 0.
6.  Else if _relativeTarget_ < 0, let _targetIndex_ be [max](#eqn-max)(_len_ + _relativeTarget_, 0).
7.  Else, let _targetIndex_ be [min](#eqn-min)(_relativeTarget_, _len_).
8.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
9.  If _relativeStart_ = -∞, let _startIndex_ be 0.
10.  Else if _relativeStart_ < 0, let _startIndex_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
11.  Else, let _startIndex_ be [min](#eqn-min)(_relativeStart_, _len_).
12.  If _end_ is undefined, let _relativeEnd_ be _len_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
13.  If _relativeEnd_ = -∞, let _endIndex_ be 0.
14.  Else if _relativeEnd_ < 0, let _endIndex_ be [max](#eqn-max)(_len_ + _relativeEnd_, 0).
15.  Else, let _endIndex_ be [min](#eqn-min)(_relativeEnd_, _len_).
16.  Let _count_ be [min](#eqn-min)(_endIndex_ - _startIndex_, _len_ - _targetIndex_).
17.  If _count_ > 0, then
     1.  NOTE: The copying must be performed in a manner that preserves the bit-level encoding of the source data.
     2.  Let _buffer_ be _O_._\[\[ViewedArrayBuffer\]\]_.
     3.  Set _taRecord_ to [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
     4.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
     5.  Set _len_ to [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
     6.  NOTE: Side-effects of the above steps may have reduced the size of _O_, in which case copying should proceed with the longest still-applicable prefix.
     7.  Set _count_ to [min](#eqn-min)(_count_, _len_ - _startIndex_, _len_ - _targetIndex_).
     8.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
     9.  Let _byteOffset_ be _O_._\[\[ByteOffset\]\]_.
     10.  Let _toByteIndex_ be (_targetIndex_ × _elementSize_) + _byteOffset_.
     11.  Let _fromByteIndex_ be (_startIndex_ × _elementSize_) + _byteOffset_.
     12.  Let _countBytes_ be _count_ × _elementSize_.
     13.  If _fromByteIndex_ < _toByteIndex_ and _toByteIndex_ < _fromByteIndex_ + _countBytes_, then
          1.  Let _direction_ be -1.
          2.  Set _fromByteIndex_ to _fromByteIndex_ + _countBytes_ - 1.
          3.  Set _toByteIndex_ to _toByteIndex_ + _countBytes_ - 1.
     14.  Else,
          1.  Let _direction_ be 1.
     15.  Repeat, while _countBytes_ > 0,
          1.  Let _value_ be [GetValueFromBuffer](#sec-getvaluefrombuffer)(_buffer_, _fromByteIndex_, uint8, true, unordered).
          2.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_buffer_, _toByteIndex_, uint8, _value_, true, unordered).
          3.  Set _fromByteIndex_ to _fromByteIndex_ + _direction_.
          4.  Set _toByteIndex_ to _toByteIndex_ + _direction_.
          5.  Set _countBytes_ to _countBytes_ - 1.
18.  Return _O_.


# 23.2.3.7 %TypedArray%.prototype.entries ( )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Return [CreateArrayIterator](#sec-createarrayiterator)(_O_, key+value).


# 23.2.3.8 %TypedArray%.prototype.every ( _callback_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.every` as defined in [23.1.3.6](#sec-array.prototype.every).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
    3.  Let _testResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »)).
    4.  If _testResult_ is false, return false.
    5.  Set _k_ to _k_ + 1.
7.  Return true.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.9 %TypedArray%.prototype.fill ( _value_ \[, _start_ \[, _end_ \] \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.fill` as defined in [23.1.3.7](#sec-array.prototype.fill).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If _O_._\[\[ContentType\]\]_ is bigint, set _value_ to ? [ToBigInt](#sec-tobigint)(_value_).
5.  Otherwise, set _value_ to ? [ToNumber](#sec-tonumber)(_value_).
6.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
7.  If _relativeStart_ = -∞, let _startIndex_ be 0.
8.  Else if _relativeStart_ < 0, let _startIndex_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
9.  Else, let _startIndex_ be [min](#eqn-min)(_relativeStart_, _len_).
10.  If _end_ is undefined, let _relativeEnd_ be _len_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
11.  If _relativeEnd_ = -∞, let _endIndex_ be 0.
12.  Else if _relativeEnd_ < 0, let _endIndex_ be [max](#eqn-max)(_len_ + _relativeEnd_, 0).
13.  Else, let _endIndex_ be [min](#eqn-min)(_relativeEnd_, _len_).
14.  Set _taRecord_ to [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
15.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
16.  Set _len_ to [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
17.  Set _endIndex_ to [min](#eqn-min)(_endIndex_, _len_).
18.  Let _k_ be _startIndex_.
19.  Repeat, while _k_ < _endIndex_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Perform ! [Set](#sec-set-o-p-v-throw)(_O_, _Pk_, _value_, true).
     3.  Set _k_ to _k_ + 1.
20.  Return _O_.


# 23.2.3.10 %TypedArray%.prototype.filter ( _callback_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.filter` as defined in [23.1.3.8](#sec-array.prototype.filter).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
5.  Let _kept_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Let _captured_ be 0.
7.  Let _k_ be 0.
8.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
    3.  Let _selected_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »)).
    4.  If _selected_ is true, then
        1.  Append _kValue_ to _kept_.
        2.  Set _captured_ to _captured_ + 1.
    5.  Set _k_ to _k_ + 1.
9.  Let _A_ be ? [TypedArraySpeciesCreate](#typedarray-species-create)(_O_, « [𝔽](#𝔽)(_captured_) »).
10.  Let _n_ be 0.
11.  For each element _e_ of _kept_, do
     1.  Perform ! [Set](#sec-set-o-p-v-throw)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _e_, true).
     2.  Set _n_ to _n_ + 1.
12.  Return _A_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.11 %TypedArray%.prototype.find ( _predicate_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.find` as defined in [23.1.3.9](#sec-array.prototype.find).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, ascending, _predicate_, _thisArg_).
5.  Return _findRec_._\[\[Value\]\]_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.12 %TypedArray%.prototype.findIndex ( _predicate_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.findIndex` as defined in [23.1.3.10](#sec-array.prototype.findindex).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, ascending, _predicate_, _thisArg_).
5.  Return _findRec_._\[\[Index\]\]_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.13 %TypedArray%.prototype.findLast ( _predicate_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.findLast` as defined in [23.1.3.11](#sec-array.prototype.findlast).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, descending, _predicate_, _thisArg_).
5.  Return _findRec_._\[\[Value\]\]_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.14 %TypedArray%.prototype.findLastIndex ( _predicate_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.findLastIndex` as defined in [23.1.3.12](#sec-array.prototype.findlastindex).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _findRec_ be ? [FindViaPredicate](#sec-findviapredicate)(_O_, _len_, descending, _predicate_, _thisArg_).
5.  Return _findRec_._\[\[Index\]\]_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.15 %TypedArray%.prototype.forEach ( _callback_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.forEach` as defined in [23.1.3.15](#sec-array.prototype.foreach).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
    3.  Perform ? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
    4.  Set _k_ to _k_ + 1.
7.  Return undefined.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.16 %TypedArray%.prototype.includes ( _searchElement_ \[, _fromIndex_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.includes` as defined in [23.1.3.16](#sec-array.prototype.includes).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If _len_ = 0, return false.
5.  Let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fromIndex_).
6.  [Assert](#assert): If _fromIndex_ is undefined, then _n_ is 0.
7.  If _n_ = +∞, return false.
8.  Else if _n_ = -∞, set _n_ to 0.
9.  If _n_ ≥ 0, then
    1.  Let _k_ be _n_.
10.  Else,
     1.  Let _k_ be _len_ + _n_.
     2.  If _k_ < 0, set _k_ to 0.
11.  Repeat, while _k_ < _len_,
     1.  Let _elementK_ be ! [Get](#sec-get-o-p)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_))).
     2.  If [SameValueZero](#sec-samevaluezero)(_searchElement_, _elementK_) is true, return true.
     3.  Set _k_ to _k_ + 1.
12.  Return false.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.17 %TypedArray%.prototype.indexOf ( _searchElement_ \[, _fromIndex_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.indexOf` as defined in [23.1.3.17](#sec-array.prototype.indexof).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If _len_ = 0, return \-1<sub>𝔽</sub>.
5.  Let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fromIndex_).
6.  [Assert](#assert): If _fromIndex_ is undefined, then _n_ is 0.
7.  If _n_ = +∞, return \-1<sub>𝔽</sub>.
8.  Else if _n_ = -∞, set _n_ to 0.
9.  If _n_ ≥ 0, then
    1.  Let _k_ be _n_.
10.  Else,
     1.  Let _k_ be _len_ + _n_.
     2.  If _k_ < 0, set _k_ to 0.
11.  Repeat, while _k_ < _len_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Let _kPresent_ be ! [HasProperty](#sec-hasproperty)(_O_, _Pk_).
     3.  If _kPresent_ is true, then
         1.  Let _elementK_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
         2.  If [IsStrictlyEqual](#sec-isstrictlyequal)(_searchElement_, _elementK_) is true, return [𝔽](#𝔽)(_k_).
     4.  Set _k_ to _k_ + 1.
12.  Return \-1<sub>𝔽</sub>.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.18 %TypedArray%.prototype.join ( _separator_ )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.join` as defined in [23.1.3.18](#sec-array.prototype.join).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If _separator_ is undefined, let _sep_ be ",".
5.  Else, let _sep_ be ? [ToString](#sec-tostring)(_separator_).
6.  Let _R_ be the empty String.
7.  Let _k_ be 0.
8.  Repeat, while _k_ < _len_,
    1.  If _k_ > 0, set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _sep_.
    2.  Let _element_ be ! [Get](#sec-get-o-p)(_O_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_))).
    3.  If _element_ is not undefined, then
        1.  Let _S_ be ! [ToString](#sec-tostring)(_element_).
        2.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _S_.
    4.  Set _k_ to _k_ + 1.
9.  Return _R_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.19 %TypedArray%.prototype.keys ( )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Return [CreateArrayIterator](#sec-createarrayiterator)(_O_, key).


# 23.2.3.20 %TypedArray%.prototype.lastIndexOf ( _searchElement_ \[, _fromIndex_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.lastIndexOf` as defined in [23.1.3.20](#sec-array.prototype.lastindexof).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If _len_ = 0, return \-1<sub>𝔽</sub>.
5.  If _fromIndex_ is present, let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_fromIndex_); else let _n_ be _len_ - 1.
6.  If _n_ = -∞, return \-1<sub>𝔽</sub>.
7.  If _n_ ≥ 0, then
    1.  Let _k_ be [min](#eqn-min)(_n_, _len_ - 1).
8.  Else,
    1.  Let _k_ be _len_ + _n_.
9.  Repeat, while _k_ ≥ 0,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kPresent_ be ! [HasProperty](#sec-hasproperty)(_O_, _Pk_).
    3.  If _kPresent_ is true, then
        1.  Let _elementK_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
        2.  If [IsStrictlyEqual](#sec-isstrictlyequal)(_searchElement_, _elementK_) is true, return [𝔽](#𝔽)(_k_).
    4.  Set _k_ to _k_ - 1.
10.  Return \-1<sub>𝔽</sub>.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.21 get %TypedArray%.prototype.length

[%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype.length` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[TypedArrayName\]\]_).
3.  [Assert](#assert): _O_ has _\[\[ViewedArrayBuffer\]\]_ and _\[\[ArrayLength\]\]_ internal slots.
4.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
5.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, return +0<sub>𝔽</sub>.
6.  Let _length_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
7.  Return [𝔽](#𝔽)(_length_).

This function is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.22 %TypedArray%.prototype.map ( _callback_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.map` as defined in [23.1.3.21](#sec-array.prototype.map).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
5.  Let _A_ be ? [TypedArraySpeciesCreate](#typedarray-species-create)(_O_, « [𝔽](#𝔽)(_len_) »).
6.  Let _k_ be 0.
7.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
    3.  Let _mappedValue_ be ? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
    4.  Perform ? [Set](#sec-set-o-p-v-throw)(_A_, _Pk_, _mappedValue_, true).
    5.  Set _k_ to _k_ + 1.
8.  Return _A_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.23 %TypedArray%.prototype.reduce ( _callback_ \[, _initialValue_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.reduce` as defined in [23.1.3.24](#sec-array.prototype.reduce).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
5.  If _len_ = 0 and _initialValue_ is not present, throw a TypeError exception.
6.  Let _k_ be 0.
7.  Let _accumulator_ be undefined.
8.  If _initialValue_ is present, then
    1.  Set _accumulator_ to _initialValue_.
9.  Else,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Set _accumulator_ to ! [Get](#sec-get-o-p)(_O_, _Pk_).
    3.  Set _k_ to _k_ + 1.
10.  Repeat, while _k_ < _len_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
     3.  Set _accumulator_ to ? [Call](#sec-call)(_callback_, undefined, « _accumulator_, _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
     4.  Set _k_ to _k_ + 1.
11.  Return _accumulator_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.24 %TypedArray%.prototype.reduceRight ( _callback_ \[, _initialValue_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.reduceRight` as defined in [23.1.3.25](#sec-array.prototype.reduceright).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
5.  If _len_ = 0 and _initialValue_ is not present, throw a TypeError exception.
6.  Let _k_ be _len_ - 1.
7.  Let _accumulator_ be undefined.
8.  If _initialValue_ is present, then
    1.  Set _accumulator_ to _initialValue_.
9.  Else,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Set _accumulator_ to ! [Get](#sec-get-o-p)(_O_, _Pk_).
    3.  Set _k_ to _k_ - 1.
10.  Repeat, while _k_ ≥ 0,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
     3.  Set _accumulator_ to ? [Call](#sec-call)(_callback_, undefined, « _accumulator_, _kValue_, [𝔽](#𝔽)(_k_), _O_ »).
     4.  Set _k_ to _k_ - 1.
11.  Return _accumulator_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.25 %TypedArray%.prototype.reverse ( )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.reverse` as defined in [23.1.3.26](#sec-array.prototype.reverse).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _middle_ be [floor](#eqn-floor)(_len_ / 2).
5.  Let _lower_ be 0.
6.  Repeat, while _lower_ ≠ _middle_,
    1.  Let _upper_ be _len_ - _lower_ - 1.
    2.  Let _upperP_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_upper_)).
    3.  Let _lowerP_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_lower_)).
    4.  Let _lowerValue_ be ! [Get](#sec-get-o-p)(_O_, _lowerP_).
    5.  Let _upperValue_ be ! [Get](#sec-get-o-p)(_O_, _upperP_).
    6.  Perform ! [Set](#sec-set-o-p-v-throw)(_O_, _lowerP_, _upperValue_, true).
    7.  Perform ! [Set](#sec-set-o-p-v-throw)(_O_, _upperP_, _lowerValue_, true).
    8.  Set _lower_ to _lower_ + 1.
7.  Return _O_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.26 %TypedArray%.prototype.set ( _source_ \[, _offset_ \] )

This method sets multiple values in this _TypedArray_, reading the values from _source_. The details differ based upon the type of _source_. The optional _offset_ value indicates the first element index in this _TypedArray_ where values are written. If omitted, it is assumed to be 0.

It performs the following steps when called:

1.  Let _target_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_target_, _\[\[TypedArrayName\]\]_).
3.  [Assert](#assert): _target_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _targetOffset_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_offset_).
5.  If _targetOffset_ < 0, throw a RangeError exception.
6.  If _source_ [is an Object](#sec-object-type) that has a _\[\[TypedArrayName\]\]_ internal slot, then
    1.  Perform ? [SetTypedArrayFromTypedArray](#sec-settypedarrayfromtypedarray)(_target_, _targetOffset_, _source_).
7.  Else,
    1.  Perform ? [SetTypedArrayFromArrayLike](#sec-settypedarrayfromarraylike)(_target_, _targetOffset_, _source_).
8.  Return undefined.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.26.1 SetTypedArrayFromArrayLike ( _target_, _targetOffset_, _source_ )

The abstract operation SetTypedArrayFromArrayLike takes arguments _target_ (a [TypedArray](#typedarray)), _targetOffset_ (a non-negative [integer](#integer) or +∞), and _source_ (an [ECMAScript language value](#sec-ecmascript-language-types), but not a [TypedArray](#typedarray)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It sets multiple values in _target_, starting at index _targetOffset_, reading the values from _source_. It performs the following steps when called:

1.  Let _targetRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_target_, seq-cst).
2.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_targetRecord_) is true, throw a TypeError exception.
3.  Let _targetLength_ be [TypedArrayLength](#sec-typedarraylength)(_targetRecord_).
4.  Let _src_ be ? [ToObject](#sec-toobject)(_source_).
5.  Let _srcLength_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_src_).
6.  If _targetOffset_ = +∞, throw a RangeError exception.
7.  If _srcLength_ + _targetOffset_ > _targetLength_, throw a RangeError exception.
8.  Let _k_ be 0.
9.  Repeat, while _k_ < _srcLength_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _value_ be ? [Get](#sec-get-o-p)(_src_, _Pk_).
    3.  Let _targetIndex_ be [𝔽](#𝔽)(_targetOffset_ + _k_).
    4.  Perform ? [TypedArraySetElement](#sec-typedarraysetelement)(_target_, _targetIndex_, _value_).
    5.  Set _k_ to _k_ + 1.
10.  Return unused.


# 23.2.3.26.2 SetTypedArrayFromTypedArray ( _target_, _targetOffset_, _source_ )

The abstract operation SetTypedArrayFromTypedArray takes arguments _target_ (a [TypedArray](#typedarray)), _targetOffset_ (a non-negative [integer](#integer) or +∞), and _source_ (a [TypedArray](#typedarray)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It sets multiple values in _target_, starting at index _targetOffset_, reading the values from _source_. It performs the following steps when called:

1.  Let _targetBuffer_ be _target_._\[\[ViewedArrayBuffer\]\]_.
2.  Let _targetRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_target_, seq-cst).
3.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_targetRecord_) is true, throw a TypeError exception.
4.  Let _targetLength_ be [TypedArrayLength](#sec-typedarraylength)(_targetRecord_).
5.  Let _srcBuffer_ be _source_._\[\[ViewedArrayBuffer\]\]_.
6.  Let _srcRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_source_, seq-cst).
7.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_srcRecord_) is true, throw a TypeError exception.
8.  Let _srcLength_ be [TypedArrayLength](#sec-typedarraylength)(_srcRecord_).
9.  Let _targetType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_target_).
10.  Let _targetElementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_target_).
11.  Let _targetByteOffset_ be _target_._\[\[ByteOffset\]\]_.
12.  Let _srcType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_source_).
13.  Let _srcElementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_source_).
14.  Let _srcByteOffset_ be _source_._\[\[ByteOffset\]\]_.
15.  If _targetOffset_ = +∞, throw a RangeError exception.
16.  If _srcLength_ + _targetOffset_ > _targetLength_, throw a RangeError exception.
17.  If _target_._\[\[ContentType\]\]_ is not _source_._\[\[ContentType\]\]_, throw a TypeError exception.
18.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_srcBuffer_) is true, [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_targetBuffer_) is true, and _srcBuffer_._\[\[ArrayBufferData\]\]_ is _targetBuffer_._\[\[ArrayBufferData\]\]_, let _sameSharedArrayBuffer_ be true; otherwise let _sameSharedArrayBuffer_ be false.
19.  If [SameValue](#sec-samevalue)(_srcBuffer_, _targetBuffer_) is true or _sameSharedArrayBuffer_ is true, then
     1.  Let _srcByteLength_ be [TypedArrayByteLength](#sec-typedarraybytelength)(_srcRecord_).
     2.  Set _srcBuffer_ to ? [CloneArrayBuffer](#sec-clonearraybuffer)(_srcBuffer_, _srcByteOffset_, _srcByteLength_).
     3.  Let _srcByteIndex_ be 0.
20.  Else,
     1.  Let _srcByteIndex_ be _srcByteOffset_.
21.  Let _targetByteIndex_ be (_targetOffset_ × _targetElementSize_) + _targetByteOffset_.
22.  Let _limit_ be _targetByteIndex_ + (_targetElementSize_ × _srcLength_).
23.  If _srcType_ is _targetType_, then
     1.  NOTE: The transfer must be performed in a manner that preserves the bit-level encoding of the source data.
     2.  Repeat, while _targetByteIndex_ < _limit_,
         1.  Let _value_ be [GetValueFromBuffer](#sec-getvaluefrombuffer)(_srcBuffer_, _srcByteIndex_, uint8, true, unordered).
         2.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_targetBuffer_, _targetByteIndex_, uint8, _value_, true, unordered).
         3.  Set _srcByteIndex_ to _srcByteIndex_ + 1.
         4.  Set _targetByteIndex_ to _targetByteIndex_ + 1.
24.  Else,
     1.  Repeat, while _targetByteIndex_ < _limit_,
         1.  Let _value_ be [GetValueFromBuffer](#sec-getvaluefrombuffer)(_srcBuffer_, _srcByteIndex_, _srcType_, true, unordered).
         2.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_targetBuffer_, _targetByteIndex_, _targetType_, _value_, true, unordered).
         3.  Set _srcByteIndex_ to _srcByteIndex_ + _srcElementSize_.
         4.  Set _targetByteIndex_ to _targetByteIndex_ + _targetElementSize_.
25.  Return unused.


# 23.2.3.27 %TypedArray%.prototype.slice ( _start_, _end_ )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.slice` as defined in [23.1.3.28](#sec-array.prototype.slice).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _srcArrayLength_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
5.  If _relativeStart_ = -∞, let _startIndex_ be 0.
6.  Else if _relativeStart_ < 0, let _startIndex_ be [max](#eqn-max)(_srcArrayLength_ + _relativeStart_, 0).
7.  Else, let _startIndex_ be [min](#eqn-min)(_relativeStart_, _srcArrayLength_).
8.  If _end_ is undefined, let _relativeEnd_ be _srcArrayLength_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
9.  If _relativeEnd_ = -∞, let _endIndex_ be 0.
10.  Else if _relativeEnd_ < 0, let _endIndex_ be [max](#eqn-max)(_srcArrayLength_ + _relativeEnd_, 0).
11.  Else, let _endIndex_ be [min](#eqn-min)(_relativeEnd_, _srcArrayLength_).
12.  Let _countBytes_ be [max](#eqn-max)(_endIndex_ - _startIndex_, 0).
13.  Let _A_ be ? [TypedArraySpeciesCreate](#typedarray-species-create)(_O_, « [𝔽](#𝔽)(_countBytes_) »).
14.  If _countBytes_ > 0, then
     1.  Set _taRecord_ to [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
     2.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
     3.  Set _endIndex_ to [min](#eqn-min)(_endIndex_, [TypedArrayLength](#sec-typedarraylength)(_taRecord_)).
     4.  Set _countBytes_ to [max](#eqn-max)(_endIndex_ - _startIndex_, 0).
     5.  Let _srcType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_O_).
     6.  Let _targetType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_A_).
     7.  If _srcType_ is _targetType_, then
         1.  NOTE: The transfer must be performed in a manner that preserves the bit-level encoding of the source data.
         2.  Let _srcBuffer_ be _O_._\[\[ViewedArrayBuffer\]\]_.
         3.  Let _targetBuffer_ be _A_._\[\[ViewedArrayBuffer\]\]_.
         4.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
         5.  Let _srcByteOffset_ be _O_._\[\[ByteOffset\]\]_.
         6.  Let _srcByteIndex_ be (_startIndex_ × _elementSize_) + _srcByteOffset_.
         7.  Let _targetByteIndex_ be _A_._\[\[ByteOffset\]\]_.
         8.  Let _endByteIndex_ be _targetByteIndex_ + (_countBytes_ × _elementSize_).
         9.  Repeat, while _targetByteIndex_ < _endByteIndex_,
             1.  Let _value_ be [GetValueFromBuffer](#sec-getvaluefrombuffer)(_srcBuffer_, _srcByteIndex_, uint8, true, unordered).
             2.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_targetBuffer_, _targetByteIndex_, uint8, _value_, true, unordered).
             3.  Set _srcByteIndex_ to _srcByteIndex_ + 1.
             4.  Set _targetByteIndex_ to _targetByteIndex_ + 1.
     8.  Else,
         1.  Let _n_ be 0.
         2.  Let _k_ be _startIndex_.
         3.  Repeat, while _k_ < _endIndex_,
             1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
             2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
             3.  Perform ! [Set](#sec-set-o-p-v-throw)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_n_)), _kValue_, true).
             4.  Set _k_ to _k_ + 1.
             5.  Set _n_ to _n_ + 1.
15.  Return _A_.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.28 %TypedArray%.prototype.some ( _callback_ \[, _thisArg_ \] )

The interpretation and use of the arguments of this method are the same as for `Array.prototype.some` as defined in [23.1.3.29](#sec-array.prototype.some).

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
    3.  Let _testResult_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_callback_, _thisArg_, « _kValue_, [𝔽](#𝔽)(_k_), _O_ »)).
    4.  If _testResult_ is true, return true.
    5.  Set _k_ to _k_ + 1.
7.  Return false.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.29 %TypedArray%.prototype.sort ( _comparator_ )

This is a distinct method that, except as described below, implements the same requirements as those of `Array.prototype.sort` as defined in [23.1.3.30](#sec-array.prototype.sort). The implementation of this method may be optimized with the knowledge that the this value is an object that has a fixed length and whose [integer-indexed](#integer-index) properties are not sparse.

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.

It performs the following steps when called:

1.  If _comparator_ is not undefined and [IsCallable](#sec-iscallable)(_comparator_) is false, throw a TypeError exception.
2.  Let _obj_ be the this value.
3.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_obj_, seq-cst).
4.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
5.  NOTE: The following closure performs a numeric comparison rather than the string comparison used in [23.1.3.30](#sec-array.prototype.sort).
6.  Let _SortCompare_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_x_, _y_) that captures _comparator_ and performs the following steps when called:
    1.  Return ? [CompareTypedArrayElements](#sec-comparetypedarrayelements)(_x_, _y_, _comparator_).
7.  Let _sortedList_ be ? [SortIndexedProperties](#sec-sortindexedproperties)(_obj_, _len_, _SortCompare_, read-through-holes).
8.  Let _j_ be 0.
9.  Repeat, while _j_ < _len_,
    1.  Perform ! [Set](#sec-set-o-p-v-throw)(_obj_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_j_)), _sortedList_\[_j_\], true).
    2.  Set _j_ to _j_ + 1.
10.  Return _obj_.

Note

Because NaN always compares greater than any other value (see [CompareTypedArrayElements](#sec-comparetypedarrayelements)), NaN property values always sort to the end of the result when _comparator_ is not provided.


# 23.2.3.30 %TypedArray%.prototype.subarray ( _start_, _end_ )

This method returns a new _TypedArray_ whose element type is the element type of this _TypedArray_ and whose ArrayBuffer is the ArrayBuffer of this _TypedArray_, referencing the elements in the [interval](#interval) from _start_ (inclusive) to _end_ (exclusive). If either _start_ or _end_ is negative, it refers to an index from the end of the array, as opposed to from the beginning.

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[TypedArrayName\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _buffer_ be _O_._\[\[ViewedArrayBuffer\]\]_.
5.  Let _srcRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, seq-cst).
6.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_srcRecord_) is true, then
    1.  Let _srcLength_ be 0.
7.  Else,
    1.  Let _srcLength_ be [TypedArrayLength](#sec-typedarraylength)(_srcRecord_).
8.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
9.  If _relativeStart_ = -∞, let _startIndex_ be 0.
10.  Else if _relativeStart_ < 0, let _startIndex_ be [max](#eqn-max)(_srcLength_ + _relativeStart_, 0).
11.  Else, let _startIndex_ be [min](#eqn-min)(_relativeStart_, _srcLength_).
12.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
13.  Let _srcByteOffset_ be _O_._\[\[ByteOffset\]\]_.
14.  Let _beginByteOffset_ be _srcByteOffset_ + (_startIndex_ × _elementSize_).
15.  If _O_._\[\[ArrayLength\]\]_ is auto and _end_ is undefined, then
     1.  Let _argumentsList_ be « _buffer_, [𝔽](#𝔽)(_beginByteOffset_) ».
16.  Else,
     1.  If _end_ is undefined, let _relativeEnd_ be _srcLength_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
     2.  If _relativeEnd_ = -∞, let _endIndex_ be 0.
     3.  Else if _relativeEnd_ < 0, let _endIndex_ be [max](#eqn-max)(_srcLength_ + _relativeEnd_, 0).
     4.  Else, let _endIndex_ be [min](#eqn-min)(_relativeEnd_, _srcLength_).
     5.  Let _newLength_ be [max](#eqn-max)(_endIndex_ - _startIndex_, 0).
     6.  Let _argumentsList_ be « _buffer_, [𝔽](#𝔽)(_beginByteOffset_), [𝔽](#𝔽)(_newLength_) ».
17.  Return ? [TypedArraySpeciesCreate](#typedarray-species-create)(_O_, _argumentsList_).

This method is not generic. The this value must be an object with a _\[\[TypedArrayName\]\]_ internal slot.


# 23.2.3.31 %TypedArray%.prototype.toLocaleString ( \[_reserved1_ \[, _reserved2_ \] \] )

This is a distinct method that implements the same algorithm as `Array.prototype.toLocaleString` as defined in [23.1.3.32](#sec-array.prototype.tolocalestring) except that [TypedArrayLength](#sec-typedarraylength) is called in place of performing a _\[\[Get\]\]_ of "length". The implementation of the algorithm may be optimized with the knowledge that the this value has a fixed length when the underlying buffer is not resizable and whose [integer-indexed](#integer-index) properties are not sparse. However, such optimization must not introduce any observable changes in the specified behaviour of the algorithm.

This method is not generic. [ValidateTypedArray](#sec-validatetypedarray) is called with the this value and seq-cst as arguments prior to evaluating the algorithm. If its result is an [abrupt completion](#sec-completion-record-specification-type) that exception is thrown instead of evaluating the algorithm.

Note

If the ECMAScript implementation includes the ECMA-402 Internationalization API this method is based upon the algorithm for `Array.prototype.toLocaleString` that is in the ECMA-402 specification.


# 23.2.3.32 %TypedArray%.prototype.toReversed ( )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _A_ be ? [TypedArrayCreateSameType](#sec-typedarray-create-same-type)(_O_, _len_).
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _from_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_len_ - _k_ - 1)).
    2.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    3.  Let _fromValue_ be ! [Get](#sec-get-o-p)(_O_, _from_).
    4.  Perform ! [Set](#sec-set-o-p-v-throw)(_A_, _Pk_, _fromValue_, true).
    5.  Set _k_ to _k_ + 1.
7.  Return _A_.


# 23.2.3.33 %TypedArray%.prototype.toSorted ( _comparator_ )

This method performs the following steps when called:

1.  If _comparator_ is not undefined and [IsCallable](#sec-iscallable)(_comparator_) is false, throw a TypeError exception.
2.  Let _O_ be the this value.
3.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
4.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
5.  Let _A_ be ? [TypedArrayCreateSameType](#sec-typedarray-create-same-type)(_O_, _len_).
6.  NOTE: The following closure performs a numeric comparison rather than the string comparison used in [23.1.3.34](#sec-array.prototype.tosorted).
7.  Let _SortCompare_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_x_, _y_) that captures _comparator_ and performs the following steps when called:
    1.  Return ? [CompareTypedArrayElements](#sec-comparetypedarrayelements)(_x_, _y_, _comparator_).
8.  Let _sortedList_ be ? [SortIndexedProperties](#sec-sortindexedproperties)(_O_, _len_, _SortCompare_, read-through-holes).
9.  Let _j_ be 0.
10.  Repeat, while _j_ < _len_,
     1.  Perform ! [Set](#sec-set-o-p-v-throw)(_A_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_j_)), _sortedList_\[_j_\], true).
     2.  Set _j_ to _j_ + 1.
11.  Return _A_.


# 23.2.3.34 %TypedArray%.prototype.toString ( )

The initial value of the "toString" property is %Array.prototype.toString%, defined in [23.1.3.36](#sec-array.prototype.tostring).


# 23.2.3.35 %TypedArray%.prototype.values ( )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Return [CreateArrayIterator](#sec-createarrayiterator)(_O_, value).


# 23.2.3.36 %TypedArray%.prototype.with ( _index_, _value_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_O_, seq-cst).
3.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
4.  Let _relativeIndex_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_index_).
5.  If _relativeIndex_ ≥ 0, let _actualIndex_ be _relativeIndex_.
6.  Else, let _actualIndex_ be _len_ + _relativeIndex_.
7.  If _O_._\[\[ContentType\]\]_ is bigint, let _numericValue_ be ? [ToBigInt](#sec-tobigint)(_value_).
8.  Else, let _numericValue_ be ? [ToNumber](#sec-tonumber)(_value_).
9.  If [IsValidIntegerIndex](#sec-isvalidintegerindex)(_O_, [𝔽](#𝔽)(_actualIndex_)) is false, throw a RangeError exception.
10.  Let _A_ be ? [TypedArrayCreateSameType](#sec-typedarray-create-same-type)(_O_, _len_).
11.  Let _k_ be 0.
12.  Repeat, while _k_ < _len_,
     1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
     2.  If _k_ = _actualIndex_, let _fromValue_ be _numericValue_.
     3.  Else, let _fromValue_ be ! [Get](#sec-get-o-p)(_O_, _Pk_).
     4.  Perform ! [Set](#sec-set-o-p-v-throw)(_A_, _Pk_, _fromValue_, true).
     5.  Set _k_ to _k_ + 1.
13.  Return _A_.


# 23.2.3.37 %TypedArray%.prototype \[%Symbol.iterator% \] ( )

The initial value of the [%Symbol.iterator%](#sec-well-known-symbols) property is %TypedArray.prototype.values%, defined in [23.2.3.35](#sec-%typedarray%.prototype.values).


# 23.2.3.38 get %TypedArray%.prototype \[%Symbol.toStringTag% \]

[%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype[%Symbol.toStringTag%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), return undefined.
3.  If _O_ does not have a _\[\[TypedArrayName\]\]_ internal slot, return undefined.
4.  Let _name_ be _O_._\[\[TypedArrayName\]\]_.
5.  [Assert](#assert): _name_ [is a String](#sec-ecmascript-language-types-string-type).
6.  Return _name_.

This property has the attributes { _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.

The initial value of the "name" property of this function is "get \[Symbol.toStringTag\]".


# 23.2.4 Abstract Operations for TypedArray Objects


# 23.2.4.1 TypedArrayCreateFromConstructor ( _constructor_, _argumentList_ )

The abstract operation TypedArrayCreateFromConstructor takes arguments _constructor_ (a [constructor](#constructor)) and _argumentList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [TypedArray](#typedarray) or a [throw completion](#sec-completion-record-specification-type). It is used to specify the creation of a new [TypedArray](#typedarray) using a [constructor](#constructor) function. It performs the following steps when called:

1.  Let _newTypedArray_ be ? [Construct](#sec-construct)(_constructor_, _argumentList_).
2.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_newTypedArray_, seq-cst).
3.  [Assert](#assert): _newTypedArray_ has all the internal slots mentioned in [Properties of _TypedArray_ Instances](#sec-properties-of-typedarray-instances).
4.  If the number of elements in _argumentList_ is 1 and _argumentList_\[0\] [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
    2.  Let _length_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
    3.  If _length_ < [ℝ](#ℝ)(_argumentList_\[0\]), throw a TypeError exception.
5.  Return _newTypedArray_.


# 23.2.4.2 TypedArrayCreateSameType ( _exemplar_, _length_ )

The abstract operation TypedArrayCreateSameType takes arguments _exemplar_ (a [TypedArray](#typedarray)) and _length_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [TypedArray](#typedarray) or a [throw completion](#sec-completion-record-specification-type). It is used to specify the creation of a new [TypedArray](#typedarray) using a [constructor](#constructor) function that is derived from _exemplar_. Unlike [TypedArraySpeciesCreate](#typedarray-species-create), which can construct custom [TypedArray](#typedarray) subclasses through the use of [%Symbol.species%](#sec-well-known-symbols), this operation always uses one of the built-in [TypedArray](#typedarray) [constructors](#constructor). It performs the following steps when called:

1.  Let _constructor_ be the intrinsic object associated with the [constructor](#constructor) name _exemplar_._\[\[TypedArrayName\]\]_ in [Table 73](#table-the-typedarray-constructors).
2.  Let _result_ be ? [TypedArrayCreateFromConstructor](#sec-typedarraycreatefromconstructor)(_constructor_, « [𝔽](#𝔽)(_length_) »).
3.  [Assert](#assert): _result_ has _\[\[TypedArrayName\]\]_ and _\[\[ContentType\]\]_ internal slots.
4.  [Assert](#assert): _result_._\[\[ContentType\]\]_ is _exemplar_._\[\[ContentType\]\]_.
5.  Return _result_.


# 23.2.4.3 TypedArraySpeciesCreate ( _exemplar_, _argumentList_ )

The abstract operation TypedArraySpeciesCreate takes arguments _exemplar_ (a [TypedArray](#typedarray)) and _argumentList_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [TypedArray](#typedarray) or a [throw completion](#sec-completion-record-specification-type). It is used to specify the creation of a new [TypedArray](#typedarray) using a [constructor](#constructor) function that is derived from _exemplar_. Unlike [ArraySpeciesCreate](#sec-arrayspeciescreate), which can create non-Array objects through the use of [%Symbol.species%](#sec-well-known-symbols), this operation enforces that the [constructor](#constructor) function creates an actual [TypedArray](#typedarray). It performs the following steps when called:

1.  Let _defaultConstructor_ be the intrinsic object associated with the [constructor](#constructor) name _exemplar_._\[\[TypedArrayName\]\]_ in [Table 73](#table-the-typedarray-constructors).
2.  Let _constructor_ be ? [SpeciesConstructor](#sec-speciesconstructor)(_exemplar_, _defaultConstructor_).
3.  Let _result_ be ? [TypedArrayCreateFromConstructor](#sec-typedarraycreatefromconstructor)(_constructor_, _argumentList_).
4.  If _result_._\[\[ContentType\]\]_ is not _exemplar_._\[\[ContentType\]\]_, throw a TypeError exception.
5.  Return _result_.


# 23.2.4.4 ValidateTypedArray ( _O_, _order_ )

The abstract operation ValidateTypedArray takes arguments _O_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _order_ (seq-cst or unordered) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[TypedArrayName\]\]_).
2.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
3.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_O_, _order_).
4.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
5.  Return _taRecord_.


# 23.2.4.5 TypedArrayElementSize ( _O_ )

The abstract operation TypedArrayElementSize takes argument _O_ (a [TypedArray](#typedarray)) and returns a non-negative [integer](#integer). It performs the following steps when called:

1.  Return the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for _O_._\[\[TypedArrayName\]\]_.


# 23.2.4.6 TypedArrayElementType ( _O_ )

The abstract operation TypedArrayElementType takes argument _O_ (a [TypedArray](#typedarray)) and returns a [TypedArray element type](#sec-typedarray-objects). It performs the following steps when called:

1.  Return the Element Type value specified in [Table 73](#table-the-typedarray-constructors) for _O_._\[\[TypedArrayName\]\]_.


# 23.2.4.7 CompareTypedArrayElements ( _x_, _y_, _comparator_ )

The abstract operation CompareTypedArrayElements takes arguments _x_ (a Number or a BigInt), _y_ (a Number or a BigInt), and _comparator_ (a [function object](#function-object) or undefined) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Number or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): _x_ [is a Number](#sec-ecmascript-language-types-number-type) and _y_ [is a Number](#sec-ecmascript-language-types-number-type), or _x_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) and _y_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
2.  If _comparator_ is not undefined, then
    1.  Let _v_ be ? [ToNumber](#sec-tonumber)(? [Call](#sec-call)(_comparator_, undefined, « _x_, _y_ »)).
    2.  If _v_ is NaN, return +0<sub>𝔽</sub>.
    3.  Return _v_.
3.  If _x_ and _y_ are both NaN, return +0<sub>𝔽</sub>.
4.  If _x_ is NaN, return 1<sub>𝔽</sub>.
5.  If _y_ is NaN, return \-1<sub>𝔽</sub>.
6.  If _x_ < _y_, return \-1<sub>𝔽</sub>.
7.  If _x_ > _y_, return 1<sub>𝔽</sub>.
8.  If _x_ is \-0<sub>𝔽</sub> and _y_ is +0<sub>𝔽</sub>, return \-1<sub>𝔽</sub>.
9.  If _x_ is +0<sub>𝔽</sub> and _y_ is \-0<sub>𝔽</sub>, return 1<sub>𝔽</sub>.
10.  Return +0<sub>𝔽</sub>.

Note

This performs a numeric comparison rather than the string comparison used in [23.1.3.30.2](#sec-comparearrayelements).


# 23.2.5 The _TypedArray_ Constructors

Each _TypedArray_ [constructor](#constructor):

-   is an intrinsic object that has the structure described below, differing only in the name used as the [constructor](#constructor) name instead of _TypedArray_, in [Table 73](#table-the-typedarray-constructors), except where otherwise noted.
-   is a function whose behaviour differs based upon the number and types of its arguments. The actual behaviour of a call of _TypedArray_ depends upon the number and kind of arguments that are passed to it.
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified _TypedArray_ behaviour must include a `super` call to the _TypedArray_ [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the [%TypedArray%](#sec-%typedarray%-intrinsic-object)`.prototype` built-in methods.


# 23.2.5.1 _TypedArray_ ( ..._args_ )

Each _TypedArray_ [constructor](#constructor) performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Let _constructorName_ be the String value of the [Constructor](#constructor) Name value specified in [Table 73](#table-the-typedarray-constructors) for this _TypedArray_ [constructor](#constructor).
3.  Let _proto_ be `"%_TypedArray_.prototype%"`.
4.  Let _numberOfArgs_ be the number of elements in _args_.
5.  If _numberOfArgs_ = 0, then
    1.  Return ? [AllocateTypedArray](#sec-allocatetypedarray)(_constructorName_, NewTarget, _proto_, 0).
6.  Else,
    1.  Let _firstArgument_ be _args_\[0\].
    2.  If _firstArgument_ [is an Object](#sec-object-type), then
        1.  Let _O_ be ? [AllocateTypedArray](#sec-allocatetypedarray)(_constructorName_, NewTarget, _proto_).
        2.  If _firstArgument_ has a _\[\[TypedArrayName\]\]_ internal slot, then
            1.  Perform ? [InitializeTypedArrayFromTypedArray](#sec-initializetypedarrayfromtypedarray)(_O_, _firstArgument_).
        3.  Else if _firstArgument_ has an _\[\[ArrayBufferData\]\]_ internal slot, then
            1.  If _numberOfArgs_ > 1, let _byteOffset_ be _args_\[1\]; else let _byteOffset_ be undefined.
            2.  If _numberOfArgs_ > 2, let _length_ be _args_\[2\]; else let _length_ be undefined.
            3.  Perform ? [InitializeTypedArrayFromArrayBuffer](#sec-initializetypedarrayfromarraybuffer)(_O_, _firstArgument_, _byteOffset_, _length_).
        4.  Else,
            1.  [Assert](#assert): _firstArgument_ [is an Object](#sec-object-type) and _firstArgument_ does not have either a _\[\[TypedArrayName\]\]_ or an _\[\[ArrayBufferData\]\]_ internal slot.
            2.  Let _usingIterator_ be ? [GetMethod](#sec-getmethod)(_firstArgument_, [%Symbol.iterator%](#sec-well-known-symbols)).
            3.  If _usingIterator_ is not undefined, then
                1.  Let _values_ be ? [IteratorToList](#sec-iteratortolist)(? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_firstArgument_, _usingIterator_)).
                2.  Perform ? [InitializeTypedArrayFromList](#sec-initializetypedarrayfromlist)(_O_, _values_).
            4.  Else,
                1.  NOTE: _firstArgument_ is not an [iterable object](#sec-iterable-interface), so assume it is already an [array-like object](#sec-lengthofarraylike).
                2.  Perform ? [InitializeTypedArrayFromArrayLike](#sec-initializetypedarrayfromarraylike)(_O_, _firstArgument_).
        5.  Return _O_.
    3.  Else,
        1.  [Assert](#assert): _firstArgument_ [is not an Object](#sec-object-type).
        2.  Let _elementLength_ be ? [ToIndex](#sec-toindex)(_firstArgument_).
        3.  Return ? [AllocateTypedArray](#sec-allocatetypedarray)(_constructorName_, NewTarget, _proto_, _elementLength_).


# 23.2.5.1.1 AllocateTypedArray ( _constructorName_, _newTarget_, _defaultProto_ \[, _length_ \] )

The abstract operation AllocateTypedArray takes arguments _constructorName_ (a String which is the name of a [TypedArray](#typedarray) [constructor](#constructor) in [Table 73](#table-the-typedarray-constructors)), _newTarget_ (a [constructor](#constructor)), and _defaultProto_ (a String) and optional argument _length_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [TypedArray](#typedarray) or a [throw completion](#sec-completion-record-specification-type). It is used to validate and create an instance of a [TypedArray](#typedarray) [constructor](#constructor). If the _length_ argument is passed, an ArrayBuffer of that length is also allocated and associated with the new [TypedArray](#typedarray) instance. AllocateTypedArray provides common semantics that is used by _TypedArray_. It performs the following steps when called:

1.  Let _proto_ be ? [GetPrototypeFromConstructor](#sec-getprototypefromconstructor)(_newTarget_, _defaultProto_).
2.  Let _obj_ be [TypedArrayCreate](#sec-typedarraycreate)(_proto_).
3.  [Assert](#assert): _obj_._\[\[ViewedArrayBuffer\]\]_ is undefined.
4.  Set _obj_._\[\[TypedArrayName\]\]_ to _constructorName_.
5.  If _constructorName_ is either "BigInt64Array" or "BigUint64Array", set _obj_._\[\[ContentType\]\]_ to bigint.
6.  Otherwise, set _obj_._\[\[ContentType\]\]_ to number.
7.  If _length_ is not present, then
    1.  Set _obj_._\[\[ByteLength\]\]_ to 0.
    2.  Set _obj_._\[\[ByteOffset\]\]_ to 0.
    3.  Set _obj_._\[\[ArrayLength\]\]_ to 0.
8.  Else,
    1.  Perform ? [AllocateTypedArrayBuffer](#sec-allocatetypedarraybuffer)(_obj_, _length_).
9.  Return _obj_.


# 23.2.5.1.2 InitializeTypedArrayFromTypedArray ( _O_, _srcArray_ )

The abstract operation InitializeTypedArrayFromTypedArray takes arguments _O_ (a [TypedArray](#typedarray)) and _srcArray_ (a [TypedArray](#typedarray)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _srcData_ be _srcArray_._\[\[ViewedArrayBuffer\]\]_.
2.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_O_).
3.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
4.  Let _srcType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_srcArray_).
5.  Let _srcElementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_srcArray_).
6.  Let _srcByteOffset_ be _srcArray_._\[\[ByteOffset\]\]_.
7.  Let _srcRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_srcArray_, seq-cst).
8.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_srcRecord_) is true, throw a TypeError exception.
9.  Let _elementLength_ be [TypedArrayLength](#sec-typedarraylength)(_srcRecord_).
10.  Let _byteLength_ be _elementSize_ × _elementLength_.
11.  If _elementType_ is _srcType_, then
     1.  Let _data_ be ? [CloneArrayBuffer](#sec-clonearraybuffer)(_srcData_, _srcByteOffset_, _byteLength_).
12.  Else,
     1.  Let _data_ be ? [AllocateArrayBuffer](#sec-allocatearraybuffer)([%ArrayBuffer%](#sec-arraybuffer-constructor), _byteLength_).
     2.  If _srcArray_._\[\[ContentType\]\]_ is not _O_._\[\[ContentType\]\]_, throw a TypeError exception.
     3.  Let _srcByteIndex_ be _srcByteOffset_.
     4.  Let _targetByteIndex_ be 0.
     5.  Let _count_ be _elementLength_.
     6.  Repeat, while _count_ > 0,
         1.  Let _value_ be [GetValueFromBuffer](#sec-getvaluefrombuffer)(_srcData_, _srcByteIndex_, _srcType_, true, unordered).
         2.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_data_, _targetByteIndex_, _elementType_, _value_, true, unordered).
         3.  Set _srcByteIndex_ to _srcByteIndex_ + _srcElementSize_.
         4.  Set _targetByteIndex_ to _targetByteIndex_ + _elementSize_.
         5.  Set _count_ to _count_ - 1.
13.  Set _O_._\[\[ViewedArrayBuffer\]\]_ to _data_.
14.  Set _O_._\[\[ByteLength\]\]_ to _byteLength_.
15.  Set _O_._\[\[ByteOffset\]\]_ to 0.
16.  Set _O_._\[\[ArrayLength\]\]_ to _elementLength_.
17.  Return unused.


# 23.2.5.1.3 InitializeTypedArrayFromArrayBuffer ( _O_, _buffer_, _byteOffset_, _length_ )

The abstract operation InitializeTypedArrayFromArrayBuffer takes arguments _O_ (a [TypedArray](#typedarray)), _buffer_ (an ArrayBuffer or a SharedArrayBuffer), _byteOffset_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _length_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
2.  Let _offset_ be ? [ToIndex](#sec-toindex)(_byteOffset_).
3.  If _offset_ [modulo](#eqn-modulo) _elementSize_ ≠ 0, throw a RangeError exception.
4.  Let _bufferIsFixedLength_ be [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_buffer_).
5.  If _length_ is not undefined, then
    1.  Let _newLength_ be ? [ToIndex](#sec-toindex)(_length_).
6.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_buffer_) is true, throw a TypeError exception.
7.  Let _bufferByteLength_ be [ArrayBufferByteLength](#sec-arraybufferbytelength)(_buffer_, seq-cst).
8.  If _length_ is undefined and _bufferIsFixedLength_ is false, then
    1.  If _offset_ > _bufferByteLength_, throw a RangeError exception.
    2.  Set _O_._\[\[ByteLength\]\]_ to auto.
    3.  Set _O_._\[\[ArrayLength\]\]_ to auto.
9.  Else,
    1.  If _length_ is undefined, then
        1.  If _bufferByteLength_ [modulo](#eqn-modulo) _elementSize_ ≠ 0, throw a RangeError exception.
        2.  Let _newByteLength_ be _bufferByteLength_ - _offset_.
        3.  If _newByteLength_ < 0, throw a RangeError exception.
    2.  Else,
        1.  Let _newByteLength_ be _newLength_ × _elementSize_.
        2.  If _offset_ + _newByteLength_ > _bufferByteLength_, throw a RangeError exception.
    3.  Set _O_._\[\[ByteLength\]\]_ to _newByteLength_.
    4.  Set _O_._\[\[ArrayLength\]\]_ to _newByteLength_ / _elementSize_.
10.  Set _O_._\[\[ViewedArrayBuffer\]\]_ to _buffer_.
11.  Set _O_._\[\[ByteOffset\]\]_ to _offset_.
12.  Return unused.


# 23.2.5.1.4 InitializeTypedArrayFromList ( _O_, _values_ )

The abstract operation InitializeTypedArrayFromList takes arguments _O_ (a [TypedArray](#typedarray)) and _values_ (a [List](#sec-list-and-record-specification-type) of [ECMAScript language values](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _len_ be the number of elements in _values_.
2.  Perform ? [AllocateTypedArrayBuffer](#sec-allocatetypedarraybuffer)(_O_, _len_).
3.  Let _k_ be 0.
4.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kValue_ be the first element of _values_.
    3.  Remove the first element from _values_.
    4.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _Pk_, _kValue_, true).
    5.  Set _k_ to _k_ + 1.
5.  [Assert](#assert): _values_ is now an empty [List](#sec-list-and-record-specification-type).
6.  Return unused.


# 23.2.5.1.5 InitializeTypedArrayFromArrayLike ( _O_, _arrayLike_ )

The abstract operation InitializeTypedArrayFromArrayLike takes arguments _O_ (a [TypedArray](#typedarray)) and _arrayLike_ (an Object, but not a [TypedArray](#typedarray) or an ArrayBuffer) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_arrayLike_).
2.  Perform ? [AllocateTypedArrayBuffer](#sec-allocatetypedarraybuffer)(_O_, _len_).
3.  Let _k_ be 0.
4.  Repeat, while _k_ < _len_,
    1.  Let _Pk_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
    2.  Let _kValue_ be ? [Get](#sec-get-o-p)(_arrayLike_, _Pk_).
    3.  Perform ? [Set](#sec-set-o-p-v-throw)(_O_, _Pk_, _kValue_, true).
    4.  Set _k_ to _k_ + 1.
5.  Return unused.


# 23.2.5.1.6 AllocateTypedArrayBuffer ( _O_, _length_ )

The abstract operation AllocateTypedArrayBuffer takes arguments _O_ (a [TypedArray](#typedarray)) and _length_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It allocates and associates an ArrayBuffer with _O_. It performs the following steps when called:

1.  [Assert](#assert): _O_._\[\[ViewedArrayBuffer\]\]_ is undefined.
2.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_O_).
3.  Let _byteLength_ be _elementSize_ × _length_.
4.  Let _data_ be ? [AllocateArrayBuffer](#sec-allocatearraybuffer)([%ArrayBuffer%](#sec-arraybuffer-constructor), _byteLength_).
5.  Set _O_._\[\[ViewedArrayBuffer\]\]_ to _data_.
6.  Set _O_._\[\[ByteLength\]\]_ to _byteLength_.
7.  Set _O_._\[\[ByteOffset\]\]_ to 0.
8.  Set _O_._\[\[ArrayLength\]\]_ to _length_.
9.  Return unused.


# 23.2.6 Properties of the _TypedArray_ Constructors

Each _TypedArray_ [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%TypedArray%](#sec-%typedarray%-intrinsic-object).
-   has a "length" property whose value is 3<sub>𝔽</sub>.
-   has a "name" property whose value is the String value of the [constructor](#constructor) name specified for it in [Table 73](#table-the-typedarray-constructors).
-   has the following properties:


# 23.2.6.1 _TypedArray_.BYTES\_PER\_ELEMENT

The value of _TypedArray_`.BYTES_PER_ELEMENT` is the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for _TypedArray_.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 23.2.6.2 _TypedArray_.prototype

The initial value of _TypedArray_`.prototype` is the corresponding _TypedArray_ prototype intrinsic object ([23.2.7](#sec-properties-of-typedarray-prototype-objects)).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 23.2.7 Properties of the _TypedArray_ Prototype Objects

Each _TypedArray_ prototype object:

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%TypedArray.prototype%](#sec-properties-of-the-%typedarrayprototype%-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[ViewedArrayBuffer\]\]_ or any other of the internal slots that are specific to _TypedArray_ instance objects.


# 23.2.7.1 _TypedArray_.prototype.BYTES\_PER\_ELEMENT

The value of _TypedArray_`.prototype.BYTES_PER_ELEMENT` is the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for _TypedArray_.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 23.2.7.2 _TypedArray_.prototype.constructor

The initial value of the "constructor" property of the prototype for a given _TypedArray_ [constructor](#constructor) is the [constructor](#constructor) itself.


# 23.2.8 Properties of _TypedArray_ Instances

_TypedArray_ instances are [TypedArrays](#typedarray). Each _TypedArray_ instance inherits properties from the corresponding _TypedArray_ prototype object. Each _TypedArray_ instance has the following internal slots: _\[\[ViewedArrayBuffer\]\]_, _\[\[TypedArrayName\]\]_, _\[\[ContentType\]\]_, _\[\[ByteLength\]\]_, _\[\[ByteOffset\]\]_, and _\[\[ArrayLength\]\]_.


# 23.3 Uint8Array Objects

A Uint8Array is a particular kind of _TypedArray_ as described above. In addition, there are additional methods on the Uint8Array [constructor](#constructor) ([23.3.1](#sec-additional-properties-of-the-uint8array-constructor)) and on the Uint8Array prototype object ([23.3.2](#sec-additional-properties-of-the-uint8array-prototype-object)).


# 23.3.1 Additional Properties of the Uint8Array Constructor


# 23.3.1.1 Uint8Array.fromBase64 ( _string_ \[, _options_ \] )

1.  If _string_ [is not a String](#sec-ecmascript-language-types-string-type), throw a TypeError exception.
2.  Let _opts_ be ? [GetOptionsObject](#sec-getoptionsobject)(_options_).
3.  Let _alphabet_ be ? [Get](#sec-get-o-p)(_opts_, "alphabet").
4.  If _alphabet_ is undefined, set _alphabet_ to "base64".
5.  If _alphabet_ is neither "base64" nor "base64url", throw a TypeError exception.
6.  Let _lastChunkHandling_ be ? [Get](#sec-get-o-p)(_opts_, "lastChunkHandling").
7.  If _lastChunkHandling_ is undefined, set _lastChunkHandling_ to "loose".
8.  If _lastChunkHandling_ is not one of "loose", "strict", or "stop-before-partial", throw a TypeError exception.
9.  Let _result_ be [FromBase64](#sec-frombase64)(_string_, _alphabet_, _lastChunkHandling_).
10.  If _result_._\[\[Error\]\]_ is not none, then
     1.  Return [ThrowCompletion](#sec-throwcompletion)(_result_._\[\[Error\]\]_).
11.  Let _resultLength_ be the number of elements in _result_._\[\[Bytes\]\]_.
12.  Let _ta_ be ? [AllocateTypedArray](#sec-allocatetypedarray)("Uint8Array", [%Uint8Array%](#sec-typedarray-objects), "%Uint8Array.prototype%", _resultLength_).
13.  [Assert](#assert): _ta_._\[\[ViewedArrayBuffer\]\]_._\[\[ArrayBufferByteLength\]\]_ is the number of elements in _result_._\[\[Bytes\]\]_.
14.  Set the value at each index of _ta_._\[\[ViewedArrayBuffer\]\]_._\[\[ArrayBufferData\]\]_ to the value at the corresponding index of _result_._\[\[Bytes\]\]_.
15.  Return _ta_.


# 23.3.1.2 Uint8Array.fromHex ( _string_ )

1.  If _string_ [is not a String](#sec-ecmascript-language-types-string-type), throw a TypeError exception.
2.  Let _result_ be [FromHex](#sec-fromhex)(_string_).
3.  If _result_._\[\[Error\]\]_ is not none, then
    1.  Return [ThrowCompletion](#sec-throwcompletion)(_result_._\[\[Error\]\]_).
4.  Let _resultLength_ be the number of elements in _result_._\[\[Bytes\]\]_.
5.  Let _ta_ be ? [AllocateTypedArray](#sec-allocatetypedarray)("Uint8Array", [%Uint8Array%](#sec-typedarray-objects), "%Uint8Array.prototype%", _resultLength_).
6.  [Assert](#assert): _ta_._\[\[ViewedArrayBuffer\]\]_._\[\[ArrayBufferByteLength\]\]_ is the number of elements in _result_._\[\[Bytes\]\]_.
7.  Set the value at each index of _ta_._\[\[ViewedArrayBuffer\]\]_._\[\[ArrayBufferData\]\]_ to the value at the corresponding index of _result_._\[\[Bytes\]\]_.
8.  Return _ta_.


# 23.3.2 Additional Properties of the Uint8Array Prototype Object


# 23.3.2.1 Uint8Array.prototype.setFromBase64 ( _string_ \[, _options_ \] )

1.  Let _into_ be the this value.
2.  Perform ? [ValidateUint8Array](#sec-validateuint8array)(_into_).
3.  If _string_ [is not a String](#sec-ecmascript-language-types-string-type), throw a TypeError exception.
4.  Let _opts_ be ? [GetOptionsObject](#sec-getoptionsobject)(_options_).
5.  Let _alphabet_ be ? [Get](#sec-get-o-p)(_opts_, "alphabet").
6.  If _alphabet_ is undefined, set _alphabet_ to "base64".
7.  If _alphabet_ is neither "base64" nor "base64url", throw a TypeError exception.
8.  Let _lastChunkHandling_ be ? [Get](#sec-get-o-p)(_opts_, "lastChunkHandling").
9.  If _lastChunkHandling_ is undefined, set _lastChunkHandling_ to "loose".
10.  If _lastChunkHandling_ is not one of "loose", "strict", or "stop-before-partial", throw a TypeError exception.
11.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_into_, seq-cst).
12.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
13.  Let _byteLength_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
14.  Let _result_ be [FromBase64](#sec-frombase64)(_string_, _alphabet_, _lastChunkHandling_, _byteLength_).
15.  Let _bytes_ be _result_._\[\[Bytes\]\]_.
16.  Let _written_ be the number of elements in _bytes_.
17.  NOTE: [FromBase64](#sec-frombase64) does not invoke any user code, so the ArrayBuffer backing _into_ cannot have been detached or shrunk.
18.  [Assert](#assert): _written_ ≤ _byteLength_.
19.  Perform [SetUint8ArrayBytes](#sec-setuint8arraybytes)(_into_, _bytes_).
20.  If _result_._\[\[Error\]\]_ is not none, then
     1.  Return [ThrowCompletion](#sec-throwcompletion)(_result_._\[\[Error\]\]_).
21.  Let _resultObject_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
22.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "read", [𝔽](#𝔽)(_result_._\[\[Read\]\]_)).
23.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "written", [𝔽](#𝔽)(_written_)).
24.  Return _resultObject_.


# 23.3.2.2 Uint8Array.prototype.setFromHex ( _string_ )

1.  Let _into_ be the this value.
2.  Perform ? [ValidateUint8Array](#sec-validateuint8array)(_into_).
3.  If _string_ [is not a String](#sec-ecmascript-language-types-string-type), throw a TypeError exception.
4.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_into_, seq-cst).
5.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
6.  Let _byteLength_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
7.  Let _result_ be [FromHex](#sec-fromhex)(_string_, _byteLength_).
8.  Let _bytes_ be _result_._\[\[Bytes\]\]_.
9.  Let _written_ be the number of elements in _bytes_.
10.  NOTE: [FromHex](#sec-fromhex) does not invoke any user code, so the ArrayBuffer backing _into_ cannot have been detached or shrunk.
11.  [Assert](#assert): _written_ ≤ _byteLength_.
12.  Perform [SetUint8ArrayBytes](#sec-setuint8arraybytes)(_into_, _bytes_).
13.  If _result_._\[\[Error\]\]_ is not none, then
     1.  Return [ThrowCompletion](#sec-throwcompletion)(_result_._\[\[Error\]\]_).
14.  Let _resultObject_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
15.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "read", [𝔽](#𝔽)(_result_._\[\[Read\]\]_)).
16.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "written", [𝔽](#𝔽)(_written_)).
17.  Return _resultObject_.


# 23.3.2.3 Uint8Array.prototype.toBase64 ( \[_options_ \] )

1.  Let _O_ be the this value.
2.  Perform ? [ValidateUint8Array](#sec-validateuint8array)(_O_).
3.  Let _opts_ be ? [GetOptionsObject](#sec-getoptionsobject)(_options_).
4.  Let _alphabet_ be ? [Get](#sec-get-o-p)(_opts_, "alphabet").
5.  If _alphabet_ is undefined, set _alphabet_ to "base64".
6.  If _alphabet_ is neither "base64" nor "base64url", throw a TypeError exception.
7.  Let _omitPadding_ be [ToBoolean](#sec-toboolean)(? [Get](#sec-get-o-p)(_opts_, "omitPadding")).
8.  Let _toEncode_ be ? [GetUint8ArrayBytes](#sec-getuint8arraybytes)(_O_).
9.  If _alphabet_ is "base64", then
    1.  Let _outAscii_ be the sequence of code points which results from encoding _toEncode_ according to the base64 encoding specified in section 4 of [RFC 4648](https://datatracker.ietf.org/doc/html/rfc4648). Padding is included if and only if _omitPadding_ is false.
10.  Else,
     1.  [Assert](#assert): _alphabet_ is "base64url".
     2.  Let _outAscii_ be the sequence of code points which results from encoding _toEncode_ according to the base64url encoding specified in section 5 of [RFC 4648](https://datatracker.ietf.org/doc/html/rfc4648). Padding is included if and only if _omitPadding_ is false.
11.  Return [CodePointsToString](#sec-codepointstostring)(_outAscii_).


# 23.3.2.4 Uint8Array.prototype.toHex ( )

1.  Let _O_ be the this value.
2.  Perform ? [ValidateUint8Array](#sec-validateuint8array)(_O_).
3.  Let _toEncode_ be ? [GetUint8ArrayBytes](#sec-getuint8arraybytes)(_O_).
4.  Let _out_ be the empty String.
5.  For each byte _byte_ of _toEncode_, do
    1.  Let _hex_ be [Number::toString](#sec-numeric-types-number-tostring)([𝔽](#𝔽)(_byte_), 16).
    2.  Set _hex_ to [StringPad](#sec-stringpad)(_hex_, 2, "0", start).
    3.  Set _out_ to the [string-concatenation](#string-concatenation) of _out_ and _hex_.
6.  Return _out_.


# 23.3.3 Abstract Operations for Uint8Array Objects


# 23.3.3.1 ValidateUint8Array ( _ta_ )

The abstract operation ValidateUint8Array takes argument _ta_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_ta_, _\[\[TypedArrayName\]\]_).
2.  If _ta_._\[\[TypedArrayName\]\]_ is not "Uint8Array", throw a TypeError exception.
3.  Return unused.


# 23.3.3.2 GetUint8ArrayBytes ( _ta_ )

The abstract operation GetUint8ArrayBytes takes argument _ta_ (a Uint8Array) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _buffer_ be _ta_._\[\[ViewedArrayBuffer\]\]_.
2.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_ta_, seq-cst).
3.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
4.  Let _len_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
5.  Let _byteOffset_ be _ta_._\[\[ByteOffset\]\]_.
6.  Let _bytes_ be a new empty [List](#sec-list-and-record-specification-type).
7.  Let _index_ be 0.
8.  Repeat, while _index_ < _len_,
    1.  Let _byteIndex_ be _byteOffset_ + _index_.
    2.  Let _byte_ be [ℝ](#ℝ)([GetValueFromBuffer](#sec-getvaluefrombuffer)(_buffer_, _byteIndex_, uint8, true, unordered)).
    3.  Append _byte_ to _bytes_.
    4.  Set _index_ to _index_ + 1.
9.  Return _bytes_.


# 23.3.3.3 SetUint8ArrayBytes ( _into_, _bytes_ )

The abstract operation SetUint8ArrayBytes takes arguments _into_ (a Uint8Array) and _bytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)) and returns unused. It performs the following steps when called:

1.  Let _offset_ be _into_._\[\[ByteOffset\]\]_.
2.  Let _len_ be the number of elements in _bytes_.
3.  Let _index_ be 0.
4.  Repeat, while _index_ < _len_,
    1.  Let _byte_ be _bytes_\[_index_\].
    2.  Let _byteIndexInBuffer_ be _index_ + _offset_.
    3.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_into_._\[\[ViewedArrayBuffer\]\]_, _byteIndexInBuffer_, uint8, [𝔽](#𝔽)(_byte_), true, unordered).
    4.  Set _index_ to _index_ + 1.
5.  Return unused.


# 23.3.3.4 SkipAsciiWhitespace ( _string_, _index_ )

The abstract operation SkipAsciiWhitespace takes arguments _string_ (a String) and _index_ (a non-negative [integer](#integer)) and returns a non-negative [integer](#integer). It performs the following steps when called:

1.  Let _length_ be the length of _string_.
2.  Repeat, while _index_ < _length_,
    1.  Let _char_ be the code unit at index _index_ within _string_.
    2.  If _char_ is not one of 0x0009 (TAB), 0x000A (LF), 0x000C (FF), 0x000D (CR), or 0x0020 (SPACE), then
        1.  Return _index_.
    3.  Set _index_ to _index_ + 1.
3.  Return _index_.


# 23.3.3.5 DecodeFinalBase64Chunk ( _chunk_, _throwOnExtraBits_ )

The abstract operation DecodeFinalBase64Chunk takes arguments _chunk_ (a String of length 2 or 3) and _throwOnExtraBits_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks), or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _chunkLength_ be the length of _chunk_.
2.  If _chunkLength_ = 2, then
    1.  Set _chunk_ to the [string-concatenation](#string-concatenation) of _chunk_ and "AA".
3.  Else,
    1.  [Assert](#assert): _chunkLength_ is 3.
    2.  Set _chunk_ to the [string-concatenation](#string-concatenation) of _chunk_ and "A".
4.  Let _bytes_ be [DecodeFullLengthBase64Chunk](#sec-decodefulllengthbase64chunk)(_chunk_).
5.  If _chunkLength_ = 2, then
    1.  If _throwOnExtraBits_ is true and _bytes_\[1\] ≠ 0, then
        1.  Throw a SyntaxError exception.
    2.  Return « _bytes_\[0\] ».
6.  Else,
    1.  If _throwOnExtraBits_ is true and _bytes_\[2\] ≠ 0, then
        1.  Throw a SyntaxError exception.
    2.  Return « _bytes_\[0\], _bytes_\[1\] ».


# 23.3.3.6 DecodeFullLengthBase64Chunk ( _chunk_ )

The abstract operation DecodeFullLengthBase64Chunk takes argument _chunk_ (a String of length 4) and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks) of length 3.

The standard base64 alphabet is "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", i.e., the String whose elements are the code units corresponding to every letter and number in the Unicode Basic Latin block along with "+" and "/".

1.  Let _byteSequence_ be the unique sequence of 3 bytes resulting from decoding _chunk_ as base64 (i.e., the sequence such that applying the base64 encoding specified in section 4 of [RFC 4648](https://datatracker.ietf.org/doc/html/rfc4648) to _byteSequence_ would produce _chunk_).
2.  Return a [List](#sec-list-and-record-specification-type) whose elements are the elements of _byteSequence_, in order.


# 23.3.3.7 FromBase64 ( _string_, _alphabet_, _lastChunkHandling_ \[, _maxLength_ \] )

The abstract operation FromBase64 takes arguments _string_ (a String), _alphabet_ ("base64" or "base64url"), and _lastChunkHandling_ ("loose", "strict", or "stop-before-partial") and optional argument _maxLength_ (a non-negative [integer](#integer)) and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[Read\]\]_ (an [integer](#integer)), _\[\[Bytes\]\]_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)), and _\[\[Error\]\]_ (a SyntaxError object or none). It performs the following steps when called:

1.  If _maxLength_ is not present, then
    1.  Set _maxLength_ to 2<sup>53</sup> - 1.
    2.  NOTE: Because the input [is a String](#sec-ecmascript-language-types-string-type), the length of Strings is limited to 2<sup>53</sup> - 1 characters, and the output requires no more bytes than the input has characters, this limit can never be reached. However, it is editorially convenient to use a [finite](#finite) value for _maxLength_.
2.  NOTE: The order of validation and decoding in the algorithm below is not observable. Implementations are encouraged to perform them in whatever order is most efficient, possibly interleaving validation with decoding.
3.  If _maxLength_ = 0, then
    1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: 0, _\[\[Bytes\]\]_: « », _\[\[Error\]\]_: none }.
4.  Let _read_ be 0.
5.  Let _bytes_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Let _chunk_ be the empty String.
7.  Let _chunkLength_ be 0.
8.  Let _index_ be 0.
9.  Let _length_ be the length of _string_.
10.  Repeat,
     1.  Set _index_ to [SkipAsciiWhitespace](#sec-skipasciiwhitespace)(_string_, _index_).
     2.  If _index_ = _length_, then
         1.  If _chunkLength_ > 0, then
             1.  If _lastChunkHandling_ is "stop-before-partial", then
                 1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: none }.
             2.  Else if _lastChunkHandling_ is "loose", then
                 1.  If _chunkLength_ = 1, then
                     1.  Let _error_ be a newly created SyntaxError object.
                     2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
                 2.  Set _bytes_ to the [list-concatenation](#list-concatenation) of _bytes_ and ! [DecodeFinalBase64Chunk](#sec-decodefinalbase64chunk)(_chunk_, false).
             3.  Else,
                 1.  [Assert](#assert): _lastChunkHandling_ is "strict".
                 2.  Let _error_ be a newly created SyntaxError object.
                 3.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
         2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _length_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: none }.
     3.  Let _char_ be the [substring](#substring) of _string_ from _index_ to _index_ + 1.
     4.  Set _index_ to _index_ + 1.
     5.  If _char_ is "=", then
         1.  If _chunkLength_ < 2, then
             1.  Let _error_ be a newly created SyntaxError object.
             2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
         2.  Set _index_ to [SkipAsciiWhitespace](#sec-skipasciiwhitespace)(_string_, _index_).
         3.  If _chunkLength_ = 2, then
             1.  If _index_ = _length_, then
                 1.  If _lastChunkHandling_ is "stop-before-partial", then
                     1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: none }.
                 2.  Let _error_ be a newly created SyntaxError object.
                 3.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
             2.  Set _char_ to the [substring](#substring) of _string_ from _index_ to _index_ + 1.
             3.  If _char_ is "=", then
                 1.  Set _index_ to [SkipAsciiWhitespace](#sec-skipasciiwhitespace)(_string_, _index_ + 1).
         4.  If _index_ < _length_, then
             1.  Let _error_ be a newly created SyntaxError object.
             2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
         5.  If _lastChunkHandling_ is "strict", let _throwOnExtraBits_ be true; otherwise let _throwOnExtraBits_ be false.
         6.  Let _decodeResult_ be [Completion](#sec-completion-ao)([DecodeFinalBase64Chunk](#sec-decodefinalbase64chunk)(_chunk_, _throwOnExtraBits_)).
         7.  If _decodeResult_ is an [abrupt completion](#sec-completion-record-specification-type), then
             1.  Let _error_ be _decodeResult_._\[\[Value\]\]_.
             2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
         8.  Set _bytes_ to the [list-concatenation](#list-concatenation) of _bytes_ and ! _decodeResult_.
         9.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _length_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: none }.
     6.  If _alphabet_ is "base64url", then
         1.  If _char_ is either "+" or "/", then
             1.  Let _error_ be a newly created SyntaxError object.
             2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
         2.  Else if _char_ is "-", then
             1.  Set _char_ to "+".
         3.  Else if _char_ is "\_", then
             1.  Set _char_ to "/".
     7.  If the sole code unit of _char_ is not an element of the [standard base64 alphabet](#standard-base64-alphabet), then
         1.  Let _error_ be a newly created SyntaxError object.
         2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
     8.  Let _remaining_ be _maxLength_ - the number of elements in _bytes_.
     9.  If _remaining_ = 1 and _chunkLength_ = 2, or if _remaining_ = 2 and _chunkLength_ = 3, then
         1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: none }.
     10.  Set _chunk_ to the [string-concatenation](#string-concatenation) of _chunk_ and _char_.
     11.  Set _chunkLength_ to the length of _chunk_.
     12.  If _chunkLength_ = 4, then
          1.  Set _bytes_ to the [list-concatenation](#list-concatenation) of _bytes_ and [DecodeFullLengthBase64Chunk](#sec-decodefulllengthbase64chunk)(_chunk_).
          2.  Set _chunk_ to the empty String.
          3.  Set _chunkLength_ to 0.
          4.  Set _read_ to _index_.
          5.  If the number of elements in _bytes_ = _maxLength_, then
              1.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: none }.


# 23.3.3.8 FromHex ( _string_ \[, _maxLength_ \] )

The abstract operation FromHex takes argument _string_ (a String) and optional argument _maxLength_ (a non-negative [integer](#integer)) and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[Read\]\]_ (an [integer](#integer)), _\[\[Bytes\]\]_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)), and _\[\[Error\]\]_ (a SyntaxError object or none). It performs the following steps when called:

1.  If _maxLength_ is not present, set _maxLength_ to 2<sup>53</sup> - 1.
2.  Let _length_ be the length of _string_.
3.  Let _bytes_ be a new empty [List](#sec-list-and-record-specification-type).
4.  Let _read_ be 0.
5.  If _length_ [modulo](#eqn-modulo) 2 ≠ 0, then
    1.  Let _error_ be a newly created SyntaxError object.
    2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
6.  Repeat, while _read_ < _length_ and the number of elements in _bytes_ < _maxLength_,
    1.  Let _hexits_ be the [substring](#substring) of _string_ from _read_ to _read_ + 2.
    2.  If _hexits_ contains any code units which are not in "0123456789abcdefABCDEF", then
        1.  Let _error_ be a newly created SyntaxError object.
        2.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: _error_ }.
    3.  Set _read_ to _read_ + 2.
    4.  Let _byte_ be the [integer](#integer) value represented by _hexits_ in base-16 notation, using the letters A through F and a through f for digits with values 10 through 15.
    5.  Append _byte_ to _bytes_.
7.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Read\]\]_: _read_, _\[\[Bytes\]\]_: _bytes_, _\[\[Error\]\]_: none }.


# 24 Keyed Collections


# 24.1 Map Objects

Maps are collections of key/value pairs where both the keys and values may be arbitrary [ECMAScript language values](#sec-ecmascript-language-types). A distinct key value may only occur in one key/value pair within the Map's collection. Distinct key values are discriminated using the semantics of the [SameValueZero](#sec-samevaluezero) comparison algorithm.

Maps must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of elements in the collection. The data structure used in this specification is only intended to describe the required observable semantics of Maps. It is not intended to be a viable implementation model.


# 24.1.1 The Map Constructor

The Map [constructor](#constructor):

-   is %Map%.
-   is the initial value of the "Map" property of the [global object](#sec-global-object).
-   creates and initializes a new Map when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value in an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Map behaviour must include a `super` call to the Map [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the `Map.prototype` built-in methods.


# 24.1.1.1 Map ( \[_iterable_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Let _map_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Map.prototype%", « _\[\[MapData\]\]_ »).
3.  Set _map_._\[\[MapData\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
4.  If _iterable_ is either undefined or null, return _map_.
5.  Let _adder_ be ? [Get](#sec-get-o-p)(_map_, "set").
6.  If [IsCallable](#sec-iscallable)(_adder_) is false, throw a TypeError exception.
7.  Return ? [AddEntriesFromIterable](#sec-add-entries-from-iterable)(_map_, _iterable_, _adder_).

Note

If the parameter _iterable_ is present, it is expected to be an object that implements a [%Symbol.iterator%](#sec-well-known-symbols) method that returns an [iterator object](#sec-iterator-interface) that produces a two element [array-like object](#sec-lengthofarraylike) whose first element is a value that will be used as a Map key and whose second element is the value to associate with that key.


# 24.1.1.2 AddEntriesFromIterable ( _target_, _iterable_, _adder_ )

The abstract operation AddEntriesFromIterable takes arguments _target_ (an Object), _iterable_ (an [ECMAScript language value](#sec-ecmascript-language-types), but not undefined or null), and _adder_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). _adder_ will be invoked, with _target_ as the receiver. It performs the following steps when called:

1.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_iterable_, sync).
2.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, return _target_.
    3.  If _next_ [is not an Object](#sec-object-type), then
        1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
        2.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _error_).
    4.  Let _k_ be [Completion](#sec-completion-ao)([Get](#sec-get-o-p)(_next_, "0")).
    5.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_k_, _iteratorRecord_).
    6.  Let _v_ be [Completion](#sec-completion-ao)([Get](#sec-get-o-p)(_next_, "1")).
    7.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_v_, _iteratorRecord_).
    8.  Let _status_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_adder_, _target_, « _k_, _v_ »)).
    9.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_status_, _iteratorRecord_).

Note

The parameter _iterable_ is expected to be an object that implements a [%Symbol.iterator%](#sec-well-known-symbols) method that returns an [iterator object](#sec-iterator-interface) that produces a two element [array-like object](#sec-lengthofarraylike) whose first element is a value that will be used as a Map key and whose second element is the value to associate with that key.


# 24.1.2 Properties of the Map Constructor

The Map [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 24.1.2.1 Map.groupBy ( _items_, _callback_ )

Note

_callback_ should be a function that accepts two arguments. `groupBy` calls _callback_ once for each element in _items_, in ascending order, and constructs a new Map. Each value returned by _callback_ is used as a key in the Map. For each such key, the result Map has an entry whose key is that key and whose value is an array containing all the elements for which _callback_ returned that key.

_callback_ is called with two arguments: the value of the element and the index of the element.

The return value of `groupBy` is a Map.

This function performs the following steps when called:

1.  Let _groups_ be ? [GroupBy](#sec-groupby)(_items_, _callback_, collection).
2.  Let _map_ be ! [Construct](#sec-construct)([%Map%](#sec-map-constructor)).
3.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Elements\]\]_ } _g_ of _groups_, do
    1.  Let _elements_ be [CreateArrayFromList](#sec-createarrayfromlist)(_g_._\[\[Elements\]\]_).
    2.  Let _entry_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_: _g_._\[\[Key\]\]_, _\[\[Value\]\]_: _elements_ }.
    3.  Append _entry_ to _map_._\[\[MapData\]\]_.
4.  Return _map_.


# 24.1.2.2 Map.prototype

The initial value of `Map.prototype` is the [Map prototype object](#sec-properties-of-the-map-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 24.1.2.3 get Map \[%Symbol.species% \]

`Map[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".

Note

Methods that create derived collection objects should call [%Symbol.species%](#sec-well-known-symbols) to determine the [constructor](#constructor) to use to create the derived objects. Subclass [constructor](#constructor) may over-ride [%Symbol.species%](#sec-well-known-symbols) to change the default [constructor](#constructor) assignment.


# 24.1.3 Properties of the Map Prototype Object

The Map prototype object:

-   is %Map.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[MapData\]\]_ internal slot.


# 24.1.3.1 Map.prototype.clear ( )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[MapData\]\]_).
3.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[MapData\]\]_, do
    1.  Set _p_._\[\[Key\]\]_ to empty.
    2.  Set _p_._\[\[Value\]\]_ to empty.
4.  Return undefined.

Note

The existing _\[\[MapData\]\]_ [List](#sec-list-and-record-specification-type) is preserved because there may be existing [Map Iterator objects](#sec-map-iterator-objects) that are suspended midway through iterating over that [List](#sec-list-and-record-specification-type).


# 24.1.3.2 Map.prototype.constructor

The initial value of `Map.prototype.constructor` is [%Map%](#sec-map-constructor).


# 24.1.3.3 Map.prototype.delete ( _key_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[MapData\]\]_).
3.  Set _key_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_key_).
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[MapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, then
        1.  Set _p_._\[\[Key\]\]_ to empty.
        2.  Set _p_._\[\[Value\]\]_ to empty.
        3.  Return true.
5.  Return false.

Note

The value empty is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.


# 24.1.3.4 Map.prototype.entries ( )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Return ? [CreateMapIterator](#sec-createmapiterator)(_M_, key+value).


# 24.1.3.5 Map.prototype.forEach ( _callback_ \[, _thisArg_ \] )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[MapData\]\]_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  Let _entries_ be _M_._\[\[MapData\]\]_.
5.  Let _numEntries_ be the number of elements in _entries_.
6.  Let _index_ be 0.
7.  Repeat, while _index_ < _numEntries_,
    1.  Let _e_ be _entries_\[_index_\].
    2.  Set _index_ to _index_ + 1.
    3.  If _e_._\[\[Key\]\]_ is not empty, then
        1.  Perform ? [Call](#sec-call)(_callback_, _thisArg_, « _e_._\[\[Value\]\]_, _e_._\[\[Key\]\]_, _M_ »).
        2.  NOTE: The number of elements in _entries_ may have increased during execution of _callback_.
        3.  Set _numEntries_ to the number of elements in _entries_.
8.  Return undefined.

Note

_callback_ should be a function that accepts three arguments. `forEach` calls _callback_ once for each key/value pair present in the Map, in key insertion order. _callback_ is called only for keys of the Map which actually exist; it is not called for keys that have been deleted from the Map.

If a _thisArg_ parameter is provided, it will be used as the this value for each invocation of _callback_. If it is not provided, undefined is used instead.

_callback_ is called with three arguments: the value of the item, the key of the item, and the Map being traversed.

`forEach` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_. Each entry of a map's _\[\[MapData\]\]_ is only visited once. New keys added after the call to `forEach` begins are visited. A key will be revisited if it is deleted after it has been visited and then re-added before the `forEach` call completes. Keys that are deleted after the call to `forEach` begins and before being visited are not visited unless the key is added again before the `forEach` call completes.


# 24.1.3.6 Map.prototype.get ( _key_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[MapData\]\]_).
3.  Set _key_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_key_).
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[MapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, return _p_._\[\[Value\]\]_.
5.  Return undefined.


# 24.1.3.7 Map.prototype.has ( _key_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[MapData\]\]_).
3.  Set _key_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_key_).
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[MapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, return true.
5.  Return false.


# 24.1.3.8 Map.prototype.keys ( )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Return ? [CreateMapIterator](#sec-createmapiterator)(_M_, key).


# 24.1.3.9 Map.prototype.set ( _key_, _value_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[MapData\]\]_).
3.  Set _key_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_key_).
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[MapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, then
        1.  Set _p_._\[\[Value\]\]_ to _value_.
        2.  Return _M_.
5.  Let _p_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_: _key_, _\[\[Value\]\]_: _value_ }.
6.  Append _p_ to _M_._\[\[MapData\]\]_.
7.  Return _M_.


# 24.1.3.10 get Map.prototype.size

`Map.prototype.size` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[MapData\]\]_).
3.  Let _count_ be 0.
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[MapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty, set _count_ to _count_ + 1.
5.  Return [𝔽](#𝔽)(_count_).


# 24.1.3.11 Map.prototype.values ( )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Return ? [CreateMapIterator](#sec-createmapiterator)(_M_, value).


# 24.1.3.12 Map.prototype \[%Symbol.iterator% \] ( )

The initial value of the [%Symbol.iterator%](#sec-well-known-symbols) property is %Map.prototype.entries%, defined in [24.1.3.4](#sec-map.prototype.entries).


# 24.1.3.13 Map.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Map".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 24.1.4 Properties of Map Instances

Map instances are [ordinary objects](#ordinary-object) that inherit properties from the [Map prototype object](#sec-properties-of-the-map-prototype-object). Map instances also have a _\[\[MapData\]\]_ internal slot.


# 24.1.5 Map Iterator Objects

A Map Iterator is an object that represents a specific iteration over some specific Map instance object. There is not a named [constructor](#constructor) for Map Iterator objects. Instead, Map Iterator objects are created by calling certain methods of Map instance objects.


# 24.1.5.1 CreateMapIterator ( _map_, _kind_ )

The abstract operation CreateMapIterator takes arguments _map_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _kind_ (key+value, key, or value) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Generator or a [throw completion](#sec-completion-record-specification-type). It is used to create [iterator objects](#sec-iterator-interface) for Map methods that return such [iterators](#sec-iterator-interface). It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_map_, _\[\[MapData\]\]_).
2.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _map_ and _kind_ and performs the following steps when called:
    1.  Let _entries_ be _map_._\[\[MapData\]\]_.
    2.  Let _index_ be 0.
    3.  Let _numEntries_ be the number of elements in _entries_.
    4.  Repeat, while _index_ < _numEntries_,
        1.  Let _e_ be _entries_\[_index_\].
        2.  Set _index_ to _index_ + 1.
        3.  If _e_._\[\[Key\]\]_ is not empty, then
            1.  If _kind_ is key, then
                1.  Let _result_ be _e_._\[\[Key\]\]_.
            2.  Else if _kind_ is value, then
                1.  Let _result_ be _e_._\[\[Value\]\]_.
            3.  Else,
                1.  [Assert](#assert): _kind_ is key+value.
                2.  Let _result_ be [CreateArrayFromList](#sec-createarrayfromlist)(« _e_._\[\[Key\]\]_, _e_._\[\[Value\]\]_ »).
            4.  Perform ? [GeneratorYield](#sec-generatoryield)([CreateIteratorResultObject](#sec-createiterresultobject)(_result_, false)).
            5.  NOTE: The number of elements in _entries_ may have increased while execution of this abstract operation was paused by [GeneratorYield](#sec-generatoryield).
            6.  Set _numEntries_ to the number of elements in _entries_.
    5.  Return [NormalCompletion](#sec-normalcompletion)(unused).
3.  Return [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "%MapIteratorPrototype%", [%MapIteratorPrototype%](#sec-%mapiteratorprototype%-object)).


# 24.1.5.2 The %MapIteratorPrototype% Object

The %MapIteratorPrototype% object:

-   has properties that are inherited by all [Map Iterator objects](#sec-map-iterator-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   has the following properties:


# 24.1.5.2.1 %MapIteratorPrototype%.next ( )

1.  Return ? [GeneratorResume](#sec-generatorresume)(this value, empty, "%MapIteratorPrototype%").


# 24.1.5.2.2 %MapIteratorPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Map Iterator".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 24.2 Set Objects

Set objects are collections of [ECMAScript language values](#sec-ecmascript-language-types). A Set may contain each distinct value at most once. Distinct values are discriminated using the semantics of the [SameValueZero](#sec-samevaluezero) comparison algorithm.

Set objects must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of elements in the collection. The data structure used in this specification is only intended to describe the required observable semantics of Set objects. It is not intended to be a viable implementation model.


# 24.2.1 Abstract Operations For Set Objects


# 24.2.1.1 Set Records

A Set Record is a [Record](#sec-list-and-record-specification-type) value used to encapsulate the interface of a Set or similar object.

Set Records have the fields listed in [Table 74](#table-set-record-fields).

Table 74: [Set Record](#sec-set-records) Fields

<table><tbody><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr><tr><td><var class="field">[[SetObject]]</var></td><td>an Object</td><td>the Set or similar object.</td></tr><tr><td><var class="field">[[Size]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_13941"><a href="#integer">integer</a></emu-xref> or +∞</td><td>The reported size of the object.</td></tr><tr><td><var class="field">[[Has]]</var></td><td>a <emu-xref href="#function-object" id="_ref_13942"><a href="#function-object">function object</a></emu-xref></td><td>The <code>has</code> method of the object.</td></tr><tr><td><var class="field">[[Keys]]</var></td><td>a <emu-xref href="#function-object" id="_ref_13943"><a href="#function-object">function object</a></emu-xref></td><td>The <code>keys</code> method of the object.</td></tr></tbody></table>


# 24.2.1.2 GetSetRecord ( _obj_ )

The abstract operation GetSetRecord takes argument _obj_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [Set Record](#sec-set-records) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _obj_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _rawSize_ be ? [Get](#sec-get-o-p)(_obj_, "size").
3.  Let _numSize_ be ? [ToNumber](#sec-tonumber)(_rawSize_).
4.  NOTE: If _rawSize_ is undefined, then _numSize_ will be NaN.
5.  If _numSize_ is NaN, throw a TypeError exception.
6.  Let _intSize_ be ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_numSize_).
7.  If _intSize_ < 0, throw a RangeError exception.
8.  Let _has_ be ? [Get](#sec-get-o-p)(_obj_, "has").
9.  If [IsCallable](#sec-iscallable)(_has_) is false, throw a TypeError exception.
10.  Let _keys_ be ? [Get](#sec-get-o-p)(_obj_, "keys").
11.  If [IsCallable](#sec-iscallable)(_keys_) is false, throw a TypeError exception.
12.  Return a new [Set Record](#sec-set-records) { _\[\[SetObject\]\]_: _obj_, _\[\[Size\]\]_: _intSize_, _\[\[Has\]\]_: _has_, _\[\[Keys\]\]_: _keys_ }.


# 24.2.1.3 SetDataHas ( _setData_, _value_ )

The abstract operation SetDataHas takes arguments _setData_ (a [List](#sec-list-and-record-specification-type) of either [ECMAScript language values](#sec-ecmascript-language-types) or empty) and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It performs the following steps when called:

1.  If [SetDataIndex](#sec-setdataindex)(_setData_, _value_) is not-found, return false.
2.  Return true.


# 24.2.1.4 SetDataIndex ( _setData_, _value_ )

The abstract operation SetDataIndex takes arguments _setData_ (a [List](#sec-list-and-record-specification-type) of either [ECMAScript language values](#sec-ecmascript-language-types) or empty) and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a non-negative [integer](#integer) or not-found. It performs the following steps when called:

1.  Set _value_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_value_).
2.  Let _size_ be the number of elements in _setData_.
3.  Let _index_ be 0.
4.  Repeat, while _index_ < _size_,
    1.  Let _e_ be _setData_\[_index_\].
    2.  If _e_ is not empty and _e_ is _value_, then
        1.  Return _index_.
    3.  Set _index_ to _index_ + 1.
5.  Return not-found.


# 24.2.1.5 SetDataSize ( _setData_ )

The abstract operation SetDataSize takes argument _setData_ (a [List](#sec-list-and-record-specification-type) of either [ECMAScript language values](#sec-ecmascript-language-types) or empty) and returns a non-negative [integer](#integer). It performs the following steps when called:

1.  Let _count_ be 0.
2.  For each element _e_ of _setData_, do
    1.  If _e_ is not empty, set _count_ to _count_ + 1.
3.  Return _count_.


# 24.2.2 The Set Constructor

The Set [constructor](#constructor):

-   is %Set%.
-   is the initial value of the "Set" property of the [global object](#sec-global-object).
-   creates and initializes a new [Set object](#sec-set-objects) when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value in an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Set behaviour must include a `super` call to the Set [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the `Set.prototype` built-in methods.


# 24.2.2.1 Set ( \[_iterable_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Let _set_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Set.prototype%", « _\[\[SetData\]\]_ »).
3.  Set _set_._\[\[SetData\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
4.  If _iterable_ is either undefined or null, return _set_.
5.  Let _adder_ be ? [Get](#sec-get-o-p)(_set_, "add").
6.  If [IsCallable](#sec-iscallable)(_adder_) is false, throw a TypeError exception.
7.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_iterable_, sync).
8.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, return _set_.
    3.  Let _status_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_adder_, _set_, « _next_ »)).
    4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_status_, _iteratorRecord_).


# 24.2.3 Properties of the Set Constructor

The Set [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 24.2.3.1 Set.prototype

The initial value of `Set.prototype` is the [Set prototype object](#sec-properties-of-the-set-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 24.2.3.2 get Set \[%Symbol.species% \]

`Set[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".

Note

Methods that create derived collection objects should call [%Symbol.species%](#sec-well-known-symbols) to determine the [constructor](#constructor) to use to create the derived objects. Subclass [constructor](#constructor) may over-ride [%Symbol.species%](#sec-well-known-symbols) to change the default [constructor](#constructor) assignment.


# 24.2.4 Properties of the Set Prototype Object

The Set prototype object:

-   is %Set.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[SetData\]\]_ internal slot.


# 24.2.4.1 Set.prototype.add ( _value_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[SetData\]\]_).
3.  Set _value_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_value_).
4.  For each element _e_ of _S_._\[\[SetData\]\]_, do
    1.  If _e_ is not empty and [SameValue](#sec-samevalue)(_e_, _value_) is true, then
        1.  Return _S_.
5.  Append _value_ to _S_._\[\[SetData\]\]_.
6.  Return _S_.


# 24.2.4.2 Set.prototype.clear ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[SetData\]\]_).
3.  For each element _e_ of _S_._\[\[SetData\]\]_, do
    1.  Replace the element of _S_._\[\[SetData\]\]_ whose value is _e_ with an element whose value is empty.
4.  Return undefined.

Note

The existing _\[\[SetData\]\]_ [List](#sec-list-and-record-specification-type) is preserved because there may be existing [Set Iterator objects](#sec-set-iterator-objects) that are suspended midway through iterating over that [List](#sec-list-and-record-specification-type).


# 24.2.4.3 Set.prototype.constructor

The initial value of `Set.prototype.constructor` is [%Set%](#sec-set-constructor).


# 24.2.4.4 Set.prototype.delete ( _value_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[SetData\]\]_).
3.  Set _value_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_value_).
4.  For each element _e_ of _S_._\[\[SetData\]\]_, do
    1.  If _e_ is not empty and [SameValue](#sec-samevalue)(_e_, _value_) is true, then
        1.  Replace the element of _S_._\[\[SetData\]\]_ whose value is _e_ with an element whose value is empty.
        2.  Return true.
5.  Return false.

Note

The value empty is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.


# 24.2.4.5 Set.prototype.difference ( _other_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[SetData\]\]_).
3.  Let _otherRec_ be ? [GetSetRecord](#sec-getsetrecord)(_other_).
4.  Let _resultSetData_ be a copy of _O_._\[\[SetData\]\]_.
5.  If [SetDataSize](#sec-setdatasize)(_O_._\[\[SetData\]\]_) ≤ _otherRec_._\[\[Size\]\]_, then
    1.  Let _thisSize_ be the number of elements in _O_._\[\[SetData\]\]_.
    2.  Let _index_ be 0.
    3.  Repeat, while _index_ < _thisSize_,
        1.  Let _e_ be _resultSetData_\[_index_\].
        2.  If _e_ is not empty, then
            1.  Let _inOther_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_otherRec_._\[\[Has\]\]_, _otherRec_._\[\[SetObject\]\]_, « _e_ »)).
            2.  If _inOther_ is true, then
                1.  Set _resultSetData_\[_index_\] to empty.
        3.  Set _index_ to _index_ + 1.
6.  Else,
    1.  Let _keysIter_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_otherRec_._\[\[SetObject\]\]_, _otherRec_._\[\[Keys\]\]_).
    2.  Let _next_ be not-started.
    3.  Repeat, while _next_ is not done,
        1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_keysIter_).
        2.  If _next_ is not done, then
            1.  Set _next_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_next_).
            2.  Let _valueIndex_ be [SetDataIndex](#sec-setdataindex)(_resultSetData_, _next_).
            3.  If _valueIndex_ is not not-found, then
                1.  Set _resultSetData_\[_valueIndex_\] to empty.
7.  Let _result_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Set.prototype%](#sec-properties-of-the-set-prototype-object), « _\[\[SetData\]\]_ »).
8.  Set _result_._\[\[SetData\]\]_ to _resultSetData_.
9.  Return _result_.


# 24.2.4.6 Set.prototype.entries ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateSetIterator](#sec-createsetiterator)(_S_, key+value).

Note

For iteration purposes, a Set appears similar to a Map where each entry has the same value for its key and value.


# 24.2.4.7 Set.prototype.forEach ( _callback_ \[, _thisArg_ \] )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[SetData\]\]_).
3.  If [IsCallable](#sec-iscallable)(_callback_) is false, throw a TypeError exception.
4.  Let _entries_ be _S_._\[\[SetData\]\]_.
5.  Let _numEntries_ be the number of elements in _entries_.
6.  Let _index_ be 0.
7.  Repeat, while _index_ < _numEntries_,
    1.  Let _e_ be _entries_\[_index_\].
    2.  Set _index_ to _index_ + 1.
    3.  If _e_ is not empty, then
        1.  Perform ? [Call](#sec-call)(_callback_, _thisArg_, « _e_, _e_, _S_ »).
        2.  NOTE: The number of elements in _entries_ may have increased during execution of _callback_.
        3.  Set _numEntries_ to the number of elements in _entries_.
8.  Return undefined.

Note

_callback_ should be a function that accepts three arguments. `forEach` calls _callback_ once for each value present in the [Set object](#sec-set-objects), in value insertion order. _callback_ is called only for values of the Set which actually exist; it is not called for keys that have been deleted from the set.

If a _thisArg_ parameter is provided, it will be used as the this value for each invocation of _callback_. If it is not provided, undefined is used instead.

_callback_ is called with three arguments: the first two arguments are a value contained in the Set. The same value is passed for both arguments. The [Set object](#sec-set-objects) being traversed is passed as the third argument.

The _callback_ is called with three arguments to be consistent with the call back functions used by `forEach` methods for Map and Array. For Sets, each item value is considered to be both the key and the value.

`forEach` does not directly mutate the object on which it is called but the object may be mutated by the calls to _callback_.

Each value is normally visited only once. However, a value will be revisited if it is deleted after it has been visited and then re-added before the `forEach` call completes. Values that are deleted after the call to `forEach` begins and before being visited are not visited unless the value is added again before the `forEach` call completes. New values added after the call to `forEach` begins are visited.


# 24.2.4.8 Set.prototype.has ( _value_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[SetData\]\]_).
3.  Set _value_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_value_).
4.  For each element _e_ of _S_._\[\[SetData\]\]_, do
    1.  If _e_ is not empty and [SameValue](#sec-samevalue)(_e_, _value_) is true, return true.
5.  Return false.


# 24.2.4.9 Set.prototype.intersection ( _other_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[SetData\]\]_).
3.  Let _otherRec_ be ? [GetSetRecord](#sec-getsetrecord)(_other_).
4.  Let _resultSetData_ be a new empty [List](#sec-list-and-record-specification-type).
5.  If [SetDataSize](#sec-setdatasize)(_O_._\[\[SetData\]\]_) ≤ _otherRec_._\[\[Size\]\]_, then
    1.  Let _thisSize_ be the number of elements in _O_._\[\[SetData\]\]_.
    2.  Let _index_ be 0.
    3.  Repeat, while _index_ < _thisSize_,
        1.  Let _e_ be _O_._\[\[SetData\]\]_\[_index_\].
        2.  Set _index_ to _index_ + 1.
        3.  If _e_ is not empty, then
            1.  Let _inOther_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_otherRec_._\[\[Has\]\]_, _otherRec_._\[\[SetObject\]\]_, « _e_ »)).
            2.  If _inOther_ is true, then
                1.  NOTE: It is possible for earlier calls to _otherRec_._\[\[Has\]\]_ to remove and re-add an element of _O_._\[\[SetData\]\]_, which can cause the same element to be visited twice during this iteration.
                2.  If [SetDataHas](#sec-setdatahas)(_resultSetData_, _e_) is false, then
                    1.  Append _e_ to _resultSetData_.
            3.  NOTE: The number of elements in _O_._\[\[SetData\]\]_ may have increased during execution of _otherRec_._\[\[Has\]\]_.
            4.  Set _thisSize_ to the number of elements in _O_._\[\[SetData\]\]_.
6.  Else,
    1.  Let _keysIter_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_otherRec_._\[\[SetObject\]\]_, _otherRec_._\[\[Keys\]\]_).
    2.  Let _next_ be not-started.
    3.  Repeat, while _next_ is not done,
        1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_keysIter_).
        2.  If _next_ is not done, then
            1.  Set _next_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_next_).
            2.  Let _inThis_ be [SetDataHas](#sec-setdatahas)(_O_._\[\[SetData\]\]_, _next_).
            3.  If _inThis_ is true, then
                1.  NOTE: Because _other_ is an arbitrary object, it is possible for its "keys" [iterator](#sec-iterator-interface) to produce the same value more than once.
                2.  If [SetDataHas](#sec-setdatahas)(_resultSetData_, _next_) is false, then
                    1.  Append _next_ to _resultSetData_.
7.  Let _result_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Set.prototype%](#sec-properties-of-the-set-prototype-object), « _\[\[SetData\]\]_ »).
8.  Set _result_._\[\[SetData\]\]_ to _resultSetData_.
9.  Return _result_.


# 24.2.4.10 Set.prototype.isDisjointFrom ( _other_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[SetData\]\]_).
3.  Let _otherRec_ be ? [GetSetRecord](#sec-getsetrecord)(_other_).
4.  If [SetDataSize](#sec-setdatasize)(_O_._\[\[SetData\]\]_) ≤ _otherRec_._\[\[Size\]\]_, then
    1.  Let _thisSize_ be the number of elements in _O_._\[\[SetData\]\]_.
    2.  Let _index_ be 0.
    3.  Repeat, while _index_ < _thisSize_,
        1.  Let _e_ be _O_._\[\[SetData\]\]_\[_index_\].
        2.  Set _index_ to _index_ + 1.
        3.  If _e_ is not empty, then
            1.  Let _inOther_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_otherRec_._\[\[Has\]\]_, _otherRec_._\[\[SetObject\]\]_, « _e_ »)).
            2.  If _inOther_ is true, return false.
            3.  NOTE: The number of elements in _O_._\[\[SetData\]\]_ may have increased during execution of _otherRec_._\[\[Has\]\]_.
            4.  Set _thisSize_ to the number of elements in _O_._\[\[SetData\]\]_.
5.  Else,
    1.  Let _keysIter_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_otherRec_._\[\[SetObject\]\]_, _otherRec_._\[\[Keys\]\]_).
    2.  Let _next_ be not-started.
    3.  Repeat, while _next_ is not done,
        1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_keysIter_).
        2.  If _next_ is not done, then
            1.  If [SetDataHas](#sec-setdatahas)(_O_._\[\[SetData\]\]_, _next_) is true, then
                1.  Perform ? [IteratorClose](#sec-iteratorclose)(_keysIter_, [NormalCompletion](#sec-normalcompletion)(unused)).
                2.  Return false.
6.  Return true.


# 24.2.4.11 Set.prototype.isSubsetOf ( _other_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[SetData\]\]_).
3.  Let _otherRec_ be ? [GetSetRecord](#sec-getsetrecord)(_other_).
4.  If [SetDataSize](#sec-setdatasize)(_O_._\[\[SetData\]\]_) > _otherRec_._\[\[Size\]\]_, return false.
5.  Let _thisSize_ be the number of elements in _O_._\[\[SetData\]\]_.
6.  Let _index_ be 0.
7.  Repeat, while _index_ < _thisSize_,
    1.  Let _e_ be _O_._\[\[SetData\]\]_\[_index_\].
    2.  Set _index_ to _index_ + 1.
    3.  If _e_ is not empty, then
        1.  Let _inOther_ be [ToBoolean](#sec-toboolean)(? [Call](#sec-call)(_otherRec_._\[\[Has\]\]_, _otherRec_._\[\[SetObject\]\]_, « _e_ »)).
        2.  If _inOther_ is false, return false.
        3.  NOTE: The number of elements in _O_._\[\[SetData\]\]_ may have increased during execution of _otherRec_._\[\[Has\]\]_.
        4.  Set _thisSize_ to the number of elements in _O_._\[\[SetData\]\]_.
8.  Return true.


# 24.2.4.12 Set.prototype.isSupersetOf ( _other_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[SetData\]\]_).
3.  Let _otherRec_ be ? [GetSetRecord](#sec-getsetrecord)(_other_).
4.  If [SetDataSize](#sec-setdatasize)(_O_._\[\[SetData\]\]_) < _otherRec_._\[\[Size\]\]_, return false.
5.  Let _keysIter_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_otherRec_._\[\[SetObject\]\]_, _otherRec_._\[\[Keys\]\]_).
6.  Let _next_ be not-started.
7.  Repeat, while _next_ is not done,
    1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_keysIter_).
    2.  If _next_ is not done, then
        1.  If [SetDataHas](#sec-setdatahas)(_O_._\[\[SetData\]\]_, _next_) is false, then
            1.  Perform ? [IteratorClose](#sec-iteratorclose)(_keysIter_, [NormalCompletion](#sec-normalcompletion)(unused)).
            2.  Return false.
8.  Return true.


# 24.2.4.13 Set.prototype.keys ( )

The initial value of the "keys" property is %Set.prototype.values%, defined in [24.2.4.17](#sec-set.prototype.values).

Note

For iteration purposes, a Set appears similar to a Map where each entry has the same value for its key and value.


# 24.2.4.14 get Set.prototype.size

`Set.prototype.size` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[SetData\]\]_).
3.  Let _size_ be [SetDataSize](#sec-setdatasize)(_S_._\[\[SetData\]\]_).
4.  Return [𝔽](#𝔽)(_size_).


# 24.2.4.15 Set.prototype.symmetricDifference ( _other_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[SetData\]\]_).
3.  Let _otherRec_ be ? [GetSetRecord](#sec-getsetrecord)(_other_).
4.  Let _keysIter_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_otherRec_._\[\[SetObject\]\]_, _otherRec_._\[\[Keys\]\]_).
5.  Let _resultSetData_ be a copy of _O_._\[\[SetData\]\]_.
6.  Let _next_ be not-started.
7.  Repeat, while _next_ is not done,
    1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_keysIter_).
    2.  If _next_ is not done, then
        1.  Set _next_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_next_).
        2.  Let _resultIndex_ be [SetDataIndex](#sec-setdataindex)(_resultSetData_, _next_).
        3.  If _resultIndex_ is not-found, let _alreadyInResult_ be false; otherwise let _alreadyInResult_ be true.
        4.  If [SetDataHas](#sec-setdatahas)(_O_._\[\[SetData\]\]_, _next_) is true, then
            1.  If _alreadyInResult_ is true, set _resultSetData_\[_resultIndex_\] to empty.
        5.  Else,
            1.  If _alreadyInResult_ is false, append _next_ to _resultSetData_.
8.  Let _result_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Set.prototype%](#sec-properties-of-the-set-prototype-object), « _\[\[SetData\]\]_ »).
9.  Set _result_._\[\[SetData\]\]_ to _resultSetData_.
10.  Return _result_.


# 24.2.4.16 Set.prototype.union ( _other_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[SetData\]\]_).
3.  Let _otherRec_ be ? [GetSetRecord](#sec-getsetrecord)(_other_).
4.  Let _keysIter_ be ? [GetIteratorFromMethod](#sec-getiteratorfrommethod)(_otherRec_._\[\[SetObject\]\]_, _otherRec_._\[\[Keys\]\]_).
5.  Let _resultSetData_ be a copy of _O_._\[\[SetData\]\]_.
6.  Let _next_ be not-started.
7.  Repeat, while _next_ is not done,
    1.  Set _next_ to ? [IteratorStepValue](#sec-iteratorstepvalue)(_keysIter_).
    2.  If _next_ is not done, then
        1.  Set _next_ to [CanonicalizeKeyedCollectionKey](#sec-canonicalizekeyedcollectionkey)(_next_).
        2.  If [SetDataHas](#sec-setdatahas)(_resultSetData_, _next_) is false, then
            1.  Append _next_ to _resultSetData_.
8.  Let _result_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Set.prototype%](#sec-properties-of-the-set-prototype-object), « _\[\[SetData\]\]_ »).
9.  Set _result_._\[\[SetData\]\]_ to _resultSetData_.
10.  Return _result_.


# 24.2.4.17 Set.prototype.values ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateSetIterator](#sec-createsetiterator)(_S_, value).


# 24.2.4.18 Set.prototype \[%Symbol.iterator% \] ( )

The initial value of the [%Symbol.iterator%](#sec-well-known-symbols) property is %Set.prototype.values%, defined in [24.2.4.17](#sec-set.prototype.values).


# 24.2.4.19 Set.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Set".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 24.2.5 Properties of Set Instances

Set instances are [ordinary objects](#ordinary-object) that inherit properties from the [Set prototype object](#sec-properties-of-the-set-prototype-object). Set instances also have a _\[\[SetData\]\]_ internal slot.


# 24.2.6 Set Iterator Objects

A Set Iterator is an [ordinary object](#ordinary-object), with the structure defined below, that represents a specific iteration over some specific Set instance object. There is not a named [constructor](#constructor) for Set Iterator objects. Instead, Set Iterator objects are created by calling certain methods of Set instance objects.


# 24.2.6.1 CreateSetIterator ( _set_, _kind_ )

The abstract operation CreateSetIterator takes arguments _set_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _kind_ (key+value or value) and returns either a [normal completion containing](#sec-completion-record-specification-type) a Generator or a [throw completion](#sec-completion-record-specification-type). It is used to create [iterator objects](#sec-iterator-interface) for Set methods that return such [iterators](#sec-iterator-interface). It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_set_, _\[\[SetData\]\]_).
2.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _set_ and _kind_ and performs the following steps when called:
    1.  Let _index_ be 0.
    2.  Let _entries_ be _set_._\[\[SetData\]\]_.
    3.  Let _numEntries_ be the number of elements in _entries_.
    4.  Repeat, while _index_ < _numEntries_,
        1.  Let _e_ be _entries_\[_index_\].
        2.  Set _index_ to _index_ + 1.
        3.  If _e_ is not empty, then
            1.  If _kind_ is key+value, then
                1.  Let _result_ be [CreateArrayFromList](#sec-createarrayfromlist)(« _e_, _e_ »).
                2.  Perform ? [GeneratorYield](#sec-generatoryield)([CreateIteratorResultObject](#sec-createiterresultobject)(_result_, false)).
            2.  Else,
                1.  [Assert](#assert): _kind_ is value.
                2.  Perform ? [GeneratorYield](#sec-generatoryield)([CreateIteratorResultObject](#sec-createiterresultobject)(_e_, false)).
            3.  NOTE: The number of elements in _entries_ may have increased while execution of this abstract operation was paused by [GeneratorYield](#sec-generatoryield).
            4.  Set _numEntries_ to the number of elements in _entries_.
    5.  Return [NormalCompletion](#sec-normalcompletion)(unused).
3.  Return [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "%SetIteratorPrototype%", [%SetIteratorPrototype%](#sec-%setiteratorprototype%-object)).


# 24.2.6.2 The %SetIteratorPrototype% Object

The %SetIteratorPrototype% object:

-   has properties that are inherited by all [Set Iterator objects](#sec-set-iterator-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   has the following properties:


# 24.2.6.2.1 %SetIteratorPrototype%.next ( )

1.  Return ? [GeneratorResume](#sec-generatorresume)(this value, empty, "%SetIteratorPrototype%").


# 24.2.6.2.2 %SetIteratorPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Set Iterator".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 24.3 WeakMap Objects

WeakMaps are collections of key/value pairs where the keys are objects and/or symbols and values may be arbitrary [ECMAScript language values](#sec-ecmascript-language-types). A WeakMap may be queried to see if it contains a key/value pair with a specific key, but no mechanism is provided for enumerating the values it holds as keys. In certain conditions, values which are not [live](#sec-liveness) are removed as WeakMap keys, as described in [9.9.3](#sec-weakref-execution).

An implementation may impose an arbitrarily determined latency between the time a key/value pair of a WeakMap becomes inaccessible and the time when the key/value pair is removed from the WeakMap. If this latency was observable to ECMAScript program, it would be a source of indeterminacy that could impact program execution. For that reason, an ECMAScript implementation must not provide any means to observe a key of a WeakMap that does not require the observer to present the observed key.

WeakMaps must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of key/value pairs in the collection. The data structure used in this specification is only intended to describe the required observable semantics of WeakMaps. It is not intended to be a viable implementation model.

Note

WeakMap and WeakSet are intended to provide mechanisms for dynamically associating state with an object or symbol in a manner that does not “leak” memory resources if, in the absence of the WeakMap or WeakSet instance, the object or symbol otherwise became inaccessible and subject to resource reclamation by the implementation's garbage collection mechanisms. This characteristic can be achieved by using an inverted per-object/symbol mapping of WeakMap or WeakSet instances to keys. Alternatively, each WeakMap or WeakSet instance may internally store its key and value data, but this approach requires coordination between the WeakMap or WeakSet implementation and the garbage collector. The following references describe mechanism that may be useful to implementations of WeakMap and WeakSet:

Barry Hayes. 1997. Ephemerons: a new finalization mechanism. In *Proceedings of the 12th ACM SIGPLAN conference on Object-oriented programming, systems, languages, and applications (OOPSLA '97)*, A. Michael Berman (Ed.). ACM, New York, NY, USA, 176-183, [http://doi.acm.org/10.1145/263698.263733](http://doi.acm.org/10.1145/263698.263733).

Alexandra Barros, Roberto Ierusalimschy, Eliminating Cycles in Weak Tables. Journal of Universal Computer Science - J.UCS, vol. 14, no. 21, pp. 3481-3497, 2008, [http://www.jucs.org/jucs\_14\_21/eliminating\_cycles\_in\_weak](http://www.jucs.org/jucs_14_21/eliminating_cycles_in_weak)


# 24.3.1 The WeakMap Constructor

The WeakMap [constructor](#constructor):

-   is %WeakMap%.
-   is the initial value of the "WeakMap" property of the [global object](#sec-global-object).
-   creates and initializes a new WeakMap when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value in an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified WeakMap behaviour must include a `super` call to the WeakMap [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the `WeakMap.prototype` built-in methods.


# 24.3.1.1 WeakMap ( \[_iterable_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Let _map_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%WeakMap.prototype%", « _\[\[WeakMapData\]\]_ »).
3.  Set _map_._\[\[WeakMapData\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
4.  If _iterable_ is either undefined or null, return _map_.
5.  Let _adder_ be ? [Get](#sec-get-o-p)(_map_, "set").
6.  If [IsCallable](#sec-iscallable)(_adder_) is false, throw a TypeError exception.
7.  Return ? [AddEntriesFromIterable](#sec-add-entries-from-iterable)(_map_, _iterable_, _adder_).

Note

If the parameter _iterable_ is present, it is expected to be an object that implements a [%Symbol.iterator%](#sec-well-known-symbols) method that returns an [iterator object](#sec-iterator-interface) that produces a two element [array-like object](#sec-lengthofarraylike) whose first element is a value that will be used as a WeakMap key and whose second element is the value to associate with that key.


# 24.3.2 Properties of the WeakMap Constructor

The WeakMap [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 24.3.2.1 WeakMap.prototype

The initial value of `WeakMap.prototype` is the [WeakMap prototype object](#sec-properties-of-the-weakmap-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 24.3.3 Properties of the WeakMap Prototype Object

The WeakMap prototype object:

-   is %WeakMap.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[WeakMapData\]\]_ internal slot.


# 24.3.3.1 WeakMap.prototype.constructor

The initial value of `WeakMap.prototype.constructor` is [%WeakMap%](#sec-weakmap-constructor).


# 24.3.3.2 WeakMap.prototype.delete ( _key_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[WeakMapData\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_key_) is false, return false.
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[WeakMapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, then
        1.  Set _p_._\[\[Key\]\]_ to empty.
        2.  Set _p_._\[\[Value\]\]_ to empty.
        3.  Return true.
5.  Return false.

Note

The value empty is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.


# 24.3.3.3 WeakMap.prototype.get ( _key_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[WeakMapData\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_key_) is false, return undefined.
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[WeakMapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, return _p_._\[\[Value\]\]_.
5.  Return undefined.


# 24.3.3.4 WeakMap.prototype.has ( _key_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[WeakMapData\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_key_) is false, return false.
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[WeakMapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, return true.
5.  Return false.


# 24.3.3.5 WeakMap.prototype.set ( _key_, _value_ )

This method performs the following steps when called:

1.  Let _M_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_M_, _\[\[WeakMapData\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_key_) is false, throw a TypeError exception.
4.  For each [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_, _\[\[Value\]\]_ } _p_ of _M_._\[\[WeakMapData\]\]_, do
    1.  If _p_._\[\[Key\]\]_ is not empty and [SameValue](#sec-samevalue)(_p_._\[\[Key\]\]_, _key_) is true, then
        1.  Set _p_._\[\[Value\]\]_ to _value_.
        2.  Return _M_.
5.  Let _p_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Key\]\]_: _key_, _\[\[Value\]\]_: _value_ }.
6.  Append _p_ to _M_._\[\[WeakMapData\]\]_.
7.  Return _M_.


# 24.3.3.6 WeakMap.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "WeakMap".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 24.3.4 Properties of WeakMap Instances

WeakMap instances are [ordinary objects](#ordinary-object) that inherit properties from the [WeakMap prototype object](#sec-properties-of-the-weakmap-prototype-object). WeakMap instances also have a _\[\[WeakMapData\]\]_ internal slot.


# 24.4 WeakSet Objects

WeakSets are collections of objects and/or symbols. A distinct object or symbol may only occur once as an element of a WeakSet's collection. A WeakSet may be queried to see if it contains a specific value, but no mechanism is provided for enumerating the values it holds. In certain conditions, values which are not [live](#sec-liveness) are removed as WeakSet elements, as described in [9.9.3](#sec-weakref-execution).

An implementation may impose an arbitrarily determined latency between the time a value contained in a WeakSet becomes inaccessible and the time when the value is removed from the WeakSet. If this latency was observable to ECMAScript program, it would be a source of indeterminacy that could impact program execution. For that reason, an ECMAScript implementation must not provide any means to determine if a WeakSet contains a particular value that does not require the observer to present the observed value.

WeakSets must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of elements in the collection. The data structure used in this specification is only intended to describe the required observable semantics of WeakSets. It is not intended to be a viable implementation model.

Note

See the NOTE in [24.3](#sec-weakmap-objects).


# 24.4.1 The WeakSet Constructor

The WeakSet [constructor](#constructor):

-   is %WeakSet%.
-   is the initial value of the "WeakSet" property of the [global object](#sec-global-object).
-   creates and initializes a new WeakSet when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value in an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified WeakSet behaviour must include a `super` call to the WeakSet [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the `WeakSet.prototype` built-in methods.


# 24.4.1.1 WeakSet ( \[_iterable_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Let _set_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%WeakSet.prototype%", « _\[\[WeakSetData\]\]_ »).
3.  Set _set_._\[\[WeakSetData\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
4.  If _iterable_ is either undefined or null, return _set_.
5.  Let _adder_ be ? [Get](#sec-get-o-p)(_set_, "add").
6.  If [IsCallable](#sec-iscallable)(_adder_) is false, throw a TypeError exception.
7.  Let _iteratorRecord_ be ? [GetIterator](#sec-getiterator)(_iterable_, sync).
8.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, return _set_.
    3.  Let _status_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_adder_, _set_, « _next_ »)).
    4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_status_, _iteratorRecord_).


# 24.4.2 Properties of the WeakSet Constructor

The WeakSet [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 24.4.2.1 WeakSet.prototype

The initial value of `WeakSet.prototype` is the [WeakSet prototype object](#sec-properties-of-the-weakset-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 24.4.3 Properties of the WeakSet Prototype Object

The WeakSet prototype object:

-   is %WeakSet.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[WeakSetData\]\]_ internal slot.


# 24.4.3.1 WeakSet.prototype.add ( _value_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[WeakSetData\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_value_) is false, throw a TypeError exception.
4.  For each element _e_ of _S_._\[\[WeakSetData\]\]_, do
    1.  If _e_ is not empty and [SameValue](#sec-samevalue)(_e_, _value_) is true, then
        1.  Return _S_.
5.  Append _value_ to _S_._\[\[WeakSetData\]\]_.
6.  Return _S_.


# 24.4.3.2 WeakSet.prototype.constructor

The initial value of `WeakSet.prototype.constructor` is [%WeakSet%](#sec-weakset-constructor).


# 24.4.3.3 WeakSet.prototype.delete ( _value_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[WeakSetData\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_value_) is false, return false.
4.  For each element _e_ of _S_._\[\[WeakSetData\]\]_, do
    1.  If _e_ is not empty and [SameValue](#sec-samevalue)(_e_, _value_) is true, then
        1.  Replace the element of _S_._\[\[WeakSetData\]\]_ whose value is _e_ with an element whose value is empty.
        2.  Return true.
5.  Return false.

Note

The value empty is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.


# 24.4.3.4 WeakSet.prototype.has ( _value_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_S_, _\[\[WeakSetData\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_value_) is false, return false.
4.  For each element _e_ of _S_._\[\[WeakSetData\]\]_, do
    1.  If _e_ is not empty and [SameValue](#sec-samevalue)(_e_, _value_) is true, return true.
5.  Return false.


# 24.4.3.5 WeakSet.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "WeakSet".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 24.4.4 Properties of WeakSet Instances

WeakSet instances are [ordinary objects](#ordinary-object) that inherit properties from the [WeakSet prototype object](#sec-properties-of-the-weakset-prototype-object). WeakSet instances also have a _\[\[WeakSetData\]\]_ internal slot.


# 24.5 Abstract Operations for Keyed Collections


# 24.5.1 CanonicalizeKeyedCollectionKey ( _key_ )

The abstract operation CanonicalizeKeyedCollectionKey takes argument _key_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns an [ECMAScript language value](#sec-ecmascript-language-types). It performs the following steps when called:

1.  If _key_ is \-0<sub>𝔽</sub>, return +0<sub>𝔽</sub>.
2.  Return _key_.


# 25 Structured Data


# 25.1 ArrayBuffer Objects


# 25.1.1 Notation

The descriptions below in this section, [25.4](#sec-atomics-object), and [29](#sec-memory-model) use the read-modify-write modification function internal data structure.

A read-modify-write modification function is a mathematical function that is represented as an abstract closure that takes two [Lists](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks) as arguments and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). These abstract closures satisfy all of the following properties:

-   They perform all their algorithm steps atomically.
-   Their individual algorithm steps are not observable.

Note

To aid verifying that a read-modify-write modification function's algorithm steps constitute a pure, mathematical function, the following editorial conventions are recommended:

-   They do not access, directly or transitively via invoked [abstract operations](#sec-algorithm-conventions-abstract-operations) and abstract closures, any language or specification values except their parameters and captured values.
-   They do not invoke, directly or transitively, [abstract operations](#sec-algorithm-conventions-abstract-operations) and abstract closures that return [Completion Records](#sec-completion-record-specification-type).
-   They do not return [Completion Records](#sec-completion-record-specification-type).


# 25.1.2 Fixed-length and Resizable ArrayBuffer Objects

A fixed-length ArrayBuffer is an ArrayBuffer whose byte length cannot change after creation.

A resizable ArrayBuffer is an ArrayBuffer whose byte length may change after creation via calls to [ArrayBuffer.prototype.resize ( _newLength_ )](#sec-arraybuffer.prototype.resize).

The kind of ArrayBuffer object that is created depends on the arguments passed to [ArrayBuffer ( _length_ \[, _options_ \] )](#sec-arraybuffer-length).


# 25.1.3 Abstract Operations For ArrayBuffer Objects


# 25.1.3.1 AllocateArrayBuffer ( _constructor_, _byteLength_ \[, _maxByteLength_ \] )

The abstract operation AllocateArrayBuffer takes arguments _constructor_ (a [constructor](#constructor)) and _byteLength_ (a non-negative [integer](#integer)) and optional argument _maxByteLength_ (a non-negative [integer](#integer) or empty) and returns either a [normal completion containing](#sec-completion-record-specification-type) an ArrayBuffer or a [throw completion](#sec-completion-record-specification-type). It is used to create an ArrayBuffer. It performs the following steps when called:

1.  Let _slots_ be « _\[\[ArrayBufferData\]\]_, _\[\[ArrayBufferByteLength\]\]_, _\[\[ArrayBufferDetachKey\]\]_ ».
2.  If _maxByteLength_ is present and _maxByteLength_ is not empty, let _allocatingResizableBuffer_ be true; otherwise let _allocatingResizableBuffer_ be false.
3.  If _allocatingResizableBuffer_ is true, then
    1.  If _byteLength_ > _maxByteLength_, throw a RangeError exception.
    2.  Append _\[\[ArrayBufferMaxByteLength\]\]_ to _slots_.
4.  Let _obj_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_constructor_, "%ArrayBuffer.prototype%", _slots_).
5.  Let _block_ be ? [CreateByteDataBlock](#sec-createbytedatablock)(_byteLength_).
6.  Set _obj_._\[\[ArrayBufferData\]\]_ to _block_.
7.  Set _obj_._\[\[ArrayBufferByteLength\]\]_ to _byteLength_.
8.  If _allocatingResizableBuffer_ is true, then
    1.  If it is not possible to create a [Data Block](#sec-data-blocks) _block_ consisting of _maxByteLength_ bytes, throw a RangeError exception.
    2.  NOTE: Resizable ArrayBuffers are designed to be implementable with in-place growth. Implementations may throw if, for example, virtual memory cannot be reserved up front.
    3.  Set _obj_._\[\[ArrayBufferMaxByteLength\]\]_ to _maxByteLength_.
9.  Return _obj_.


# 25.1.3.2 ArrayBufferByteLength ( _arrayBuffer_, _order_ )

The abstract operation ArrayBufferByteLength takes arguments _arrayBuffer_ (an ArrayBuffer or SharedArrayBuffer) and _order_ (seq-cst or unordered) and returns a non-negative [integer](#integer). It performs the following steps when called:

1.  If [IsGrowableSharedArrayBuffer](#sec-isgrowablesharedarraybuffer)(_arrayBuffer_) is true, then
    1.  Let _bufferByteLengthBlock_ be _arrayBuffer_._\[\[ArrayBufferByteLengthData\]\]_.
    2.  Let _rawLength_ be [GetRawBytesFromSharedBlock](#sec-getrawbytesfromsharedblock)(_bufferByteLengthBlock_, 0, biguint64, true, _order_).
    3.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
    4.  Let _isLittleEndian_ be _AR_._\[\[LittleEndian\]\]_.
    5.  Return [ℝ](#ℝ)([RawBytesToNumeric](#sec-rawbytestonumeric)(biguint64, _rawLength_, _isLittleEndian_)).
2.  [Assert](#assert): [IsDetachedBuffer](#sec-isdetachedbuffer)(_arrayBuffer_) is false.
3.  Return _arrayBuffer_._\[\[ArrayBufferByteLength\]\]_.


# 25.1.3.3 ArrayBufferCopyAndDetach ( _arrayBuffer_, _newLength_, _preserveResizability_ )

The abstract operation ArrayBufferCopyAndDetach takes arguments _arrayBuffer_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _newLength_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _preserveResizability_ (preserve-resizability or fixed-length) and returns either a [normal completion containing](#sec-completion-record-specification-type) an ArrayBuffer or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_arrayBuffer_, _\[\[ArrayBufferData\]\]_).
2.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_arrayBuffer_) is true, throw a TypeError exception.
3.  If _newLength_ is undefined, then
    1.  Let _newByteLength_ be _arrayBuffer_._\[\[ArrayBufferByteLength\]\]_.
4.  Else,
    1.  Let _newByteLength_ be ? [ToIndex](#sec-toindex)(_newLength_).
5.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_arrayBuffer_) is true, throw a TypeError exception.
6.  If _preserveResizability_ is preserve-resizability and [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_arrayBuffer_) is false, then
    1.  Let _newMaxByteLength_ be _arrayBuffer_._\[\[ArrayBufferMaxByteLength\]\]_.
7.  Else,
    1.  Let _newMaxByteLength_ be empty.
8.  If _arrayBuffer_._\[\[ArrayBufferDetachKey\]\]_ is not undefined, throw a TypeError exception.
9.  Let _newBuffer_ be ? [AllocateArrayBuffer](#sec-allocatearraybuffer)([%ArrayBuffer%](#sec-arraybuffer-constructor), _newByteLength_, _newMaxByteLength_).
10.  Let _copyLength_ be [min](#eqn-min)(_newByteLength_, _arrayBuffer_._\[\[ArrayBufferByteLength\]\]_).
11.  Let _fromBlock_ be _arrayBuffer_._\[\[ArrayBufferData\]\]_.
12.  Let _toBlock_ be _newBuffer_._\[\[ArrayBufferData\]\]_.
13.  Perform [CopyDataBlockBytes](#sec-copydatablockbytes)(_toBlock_, 0, _fromBlock_, 0, _copyLength_).
14.  NOTE: Neither creation of the new [Data Block](#sec-data-blocks) nor copying from the old [Data Block](#sec-data-blocks) are observable. Implementations may implement this method as a zero-copy move or a `realloc`.
15.  Perform ! [DetachArrayBuffer](#sec-detacharraybuffer)(_arrayBuffer_).
16.  Return _newBuffer_.


# 25.1.3.4 IsDetachedBuffer ( _arrayBuffer_ )

The abstract operation IsDetachedBuffer takes argument _arrayBuffer_ (an ArrayBuffer or a SharedArrayBuffer) and returns a Boolean. It performs the following steps when called:

1.  If _arrayBuffer_._\[\[ArrayBufferData\]\]_ is null, return true.
2.  Return false.


# 25.1.3.5 DetachArrayBuffer ( _arrayBuffer_ \[, _key_ \] )

The abstract operation DetachArrayBuffer takes argument _arrayBuffer_ (an ArrayBuffer) and optional argument _key_ (anything) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_arrayBuffer_) is false.
2.  If _key_ is not present, set _key_ to undefined.
3.  If _arrayBuffer_._\[\[ArrayBufferDetachKey\]\]_ is not _key_, throw a TypeError exception.
4.  Set _arrayBuffer_._\[\[ArrayBufferData\]\]_ to null.
5.  Set _arrayBuffer_._\[\[ArrayBufferByteLength\]\]_ to 0.
6.  Return unused.

Note

Detaching an ArrayBuffer instance disassociates the [Data Block](#sec-data-blocks) used as its backing store from the instance and sets the byte length of the buffer to 0.


# 25.1.3.6 CloneArrayBuffer ( _srcBuffer_, _srcByteOffset_, _srcLength_ )

The abstract operation CloneArrayBuffer takes arguments _srcBuffer_ (an ArrayBuffer or a SharedArrayBuffer), _srcByteOffset_ (a non-negative [integer](#integer)), and _srcLength_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an ArrayBuffer or a [throw completion](#sec-completion-record-specification-type). It creates a new ArrayBuffer whose data is a copy of _srcBuffer_'s data over the range starting at _srcByteOffset_ and continuing for _srcLength_ bytes. It performs the following steps when called:

1.  [Assert](#assert): [IsDetachedBuffer](#sec-isdetachedbuffer)(_srcBuffer_) is false.
2.  Let _targetBuffer_ be ? [AllocateArrayBuffer](#sec-allocatearraybuffer)([%ArrayBuffer%](#sec-arraybuffer-constructor), _srcLength_).
3.  Let _srcBlock_ be _srcBuffer_._\[\[ArrayBufferData\]\]_.
4.  Let _targetBlock_ be _targetBuffer_._\[\[ArrayBufferData\]\]_.
5.  Perform [CopyDataBlockBytes](#sec-copydatablockbytes)(_targetBlock_, 0, _srcBlock_, _srcByteOffset_, _srcLength_).
6.  Return _targetBuffer_.


# 25.1.3.7 GetArrayBufferMaxByteLengthOption ( _options_ )

The abstract operation GetArrayBufferMaxByteLengthOption takes argument _options_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a non-negative [integer](#integer) or empty, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _options_ [is not an Object](#sec-object-type), return empty.
2.  Let _maxByteLength_ be ? [Get](#sec-get-o-p)(_options_, "maxByteLength").
3.  If _maxByteLength_ is undefined, return empty.
4.  Return ? [ToIndex](#sec-toindex)(_maxByteLength_).


# 25.1.3.8 HostResizeArrayBuffer ( _buffer_, _newByteLength_ )

The [host-defined](#host-defined) abstract operation HostResizeArrayBuffer takes arguments _buffer_ (an ArrayBuffer) and _newByteLength_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either handled or unhandled, or a [throw completion](#sec-completion-record-specification-type). It gives the [host](#host) an opportunity to perform [implementation-defined](#implementation-defined) resizing of _buffer_. If the [host](#host) chooses not to handle resizing of _buffer_, it may return unhandled for the default behaviour.

The implementation of HostResizeArrayBuffer must conform to the following requirements:

-   The abstract operation does not detach _buffer_.
-   If the abstract operation completes normally with handled, _buffer_._\[\[ArrayBufferByteLength\]\]_ is _newByteLength_.

The default implementation of HostResizeArrayBuffer is to return [NormalCompletion](#sec-normalcompletion)(unhandled).


# 25.1.3.9 IsFixedLengthArrayBuffer ( _arrayBuffer_ )

The abstract operation IsFixedLengthArrayBuffer takes argument _arrayBuffer_ (an ArrayBuffer or a SharedArrayBuffer) and returns a Boolean. It performs the following steps when called:

1.  If _arrayBuffer_ has an _\[\[ArrayBufferMaxByteLength\]\]_ internal slot, return false.
2.  Return true.


# 25.1.3.10 IsUnsignedElementType ( _type_ )

The abstract operation IsUnsignedElementType takes argument _type_ (a [TypedArray element type](#sec-typedarray-objects)) and returns a Boolean. It verifies if the argument _type_ is an unsigned [TypedArray element type](#sec-typedarray-objects). It performs the following steps when called:

1.  If _type_ is one of uint8, uint8clamped, uint16, uint32, or biguint64, return true.
2.  Return false.


# 25.1.3.11 IsUnclampedIntegerElementType ( _type_ )

The abstract operation IsUnclampedIntegerElementType takes argument _type_ (a [TypedArray element type](#sec-typedarray-objects)) and returns a Boolean. It verifies if the argument _type_ is an [Integer](#integer) [TypedArray element type](#sec-typedarray-objects) not including uint8clamped. It performs the following steps when called:

1.  If _type_ is one of int8, uint8, int16, uint16, int32, or uint32, return true.
2.  Return false.


# 25.1.3.12 IsBigIntElementType ( _type_ )

The abstract operation IsBigIntElementType takes argument _type_ (a [TypedArray element type](#sec-typedarray-objects)) and returns a Boolean. It verifies if the argument _type_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) [TypedArray element type](#sec-typedarray-objects). It performs the following steps when called:

1.  If _type_ is either biguint64 or bigint64, return true.
2.  Return false.


# 25.1.3.13 IsNoTearConfiguration ( _type_, _order_ )

The abstract operation IsNoTearConfiguration takes arguments _type_ (a [TypedArray element type](#sec-typedarray-objects)) and _order_ (seq-cst, unordered, or init) and returns a Boolean. It performs the following steps when called:

1.  If [IsUnclampedIntegerElementType](#sec-isunclampedintegerelementtype)(_type_) is true, return true.
2.  If [IsBigIntElementType](#sec-isbigintelementtype)(_type_) is true and _order_ is neither init nor unordered, return true.
3.  Return false.


# 25.1.3.14 RawBytesToNumeric ( _type_, _rawBytes_, _isLittleEndian_ )

The abstract operation RawBytesToNumeric takes arguments _type_ (a [TypedArray element type](#sec-typedarray-objects)), _rawBytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)), and _isLittleEndian_ (a Boolean) and returns a Number or a BigInt. It performs the following steps when called:

1.  Let _elementSize_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
2.  If _isLittleEndian_ is false, reverse the order of the elements of _rawBytes_.
3.  If _type_ is float16, then
    1.  Let _value_ be the byte elements of _rawBytes_ concatenated and interpreted as a little-endian bit string encoding of an [IEEE 754-2019](#sec-bibliography) binary16 value.
    2.  If _value_ is a NaN, return NaN.
    3.  Return the Number value that corresponds to _value_.
4.  If _type_ is float32, then
    1.  Let _value_ be the byte elements of _rawBytes_ concatenated and interpreted as a little-endian bit string encoding of an [IEEE 754-2019](#sec-bibliography) binary32 value.
    2.  If _value_ is a NaN, return NaN.
    3.  Return the Number value that corresponds to _value_.
5.  If _type_ is float64, then
    1.  Let _value_ be the byte elements of _rawBytes_ concatenated and interpreted as a little-endian bit string encoding of an [IEEE 754-2019](#sec-bibliography) binary64 value.
    2.  If _value_ is a NaN, return NaN.
    3.  Return the Number value that corresponds to _value_.
6.  If [IsUnsignedElementType](#sec-isunsignedelementtype)(_type_) is true, then
    1.  Let _intValue_ be the byte elements of _rawBytes_ concatenated and interpreted as a bit string encoding of an unsigned little-endian binary number.
7.  Else,
    1.  Let _intValue_ be the byte elements of _rawBytes_ concatenated and interpreted as a bit string encoding of a binary little-endian two's complement number of bit length _elementSize_ × 8.
8.  If [IsBigIntElementType](#sec-isbigintelementtype)(_type_) is true, return the BigInt value that corresponds to _intValue_.
9.  Otherwise, return the Number value that corresponds to _intValue_.


# 25.1.3.15 GetRawBytesFromSharedBlock ( _block_, _byteIndex_, _type_, _isTypedArray_, _order_ )

The abstract operation GetRawBytesFromSharedBlock takes arguments _block_ (a [Shared Data Block](#sec-data-blocks)), _byteIndex_ (a non-negative [integer](#integer)), _type_ (a [TypedArray element type](#sec-typedarray-objects)), _isTypedArray_ (a Boolean), and _order_ (seq-cst or unordered) and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). It performs the following steps when called:

1.  Let _elementSize_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
2.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
3.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
4.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
5.  If _isTypedArray_ is true and [IsNoTearConfiguration](#sec-isnotearconfiguration)(_type_, _order_) is true, let _noTear_ be true; otherwise let _noTear_ be false.
6.  Let _rawValue_ be a [List](#sec-list-and-record-specification-type) of length _elementSize_ whose elements are nondeterministically chosen [byte values](#sec-data-blocks).
7.  NOTE: In implementations, _rawValue_ is the result of a non-atomic or atomic read instruction on the underlying hardware. The nondeterminism is a semantic prescription of the [memory model](#sec-memory-model) to describe observable behaviour of hardware with weak consistency.
8.  Let _readEvent_ be [ReadSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: _order_, _\[\[NoTear\]\]_: _noTear_, _\[\[Block\]\]_: _block_, _\[\[ByteIndex\]\]_: _byteIndex_, _\[\[ElementSize\]\]_: _elementSize_ }.
9.  Append _readEvent_ to _eventsRecord_._\[\[EventList\]\]_.
10.  Append [Chosen Value Record](#sec-chosen-value-records) { _\[\[Event\]\]_: _readEvent_, _\[\[ChosenValue\]\]_: _rawValue_ } to _execution_._\[\[ChosenValues\]\]_.
11.  Return _rawValue_.


# 25.1.3.16 GetValueFromBuffer ( _arrayBuffer_, _byteIndex_, _type_, _isTypedArray_, _order_ \[, _isLittleEndian_ \] )

The abstract operation GetValueFromBuffer takes arguments _arrayBuffer_ (an ArrayBuffer or SharedArrayBuffer), _byteIndex_ (a non-negative [integer](#integer)), _type_ (a [TypedArray element type](#sec-typedarray-objects)), _isTypedArray_ (a Boolean), and _order_ (seq-cst or unordered) and optional argument _isLittleEndian_ (a Boolean) and returns a Number or a BigInt. It performs the following steps when called:

1.  [Assert](#assert): [IsDetachedBuffer](#sec-isdetachedbuffer)(_arrayBuffer_) is false.
2.  [Assert](#assert): There are sufficient bytes in _arrayBuffer_ starting at _byteIndex_ to represent a value of _type_.
3.  Let _block_ be _arrayBuffer_._\[\[ArrayBufferData\]\]_.
4.  Let _elementSize_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
5.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_arrayBuffer_) is true, then
    1.  [Assert](#assert): _block_ is a [Shared Data Block](#sec-data-blocks).
    2.  Let _rawValue_ be [GetRawBytesFromSharedBlock](#sec-getrawbytesfromsharedblock)(_block_, _byteIndex_, _type_, _isTypedArray_, _order_).
6.  Else,
    1.  Let _rawValue_ be a [List](#sec-list-and-record-specification-type) whose elements are bytes from _block_ at indices in the [interval](#interval) from _byteIndex_ (inclusive) to _byteIndex_ + _elementSize_ (exclusive).
7.  [Assert](#assert): The number of elements in _rawValue_ is _elementSize_.
8.  If _isLittleEndian_ is not present, then
    1.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
    2.  Set _isLittleEndian_ to _AR_._\[\[LittleEndian\]\]_.
9.  Return [RawBytesToNumeric](#sec-rawbytestonumeric)(_type_, _rawValue_, _isLittleEndian_).


# 25.1.3.17 NumericToRawBytes ( _type_, _value_, _isLittleEndian_ )

The abstract operation NumericToRawBytes takes arguments _type_ (a [TypedArray element type](#sec-typedarray-objects)), _value_ (a Number or a BigInt), and _isLittleEndian_ (a Boolean) and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). It performs the following steps when called:

1.  If _type_ is float16, then
    1.  Let _rawBytes_ be a [List](#sec-list-and-record-specification-type) whose elements are the 2 bytes that are the result of converting _value_ to [IEEE 754-2019](#sec-bibliography) binary16 format using roundTiesToEven mode. The bytes are arranged in little endian order. If _value_ is NaN, _rawBytes_ may be set to any implementation chosen [IEEE 754-2019](#sec-bibliography) binary16 format NaN encoding. An implementation must always choose the same encoding for each implementation distinguishable NaN value.
2.  Else if _type_ is float32, then
    1.  Let _rawBytes_ be a [List](#sec-list-and-record-specification-type) whose elements are the 4 bytes that are the result of converting _value_ to [IEEE 754-2019](#sec-bibliography) binary32 format using roundTiesToEven mode. The bytes are arranged in little endian order. If _value_ is NaN, _rawBytes_ may be set to any implementation chosen [IEEE 754-2019](#sec-bibliography) binary32 format NaN encoding. An implementation must always choose the same encoding for each implementation distinguishable NaN value.
3.  Else if _type_ is float64, then
    1.  Let _rawBytes_ be a [List](#sec-list-and-record-specification-type) whose elements are the 8 bytes that are the [IEEE 754-2019](#sec-bibliography) binary64 format encoding of _value_. The bytes are arranged in little endian order. If _value_ is NaN, _rawBytes_ may be set to any implementation chosen [IEEE 754-2019](#sec-bibliography) binary64 format NaN encoding. An implementation must always choose the same encoding for each implementation distinguishable NaN value.
4.  Else,
    1.  Let _n_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
    2.  Let _conversionOperation_ be the abstract operation named in the Conversion Operation column in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
    3.  Let _intValue_ be [ℝ](#ℝ)(! _conversionOperation_(_value_)).
    4.  If _intValue_ ≥ 0, then
        1.  Let _rawBytes_ be a [List](#sec-list-and-record-specification-type) whose elements are the _n_\-byte binary encoding of _intValue_. The bytes are ordered in little endian order.
    5.  Else,
        1.  Let _rawBytes_ be a [List](#sec-list-and-record-specification-type) whose elements are the _n_\-byte binary two's complement encoding of _intValue_. The bytes are ordered in little endian order.
5.  If _isLittleEndian_ is false, reverse the order of the elements of _rawBytes_.
6.  Return _rawBytes_.


# 25.1.3.18 SetValueInBuffer ( _arrayBuffer_, _byteIndex_, _type_, _value_, _isTypedArray_, _order_ \[, _isLittleEndian_ \] )

The abstract operation SetValueInBuffer takes arguments _arrayBuffer_ (an ArrayBuffer or SharedArrayBuffer), _byteIndex_ (a non-negative [integer](#integer)), _type_ (a [TypedArray element type](#sec-typedarray-objects)), _value_ (a Number or a BigInt), _isTypedArray_ (a Boolean), and _order_ (seq-cst, unordered, or init) and optional argument _isLittleEndian_ (a Boolean) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): [IsDetachedBuffer](#sec-isdetachedbuffer)(_arrayBuffer_) is false.
2.  [Assert](#assert): There are sufficient bytes in _arrayBuffer_ starting at _byteIndex_ to represent a value of _type_.
3.  [Assert](#assert): _value_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) if [IsBigIntElementType](#sec-isbigintelementtype)(_type_) is true; otherwise, _value_ [is a Number](#sec-ecmascript-language-types-number-type).
4.  Let _block_ be _arrayBuffer_._\[\[ArrayBufferData\]\]_.
5.  Let _elementSize_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
6.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
7.  If _isLittleEndian_ is not present, then
    1.  Set _isLittleEndian_ to _AR_._\[\[LittleEndian\]\]_.
8.  Let _rawBytes_ be [NumericToRawBytes](#sec-numerictorawbytes)(_type_, _value_, _isLittleEndian_).
9.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_arrayBuffer_) is true, then
    1.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
    2.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
    3.  If _isTypedArray_ is true and [IsNoTearConfiguration](#sec-isnotearconfiguration)(_type_, _order_) is true, let _noTear_ be true; otherwise let _noTear_ be false.
    4.  Append [WriteSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: _order_, _\[\[NoTear\]\]_: _noTear_, _\[\[Block\]\]_: _block_, _\[\[ByteIndex\]\]_: _byteIndex_, _\[\[ElementSize\]\]_: _elementSize_, _\[\[Payload\]\]_: _rawBytes_ } to _eventsRecord_._\[\[EventList\]\]_.
10.  Else,
     1.  Store the individual bytes of _rawBytes_ into _block_, starting at _block_\[_byteIndex_\].
11.  Return unused.


# 25.1.3.19 GetModifySetValueInBuffer ( _arrayBuffer_, _byteIndex_, _type_, _value_, _op_ )

The abstract operation GetModifySetValueInBuffer takes arguments _arrayBuffer_ (an ArrayBuffer or a SharedArrayBuffer), _byteIndex_ (a non-negative [integer](#integer)), _type_ (a [TypedArray element type](#sec-typedarray-objects)), _value_ (a Number or a BigInt), and _op_ (a [read-modify-write modification function](#sec-arraybuffer-notation)) and returns a Number or a BigInt. It performs the following steps when called:

1.  [Assert](#assert): [IsDetachedBuffer](#sec-isdetachedbuffer)(_arrayBuffer_) is false.
2.  [Assert](#assert): There are sufficient bytes in _arrayBuffer_ starting at _byteIndex_ to represent a value of _type_.
3.  [Assert](#assert): _value_ [is a BigInt](#sec-ecmascript-language-types-bigint-type) if [IsBigIntElementType](#sec-isbigintelementtype)(_type_) is true; otherwise, _value_ [is a Number](#sec-ecmascript-language-types-number-type).
4.  Let _block_ be _arrayBuffer_._\[\[ArrayBufferData\]\]_.
5.  Let _elementSize_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
6.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
7.  Let _isLittleEndian_ be _AR_._\[\[LittleEndian\]\]_.
8.  Let _rawBytes_ be [NumericToRawBytes](#sec-numerictorawbytes)(_type_, _value_, _isLittleEndian_).
9.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_arrayBuffer_) is true, then
    1.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
    2.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
    3.  Let _rawBytesRead_ be a [List](#sec-list-and-record-specification-type) of length _elementSize_ whose elements are nondeterministically chosen [byte values](#sec-data-blocks).
    4.  NOTE: In implementations, _rawBytesRead_ is the result of a load-link, of a load-exclusive, or of an operand of a read-modify-write instruction on the underlying hardware. The nondeterminism is a semantic prescription of the [memory model](#sec-memory-model) to describe observable behaviour of hardware with weak consistency.
    5.  Let _rmwEvent_ be [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: seq-cst, _\[\[NoTear\]\]_: true, _\[\[Block\]\]_: _block_, _\[\[ByteIndex\]\]_: _byteIndex_, _\[\[ElementSize\]\]_: _elementSize_, _\[\[Payload\]\]_: _rawBytes_, _\[\[ModifyOp\]\]_: _op_ }.
    6.  Append _rmwEvent_ to _eventsRecord_._\[\[EventList\]\]_.
    7.  Append [Chosen Value Record](#sec-chosen-value-records) { _\[\[Event\]\]_: _rmwEvent_, _\[\[ChosenValue\]\]_: _rawBytesRead_ } to _execution_._\[\[ChosenValues\]\]_.
10.  Else,
     1.  Let _rawBytesRead_ be a [List](#sec-list-and-record-specification-type) of length _elementSize_ whose elements are the sequence of _elementSize_ bytes starting with _block_\[_byteIndex_\].
     2.  Let _rawBytesModified_ be _op_(_rawBytesRead_, _rawBytes_).
     3.  Store the individual bytes of _rawBytesModified_ into _block_, starting at _block_\[_byteIndex_\].
11.  Return [RawBytesToNumeric](#sec-rawbytestonumeric)(_type_, _rawBytesRead_, _isLittleEndian_).


# 25.1.4 The ArrayBuffer Constructor

The ArrayBuffer [constructor](#constructor):

-   is %ArrayBuffer%.
-   is the initial value of the "ArrayBuffer" property of the [global object](#sec-global-object).
-   creates and initializes a new ArrayBuffer when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified ArrayBuffer behaviour must include a `super` call to the ArrayBuffer [constructor](#constructor) to create and initialize subclass instances with the internal state necessary to support the `ArrayBuffer.prototype` built-in methods.


# 25.1.4.1 ArrayBuffer ( _length_ \[, _options_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Let _byteLength_ be ? [ToIndex](#sec-toindex)(_length_).
3.  Let _requestedMaxByteLength_ be ? [GetArrayBufferMaxByteLengthOption](#sec-getarraybuffermaxbytelengthoption)(_options_).
4.  Return ? [AllocateArrayBuffer](#sec-allocatearraybuffer)(NewTarget, _byteLength_, _requestedMaxByteLength_).


# 25.1.5 Properties of the ArrayBuffer Constructor

The ArrayBuffer [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 25.1.5.1 ArrayBuffer.isView ( _arg_ )

This function performs the following steps when called:

1.  If _arg_ [is not an Object](#sec-object-type), return false.
2.  If _arg_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot, return true.
3.  Return false.


# 25.1.5.2 ArrayBuffer.prototype

The initial value of `ArrayBuffer.prototype` is the [ArrayBuffer prototype object](#sec-properties-of-the-arraybuffer-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 25.1.5.3 get ArrayBuffer \[%Symbol.species% \]

`ArrayBuffer[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".

Note

[ArrayBuffer.prototype.slice ( _start_, _end_ )](#sec-arraybuffer.prototype.slice) normally uses its this value's [constructor](#constructor) to create a derived object. However, a subclass [constructor](#constructor) may over-ride that default behaviour for the [ArrayBuffer.prototype.slice ( _start_, _end_ )](#sec-arraybuffer.prototype.slice) method by redefining its [%Symbol.species%](#sec-well-known-symbols) property.


# 25.1.6 Properties of the ArrayBuffer Prototype Object

The ArrayBuffer prototype object:

-   is %ArrayBuffer.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have an _\[\[ArrayBufferData\]\]_ or _\[\[ArrayBufferByteLength\]\]_ internal slot.


# 25.1.6.1 get ArrayBuffer.prototype.byteLength

`ArrayBuffer.prototype.byteLength` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is true, throw a TypeError exception.
4.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_) is true, return +0<sub>𝔽</sub>.
5.  Let _length_ be _O_._\[\[ArrayBufferByteLength\]\]_.
6.  Return [𝔽](#𝔽)(_length_).


# 25.1.6.2 ArrayBuffer.prototype.constructor

The initial value of `ArrayBuffer.prototype.constructor` is [%ArrayBuffer%](#sec-arraybuffer-constructor).


# 25.1.6.3 get ArrayBuffer.prototype.detached

`ArrayBuffer.prototype.detached` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is true, throw a TypeError exception.
4.  Return [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_).


# 25.1.6.4 get ArrayBuffer.prototype.maxByteLength

`ArrayBuffer.prototype.maxByteLength` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is true, throw a TypeError exception.
4.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_) is true, return +0<sub>𝔽</sub>.
5.  If [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_O_) is true, then
    1.  Let _length_ be _O_._\[\[ArrayBufferByteLength\]\]_.
6.  Else,
    1.  Let _length_ be _O_._\[\[ArrayBufferMaxByteLength\]\]_.
7.  Return [𝔽](#𝔽)(_length_).


# 25.1.6.5 get ArrayBuffer.prototype.resizable

`ArrayBuffer.prototype.resizable` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is true, throw a TypeError exception.
4.  If [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_O_) is false, return true; otherwise return false.


# 25.1.6.6 ArrayBuffer.prototype.resize ( _newLength_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferMaxByteLength\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is true, throw a TypeError exception.
4.  Let _newByteLength_ be ? [ToIndex](#sec-toindex)(_newLength_).
5.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_) is true, throw a TypeError exception.
6.  If _newByteLength_ > _O_._\[\[ArrayBufferMaxByteLength\]\]_, throw a RangeError exception.
7.  Let _hostHandled_ be ? [HostResizeArrayBuffer](#sec-hostresizearraybuffer)(_O_, _newByteLength_).
8.  If _hostHandled_ is handled, return undefined.
9.  Let _oldBlock_ be _O_._\[\[ArrayBufferData\]\]_.
10.  Let _newBlock_ be ? [CreateByteDataBlock](#sec-createbytedatablock)(_newByteLength_).
11.  Let _copyLength_ be [min](#eqn-min)(_newByteLength_, _O_._\[\[ArrayBufferByteLength\]\]_).
12.  Perform [CopyDataBlockBytes](#sec-copydatablockbytes)(_newBlock_, 0, _oldBlock_, 0, _copyLength_).
13.  NOTE: Neither creation of the new [Data Block](#sec-data-blocks) nor copying from the old [Data Block](#sec-data-blocks) are observable. Implementations may implement this method as in-place growth or shrinkage.
14.  Set _O_._\[\[ArrayBufferData\]\]_ to _newBlock_.
15.  Set _O_._\[\[ArrayBufferByteLength\]\]_ to _newByteLength_.
16.  Return undefined.


# 25.1.6.7 ArrayBuffer.prototype.slice ( _start_, _end_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is true, throw a TypeError exception.
4.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_) is true, throw a TypeError exception.
5.  Let _len_ be _O_._\[\[ArrayBufferByteLength\]\]_.
6.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
7.  If _relativeStart_ = -∞, let _first_ be 0.
8.  Else if _relativeStart_ < 0, let _first_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
9.  Else, let _first_ be [min](#eqn-min)(_relativeStart_, _len_).
10.  If _end_ is undefined, let _relativeEnd_ be _len_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
11.  If _relativeEnd_ = -∞, let _final_ be 0.
12.  Else if _relativeEnd_ < 0, let _final_ be [max](#eqn-max)(_len_ + _relativeEnd_, 0).
13.  Else, let _final_ be [min](#eqn-min)(_relativeEnd_, _len_).
14.  Let _newLen_ be [max](#eqn-max)(_final_ - _first_, 0).
15.  Let _ctor_ be ? [SpeciesConstructor](#sec-speciesconstructor)(_O_, [%ArrayBuffer%](#sec-arraybuffer-constructor)).
16.  Let _new_ be ? [Construct](#sec-construct)(_ctor_, « [𝔽](#𝔽)(_newLen_) »).
17.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_new_, _\[\[ArrayBufferData\]\]_).
18.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_new_) is true, throw a TypeError exception.
19.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_new_) is true, throw a TypeError exception.
20.  If [SameValue](#sec-samevalue)(_new_, _O_) is true, throw a TypeError exception.
21.  If _new_._\[\[ArrayBufferByteLength\]\]_ < _newLen_, throw a TypeError exception.
22.  NOTE: Side-effects of the above steps may have detached or resized _O_.
23.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_O_) is true, throw a TypeError exception.
24.  Let _fromBuf_ be _O_._\[\[ArrayBufferData\]\]_.
25.  Let _toBuf_ be _new_._\[\[ArrayBufferData\]\]_.
26.  Let _currentLen_ be _O_._\[\[ArrayBufferByteLength\]\]_.
27.  If _first_ < _currentLen_, then
     1.  Let _count_ be [min](#eqn-min)(_newLen_, _currentLen_ - _first_).
     2.  Perform [CopyDataBlockBytes](#sec-copydatablockbytes)(_toBuf_, 0, _fromBuf_, _first_, _count_).
28.  Return _new_.


# 25.1.6.8 ArrayBuffer.prototype.transfer ( \[_newLength_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Return ? [ArrayBufferCopyAndDetach](#sec-arraybuffercopyanddetach)(_O_, _newLength_, preserve-resizability).


# 25.1.6.9 ArrayBuffer.prototype.transferToFixedLength ( \[_newLength_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Return ? [ArrayBufferCopyAndDetach](#sec-arraybuffercopyanddetach)(_O_, _newLength_, fixed-length).


# 25.1.6.10 ArrayBuffer.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "ArrayBuffer".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 25.1.7 Properties of ArrayBuffer Instances

ArrayBuffer instances inherit properties from the [ArrayBuffer prototype object](#sec-properties-of-the-arraybuffer-prototype-object). ArrayBuffer instances each have an _\[\[ArrayBufferData\]\]_ internal slot, an _\[\[ArrayBufferByteLength\]\]_ internal slot, and an _\[\[ArrayBufferDetachKey\]\]_ internal slot. ArrayBuffer instances which are resizable each have an _\[\[ArrayBufferMaxByteLength\]\]_ internal slot.

ArrayBuffer instances whose _\[\[ArrayBufferData\]\]_ is null are considered to be detached and all operators to access or modify data contained in the ArrayBuffer instance will fail.

ArrayBuffer instances whose _\[\[ArrayBufferDetachKey\]\]_ is set to a value other than undefined need to have all [DetachArrayBuffer](#sec-detacharraybuffer) calls passing that same "detach key" as an argument, otherwise a TypeError will result. This internal slot is only ever set by certain embedding environments, not by algorithms in this specification.


# 25.1.8 Resizable ArrayBuffer Guidelines

Note 1

The following are guidelines for ECMAScript programmers working with [resizable ArrayBuffer](#sec-fixed-length-and-resizable-arraybuffer-objects).

We recommend that programs be tested in their deployment environments where possible. The amount of available physical memory differs greatly between hardware devices. Similarly, virtual memory subsystems also differ greatly between hardware devices as well as operating systems. An application that runs without out-of-memory errors on a 64-bit desktop web browser could run out of memory on a 32-bit mobile web browser.

When choosing a value for the "maxByteLength" option for [resizable ArrayBuffer](#sec-fixed-length-and-resizable-arraybuffer-objects), we recommend that the smallest possible size for the application be chosen. We recommend that "maxByteLength" does not exceed 1,073,741,824 (2<sup>30</sup> bytes or 1GiB).

Please note that successfully constructing a [resizable ArrayBuffer](#sec-fixed-length-and-resizable-arraybuffer-objects) for a particular maximum size does not guarantee that future resizes will succeed.

Note 2

The following are guidelines for ECMAScript implementers implementing [resizable ArrayBuffer](#sec-fixed-length-and-resizable-arraybuffer-objects).

[Resizable ArrayBuffer](#sec-fixed-length-and-resizable-arraybuffer-objects) can be implemented as copying upon resize, as in-place growth via reserving virtual memory up front, or as a combination of both for different values of the [constructor](#constructor)'s "maxByteLength" option.

If a [host](#host) is multi-tenanted (i.e. it runs many ECMAScript applications simultaneously), such as a web browser, and its implementations choose to implement in-place growth by reserving virtual memory, we recommend that both 32-bit and 64-bit implementations throw for values of "maxByteLength" ≥ 1GiB to 1.5GiB. This is to reduce the likelihood a single application can exhaust the virtual memory address space and to reduce interoperability risk.

If a [host](#host) does not have virtual memory, such as those running on embedded devices without an MMU, or if a [host](#host) only implements resizing by copying, it may accept any Number value for the "maxByteLength" option. However, we recommend a RangeError be thrown if a memory block of the requested size can never be allocated. For example, if the requested size is greater than the maximum amount of usable memory on the device.


# 25.2 SharedArrayBuffer Objects


# 25.2.1 Fixed-length and Growable SharedArrayBuffer Objects

A fixed-length SharedArrayBuffer is a SharedArrayBuffer whose byte length cannot change after creation.

A growable SharedArrayBuffer is a SharedArrayBuffer whose byte length may increase after creation via calls to [SharedArrayBuffer.prototype.grow ( _newLength_ )](#sec-sharedarraybuffer.prototype.grow).

The kind of SharedArrayBuffer object that is created depends on the arguments passed to [SharedArrayBuffer ( _length_ \[, _options_ \] )](#sec-sharedarraybuffer-length).


# 25.2.2 Abstract Operations for SharedArrayBuffer Objects


# 25.2.2.1 AllocateSharedArrayBuffer ( _constructor_, _byteLength_ \[, _maxByteLength_ \] )

The abstract operation AllocateSharedArrayBuffer takes arguments _constructor_ (a [constructor](#constructor)) and _byteLength_ (a non-negative [integer](#integer)) and optional argument _maxByteLength_ (a non-negative [integer](#integer) or empty) and returns either a [normal completion containing](#sec-completion-record-specification-type) a SharedArrayBuffer or a [throw completion](#sec-completion-record-specification-type). It is used to create a SharedArrayBuffer. It performs the following steps when called:

1.  Let _slots_ be « _\[\[ArrayBufferData\]\]_ ».
2.  If _maxByteLength_ is present and _maxByteLength_ is not empty, let _allocatingGrowableBuffer_ be true; otherwise let _allocatingGrowableBuffer_ be false.
3.  If _allocatingGrowableBuffer_ is true, then
    1.  If _byteLength_ > _maxByteLength_, throw a RangeError exception.
    2.  Append _\[\[ArrayBufferByteLengthData\]\]_ and _\[\[ArrayBufferMaxByteLength\]\]_ to _slots_.
4.  Else,
    1.  Append _\[\[ArrayBufferByteLength\]\]_ to _slots_.
5.  Let _obj_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(_constructor_, "%SharedArrayBuffer.prototype%", _slots_).
6.  If _allocatingGrowableBuffer_ is true, let _allocLength_ be _maxByteLength_; otherwise let _allocLength_ be _byteLength_.
7.  Let _block_ be ? [CreateSharedByteDataBlock](#sec-createsharedbytedatablock)(_allocLength_).
8.  Set _obj_._\[\[ArrayBufferData\]\]_ to _block_.
9.  If _allocatingGrowableBuffer_ is true, then
    1.  [Assert](#assert): _byteLength_ ≤ _maxByteLength_.
    2.  Let _byteLengthBlock_ be ? [CreateSharedByteDataBlock](#sec-createsharedbytedatablock)(8).
    3.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_byteLengthBlock_, 0, biguint64, [ℤ](#ℤ)(_byteLength_), true, seq-cst).
    4.  Set _obj_._\[\[ArrayBufferByteLengthData\]\]_ to _byteLengthBlock_.
    5.  Set _obj_._\[\[ArrayBufferMaxByteLength\]\]_ to _maxByteLength_.
10.  Else,
     1.  Set _obj_._\[\[ArrayBufferByteLength\]\]_ to _byteLength_.
11.  Return _obj_.


# 25.2.2.2 IsSharedArrayBuffer ( _obj_ )

The abstract operation IsSharedArrayBuffer takes argument _obj_ (an ArrayBuffer or a SharedArrayBuffer) and returns a Boolean. It tests whether an object is a SharedArrayBuffer. It performs the following steps when called:

1.  If _obj_._\[\[ArrayBufferData\]\]_ is a [Shared Data Block](#sec-data-blocks), return true.
2.  Return false.


# 25.2.2.3 IsGrowableSharedArrayBuffer ( _obj_ )

The abstract operation IsGrowableSharedArrayBuffer takes argument _obj_ (an ArrayBuffer or a SharedArrayBuffer) and returns a Boolean. It tests whether an object is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects). It performs the following steps when called:

1.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_obj_) is true and _obj_ has an _\[\[ArrayBufferByteLengthData\]\]_ internal slot, return true.
2.  Return false.


# 25.2.2.4 HostGrowSharedArrayBuffer ( _buffer_, _newByteLength_ )

The [host-defined](#host-defined) abstract operation HostGrowSharedArrayBuffer takes arguments _buffer_ (a SharedArrayBuffer) and _newByteLength_ (a non-negative [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either handled or unhandled, or a [throw completion](#sec-completion-record-specification-type). It gives the [host](#host) an opportunity to perform [implementation-defined](#implementation-defined) growing of _buffer_. If the [host](#host) chooses not to handle growing of _buffer_, it may return unhandled for the default behaviour.

The implementation of HostGrowSharedArrayBuffer must conform to the following requirements:

-   If the abstract operation does not complete normally with unhandled, and _newByteLength_ < the current byte length of the _buffer_ or _newByteLength_ > _buffer_._\[\[ArrayBufferMaxByteLength\]\]_, throw a RangeError exception.
-   Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent). Let _isLittleEndian_ be _AR_._\[\[LittleEndian\]\]_. If the abstract operation completes normally with handled, a [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event whose _\[\[Order\]\]_ is seq-cst, _\[\[Payload\]\]_ is [NumericToRawBytes](#sec-numerictorawbytes)(biguint64, _newByteLength_, _isLittleEndian_), _\[\[Block\]\]_ is _buffer_._\[\[ArrayBufferByteLengthData\]\]_, _\[\[ByteIndex\]\]_ is 0, and _\[\[ElementSize\]\]_ is 8 is added to the [surrounding agent](#surrounding-agent)'s [candidate execution](#sec-candidate-executions) such that racing calls to [SharedArrayBuffer.prototype.grow ( _newLength_ )](#sec-sharedarraybuffer.prototype.grow) are not "lost", i.e. silently do nothing.

Note

The second requirement above is intentionally vague about how or when the current byte length of _buffer_ is read. Because the byte length must be updated via an atomic read-modify-write operation on the underlying hardware, architectures that use load-link/store-conditional or load-exclusive/store-exclusive instruction pairs may wish to keep the paired instructions close in the instruction stream. As such, [SharedArrayBuffer.prototype.grow ( _newLength_ )](#sec-sharedarraybuffer.prototype.grow) itself does not perform bounds checking on _newByteLength_ before calling HostGrowSharedArrayBuffer, nor is there a requirement on when the current byte length is read.

This is in contrast with [HostResizeArrayBuffer](#sec-hostresizearraybuffer), which is guaranteed that 0 ≤ _newByteLength_ ≤ _buffer_._\[\[ArrayBufferMaxByteLength\]\]_.

The default implementation of HostGrowSharedArrayBuffer is to return [NormalCompletion](#sec-normalcompletion)(unhandled).


# 25.2.3 The SharedArrayBuffer Constructor

The SharedArrayBuffer [constructor](#constructor):

-   is %SharedArrayBuffer%.
-   is the initial value of the "SharedArrayBuffer" property of the [global object](#sec-global-object), if that property is present (see below).
-   creates and initializes a new SharedArrayBuffer when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified SharedArrayBuffer behaviour must include a `super` call to the SharedArrayBuffer [constructor](#constructor) to create and initialize subclass instances with the internal state necessary to support the `SharedArrayBuffer.prototype` built-in methods.

Whenever a [host](#host) does not provide concurrent access to SharedArrayBuffers it may omit the "SharedArrayBuffer" property of the [global object](#sec-global-object).

Note

Unlike an `ArrayBuffer`, a `SharedArrayBuffer` cannot become detached, and its internal _\[\[ArrayBufferData\]\]_ slot is never null.


# 25.2.3.1 SharedArrayBuffer ( _length_ \[, _options_ \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Let _byteLength_ be ? [ToIndex](#sec-toindex)(_length_).
3.  Let _requestedMaxByteLength_ be ? [GetArrayBufferMaxByteLengthOption](#sec-getarraybuffermaxbytelengthoption)(_options_).
4.  Return ? [AllocateSharedArrayBuffer](#sec-allocatesharedarraybuffer)(NewTarget, _byteLength_, _requestedMaxByteLength_).


# 25.2.4 Properties of the SharedArrayBuffer Constructor

The SharedArrayBuffer [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 25.2.4.1 SharedArrayBuffer.prototype

The initial value of `SharedArrayBuffer.prototype` is the [SharedArrayBuffer prototype object](#sec-properties-of-the-sharedarraybuffer-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 25.2.4.2 get SharedArrayBuffer \[%Symbol.species% \]

`SharedArrayBuffer[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".


# 25.2.5 Properties of the SharedArrayBuffer Prototype Object

The SharedArrayBuffer prototype object:

-   is %SharedArrayBuffer.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have an _\[\[ArrayBufferData\]\]_ or _\[\[ArrayBufferByteLength\]\]_ internal slot.


# 25.2.5.1 get SharedArrayBuffer.prototype.byteLength

`SharedArrayBuffer.prototype.byteLength` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is false, throw a TypeError exception.
4.  Let _length_ be [ArrayBufferByteLength](#sec-arraybufferbytelength)(_O_, seq-cst).
5.  Return [𝔽](#𝔽)(_length_).


# 25.2.5.2 SharedArrayBuffer.prototype.constructor

The initial value of `SharedArrayBuffer.prototype.constructor` is [%SharedArrayBuffer%](#sec-sharedarraybuffer-constructor).


# 25.2.5.3 SharedArrayBuffer.prototype.grow ( _newLength_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferMaxByteLength\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is false, throw a TypeError exception.
4.  Let _newByteLength_ be ? [ToIndex](#sec-toindex)(_newLength_).
5.  Let _hostHandled_ be ? [HostGrowSharedArrayBuffer](#sec-hostgrowsharedarraybuffer)(_O_, _newByteLength_).
6.  If _hostHandled_ is handled, return undefined.
7.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
8.  Let _isLittleEndian_ be _AR_._\[\[LittleEndian\]\]_.
9.  Let _byteLengthBlock_ be _O_._\[\[ArrayBufferByteLengthData\]\]_.
10.  Let _currentByteLengthRawBytes_ be [GetRawBytesFromSharedBlock](#sec-getrawbytesfromsharedblock)(_byteLengthBlock_, 0, biguint64, true, seq-cst).
11.  Let _newByteLengthRawBytes_ be [NumericToRawBytes](#sec-numerictorawbytes)(biguint64, [ℤ](#ℤ)(_newByteLength_), _isLittleEndian_).
12.  Repeat,
     1.  NOTE: This is a compare-and-exchange loop to ensure that parallel, racing grows of the same buffer are totally ordered, are not lost, and do not silently do nothing. The loop exits if it was able to attempt to grow uncontended.
     2.  Let _currentByteLength_ be [ℝ](#ℝ)([RawBytesToNumeric](#sec-rawbytestonumeric)(biguint64, _currentByteLengthRawBytes_, _isLittleEndian_)).
     3.  If _newByteLength_ = _currentByteLength_, return undefined.
     4.  If _newByteLength_ < _currentByteLength_ or _newByteLength_ > _O_._\[\[ArrayBufferMaxByteLength\]\]_, throw a RangeError exception.
     5.  Let _byteLengthDelta_ be _newByteLength_ - _currentByteLength_.
     6.  If it is impossible to create a new [Shared Data Block](#sec-data-blocks) value consisting of _byteLengthDelta_ bytes, throw a RangeError exception.
     7.  NOTE: No new [Shared Data Block](#sec-data-blocks) is constructed and used here. The observable behaviour of growable SharedArrayBuffers is specified by allocating a [max](#eqn-max)\-sized [Shared Data Block](#sec-data-blocks) at construction time, and this step captures the requirement that implementations that run out of memory must throw a RangeError.
     8.  Let _readByteLengthRawBytes_ be [AtomicCompareExchangeInSharedBlock](#sec-atomiccompareexchangeinsharedblock)(_byteLengthBlock_, 0, 8, _currentByteLengthRawBytes_, _newByteLengthRawBytes_).
     9.  If [ByteListEqual](#sec-bytelistequal)(_readByteLengthRawBytes_, _currentByteLengthRawBytes_) is true, return undefined.
     10.  Set _currentByteLengthRawBytes_ to _readByteLengthRawBytes_.

Note

Spurious failures of the compare-exchange to update the length are prohibited. If the bounds checking for the new length passes and the implementation is not out of memory, a [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event (i.e. a successful compare-exchange) is always added into the [candidate execution](#sec-candidate-executions).

Parallel calls to SharedArrayBuffer.prototype.grow are totally ordered. For example, consider two racing calls: `sab.grow(10)` and `sab.grow(20)`. One of the two calls is guaranteed to win the race. The call to `sab.grow(10)` will never shrink `sab` even if `sab.grow(20)` happened first; in that case it will instead throw a RangeError.


# 25.2.5.4 get SharedArrayBuffer.prototype.growable

`SharedArrayBuffer.prototype.growable` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is false, throw a TypeError exception.
4.  If [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_O_) is false, return true; otherwise return false.


# 25.2.5.5 get SharedArrayBuffer.prototype.maxByteLength

`SharedArrayBuffer.prototype.maxByteLength` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is false, throw a TypeError exception.
4.  If [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_O_) is true, then
    1.  Let _length_ be _O_._\[\[ArrayBufferByteLength\]\]_.
5.  Else,
    1.  Let _length_ be _O_._\[\[ArrayBufferMaxByteLength\]\]_.
6.  Return [𝔽](#𝔽)(_length_).


# 25.2.5.6 SharedArrayBuffer.prototype.slice ( _start_, _end_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[ArrayBufferData\]\]_).
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_O_) is false, throw a TypeError exception.
4.  Let _len_ be [ArrayBufferByteLength](#sec-arraybufferbytelength)(_O_, seq-cst).
5.  Let _relativeStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
6.  If _relativeStart_ = -∞, let _first_ be 0.
7.  Else if _relativeStart_ < 0, let _first_ be [max](#eqn-max)(_len_ + _relativeStart_, 0).
8.  Else, let _first_ be [min](#eqn-min)(_relativeStart_, _len_).
9.  If _end_ is undefined, let _relativeEnd_ be _len_; else let _relativeEnd_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_end_).
10.  If _relativeEnd_ = -∞, let _final_ be 0.
11.  Else if _relativeEnd_ < 0, let _final_ be [max](#eqn-max)(_len_ + _relativeEnd_, 0).
12.  Else, let _final_ be [min](#eqn-min)(_relativeEnd_, _len_).
13.  Let _newLen_ be [max](#eqn-max)(_final_ - _first_, 0).
14.  Let _ctor_ be ? [SpeciesConstructor](#sec-speciesconstructor)(_O_, [%SharedArrayBuffer%](#sec-sharedarraybuffer-constructor)).
15.  Let _new_ be ? [Construct](#sec-construct)(_ctor_, « [𝔽](#𝔽)(_newLen_) »).
16.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_new_, _\[\[ArrayBufferData\]\]_).
17.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_new_) is false, throw a TypeError exception.
18.  If _new_._\[\[ArrayBufferData\]\]_ is _O_._\[\[ArrayBufferData\]\]_, throw a TypeError exception.
19.  If [ArrayBufferByteLength](#sec-arraybufferbytelength)(_new_, seq-cst) < _newLen_, throw a TypeError exception.
20.  Let _fromBuf_ be _O_._\[\[ArrayBufferData\]\]_.
21.  Let _toBuf_ be _new_._\[\[ArrayBufferData\]\]_.
22.  Perform [CopyDataBlockBytes](#sec-copydatablockbytes)(_toBuf_, 0, _fromBuf_, _first_, _newLen_).
23.  Return _new_.


# 25.2.5.7 SharedArrayBuffer.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "SharedArrayBuffer".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 25.2.6 Properties of SharedArrayBuffer Instances

SharedArrayBuffer instances inherit properties from the [SharedArrayBuffer prototype object](#sec-properties-of-the-sharedarraybuffer-prototype-object). SharedArrayBuffer instances each have an _\[\[ArrayBufferData\]\]_ internal slot. SharedArrayBuffer instances which are not growable each have an _\[\[ArrayBufferByteLength\]\]_ internal slot. SharedArrayBuffer instances which are growable each have an _\[\[ArrayBufferByteLengthData\]\]_ internal slot and an _\[\[ArrayBufferMaxByteLength\]\]_ internal slot.

Note

SharedArrayBuffer instances, unlike ArrayBuffer instances, are never detached.


# 25.2.7 Growable SharedArrayBuffer Guidelines

Note 1

The following are guidelines for ECMAScript programmers working with [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).

We recommend that programs be tested in their deployment environments where possible. The amount of available physical memory differ greatly between hardware devices. Similarly, virtual memory subsystems also differ greatly between hardware devices as well as operating systems. An application that runs without out-of-memory errors on a 64-bit desktop web browser could run out of memory on a 32-bit mobile web browser.

When choosing a value for the "maxByteLength" option for [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects), we recommend that the smallest possible size for the application be chosen. We recommend that "maxByteLength" does not exceed 1073741824, or 1GiB.

Please note that successfully constructing a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects) for a particular maximum size does not guarantee that future grows will succeed.

Not all loads of a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects)'s length are synchronizing seq-cst loads. Loads of the length that are for bounds-checking of an [integer-indexed](#integer-index) property access, e.g. `u8[idx]`, are not synchronizing. In general, in the absence of explicit synchronization, one property access being in-bound does not imply a subsequent property access in the same [agent](#agent) is also in-bound. In contrast, explicit loads of the length via the `length` and `byteLength` getters on SharedArrayBuffer, [%TypedArray%](#sec-%typedarray%-intrinsic-object).prototype, and DataView.prototype are synchronizing. Loads of the length that are performed by built-in methods to check if a [TypedArray](#typedarray) is entirely out-of-bounds are also synchronizing.

Note 2

The following are guidelines for ECMAScript implementers implementing [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).

We recommend [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects) be implemented as in-place growth via reserving virtual memory up front.

Because grow operations can happen in parallel with memory accesses on a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects), the constraints of the [memory model](#sec-memory-model) require that even unordered accesses do not "tear" (bits of their values will not be mixed). In practice, this means the underlying data block of a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects) cannot be grown by being copied without stopping the world. We do not recommend stopping the world as an implementation strategy because it introduces a serialization point and is slow.

Grown memory must appear zeroed from the moment of its creation, including to any racy accesses in parallel. This can be accomplished via zero-filled-on-demand virtual memory pages, or careful synchronization if manually zeroing memory.

[Integer-indexed](#integer-index) property access on [TypedArray](#typedarray) views of growable SharedArrayBuffers is intended to be optimizable similarly to access on [TypedArray](#typedarray) views of non-growable SharedArrayBuffers, because [integer-indexed](#integer-index) property loads on are not synchronizing on the underlying buffer's length (see programmer guidelines above). For example, bounds checks for property accesses may still be hoisted out of loops.

In practice it is difficult to implement [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects) by copying on [hosts](#host) that do not have virtual memory, such as those running on embedded devices without an MMU. Memory usage behaviour of growable SharedArrayBuffers on such [hosts](#host) may significantly differ from that of [hosts](#host) with virtual memory. Such [hosts](#host) should clearly communicate memory usage expectations to users.


# 25.3 DataView Objects


# 25.3.1 Abstract Operations For DataView Objects


# 25.3.1.1 DataView With Buffer Witness Records

A DataView With Buffer Witness Record is a [Record](#sec-list-and-record-specification-type) value used to encapsulate a DataView along with a cached byte length of the viewed buffer. It is used to help ensure there is a single [ReadSharedMemory](#sec-memory-model-fundamentals) event of the byte length data block when the viewed buffer is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).

DataView With Buffer Witness Records have the fields listed in [Table 75](#table-dataview-with-buffer-witness-record-fields).

Table 75: [DataView With Buffer Witness Record](#sec-dataview-with-buffer-witness-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Object]]</var></td><td>a DataView</td><td>The DataView object whose buffer's byte length is loaded.</td></tr><tr><td><var class="field">[[CachedBufferByteLength]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_14573"><a href="#integer">integer</a></emu-xref> or <emu-const>detached</emu-const></td><td>The byte length of the object's <var class="field">[[ViewedArrayBuffer]]</var> when the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_14574"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> was created.</td></tr></tbody></table>


# 25.3.1.2 MakeDataViewWithBufferWitnessRecord ( _obj_, _order_ )

The abstract operation MakeDataViewWithBufferWitnessRecord takes arguments _obj_ (a DataView) and _order_ (seq-cst or unordered) and returns a [DataView With Buffer Witness Record](#sec-dataview-with-buffer-witness-records). It performs the following steps when called:

1.  Let _buffer_ be _obj_._\[\[ViewedArrayBuffer\]\]_.
2.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_buffer_) is true, then
    1.  Let _byteLength_ be detached.
3.  Else,
    1.  Let _byteLength_ be [ArrayBufferByteLength](#sec-arraybufferbytelength)(_buffer_, _order_).
4.  Return the [DataView With Buffer Witness Record](#sec-dataview-with-buffer-witness-records) { _\[\[Object\]\]_: _obj_, _\[\[CachedBufferByteLength\]\]_: _byteLength_ }.


# 25.3.1.3 GetViewByteLength ( _viewRecord_ )

The abstract operation GetViewByteLength takes argument _viewRecord_ (a [DataView With Buffer Witness Record](#sec-dataview-with-buffer-witness-records)) and returns a non-negative [integer](#integer). It performs the following steps when called:

1.  [Assert](#assert): [IsViewOutOfBounds](#sec-isviewoutofbounds)(_viewRecord_) is false.
2.  Let _view_ be _viewRecord_._\[\[Object\]\]_.
3.  If _view_._\[\[ByteLength\]\]_ is not auto, return _view_._\[\[ByteLength\]\]_.
4.  [Assert](#assert): [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_view_._\[\[ViewedArrayBuffer\]\]_) is false.
5.  Let _byteOffset_ be _view_._\[\[ByteOffset\]\]_.
6.  Let _byteLength_ be _viewRecord_._\[\[CachedBufferByteLength\]\]_.
7.  [Assert](#assert): _byteLength_ is not detached.
8.  Return _byteLength_ - _byteOffset_.


# 25.3.1.4 IsViewOutOfBounds ( _viewRecord_ )

The abstract operation IsViewOutOfBounds takes argument _viewRecord_ (a [DataView With Buffer Witness Record](#sec-dataview-with-buffer-witness-records)) and returns a Boolean. It performs the following steps when called:

1.  Let _view_ be _viewRecord_._\[\[Object\]\]_.
2.  Let _bufferByteLength_ be _viewRecord_._\[\[CachedBufferByteLength\]\]_.
3.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_view_._\[\[ViewedArrayBuffer\]\]_) is true, then
    1.  [Assert](#assert): _bufferByteLength_ is detached.
    2.  Return true.
4.  [Assert](#assert): _bufferByteLength_ is a non-negative [integer](#integer).
5.  Let _byteOffsetStart_ be _view_._\[\[ByteOffset\]\]_.
6.  If _view_._\[\[ByteLength\]\]_ is auto, then
    1.  Let _byteOffsetEnd_ be _bufferByteLength_.
7.  Else,
    1.  Let _byteOffsetEnd_ be _byteOffsetStart_ + _view_._\[\[ByteLength\]\]_.
8.  NOTE: A 0-length DataView whose _\[\[ByteOffset\]\]_ is _bufferByteLength_ is not considered out-of-bounds.
9.  If _byteOffsetStart_ > _bufferByteLength_ or _byteOffsetEnd_ > _bufferByteLength_, return true.
10.  Return false.


# 25.3.1.5 GetViewValue ( _view_, _requestIndex_, _isLittleEndian_, _type_ )

The abstract operation GetViewValue takes arguments _view_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _requestIndex_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _isLittleEndian_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _type_ (a [TypedArray element type](#sec-typedarray-objects)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a Number or a BigInt, or a [throw completion](#sec-completion-record-specification-type). It is used by functions on DataView instances to retrieve values from the view's buffer. It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_view_, _\[\[DataView\]\]_).
2.  [Assert](#assert): _view_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
3.  Let _getIndex_ be ? [ToIndex](#sec-toindex)(_requestIndex_).
4.  Set _isLittleEndian_ to [ToBoolean](#sec-toboolean)(_isLittleEndian_).
5.  Let _viewOffset_ be _view_._\[\[ByteOffset\]\]_.
6.  Let _viewRecord_ be [MakeDataViewWithBufferWitnessRecord](#sec-makedataviewwithbufferwitnessrecord)(_view_, unordered).
7.  NOTE: Bounds checking is not a synchronizing operation when _view_'s backing buffer is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).
8.  If [IsViewOutOfBounds](#sec-isviewoutofbounds)(_viewRecord_) is true, throw a TypeError exception.
9.  Let _viewSize_ be [GetViewByteLength](#sec-getviewbytelength)(_viewRecord_).
10.  Let _elementSize_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
11.  If _getIndex_ + _elementSize_ > _viewSize_, throw a RangeError exception.
12.  Let _bufferIndex_ be _getIndex_ + _viewOffset_.
13.  Return [GetValueFromBuffer](#sec-getvaluefrombuffer)(_view_._\[\[ViewedArrayBuffer\]\]_, _bufferIndex_, _type_, false, unordered, _isLittleEndian_).


# 25.3.1.6 SetViewValue ( _view_, _requestIndex_, _isLittleEndian_, _type_, _value_ )

The abstract operation SetViewValue takes arguments _view_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _requestIndex_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _isLittleEndian_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _type_ (a [TypedArray element type](#sec-typedarray-objects)), and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) undefined or a [throw completion](#sec-completion-record-specification-type). It is used by functions on DataView instances to store values into the view's buffer. It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_view_, _\[\[DataView\]\]_).
2.  [Assert](#assert): _view_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
3.  Let _getIndex_ be ? [ToIndex](#sec-toindex)(_requestIndex_).
4.  If [IsBigIntElementType](#sec-isbigintelementtype)(_type_) is true, let _numberValue_ be ? [ToBigInt](#sec-tobigint)(_value_).
5.  Otherwise, let _numberValue_ be ? [ToNumber](#sec-tonumber)(_value_).
6.  Set _isLittleEndian_ to [ToBoolean](#sec-toboolean)(_isLittleEndian_).
7.  Let _viewOffset_ be _view_._\[\[ByteOffset\]\]_.
8.  Let _viewRecord_ be [MakeDataViewWithBufferWitnessRecord](#sec-makedataviewwithbufferwitnessrecord)(_view_, unordered).
9.  NOTE: Bounds checking is not a synchronizing operation when _view_'s backing buffer is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).
10.  If [IsViewOutOfBounds](#sec-isviewoutofbounds)(_viewRecord_) is true, throw a TypeError exception.
11.  Let _viewSize_ be [GetViewByteLength](#sec-getviewbytelength)(_viewRecord_).
12.  Let _elementSize_ be the Element Size value specified in [Table 73](#table-the-typedarray-constructors) for Element Type _type_.
13.  If _getIndex_ + _elementSize_ > _viewSize_, throw a RangeError exception.
14.  Let _bufferIndex_ be _getIndex_ + _viewOffset_.
15.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_view_._\[\[ViewedArrayBuffer\]\]_, _bufferIndex_, _type_, _numberValue_, false, unordered, _isLittleEndian_).
16.  Return undefined.


# 25.3.2 The DataView Constructor

The DataView [constructor](#constructor):

-   is %DataView%.
-   is the initial value of the "DataView" property of the [global object](#sec-global-object).
-   creates and initializes a new DataView when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified DataView behaviour must include a `super` call to the DataView [constructor](#constructor) to create and initialize subclass instances with the internal state necessary to support the `DataView.prototype` built-in methods.


# 25.3.2.1 DataView ( _buffer_ \[, _byteOffset_ \[, _byteLength_ \] \] )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_buffer_, _\[\[ArrayBufferData\]\]_).
3.  Let _offset_ be ? [ToIndex](#sec-toindex)(_byteOffset_).
4.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_buffer_) is true, throw a TypeError exception.
5.  Let _bufferByteLength_ be [ArrayBufferByteLength](#sec-arraybufferbytelength)(_buffer_, seq-cst).
6.  If _offset_ > _bufferByteLength_, throw a RangeError exception.
7.  Let _bufferIsFixedLength_ be [IsFixedLengthArrayBuffer](#sec-isfixedlengtharraybuffer)(_buffer_).
8.  If _byteLength_ is undefined, then
    1.  If _bufferIsFixedLength_ is true, then
        1.  Let _viewByteLength_ be _bufferByteLength_ - _offset_.
    2.  Else,
        1.  Let _viewByteLength_ be auto.
9.  Else,
    1.  Let _viewByteLength_ be ? [ToIndex](#sec-toindex)(_byteLength_).
    2.  If _offset_ + _viewByteLength_ > _bufferByteLength_, throw a RangeError exception.
10.  Let _O_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%DataView.prototype%", « _\[\[DataView\]\]_, _\[\[ViewedArrayBuffer\]\]_, _\[\[ByteLength\]\]_, _\[\[ByteOffset\]\]_ »).
11.  If [IsDetachedBuffer](#sec-isdetachedbuffer)(_buffer_) is true, throw a TypeError exception.
12.  Set _bufferByteLength_ to [ArrayBufferByteLength](#sec-arraybufferbytelength)(_buffer_, seq-cst).
13.  If _offset_ > _bufferByteLength_, throw a RangeError exception.
14.  If _byteLength_ is not undefined, then
     1.  If _offset_ + _viewByteLength_ > _bufferByteLength_, throw a RangeError exception.
15.  Set _O_._\[\[ViewedArrayBuffer\]\]_ to _buffer_.
16.  Set _O_._\[\[ByteLength\]\]_ to _viewByteLength_.
17.  Set _O_._\[\[ByteOffset\]\]_ to _offset_.
18.  Return _O_.


# 25.3.3 Properties of the DataView Constructor

The DataView [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 25.3.3.1 DataView.prototype

The initial value of `DataView.prototype` is the [DataView prototype object](#sec-properties-of-the-dataview-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 25.3.4 Properties of the DataView Prototype Object

The DataView prototype object:

-   is %DataView.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[DataView\]\]_, _\[\[ViewedArrayBuffer\]\]_, _\[\[ByteLength\]\]_, or _\[\[ByteOffset\]\]_ internal slot.


# 25.3.4.1 get DataView.prototype.buffer

`DataView.prototype.buffer` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[DataView\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _buffer_ be _O_._\[\[ViewedArrayBuffer\]\]_.
5.  Return _buffer_.


# 25.3.4.2 get DataView.prototype.byteLength

`DataView.prototype.byteLength` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[DataView\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _viewRecord_ be [MakeDataViewWithBufferWitnessRecord](#sec-makedataviewwithbufferwitnessrecord)(_O_, seq-cst).
5.  If [IsViewOutOfBounds](#sec-isviewoutofbounds)(_viewRecord_) is true, throw a TypeError exception.
6.  Let _size_ be [GetViewByteLength](#sec-getviewbytelength)(_viewRecord_).
7.  Return [𝔽](#𝔽)(_size_).


# 25.3.4.3 get DataView.prototype.byteOffset

`DataView.prototype.byteOffset` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[DataView\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[ViewedArrayBuffer\]\]_ internal slot.
4.  Let _viewRecord_ be [MakeDataViewWithBufferWitnessRecord](#sec-makedataviewwithbufferwitnessrecord)(_O_, seq-cst).
5.  If [IsViewOutOfBounds](#sec-isviewoutofbounds)(_viewRecord_) is true, throw a TypeError exception.
6.  Let _offset_ be _O_._\[\[ByteOffset\]\]_.
7.  Return [𝔽](#𝔽)(_offset_).


# 25.3.4.4 DataView.prototype.constructor

The initial value of `DataView.prototype.constructor` is [%DataView%](#sec-dataview-constructor).


# 25.3.4.5 DataView.prototype.getBigInt64 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, bigint64).


# 25.3.4.6 DataView.prototype.getBigUint64 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, biguint64).


# 25.3.4.7 DataView.prototype.getFloat16 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, float16).


# 25.3.4.8 DataView.prototype.getFloat32 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, float32).


# 25.3.4.9 DataView.prototype.getFloat64 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, float64).


# 25.3.4.10 DataView.prototype.getInt8 ( _byteOffset_ )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, true, int8).


# 25.3.4.11 DataView.prototype.getInt16 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, int16).


# 25.3.4.12 DataView.prototype.getInt32 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, int32).


# 25.3.4.13 DataView.prototype.getUint8 ( _byteOffset_ )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, true, uint8).


# 25.3.4.14 DataView.prototype.getUint16 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, uint16).


# 25.3.4.15 DataView.prototype.getUint32 ( _byteOffset_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [GetViewValue](#sec-getviewvalue)(_view_, _byteOffset_, _littleEndian_, uint32).


# 25.3.4.16 DataView.prototype.setBigInt64 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, bigint64, _value_).


# 25.3.4.17 DataView.prototype.setBigUint64 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, biguint64, _value_).


# 25.3.4.18 DataView.prototype.setFloat16 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, float16, _value_).


# 25.3.4.19 DataView.prototype.setFloat32 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, float32, _value_).


# 25.3.4.20 DataView.prototype.setFloat64 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, float64, _value_).


# 25.3.4.21 DataView.prototype.setInt8 ( _byteOffset_, _value_ )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, true, int8, _value_).


# 25.3.4.22 DataView.prototype.setInt16 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, int16, _value_).


# 25.3.4.23 DataView.prototype.setInt32 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, int32, _value_).


# 25.3.4.24 DataView.prototype.setUint8 ( _byteOffset_, _value_ )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, true, uint8, _value_).


# 25.3.4.25 DataView.prototype.setUint16 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, uint16, _value_).


# 25.3.4.26 DataView.prototype.setUint32 ( _byteOffset_, _value_ \[, _littleEndian_ \] )

This method performs the following steps when called:

1.  Let _view_ be the this value.
2.  If _littleEndian_ is not present, set _littleEndian_ to false.
3.  Return ? [SetViewValue](#sec-setviewvalue)(_view_, _byteOffset_, _littleEndian_, uint32, _value_).


# 25.3.4.27 DataView.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "DataView".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 25.3.5 Properties of DataView Instances

DataView instances are [ordinary objects](#ordinary-object) that inherit properties from the [DataView prototype object](#sec-properties-of-the-dataview-prototype-object). DataView instances each have _\[\[DataView\]\]_, _\[\[ViewedArrayBuffer\]\]_, _\[\[ByteLength\]\]_, and _\[\[ByteOffset\]\]_ internal slots.

Note

The value of the _\[\[DataView\]\]_ internal slot is not used within this specification. The simple presence of that internal slot is used within the specification to identify objects created using the DataView [constructor](#constructor).


# 25.4 The Atomics Object

The Atomics object:

-   is %Atomics%.
-   is the initial value of the "Atomics" property of the [global object](#sec-global-object).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   does not have a _\[\[Construct\]\]_ internal method; it cannot be used as a [constructor](#constructor) with the `new` operator.
-   does not have a _\[\[Call\]\]_ internal method; it cannot be invoked as a function.

The Atomics object provides functions that operate indivisibly (atomically) on shared memory array cells as well as functions that let [agents](#agent) wait for and dispatch primitive events. When used with discipline, the Atomics functions allow multi-[agent](#agent) programs that communicate through shared memory to execute in a well-understood order even on parallel CPUs. The rules that govern shared-memory communication are provided by the [memory model](#sec-memory-model), defined below.

Note

For informative guidelines for programming and implementing shared memory in ECMAScript, please see the notes at the end of the [memory model](#sec-memory-model) section.


# 25.4.1 Waiter Record

A Waiter Record is a [Record](#sec-list-and-record-specification-type) value used to denote a particular call to `Atomics.wait` or `Atomics.waitAsync`.

A Waiter Record has fields listed in [Table 76](#table-waiterrecord).

Table 76: [Waiter Record](#sec-waiter-record) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[AgentSignifier]]</var></td><td>an <emu-xref href="#sec-agents" id="_ref_14697"><a href="#sec-agents">agent signifier</a></emu-xref></td><td>The <emu-xref href="#agent" id="_ref_14698"><a href="#agent">agent</a></emu-xref> that called <code>Atomics.wait</code> or <code>Atomics.waitAsync</code>.</td></tr><tr><td><var class="field">[[PromiseCapability]]</var></td><td>a <emu-xref href="#sec-promisecapability-records" id="_ref_14699"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref> or <emu-const>blocking</emu-const></td><td>If denoting a call to <code>Atomics.waitAsync</code>, the resulting promise, otherwise <emu-const>blocking</emu-const>.</td></tr><tr><td><var class="field">[[TimeoutTime]]</var></td><td>a non-negative <emu-xref href="#extended-mathematical-value" id="_ref_14700"><a href="#extended-mathematical-value">extended mathematical value</a></emu-xref></td><td>The earliest time by which timeout may be triggered; computed using <emu-xref href="#sec-time-values-and-time-range" id="_ref_14701"><a href="#sec-time-values-and-time-range">time values</a></emu-xref>.</td></tr><tr><td><var class="field">[[Result]]</var></td><td><emu-val>"ok"</emu-val> or <emu-val>"timed-out"</emu-val></td><td>The return value of the call.</td></tr></tbody></table>


# 25.4.2 WaiterList Records

A WaiterList Record is used to explain waiting and notification of [agents](#agent) via `Atomics.wait`, `Atomics.waitAsync`, and `Atomics.notify`.

A WaiterList Record has fields listed in [Table 77](#table-waiterlistrecord).

Table 77: [WaiterList Record](#sec-waiterlist-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Waiters]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_14704"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-waiter-record" id="_ref_14705"><a href="#sec-waiter-record">Waiter Records</a></emu-xref></td><td>The calls to <code>Atomics.wait</code> or <code>Atomics.waitAsync</code> that are waiting on the location with which this WaiterList is associated.</td></tr><tr><td><var class="field">[[MostRecentLeaveEvent]]</var></td><td>a <emu-xref href="#sec-memory-model-fundamentals" id="_ref_14706"><a href="#sec-memory-model-fundamentals">Synchronize event</a></emu-xref> or <emu-const>empty</emu-const></td><td>The event of the most recent leaving of its <emu-xref href="#sec-waiterlist-records" id="_ref_14707"><a href="#sec-waiterlist-records">critical section</a></emu-xref>, or <emu-const>empty</emu-const> if its <emu-xref href="#sec-waiterlist-records" id="_ref_14708"><a href="#sec-waiterlist-records">critical section</a></emu-xref> has never been entered.</td></tr></tbody></table>

There can be multiple [Waiter Records](#sec-waiter-record) in a WaiterList with the same [agent signifier](#sec-agents).

The [agent cluster](#sec-agent-clusters) has a store of WaiterList Records; the store is indexed by (_block_, _i_), where _block_ is a [Shared Data Block](#sec-data-blocks) and _i_ a byte offset into the memory of _block_. WaiterList Records are [agent](#agent)\-independent: a lookup in the store of WaiterList Records by (_block_, _i_) will result in the same WaiterList Record in any [agent](#agent) in the [agent cluster](#sec-agent-clusters).

Each WaiterList Record has a critical section that controls exclusive access to that WaiterList Record during evaluation. Only a single [agent](#agent) may enter a WaiterList Record's critical section at one time. Entering and leaving a WaiterList Record's critical section is controlled by the [abstract operations](#sec-algorithm-conventions-abstract-operations) [EnterCriticalSection](#sec-entercriticalsection) and [LeaveCriticalSection](#sec-leavecriticalsection). Operations on a WaiterList Record—adding and removing waiting [agents](#agent), traversing the list of [agents](#agent), suspending and notifying [agents](#agent) on the list, setting and retrieving the [Synchronize event](#sec-memory-model-fundamentals)—may only be performed by [agents](#agent) that have entered the WaiterList Record's critical section.


# 25.4.3 Abstract Operations for Atomics


# 25.4.3.1 ValidateIntegerTypedArray ( _typedArray_, _waitable_ )

The abstract operation ValidateIntegerTypedArray takes arguments _typedArray_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _waitable_ (a Boolean) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records), or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _taRecord_ be ? [ValidateTypedArray](#sec-validatetypedarray)(_typedArray_, unordered).
2.  NOTE: Bounds checking is not a synchronizing operation when _typedArray_'s backing buffer is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).
3.  If _waitable_ is true, then
    1.  If _typedArray_._\[\[TypedArrayName\]\]_ is neither "Int32Array" nor "BigInt64Array", throw a TypeError exception.
4.  Else,
    1.  Let _type_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
    2.  If [IsUnclampedIntegerElementType](#sec-isunclampedintegerelementtype)(_type_) is false and [IsBigIntElementType](#sec-isbigintelementtype)(_type_) is false, throw a TypeError exception.
5.  Return _taRecord_.


# 25.4.3.2 ValidateAtomicAccess ( _taRecord_, _requestIndex_ )

The abstract operation ValidateAtomicAccess takes arguments _taRecord_ (a [TypedArray With Buffer Witness Record](#sec-typedarray-with-buffer-witness-records)) and _requestIndex_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integer](#integer) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _length_ be [TypedArrayLength](#sec-typedarraylength)(_taRecord_).
2.  Let _accessIndex_ be ? [ToIndex](#sec-toindex)(_requestIndex_).
3.  [Assert](#assert): _accessIndex_ ≥ 0.
4.  If _accessIndex_ ≥ _length_, throw a RangeError exception.
5.  Let _typedArray_ be _taRecord_._\[\[Object\]\]_.
6.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_typedArray_).
7.  Let _offset_ be _typedArray_._\[\[ByteOffset\]\]_.
8.  Return (_accessIndex_ × _elementSize_) + _offset_.


# 25.4.3.3 ValidateAtomicAccessOnIntegerTypedArray ( _typedArray_, _requestIndex_ )

The abstract operation ValidateAtomicAccessOnIntegerTypedArray takes arguments _typedArray_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _requestIndex_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [integer](#integer) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _taRecord_ be ? [ValidateIntegerTypedArray](#sec-validateintegertypedarray)(_typedArray_, false).
2.  Return ? [ValidateAtomicAccess](#sec-validateatomicaccess)(_taRecord_, _requestIndex_).


# 25.4.3.4 RevalidateAtomicAccess ( _typedArray_, _byteIndexInBuffer_ )

The abstract operation RevalidateAtomicAccess takes arguments _typedArray_ (a [TypedArray](#typedarray)) and _byteIndexInBuffer_ (an [integer](#integer)) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). This operation revalidates the index within the backing buffer for atomic operations after all argument coercions are performed in Atomics methods, as argument coercions can have arbitrary side effects, which could cause the buffer to become out of bounds. This operation does not throw when _typedArray_'s backing buffer is a SharedArrayBuffer. It performs the following steps when called:

1.  Let _taRecord_ be [MakeTypedArrayWithBufferWitnessRecord](#sec-maketypedarraywithbufferwitnessrecord)(_typedArray_, unordered).
2.  NOTE: Bounds checking is not a synchronizing operation when _typedArray_'s backing buffer is a [growable SharedArrayBuffer](#sec-fixed-length-and-growable-sharedarraybuffer-objects).
3.  If [IsTypedArrayOutOfBounds](#sec-istypedarrayoutofbounds)(_taRecord_) is true, throw a TypeError exception.
4.  [Assert](#assert): _byteIndexInBuffer_ ≥ _typedArray_._\[\[ByteOffset\]\]_.
5.  If _byteIndexInBuffer_ ≥ _taRecord_._\[\[CachedBufferByteLength\]\]_, throw a RangeError exception.
6.  Return unused.


# 25.4.3.5 GetWaiterList ( _block_, _i_ )

The abstract operation GetWaiterList takes arguments _block_ (a [Shared Data Block](#sec-data-blocks)) and _i_ (a non-negative [integer](#integer) that is evenly divisible by 4) and returns a [WaiterList Record](#sec-waiterlist-records). It performs the following steps when called:

1.  [Assert](#assert): _i_ and _i_ + 3 are valid byte offsets within the memory of _block_.
2.  Return the [WaiterList Record](#sec-waiterlist-records) that is referenced by the pair (_block_, _i_).


# 25.4.3.6 EnterCriticalSection ( _WL_ )

The abstract operation EnterCriticalSection takes argument _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): The [surrounding agent](#surrounding-agent) is not in the [critical section](#sec-waiterlist-records) for any [WaiterList Record](#sec-waiterlist-records).
2.  Wait until no [agent](#agent) is in the [critical section](#sec-waiterlist-records) for _WL_, then enter the [critical section](#sec-waiterlist-records) for _WL_ (without allowing any other [agent](#agent) to enter).
3.  If _WL_._\[\[MostRecentLeaveEvent\]\]_ is not empty, then
    1.  NOTE: A _WL_ whose [critical section](#sec-waiterlist-records) has been entered at least once has a [Synchronize event](#sec-memory-model-fundamentals) set by [LeaveCriticalSection](#sec-leavecriticalsection).
    2.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
    3.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
    4.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
    5.  Let _enterEvent_ be a new [Synchronize event](#sec-memory-model-fundamentals).
    6.  Append _enterEvent_ to _eventsRecord_._\[\[EventList\]\]_.
    7.  Append (_WL_._\[\[MostRecentLeaveEvent\]\]_, _enterEvent_) to _eventsRecord_._\[\[AgentSynchronizesWith\]\]_.
4.  Return unused.

EnterCriticalSection has contention when an [agent](#agent) attempting to enter the [critical section](#sec-waiterlist-records) must wait for another [agent](#agent) to leave it. When there is no contention, FIFO order of EnterCriticalSection calls is observable. When there is contention, an implementation may choose an arbitrary order but may not cause an [agent](#agent) to wait indefinitely.


# 25.4.3.7 LeaveCriticalSection ( _WL_ )

The abstract operation LeaveCriticalSection takes argument _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): The [surrounding agent](#surrounding-agent) is in the [critical section](#sec-waiterlist-records) for _WL_.
2.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
3.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
4.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
5.  Let _leaveEvent_ be a new [Synchronize event](#sec-memory-model-fundamentals).
6.  Append _leaveEvent_ to _eventsRecord_._\[\[EventList\]\]_.
7.  Set _WL_._\[\[MostRecentLeaveEvent\]\]_ to _leaveEvent_.
8.  Leave the [critical section](#sec-waiterlist-records) for _WL_.
9.  Return unused.


# 25.4.3.8 AddWaiter ( _WL_, _waiterRecord_ )

The abstract operation AddWaiter takes arguments _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and _waiterRecord_ (a [Waiter Record](#sec-waiter-record)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): The [surrounding agent](#surrounding-agent) is in the [critical section](#sec-waiterlist-records) for _WL_.
2.  [Assert](#assert): There is no [Waiter Record](#sec-waiter-record) in _WL_._\[\[Waiters\]\]_ whose _\[\[PromiseCapability\]\]_ field is _waiterRecord_._\[\[PromiseCapability\]\]_ and whose _\[\[AgentSignifier\]\]_ field is _waiterRecord_._\[\[AgentSignifier\]\]_.
3.  Append _waiterRecord_ to _WL_._\[\[Waiters\]\]_.
4.  Return unused.


# 25.4.3.9 RemoveWaiter ( _WL_, _waiterRecord_ )

The abstract operation RemoveWaiter takes arguments _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and _waiterRecord_ (a [Waiter Record](#sec-waiter-record)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): The [surrounding agent](#surrounding-agent) is in the [critical section](#sec-waiterlist-records) for _WL_.
2.  [Assert](#assert): _WL_._\[\[Waiters\]\]_ contains _waiterRecord_.
3.  Remove _waiterRecord_ from _WL_._\[\[Waiters\]\]_.
4.  Return unused.


# 25.4.3.10 RemoveWaiters ( _WL_, _c_ )

The abstract operation RemoveWaiters takes arguments _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and _c_ (a non-negative [integer](#integer) or +∞) and returns a [List](#sec-list-and-record-specification-type) of [Waiter Records](#sec-waiter-record). It performs the following steps when called:

1.  [Assert](#assert): The [surrounding agent](#surrounding-agent) is in the [critical section](#sec-waiterlist-records) for _WL_.
2.  Let _len_ be the number of elements in _WL_._\[\[Waiters\]\]_.
3.  Let _n_ be [min](#eqn-min)(_c_, _len_).
4.  Let _L_ be a [List](#sec-list-and-record-specification-type) whose elements are the first _n_ elements of _WL_._\[\[Waiters\]\]_.
5.  Remove the first _n_ elements of _WL_._\[\[Waiters\]\]_.
6.  Return _L_.


# 25.4.3.11 SuspendThisAgent ( _WL_, _waiterRecord_ )

The abstract operation SuspendThisAgent takes arguments _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and _waiterRecord_ (a [Waiter Record](#sec-waiter-record)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): The [surrounding agent](#surrounding-agent) is in the [critical section](#sec-waiterlist-records) for _WL_.
2.  [Assert](#assert): _WL_._\[\[Waiters\]\]_ contains _waiterRecord_.
3.  Let _thisAgent_ be [AgentSignifier](#sec-agentsignifier)().
4.  [Assert](#assert): _waiterRecord_._\[\[AgentSignifier\]\]_ is _thisAgent_.
5.  [Assert](#assert): _waiterRecord_._\[\[PromiseCapability\]\]_ is blocking.
6.  [Assert](#assert): [AgentCanSuspend](#sec-agentcansuspend)() is true.
7.  Perform [LeaveCriticalSection](#sec-leavecriticalsection)(_WL_) and suspend the [surrounding agent](#surrounding-agent) until the time is _waiterRecord_._\[\[TimeoutTime\]\]_, performing the combined operation in such a way that a notification that arrives after the [critical section](#sec-waiterlist-records) is exited but before the suspension takes effect is not lost. The [surrounding agent](#surrounding-agent) can only wake from suspension due to a timeout or due to another [agent](#agent) calling [NotifyWaiter](#sec-notifywaiter) with arguments _WL_ and _thisAgent_ (i.e. via a call to `Atomics.notify`).
8.  Perform [EnterCriticalSection](#sec-entercriticalsection)(_WL_).
9.  Return unused.


# 25.4.3.12 NotifyWaiter ( _WL_, _waiterRecord_ )

The abstract operation NotifyWaiter takes arguments _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and _waiterRecord_ (a [Waiter Record](#sec-waiter-record)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): The [surrounding agent](#surrounding-agent) is in the [critical section](#sec-waiterlist-records) for _WL_.
2.  If _waiterRecord_._\[\[PromiseCapability\]\]_ is blocking, then
    1.  Wake the [agent](#agent) whose signifier is _waiterRecord_._\[\[AgentSignifier\]\]_ from suspension.
    2.  NOTE: This causes the [agent](#agent) to resume execution in [SuspendThisAgent](#sec-suspendthisagent).
3.  Else if [AgentSignifier](#sec-agentsignifier)() is _waiterRecord_._\[\[AgentSignifier\]\]_, then
    1.  Let _promiseCapability_ be _waiterRecord_._\[\[PromiseCapability\]\]_.
    2.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _waiterRecord_._\[\[Result\]\]_ »).
4.  Else,
    1.  Perform [EnqueueResolveInAgentJob](#sec-enqueueresolveinagentjob)(_waiterRecord_._\[\[AgentSignifier\]\]_, _waiterRecord_._\[\[PromiseCapability\]\]_, _waiterRecord_._\[\[Result\]\]_).
5.  Return unused.

Note

An [agent](#agent) must not access another [agent](#agent)'s promise capability in any capacity beyond passing it to the [host](#host).


# 25.4.3.13 EnqueueResolveInAgentJob ( _agentSignifier_, _promiseCapability_, _resolution_ )

The abstract operation EnqueueResolveInAgentJob takes arguments _agentSignifier_ (an [agent signifier](#sec-agents)), _promiseCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)), and _resolution_ ("ok" or "timed-out") and returns unused. It performs the following steps when called:

1.  Let _resolveJob_ be a new [Job](#job) [Abstract Closure](#sec-abstract-closure) with no parameters that captures _agentSignifier_, _promiseCapability_, and _resolution_ and performs the following steps when called:
    1.  [Assert](#assert): [AgentSignifier](#sec-agentsignifier)() is _agentSignifier_.
    2.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _resolution_ »).
    3.  Return unused.
2.  Let _realmInTargetAgent_ be ! [GetFunctionRealm](#sec-getfunctionrealm)(_promiseCapability_._\[\[Resolve\]\]_).
3.  [Assert](#assert): _agentSignifier_ is _realmInTargetAgent_._\[\[AgentSignifier\]\]_.
4.  Perform [HostEnqueueGenericJob](#sec-hostenqueuegenericjob)(_resolveJob_, _realmInTargetAgent_).
5.  Return unused.


# 25.4.3.14 DoWait ( _mode_, _typedArray_, _index_, _value_, _timeout_ )

The abstract operation DoWait takes arguments _mode_ (sync or async), _typedArray_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _index_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _timeout_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an Object, "not-equal", "timed-out", or "ok", or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _taRecord_ be ? [ValidateIntegerTypedArray](#sec-validateintegertypedarray)(_typedArray_, true).
2.  Let _buffer_ be _taRecord_._\[\[Object\]\]_._\[\[ViewedArrayBuffer\]\]_.
3.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_buffer_) is false, throw a TypeError exception.
4.  Let _byteIndexInBuffer_ be ? [ValidateAtomicAccess](#sec-validateatomicaccess)(_taRecord_, _index_).
5.  Let _arrayTypeName_ be _typedArray_._\[\[TypedArrayName\]\]_.
6.  If _arrayTypeName_ is "BigInt64Array", let _v_ be ? [ToBigInt64](#sec-tobigint64)(_value_).
7.  Else, let _v_ be ? [ToInt32](#sec-toint32)(_value_).
8.  Let _q_ be ? [ToNumber](#sec-tonumber)(_timeout_).
9.  If _q_ is either NaN or +∞<sub>𝔽</sub>, let _t_ be +∞; else if _q_ is \-∞<sub>𝔽</sub>, let _t_ be 0; else let _t_ be [max](#eqn-max)([ℝ](#ℝ)(_q_), 0).
10.  If _mode_ is sync and [AgentCanSuspend](#sec-agentcansuspend)() is false, throw a TypeError exception.
11.  Let _block_ be _buffer_._\[\[ArrayBufferData\]\]_.
12.  Let _WL_ be [GetWaiterList](#sec-getwaiterlist)(_block_, _byteIndexInBuffer_).
13.  If _mode_ is sync, then
     1.  Let _promiseCapability_ be blocking.
     2.  Let _resultObject_ be undefined.
14.  Else,
     1.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
     2.  Let _resultObject_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
15.  Perform [EnterCriticalSection](#sec-entercriticalsection)(_WL_).
16.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
17.  Let _w_ be [GetValueFromBuffer](#sec-getvaluefrombuffer)(_buffer_, _byteIndexInBuffer_, _elementType_, true, seq-cst).
18.  If _v_ ≠ _w_, then
     1.  Perform [LeaveCriticalSection](#sec-leavecriticalsection)(_WL_).
     2.  If _mode_ is sync, return "not-equal".
     3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "async", false).
     4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "value", "not-equal").
     5.  Return _resultObject_.
19.  If _t_ = 0 and _mode_ is async, then
     1.  NOTE: There is no special handling of synchronous immediate timeouts. Asynchronous immediate timeouts have special handling in order to fail fast and avoid unnecessary Promise jobs.
     2.  Perform [LeaveCriticalSection](#sec-leavecriticalsection)(_WL_).
     3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "async", false).
     4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "value", "timed-out").
     5.  Return _resultObject_.
20.  Let _thisAgent_ be [AgentSignifier](#sec-agentsignifier)().
21.  Let _now_ be the [time value](#sec-time-values-and-time-range) (UTC) identifying the current time.
22.  Let _additionalTimeout_ be an [implementation-defined](#implementation-defined) non-negative [mathematical value](#mathematical-value).
23.  Let _timeoutTime_ be [ℝ](#ℝ)(_now_) + _t_ + _additionalTimeout_.
24.  NOTE: When _t_ is +∞, _timeoutTime_ is also +∞.
25.  Let _waiterRecord_ be a new [Waiter Record](#sec-waiter-record) { _\[\[AgentSignifier\]\]_: _thisAgent_, _\[\[PromiseCapability\]\]_: _promiseCapability_, _\[\[TimeoutTime\]\]_: _timeoutTime_, _\[\[Result\]\]_: "ok" }.
26.  Perform [AddWaiter](#sec-addwaiter)(_WL_, _waiterRecord_).
27.  If _mode_ is sync, then
     1.  Perform [SuspendThisAgent](#sec-suspendthisagent)(_WL_, _waiterRecord_).
28.  Else if _timeoutTime_ is [finite](#finite), then
     1.  Perform [EnqueueAtomicsWaitAsyncTimeoutJob](#sec-enqueueatomicswaitasynctimeoutjob)(_WL_, _waiterRecord_).
29.  Perform [LeaveCriticalSection](#sec-leavecriticalsection)(_WL_).
30.  If _mode_ is sync, return _waiterRecord_._\[\[Result\]\]_.
31.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "async", true).
32.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_resultObject_, "value", _promiseCapability_._\[\[Promise\]\]_).
33.  Return _resultObject_.

Note

_additionalTimeout_ allows implementations to pad timeouts as necessary, such as for reducing power consumption or coarsening timer resolution to mitigate timing attacks. This value may differ from call to call of DoWait.


# 25.4.3.15 EnqueueAtomicsWaitAsyncTimeoutJob ( _WL_, _waiterRecord_ )

The abstract operation EnqueueAtomicsWaitAsyncTimeoutJob takes arguments _WL_ (a [WaiterList Record](#sec-waiterlist-records)) and _waiterRecord_ (a [Waiter Record](#sec-waiter-record)) and returns unused. It performs the following steps when called:

1.  Let _timeoutJob_ be a new [Job](#job) [Abstract Closure](#sec-abstract-closure) with no parameters that captures _WL_ and _waiterRecord_ and performs the following steps when called:
    1.  Perform [EnterCriticalSection](#sec-entercriticalsection)(_WL_).
    2.  If _WL_._\[\[Waiters\]\]_ contains _waiterRecord_, then
        1.  Let _timeOfJobExecution_ be the [time value](#sec-time-values-and-time-range) (UTC) identifying the current time.
        2.  [Assert](#assert): [ℝ](#ℝ)(_timeOfJobExecution_) ≥ _waiterRecord_._\[\[TimeoutTime\]\]_ (ignoring potential non-monotonicity of [time values](#sec-time-values-and-time-range)).
        3.  Set _waiterRecord_._\[\[Result\]\]_ to "timed-out".
        4.  Perform [RemoveWaiter](#sec-removewaiter)(_WL_, _waiterRecord_).
        5.  Perform [NotifyWaiter](#sec-notifywaiter)(_WL_, _waiterRecord_).
    3.  Perform [LeaveCriticalSection](#sec-leavecriticalsection)(_WL_).
    4.  Return unused.
2.  Let _now_ be the [time value](#sec-time-values-and-time-range) (UTC) identifying the current time.
3.  Let _currentRealm_ be [the current Realm Record](#current-realm).
4.  Perform [HostEnqueueTimeoutJob](#sec-hostenqueuetimeoutjob)(_timeoutJob_, _currentRealm_, [𝔽](#𝔽)(_waiterRecord_._\[\[TimeoutTime\]\]_) - _now_).
5.  Return unused.


# 25.4.3.16 AtomicCompareExchangeInSharedBlock ( _block_, _byteIndexInBuffer_, _elementSize_, _expectedBytes_, _replacementBytes_ )

The abstract operation AtomicCompareExchangeInSharedBlock takes arguments _block_ (a [Shared Data Block](#sec-data-blocks)), _byteIndexInBuffer_ (an [integer](#integer)), _elementSize_ (a non-negative [integer](#integer)), _expectedBytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)), and _replacementBytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)) and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). It performs the following steps when called:

1.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
2.  Let _execution_ be _AR_._\[\[CandidateExecution\]\]_.
3.  Let _eventsRecord_ be the [Agent Events Record](#sec-agent-event-records) of _execution_._\[\[EventsRecords\]\]_ whose _\[\[AgentSignifier\]\]_ is [AgentSignifier](#sec-agentsignifier)().
4.  Let _rawBytesRead_ be a [List](#sec-list-and-record-specification-type) of length _elementSize_ whose elements are nondeterministically chosen [byte values](#sec-data-blocks).
5.  NOTE: In implementations, _rawBytesRead_ is the result of a load-link, of a load-exclusive, or of an operand of a read-modify-write instruction on the underlying hardware. The nondeterminism is a semantic prescription of the [memory model](#sec-memory-model) to describe observable behaviour of hardware with weak consistency.
6.  NOTE: The comparison of the expected value and the read value is performed outside of the [read-modify-write modification function](#sec-arraybuffer-notation) to avoid needlessly strong synchronization when the expected value is not equal to the read value.
7.  If [ByteListEqual](#sec-bytelistequal)(_rawBytesRead_, _expectedBytes_) is true, then
    1.  Let _second_ be a new [read-modify-write modification function](#sec-arraybuffer-notation) with parameters (_oldBytes_, _newBytes_) that captures nothing and performs the following steps atomically when called:
        1.  Return _newBytes_.
    2.  Let _event_ be [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: seq-cst, _\[\[NoTear\]\]_: true, _\[\[Block\]\]_: _block_, _\[\[ByteIndex\]\]_: _byteIndexInBuffer_, _\[\[ElementSize\]\]_: _elementSize_, _\[\[Payload\]\]_: _replacementBytes_, _\[\[ModifyOp\]\]_: _second_ }.
8.  Else,
    1.  Let _event_ be [ReadSharedMemory](#sec-memory-model-fundamentals) { _\[\[Order\]\]_: seq-cst, _\[\[NoTear\]\]_: true, _\[\[Block\]\]_: _block_, _\[\[ByteIndex\]\]_: _byteIndexInBuffer_, _\[\[ElementSize\]\]_: _elementSize_ }.
9.  Append _event_ to _eventsRecord_._\[\[EventList\]\]_.
10.  Append [Chosen Value Record](#sec-chosen-value-records) { _\[\[Event\]\]_: _event_, _\[\[ChosenValue\]\]_: _rawBytesRead_ } to _execution_._\[\[ChosenValues\]\]_.
11.  Return _rawBytesRead_.


# 25.4.3.17 AtomicReadModifyWrite ( _typedArray_, _index_, _value_, _op_ )

The abstract operation AtomicReadModifyWrite takes arguments _typedArray_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _index_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _op_ (a [read-modify-write modification function](#sec-arraybuffer-notation)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a Number or a BigInt, or a [throw completion](#sec-completion-record-specification-type). _op_ takes two [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks) arguments and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). This operation atomically loads a value, combines it with another value, and stores the combination. It returns the loaded value. It performs the following steps when called:

1.  Let _byteIndexInBuffer_ be ? [ValidateAtomicAccessOnIntegerTypedArray](#sec-validateatomicaccessonintegertypedarray)(_typedArray_, _index_).
2.  If _typedArray_._\[\[ContentType\]\]_ is bigint, let _v_ be ? [ToBigInt](#sec-tobigint)(_value_).
3.  Otherwise, let _v_ be [𝔽](#𝔽)(? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_value_)).
4.  Perform ? [RevalidateAtomicAccess](#sec-revalidateatomicaccess)(_typedArray_, _byteIndexInBuffer_).
5.  Let _buffer_ be _typedArray_._\[\[ViewedArrayBuffer\]\]_.
6.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
7.  Return [GetModifySetValueInBuffer](#sec-getmodifysetvalueinbuffer)(_buffer_, _byteIndexInBuffer_, _elementType_, _v_, _op_).


# 25.4.3.18 ByteListBitwiseOp ( _op_, _xBytes_, _yBytes_ )

The abstract operation ByteListBitwiseOp takes arguments _op_ (`&`, `^`, or `|`), _xBytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)), and _yBytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)) and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). The operation atomically performs a bitwise operation on all [byte values](#sec-data-blocks) of the arguments and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). It performs the following steps when called:

1.  [Assert](#assert): _xBytes_ and _yBytes_ have the same number of elements.
2.  Let _result_ be a new empty [List](#sec-list-and-record-specification-type).
3.  Let _i_ be 0.
4.  For each element _xByte_ of _xBytes_, do
    1.  Let _yByte_ be _yBytes_\[_i_\].
    2.  If _op_ is `&`, then
        1.  Let _resultByte_ be the result of applying the bitwise AND operation to _xByte_ and _yByte_.
    3.  Else if _op_ is `^`, then
        1.  Let _resultByte_ be the result of applying the bitwise exclusive OR (XOR) operation to _xByte_ and _yByte_.
    4.  Else,
        1.  [Assert](#assert): _op_ is `|`.
        2.  Let _resultByte_ be the result of applying the bitwise inclusive OR operation to _xByte_ and _yByte_.
    5.  Set _i_ to _i_ + 1.
    6.  Append _resultByte_ to _result_.
5.  Return _result_.


# 25.4.3.19 ByteListEqual ( _xBytes_, _yBytes_ )

The abstract operation ByteListEqual takes arguments _xBytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)) and _yBytes_ (a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks)) and returns a Boolean. It performs the following steps when called:

1.  If _xBytes_ and _yBytes_ do not have the same number of elements, return false.
2.  Let _i_ be 0.
3.  For each element _xByte_ of _xBytes_, do
    1.  Let _yByte_ be _yBytes_\[_i_\].
    2.  If _xByte_ ≠ _yByte_, return false.
    3.  Set _i_ to _i_ + 1.
4.  Return true.


# 25.4.4 Atomics.add ( _typedArray_, _index_, _value_ )

This function performs the following steps when called:

1.  Let _add_ be a new [read-modify-write modification function](#sec-arraybuffer-notation) with parameters (_xBytes_, _yBytes_) that captures _typedArray_ and performs the following steps atomically when called:
    1.  Let _type_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
    2.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
    3.  Let _isLittleEndian_ be _AR_._\[\[LittleEndian\]\]_.
    4.  Let _x_ be [RawBytesToNumeric](#sec-rawbytestonumeric)(_type_, _xBytes_, _isLittleEndian_).
    5.  Let _y_ be [RawBytesToNumeric](#sec-rawbytestonumeric)(_type_, _yBytes_, _isLittleEndian_).
    6.  If _x_ [is a Number](#sec-ecmascript-language-types-number-type), then
        1.  Let _sum_ be [Number::add](#sec-numeric-types-number-add)(_x_, _y_).
    7.  Else,
        1.  [Assert](#assert): _x_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
        2.  Let _sum_ be [BigInt::add](#sec-numeric-types-bigint-add)(_x_, _y_).
    8.  Let _sumBytes_ be [NumericToRawBytes](#sec-numerictorawbytes)(_type_, _sum_, _isLittleEndian_).
    9.  [Assert](#assert): _sumBytes_, _xBytes_, and _yBytes_ have the same number of elements.
    10.  Return _sumBytes_.
2.  Return ? [AtomicReadModifyWrite](#sec-atomicreadmodifywrite)(_typedArray_, _index_, _value_, _add_).


# 25.4.5 Atomics.and ( _typedArray_, _index_, _value_ )

This function performs the following steps when called:

1.  Let _and_ be a new [read-modify-write modification function](#sec-arraybuffer-notation) with parameters (_xBytes_, _yBytes_) that captures nothing and performs the following steps atomically when called:
    1.  Return [ByteListBitwiseOp](#sec-bytelistbitwiseop)(`&`, _xBytes_, _yBytes_).
2.  Return ? [AtomicReadModifyWrite](#sec-atomicreadmodifywrite)(_typedArray_, _index_, _value_, _and_).


# 25.4.6 Atomics.compareExchange ( _typedArray_, _index_, _expectedValue_, _replacementValue_ )

This function performs the following steps when called:

1.  Let _byteIndexInBuffer_ be ? [ValidateAtomicAccessOnIntegerTypedArray](#sec-validateatomicaccessonintegertypedarray)(_typedArray_, _index_).
2.  Let _buffer_ be _typedArray_._\[\[ViewedArrayBuffer\]\]_.
3.  Let _block_ be _buffer_._\[\[ArrayBufferData\]\]_.
4.  If _typedArray_._\[\[ContentType\]\]_ is bigint, then
    1.  Let _expected_ be ? [ToBigInt](#sec-tobigint)(_expectedValue_).
    2.  Let _replacement_ be ? [ToBigInt](#sec-tobigint)(_replacementValue_).
5.  Else,
    1.  Let _expected_ be [𝔽](#𝔽)(? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_expectedValue_)).
    2.  Let _replacement_ be [𝔽](#𝔽)(? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_replacementValue_)).
6.  Perform ? [RevalidateAtomicAccess](#sec-revalidateatomicaccess)(_typedArray_, _byteIndexInBuffer_).
7.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
8.  Let _elementSize_ be [TypedArrayElementSize](#sec-typedarrayelementsize)(_typedArray_).
9.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
10.  Let _isLittleEndian_ be _AR_._\[\[LittleEndian\]\]_.
11.  Let _expectedBytes_ be [NumericToRawBytes](#sec-numerictorawbytes)(_elementType_, _expected_, _isLittleEndian_).
12.  Let _replacementBytes_ be [NumericToRawBytes](#sec-numerictorawbytes)(_elementType_, _replacement_, _isLittleEndian_).
13.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_buffer_) is true, then
     1.  Let _rawBytesRead_ be [AtomicCompareExchangeInSharedBlock](#sec-atomiccompareexchangeinsharedblock)(_block_, _byteIndexInBuffer_, _elementSize_, _expectedBytes_, _replacementBytes_).
14.  Else,
     1.  Let _rawBytesRead_ be a [List](#sec-list-and-record-specification-type) of length _elementSize_ whose elements are the sequence of _elementSize_ bytes starting with _block_\[_byteIndexInBuffer_\].
     2.  If [ByteListEqual](#sec-bytelistequal)(_rawBytesRead_, _expectedBytes_) is true, then
         1.  Store the individual bytes of _replacementBytes_ into _block_, starting at _block_\[_byteIndexInBuffer_\].
15.  Return [RawBytesToNumeric](#sec-rawbytestonumeric)(_elementType_, _rawBytesRead_, _isLittleEndian_).


# 25.4.7 Atomics.exchange ( _typedArray_, _index_, _value_ )

This function performs the following steps when called:

1.  Let _second_ be a new [read-modify-write modification function](#sec-arraybuffer-notation) with parameters (_oldBytes_, _newBytes_) that captures nothing and performs the following steps atomically when called:
    1.  Return _newBytes_.
2.  Return ? [AtomicReadModifyWrite](#sec-atomicreadmodifywrite)(_typedArray_, _index_, _value_, _second_).


# 25.4.8 Atomics.isLockFree ( _size_ )

This function performs the following steps when called:

1.  Let _n_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_size_).
2.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
3.  If _n_ = 1, return _AR_._\[\[IsLockFree1\]\]_.
4.  If _n_ = 2, return _AR_._\[\[IsLockFree2\]\]_.
5.  If _n_ = 4, return true.
6.  If _n_ = 8, return _AR_._\[\[IsLockFree8\]\]_.
7.  Return false.

Note

This function is an optimization primitive. The intuition is that if the atomic step of an atomic primitive (`compareExchange`, `load`, `store`, `add`, `sub`, `and`, `or`, `xor`, or `exchange`) on a datum of size _n_ bytes will be performed without the [surrounding agent](#surrounding-agent) acquiring a lock outside the _n_ bytes comprising the datum, then `Atomics.isLockFree`(_n_) will return true. High-performance algorithms will use this function to determine whether to use locks or atomic operations in [critical sections](#sec-waiterlist-records). If an atomic primitive is not lock-free then it is often more efficient for an algorithm to provide its own locking.

`Atomics.isLockFree`(4) always returns true as that can be supported on all known relevant hardware. Being able to assume this will generally simplify programs.

Regardless of the value returned by this function, all atomic operations are guaranteed to be atomic. For example, they will never have a visible operation take place in the middle of the operation (e.g., "tearing").


# 25.4.9 Atomics.load ( _typedArray_, _index_ )

This function performs the following steps when called:

1.  Let _byteIndexInBuffer_ be ? [ValidateAtomicAccessOnIntegerTypedArray](#sec-validateatomicaccessonintegertypedarray)(_typedArray_, _index_).
2.  Perform ? [RevalidateAtomicAccess](#sec-revalidateatomicaccess)(_typedArray_, _byteIndexInBuffer_).
3.  Let _buffer_ be _typedArray_._\[\[ViewedArrayBuffer\]\]_.
4.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
5.  Return [GetValueFromBuffer](#sec-getvaluefrombuffer)(_buffer_, _byteIndexInBuffer_, _elementType_, true, seq-cst).


# 25.4.10 Atomics.or ( _typedArray_, _index_, _value_ )

This function performs the following steps when called:

1.  Let _or_ be a new [read-modify-write modification function](#sec-arraybuffer-notation) with parameters (_xBytes_, _yBytes_) that captures nothing and performs the following steps atomically when called:
    1.  Return [ByteListBitwiseOp](#sec-bytelistbitwiseop)(`|`, _xBytes_, _yBytes_).
2.  Return ? [AtomicReadModifyWrite](#sec-atomicreadmodifywrite)(_typedArray_, _index_, _value_, _or_).


# 25.4.11 Atomics.store ( _typedArray_, _index_, _value_ )

This function performs the following steps when called:

1.  Let _byteIndexInBuffer_ be ? [ValidateAtomicAccessOnIntegerTypedArray](#sec-validateatomicaccessonintegertypedarray)(_typedArray_, _index_).
2.  If _typedArray_._\[\[ContentType\]\]_ is bigint, let _v_ be ? [ToBigInt](#sec-tobigint)(_value_).
3.  Otherwise, let _v_ be [𝔽](#𝔽)(? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_value_)).
4.  Perform ? [RevalidateAtomicAccess](#sec-revalidateatomicaccess)(_typedArray_, _byteIndexInBuffer_).
5.  Let _buffer_ be _typedArray_._\[\[ViewedArrayBuffer\]\]_.
6.  Let _elementType_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
7.  Perform [SetValueInBuffer](#sec-setvalueinbuffer)(_buffer_, _byteIndexInBuffer_, _elementType_, _v_, true, seq-cst).
8.  Return _v_.


# 25.4.12 Atomics.sub ( _typedArray_, _index_, _value_ )

This function performs the following steps when called:

1.  Let _subtract_ be a new [read-modify-write modification function](#sec-arraybuffer-notation) with parameters (_xBytes_, _yBytes_) that captures _typedArray_ and performs the following steps atomically when called:
    1.  Let _type_ be [TypedArrayElementType](#sec-typedarrayelementtype)(_typedArray_).
    2.  Let _AR_ be the [Agent Record](#agent-record) of the [surrounding agent](#surrounding-agent).
    3.  Let _isLittleEndian_ be _AR_._\[\[LittleEndian\]\]_.
    4.  Let _x_ be [RawBytesToNumeric](#sec-rawbytestonumeric)(_type_, _xBytes_, _isLittleEndian_).
    5.  Let _y_ be [RawBytesToNumeric](#sec-rawbytestonumeric)(_type_, _yBytes_, _isLittleEndian_).
    6.  If _x_ [is a Number](#sec-ecmascript-language-types-number-type), then
        1.  Let _difference_ be [Number::subtract](#sec-numeric-types-number-subtract)(_x_, _y_).
    7.  Else,
        1.  [Assert](#assert): _x_ [is a BigInt](#sec-ecmascript-language-types-bigint-type).
        2.  Let _difference_ be [BigInt::subtract](#sec-numeric-types-bigint-subtract)(_x_, _y_).
    8.  Let _differenceBytes_ be [NumericToRawBytes](#sec-numerictorawbytes)(_type_, _difference_, _isLittleEndian_).
    9.  [Assert](#assert): _differenceBytes_, _xBytes_, and _yBytes_ have the same number of elements.
    10.  Return _differenceBytes_.
2.  Return ? [AtomicReadModifyWrite](#sec-atomicreadmodifywrite)(_typedArray_, _index_, _value_, _subtract_).


# 25.4.13 Atomics.wait ( _typedArray_, _index_, _value_, _timeout_ )

This function puts the [surrounding agent](#surrounding-agent) in a wait queue and suspends it until notified or until the wait times out, returning a String differentiating those cases.

It performs the following steps when called:

1.  Return ? [DoWait](#sec-dowait)(sync, _typedArray_, _index_, _value_, _timeout_).


# 25.4.14 Atomics.waitAsync ( _typedArray_, _index_, _value_, _timeout_ )

This function returns a Promise that is resolved when the calling [agent](#agent) is notified or the timeout is reached.

It performs the following steps when called:

1.  Return ? [DoWait](#sec-dowait)(async, _typedArray_, _index_, _value_, _timeout_).


# 25.4.15 Atomics.notify ( _typedArray_, _index_, _count_ )

This function notifies some [agents](#agent) that are sleeping in the wait queue.

It performs the following steps when called:

1.  Let _taRecord_ be ? [ValidateIntegerTypedArray](#sec-validateintegertypedarray)(_typedArray_, true).
2.  Let _byteIndexInBuffer_ be ? [ValidateAtomicAccess](#sec-validateatomicaccess)(_taRecord_, _index_).
3.  If _count_ is undefined, then
    1.  Let _c_ be +∞.
4.  Else,
    1.  Let _intCount_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_count_).
    2.  Let _c_ be [max](#eqn-max)(_intCount_, 0).
5.  Let _buffer_ be _typedArray_._\[\[ViewedArrayBuffer\]\]_.
6.  Let _block_ be _buffer_._\[\[ArrayBufferData\]\]_.
7.  If [IsSharedArrayBuffer](#sec-issharedarraybuffer)(_buffer_) is false, return +0<sub>𝔽</sub>.
8.  Let _WL_ be [GetWaiterList](#sec-getwaiterlist)(_block_, _byteIndexInBuffer_).
9.  Perform [EnterCriticalSection](#sec-entercriticalsection)(_WL_).
10.  Let _S_ be [RemoveWaiters](#sec-removewaiters)(_WL_, _c_).
11.  For each element _W_ of _S_, do
     1.  Perform [NotifyWaiter](#sec-notifywaiter)(_WL_, _W_).
12.  Perform [LeaveCriticalSection](#sec-leavecriticalsection)(_WL_).
13.  Let _n_ be the number of elements in _S_.
14.  Return [𝔽](#𝔽)(_n_).


# 25.4.16 Atomics.xor ( _typedArray_, _index_, _value_ )

This function performs the following steps when called:

1.  Let _xor_ be a new [read-modify-write modification function](#sec-arraybuffer-notation) with parameters (_xBytes_, _yBytes_) that captures nothing and performs the following steps atomically when called:
    1.  Return [ByteListBitwiseOp](#sec-bytelistbitwiseop)(`^`, _xBytes_, _yBytes_).
2.  Return ? [AtomicReadModifyWrite](#sec-atomicreadmodifywrite)(_typedArray_, _index_, _value_, _xor_).


# 25.4.17 Atomics \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Atomics".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 25.5 The JSON Object

The JSON object:

-   is %JSON%.
-   is the initial value of the "JSON" property of the [global object](#sec-global-object).
-   is an [ordinary object](#ordinary-object).
-   contains two functions, `parse` and `stringify`, that are used to parse and construct JSON texts.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   does not have a _\[\[Construct\]\]_ internal method; it cannot be used as a [constructor](#constructor) with the `new` operator.
-   does not have a _\[\[Call\]\]_ internal method; it cannot be invoked as a function.

The JSON Data Interchange Format is defined in ECMA-404. The JSON interchange format used in this specification is exactly that described by ECMA-404. Conforming implementations of `JSON.parse` and `JSON.stringify` must support the exact interchange format described in the ECMA-404 specification without any deletions or extensions to the format.


# 25.5.1 JSON.parse ( _text_ \[, _reviver_ \] )

This function parses a JSON text (a JSON-formatted String) and produces an [ECMAScript language value](#sec-ecmascript-language-types). The JSON format represents literals, arrays, and objects with a syntax similar to the syntax for ECMAScript literals, Array Initializers, and Object Initializers. After parsing, JSON objects are realized as ECMAScript objects. JSON arrays are realized as ECMAScript Array instances. JSON strings, numbers, booleans, and null are realized as ECMAScript Strings, Numbers, Booleans, and null.

The optional _reviver_ parameter is a function that takes two parameters, _key_ and _value_. It can filter and transform the results. It is called with each of the _key_/_value_ pairs produced by the parse, and its return value is used instead of the original value. If it returns what it received, the structure is not modified. If it returns undefined then the property is deleted from the result.

1.  Let _jsonString_ be ? [ToString](#sec-tostring)(_text_).
2.  Let _unfiltered_ be ? [ParseJSON](#sec-ParseJSON)(_jsonString_).
3.  If [IsCallable](#sec-iscallable)(_reviver_) is true, then
    1.  Let _root_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
    2.  Let _rootName_ be the empty String.
    3.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_root_, _rootName_, _unfiltered_).
    4.  Return ? [InternalizeJSONProperty](#sec-internalizejsonproperty)(_root_, _rootName_, _reviver_).
4.  Else,
    1.  Return _unfiltered_.

The "length" property of this function is 2<sub>𝔽</sub>.


# 25.5.1.1 ParseJSON ( _text_ )

The abstract operation ParseJSON takes argument _text_ (a String) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If [StringToCodePoints](#sec-stringtocodepoints)(_text_) is not a valid JSON text as specified in ECMA-404, throw a SyntaxError exception.
2.  Let _scriptString_ be the [string-concatenation](#string-concatenation) of "(", _text_, and ");".
3.  Let _script_ be [ParseText](#sec-parsetext)(_scriptString_, [Script](#prod-Script)).
4.  NOTE: The [early error](#early-error) rules defined in [13.2.5.1](#sec-object-initializer-static-semantics-early-errors) have special handling for the above invocation of [ParseText](#sec-parsetext).
5.  [Assert](#assert): _script_ is a [Parse Node](#sec-syntactic-grammar).
6.  Let _result_ be ! [Evaluation](#sec-evaluation) of _script_.
7.  NOTE: The [PropertyDefinitionEvaluation](#sec-runtime-semantics-propertydefinitionevaluation) semantics defined in [13.2.5.5](#sec-runtime-semantics-propertydefinitionevaluation) have special handling for the above evaluation.
8.  [Assert](#assert): _result_ is either a String, a Number, a Boolean, an Object that is defined by either an [ArrayLiteral](#prod-ArrayLiteral) or an [ObjectLiteral](#prod-ObjectLiteral), or null.
9.  Return _result_.

It is not permitted for a conforming implementation of `JSON.parse` to extend the JSON grammars. If an implementation wishes to support a modified or extended JSON interchange format it must do so by defining a different parse function.

Note 1

Valid JSON text is a subset of the ECMAScript [PrimaryExpression](#prod-PrimaryExpression) syntax. Step [1](#step-json-parse-validate) verifies that _jsonString_ conforms to that subset, and step [8](#step-json-parse-assert-type) asserts that evaluation returns a value of an appropriate type.

However, because [13.2.5.5](#sec-runtime-semantics-propertydefinitionevaluation) behaves differently during ParseJSON, the same source text can produce different results when evaluated as a [PrimaryExpression](#prod-PrimaryExpression) rather than as JSON. Furthermore, the Early Error for duplicate "\_\_proto\_\_" properties in object literals, which likewise does not apply during ParseJSON, means that not all texts accepted by ParseJSON are valid as a [PrimaryExpression](#prod-PrimaryExpression), despite matching the grammar.

Note 2

In the case where there are duplicate name Strings within an object, lexically preceding values for the same key shall be overwritten.


# 25.5.1.2 InternalizeJSONProperty ( _holder_, _name_, _reviver_ )

The abstract operation InternalizeJSONProperty takes arguments _holder_ (an Object), _name_ (a String), and _reviver_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type).

Note

This algorithm intentionally does not throw an exception if either _\[\[Delete\]\]_ or [CreateDataProperty](#sec-createdataproperty) return false.

It performs the following steps when called:

1.  Let _val_ be ? [Get](#sec-get-o-p)(_holder_, _name_).
2.  If _val_ [is an Object](#sec-object-type), then
    1.  Let _isArray_ be ? [IsArray](#sec-isarray)(_val_).
    2.  If _isArray_ is true, then
        1.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_val_).
        2.  Let _I_ be 0.
        3.  Repeat, while _I_ < _len_,
            1.  Let _prop_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_I_)).
            2.  Let _newElement_ be ? [InternalizeJSONProperty](#sec-internalizejsonproperty)(_val_, _prop_, _reviver_).
            3.  If _newElement_ is undefined, then
                1.  Perform ? _val_._\[\[Delete\]\]_(_prop_).
            4.  Else,
                1.  Perform ? [CreateDataProperty](#sec-createdataproperty)(_val_, _prop_, _newElement_).
            5.  Set _I_ to _I_ + 1.
    3.  Else,
        1.  Let _keys_ be ? [EnumerableOwnProperties](#sec-enumerableownproperties)(_val_, key).
        2.  For each String _P_ of _keys_, do
            1.  Let _newElement_ be ? [InternalizeJSONProperty](#sec-internalizejsonproperty)(_val_, _P_, _reviver_).
            2.  If _newElement_ is undefined, then
                1.  Perform ? _val_._\[\[Delete\]\]_(_P_).
            3.  Else,
                1.  Perform ? [CreateDataProperty](#sec-createdataproperty)(_val_, _P_, _newElement_).
3.  Return ? [Call](#sec-call)(_reviver_, _holder_, « _name_, _val_ »).


# 25.5.2 JSON.stringify ( _value_ \[, _replacer_ \[, _space_ \] \] )

This function returns a String in UTF-16 encoded JSON format representing an [ECMAScript language value](#sec-ecmascript-language-types), or undefined. It can take three parameters. The _value_ parameter is an [ECMAScript language value](#sec-ecmascript-language-types), which is usually an object or array, although it can also be a String, Boolean, Number or null. The optional _replacer_ parameter is either a function that alters the way objects and arrays are stringified, or an array of Strings and Numbers that acts as an inclusion list for selecting the object properties that will be stringified. The optional _space_ parameter [is a String](#sec-ecmascript-language-types-string-type) or Number that allows the result to have white space injected into it to improve human readability.

It performs the following steps when called:

1.  Let _stack_ be a new empty [List](#sec-list-and-record-specification-type).
2.  Let _indent_ be the empty String.
3.  Let _PropertyList_ be undefined.
4.  Let _ReplacerFunction_ be undefined.
5.  If _replacer_ [is an Object](#sec-object-type), then
    1.  If [IsCallable](#sec-iscallable)(_replacer_) is true, then
        1.  Set _ReplacerFunction_ to _replacer_.
    2.  Else,
        1.  Let _isArray_ be ? [IsArray](#sec-isarray)(_replacer_).
        2.  If _isArray_ is true, then
            1.  Set _PropertyList_ to a new empty [List](#sec-list-and-record-specification-type).
            2.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_replacer_).
            3.  Let _k_ be 0.
            4.  Repeat, while _k_ < _len_,
                1.  Let _prop_ be ! [ToString](#sec-tostring)([𝔽](#𝔽)(_k_)).
                2.  Let _v_ be ? [Get](#sec-get-o-p)(_replacer_, _prop_).
                3.  Let _item_ be undefined.
                4.  If _v_ [is a String](#sec-ecmascript-language-types-string-type), then
                    1.  Set _item_ to _v_.
                5.  Else if _v_ [is a Number](#sec-ecmascript-language-types-number-type), then
                    1.  Set _item_ to ! [ToString](#sec-tostring)(_v_).
                6.  Else if _v_ [is an Object](#sec-object-type), then
                    1.  If _v_ has a _\[\[StringData\]\]_ or _\[\[NumberData\]\]_ internal slot, set _item_ to ? [ToString](#sec-tostring)(_v_).
                7.  If _item_ is not undefined and _PropertyList_ does not contain _item_, then
                    1.  Append _item_ to _PropertyList_.
                8.  Set _k_ to _k_ + 1.
6.  If _space_ [is an Object](#sec-object-type), then
    1.  If _space_ has a _\[\[NumberData\]\]_ internal slot, then
        1.  Set _space_ to ? [ToNumber](#sec-tonumber)(_space_).
    2.  Else if _space_ has a _\[\[StringData\]\]_ internal slot, then
        1.  Set _space_ to ? [ToString](#sec-tostring)(_space_).
7.  If _space_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  Let _spaceMV_ be ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_space_).
    2.  Set _spaceMV_ to [min](#eqn-min)(10, _spaceMV_).
    3.  If _spaceMV_ < 1, let _gap_ be the empty String; otherwise let _gap_ be the String value containing _spaceMV_ occurrences of the code unit 0x0020 (SPACE).
8.  Else if _space_ [is a String](#sec-ecmascript-language-types-string-type), then
    1.  If the length of _space_ ≤ 10, let _gap_ be _space_; otherwise let _gap_ be the [substring](#substring) of _space_ from 0 to 10.
9.  Else,
    1.  Let _gap_ be the empty String.
10.  Let _wrapper_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
11.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_wrapper_, the empty String, _value_).
12.  Let _state_ be the [JSON Serialization Record](#sec-json-serialization-record) { _\[\[ReplacerFunction\]\]_: _ReplacerFunction_, _\[\[Stack\]\]_: _stack_, _\[\[Indent\]\]_: _indent_, _\[\[Gap\]\]_: _gap_, _\[\[PropertyList\]\]_: _PropertyList_ }.
13.  Return ? [SerializeJSONProperty](#sec-serializejsonproperty)(_state_, the empty String, _wrapper_).

The "length" property of this function is 3<sub>𝔽</sub>.

Note 1

JSON structures are allowed to be nested to any depth, but they must be acyclic. If _value_ is or contains a cyclic structure, then this function must throw a TypeError exception. This is an example of a value that cannot be stringified:

```
a = [];
a[0] = a;
my_text = JSON.stringify(a); // This must throw a TypeError.
```

Note 2

Symbolic primitive values are rendered as follows:

-   The null value is rendered in JSON text as the String value "null".
-   The undefined value is not rendered.
-   The true value is rendered in JSON text as the String value "true".
-   The false value is rendered in JSON text as the String value "false".

Note 3

String values are wrapped in QUOTATION MARK (`"`) code units. The code units `"` and `\` are escaped with `\` prefixes. Control characters code units are replaced with escape sequences `\u`HHHH, or with the shorter forms, `\b` (BACKSPACE), `\f` (FORM FEED), `\n` (LINE FEED), `\r` (CARRIAGE RETURN), `\t` (CHARACTER TABULATION).

Note 4

[Finite](#finite) numbers are stringified as if by calling [ToString](#sec-tostring)(_number_). NaN and Infinity regardless of sign are represented as the String value "null".

Note 5

Values that do not have a JSON representation (such as undefined and functions) do not produce a String. Instead they produce the undefined value. In arrays these values are represented as the String value "null". In objects an unrepresentable value causes the property to be excluded from stringification.

Note 6

An object is rendered as U+007B (LEFT CURLY BRACKET) followed by zero or more properties, separated with a U+002C (COMMA), closed with a U+007D (RIGHT CURLY BRACKET). A property is a quoted String representing the [property name](#property-name), a U+003A (COLON), and then the stringified property value. An array is rendered as an opening U+005B (LEFT SQUARE BRACKET) followed by zero or more values, separated with a U+002C (COMMA), closed with a U+005D (RIGHT SQUARE BRACKET).


# 25.5.2.1 JSON Serialization Record

A JSON Serialization Record is a [Record](#sec-list-and-record-specification-type) value used to enable serialization to the JSON format.

JSON Serialization Records have the fields listed in [Table 78](#table-json-serialization-record).

Table 78: [JSON Serialization Record](#sec-json-serialization-record) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[ReplacerFunction]]</var></td><td>a <emu-xref href="#function-object" id="_ref_15139"><a href="#function-object">function object</a></emu-xref> or <emu-val>undefined</emu-val></td><td>A function that can supply replacement values for object properties (from JSON.stringify's <var>replacer</var> parameter).</td></tr><tr><td><var class="field">[[PropertyList]]</var></td><td>either a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_15140"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of Strings or <emu-val>undefined</emu-val></td><td>The names of properties to include when serializing a non-array object (from JSON.stringify's <var>replacer</var> parameter).</td></tr><tr><td><var class="field">[[Gap]]</var></td><td>a String</td><td>The unit of indentation (from JSON.stringify's <var>space</var> parameter).</td></tr><tr><td><var class="field">[[Stack]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_15141"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of Objects</td><td>The set of nested objects that are in the process of being serialized. Used to detect cyclic structures.</td></tr><tr><td><var class="field">[[Indent]]</var></td><td>a String</td><td>The current indentation.</td></tr></tbody></table>


# 25.5.2.2 SerializeJSONProperty ( _state_, _key_, _holder_ )

The abstract operation SerializeJSONProperty takes arguments _state_ (a [JSON Serialization Record](#sec-json-serialization-record)), _key_ (a String), and _holder_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) either a String or undefined, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _value_ be ? [Get](#sec-get-o-p)(_holder_, _key_).
2.  If _value_ [is an Object](#sec-object-type) or _value_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), then
    1.  Let _toJSON_ be ? [GetV](#sec-getv)(_value_, "toJSON").
    2.  If [IsCallable](#sec-iscallable)(_toJSON_) is true, then
        1.  Set _value_ to ? [Call](#sec-call)(_toJSON_, _value_, « _key_ »).
3.  If _state_._\[\[ReplacerFunction\]\]_ is not undefined, then
    1.  Set _value_ to ? [Call](#sec-call)(_state_._\[\[ReplacerFunction\]\]_, _holder_, « _key_, _value_ »).
4.  If _value_ [is an Object](#sec-object-type), then
    1.  If _value_ has a _\[\[NumberData\]\]_ internal slot, then
        1.  Set _value_ to ? [ToNumber](#sec-tonumber)(_value_).
    2.  Else if _value_ has a _\[\[StringData\]\]_ internal slot, then
        1.  Set _value_ to ? [ToString](#sec-tostring)(_value_).
    3.  Else if _value_ has a _\[\[BooleanData\]\]_ internal slot, then
        1.  Set _value_ to _value_._\[\[BooleanData\]\]_.
    4.  Else if _value_ has a _\[\[BigIntData\]\]_ internal slot, then
        1.  Set _value_ to _value_._\[\[BigIntData\]\]_.
5.  If _value_ is null, return "null".
6.  If _value_ is true, return "true".
7.  If _value_ is false, return "false".
8.  If _value_ [is a String](#sec-ecmascript-language-types-string-type), return [QuoteJSONString](#sec-quotejsonstring)(_value_).
9.  If _value_ [is a Number](#sec-ecmascript-language-types-number-type), then
    1.  If _value_ is [finite](#finite), return ! [ToString](#sec-tostring)(_value_).
    2.  Return "null".
10.  If _value_ [is a BigInt](#sec-ecmascript-language-types-bigint-type), throw a TypeError exception.
11.  If _value_ [is an Object](#sec-object-type) and [IsCallable](#sec-iscallable)(_value_) is false, then
     1.  Let _isArray_ be ? [IsArray](#sec-isarray)(_value_).
     2.  If _isArray_ is true, return ? [SerializeJSONArray](#sec-serializejsonarray)(_state_, _value_).
     3.  Return ? [SerializeJSONObject](#sec-serializejsonobject)(_state_, _value_).
12.  Return undefined.


# 25.5.2.3 QuoteJSONString ( _value_ )

The abstract operation QuoteJSONString takes argument _value_ (a String) and returns a String. It wraps _value_ in 0x0022 (QUOTATION MARK) code units and escapes certain other code units within it. This operation interprets _value_ as a sequence of UTF-16 encoded code points, as described in [6.1.4](#sec-ecmascript-language-types-string-type). It performs the following steps when called:

1.  Let _product_ be the String value consisting solely of the code unit 0x0022 (QUOTATION MARK).
2.  For each code point _C_ of [StringToCodePoints](#sec-stringtocodepoints)(_value_), do
    1.  If _C_ is listed in the “Code Point” column of [Table 79](#table-json-single-character-escapes), then
        1.  Set _product_ to the [string-concatenation](#string-concatenation) of _product_ and the escape sequence for _C_ as specified in the “Escape Sequence” column of the corresponding row.
    2.  Else if _C_ has a numeric value less than 0x0020 (SPACE) or _C_ has the same numeric value as a [leading surrogate](#leading-surrogate) or [trailing surrogate](#trailing-surrogate), then
        1.  Let _unit_ be the code unit whose numeric value is the numeric value of _C_.
        2.  Set _product_ to the [string-concatenation](#string-concatenation) of _product_ and [UnicodeEscape](#sec-unicodeescape)(_unit_).
    3.  Else,
        1.  Set _product_ to the [string-concatenation](#string-concatenation) of _product_ and [UTF16EncodeCodePoint](#sec-utf16encodecodepoint)(_C_).
3.  Set _product_ to the [string-concatenation](#string-concatenation) of _product_ and the code unit 0x0022 (QUOTATION MARK).
4.  Return _product_.

Table 79: JSON Single Character Escape Sequences

<table><thead><tr><th>Code Point</th><th>Unicode Character Name</th><th>Escape Sequence</th></tr></thead><tbody><tr><td>U+0008</td><td>BACKSPACE</td><td><code>\b</code></td></tr><tr><td>U+0009</td><td>CHARACTER TABULATION</td><td><code>\t</code></td></tr><tr><td>U+000A</td><td>LINE FEED (LF)</td><td><code>\n</code></td></tr><tr><td>U+000C</td><td>FORM FEED (FF)</td><td><code>\f</code></td></tr><tr><td>U+000D</td><td>CARRIAGE RETURN (CR)</td><td><code>\r</code></td></tr><tr><td>U+0022</td><td>QUOTATION MARK</td><td><code>\"</code></td></tr><tr><td>U+005C</td><td>REVERSE SOLIDUS</td><td><code>\\</code></td></tr></tbody></table>


# 25.5.2.4 UnicodeEscape ( _C_ )

The abstract operation UnicodeEscape takes argument _C_ (a code unit) and returns a String. It represents _C_ as a Unicode escape sequence. It performs the following steps when called:

1.  Let _n_ be the numeric value of _C_.
2.  [Assert](#assert): _n_ ≤ 0xFFFF.
3.  Let _hex_ be the String representation of _n_, formatted as a lowercase hexadecimal number.
4.  Return the [string-concatenation](#string-concatenation) of the code unit 0x005C (REVERSE SOLIDUS), "u", and [StringPad](#sec-stringpad)(_hex_, 4, "0", start).


# 25.5.2.5 SerializeJSONObject ( _state_, _value_ )

The abstract operation SerializeJSONObject takes arguments _state_ (a [JSON Serialization Record](#sec-json-serialization-record)) and _value_ (an Object) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It serializes an object. It performs the following steps when called:

1.  If _state_._\[\[Stack\]\]_ contains _value_, throw a TypeError exception because the structure is cyclical.
2.  Append _value_ to _state_._\[\[Stack\]\]_.
3.  Let _stepBack_ be _state_._\[\[Indent\]\]_.
4.  Set _state_._\[\[Indent\]\]_ to the [string-concatenation](#string-concatenation) of _state_._\[\[Indent\]\]_ and _state_._\[\[Gap\]\]_.
5.  If _state_._\[\[PropertyList\]\]_ is not undefined, then
    1.  Let _K_ be _state_._\[\[PropertyList\]\]_.
6.  Else,
    1.  Let _K_ be ? [EnumerableOwnProperties](#sec-enumerableownproperties)(_value_, key).
7.  Let _partial_ be a new empty [List](#sec-list-and-record-specification-type).
8.  For each element _P_ of _K_, do
    1.  Let _strP_ be ? [SerializeJSONProperty](#sec-serializejsonproperty)(_state_, _P_, _value_).
    2.  If _strP_ is not undefined, then
        1.  Let _member_ be [QuoteJSONString](#sec-quotejsonstring)(_P_).
        2.  Set _member_ to the [string-concatenation](#string-concatenation) of _member_ and ":".
        3.  If _state_._\[\[Gap\]\]_ is not the empty String, then
            1.  Set _member_ to the [string-concatenation](#string-concatenation) of _member_ and the code unit 0x0020 (SPACE).
        4.  Set _member_ to the [string-concatenation](#string-concatenation) of _member_ and _strP_.
        5.  Append _member_ to _partial_.
9.  If _partial_ is empty, then
    1.  Let _final_ be "{}".
10.  Else,
     1.  If _state_._\[\[Gap\]\]_ is the empty String, then
         1.  Let _properties_ be the String value formed by concatenating all the element Strings of _partial_ with each adjacent pair of Strings separated with the code unit 0x002C (COMMA). A comma is not inserted either before the first String or after the last String.
         2.  Let _final_ be the [string-concatenation](#string-concatenation) of "{", _properties_, and "}".
     2.  Else,
         1.  Let _separator_ be the [string-concatenation](#string-concatenation) of the code unit 0x002C (COMMA), the code unit 0x000A (LINE FEED), and _state_._\[\[Indent\]\]_.
         2.  Let _properties_ be the String value formed by concatenating all the element Strings of _partial_ with each adjacent pair of Strings separated with _separator_. The _separator_ String is not inserted either before the first String or after the last String.
         3.  Let _final_ be the [string-concatenation](#string-concatenation) of "{", the code unit 0x000A (LINE FEED), _state_._\[\[Indent\]\]_, _properties_, the code unit 0x000A (LINE FEED), _stepBack_, and "}".
11.  Remove the last element of _state_._\[\[Stack\]\]_.
12.  Set _state_._\[\[Indent\]\]_ to _stepBack_.
13.  Return _final_.


# 25.5.2.6 SerializeJSONArray ( _state_, _value_ )

The abstract operation SerializeJSONArray takes arguments _state_ (a [JSON Serialization Record](#sec-json-serialization-record)) and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It serializes an array. It performs the following steps when called:

1.  If _state_._\[\[Stack\]\]_ contains _value_, throw a TypeError exception because the structure is cyclical.
2.  Append _value_ to _state_._\[\[Stack\]\]_.
3.  Let _stepBack_ be _state_._\[\[Indent\]\]_.
4.  Set _state_._\[\[Indent\]\]_ to the [string-concatenation](#string-concatenation) of _state_._\[\[Indent\]\]_ and _state_._\[\[Gap\]\]_.
5.  Let _partial_ be a new empty [List](#sec-list-and-record-specification-type).
6.  Let _len_ be ? [LengthOfArrayLike](#sec-lengthofarraylike)(_value_).
7.  Let _index_ be 0.
8.  Repeat, while _index_ < _len_,
    1.  Let _strP_ be ? [SerializeJSONProperty](#sec-serializejsonproperty)(_state_, ! [ToString](#sec-tostring)([𝔽](#𝔽)(_index_)), _value_).
    2.  If _strP_ is undefined, then
        1.  Append "null" to _partial_.
    3.  Else,
        1.  Append _strP_ to _partial_.
    4.  Set _index_ to _index_ + 1.
9.  If _partial_ is empty, then
    1.  Let _final_ be "\[\]".
10.  Else,
     1.  If _state_._\[\[Gap\]\]_ is the empty String, then
         1.  Let _properties_ be the String value formed by concatenating all the element Strings of _partial_ with each adjacent pair of Strings separated with the code unit 0x002C (COMMA). A comma is not inserted either before the first String or after the last String.
         2.  Let _final_ be the [string-concatenation](#string-concatenation) of "\[", _properties_, and "\]".
     2.  Else,
         1.  Let _separator_ be the [string-concatenation](#string-concatenation) of the code unit 0x002C (COMMA), the code unit 0x000A (LINE FEED), and _state_._\[\[Indent\]\]_.
         2.  Let _properties_ be the String value formed by concatenating all the element Strings of _partial_ with each adjacent pair of Strings separated with _separator_. The _separator_ String is not inserted either before the first String or after the last String.
         3.  Let _final_ be the [string-concatenation](#string-concatenation) of "\[", the code unit 0x000A (LINE FEED), _state_._\[\[Indent\]\]_, _properties_, the code unit 0x000A (LINE FEED), _stepBack_, and "\]".
11.  Remove the last element of _state_._\[\[Stack\]\]_.
12.  Set _state_._\[\[Indent\]\]_ to _stepBack_.
13.  Return _final_.

Note

The representation of arrays includes only the elements in the [interval](#interval) from +0<sub>𝔽</sub> (inclusive) to `array.length` (exclusive). Properties whose keys are not [array indices](#array-index) are excluded from the stringification. An array is stringified as an opening LEFT SQUARE BRACKET, elements separated by COMMA, and a closing RIGHT SQUARE BRACKET.


# 25.5.3 JSON \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "JSON".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 26 Managing Memory


# 26.1 WeakRef Objects

A [WeakRef](#sec-weak-ref-constructor) is an object that is used to refer to a target object or symbol without preserving it from garbage collection. [WeakRefs](#sec-weak-ref-constructor) can be dereferenced to allow access to the target value, if the target hasn't been reclaimed by garbage collection.


# 26.1.1 The WeakRef Constructor

The WeakRef [constructor](#constructor):

-   is %WeakRef%.
-   is the initial value of the "WeakRef" property of the [global object](#sec-global-object).
-   creates and initializes a new WeakRef when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value in an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified `WeakRef` behaviour must include a `super` call to the `WeakRef` [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the `WeakRef.prototype` built-in methods.


# 26.1.1.1 WeakRef ( _target_ )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_target_) is false, throw a TypeError exception.
3.  Let _weakRef_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%WeakRef.prototype%", « _\[\[WeakRefTarget\]\]_ »).
4.  Perform [AddToKeptObjects](#sec-addtokeptobjects)(_target_).
5.  Set _weakRef_._\[\[WeakRefTarget\]\]_ to _target_.
6.  Return _weakRef_.


# 26.1.2 Properties of the WeakRef Constructor

The [WeakRef](#sec-weak-ref-constructor) [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 26.1.2.1 WeakRef.prototype

The initial value of `WeakRef.prototype` is the [WeakRef prototype object](#sec-properties-of-the-weak-ref-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 26.1.3 Properties of the WeakRef Prototype Object

The WeakRef prototype object:

-   is %WeakRef.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[WeakRefTarget\]\]_ internal slot.

[Normative Optional](#sec-conformance)


# 26.1.3.1 WeakRef.prototype.constructor

The initial value of `WeakRef.prototype.constructor` is [%WeakRef%](#sec-weak-ref-constructor).


# 26.1.3.2 WeakRef.prototype.deref ( )

This method performs the following steps when called:

1.  Let _weakRef_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_weakRef_, _\[\[WeakRefTarget\]\]_).
3.  Return [WeakRefDeref](#sec-weakrefderef)(_weakRef_).

Note

If the [WeakRef](#sec-weak-ref-constructor) returns a _target_ value that is not undefined, then this _target_ value should not be garbage collected until the current execution of ECMAScript code has completed. The [AddToKeptObjects](#sec-addtokeptobjects) operation makes sure read consistency is maintained.

```
let target = { foo() {} };
let weakRef = new WeakRef(target);

// ... later ...

if (weakRef.deref()) {
  weakRef.deref().foo();
}
```

In the above example, if the first deref does not evaluate to undefined then the second deref cannot either.


# 26.1.3.3 WeakRef.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "WeakRef".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 26.1.4 WeakRef Abstract Operations


# 26.1.4.1 WeakRefDeref ( _weakRef_ )

The abstract operation WeakRefDeref takes argument _weakRef_ (a [WeakRef](#sec-weak-ref-constructor)) and returns an [ECMAScript language value](#sec-ecmascript-language-types). It performs the following steps when called:

1.  Let _target_ be _weakRef_._\[\[WeakRefTarget\]\]_.
2.  If _target_ is not empty, then
    1.  Perform [AddToKeptObjects](#sec-addtokeptobjects)(_target_).
    2.  Return _target_.
3.  Return undefined.

Note

This abstract operation is defined separately from WeakRef.prototype.deref strictly to make it possible to succinctly define liveness.


# 26.1.5 Properties of WeakRef Instances

[WeakRef](#sec-weak-ref-constructor) instances are [ordinary objects](#ordinary-object) that inherit properties from the [WeakRef prototype object](#sec-properties-of-the-weak-ref-prototype-object). [WeakRef](#sec-weak-ref-constructor) instances also have a _\[\[WeakRefTarget\]\]_ internal slot.


# 26.2 FinalizationRegistry Objects

A [FinalizationRegistry](#sec-finalization-registry-constructor) is an object that manages registration and unregistration of cleanup operations that are performed when target objects and symbols are garbage collected.


# 26.2.1 The FinalizationRegistry Constructor

The FinalizationRegistry [constructor](#constructor):

-   is %FinalizationRegistry%.
-   is the initial value of the "FinalizationRegistry" property of the [global object](#sec-global-object).
-   creates and initializes a new FinalizationRegistry when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value in an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified `FinalizationRegistry` behaviour must include a `super` call to the `FinalizationRegistry` [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the `FinalizationRegistry.prototype` built-in methods.


# 26.2.1.1 FinalizationRegistry ( _cleanupCallback_ )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  If [IsCallable](#sec-iscallable)(_cleanupCallback_) is false, throw a TypeError exception.
3.  Let _finalizationRegistry_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%FinalizationRegistry.prototype%", « _\[\[Realm\]\]_, _\[\[CleanupCallback\]\]_, _\[\[Cells\]\]_ »).
4.  Let _fn_ be the [active function object](#active-function-object).
5.  Set _finalizationRegistry_._\[\[Realm\]\]_ to _fn_._\[\[Realm\]\]_.
6.  Set _finalizationRegistry_._\[\[CleanupCallback\]\]_ to [HostMakeJobCallback](#sec-hostmakejobcallback)(_cleanupCallback_).
7.  Set _finalizationRegistry_._\[\[Cells\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
8.  Return _finalizationRegistry_.


# 26.2.2 Properties of the FinalizationRegistry Constructor

The [FinalizationRegistry](#sec-finalization-registry-constructor) [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 26.2.2.1 FinalizationRegistry.prototype

The initial value of `FinalizationRegistry.prototype` is the [FinalizationRegistry prototype object](#sec-properties-of-the-finalization-registry-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 26.2.3 Properties of the FinalizationRegistry Prototype Object

The FinalizationRegistry prototype object:

-   is %FinalizationRegistry.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have _\[\[Cells\]\]_ and _\[\[CleanupCallback\]\]_ internal slots.


# 26.2.3.1 FinalizationRegistry.prototype.constructor

The initial value of `FinalizationRegistry.prototype.constructor` is [%FinalizationRegistry%](#sec-finalization-registry-constructor).


# 26.2.3.2 FinalizationRegistry.prototype.register ( _target_, _heldValue_ \[, _unregisterToken_ \] )

This method performs the following steps when called:

1.  Let _finalizationRegistry_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_finalizationRegistry_, _\[\[Cells\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_target_) is false, throw a TypeError exception.
4.  If [SameValue](#sec-samevalue)(_target_, _heldValue_) is true, throw a TypeError exception.
5.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_unregisterToken_) is false, then
    1.  If _unregisterToken_ is not undefined, throw a TypeError exception.
    2.  Set _unregisterToken_ to empty.
6.  Let _cell_ be the [Record](#sec-list-and-record-specification-type) { _\[\[WeakRefTarget\]\]_: _target_, _\[\[HeldValue\]\]_: _heldValue_, _\[\[UnregisterToken\]\]_: _unregisterToken_ }.
7.  Append _cell_ to _finalizationRegistry_._\[\[Cells\]\]_.
8.  Return undefined.

Note

Based on the algorithms and definitions in this specification, _cell_._\[\[HeldValue\]\]_ is [live](#sec-liveness) when _finalizationRegistry_._\[\[Cells\]\]_ contains _cell_; however, this does not necessarily mean that _cell_._\[\[UnregisterToken\]\]_ or _cell_._\[\[Target\]\]_ are [live](#sec-liveness). For example, registering an object with itself as its unregister token would not keep the object alive forever.


# 26.2.3.3 FinalizationRegistry.prototype.unregister ( _unregisterToken_ )

This method performs the following steps when called:

1.  Let _finalizationRegistry_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_finalizationRegistry_, _\[\[Cells\]\]_).
3.  If [CanBeHeldWeakly](#sec-canbeheldweakly)(_unregisterToken_) is false, throw a TypeError exception.
4.  Let _removed_ be false.
5.  For each [Record](#sec-list-and-record-specification-type) { _\[\[WeakRefTarget\]\]_, _\[\[HeldValue\]\]_, _\[\[UnregisterToken\]\]_ } _cell_ of _finalizationRegistry_._\[\[Cells\]\]_, do
    1.  If _cell_._\[\[UnregisterToken\]\]_ is not empty and [SameValue](#sec-samevalue)(_cell_._\[\[UnregisterToken\]\]_, _unregisterToken_) is true, then
        1.  Remove _cell_ from _finalizationRegistry_._\[\[Cells\]\]_.
        2.  Set _removed_ to true.
6.  Return _removed_.


# 26.2.3.4 FinalizationRegistry.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "FinalizationRegistry".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 26.2.4 Properties of FinalizationRegistry Instances

[FinalizationRegistry](#sec-finalization-registry-constructor) instances are [ordinary objects](#ordinary-object) that inherit properties from the [FinalizationRegistry prototype object](#sec-properties-of-the-finalization-registry-prototype-object). [FinalizationRegistry](#sec-finalization-registry-constructor) instances also have _\[\[Cells\]\]_ and _\[\[CleanupCallback\]\]_ internal slots.


# 27 Control Abstraction Objects


# 27.1 Iteration


# 27.1.1 Common Iteration Interfaces

An interface is a set of [property keys](#property-key) whose associated values match a specific specification. Any object that provides all the properties as described by an interface's specification *conforms* to that interface. An interface is not represented by a distinct object. There may be many separately implemented objects that conform to any interface. An individual object may conform to multiple interfaces.


# 27.1.1.1 The Iterable Interface

The iterable interface includes the property described in [Table 80](#table-iterable-interface-required-properties):

Table 80: [Iterable](#sec-iterable-interface) Interface Required Properties

<table><thead><tr><th>Property</th><th>Value</th><th>Requirements</th></tr></thead><tbody><tr><td><code>%Symbol.iterator%</code></td><td>a function that returns an <emu-xref href="#sec-iterator-interface" id="_ref_15274"><a href="#sec-iterator-interface">iterator object</a></emu-xref></td><td>The returned object must conform to the <emu-xref href="#sec-iterator-interface" id="_ref_15275"><a href="#sec-iterator-interface">iterator interface</a></emu-xref>.</td></tr></tbody></table>


# 27.1.1.2 The Iterator Interface

An object that implements the iterator interface must include the property in [Table 81](#table-iterator-interface-required-properties). Such objects may also implement the properties in [Table 82](#table-iterator-interface-optional-properties).

Table 81: [Iterator](#sec-iterator-interface) Interface Required Properties

<table><thead><tr><th>Property</th><th>Value</th><th>Requirements</th></tr></thead><tbody><tr><td><emu-val>"next"</emu-val></td><td>a function that returns an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15277"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref></td><td>The returned object must conform to the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15278"><a href="#sec-iteratorresult-interface">IteratorResult interface</a></emu-xref>. If a previous call to the <code>next</code> method of an <emu-xref href="#sec-iterator-interface" id="_ref_15279"><a href="#sec-iterator-interface">iterator</a></emu-xref> has returned an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15280"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> whose <emu-val>"done"</emu-val> property is <emu-val>true</emu-val>, then all subsequent calls to the <code>next</code> method of that object should also return an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15281"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> whose <emu-val>"done"</emu-val> property is <emu-val>true</emu-val>. However, this requirement is not enforced.</td></tr></tbody></table>

Note 1

Arguments may be passed to the `next` function but their interpretation and validity is dependent upon the target iterator. The for-of statement and other common users of iterators do not pass any arguments, so iterator objects that expect to be used in such a manner must be prepared to deal with being called with no arguments.

Table 82: [Iterator](#sec-iterator-interface) Interface Optional Properties

<table><thead><tr><th>Property</th><th>Value</th><th>Requirements</th></tr></thead><tbody><tr><td><emu-val>"return"</emu-val></td><td>a function that returns an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15283"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref></td><td>The returned object must conform to the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15284"><a href="#sec-iteratorresult-interface">IteratorResult interface</a></emu-xref>. Invoking this method notifies the <emu-xref href="#sec-iterator-interface" id="_ref_15285"><a href="#sec-iterator-interface">iterator object</a></emu-xref> that the caller does not intend to make any more <code>next</code> method calls to the <emu-xref href="#sec-iterator-interface" id="_ref_15286"><a href="#sec-iterator-interface">iterator</a></emu-xref>. The returned <emu-xref href="#sec-iteratorresult-interface" id="_ref_15287"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> will typically have a <emu-val>"done"</emu-val> property whose value is <emu-val>true</emu-val>, and a <emu-val>"value"</emu-val> property with the value passed as the argument of the <code>return</code> method. However, this requirement is not enforced.</td></tr><tr><td><emu-val>"throw"</emu-val></td><td>a function that returns an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15288"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref></td><td>The returned object must conform to the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15289"><a href="#sec-iteratorresult-interface">IteratorResult interface</a></emu-xref>. Invoking this method notifies the <emu-xref href="#sec-iterator-interface" id="_ref_15290"><a href="#sec-iterator-interface">iterator object</a></emu-xref> that the caller has detected an error condition. The argument may be used to identify the error condition and typically will be an exception object. A typical response is to <code>throw</code> the value passed as the argument. If the method does not <code>throw</code>, the returned <emu-xref href="#sec-iteratorresult-interface" id="_ref_15291"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> will typically have a <emu-val>"done"</emu-val> property whose value is <emu-val>true</emu-val>.</td></tr></tbody></table>

Note 2

Typically callers of these methods should check for their existence before invoking them. Certain ECMAScript language features including `for`\-`of`, `yield*`, and array destructuring call these methods after performing an existence check. Most ECMAScript library functions that accept [iterable objects](#sec-iterable-interface) as arguments also conditionally call them.


# 27.1.1.3 The Async Iterable Interface

The async iterable interface includes the properties described in [Table 83](#table-async-iterable):

Table 83: Async [Iterable](#sec-iterable-interface) Interface Required Properties

<table><thead><tr><th>Property</th><th>Value</th><th>Requirements</th></tr></thead><tbody><tr><td><code>%Symbol.asyncIterator%</code></td><td>a function that returns an <emu-xref href="#sec-asynciterator-interface" id="_ref_15294"><a href="#sec-asynciterator-interface">async iterator object</a></emu-xref></td><td>The returned object must conform to the <emu-xref href="#sec-asynciterator-interface" id="_ref_15295"><a href="#sec-asynciterator-interface">async iterator interface</a></emu-xref>.</td></tr></tbody></table>


# 27.1.1.4 The Async Iterator Interface

An object that implements the async iterator interface must include the properties in [Table 84](#table-async-iterator-required). Such objects may also implement the properties in [Table 85](#table-async-iterator-optional).

Table 84: Async [Iterator](#sec-iterator-interface) Interface Required Properties

<table><thead><tr><th>Property</th><th>Value</th><th>Requirements</th></tr></thead><tbody><tr><td><emu-val>"next"</emu-val></td><td>a function that returns a promise for an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15297"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref></td><td><p>The returned promise, when fulfilled, must fulfill with an object that conforms to the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15298"><a href="#sec-iteratorresult-interface">IteratorResult interface</a></emu-xref>. If a previous call to the <code>next</code> method of an <emu-xref href="#sec-asynciterator-interface" id="_ref_15299"><a href="#sec-asynciterator-interface">async iterator</a></emu-xref> has returned a promise for an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15300"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> whose <emu-val>"done"</emu-val> property is <emu-val>true</emu-val>, then all subsequent calls to the <code>next</code> method of that object should also return a promise for an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15301"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> whose <emu-val>"done"</emu-val> property is <emu-val>true</emu-val>. However, this requirement is not enforced.</p><p>Additionally, the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15302"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> that serves as a fulfillment value should have a <emu-val>"value"</emu-val> property whose value is not a promise (or "thenable"). However, this requirement is also not enforced.</p></td></tr></tbody></table>

Note 1

Arguments may be passed to the `next` function but their interpretation and validity is dependent upon the target async iterator. The `for`\-`await`\-`of` statement and other common users of async iterators do not pass any arguments, so async iterator objects that expect to be used in such a manner must be prepared to deal with being called with no arguments.

Table 85: Async [Iterator](#sec-iterator-interface) Interface Optional Properties

<table><thead><tr><th>Property</th><th>Value</th><th>Requirements</th></tr></thead><tbody><tr><td><emu-val>"return"</emu-val></td><td>a function that returns a promise for an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15304"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref></td><td><p>The returned promise, when fulfilled, must fulfill with an object that conforms to the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15305"><a href="#sec-iteratorresult-interface">IteratorResult interface</a></emu-xref>. Invoking this method notifies the <emu-xref href="#sec-asynciterator-interface" id="_ref_15306"><a href="#sec-asynciterator-interface">async iterator object</a></emu-xref> that the caller does not intend to make any more <code>next</code> method calls to the <emu-xref href="#sec-asynciterator-interface" id="_ref_15307"><a href="#sec-asynciterator-interface">async iterator</a></emu-xref>. The returned promise will fulfill with an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15308"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> which will typically have a <emu-val>"done"</emu-val> property whose value is <emu-val>true</emu-val>, and a <emu-val>"value"</emu-val> property with the value passed as the argument of the <code>return</code> method. However, this requirement is not enforced.</p><p>Additionally, the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15309"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> that serves as a fulfillment value should have a <emu-val>"value"</emu-val> property whose value is not a promise (or "thenable"). If the argument value is used in the typical manner, then if it is a rejected promise, a promise rejected with the same reason should be returned; if it is a fulfilled promise, then its fulfillment value should be used as the <emu-val>"value"</emu-val> property of the returned promise's <emu-xref href="#sec-iteratorresult-interface" id="_ref_15310"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> fulfillment value. However, these requirements are also not enforced.</p></td></tr><tr><td><emu-val>"throw"</emu-val></td><td>a function that returns a promise for an <emu-xref href="#sec-iteratorresult-interface" id="_ref_15311"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref></td><td><p>The returned promise, when fulfilled, must fulfill with an object that conforms to the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15312"><a href="#sec-iteratorresult-interface">IteratorResult interface</a></emu-xref>. Invoking this method notifies the <emu-xref href="#sec-asynciterator-interface" id="_ref_15313"><a href="#sec-asynciterator-interface">async iterator object</a></emu-xref> that the caller has detected an error condition. The argument may be used to identify the error condition and typically will be an exception object. A typical response is to return a rejected promise which rejects with the value passed as the argument.</p><p>If the returned promise is fulfilled, the <emu-xref href="#sec-iteratorresult-interface" id="_ref_15314"><a href="#sec-iteratorresult-interface">IteratorResult object</a></emu-xref> fulfillment value will typically have a <emu-val>"done"</emu-val> property whose value is <emu-val>true</emu-val>. Additionally, it should have a <emu-val>"value"</emu-val> property whose value is not a promise (or "thenable"), but this requirement is not enforced.</p></td></tr></tbody></table>

Note 2

Typically callers of these methods should check for their existence before invoking them. Certain ECMAScript language features including `for`\-`await`\-`of` and `yield*` call these methods after performing an existence check.


# 27.1.1.5 The IteratorResult Interface

The IteratorResult interface includes the properties listed in [Table 86](#table-iteratorresult-interface-properties):

Table 86: IteratorResult Interface Properties

<table><thead><tr><th>Property</th><th>Value</th><th>Requirements</th></tr></thead><tbody><tr><td><emu-val>"done"</emu-val></td><td>a Boolean</td><td>This is the result status of an <emu-xref href="#sec-iterator-interface" id="_ref_15315"><a href="#sec-iterator-interface">iterator</a></emu-xref> <code>next</code> method call. If the end of the <emu-xref href="#sec-iterator-interface" id="_ref_15316"><a href="#sec-iterator-interface">iterator</a></emu-xref> was reached <emu-val>"done"</emu-val> is <emu-val>true</emu-val>. If the end was not reached <emu-val>"done"</emu-val> is <emu-val>false</emu-val> and a value is available. If a <emu-val>"done"</emu-val> property (either own or inherited) does not exist, it is considered to have the value <emu-val>false</emu-val>.</td></tr><tr><td><emu-val>"value"</emu-val></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_15317"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref></td><td>If done is <emu-val>false</emu-val>, this is the current iteration element value. If done is <emu-val>true</emu-val>, this is the return value of the <emu-xref href="#sec-iterator-interface" id="_ref_15318"><a href="#sec-iterator-interface">iterator</a></emu-xref>, if it supplied one. If the <emu-xref href="#sec-iterator-interface" id="_ref_15319"><a href="#sec-iterator-interface">iterator</a></emu-xref> does not have a return value, <emu-val>"value"</emu-val> is <emu-val>undefined</emu-val>. In that case, the <emu-val>"value"</emu-val> property may be absent from the conforming object if it does not inherit an explicit <emu-val>"value"</emu-val> property.</td></tr></tbody></table>


# 27.1.2 Iterator Helper Objects

An Iterator Helper object is an [ordinary object](#ordinary-object) that represents a lazy transformation of some specific source [iterator object](#sec-iterator-interface). There is not a named [constructor](#constructor) for Iterator Helper objects. Instead, Iterator Helper objects are created by calling certain methods of [Iterator](#sec-iterator-interface) instance objects.


# 27.1.2.1 The %IteratorHelperPrototype% Object

The %IteratorHelperPrototype% object:

-   has properties that are inherited by all [Iterator Helper objects](#sec-iterator-helper-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   has the following properties:


# 27.1.2.1.1 %IteratorHelperPrototype%.next ( )

1.  Return ? [GeneratorResume](#sec-generatorresume)(this value, undefined, "Iterator Helper").


# 27.1.2.1.2 %IteratorHelperPrototype%.return ( )

1.  Let _O_ be this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[UnderlyingIterators\]\]_).
3.  [Assert](#assert): _O_ has a _\[\[GeneratorState\]\]_ internal slot.
4.  If _O_._\[\[GeneratorState\]\]_ is suspended-start, then
    1.  Set _O_._\[\[GeneratorState\]\]_ to completed.
    2.  NOTE: Once a generator enters the completed state it never leaves it and its associated [execution context](#sec-execution-contexts) is never resumed. Any execution state associated with _O_ can be discarded at this point.
    3.  Perform ? [IteratorCloseAll](#sec-iteratorcloseall)(_O_._\[\[UnderlyingIterators\]\]_, [NormalCompletion](#sec-normalcompletion)(unused)).
    4.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
5.  Let _C_ be [ReturnCompletion](#sec-returncompletion)(undefined).
6.  Return ? [GeneratorResumeAbrupt](#sec-generatorresumeabrupt)(_O_, _C_, "Iterator Helper").


# 27.1.2.1.3 %IteratorHelperPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Iterator Helper".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.1.3 Iterator Objects


# 27.1.3.1 The Iterator Constructor

The Iterator [constructor](#constructor):

-   is %Iterator%.
-   is the initial value of the "Iterator" property of the [global object](#sec-global-object).
-   is designed to be subclassable. It may be used as the value of an extends clause of a class definition.


# 27.1.3.1.1 Iterator ( )

This function performs the following steps when called:

1.  If NewTarget is either undefined or the [active function object](#active-function-object), throw a TypeError exception.
2.  Return ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Iterator.prototype%").


# 27.1.3.2 Properties of the Iterator Constructor

The [Iterator](#sec-iterator-interface) [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 27.1.3.2.1 Iterator.concat ( ..._items_ )

1.  Let _iterables_ be a new empty [List](#sec-list-and-record-specification-type).
2.  For each element _item_ of _items_, do
    1.  If _item_ [is not an Object](#sec-object-type), throw a TypeError exception.
    2.  Let _method_ be ? [GetMethod](#sec-getmethod)(_item_, [%Symbol.iterator%](#sec-well-known-symbols)).
    3.  If _method_ is undefined, throw a TypeError exception.
    4.  Append the [Record](#sec-list-and-record-specification-type) { _\[\[OpenMethod\]\]_: _method_, _\[\[Iterable\]\]_: _item_ } to _iterables_.
3.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _iterables_ and performs the following steps when called:
    1.  For each [Record](#sec-list-and-record-specification-type) _iterable_ of _iterables_, do
        1.  Let _iter_ be ? [Call](#sec-call)(_iterable_._\[\[OpenMethod\]\]_, _iterable_._\[\[Iterable\]\]_).
        2.  If _iter_ [is not an Object](#sec-object-type), throw a TypeError exception.
        3.  Let _iteratorRecord_ be ? [GetIteratorDirect](#sec-getiteratordirect)(_iter_).
        4.  Let _innerAlive_ be true.
        5.  Repeat, while _innerAlive_ is true,
            1.  Let _innerValue_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
            2.  If _innerValue_ is done, then
                1.  Set _innerAlive_ to false.
            3.  Else,
                1.  Let _completion_ be [Completion](#sec-completion-ao)([Yield](#sec-yield)(_innerValue_)).
                2.  If _completion_ is an [abrupt completion](#sec-completion-record-specification-type), then
                    1.  Return ? [IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _completion_).
    2.  Return [ReturnCompletion](#sec-returncompletion)(undefined).
4.  Let _gen_ be [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "Iterator Helper", [%IteratorHelperPrototype%](#sec-%iteratorhelperprototype%-object), « _\[\[UnderlyingIterators\]\]_ »).
5.  Set _gen_._\[\[UnderlyingIterators\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
6.  Return _gen_.


# 27.1.3.2.2 Iterator.from ( _O_ )

1.  Let _iteratorRecord_ be ? [GetIteratorFlattenable](#sec-getiteratorflattenable)(_O_, iterate-string-primitives).
2.  Let _hasInstance_ be ? [OrdinaryHasInstance](#sec-ordinaryhasinstance)([%Iterator%](#sec-iterator-constructor), _iteratorRecord_._\[\[Iterator\]\]_).
3.  If _hasInstance_ is true, then
    1.  Return _iteratorRecord_._\[\[Iterator\]\]_.
4.  Let _wrapper_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%WrapForValidIteratorPrototype%](#sec-%wrapforvaliditeratorprototype%-object), « _\[\[Iterated\]\]_ »).
5.  Set _wrapper_._\[\[Iterated\]\]_ to _iteratorRecord_.
6.  Return _wrapper_.


# 27.1.3.2.2.1 The %WrapForValidIteratorPrototype% Object

The %WrapForValidIteratorPrototype% object:

-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).


# 27.1.3.2.2.1.1 %WrapForValidIteratorPrototype%.next ( )

1.  Let _O_ be this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[Iterated\]\]_).
3.  Let _iteratorRecord_ be _O_._\[\[Iterated\]\]_.
4.  Return ? [Call](#sec-call)(_iteratorRecord_._\[\[NextMethod\]\]_, _iteratorRecord_._\[\[Iterator\]\]_).


# 27.1.3.2.2.1.2 %WrapForValidIteratorPrototype%.return ( )

1.  Let _O_ be this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[Iterated\]\]_).
3.  Let _iterator_ be _O_._\[\[Iterated\]\]_._\[\[Iterator\]\]_.
4.  [Assert](#assert): _iterator_ [is an Object](#sec-object-type).
5.  Let _returnMethod_ be ? [GetMethod](#sec-getmethod)(_iterator_, "return").
6.  If _returnMethod_ is undefined, then
    1.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
7.  Return ? [Call](#sec-call)(_returnMethod_, _iterator_).


# 27.1.3.2.3 Iterator.prototype

The initial value of Iterator.prototype is the [Iterator prototype object](#sec-%iterator.prototype%-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 27.1.3.3 Properties of the Iterator Prototype Object

The Iterator prototype object:

-   is %Iterator.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).

Note

All objects defined in this specification that implement the [iterator interface](#sec-iterator-interface) also inherit from %Iterator.prototype%. ECMAScript code may also define objects that inherit from %Iterator.prototype%. %Iterator.prototype% provides a place where additional methods that are applicable to all [iterator objects](#sec-iterator-interface) may be added.

The following expression is one way that ECMAScript code can access the %Iterator.prototype% object:

```
Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()))
```


# 27.1.3.3.1 Iterator.prototype.constructor

`Iterator.prototype.constructor` is an [accessor property](#sec-object-type) with attributes { _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }. The _\[\[Get\]\]_ and _\[\[Set\]\]_ attributes are defined as follows:


# 27.1.3.3.1.1 get Iterator.prototype.constructor

The value of the _\[\[Get\]\]_ attribute is a built-in function that requires no arguments. It performs the following steps when called:

1.  Return [%Iterator%](#sec-iterator-constructor).


# 27.1.3.3.1.2 set Iterator.prototype.constructor

The value of the _\[\[Set\]\]_ attribute is a built-in function that takes an argument _v_. It performs the following steps when called:

1.  Perform ? [SetterThatIgnoresPrototypeProperties](#sec-SetterThatIgnoresPrototypeProperties)(this value, [%Iterator.prototype%](#sec-%iterator.prototype%-object), "constructor", _v_).
2.  Return undefined.

Note

Unlike the "constructor" property on most built-in prototypes, for web-compatibility reasons this property must be an accessor.


# 27.1.3.3.2 Iterator.prototype.drop ( _limit_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  Let _numLimit_ be [Completion](#sec-completion-ao)([ToNumber](#sec-tonumber)(_limit_)).
5.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_numLimit_, _iterated_).
6.  If _numLimit_ is NaN, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created RangeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
7.  Let _integerLimit_ be ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_numLimit_).
8.  If _integerLimit_ < 0, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created RangeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
9.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
10.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _iterated_ and _integerLimit_ and performs the following steps when called:
     1.  Let _remaining_ be _integerLimit_.
     2.  Repeat, while _remaining_ > 0,
         1.  If _remaining_ ≠ +∞, then
             1.  Set _remaining_ to _remaining_ - 1.
         2.  Let _next_ be ? [IteratorStep](#sec-iteratorstep)(_iterated_).
         3.  If _next_ is done, return [ReturnCompletion](#sec-returncompletion)(undefined).
     3.  Repeat,
         1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
         2.  If _value_ is done, return [ReturnCompletion](#sec-returncompletion)(undefined).
         3.  Let _completion_ be [Completion](#sec-completion-ao)([Yield](#sec-yield)(_value_)).
         4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_completion_, _iterated_).
11.  Let _result_ be [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "Iterator Helper", [%IteratorHelperPrototype%](#sec-%iteratorhelperprototype%-object), « _\[\[UnderlyingIterators\]\]_ »).
12.  Set _result_._\[\[UnderlyingIterators\]\]_ to « _iterated_ ».
13.  Return _result_.


# 27.1.3.3.3 Iterator.prototype.every ( _predicate_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_predicate_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  Let _counter_ be 0.
7.  Repeat,
    1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
    2.  If _value_ is done, return true.
    3.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_predicate_, undefined, « _value_, [𝔽](#𝔽)(_counter_) »)).
    4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_result_, _iterated_).
    5.  If [ToBoolean](#sec-toboolean)(_result_) is false, return ? [IteratorClose](#sec-iteratorclose)(_iterated_, [NormalCompletion](#sec-normalcompletion)(false)).
    6.  Set _counter_ to _counter_ + 1.


# 27.1.3.3.4 Iterator.prototype.filter ( _predicate_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_predicate_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _iterated_ and _predicate_ and performs the following steps when called:
    1.  Let _counter_ be 0.
    2.  Repeat,
        1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
        2.  If _value_ is done, return [ReturnCompletion](#sec-returncompletion)(undefined).
        3.  Let _selected_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_predicate_, undefined, « _value_, [𝔽](#𝔽)(_counter_) »)).
        4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_selected_, _iterated_).
        5.  If [ToBoolean](#sec-toboolean)(_selected_) is true, then
            1.  Let _completion_ be [Completion](#sec-completion-ao)([Yield](#sec-yield)(_value_)).
            2.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_completion_, _iterated_).
        6.  Set _counter_ to _counter_ + 1.
7.  Let _result_ be [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "Iterator Helper", [%IteratorHelperPrototype%](#sec-%iteratorhelperprototype%-object), « _\[\[UnderlyingIterators\]\]_ »).
8.  Set _result_._\[\[UnderlyingIterators\]\]_ to « _iterated_ ».
9.  Return _result_.


# 27.1.3.3.5 Iterator.prototype.find ( _predicate_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_predicate_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  Let _counter_ be 0.
7.  Repeat,
    1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
    2.  If _value_ is done, return undefined.
    3.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_predicate_, undefined, « _value_, [𝔽](#𝔽)(_counter_) »)).
    4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_result_, _iterated_).
    5.  If [ToBoolean](#sec-toboolean)(_result_) is true, return ? [IteratorClose](#sec-iteratorclose)(_iterated_, [NormalCompletion](#sec-normalcompletion)(_value_)).
    6.  Set _counter_ to _counter_ + 1.


# 27.1.3.3.6 Iterator.prototype.flatMap ( _mapper_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_mapper_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _iterated_ and _mapper_ and performs the following steps when called:
    1.  Let _counter_ be 0.
    2.  Repeat,
        1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
        2.  If _value_ is done, return [ReturnCompletion](#sec-returncompletion)(undefined).
        3.  Let _mapped_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_mapper_, undefined, « _value_, [𝔽](#𝔽)(_counter_) »)).
        4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_mapped_, _iterated_).
        5.  Let _innerIterator_ be [Completion](#sec-completion-ao)([GetIteratorFlattenable](#sec-getiteratorflattenable)(_mapped_, reject-primitives)).
        6.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_innerIterator_, _iterated_).
        7.  Let _innerAlive_ be true.
        8.  Repeat, while _innerAlive_ is true,
            1.  Let _innerValue_ be [Completion](#sec-completion-ao)([IteratorStepValue](#sec-iteratorstepvalue)(_innerIterator_)).
            2.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_innerValue_, _iterated_).
            3.  If _innerValue_ is done, then
                1.  Set _innerAlive_ to false.
            4.  Else,
                1.  Let _completion_ be [Completion](#sec-completion-ao)([Yield](#sec-yield)(_innerValue_)).
                2.  If _completion_ is an [abrupt completion](#sec-completion-record-specification-type), then
                    1.  Let _backupCompletion_ be [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_innerIterator_, _completion_)).
                    2.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_backupCompletion_, _iterated_).
                    3.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _completion_).
        9.  Set _counter_ to _counter_ + 1.
7.  Let _result_ be [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "Iterator Helper", [%IteratorHelperPrototype%](#sec-%iteratorhelperprototype%-object), « _\[\[UnderlyingIterators\]\]_ »).
8.  Set _result_._\[\[UnderlyingIterators\]\]_ to « _iterated_ ».
9.  Return _result_.


# 27.1.3.3.7 Iterator.prototype.forEach ( _procedure_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_procedure_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  Let _counter_ be 0.
7.  Repeat,
    1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
    2.  If _value_ is done, return undefined.
    3.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_procedure_, undefined, « _value_, [𝔽](#𝔽)(_counter_) »)).
    4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_result_, _iterated_).
    5.  Set _counter_ to _counter_ + 1.


# 27.1.3.3.8 Iterator.prototype.map ( _mapper_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_mapper_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _iterated_ and _mapper_ and performs the following steps when called:
    1.  Let _counter_ be 0.
    2.  Repeat,
        1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
        2.  If _value_ is done, return [ReturnCompletion](#sec-returncompletion)(undefined).
        3.  Let _mapped_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_mapper_, undefined, « _value_, [𝔽](#𝔽)(_counter_) »)).
        4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_mapped_, _iterated_).
        5.  Let _completion_ be [Completion](#sec-completion-ao)([Yield](#sec-yield)(_mapped_)).
        6.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_completion_, _iterated_).
        7.  Set _counter_ to _counter_ + 1.
7.  Let _result_ be [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "Iterator Helper", [%IteratorHelperPrototype%](#sec-%iteratorhelperprototype%-object), « _\[\[UnderlyingIterators\]\]_ »).
8.  Set _result_._\[\[UnderlyingIterators\]\]_ to « _iterated_ ».
9.  Return _result_.


# 27.1.3.3.9 Iterator.prototype.reduce ( _reducer_ \[, _initialValue_ \] )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_reducer_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  If _initialValue_ is not present, then
    1.  Let _accumulator_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
    2.  If _accumulator_ is done, throw a TypeError exception.
    3.  Let _counter_ be 1.
7.  Else,
    1.  Let _accumulator_ be _initialValue_.
    2.  Let _counter_ be 0.
8.  Repeat,
    1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
    2.  If _value_ is done, return _accumulator_.
    3.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_reducer_, undefined, « _accumulator_, _value_, [𝔽](#𝔽)(_counter_) »)).
    4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_result_, _iterated_).
    5.  Set _accumulator_ to _result_.
    6.  Set _counter_ to _counter_ + 1.


# 27.1.3.3.10 Iterator.prototype.some ( _predicate_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  If [IsCallable](#sec-iscallable)(_predicate_) is false, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created TypeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
5.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
6.  Let _counter_ be 0.
7.  Repeat,
    1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
    2.  If _value_ is done, return false.
    3.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_predicate_, undefined, « _value_, [𝔽](#𝔽)(_counter_) »)).
    4.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_result_, _iterated_).
    5.  If [ToBoolean](#sec-toboolean)(_result_) is true, return ? [IteratorClose](#sec-iteratorclose)(_iterated_, [NormalCompletion](#sec-normalcompletion)(true)).
    6.  Set _counter_ to _counter_ + 1.


# 27.1.3.3.11 Iterator.prototype.take ( _limit_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _O_, _\[\[NextMethod\]\]_: undefined, _\[\[Done\]\]_: false }.
4.  Let _numLimit_ be [Completion](#sec-completion-ao)([ToNumber](#sec-tonumber)(_limit_)).
5.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_numLimit_, _iterated_).
6.  If _numLimit_ is NaN, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created RangeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
7.  Let _integerLimit_ be ! [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_numLimit_).
8.  If _integerLimit_ < 0, then
    1.  Let _error_ be [ThrowCompletion](#sec-throwcompletion)(a newly created RangeError object).
    2.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, _error_).
9.  Set _iterated_ to ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
10.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _iterated_ and _integerLimit_ and performs the following steps when called:
     1.  Let _remaining_ be _integerLimit_.
     2.  Repeat,
         1.  If _remaining_ = 0, then
             1.  Return ? [IteratorClose](#sec-iteratorclose)(_iterated_, [ReturnCompletion](#sec-returncompletion)(undefined)).
         2.  If _remaining_ ≠ +∞, then
             1.  Set _remaining_ to _remaining_ - 1.
         3.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
         4.  If _value_ is done, return [ReturnCompletion](#sec-returncompletion)(undefined).
         5.  Let _completion_ be [Completion](#sec-completion-ao)([Yield](#sec-yield)(_value_)).
         6.  [IfAbruptCloseIterator](#sec-ifabruptcloseiterator)(_completion_, _iterated_).
11.  Let _result_ be [CreateIteratorFromClosure](#sec-createiteratorfromclosure)(_closure_, "Iterator Helper", [%IteratorHelperPrototype%](#sec-%iteratorhelperprototype%-object), « _\[\[UnderlyingIterators\]\]_ »).
12.  Set _result_._\[\[UnderlyingIterators\]\]_ to « _iterated_ ».
13.  Return _result_.


# 27.1.3.3.12 Iterator.prototype.toArray ( )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  If _O_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _iterated_ be ? [GetIteratorDirect](#sec-getiteratordirect)(_O_).
4.  Let _items_ be a new empty [List](#sec-list-and-record-specification-type).
5.  Repeat,
    1.  Let _value_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iterated_).
    2.  If _value_ is done, return [CreateArrayFromList](#sec-createarrayfromlist)(_items_).
    3.  Append _value_ to _items_.


# 27.1.3.3.13 Iterator.prototype \[%Symbol.iterator% \] ( )

This function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "\[Symbol.iterator\]".


# 27.1.3.3.14 Iterator.prototype \[%Symbol.toStringTag% \]

`Iterator.prototype[%Symbol.toStringTag%]` is an [accessor property](#sec-object-type) with attributes { _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }. The _\[\[Get\]\]_ and _\[\[Set\]\]_ attributes are defined as follows:


# 27.1.3.3.14.1 get Iterator.prototype \[%Symbol.toStringTag% \]

The value of the _\[\[Get\]\]_ attribute is a built-in function that requires no arguments. It performs the following steps when called:

1.  Return "Iterator".


# 27.1.3.3.14.2 set Iterator.prototype \[%Symbol.toStringTag% \]

The value of the _\[\[Set\]\]_ attribute is a built-in function that takes an argument _v_. It performs the following steps when called:

1.  Perform ? [SetterThatIgnoresPrototypeProperties](#sec-SetterThatIgnoresPrototypeProperties)(this value, [%Iterator.prototype%](#sec-%iterator.prototype%-object), [%Symbol.toStringTag%](#sec-well-known-symbols), _v_).
2.  Return undefined.

Note

Unlike the [%Symbol.toStringTag%](#sec-well-known-symbols) property on most built-in prototypes, for web-compatibility reasons this property must be an accessor.


# 27.1.4 The %AsyncIteratorPrototype% Object

The %AsyncIteratorPrototype% object:

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).

Note

All objects defined in this specification that implement the [async iterator interface](#sec-asynciterator-interface) also inherit from %AsyncIteratorPrototype%. ECMAScript code may also define objects that inherit from %AsyncIteratorPrototype%. The %AsyncIteratorPrototype% object provides a place where additional methods that are applicable to all [async iterator objects](#sec-asynciterator-interface) may be added.


# 27.1.4.1 %AsyncIteratorPrototype% \[%Symbol.asyncIterator% \] ( )

This function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "\[Symbol.asyncIterator\]".


# 27.1.5 Async-from-Sync Iterator Objects

An Async-from-Sync Iterator object is an [async iterator](#sec-asynciterator-interface) that adapts a specific synchronous [iterator](#sec-iterator-interface). Async-from-Sync Iterator objects are never directly accessible to ECMAScript code. There is not a named [constructor](#constructor) for Async-from-Sync Iterator objects. Instead, Async-from-Sync Iterator objects are created by the [CreateAsyncFromSyncIterator](#sec-createasyncfromsynciterator) abstract operation as needed.


# 27.1.5.1 CreateAsyncFromSyncIterator ( _syncIteratorRecord_ )

The abstract operation CreateAsyncFromSyncIterator takes argument _syncIteratorRecord_ (an [Iterator Record](#sec-iterator-records)) and returns an [Iterator Record](#sec-iterator-records). It is used to create an async [Iterator Record](#sec-iterator-records) from a synchronous [Iterator Record](#sec-iterator-records). It performs the following steps when called:

1.  Let _asyncIterator_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%AsyncFromSyncIteratorPrototype%](#sec-%asyncfromsynciteratorprototype%-object), « _\[\[SyncIteratorRecord\]\]_ »).
2.  Set _asyncIterator_._\[\[SyncIteratorRecord\]\]_ to _syncIteratorRecord_.
3.  Let _nextMethod_ be ! [Get](#sec-get-o-p)(_asyncIterator_, "next").
4.  Let _iteratorRecord_ be the [Iterator Record](#sec-iterator-records) { _\[\[Iterator\]\]_: _asyncIterator_, _\[\[NextMethod\]\]_: _nextMethod_, _\[\[Done\]\]_: false }.
5.  Return _iteratorRecord_.


# 27.1.5.2 The %AsyncFromSyncIteratorPrototype% Object

The %AsyncFromSyncIteratorPrototype% object:

-   has properties that are inherited by all [Async-from-Sync Iterator objects](#sec-async-from-sync-iterator-objects).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%AsyncIteratorPrototype%](#sec-asynciteratorprototype).
-   is never directly accessible to ECMAScript code.
-   has the following properties:


# 27.1.5.2.1 %AsyncFromSyncIteratorPrototype%.next ( \[_value_ \] )

1.  Let _O_ be the this value.
2.  [Assert](#assert): _O_ [is an Object](#sec-object-type) that has a _\[\[SyncIteratorRecord\]\]_ internal slot.
3.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
4.  Let _syncIteratorRecord_ be _O_._\[\[SyncIteratorRecord\]\]_.
5.  If _value_ is present, then
    1.  Let _result_ be [Completion](#sec-completion-ao)([IteratorNext](#sec-iteratornext)(_syncIteratorRecord_, _value_)).
6.  Else,
    1.  Let _result_ be [Completion](#sec-completion-ao)([IteratorNext](#sec-iteratornext)(_syncIteratorRecord_)).
7.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
8.  Return [AsyncFromSyncIteratorContinuation](#sec-asyncfromsynciteratorcontinuation)(_result_, _promiseCapability_, _syncIteratorRecord_, true).


# 27.1.5.2.2 %AsyncFromSyncIteratorPrototype%.return ( \[_value_ \] )

1.  Let _O_ be the this value.
2.  [Assert](#assert): _O_ [is an Object](#sec-object-type) that has a _\[\[SyncIteratorRecord\]\]_ internal slot.
3.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
4.  Let _syncIteratorRecord_ be _O_._\[\[SyncIteratorRecord\]\]_.
5.  Let _syncIterator_ be _syncIteratorRecord_._\[\[Iterator\]\]_.
6.  Let _return_ be [Completion](#sec-completion-ao)([GetMethod](#sec-getmethod)(_syncIterator_, "return")).
7.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_return_, _promiseCapability_).
8.  If _return_ is undefined, then
    1.  Let _iteratorResult_ be [CreateIteratorResultObject](#sec-createiterresultobject)(_value_, true).
    2.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _iteratorResult_ »).
    3.  Return _promiseCapability_._\[\[Promise\]\]_.
9.  If _value_ is present, then
    1.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_return_, _syncIterator_, « _value_ »)).
10.  Else,
     1.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_return_, _syncIterator_)).
11.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
12.  If _result_ [is not an Object](#sec-object-type), then
     1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « a newly created TypeError object »).
     2.  Return _promiseCapability_._\[\[Promise\]\]_.
13.  Return [AsyncFromSyncIteratorContinuation](#sec-asyncfromsynciteratorcontinuation)(_result_, _promiseCapability_, _syncIteratorRecord_, false).


# 27.1.5.2.3 %AsyncFromSyncIteratorPrototype%.throw ( \[_value_ \] )

Note

In this specification, _value_ is always provided, but is left optional for consistency with [%AsyncFromSyncIteratorPrototype%.return ( \[_value_ \] )](#sec-%asyncfromsynciteratorprototype%.return).

1.  Let _O_ be the this value.
2.  [Assert](#assert): _O_ [is an Object](#sec-object-type) that has a _\[\[SyncIteratorRecord\]\]_ internal slot.
3.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
4.  Let _syncIteratorRecord_ be _O_._\[\[SyncIteratorRecord\]\]_.
5.  Let _syncIterator_ be _syncIteratorRecord_._\[\[Iterator\]\]_.
6.  Let _throw_ be [Completion](#sec-completion-ao)([GetMethod](#sec-getmethod)(_syncIterator_, "throw")).
7.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_throw_, _promiseCapability_).
8.  If _throw_ is undefined, then
    1.  NOTE: If _syncIterator_ does not have a `throw` method, close it to give it a chance to clean up before we reject the capability.
    2.  Let _closeCompletion_ be [NormalCompletion](#sec-normalcompletion)(empty).
    3.  Let _result_ be [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_syncIteratorRecord_, _closeCompletion_)).
    4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
    5.  NOTE: The next step throws a TypeError to indicate that there was a protocol violation: _syncIterator_ does not have a `throw` method.
    6.  NOTE: If closing _syncIterator_ does not throw then the result of that operation is ignored, even if it yields a rejected promise.
    7.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « a newly created TypeError object »).
    8.  Return _promiseCapability_._\[\[Promise\]\]_.
9.  If _value_ is present, then
    1.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_throw_, _syncIterator_, « _value_ »)).
10.  Else,
     1.  Let _result_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_throw_, _syncIterator_)).
11.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
12.  If _result_ [is not an Object](#sec-object-type), then
     1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « a newly created TypeError object »).
     2.  Return _promiseCapability_._\[\[Promise\]\]_.
13.  Return [AsyncFromSyncIteratorContinuation](#sec-asyncfromsynciteratorcontinuation)(_result_, _promiseCapability_, _syncIteratorRecord_, true).


# 27.1.5.3 Properties of Async-from-Sync Iterator Instances

Async-from-Sync [Iterator](#sec-iterator-interface) instances are [ordinary objects](#ordinary-object) that inherit properties from the [%AsyncFromSyncIteratorPrototype%](#sec-%asyncfromsynciteratorprototype%-object) intrinsic object. Async-from-Sync [Iterator](#sec-iterator-interface) instances are initially created with the internal slots listed in [Table 87](#table-async-from-sync-iterator-internal-slots).

Table 87: Internal Slots of Async-from-Sync [Iterator](#sec-iterator-interface) Instances

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[SyncIteratorRecord]]</var></td><td>an <emu-xref href="#sec-iterator-records" id="_ref_15640"><a href="#sec-iterator-records">Iterator Record</a></emu-xref></td><td>Represents the original synchronous <emu-xref href="#sec-iterator-interface" id="_ref_15641"><a href="#sec-iterator-interface">iterator</a></emu-xref> which is being adapted.</td></tr></tbody></table>


# 27.1.5.4 AsyncFromSyncIteratorContinuation ( _result_, _promiseCapability_, _syncIteratorRecord_, _closeOnRejection_ )

The abstract operation AsyncFromSyncIteratorContinuation takes arguments _result_ (an Object), _promiseCapability_ (a [PromiseCapability Record](#sec-promisecapability-records) for an intrinsic [%Promise%](#sec-promise-constructor)), _syncIteratorRecord_ (an [Iterator Record](#sec-iterator-records)), and _closeOnRejection_ (a Boolean) and returns a Promise. It performs the following steps when called:

1.  NOTE: Because _promiseCapability_ is derived from the intrinsic [%Promise%](#sec-promise-constructor), the calls to _promiseCapability_._\[\[Reject\]\]_ entailed by the use [IfAbruptRejectPromise](#sec-ifabruptrejectpromise) below are guaranteed not to throw.
2.  Let _done_ be [Completion](#sec-completion-ao)([IteratorComplete](#sec-iteratorcomplete)(_result_)).
3.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_done_, _promiseCapability_).
4.  Let _value_ be [Completion](#sec-completion-ao)([IteratorValue](#sec-iteratorvalue)(_result_)).
5.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_value_, _promiseCapability_).
6.  Let _valueWrapper_ be [Completion](#sec-completion-ao)([PromiseResolve](#sec-promise-resolve)([%Promise%](#sec-promise-constructor), _value_)).
7.  If _valueWrapper_ is an [abrupt completion](#sec-completion-record-specification-type), _done_ is false, and _closeOnRejection_ is true, then
    1.  Set _valueWrapper_ to [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_syncIteratorRecord_, _valueWrapper_)).
8.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_valueWrapper_, _promiseCapability_).
9.  Let _unwrap_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_v_) that captures _done_ and performs the following steps when called:
    1.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(_v_, _done_).
10.  Let _onFulfilled_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_unwrap_, 1, "", « »).
11.  NOTE: _onFulfilled_ is used when processing the "value" property of an [IteratorResult object](#sec-iteratorresult-interface) in order to wait for its value if it is a promise and re-package the result in a new "unwrapped" [IteratorResult object](#sec-iteratorresult-interface).
12.  If _done_ is true, or if _closeOnRejection_ is false, then
     1.  Let _onRejected_ be undefined.
13.  Else,
     1.  Let _closeIterator_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_error_) that captures _syncIteratorRecord_ and performs the following steps when called:
         1.  Return ? [IteratorClose](#sec-iteratorclose)(_syncIteratorRecord_, [ThrowCompletion](#sec-throwcompletion)(_error_)).
     2.  Let _onRejected_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_closeIterator_, 1, "", « »).
     3.  NOTE: _onRejected_ is used to close the [Iterator](#sec-iterator-interface) when the "value" property of an [IteratorResult object](#sec-iteratorresult-interface) it yields is a rejected promise.
14.  Perform [PerformPromiseThen](#sec-performpromisethen)(_valueWrapper_, _onFulfilled_, _onRejected_, _promiseCapability_).
15.  Return _promiseCapability_._\[\[Promise\]\]_.


# 27.2 Promise Objects

A Promise is an object that is used as a placeholder for the eventual results of a deferred (and possibly asynchronous) computation.

Any Promise is in one of three mutually exclusive states: *fulfilled*, *rejected*, and *pending*:

-   A promise `p` is fulfilled if `p.then(f, r)` will immediately enqueue a [Job](#job) to call the function `f`.
-   A promise `p` is rejected if `p.then(f, r)` will immediately enqueue a [Job](#job) to call the function `r`.
-   A promise is pending if it is neither fulfilled nor rejected.

A promise is said to be *settled* if it is not pending, i.e. if it is either fulfilled or rejected.

A promise is *resolved* if it is settled or if it has been “locked in” to match the state of another promise. Attempting to resolve or reject a resolved promise has no effect. A promise is *unresolved* if it is not resolved. An unresolved promise is always in the pending state. A resolved promise may be pending, fulfilled or rejected.


# 27.2.1 Promise Abstract Operations


# 27.2.1.1 PromiseCapability Records

A PromiseCapability Record is a [Record](#sec-list-and-record-specification-type) value used to encapsulate a Promise or promise-like object along with the functions that are capable of resolving or rejecting that promise. PromiseCapability Records are produced by the [NewPromiseCapability](#sec-newpromisecapability) abstract operation.

PromiseCapability Records have the fields listed in [Table 88](#table-promisecapability-record-fields).

Table 88: [PromiseCapability Record](#sec-promisecapability-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Promise]]</var></td><td>an Object</td><td>An object that is usable as a promise.</td></tr><tr><td><var class="field">[[Resolve]]</var></td><td>a <emu-xref href="#function-object" id="_ref_15677"><a href="#function-object">function object</a></emu-xref></td><td>The function that is used to resolve the given promise.</td></tr><tr><td><var class="field">[[Reject]]</var></td><td>a <emu-xref href="#function-object" id="_ref_15678"><a href="#function-object">function object</a></emu-xref></td><td>The function that is used to reject the given promise.</td></tr></tbody></table>


# 27.2.1.1.1 IfAbruptRejectPromise ( _value_, _capability_ )

IfAbruptRejectPromise is a shorthand for a sequence of algorithm steps that use a [PromiseCapability Record](#sec-promisecapability-records). An algorithm step of the form:

1.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_value_, _capability_).

means the same thing as:

1.  [Assert](#assert): _value_ is a [Completion Record](#sec-completion-record-specification-type).
2.  If _value_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Perform ? [Call](#sec-call)(_capability_._\[\[Reject\]\]_, undefined, « _value_._\[\[Value\]\]_ »).
    2.  Return _capability_._\[\[Promise\]\]_.
3.  Else,
    1.  Set _value_ to ! _value_.


# 27.2.1.2 PromiseReaction Records

A PromiseReaction Record is a [Record](#sec-list-and-record-specification-type) value used to store information about how a promise should react when it becomes resolved or rejected with a given value. PromiseReaction Records are created by the [PerformPromiseThen](#sec-performpromisethen) abstract operation, and are used by the [Abstract Closure](#sec-abstract-closure) returned by [NewPromiseReactionJob](#sec-newpromisereactionjob).

PromiseReaction Records have the fields listed in [Table 89](#table-promisereaction-record-fields).

Table 89: [PromiseReaction Record](#sec-promisereaction-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Capability]]</var></td><td>a <emu-xref href="#sec-promisecapability-records" id="_ref_15690"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref> or <emu-val>undefined</emu-val></td><td>The capabilities of the promise for which this record provides a reaction handler.</td></tr><tr><td><var class="field">[[Type]]</var></td><td><emu-const>fulfill</emu-const> or <emu-const>reject</emu-const></td><td>The <var class="field">[[Type]]</var> is used when <var class="field">[[Handler]]</var> is <emu-const>empty</emu-const> to allow for behaviour specific to the settlement type.</td></tr><tr><td><var class="field">[[Handler]]</var></td><td>a <emu-xref href="#sec-jobcallback-records" id="_ref_15691"><a href="#sec-jobcallback-records">JobCallback Record</a></emu-xref> or <emu-const>empty</emu-const></td><td>The function that should be applied to the incoming value, and whose return value will govern what happens to the derived promise. If <var class="field">[[Handler]]</var> is <emu-const>empty</emu-const>, a function that depends on the value of <var class="field">[[Type]]</var> will be used instead.</td></tr></tbody></table>


# 27.2.1.3 CreateResolvingFunctions ( _promise_ )

The abstract operation CreateResolvingFunctions takes argument _promise_ (a Promise) and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[Resolve\]\]_ (a [function object](#function-object)) and _\[\[Reject\]\]_ (a [function object](#function-object)). It performs the following steps when called:

1.  Let _alreadyResolved_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Value\]\]_: false }.
2.  Let _resolveSteps_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_resolution_) that captures _promise_ and _alreadyResolved_ and performs the following steps when called:
    1.  If _alreadyResolved_._\[\[Value\]\]_ is true, return undefined.
    2.  Set _alreadyResolved_._\[\[Value\]\]_ to true.
    3.  If [SameValue](#sec-samevalue)(_resolution_, _promise_) is true, then
        1.  Let _selfResolutionError_ be a newly created TypeError object.
        2.  Perform [RejectPromise](#sec-rejectpromise)(_promise_, _selfResolutionError_).
        3.  Return undefined.
    4.  If _resolution_ [is not an Object](#sec-object-type), then
        1.  Perform [FulfillPromise](#sec-fulfillpromise)(_promise_, _resolution_).
        2.  Return undefined.
    5.  Let _then_ be [Completion](#sec-completion-ao)([Get](#sec-get-o-p)(_resolution_, "then")).
    6.  If _then_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  Perform [RejectPromise](#sec-rejectpromise)(_promise_, _then_._\[\[Value\]\]_).
        2.  Return undefined.
    7.  Let _thenAction_ be _then_._\[\[Value\]\]_.
    8.  If [IsCallable](#sec-iscallable)(_thenAction_) is false, then
        1.  Perform [FulfillPromise](#sec-fulfillpromise)(_promise_, _resolution_).
        2.  Return undefined.
    9.  Let _thenJobCallback_ be [HostMakeJobCallback](#sec-hostmakejobcallback)(_thenAction_).
    10.  Let _job_ be [NewPromiseResolveThenableJob](#sec-newpromiseresolvethenablejob)(_promise_, _resolution_, _thenJobCallback_).
    11.  Perform [HostEnqueuePromiseJob](#sec-hostenqueuepromisejob)(_job_._\[\[Job\]\]_, _job_._\[\[Realm\]\]_).
    12.  Return undefined.
3.  Let _resolve_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_resolveSteps_, 1, "", « »).
4.  Let _rejectSteps_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_reason_) that captures _promise_ and _alreadyResolved_ and performs the following steps when called:
    1.  If _alreadyResolved_._\[\[Value\]\]_ is true, return undefined.
    2.  Set _alreadyResolved_._\[\[Value\]\]_ to true.
    3.  Perform [RejectPromise](#sec-rejectpromise)(_promise_, _reason_).
    4.  Return undefined.
5.  Let _reject_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_rejectSteps_, 1, "", « »).
6.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Resolve\]\]_: _resolve_, _\[\[Reject\]\]_: _reject_ }.


# 27.2.1.4 FulfillPromise ( _promise_, _value_ )

The abstract operation FulfillPromise takes arguments _promise_ (a Promise) and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _promise_._\[\[PromiseState\]\]_ is pending.
2.  Let _reactions_ be _promise_._\[\[PromiseFulfillReactions\]\]_.
3.  Set _promise_._\[\[PromiseResult\]\]_ to _value_.
4.  Set _promise_._\[\[PromiseFulfillReactions\]\]_ to undefined.
5.  Set _promise_._\[\[PromiseRejectReactions\]\]_ to undefined.
6.  Set _promise_._\[\[PromiseState\]\]_ to fulfilled.
7.  Perform [TriggerPromiseReactions](#sec-triggerpromisereactions)(_reactions_, _value_).
8.  Return unused.


# 27.2.1.5 NewPromiseCapability ( _C_ )

The abstract operation NewPromiseCapability takes argument _C_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [PromiseCapability Record](#sec-promisecapability-records) or a [throw completion](#sec-completion-record-specification-type). It attempts to use _C_ as a [constructor](#constructor) in the fashion of the built-in Promise [constructor](#constructor) to create a promise and extract its `resolve` and `reject` functions. The promise plus the `resolve` and `reject` functions are used to initialize a new [PromiseCapability Record](#sec-promisecapability-records). It performs the following steps when called:

1.  If [IsConstructor](#sec-isconstructor)(_C_) is false, throw a TypeError exception.
2.  NOTE: _C_ is assumed to be a [constructor](#constructor) function that supports the parameter conventions of the Promise [constructor](#constructor) (see [27.2.3.1](#sec-promise-executor)).
3.  Let _resolvingFunctions_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Resolve\]\]_: undefined, _\[\[Reject\]\]_: undefined }.
4.  Let _executorClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_resolve_, _reject_) that captures _resolvingFunctions_ and performs the following steps when called:
    1.  If _resolvingFunctions_._\[\[Resolve\]\]_ is not undefined, throw a TypeError exception.
    2.  If _resolvingFunctions_._\[\[Reject\]\]_ is not undefined, throw a TypeError exception.
    3.  Set _resolvingFunctions_._\[\[Resolve\]\]_ to _resolve_.
    4.  Set _resolvingFunctions_._\[\[Reject\]\]_ to _reject_.
    5.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
5.  Let _executor_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_executorClosure_, 2, "", « »).
6.  Let _promise_ be ? [Construct](#sec-construct)(_C_, « _executor_ »).
7.  If [IsCallable](#sec-iscallable)(_resolvingFunctions_._\[\[Resolve\]\]_) is false, throw a TypeError exception.
8.  If [IsCallable](#sec-iscallable)(_resolvingFunctions_._\[\[Reject\]\]_) is false, throw a TypeError exception.
9.  Return the [PromiseCapability Record](#sec-promisecapability-records) { _\[\[Promise\]\]_: _promise_, _\[\[Resolve\]\]_: _resolvingFunctions_._\[\[Resolve\]\]_, _\[\[Reject\]\]_: _resolvingFunctions_._\[\[Reject\]\]_ }.

Note

This abstract operation supports Promise subclassing, as it is generic on any [constructor](#constructor) that calls a passed executor function argument in the same way as the Promise [constructor](#constructor). It is used to generalize static methods of the Promise [constructor](#constructor) to any subclass.


# 27.2.1.6 IsPromise ( _x_ )

The abstract operation IsPromise takes argument _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a Boolean. It checks for the promise brand on an object. It performs the following steps when called:

1.  If _x_ [is not an Object](#sec-object-type), return false.
2.  If _x_ does not have a _\[\[PromiseState\]\]_ internal slot, return false.
3.  Return true.


# 27.2.1.7 RejectPromise ( _promise_, _reason_ )

The abstract operation RejectPromise takes arguments _promise_ (a Promise) and _reason_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _promise_._\[\[PromiseState\]\]_ is pending.
2.  Let _reactions_ be _promise_._\[\[PromiseRejectReactions\]\]_.
3.  Set _promise_._\[\[PromiseResult\]\]_ to _reason_.
4.  Set _promise_._\[\[PromiseFulfillReactions\]\]_ to undefined.
5.  Set _promise_._\[\[PromiseRejectReactions\]\]_ to undefined.
6.  Set _promise_._\[\[PromiseState\]\]_ to rejected.
7.  If _promise_._\[\[PromiseIsHandled\]\]_ is false, perform [HostPromiseRejectionTracker](#sec-host-promise-rejection-tracker)(_promise_, "reject").
8.  Perform [TriggerPromiseReactions](#sec-triggerpromisereactions)(_reactions_, _reason_).
9.  Return unused.


# 27.2.1.8 TriggerPromiseReactions ( _reactions_, _argument_ )

The abstract operation TriggerPromiseReactions takes arguments _reactions_ (a [List](#sec-list-and-record-specification-type) of [PromiseReaction Records](#sec-promisereaction-records)) and _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns unused. It enqueues a new [Job](#job) for each record in _reactions_. Each such [Job](#job) processes the _\[\[Type\]\]_ and _\[\[Handler\]\]_ of the [PromiseReaction Record](#sec-promisereaction-records), and if the _\[\[Handler\]\]_ is not empty, calls it passing the given argument. If the _\[\[Handler\]\]_ is empty, the behaviour is determined by the _\[\[Type\]\]_. It performs the following steps when called:

1.  For each element _reaction_ of _reactions_, do
    1.  Let _job_ be [NewPromiseReactionJob](#sec-newpromisereactionjob)(_reaction_, _argument_).
    2.  Perform [HostEnqueuePromiseJob](#sec-hostenqueuepromisejob)(_job_._\[\[Job\]\]_, _job_._\[\[Realm\]\]_).
2.  Return unused.


# 27.2.1.9 HostPromiseRejectionTracker ( _promise_, _operation_ )

The [host-defined](#host-defined) abstract operation HostPromiseRejectionTracker takes arguments _promise_ (a Promise) and _operation_ ("reject" or "handle") and returns unused. It allows [host environments](#host-environment) to track promise rejections.

The default implementation of HostPromiseRejectionTracker is to return unused.

Note 1

HostPromiseRejectionTracker is called in two scenarios:

-   When a promise is rejected without any handlers, it is called with its _operation_ argument set to "reject".
-   When a handler is added to a rejected promise for the first time, it is called with its _operation_ argument set to "handle".

A typical implementation of HostPromiseRejectionTracker might try to notify developers of unhandled rejections, while also being careful to notify them if such previous notifications are later invalidated by new handlers being attached.

Note 2

If _operation_ is "handle", an implementation should not hold a reference to _promise_ in a way that would interfere with garbage collection. An implementation may hold a reference to _promise_ if _operation_ is "reject", since it is expected that rejections will be rare and not on hot code paths.


# 27.2.2 Promise Jobs


# 27.2.2.1 NewPromiseReactionJob ( _reaction_, _argument_ )

The abstract operation NewPromiseReactionJob takes arguments _reaction_ (a [PromiseReaction Record](#sec-promisereaction-records)) and _argument_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[Job\]\]_ (a [Job](#job) [Abstract Closure](#sec-abstract-closure)) and _\[\[Realm\]\]_ (a [Realm Record](#realm-record) or null). It returns a new [Job](#job) [Abstract Closure](#sec-abstract-closure) that applies the appropriate handler to the incoming value, and uses the handler's return value to resolve or reject the derived promise associated with that handler. It performs the following steps when called:

1.  Let _job_ be a new [Job](#job) [Abstract Closure](#sec-abstract-closure) with no parameters that captures _reaction_ and _argument_ and performs the following steps when called:
    1.  Let _promiseCapability_ be _reaction_._\[\[Capability\]\]_.
    2.  Let _type_ be _reaction_._\[\[Type\]\]_.
    3.  Let _handler_ be _reaction_._\[\[Handler\]\]_.
    4.  If _handler_ is empty, then
        1.  If _type_ is fulfill, then
            1.  Let _handlerResult_ be [NormalCompletion](#sec-normalcompletion)(_argument_).
        2.  Else,
            1.  [Assert](#assert): _type_ is reject.
            2.  Let _handlerResult_ be [ThrowCompletion](#sec-throwcompletion)(_argument_).
    5.  Else,
        1.  Let _handlerResult_ be [Completion](#sec-completion-ao)([HostCallJobCallback](#sec-hostcalljobcallback)(_handler_, undefined, « _argument_ »)).
    6.  If _promiseCapability_ is undefined, then
        1.  [Assert](#assert): _handlerResult_ is not an [abrupt completion](#sec-completion-record-specification-type).
        2.  Return empty.
    7.  [Assert](#assert): _promiseCapability_ is a [PromiseCapability Record](#sec-promisecapability-records).
    8.  If _handlerResult_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  Return ? [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _handlerResult_._\[\[Value\]\]_ »).
    9.  Else,
        1.  Return ? [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _handlerResult_._\[\[Value\]\]_ »).
2.  Let _handlerRealm_ be null.
3.  If _reaction_._\[\[Handler\]\]_ is not empty, then
    1.  Let _getHandlerRealmResult_ be [Completion](#sec-completion-ao)([GetFunctionRealm](#sec-getfunctionrealm)(_reaction_._\[\[Handler\]\]_._\[\[Callback\]\]_)).
    2.  If _getHandlerRealmResult_ is a [normal completion](#sec-completion-record-specification-type), set _handlerRealm_ to _getHandlerRealmResult_._\[\[Value\]\]_.
    3.  Else, set _handlerRealm_ to [the current Realm Record](#current-realm).
    4.  NOTE: _handlerRealm_ is never null unless the handler is undefined. When the handler is a revoked Proxy and no ECMAScript code runs, _handlerRealm_ is used to create error objects.
4.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Job\]\]_: _job_, _\[\[Realm\]\]_: _handlerRealm_ }.


# 27.2.2.2 NewPromiseResolveThenableJob ( _promiseToResolve_, _thenable_, _then_ )

The abstract operation NewPromiseResolveThenableJob takes arguments _promiseToResolve_ (a Promise), _thenable_ (an Object), and _then_ (a [JobCallback Record](#sec-jobcallback-records)) and returns a [Record](#sec-list-and-record-specification-type) with fields _\[\[Job\]\]_ (a [Job](#job) [Abstract Closure](#sec-abstract-closure)) and _\[\[Realm\]\]_ (a [Realm Record](#realm-record)). It performs the following steps when called:

1.  Let _job_ be a new [Job](#job) [Abstract Closure](#sec-abstract-closure) with no parameters that captures _promiseToResolve_, _thenable_, and _then_ and performs the following steps when called:
    1.  Let _resolvingFunctions_ be [CreateResolvingFunctions](#sec-createresolvingfunctions)(_promiseToResolve_).
    2.  Let _thenCallResult_ be [Completion](#sec-completion-ao)([HostCallJobCallback](#sec-hostcalljobcallback)(_then_, _thenable_, « _resolvingFunctions_._\[\[Resolve\]\]_, _resolvingFunctions_._\[\[Reject\]\]_ »)).
    3.  If _thenCallResult_ is an [abrupt completion](#sec-completion-record-specification-type), then
        1.  Return ? [Call](#sec-call)(_resolvingFunctions_._\[\[Reject\]\]_, undefined, « _thenCallResult_._\[\[Value\]\]_ »).
    4.  Return ! _thenCallResult_.
2.  Let _getThenRealmResult_ be [Completion](#sec-completion-ao)([GetFunctionRealm](#sec-getfunctionrealm)(_then_._\[\[Callback\]\]_)).
3.  If _getThenRealmResult_ is a [normal completion](#sec-completion-record-specification-type), let _thenRealm_ be _getThenRealmResult_._\[\[Value\]\]_.
4.  Else, let _thenRealm_ be [the current Realm Record](#current-realm).
5.  NOTE: _thenRealm_ is never null. When _then_._\[\[Callback\]\]_ is a revoked Proxy and no code runs, _thenRealm_ is used to create error objects.
6.  Return the [Record](#sec-list-and-record-specification-type) { _\[\[Job\]\]_: _job_, _\[\[Realm\]\]_: _thenRealm_ }.

Note

This [Job](#job) uses the supplied thenable and its `then` method to resolve the given promise. This process must take place as a [Job](#job) to ensure that the evaluation of the `then` method occurs after evaluation of any surrounding code has completed.


# 27.2.3 The Promise Constructor

The Promise [constructor](#constructor):

-   is %Promise%.
-   is the initial value of the "Promise" property of the [global object](#sec-global-object).
-   creates and initializes a new Promise when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.
-   may be used as the value in an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified Promise behaviour must include a `super` call to the Promise [constructor](#constructor) to create and initialize the subclass instance with the internal state necessary to support the `Promise` and `Promise.prototype` built-in methods.


# 27.2.3.1 Promise ( _executor_ )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  If [IsCallable](#sec-iscallable)(_executor_) is false, throw a TypeError exception.
3.  Let _promise_ be ? [OrdinaryCreateFromConstructor](#sec-ordinarycreatefromconstructor)(NewTarget, "%Promise.prototype%", « _\[\[PromiseState\]\]_, _\[\[PromiseResult\]\]_, _\[\[PromiseFulfillReactions\]\]_, _\[\[PromiseRejectReactions\]\]_, _\[\[PromiseIsHandled\]\]_ »).
4.  Set _promise_._\[\[PromiseState\]\]_ to pending.
5.  Set _promise_._\[\[PromiseResult\]\]_ to empty.
6.  Set _promise_._\[\[PromiseFulfillReactions\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
7.  Set _promise_._\[\[PromiseRejectReactions\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
8.  Set _promise_._\[\[PromiseIsHandled\]\]_ to false.
9.  Let _resolvingFunctions_ be [CreateResolvingFunctions](#sec-createresolvingfunctions)(_promise_).
10.  Let _completion_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_executor_, undefined, « _resolvingFunctions_._\[\[Resolve\]\]_, _resolvingFunctions_._\[\[Reject\]\]_ »)).
11.  If _completion_ is an [abrupt completion](#sec-completion-record-specification-type), then
     1.  Perform ? [Call](#sec-call)(_resolvingFunctions_._\[\[Reject\]\]_, undefined, « _completion_._\[\[Value\]\]_ »).
12.  Return _promise_.

Note

The _executor_ argument must be a [function object](#function-object). It is called for initiating and reporting completion of the possibly deferred action represented by this Promise. The executor is called with two arguments: _resolve_ and _reject_. These are functions that may be used by the _executor_ function to report eventual completion or failure of the deferred computation. Returning from the executor function does not mean that the deferred action has been completed but only that the request to eventually perform the deferred action has been accepted.

The _resolve_ function that is passed to an _executor_ function accepts a single argument. The _executor_ code may eventually call the _resolve_ function to indicate that it wishes to resolve the associated Promise. The argument passed to the _resolve_ function represents the eventual value of the deferred action and can be either the actual fulfillment value or another promise which will provide the value if it is fulfilled.

The _reject_ function that is passed to an _executor_ function accepts a single argument. The _executor_ code may eventually call the _reject_ function to indicate that the associated Promise is rejected and will never be fulfilled. The argument passed to the _reject_ function is used as the rejection value of the promise. Typically it will be an Error object.

The resolve and reject functions passed to an _executor_ function by the Promise [constructor](#constructor) have the capability to actually resolve and reject the associated promise. Subclasses may have different [constructor](#constructor) behaviour that passes in customized values for resolve and reject.


# 27.2.4 Properties of the Promise Constructor

The Promise [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   has the following properties:


# 27.2.4.1 Promise.all ( _iterable_ )

This function returns a new promise which is fulfilled with an array of fulfillment values for the passed promises, or rejects with the reason of the first passed promise that rejects. It resolves all elements of the passed [iterable](#sec-iterable-interface) to promises as it runs this algorithm.

1.  Let _C_ be the this value.
2.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
3.  Let _promiseResolve_ be [Completion](#sec-completion-ao)([GetPromiseResolve](#sec-getpromiseresolve)(_C_)).
4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_promiseResolve_, _promiseCapability_).
5.  Let _iteratorRecord_ be [Completion](#sec-completion-ao)([GetIterator](#sec-getiterator)(_iterable_, sync)).
6.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_iteratorRecord_, _promiseCapability_).
7.  Let _result_ be [Completion](#sec-completion-ao)([PerformPromiseAll](#sec-performpromiseall)(_iteratorRecord_, _C_, _promiseCapability_, _promiseResolve_)).
8.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  If _iteratorRecord_._\[\[Done\]\]_ is false, set _result_ to [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_)).
    2.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
9.  Return ! _result_.

Note

This function requires its this value to be a [constructor](#constructor) function that supports the parameter conventions of the Promise [constructor](#constructor).


# 27.2.4.1.1 GetPromiseResolve ( _promiseConstructor_ )

The abstract operation GetPromiseResolve takes argument _promiseConstructor_ (a [constructor](#constructor)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a [function object](#function-object) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _promiseResolve_ be ? [Get](#sec-get-o-p)(_promiseConstructor_, "resolve").
2.  If [IsCallable](#sec-iscallable)(_promiseResolve_) is false, throw a TypeError exception.
3.  Return _promiseResolve_.


# 27.2.4.1.2 PerformPromiseAll ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )

The abstract operation PerformPromiseAll takes arguments _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)), _constructor_ (a [constructor](#constructor)), _resultCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)), and _promiseResolve_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _values_ be a new empty [List](#sec-list-and-record-specification-type).
2.  NOTE: _remainingElementsCount_ starts at 1 instead of 0 to ensure _resultCapability_._\[\[Resolve\]\]_ is only called once, even in the presence of a misbehaving "then" which calls the passed callback before the input [iterator](#sec-iterator-interface) is exhausted.
3.  Let _remainingElementsCount_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Value\]\]_: 1 }.
4.  Let _index_ be 0.
5.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, then
        1.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ - 1.
        2.  If _remainingElementsCount_._\[\[Value\]\]_ = 0, then
            1.  Let _valuesArray_ be [CreateArrayFromList](#sec-createarrayfromlist)(_values_).
            2.  Perform ? [Call](#sec-call)(_resultCapability_._\[\[Resolve\]\]_, undefined, « _valuesArray_ »).
        3.  Return _resultCapability_._\[\[Promise\]\]_.
    3.  Append undefined to _values_.
    4.  Let _nextPromise_ be ? [Call](#sec-call)(_promiseResolve_, _constructor_, « _next_ »).
    5.  Let _fulfilledSteps_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_value_) that captures _values_, _resultCapability_, and _remainingElementsCount_ and performs the following steps when called:
        1.  Let _F_ be the [active function object](#active-function-object).
        2.  If _F_._\[\[AlreadyCalled\]\]_ is true, return undefined.
        3.  Set _F_._\[\[AlreadyCalled\]\]_ to true.
        4.  Let _thisIndex_ be _F_._\[\[Index\]\]_.
        5.  Set _values_\[_thisIndex_\] to _value_.
        6.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ - 1.
        7.  If _remainingElementsCount_._\[\[Value\]\]_ = 0, then
            1.  Let _valuesArray_ be [CreateArrayFromList](#sec-createarrayfromlist)(_values_).
            2.  Return ? [Call](#sec-call)(_resultCapability_._\[\[Resolve\]\]_, undefined, « _valuesArray_ »).
        8.  Return undefined.
    6.  Let _onFulfilled_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_fulfilledSteps_, 1, "", « _\[\[AlreadyCalled\]\]_, _\[\[Index\]\]_ »).
    7.  Set _onFulfilled_._\[\[AlreadyCalled\]\]_ to false.
    8.  Set _onFulfilled_._\[\[Index\]\]_ to _index_.
    9.  Set _index_ to _index_ + 1.
    10.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ + 1.
    11.  Perform ? [Invoke](#sec-invoke)(_nextPromise_, "then", « _onFulfilled_, _resultCapability_._\[\[Reject\]\]_ »).


# 27.2.4.2 Promise.allSettled ( _iterable_ )

This function returns a promise that is fulfilled with an array of promise state snapshots, but only after all the original promises have settled, i.e. become either fulfilled or rejected. It resolves all elements of the passed [iterable](#sec-iterable-interface) to promises as it runs this algorithm.

1.  Let _C_ be the this value.
2.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
3.  Let _promiseResolve_ be [Completion](#sec-completion-ao)([GetPromiseResolve](#sec-getpromiseresolve)(_C_)).
4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_promiseResolve_, _promiseCapability_).
5.  Let _iteratorRecord_ be [Completion](#sec-completion-ao)([GetIterator](#sec-getiterator)(_iterable_, sync)).
6.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_iteratorRecord_, _promiseCapability_).
7.  Let _result_ be [Completion](#sec-completion-ao)([PerformPromiseAllSettled](#sec-performpromiseallsettled)(_iteratorRecord_, _C_, _promiseCapability_, _promiseResolve_)).
8.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  If _iteratorRecord_._\[\[Done\]\]_ is false, set _result_ to [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_)).
    2.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
9.  Return ! _result_.

Note

This function requires its this value to be a [constructor](#constructor) function that supports the parameter conventions of the Promise [constructor](#constructor).


# 27.2.4.2.1 PerformPromiseAllSettled ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )

The abstract operation PerformPromiseAllSettled takes arguments _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)), _constructor_ (a [constructor](#constructor)), _resultCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)), and _promiseResolve_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _values_ be a new empty [List](#sec-list-and-record-specification-type).
2.  NOTE: _remainingElementsCount_ starts at 1 instead of 0 to ensure _resultCapability_._\[\[Resolve\]\]_ is only called once, even in the presence of a misbehaving "then" which calls one of the passed callbacks before the input [iterator](#sec-iterator-interface) is exhausted.
3.  Let _remainingElementsCount_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Value\]\]_: 1 }.
4.  Let _index_ be 0.
5.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, then
        1.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ - 1.
        2.  If _remainingElementsCount_._\[\[Value\]\]_ = 0, then
            1.  Let _valuesArray_ be [CreateArrayFromList](#sec-createarrayfromlist)(_values_).
            2.  Perform ? [Call](#sec-call)(_resultCapability_._\[\[Resolve\]\]_, undefined, « _valuesArray_ »).
        3.  Return _resultCapability_._\[\[Promise\]\]_.
    3.  Append undefined to _values_.
    4.  Let _nextPromise_ be ? [Call](#sec-call)(_promiseResolve_, _constructor_, « _next_ »).
    5.  Let _alreadyCalled_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Value\]\]_: false }.
    6.  Let _fulfilledSteps_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_value_) that captures _values_, _resultCapability_, and _remainingElementsCount_ and performs the following steps when called:
        1.  Let _F_ be the [active function object](#active-function-object).
        2.  If _F_._\[\[AlreadyCalled\]\]_._\[\[Value\]\]_ is true, return undefined.
        3.  Set _F_._\[\[AlreadyCalled\]\]_._\[\[Value\]\]_ to true.
        4.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
        5.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "status", "fulfilled").
        6.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "value", _value_).
        7.  Let _thisIndex_ be _F_._\[\[Index\]\]_.
        8.  Set _values_\[_thisIndex_\] to _obj_.
        9.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ - 1.
        10.  If _remainingElementsCount_._\[\[Value\]\]_ = 0, then
             1.  Let _valuesArray_ be [CreateArrayFromList](#sec-createarrayfromlist)(_values_).
             2.  Return ? [Call](#sec-call)(_resultCapability_._\[\[Resolve\]\]_, undefined, « _valuesArray_ »).
        11.  Return undefined.
    7.  Let _onFulfilled_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_fulfilledSteps_, 1, "", « _\[\[AlreadyCalled\]\]_, _\[\[Index\]\]_ »).
    8.  Set _onFulfilled_._\[\[AlreadyCalled\]\]_ to _alreadyCalled_.
    9.  Set _onFulfilled_._\[\[Index\]\]_ to _index_.
    10.  Let _rejectedSteps_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_error_) that captures _values_, _resultCapability_, and _remainingElementsCount_ and performs the following steps when called:
         1.  Let _F_ be the [active function object](#active-function-object).
         2.  If _F_._\[\[AlreadyCalled\]\]_._\[\[Value\]\]_ is true, return undefined.
         3.  Set _F_._\[\[AlreadyCalled\]\]_._\[\[Value\]\]_ to true.
         4.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
         5.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "status", "rejected").
         6.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "reason", _error_).
         7.  Let _thisIndex_ be _F_._\[\[Index\]\]_.
         8.  Set _values_\[_thisIndex_\] to _obj_.
         9.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ - 1.
         10.  If _remainingElementsCount_._\[\[Value\]\]_ = 0, then
              1.  Let _valuesArray_ be [CreateArrayFromList](#sec-createarrayfromlist)(_values_).
              2.  Return ? [Call](#sec-call)(_resultCapability_._\[\[Resolve\]\]_, undefined, « _valuesArray_ »).
         11.  Return undefined.
    11.  Let _onRejected_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_rejectedSteps_, 1, "", « _\[\[AlreadyCalled\]\]_, _\[\[Index\]\]_ »).
    12.  Set _onRejected_._\[\[AlreadyCalled\]\]_ to _alreadyCalled_.
    13.  Set _onRejected_._\[\[Index\]\]_ to _index_.
    14.  Set _index_ to _index_ + 1.
    15.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ + 1.
    16.  Perform ? [Invoke](#sec-invoke)(_nextPromise_, "then", « _onFulfilled_, _onRejected_ »).


# 27.2.4.3 Promise.any ( _iterable_ )

This function returns a promise that is fulfilled by the first given promise to be fulfilled, or rejected with an `AggregateError` holding the rejection reasons if all of the given promises are rejected. It resolves all elements of the passed [iterable](#sec-iterable-interface) to promises as it runs this algorithm.

1.  Let _C_ be the this value.
2.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
3.  Let _promiseResolve_ be [Completion](#sec-completion-ao)([GetPromiseResolve](#sec-getpromiseresolve)(_C_)).
4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_promiseResolve_, _promiseCapability_).
5.  Let _iteratorRecord_ be [Completion](#sec-completion-ao)([GetIterator](#sec-getiterator)(_iterable_, sync)).
6.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_iteratorRecord_, _promiseCapability_).
7.  Let _result_ be [Completion](#sec-completion-ao)([PerformPromiseAny](#sec-performpromiseany)(_iteratorRecord_, _C_, _promiseCapability_, _promiseResolve_)).
8.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  If _iteratorRecord_._\[\[Done\]\]_ is false, set _result_ to [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_)).
    2.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
9.  Return ! _result_.

Note

This function requires its this value to be a [constructor](#constructor) function that supports the parameter conventions of the `Promise` [constructor](#constructor).


# 27.2.4.3.1 PerformPromiseAny ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )

The abstract operation PerformPromiseAny takes arguments _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)), _constructor_ (a [constructor](#constructor)), _resultCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)), and _promiseResolve_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _errors_ be a new empty [List](#sec-list-and-record-specification-type).
2.  NOTE: _remainingElementsCount_ starts at 1 instead of 0 to ensure _resultCapability_._\[\[Reject\]\]_ is only called once, even in the presence of a misbehaving "then" which calls the passed callback before the input [iterator](#sec-iterator-interface) is exhausted.
3.  Let _remainingElementsCount_ be the [Record](#sec-list-and-record-specification-type) { _\[\[Value\]\]_: 1 }.
4.  Let _index_ be 0.
5.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, then
        1.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ - 1.
        2.  If _remainingElementsCount_._\[\[Value\]\]_ = 0, then
            1.  Let _aggregateError_ be a newly created AggregateError object.
            2.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_aggregateError_, "errors", PropertyDescriptor { _\[\[Configurable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Writable\]\]_: true, _\[\[Value\]\]_: [CreateArrayFromList](#sec-createarrayfromlist)(_errors_) }).
            3.  Perform ? [Call](#sec-call)(_resultCapability_._\[\[Reject\]\]_, undefined, « _aggregateError_ »).
        3.  Return _resultCapability_._\[\[Promise\]\]_.
    3.  Append undefined to _errors_.
    4.  Let _nextPromise_ be ? [Call](#sec-call)(_promiseResolve_, _constructor_, « _next_ »).
    5.  Let _rejectedSteps_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_error_) that captures _errors_, _resultCapability_, and _remainingElementsCount_ and performs the following steps when called:
        1.  Let _F_ be the [active function object](#active-function-object).
        2.  If _F_._\[\[AlreadyCalled\]\]_ is true, return undefined.
        3.  Set _F_._\[\[AlreadyCalled\]\]_ to true.
        4.  Let _thisIndex_ be _F_._\[\[Index\]\]_.
        5.  Set _errors_\[_thisIndex_\] to _error_.
        6.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ - 1.
        7.  If _remainingElementsCount_._\[\[Value\]\]_ = 0, then
            1.  Let _aggregateError_ be a newly created AggregateError object.
            2.  Perform ! [DefinePropertyOrThrow](#sec-definepropertyorthrow)(_aggregateError_, "errors", PropertyDescriptor { _\[\[Configurable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Writable\]\]_: true, _\[\[Value\]\]_: [CreateArrayFromList](#sec-createarrayfromlist)(_errors_) }).
            3.  Return ? [Call](#sec-call)(_resultCapability_._\[\[Reject\]\]_, undefined, « _aggregateError_ »).
        8.  Return undefined.
    6.  Let _onRejected_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_rejectedSteps_, 1, "", « _\[\[AlreadyCalled\]\]_, _\[\[Index\]\]_ »).
    7.  Set _onRejected_._\[\[AlreadyCalled\]\]_ to false.
    8.  Set _onRejected_._\[\[Index\]\]_ to _index_.
    9.  Set _index_ to _index_ + 1.
    10.  Set _remainingElementsCount_._\[\[Value\]\]_ to _remainingElementsCount_._\[\[Value\]\]_ + 1.
    11.  Perform ? [Invoke](#sec-invoke)(_nextPromise_, "then", « _resultCapability_._\[\[Resolve\]\]_, _onRejected_ »).


# 27.2.4.4 Promise.prototype

The initial value of `Promise.prototype` is the [Promise prototype object](#sec-properties-of-the-promise-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 27.2.4.5 Promise.race ( _iterable_ )

This function returns a new promise which is settled in the same way as the first passed promise to settle. It resolves all elements of the passed _iterable_ to promises as it runs this algorithm.

1.  Let _C_ be the this value.
2.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
3.  Let _promiseResolve_ be [Completion](#sec-completion-ao)([GetPromiseResolve](#sec-getpromiseresolve)(_C_)).
4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_promiseResolve_, _promiseCapability_).
5.  Let _iteratorRecord_ be [Completion](#sec-completion-ao)([GetIterator](#sec-getiterator)(_iterable_, sync)).
6.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_iteratorRecord_, _promiseCapability_).
7.  Let _result_ be [Completion](#sec-completion-ao)([PerformPromiseRace](#sec-performpromiserace)(_iteratorRecord_, _C_, _promiseCapability_, _promiseResolve_)).
8.  If _result_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  If _iteratorRecord_._\[\[Done\]\]_ is false, set _result_ to [Completion](#sec-completion-ao)([IteratorClose](#sec-iteratorclose)(_iteratorRecord_, _result_)).
    2.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
9.  Return ! _result_.

Note 1

If the _iterable_ argument yields no values or if none of the promises yielded by _iterable_ ever settle, then the pending promise returned by this method will never be settled.

Note 2

This function expects its this value to be a [constructor](#constructor) function that supports the parameter conventions of the Promise [constructor](#constructor). It also expects that its this value provides a `resolve` method.


# 27.2.4.5.1 PerformPromiseRace ( _iteratorRecord_, _constructor_, _resultCapability_, _promiseResolve_ )

The abstract operation PerformPromiseRace takes arguments _iteratorRecord_ (an [Iterator Record](#sec-iterator-records)), _constructor_ (a [constructor](#constructor)), _resultCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)), and _promiseResolve_ (a [function object](#function-object)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Repeat,
    1.  Let _next_ be ? [IteratorStepValue](#sec-iteratorstepvalue)(_iteratorRecord_).
    2.  If _next_ is done, then
        1.  Return _resultCapability_._\[\[Promise\]\]_.
    3.  Let _nextPromise_ be ? [Call](#sec-call)(_promiseResolve_, _constructor_, « _next_ »).
    4.  Perform ? [Invoke](#sec-invoke)(_nextPromise_, "then", « _resultCapability_._\[\[Resolve\]\]_, _resultCapability_._\[\[Reject\]\]_ »).


# 27.2.4.6 Promise.reject ( _r_ )

This function returns a new promise rejected with the passed argument.

1.  Let _C_ be the this value.
2.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
3.  Perform ? [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _r_ »).
4.  Return _promiseCapability_._\[\[Promise\]\]_.

Note

This function expects its this value to be a [constructor](#constructor) function that supports the parameter conventions of the Promise [constructor](#constructor).


# 27.2.4.7 Promise.resolve ( _x_ )

This function returns either a new promise resolved with the passed argument, or the argument itself if the argument is a promise produced by this [constructor](#constructor).

1.  Let _C_ be the this value.
2.  If _C_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Return ? [PromiseResolve](#sec-promise-resolve)(_C_, _x_).

Note

This function expects its this value to be a [constructor](#constructor) function that supports the parameter conventions of the Promise [constructor](#constructor).


# 27.2.4.7.1 PromiseResolve ( _C_, _x_ )

The abstract operation PromiseResolve takes arguments _C_ (an Object) and _x_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It returns a new promise resolved with _x_. It performs the following steps when called:

1.  If [IsPromise](#sec-ispromise)(_x_) is true, then
    1.  Let _xConstructor_ be ? [Get](#sec-get-o-p)(_x_, "constructor").
    2.  If [SameValue](#sec-samevalue)(_xConstructor_, _C_) is true, return _x_.
2.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
3.  Perform ? [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _x_ »).
4.  Return _promiseCapability_._\[\[Promise\]\]_.


# 27.2.4.8 Promise.try ( _callback_, ..._args_ )

This function performs the following steps when called:

1.  Let _C_ be the this value.
2.  If _C_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
4.  Let _status_ be [Completion](#sec-completion-ao)([Call](#sec-call)(_callback_, undefined, _args_)).
5.  If _status_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Perform ? [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _status_._\[\[Value\]\]_ »).
6.  Else,
    1.  Perform ? [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _status_._\[\[Value\]\]_ »).
7.  Return _promiseCapability_._\[\[Promise\]\]_.

Note

This function expects its this value to be a [constructor](#constructor) function that supports the parameter conventions of the Promise [constructor](#constructor).


# 27.2.4.9 Promise.withResolvers ( )

This function returns an object with three properties: a new promise together with the `resolve` and `reject` functions associated with it.

1.  Let _C_ be the this value.
2.  Let _promiseCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
3.  Let _obj_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
4.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "promise", _promiseCapability_._\[\[Promise\]\]_).
5.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "resolve", _promiseCapability_._\[\[Resolve\]\]_).
6.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_obj_, "reject", _promiseCapability_._\[\[Reject\]\]_).
7.  Return _obj_.


# 27.2.4.10 get Promise \[%Symbol.species% \]

`Promise[%Symbol.species%]` is an [accessor property](#sec-object-type) whose set accessor function is undefined. Its get accessor function performs the following steps when called:

1.  Return the this value.

The value of the "name" property of this function is "get \[Symbol.species\]".

Note

Promise prototype methods normally use their this value's [constructor](#constructor) to create a derived object. However, a subclass [constructor](#constructor) may over-ride that default behaviour by redefining its [%Symbol.species%](#sec-well-known-symbols) property.


# 27.2.5 Properties of the Promise Prototype Object

The Promise prototype object:

-   is %Promise.prototype%.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is an [ordinary object](#ordinary-object).
-   does not have a _\[\[PromiseState\]\]_ internal slot or any of the other internal slots of Promise instances.


# 27.2.5.1 Promise.prototype.catch ( _onRejected_ )

This method performs the following steps when called:

1.  Let _promise_ be the this value.
2.  Return ? [Invoke](#sec-invoke)(_promise_, "then", « undefined, _onRejected_ »).


# 27.2.5.2 Promise.prototype.constructor

The initial value of `Promise.prototype.constructor` is [%Promise%](#sec-promise-constructor).


# 27.2.5.3 Promise.prototype.finally ( _onFinally_ )

This method performs the following steps when called:

1.  Let _promise_ be the this value.
2.  If _promise_ [is not an Object](#sec-object-type), throw a TypeError exception.
3.  Let _C_ be ? [SpeciesConstructor](#sec-speciesconstructor)(_promise_, [%Promise%](#sec-promise-constructor)).
4.  [Assert](#assert): [IsConstructor](#sec-isconstructor)(_C_) is true.
5.  If [IsCallable](#sec-iscallable)(_onFinally_) is false, then
    1.  Let _thenFinally_ be _onFinally_.
    2.  Let _catchFinally_ be _onFinally_.
6.  Else,
    1.  Let _thenFinallyClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_value_) that captures _onFinally_ and _C_ and performs the following steps when called:
        1.  Let _result_ be ? [Call](#sec-call)(_onFinally_, undefined).
        2.  Let _p_ be ? [PromiseResolve](#sec-promise-resolve)(_C_, _result_).
        3.  Let _returnValue_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _value_ and performs the following steps when called:
            1.  Return [NormalCompletion](#sec-normalcompletion)(_value_).
        4.  Let _valueThunk_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_returnValue_, 0, "", « »).
        5.  Return ? [Invoke](#sec-invoke)(_p_, "then", « _valueThunk_ »).
    2.  Let _thenFinally_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_thenFinallyClosure_, 1, "", « »).
    3.  Let _catchFinallyClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_reason_) that captures _onFinally_ and _C_ and performs the following steps when called:
        1.  Let _result_ be ? [Call](#sec-call)(_onFinally_, undefined).
        2.  Let _p_ be ? [PromiseResolve](#sec-promise-resolve)(_C_, _result_).
        3.  Let _throwReason_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _reason_ and performs the following steps when called:
            1.  Return [ThrowCompletion](#sec-throwcompletion)(_reason_).
        4.  Let _thrower_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_throwReason_, 0, "", « »).
        5.  Return ? [Invoke](#sec-invoke)(_p_, "then", « _thrower_ »).
    4.  Let _catchFinally_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_catchFinallyClosure_, 1, "", « »).
7.  Return ? [Invoke](#sec-invoke)(_promise_, "then", « _thenFinally_, _catchFinally_ »).


# 27.2.5.4 Promise.prototype.then ( _onFulfilled_, _onRejected_ )

This method performs the following steps when called:

1.  Let _promise_ be the this value.
2.  If [IsPromise](#sec-ispromise)(_promise_) is false, throw a TypeError exception.
3.  Let _C_ be ? [SpeciesConstructor](#sec-speciesconstructor)(_promise_, [%Promise%](#sec-promise-constructor)).
4.  Let _resultCapability_ be ? [NewPromiseCapability](#sec-newpromisecapability)(_C_).
5.  Return [PerformPromiseThen](#sec-performpromisethen)(_promise_, _onFulfilled_, _onRejected_, _resultCapability_).


# 27.2.5.4.1 PerformPromiseThen ( _promise_, _onFulfilled_, _onRejected_ \[, _resultCapability_ \] )

The abstract operation PerformPromiseThen takes arguments _promise_ (a Promise), _onFulfilled_ (an [ECMAScript language value](#sec-ecmascript-language-types)), and _onRejected_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and optional argument _resultCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)) and returns an [ECMAScript language value](#sec-ecmascript-language-types). It performs the “then” operation on _promise_ using _onFulfilled_ and _onRejected_ as its settlement actions. If _resultCapability_ is passed, the result is stored by updating _resultCapability_'s promise. If it is not passed, then PerformPromiseThen is being called by a specification-internal operation where the result does not matter. It performs the following steps when called:

1.  [Assert](#assert): [IsPromise](#sec-ispromise)(_promise_) is true.
2.  If _resultCapability_ is not present, then
    1.  Set _resultCapability_ to undefined.
3.  If [IsCallable](#sec-iscallable)(_onFulfilled_) is false, then
    1.  Let _onFulfilledJobCallback_ be empty.
4.  Else,
    1.  Let _onFulfilledJobCallback_ be [HostMakeJobCallback](#sec-hostmakejobcallback)(_onFulfilled_).
5.  If [IsCallable](#sec-iscallable)(_onRejected_) is false, then
    1.  Let _onRejectedJobCallback_ be empty.
6.  Else,
    1.  Let _onRejectedJobCallback_ be [HostMakeJobCallback](#sec-hostmakejobcallback)(_onRejected_).
7.  Let _fulfillReaction_ be the [PromiseReaction Record](#sec-promisereaction-records) { _\[\[Capability\]\]_: _resultCapability_, _\[\[Type\]\]_: fulfill, _\[\[Handler\]\]_: _onFulfilledJobCallback_ }.
8.  Let _rejectReaction_ be the [PromiseReaction Record](#sec-promisereaction-records) { _\[\[Capability\]\]_: _resultCapability_, _\[\[Type\]\]_: reject, _\[\[Handler\]\]_: _onRejectedJobCallback_ }.
9.  If _promise_._\[\[PromiseState\]\]_ is pending, then
    1.  Append _fulfillReaction_ to _promise_._\[\[PromiseFulfillReactions\]\]_.
    2.  Append _rejectReaction_ to _promise_._\[\[PromiseRejectReactions\]\]_.
10.  Else if _promise_._\[\[PromiseState\]\]_ is fulfilled, then
     1.  Let _value_ be _promise_._\[\[PromiseResult\]\]_.
     2.  Let _fulfillJob_ be [NewPromiseReactionJob](#sec-newpromisereactionjob)(_fulfillReaction_, _value_).
     3.  Perform [HostEnqueuePromiseJob](#sec-hostenqueuepromisejob)(_fulfillJob_._\[\[Job\]\]_, _fulfillJob_._\[\[Realm\]\]_).
11.  Else,
     1.  [Assert](#assert): _promise_._\[\[PromiseState\]\]_ is rejected.
     2.  Let _reason_ be _promise_._\[\[PromiseResult\]\]_.
     3.  If _promise_._\[\[PromiseIsHandled\]\]_ is false, perform [HostPromiseRejectionTracker](#sec-host-promise-rejection-tracker)(_promise_, "handle").
     4.  Let _rejectJob_ be [NewPromiseReactionJob](#sec-newpromisereactionjob)(_rejectReaction_, _reason_).
     5.  Perform [HostEnqueuePromiseJob](#sec-hostenqueuepromisejob)(_rejectJob_._\[\[Job\]\]_, _rejectJob_._\[\[Realm\]\]_).
12.  Set _promise_._\[\[PromiseIsHandled\]\]_ to true.
13.  If _resultCapability_ is undefined, then
     1.  Return undefined.
14.  Else,
     1.  Return _resultCapability_._\[\[Promise\]\]_.


# 27.2.5.5 Promise.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Promise".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.2.6 Properties of Promise Instances

Promise instances are [ordinary objects](#ordinary-object) that inherit properties from the [Promise prototype object](#sec-properties-of-the-promise-prototype-object) (the intrinsic, [%Promise.prototype%](#sec-properties-of-the-promise-prototype-object)). Promise instances are initially created with the internal slots described in [Table 90](#table-internal-slots-of-promise-instances).

Table 90: Internal Slots of Promise Instances

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[PromiseState]]</var></td><td><emu-const>pending</emu-const>, <emu-const>fulfilled</emu-const>, or <emu-const>rejected</emu-const></td><td>Governs how a promise will react to incoming calls to its <code>then</code> method.</td></tr><tr><td><var class="field">[[PromiseResult]]</var></td><td>an <emu-xref href="#sec-ecmascript-language-types" id="_ref_16067"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref> or <emu-const>empty</emu-const></td><td>The value with which the promise has been fulfilled or rejected, if any. <emu-const>empty</emu-const> if and only if the <var class="field">[[PromiseState]]</var> is <emu-const>pending</emu-const>.</td></tr><tr><td><var class="field">[[PromiseFulfillReactions]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16068"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-promisereaction-records" id="_ref_16069"><a href="#sec-promisereaction-records">PromiseReaction Records</a></emu-xref></td><td><emu-xref href="#sec-list-and-record-specification-type" id="_ref_16070"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> to be processed when/if the promise transitions from the <emu-const>pending</emu-const> state to the <emu-const>fulfilled</emu-const> state.</td></tr><tr><td><var class="field">[[PromiseRejectReactions]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16071"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-promisereaction-records" id="_ref_16072"><a href="#sec-promisereaction-records">PromiseReaction Records</a></emu-xref></td><td><emu-xref href="#sec-list-and-record-specification-type" id="_ref_16073"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> to be processed when/if the promise transitions from the <emu-const>pending</emu-const> state to the <emu-const>rejected</emu-const> state.</td></tr><tr><td><var class="field">[[PromiseIsHandled]]</var></td><td>a Boolean</td><td>Indicates whether the promise has ever had a fulfillment or rejection handler; used in unhandled rejection tracking.</td></tr></tbody></table>


# 27.3 GeneratorFunction Objects

GeneratorFunctions are functions that are usually created by evaluating [GeneratorDeclaration](#prod-GeneratorDeclaration)s, [GeneratorExpression](#prod-GeneratorExpression)s, and [GeneratorMethod](#prod-GeneratorMethod)s. They may also be created by calling the [%GeneratorFunction%](#sec-generatorfunction-constructor) intrinsic.

Figure 6 (Informative): Generator Objects Relationships

![A staggering variety of boxes and arrows.](img/figure-2.svg)


# 27.3.1 The GeneratorFunction Constructor

The GeneratorFunction [constructor](#constructor):

-   is %GeneratorFunction%.
-   is a subclass of `Function`.
-   creates and initializes a new GeneratorFunction when called as a function rather than as a [constructor](#constructor). Thus the function call `GeneratorFunction (…)` is equivalent to the object creation expression `new GeneratorFunction (…)` with the same arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified GeneratorFunction behaviour must include a `super` call to the GeneratorFunction [constructor](#constructor) to create and initialize subclass instances with the internal slots necessary for built-in GeneratorFunction behaviour. All ECMAScript syntactic forms for defining generator [function objects](#function-object) create direct instances of GeneratorFunction. There is no syntactic means to create instances of GeneratorFunction subclasses.


# 27.3.1.1 GeneratorFunction ( ..._parameterArgs_, _bodyArg_ )

The last argument (if any) specifies the body (executable code) of a generator function; any preceding arguments specify formal parameters.

This function performs the following steps when called:

1.  Let _C_ be the [active function object](#active-function-object).
2.  If _bodyArg_ is not present, set _bodyArg_ to the empty String.
3.  Return ? [CreateDynamicFunction](#sec-createdynamicfunction)(_C_, NewTarget, generator, _parameterArgs_, _bodyArg_).

Note

See NOTE for [20.2.1.1](#sec-function-p1-p2-pn-body).


# 27.3.2 Properties of the GeneratorFunction Constructor

The GeneratorFunction [constructor](#constructor):

-   is a standard built-in [function object](#function-object) that inherits from the Function [constructor](#constructor).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function%](#sec-function-constructor).
-   has a "length" property whose value is 1<sub>𝔽</sub>.
-   has a "name" property whose value is "GeneratorFunction".
-   has the following properties:


# 27.3.2.1 GeneratorFunction.prototype

The initial value of `GeneratorFunction.prototype` is the [GeneratorFunction prototype object](#sec-properties-of-the-generatorfunction-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 27.3.3 Properties of the GeneratorFunction Prototype Object

The GeneratorFunction prototype object:

-   is %GeneratorFunction.prototype% (see [Figure 6](#figure-2)).
-   is an [ordinary object](#ordinary-object).
-   is not a [function object](#function-object) and does not have an _\[\[ECMAScriptCode\]\]_ internal slot or any other of the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects) or [Table 91](#table-internal-slots-of-generator-instances).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).


# 27.3.3.1 GeneratorFunction.prototype.constructor

The initial value of `GeneratorFunction.prototype.constructor` is [%GeneratorFunction%](#sec-generatorfunction-constructor).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.3.3.2 GeneratorFunction.prototype.prototype

The initial value of `GeneratorFunction.prototype.prototype` is [%GeneratorPrototype%](#sec-properties-of-generator-prototype).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.3.3.3 GeneratorFunction.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "GeneratorFunction".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.3.4 GeneratorFunction Instances

Every GeneratorFunction instance is an ECMAScript [function object](#function-object) and has the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects). The value of the _\[\[IsClassConstructor\]\]_ internal slot for all such instances is false.

Each GeneratorFunction instance has the following own properties:


# 27.3.4.1 length

The specification for the "length" property of Function instances given in [20.2.4.1](#sec-function-instances-length) also applies to GeneratorFunction instances.


# 27.3.4.2 name

The specification for the "name" property of Function instances given in [20.2.4.2](#sec-function-instances-name) also applies to GeneratorFunction instances.


# 27.3.4.3 prototype

Whenever a GeneratorFunction instance is created another [ordinary object](#ordinary-object) is also created and is the initial value of the generator function's "prototype" property. The value of the prototype property is used to initialize the _\[\[Prototype\]\]_ internal slot of a newly created Generator when the generator [function object](#function-object) is invoked using _\[\[Call\]\]_.

This property has the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

Unlike Function instances, the object that is the value of a GeneratorFunction's "prototype" property does not have a "constructor" property whose value is the GeneratorFunction instance.


# 27.4 AsyncGeneratorFunction Objects

AsyncGeneratorFunctions are functions that are usually created by evaluating [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration), [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression), and [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod) syntactic productions. They may also be created by calling the [%AsyncGeneratorFunction%](#sec-asyncgeneratorfunction-constructor) intrinsic.


# 27.4.1 The AsyncGeneratorFunction Constructor

The AsyncGeneratorFunction [constructor](#constructor):

-   is %AsyncGeneratorFunction%.
-   is a subclass of `Function`.
-   creates and initializes a new AsyncGeneratorFunction when called as a function rather than as a [constructor](#constructor). Thus the function call `AsyncGeneratorFunction (...)` is equivalent to the object creation expression `new AsyncGeneratorFunction (...)` with the same arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified AsyncGeneratorFunction behaviour must include a `super` call to the AsyncGeneratorFunction [constructor](#constructor) to create and initialize subclass instances with the internal slots necessary for built-in AsyncGeneratorFunction behaviour. All ECMAScript syntactic forms for defining async generator [function objects](#function-object) create direct instances of AsyncGeneratorFunction. There is no syntactic means to create instances of AsyncGeneratorFunction subclasses.


# 27.4.1.1 AsyncGeneratorFunction ( ..._parameterArgs_, _bodyArg_ )

The last argument (if any) specifies the body (executable code) of an async generator function; any preceding arguments specify formal parameters.

This function performs the following steps when called:

1.  Let _C_ be the [active function object](#active-function-object).
2.  If _bodyArg_ is not present, set _bodyArg_ to the empty String.
3.  Return ? [CreateDynamicFunction](#sec-createdynamicfunction)(_C_, NewTarget, async-generator, _parameterArgs_, _bodyArg_).

Note

See NOTE for [20.2.1.1](#sec-function-p1-p2-pn-body).


# 27.4.2 Properties of the AsyncGeneratorFunction Constructor

The AsyncGeneratorFunction [constructor](#constructor):

-   is a standard built-in [function object](#function-object) that inherits from the Function [constructor](#constructor).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function%](#sec-function-constructor).
-   has a "length" property whose value is 1<sub>𝔽</sub>.
-   has a "name" property whose value is "AsyncGeneratorFunction".
-   has the following properties:


# 27.4.2.1 AsyncGeneratorFunction.prototype

The initial value of `AsyncGeneratorFunction.prototype` is the [AsyncGeneratorFunction prototype object](#sec-properties-of-asyncgeneratorfunction-prototype).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 27.4.3 Properties of the AsyncGeneratorFunction Prototype Object

The AsyncGeneratorFunction prototype object:

-   is %AsyncGeneratorFunction.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is not a [function object](#function-object) and does not have an _\[\[ECMAScriptCode\]\]_ internal slot or any other of the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects) or [Table 92](#table-internal-slots-of-asyncgenerator-instances).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).


# 27.4.3.1 AsyncGeneratorFunction.prototype.constructor

The initial value of `AsyncGeneratorFunction.prototype.constructor` is [%AsyncGeneratorFunction%](#sec-asyncgeneratorfunction-constructor).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.4.3.2 AsyncGeneratorFunction.prototype.prototype

The initial value of `AsyncGeneratorFunction.prototype.prototype` is [%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.4.3.3 AsyncGeneratorFunction.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "AsyncGeneratorFunction".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.4.4 AsyncGeneratorFunction Instances

Every AsyncGeneratorFunction instance is an ECMAScript [function object](#function-object) and has the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects). The value of the _\[\[IsClassConstructor\]\]_ internal slot for all such instances is false.

Each AsyncGeneratorFunction instance has the following own properties:


# 27.4.4.1 length

The value of the "length" property is an [integral Number](#integral-number) that indicates the typical number of arguments expected by the AsyncGeneratorFunction. However, the language permits the function to be invoked with some other number of arguments. The behaviour of an AsyncGeneratorFunction when invoked on a number of arguments other than the number specified by its "length" property depends on the function.

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.4.4.2 name

The specification for the "name" property of Function instances given in [20.2.4.2](#sec-function-instances-name) also applies to AsyncGeneratorFunction instances.


# 27.4.4.3 prototype

Whenever an AsyncGeneratorFunction instance is created, another [ordinary object](#ordinary-object) is also created and is the initial value of the async generator function's "prototype" property. The value of the prototype property is used to initialize the _\[\[Prototype\]\]_ internal slot of a newly created AsyncGenerator when the generator [function object](#function-object) is invoked using _\[\[Call\]\]_.

This property has the attributes { _\[\[Writable\]\]_: true, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.

Note

Unlike function instances, the object that is the value of an AsyncGeneratorFunction's "prototype" property does not have a "constructor" property whose value is the AsyncGeneratorFunction instance.


# 27.5 Generator Objects

A Generator is created by calling a generator function and conforms to both the [iterator interface](#sec-iterator-interface) and the [iterable interface](#sec-iterable-interface).

Generator instances directly inherit properties from the initial value of the "prototype" property of the generator function that created the instance. Generator instances indirectly inherit properties from [%GeneratorPrototype%](#sec-properties-of-generator-prototype).


# 27.5.1 The %GeneratorPrototype% Object

The %GeneratorPrototype% object:

-   is %GeneratorFunction.prototype.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is not a Generator instance and does not have a _\[\[GeneratorState\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Iterator.prototype%](#sec-%iterator.prototype%-object).
-   has properties that are indirectly inherited by all Generator instances.


# 27.5.1.1 %GeneratorPrototype%.constructor

The initial value of [%GeneratorPrototype%](#sec-properties-of-generator-prototype)`.constructor` is [%GeneratorFunction.prototype%](#sec-properties-of-the-generatorfunction-prototype-object).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.5.1.2 %GeneratorPrototype%.next ( _value_ )

1.  Return ? [GeneratorResume](#sec-generatorresume)(this value, _value_, empty).


# 27.5.1.3 %GeneratorPrototype%.return ( _value_ )

This method performs the following steps when called:

1.  Let _g_ be the this value.
2.  Let _C_ be [ReturnCompletion](#sec-returncompletion)(_value_).
3.  Return ? [GeneratorResumeAbrupt](#sec-generatorresumeabrupt)(_g_, _C_, empty).


# 27.5.1.4 %GeneratorPrototype%.throw ( _exception_ )

This method performs the following steps when called:

1.  Let _g_ be the this value.
2.  Let _C_ be [ThrowCompletion](#sec-throwcompletion)(_exception_).
3.  Return ? [GeneratorResumeAbrupt](#sec-generatorresumeabrupt)(_g_, _C_, empty).


# 27.5.1.5 %GeneratorPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Generator".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.5.2 Properties of Generator Instances

Generator instances are initially created with the internal slots described in [Table 91](#table-internal-slots-of-generator-instances).

Table 91: Internal Slots of Generator Instances

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[GeneratorState]]</var></td><td><emu-const>suspended-start</emu-const>, <emu-const>suspended-yield</emu-const>, <emu-const>executing</emu-const>, or <emu-const>completed</emu-const></td><td>The current execution state of the generator.</td></tr><tr><td><var class="field">[[GeneratorContext]]</var></td><td>an <emu-xref href="#sec-execution-contexts" id="_ref_16132"><a href="#sec-execution-contexts">execution context</a></emu-xref></td><td>The <emu-xref href="#sec-execution-contexts" id="_ref_16133"><a href="#sec-execution-contexts">execution context</a></emu-xref> that is used when executing the code of this generator.</td></tr><tr><td><var class="field">[[GeneratorBrand]]</var></td><td>a String or <emu-const>empty</emu-const></td><td>A brand used to distinguish different kinds of generators. The <var class="field">[[GeneratorBrand]]</var> of generators declared by <emu-xref href="#sec-source-text" id="_ref_16134"><a href="#sec-source-text">ECMAScript source text</a></emu-xref> is always <emu-const>empty</emu-const>.</td></tr></tbody></table>


# 27.5.3 Generator Abstract Operations


# 27.5.3.1 GeneratorStart ( _generator_, _generatorBody_ )

The abstract operation GeneratorStart takes arguments _generator_ (a Generator) and _generatorBody_ (a [FunctionBody](#prod-FunctionBody) [Parse Node](#sec-syntactic-grammar) or an [Abstract Closure](#sec-abstract-closure) with no parameters) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _generator_._\[\[GeneratorState\]\]_ is suspended-start.
2.  Let _genContext_ be the [running execution context](#running-execution-context).
3.  Set the Generator component of _genContext_ to _generator_.
4.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _generatorBody_ and performs the following steps when called:
    1.  Let _acGenContext_ be the [running execution context](#running-execution-context).
    2.  Let _acGenerator_ be the Generator component of _acGenContext_.
    3.  If _generatorBody_ is a [Parse Node](#sec-syntactic-grammar), then
        1.  Let _result_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _generatorBody_).
    4.  Else,
        1.  [Assert](#assert): _generatorBody_ is an [Abstract Closure](#sec-abstract-closure) with no parameters.
        2.  Let _result_ be [Completion](#sec-completion-ao)(_generatorBody_()).
    5.  [Assert](#assert): If we return here, the generator either threw an exception or performed either an implicit or explicit return.
    6.  Remove _acGenContext_ from the [execution context stack](#execution-context-stack) and restore the [execution context](#sec-execution-contexts) that is at the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
    7.  Set _acGenerator_._\[\[GeneratorState\]\]_ to completed.
    8.  NOTE: Once a generator enters the completed state it never leaves it and its associated [execution context](#sec-execution-contexts) is never resumed. Any execution state associated with _acGenerator_ can be discarded at this point.
    9.  If _result_ is a [normal completion](#sec-completion-record-specification-type), then
        1.  Let _resultValue_ be undefined.
    10.  Else if _result_ is a [return completion](#sec-completion-record-specification-type), then
         1.  Let _resultValue_ be _result_._\[\[Value\]\]_.
    11.  Else,
         1.  [Assert](#assert): _result_ is a [throw completion](#sec-completion-record-specification-type).
         2.  Return ? _result_.
    12.  Return [NormalCompletion](#sec-normalcompletion)([CreateIteratorResultObject](#sec-createiterresultobject)(_resultValue_, true)).
5.  Set the code evaluation state of _genContext_ such that when evaluation is resumed for that [execution context](#sec-execution-contexts), _closure_ will be called with no arguments.
6.  Set _generator_._\[\[GeneratorContext\]\]_ to _genContext_.
7.  Return unused.


# 27.5.3.2 GeneratorValidate ( _generator_, _generatorBrand_ )

The abstract operation GeneratorValidate takes arguments _generator_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _generatorBrand_ (a String or empty) and returns either a [normal completion containing](#sec-completion-record-specification-type) one of suspended-start, suspended-yield, or completed, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_generator_, _\[\[GeneratorState\]\]_).
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_generator_, _\[\[GeneratorBrand\]\]_).
3.  If _generator_._\[\[GeneratorBrand\]\]_ is not _generatorBrand_, throw a TypeError exception.
4.  [Assert](#assert): _generator_ has a _\[\[GeneratorContext\]\]_ internal slot.
5.  Let _state_ be _generator_._\[\[GeneratorState\]\]_.
6.  If _state_ is executing, throw a TypeError exception.
7.  Return _state_.


# 27.5.3.3 GeneratorResume ( _generator_, _value_, _generatorBrand_ )

The abstract operation GeneratorResume takes arguments _generator_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _value_ (an [ECMAScript language value](#sec-ecmascript-language-types) or empty), and _generatorBrand_ (a String or empty) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _state_ be ? [GeneratorValidate](#sec-generatorvalidate)(_generator_, _generatorBrand_).
2.  If _state_ is completed, return [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
3.  [Assert](#assert): _state_ is either suspended-start or suspended-yield.
4.  Let _genContext_ be _generator_._\[\[GeneratorContext\]\]_.
5.  Let _methodContext_ be the [running execution context](#running-execution-context).
6.  Suspend _methodContext_.
7.  Set _generator_._\[\[GeneratorState\]\]_ to executing.
8.  Push _genContext_ onto the [execution context stack](#execution-context-stack); _genContext_ is now the [running execution context](#running-execution-context).
9.  Resume the suspended evaluation of _genContext_ using [NormalCompletion](#sec-normalcompletion)(_value_) as the result of the operation that suspended it. Let _result_ be the value returned by the resumed computation.
10.  [Assert](#assert): When we return here, _genContext_ has already been removed from the [execution context stack](#execution-context-stack) and _methodContext_ is the currently [running execution context](#running-execution-context).
11.  Return ? _result_.


# 27.5.3.4 GeneratorResumeAbrupt ( _generator_, _abruptCompletion_, _generatorBrand_ )

The abstract operation GeneratorResumeAbrupt takes arguments _generator_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _abruptCompletion_ (a [return completion](#sec-completion-record-specification-type) or a [throw completion](#sec-completion-record-specification-type)), and _generatorBrand_ (a String or empty) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _state_ be ? [GeneratorValidate](#sec-generatorvalidate)(_generator_, _generatorBrand_).
2.  If _state_ is suspended-start, then
    1.  Set _generator_._\[\[GeneratorState\]\]_ to completed.
    2.  NOTE: Once a generator enters the completed state it never leaves it and its associated [execution context](#sec-execution-contexts) is never resumed. Any execution state associated with _generator_ can be discarded at this point.
    3.  Set _state_ to completed.
3.  If _state_ is completed, then
    1.  If _abruptCompletion_ is a [return completion](#sec-completion-record-specification-type), then
        1.  Return [CreateIteratorResultObject](#sec-createiterresultobject)(_abruptCompletion_._\[\[Value\]\]_, true).
    2.  Return ? _abruptCompletion_.
4.  [Assert](#assert): _state_ is suspended-yield.
5.  Let _genContext_ be _generator_._\[\[GeneratorContext\]\]_.
6.  Let _methodContext_ be the [running execution context](#running-execution-context).
7.  Suspend _methodContext_.
8.  Set _generator_._\[\[GeneratorState\]\]_ to executing.
9.  Push _genContext_ onto the [execution context stack](#execution-context-stack); _genContext_ is now the [running execution context](#running-execution-context).
10.  Resume the suspended evaluation of _genContext_ using _abruptCompletion_ as the result of the operation that suspended it. Let _result_ be the [Completion Record](#sec-completion-record-specification-type) returned by the resumed computation.
11.  [Assert](#assert): When we return here, _genContext_ has already been removed from the [execution context stack](#execution-context-stack) and _methodContext_ is the currently [running execution context](#running-execution-context).
12.  Return ? _result_.


# 27.5.3.5 GetGeneratorKind ( )

The abstract operation GetGeneratorKind takes no arguments and returns non-generator, sync, or async. It performs the following steps when called:

1.  Let _genContext_ be the [running execution context](#running-execution-context).
2.  If _genContext_ does not have a Generator component, return non-generator.
3.  Let _generator_ be the Generator component of _genContext_.
4.  If _generator_ has an _\[\[AsyncGeneratorState\]\]_ internal slot, return async.
5.  Else, return sync.


# 27.5.3.6 GeneratorYield ( _iteratorResult_ )

The abstract operation GeneratorYield takes argument _iteratorResult_ (an Object that conforms to the [IteratorResult interface](#sec-iteratorresult-interface)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _genContext_ be the [running execution context](#running-execution-context).
2.  [Assert](#assert): _genContext_ is the [execution context](#sec-execution-contexts) of a generator.
3.  Let _generator_ be the value of the Generator component of _genContext_.
4.  [Assert](#assert): [GetGeneratorKind](#sec-getgeneratorkind)() is sync.
5.  Set _generator_._\[\[GeneratorState\]\]_ to suspended-yield.
6.  Remove _genContext_ from the [execution context stack](#execution-context-stack) and restore the [execution context](#sec-execution-contexts) that is at the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
7.  Let _callerContext_ be the [running execution context](#running-execution-context).
8.  Resume _callerContext_ passing [NormalCompletion](#sec-normalcompletion)(_iteratorResult_). If _genContext_ is ever resumed again, let _resumptionValue_ be the [Completion Record](#sec-completion-record-specification-type) with which it is resumed.
9.  [Assert](#assert): If control reaches here, then _genContext_ is the [running execution context](#running-execution-context) again.
10.  Return _resumptionValue_.


# 27.5.3.7 Yield ( _value_ )

The abstract operation Yield takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _generatorKind_ be [GetGeneratorKind](#sec-getgeneratorkind)().
2.  If _generatorKind_ is async, return ? [AsyncGeneratorYield](#sec-asyncgeneratoryield)(? [Await](#await)(_value_)).
3.  Otherwise, return ? [GeneratorYield](#sec-generatoryield)([CreateIteratorResultObject](#sec-createiterresultobject)(_value_, false)).


# 27.5.3.8 CreateIteratorFromClosure ( _closure_, _generatorBrand_, _generatorPrototype_ \[, _extraSlots_ \] )

The abstract operation CreateIteratorFromClosure takes arguments _closure_ (an [Abstract Closure](#sec-abstract-closure) with no parameters), _generatorBrand_ (a String or empty), and _generatorPrototype_ (an Object) and optional argument _extraSlots_ (a [List](#sec-list-and-record-specification-type) of names of internal slots) and returns a Generator. It performs the following steps when called:

1.  NOTE: _closure_ can contain uses of the [Yield](#sec-yield) operation to yield an [IteratorResult object](#sec-iteratorresult-interface).
2.  If _extraSlots_ is not present, set _extraSlots_ to a new empty [List](#sec-list-and-record-specification-type).
3.  Let _internalSlotsList_ be the [list-concatenation](#list-concatenation) of _extraSlots_ and « _\[\[GeneratorState\]\]_, _\[\[GeneratorContext\]\]_, _\[\[GeneratorBrand\]\]_ ».
4.  Let _generator_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)(_generatorPrototype_, _internalSlotsList_).
5.  Set _generator_._\[\[GeneratorBrand\]\]_ to _generatorBrand_.
6.  Set _generator_._\[\[GeneratorState\]\]_ to suspended-start.
7.  Let _callerContext_ be the [running execution context](#running-execution-context).
8.  Let _calleeContext_ be a new [execution context](#sec-execution-contexts).
9.  Set the Function of _calleeContext_ to null.
10.  Set the [Realm](#realm) of _calleeContext_ to [the current Realm Record](#current-realm).
11.  Set the ScriptOrModule of _calleeContext_ to _callerContext_'s ScriptOrModule.
12.  If _callerContext_ is not already suspended, suspend _callerContext_.
13.  Push _calleeContext_ onto the [execution context stack](#execution-context-stack); _calleeContext_ is now the [running execution context](#running-execution-context).
14.  Perform [GeneratorStart](#sec-generatorstart)(_generator_, _closure_).
15.  Remove _calleeContext_ from the [execution context stack](#execution-context-stack) and restore _callerContext_ as the [running execution context](#running-execution-context).
16.  Return _generator_.


# 27.6 AsyncGenerator Objects

An AsyncGenerator is created by calling an async generator function and conforms to both the [async iterator interface](#sec-asynciterator-interface) and the [async iterable interface](#sec-asynciterable-interface).

AsyncGenerator instances directly inherit properties from the initial value of the "prototype" property of the async generator function that created the instance. AsyncGenerator instances indirectly inherit properties from [%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype).


# 27.6.1 The %AsyncGeneratorPrototype% Object

The %AsyncGeneratorPrototype% object:

-   is %AsyncGeneratorFunction.prototype.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is not an AsyncGenerator instance and does not have an _\[\[AsyncGeneratorState\]\]_ internal slot.
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%AsyncIteratorPrototype%](#sec-asynciteratorprototype).
-   has properties that are indirectly inherited by all AsyncGenerator instances.


# 27.6.1.1 %AsyncGeneratorPrototype%.constructor

The initial value of [%AsyncGeneratorPrototype%](#sec-properties-of-asyncgenerator-prototype)`.constructor` is [%AsyncGeneratorFunction.prototype%](#sec-properties-of-asyncgeneratorfunction-prototype).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.6.1.2 %AsyncGeneratorPrototype%.next ( _value_ )

1.  Let _generator_ be the this value.
2.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
3.  Let _result_ be [Completion](#sec-completion-ao)([AsyncGeneratorValidate](#sec-asyncgeneratorvalidate)(_generator_, empty)).
4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
5.  Let _state_ be _generator_._\[\[AsyncGeneratorState\]\]_.
6.  If _state_ is completed, then
    1.  Let _iteratorResult_ be [CreateIteratorResultObject](#sec-createiterresultobject)(undefined, true).
    2.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _iteratorResult_ »).
    3.  Return _promiseCapability_._\[\[Promise\]\]_.
7.  Let _completion_ be [NormalCompletion](#sec-normalcompletion)(_value_).
8.  Perform [AsyncGeneratorEnqueue](#sec-asyncgeneratorenqueue)(_generator_, _completion_, _promiseCapability_).
9.  If _state_ is either suspended-start or suspended-yield, then
    1.  Perform [AsyncGeneratorResume](#sec-asyncgeneratorresume)(_generator_, _completion_).
10.  Else,
     1.  [Assert](#assert): _state_ is either executing or draining-queue.
11.  Return _promiseCapability_._\[\[Promise\]\]_.


# 27.6.1.3 %AsyncGeneratorPrototype%.return ( _value_ )

1.  Let _generator_ be the this value.
2.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
3.  Let _result_ be [Completion](#sec-completion-ao)([AsyncGeneratorValidate](#sec-asyncgeneratorvalidate)(_generator_, empty)).
4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
5.  Let _completion_ be [ReturnCompletion](#sec-returncompletion)(_value_).
6.  Perform [AsyncGeneratorEnqueue](#sec-asyncgeneratorenqueue)(_generator_, _completion_, _promiseCapability_).
7.  Let _state_ be _generator_._\[\[AsyncGeneratorState\]\]_.
8.  If _state_ is either suspended-start or completed, then
    1.  Set _generator_._\[\[AsyncGeneratorState\]\]_ to draining-queue.
    2.  Perform [AsyncGeneratorAwaitReturn](#sec-asyncgeneratorawaitreturn)(_generator_).
9.  Else if _state_ is suspended-yield, then
    1.  Perform [AsyncGeneratorResume](#sec-asyncgeneratorresume)(_generator_, _completion_).
10.  Else,
     1.  [Assert](#assert): _state_ is either executing or draining-queue.
11.  Return _promiseCapability_._\[\[Promise\]\]_.


# 27.6.1.4 %AsyncGeneratorPrototype%.throw ( _exception_ )

1.  Let _generator_ be the this value.
2.  Let _promiseCapability_ be ! [NewPromiseCapability](#sec-newpromisecapability)([%Promise%](#sec-promise-constructor)).
3.  Let _result_ be [Completion](#sec-completion-ao)([AsyncGeneratorValidate](#sec-asyncgeneratorvalidate)(_generator_, empty)).
4.  [IfAbruptRejectPromise](#sec-ifabruptrejectpromise)(_result_, _promiseCapability_).
5.  Let _state_ be _generator_._\[\[AsyncGeneratorState\]\]_.
6.  If _state_ is suspended-start, then
    1.  Set _generator_._\[\[AsyncGeneratorState\]\]_ to completed.
    2.  Set _state_ to completed.
7.  If _state_ is completed, then
    1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _exception_ »).
    2.  Return _promiseCapability_._\[\[Promise\]\]_.
8.  Let _completion_ be [ThrowCompletion](#sec-throwcompletion)(_exception_).
9.  Perform [AsyncGeneratorEnqueue](#sec-asyncgeneratorenqueue)(_generator_, _completion_, _promiseCapability_).
10.  If _state_ is suspended-yield, then
     1.  Perform [AsyncGeneratorResume](#sec-asyncgeneratorresume)(_generator_, _completion_).
11.  Else,
     1.  [Assert](#assert): _state_ is either executing or draining-queue.
12.  Return _promiseCapability_._\[\[Promise\]\]_.


# 27.6.1.5 %AsyncGeneratorPrototype% \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "AsyncGenerator".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.6.2 Properties of AsyncGenerator Instances

AsyncGenerator instances are initially created with the internal slots described below:

Table 92: Internal Slots of AsyncGenerator Instances

<table><thead><tr><th>Internal Slot</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><var class="field">[[AsyncGeneratorState]]</var></td><td><emu-const>suspended-start</emu-const>, <emu-const>suspended-yield</emu-const>, <emu-const>executing</emu-const>, <emu-const>draining-queue</emu-const>, or <emu-const>completed</emu-const></td><td>The current execution state of the async generator.</td></tr><tr><td><var class="field">[[AsyncGeneratorContext]]</var></td><td>an <emu-xref href="#sec-execution-contexts" id="_ref_16282"><a href="#sec-execution-contexts">execution context</a></emu-xref></td><td>The <emu-xref href="#sec-execution-contexts" id="_ref_16283"><a href="#sec-execution-contexts">execution context</a></emu-xref> that is used when executing the code of this async generator.</td></tr><tr><td><var class="field">[[AsyncGeneratorQueue]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16284"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-asyncgeneratorrequest-records" id="_ref_16285"><a href="#sec-asyncgeneratorrequest-records">AsyncGeneratorRequest</a></emu-xref> <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16286"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref></td><td><emu-xref href="#sec-list-and-record-specification-type" id="_ref_16287"><a href="#sec-list-and-record-specification-type">Records</a></emu-xref> which represent requests to resume the async generator. Except during state transitions, it is non-empty if and only if <var class="field">[[AsyncGeneratorState]]</var> is either <emu-const>executing</emu-const> or <emu-const>draining-queue</emu-const>.</td></tr><tr><td><var class="field">[[GeneratorBrand]]</var></td><td>a String or <emu-const>empty</emu-const></td><td>A brand used to distinguish different kinds of async generators. The <var class="field">[[GeneratorBrand]]</var> of async generators declared by <emu-xref href="#sec-source-text" id="_ref_16288"><a href="#sec-source-text">ECMAScript source text</a></emu-xref> is always <emu-const>empty</emu-const>.</td></tr></tbody></table>


# 27.6.3 AsyncGenerator Abstract Operations


# 27.6.3.1 AsyncGeneratorRequest Records

An AsyncGeneratorRequest is a [Record](#sec-list-and-record-specification-type) value used to store information about how an async generator should be resumed and contains capabilities for fulfilling or rejecting the corresponding promise.

They have the following fields:

Table 93: AsyncGeneratorRequest [Record](#sec-list-and-record-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Completion]]</var></td><td>a <emu-xref href="#sec-completion-record-specification-type" id="_ref_16291"><a href="#sec-completion-record-specification-type">Completion Record</a></emu-xref></td><td>The <emu-xref href="#sec-completion-record-specification-type" id="_ref_16292"><a href="#sec-completion-record-specification-type">Completion Record</a></emu-xref> which should be used to resume the async generator.</td></tr><tr><td><var class="field">[[Capability]]</var></td><td>a <emu-xref href="#sec-promisecapability-records" id="_ref_16293"><a href="#sec-promisecapability-records">PromiseCapability Record</a></emu-xref></td><td>The promise capabilities associated with this request.</td></tr></tbody></table>


# 27.6.3.2 AsyncGeneratorStart ( _generator_, _generatorBody_ )

The abstract operation AsyncGeneratorStart takes arguments _generator_ (an AsyncGenerator) and _generatorBody_ (a [FunctionBody](#prod-FunctionBody) [Parse Node](#sec-syntactic-grammar) or an [Abstract Closure](#sec-abstract-closure) with no parameters) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _generator_._\[\[AsyncGeneratorState\]\]_ is suspended-start.
2.  Let _genContext_ be the [running execution context](#running-execution-context).
3.  Set the Generator component of _genContext_ to _generator_.
4.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _generatorBody_ and performs the following steps when called:
    1.  Let _acGenContext_ be the [running execution context](#running-execution-context).
    2.  Let _acGenerator_ be the Generator component of _acGenContext_.
    3.  If _generatorBody_ is a [Parse Node](#sec-syntactic-grammar), then
        1.  Let _result_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _generatorBody_).
    4.  Else,
        1.  [Assert](#assert): _generatorBody_ is an [Abstract Closure](#sec-abstract-closure) with no parameters.
        2.  Let _result_ be [Completion](#sec-completion-ao)(_generatorBody_()).
    5.  [Assert](#assert): If we return here, the async generator either threw an exception or performed either an implicit or explicit return.
    6.  Remove _acGenContext_ from the [execution context stack](#execution-context-stack) and restore the [execution context](#sec-execution-contexts) that is at the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
    7.  Set _acGenerator_._\[\[AsyncGeneratorState\]\]_ to draining-queue.
    8.  If _result_ is a [normal completion](#sec-completion-record-specification-type), set _result_ to [NormalCompletion](#sec-normalcompletion)(undefined).
    9.  If _result_ is a [return completion](#sec-completion-record-specification-type), set _result_ to [NormalCompletion](#sec-normalcompletion)(_result_._\[\[Value\]\]_).
    10.  Perform [AsyncGeneratorCompleteStep](#sec-asyncgeneratorcompletestep)(_acGenerator_, _result_, true).
    11.  Perform [AsyncGeneratorDrainQueue](#sec-asyncgeneratordrainqueue)(_acGenerator_).
    12.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
5.  Set the code evaluation state of _genContext_ such that when evaluation is resumed for that [execution context](#sec-execution-contexts), _closure_ will be called with no arguments.
6.  Set _generator_._\[\[AsyncGeneratorContext\]\]_ to _genContext_.
7.  Set _generator_._\[\[AsyncGeneratorQueue\]\]_ to a new empty [List](#sec-list-and-record-specification-type).
8.  Return unused.


# 27.6.3.3 AsyncGeneratorValidate ( _generator_, _generatorBrand_ )

The abstract operation AsyncGeneratorValidate takes arguments _generator_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and _generatorBrand_ (a String or empty) and returns either a [normal completion containing](#sec-completion-record-specification-type) unused or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_generator_, _\[\[AsyncGeneratorContext\]\]_).
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_generator_, _\[\[AsyncGeneratorState\]\]_).
3.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_generator_, _\[\[AsyncGeneratorQueue\]\]_).
4.  If _generator_._\[\[GeneratorBrand\]\]_ is not _generatorBrand_, throw a TypeError exception.
5.  Return unused.


# 27.6.3.4 AsyncGeneratorEnqueue ( _generator_, _completion_, _promiseCapability_ )

The abstract operation AsyncGeneratorEnqueue takes arguments _generator_ (an AsyncGenerator), _completion_ (a [Completion Record](#sec-completion-record-specification-type)), and _promiseCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)) and returns unused. It performs the following steps when called:

1.  Let _request_ be [AsyncGeneratorRequest](#sec-asyncgeneratorrequest-records) { _\[\[Completion\]\]_: _completion_, _\[\[Capability\]\]_: _promiseCapability_ }.
2.  Append _request_ to _generator_._\[\[AsyncGeneratorQueue\]\]_.
3.  Return unused.


# 27.6.3.5 AsyncGeneratorCompleteStep ( _generator_, _completion_, _done_ \[, _realm_ \] )

The abstract operation AsyncGeneratorCompleteStep takes arguments _generator_ (an AsyncGenerator), _completion_ (a [Completion Record](#sec-completion-record-specification-type)), and _done_ (a Boolean) and optional argument _realm_ (a [Realm Record](#realm-record)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _generator_._\[\[AsyncGeneratorQueue\]\]_ is not empty.
2.  Let _next_ be the first element of _generator_._\[\[AsyncGeneratorQueue\]\]_.
3.  Remove the first element from _generator_._\[\[AsyncGeneratorQueue\]\]_.
4.  Let _promiseCapability_ be _next_._\[\[Capability\]\]_.
5.  Let _value_ be _completion_._\[\[Value\]\]_.
6.  If _completion_ is a [throw completion](#sec-completion-record-specification-type), then
    1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _value_ »).
7.  Else,
    1.  [Assert](#assert): _completion_ is a [normal completion](#sec-completion-record-specification-type).
    2.  If _realm_ is present, then
        1.  Let _oldRealm_ be the [running execution context](#running-execution-context)'s [Realm](#realm).
        2.  Set the [running execution context](#running-execution-context)'s [Realm](#realm) to _realm_.
        3.  Let _iteratorResult_ be [CreateIteratorResultObject](#sec-createiterresultobject)(_value_, _done_).
        4.  Set the [running execution context](#running-execution-context)'s [Realm](#realm) to _oldRealm_.
    3.  Else,
        1.  Let _iteratorResult_ be [CreateIteratorResultObject](#sec-createiterresultobject)(_value_, _done_).
    4.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _iteratorResult_ »).
8.  Return unused.


# 27.6.3.6 AsyncGeneratorResume ( _generator_, _completion_ )

The abstract operation AsyncGeneratorResume takes arguments _generator_ (an AsyncGenerator) and _completion_ (a [Completion Record](#sec-completion-record-specification-type)) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _generator_._\[\[AsyncGeneratorState\]\]_ is either suspended-start or suspended-yield.
2.  Let _genContext_ be _generator_._\[\[AsyncGeneratorContext\]\]_.
3.  Let _callerContext_ be the [running execution context](#running-execution-context).
4.  Suspend _callerContext_.
5.  Set _generator_._\[\[AsyncGeneratorState\]\]_ to executing.
6.  Push _genContext_ onto the [execution context stack](#execution-context-stack); _genContext_ is now the [running execution context](#running-execution-context).
7.  Resume the suspended evaluation of _genContext_ using _completion_ as the result of the operation that suspended it. Let _result_ be the [Completion Record](#sec-completion-record-specification-type) returned by the resumed computation.
8.  [Assert](#assert): _result_ is never an [abrupt completion](#sec-completion-record-specification-type).
9.  [Assert](#assert): When we return here, _genContext_ has already been removed from the [execution context stack](#execution-context-stack) and _callerContext_ is the currently [running execution context](#running-execution-context).
10.  Return unused.


# 27.6.3.7 AsyncGeneratorUnwrapYieldResumption ( _resumptionValue_ )

The abstract operation AsyncGeneratorUnwrapYieldResumption takes argument _resumptionValue_ (a [Completion Record](#sec-completion-record-specification-type)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  If _resumptionValue_ is not a [return completion](#sec-completion-record-specification-type), return ? _resumptionValue_.
2.  Let _awaited_ be [Completion](#sec-completion-ao)([Await](#await)(_resumptionValue_._\[\[Value\]\]_)).
3.  If _awaited_ is a [throw completion](#sec-completion-record-specification-type), return ? _awaited_.
4.  [Assert](#assert): _awaited_ is a [normal completion](#sec-completion-record-specification-type).
5.  Return [ReturnCompletion](#sec-returncompletion)(_awaited_._\[\[Value\]\]_).


# 27.6.3.8 AsyncGeneratorYield ( _value_ )

The abstract operation AsyncGeneratorYield takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) an [ECMAScript language value](#sec-ecmascript-language-types) or an [abrupt completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _genContext_ be the [running execution context](#running-execution-context).
2.  [Assert](#assert): _genContext_ is the [execution context](#sec-execution-contexts) of a generator.
3.  Let _generator_ be the value of the Generator component of _genContext_.
4.  [Assert](#assert): [GetGeneratorKind](#sec-getgeneratorkind)() is async.
5.  Let _completion_ be [NormalCompletion](#sec-normalcompletion)(_value_).
6.  [Assert](#assert): The [execution context stack](#execution-context-stack) has at least two elements.
7.  Let _previousContext_ be the second to top element of the [execution context stack](#execution-context-stack).
8.  Let _previousRealm_ be _previousContext_'s [Realm](#realm).
9.  Perform [AsyncGeneratorCompleteStep](#sec-asyncgeneratorcompletestep)(_generator_, _completion_, false, _previousRealm_).
10.  Let _queue_ be _generator_._\[\[AsyncGeneratorQueue\]\]_.
11.  If _queue_ is not empty, then
     1.  NOTE: Execution continues without suspending the generator.
     2.  Let _toYield_ be the first element of _queue_.
     3.  Let _resumptionValue_ be [Completion](#sec-completion-ao)(_toYield_._\[\[Completion\]\]_).
     4.  Return ? [AsyncGeneratorUnwrapYieldResumption](#sec-asyncgeneratorunwrapyieldresumption)(_resumptionValue_).
12.  Else,
     1.  Set _generator_._\[\[AsyncGeneratorState\]\]_ to suspended-yield.
     2.  Remove _genContext_ from the [execution context stack](#execution-context-stack) and restore the [execution context](#sec-execution-contexts) that is at the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
     3.  Let _callerContext_ be the [running execution context](#running-execution-context).
     4.  Resume _callerContext_ passing undefined. If _genContext_ is ever resumed again, let _resumptionValue_ be the [Completion Record](#sec-completion-record-specification-type) with which it is resumed.
     5.  [Assert](#assert): If control reaches here, then _genContext_ is the [running execution context](#running-execution-context) again.
     6.  Return ? [AsyncGeneratorUnwrapYieldResumption](#sec-asyncgeneratorunwrapyieldresumption)(_resumptionValue_).


# 27.6.3.9 AsyncGeneratorAwaitReturn ( _generator_ )

The abstract operation AsyncGeneratorAwaitReturn takes argument _generator_ (an AsyncGenerator) and returns unused. It performs the following steps when called:

1.  [Assert](#assert): _generator_._\[\[AsyncGeneratorState\]\]_ is draining-queue.
2.  Let _queue_ be _generator_._\[\[AsyncGeneratorQueue\]\]_.
3.  [Assert](#assert): _queue_ is not empty.
4.  Let _next_ be the first element of _queue_.
5.  Let _completion_ be [Completion](#sec-completion-ao)(_next_._\[\[Completion\]\]_).
6.  [Assert](#assert): _completion_ is a [return completion](#sec-completion-record-specification-type).
7.  Let _promiseCompletion_ be [Completion](#sec-completion-ao)([PromiseResolve](#sec-promise-resolve)([%Promise%](#sec-promise-constructor), _completion_._\[\[Value\]\]_)).
8.  If _promiseCompletion_ is an [abrupt completion](#sec-completion-record-specification-type), then
    1.  Perform [AsyncGeneratorCompleteStep](#sec-asyncgeneratorcompletestep)(_generator_, _promiseCompletion_, true).
    2.  Perform [AsyncGeneratorDrainQueue](#sec-asyncgeneratordrainqueue)(_generator_).
    3.  Return unused.
9.  [Assert](#assert): _promiseCompletion_ is a [normal completion](#sec-completion-record-specification-type).
10.  Let _promise_ be _promiseCompletion_._\[\[Value\]\]_.
11.  Let _fulfilledClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_value_) that captures _generator_ and performs the following steps when called:
     1.  [Assert](#assert): _generator_._\[\[AsyncGeneratorState\]\]_ is draining-queue.
     2.  Let _result_ be [NormalCompletion](#sec-normalcompletion)(_value_).
     3.  Perform [AsyncGeneratorCompleteStep](#sec-asyncgeneratorcompletestep)(_generator_, _result_, true).
     4.  Perform [AsyncGeneratorDrainQueue](#sec-asyncgeneratordrainqueue)(_generator_).
     5.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
12.  Let _onFulfilled_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_fulfilledClosure_, 1, "", « »).
13.  Let _rejectedClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_reason_) that captures _generator_ and performs the following steps when called:
     1.  [Assert](#assert): _generator_._\[\[AsyncGeneratorState\]\]_ is draining-queue.
     2.  Let _result_ be [ThrowCompletion](#sec-throwcompletion)(_reason_).
     3.  Perform [AsyncGeneratorCompleteStep](#sec-asyncgeneratorcompletestep)(_generator_, _result_, true).
     4.  Perform [AsyncGeneratorDrainQueue](#sec-asyncgeneratordrainqueue)(_generator_).
     5.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
14.  Let _onRejected_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_rejectedClosure_, 1, "", « »).
15.  Perform [PerformPromiseThen](#sec-performpromisethen)(_promise_, _onFulfilled_, _onRejected_).
16.  Return unused.


# 27.6.3.10 AsyncGeneratorDrainQueue ( _generator_ )

The abstract operation AsyncGeneratorDrainQueue takes argument _generator_ (an AsyncGenerator) and returns unused. It drains the generator's AsyncGeneratorQueue until it encounters an [AsyncGeneratorRequest](#sec-asyncgeneratorrequest-records) which holds a [return completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  [Assert](#assert): _generator_._\[\[AsyncGeneratorState\]\]_ is draining-queue.
2.  Let _queue_ be _generator_._\[\[AsyncGeneratorQueue\]\]_.
3.  Repeat, while _queue_ is not empty,
    1.  Let _next_ be the first element of _queue_.
    2.  Let _completion_ be [Completion](#sec-completion-ao)(_next_._\[\[Completion\]\]_).
    3.  If _completion_ is a [return completion](#sec-completion-record-specification-type), then
        1.  Perform [AsyncGeneratorAwaitReturn](#sec-asyncgeneratorawaitreturn)(_generator_).
        2.  Return unused.
    4.  Else,
        1.  If _completion_ is a [normal completion](#sec-completion-record-specification-type), then
            1.  Set _completion_ to [NormalCompletion](#sec-normalcompletion)(undefined).
        2.  Perform [AsyncGeneratorCompleteStep](#sec-asyncgeneratorcompletestep)(_generator_, _completion_, true).
4.  Set _generator_._\[\[AsyncGeneratorState\]\]_ to completed.
5.  Return unused.


# 27.7 AsyncFunction Objects

AsyncFunctions are functions that are usually created by evaluating [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration)s, [AsyncFunctionExpression](#prod-AsyncFunctionExpression)s, [AsyncMethod](#prod-AsyncMethod)s, and [AsyncArrowFunction](#prod-AsyncArrowFunction)s. They may also be created by calling the [%AsyncFunction%](#sec-async-function-constructor) intrinsic.


# 27.7.1 The AsyncFunction Constructor

The AsyncFunction [constructor](#constructor):

-   is %AsyncFunction%.
-   is a subclass of `Function`.
-   creates and initializes a new AsyncFunction when called as a function rather than as a [constructor](#constructor). Thus the function call `AsyncFunction(…)` is equivalent to the object creation expression `new AsyncFunction(…)` with the same arguments.
-   may be used as the value of an `extends` clause of a class definition. Subclass [constructors](#constructor) that intend to inherit the specified AsyncFunction behaviour must include a `super` call to the AsyncFunction [constructor](#constructor) to create and initialize a subclass instance with the internal slots necessary for built-in async function behaviour. All ECMAScript syntactic forms for defining async [function objects](#function-object) create direct instances of AsyncFunction. There is no syntactic means to create instances of AsyncFunction subclasses.


# 27.7.1.1 AsyncFunction ( ..._parameterArgs_, _bodyArg_ )

The last argument (if any) specifies the body (executable code) of an async function. Any preceding arguments specify formal parameters.

This function performs the following steps when called:

1.  Let _C_ be the [active function object](#active-function-object).
2.  If _bodyArg_ is not present, set _bodyArg_ to the empty String.
3.  Return ? [CreateDynamicFunction](#sec-createdynamicfunction)(_C_, NewTarget, async, _parameterArgs_, _bodyArg_).

Note

See NOTE for [20.2.1.1](#sec-function-p1-p2-pn-body).


# 27.7.2 Properties of the AsyncFunction Constructor

The AsyncFunction [constructor](#constructor):

-   is a standard built-in [function object](#function-object) that inherits from the Function [constructor](#constructor).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function%](#sec-function-constructor).
-   has a "length" property whose value is 1<sub>𝔽</sub>.
-   has a "name" property whose value is "AsyncFunction".
-   has the following properties:


# 27.7.2.1 AsyncFunction.prototype

The initial value of `AsyncFunction.prototype` is the [AsyncFunction prototype object](#sec-async-function-prototype-properties).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 27.7.3 Properties of the AsyncFunction Prototype Object

The AsyncFunction prototype object:

-   is %AsyncFunction.prototype%.
-   is an [ordinary object](#ordinary-object).
-   is not a [function object](#function-object) and does not have an _\[\[ECMAScriptCode\]\]_ internal slot or any other of the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).


# 27.7.3.1 AsyncFunction.prototype.constructor

The initial value of `AsyncFunction.prototype.constructor` is [%AsyncFunction%](#sec-async-function-constructor).

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.7.3.2 AsyncFunction.prototype \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "AsyncFunction".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 27.7.4 AsyncFunction Instances

Every AsyncFunction instance is an ECMAScript [function object](#function-object) and has the internal slots listed in [Table 28](#table-internal-slots-of-ecmascript-function-objects). The value of the _\[\[IsClassConstructor\]\]_ internal slot for all such instances is false. AsyncFunction instances are not [constructors](#constructor) and do not have a _\[\[Construct\]\]_ internal method. AsyncFunction instances do not have a prototype property as they are not constructable.

Each AsyncFunction instance has the following own properties:


# 27.7.4.1 length

The specification for the "length" property of Function instances given in [20.2.4.1](#sec-function-instances-length) also applies to AsyncFunction instances.


# 27.7.4.2 name

The specification for the "name" property of Function instances given in [20.2.4.2](#sec-function-instances-name) also applies to AsyncFunction instances.


# 27.7.5 Async Functions Abstract Operations


# 27.7.5.1 AsyncFunctionStart ( _promiseCapability_, _asyncFunctionBody_ )

The abstract operation AsyncFunctionStart takes arguments _promiseCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)) and _asyncFunctionBody_ (a [FunctionBody](#prod-FunctionBody) [Parse Node](#sec-syntactic-grammar), an [ExpressionBody](#prod-ExpressionBody) [Parse Node](#sec-syntactic-grammar), or an [Abstract Closure](#sec-abstract-closure) with no parameters) and returns unused. It performs the following steps when called:

1.  Let _runningContext_ be the [running execution context](#running-execution-context).
2.  Let _asyncContext_ be a copy of _runningContext_.
3.  NOTE: Copying the execution state is required for [AsyncBlockStart](#sec-asyncblockstart) to resume its execution. It is ill-defined to resume a currently executing context.
4.  Perform [AsyncBlockStart](#sec-asyncblockstart)(_promiseCapability_, _asyncFunctionBody_, _asyncContext_).
5.  Return unused.


# 27.7.5.2 AsyncBlockStart ( _promiseCapability_, _asyncBody_, _asyncContext_ )

The abstract operation AsyncBlockStart takes arguments _promiseCapability_ (a [PromiseCapability Record](#sec-promisecapability-records)), _asyncBody_ (a [Parse Node](#sec-syntactic-grammar) or an [Abstract Closure](#sec-abstract-closure) with no parameters), and _asyncContext_ (an [execution context](#sec-execution-contexts)) and returns unused. It performs the following steps when called:

1.  Let _runningContext_ be the [running execution context](#running-execution-context).
2.  Let _closure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures _promiseCapability_ and _asyncBody_ and performs the following steps when called:
    1.  Let _acAsyncContext_ be the [running execution context](#running-execution-context).
    2.  If _asyncBody_ is a [Parse Node](#sec-syntactic-grammar), then
        1.  Let _result_ be [Completion](#sec-completion-ao)([Evaluation](#sec-evaluation) of _asyncBody_).
    3.  Else,
        1.  [Assert](#assert): _asyncBody_ is an [Abstract Closure](#sec-abstract-closure) with no parameters.
        2.  Let _result_ be [Completion](#sec-completion-ao)(_asyncBody_()).
    4.  [Assert](#assert): If we return here, the async function either threw an exception or performed an implicit or explicit return; all awaiting is done.
    5.  Remove _acAsyncContext_ from the [execution context stack](#execution-context-stack) and restore the [execution context](#sec-execution-contexts) that is at the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
    6.  If _result_ is a [normal completion](#sec-completion-record-specification-type), then
        1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « undefined »).
    7.  Else if _result_ is a [return completion](#sec-completion-record-specification-type), then
        1.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Resolve\]\]_, undefined, « _result_._\[\[Value\]\]_ »).
    8.  Else,
        1.  [Assert](#assert): _result_ is a [throw completion](#sec-completion-record-specification-type).
        2.  Perform ! [Call](#sec-call)(_promiseCapability_._\[\[Reject\]\]_, undefined, « _result_._\[\[Value\]\]_ »).
    9.  Return [NormalCompletion](#sec-normalcompletion)(unused).
3.  Set the code evaluation state of _asyncContext_ such that when evaluation is resumed for that [execution context](#sec-execution-contexts), _closure_ will be called with no arguments.
4.  Push _asyncContext_ onto the [execution context stack](#execution-context-stack); _asyncContext_ is now the [running execution context](#running-execution-context).
5.  Resume the suspended evaluation of _asyncContext_. Let _result_ be the value returned by the resumed computation.
6.  [Assert](#assert): When we return here, _asyncContext_ has already been removed from the [execution context stack](#execution-context-stack) and _runningContext_ is the currently [running execution context](#running-execution-context).
7.  [Assert](#assert): _result_ is a [normal completion](#sec-completion-record-specification-type) with a value of unused. The possible sources of this value are [Await](#await) or, if the async function doesn't await anything, step [2.i](#step-asyncblockstart-return-undefined) above.
8.  Return unused.


# 27.7.5.3 Await ( _value_ )

The abstract operation Await takes argument _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) either an [ECMAScript language value](#sec-ecmascript-language-types) or empty, or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Let _asyncContext_ be the [running execution context](#running-execution-context).
2.  Let _promise_ be ? [PromiseResolve](#sec-promise-resolve)([%Promise%](#sec-promise-constructor), _value_).
3.  Let _fulfilledClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_v_) that captures _asyncContext_ and performs the following steps when called:
    1.  Let _prevContext_ be the [running execution context](#running-execution-context).
    2.  Suspend _prevContext_.
    3.  Push _asyncContext_ onto the [execution context stack](#execution-context-stack); _asyncContext_ is now the [running execution context](#running-execution-context).
    4.  Resume the suspended evaluation of _asyncContext_ using [NormalCompletion](#sec-normalcompletion)(_v_) as the result of the operation that suspended it.
    5.  [Assert](#assert): When we reach this step, _asyncContext_ has already been removed from the [execution context stack](#execution-context-stack) and _prevContext_ is the currently [running execution context](#running-execution-context).
    6.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
4.  Let _onFulfilled_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_fulfilledClosure_, 1, "", « »).
5.  Let _rejectedClosure_ be a new [Abstract Closure](#sec-abstract-closure) with parameters (_reason_) that captures _asyncContext_ and performs the following steps when called:
    1.  Let _prevContext_ be the [running execution context](#running-execution-context).
    2.  Suspend _prevContext_.
    3.  Push _asyncContext_ onto the [execution context stack](#execution-context-stack); _asyncContext_ is now the [running execution context](#running-execution-context).
    4.  Resume the suspended evaluation of _asyncContext_ using [ThrowCompletion](#sec-throwcompletion)(_reason_) as the result of the operation that suspended it.
    5.  [Assert](#assert): When we reach this step, _asyncContext_ has already been removed from the [execution context stack](#execution-context-stack) and _prevContext_ is the currently [running execution context](#running-execution-context).
    6.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
6.  Let _onRejected_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_rejectedClosure_, 1, "", « »).
7.  Perform [PerformPromiseThen](#sec-performpromisethen)(_promise_, _onFulfilled_, _onRejected_).
8.  Remove _asyncContext_ from the [execution context stack](#execution-context-stack) and restore the [execution context](#sec-execution-contexts) that is at the top of the [execution context stack](#execution-context-stack) as the [running execution context](#running-execution-context).
9.  Let _callerContext_ be the [running execution context](#running-execution-context).
10.  Resume _callerContext_ passing empty. If _asyncContext_ is ever resumed again, let _completion_ be the [Completion Record](#sec-completion-record-specification-type) with which it is resumed.
11.  [Assert](#assert): If control reaches here, then _asyncContext_ is the [running execution context](#running-execution-context) again.
12.  Return _completion_.


# 28 Reflection


# 28.1 The Reflect Object

The Reflect object:

-   is %Reflect%.
-   is the initial value of the "Reflect" property of the [global object](#sec-global-object).
-   is an [ordinary object](#ordinary-object).
-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Object.prototype%](#sec-properties-of-the-object-prototype-object).
-   is not a [function object](#function-object).
-   does not have a _\[\[Construct\]\]_ internal method; it cannot be used as a [constructor](#constructor) with the `new` operator.
-   does not have a _\[\[Call\]\]_ internal method; it cannot be invoked as a function.


# 28.1.1 Reflect.apply ( _target_, _thisArgument_, _argumentsList_ )

This function performs the following steps when called:

1.  If [IsCallable](#sec-iscallable)(_target_) is false, throw a TypeError exception.
2.  Let _args_ be ? [CreateListFromArrayLike](#sec-createlistfromarraylike)(_argumentsList_).
3.  Perform [PrepareForTailCall](#sec-preparefortailcall)().
4.  Return ? [Call](#sec-call)(_target_, _thisArgument_, _args_).


# 28.1.2 Reflect.construct ( _target_, _argumentsList_ \[, _newTarget_ \] )

This function performs the following steps when called:

1.  If [IsConstructor](#sec-isconstructor)(_target_) is false, throw a TypeError exception.
2.  If _newTarget_ is not present, set _newTarget_ to _target_.
3.  Else if [IsConstructor](#sec-isconstructor)(_newTarget_) is false, throw a TypeError exception.
4.  Let _args_ be ? [CreateListFromArrayLike](#sec-createlistfromarraylike)(_argumentsList_).
5.  Return ? [Construct](#sec-construct)(_target_, _args_, _newTarget_).


# 28.1.3 Reflect.defineProperty ( _target_, _propertyKey_, _attributes_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_propertyKey_).
3.  Let _desc_ be ? [ToPropertyDescriptor](#sec-topropertydescriptor)(_attributes_).
4.  Return ? _target_._\[\[DefineOwnProperty\]\]_(_key_, _desc_).


# 28.1.4 Reflect.deleteProperty ( _target_, _propertyKey_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_propertyKey_).
3.  Return ? _target_._\[\[Delete\]\]_(_key_).


# 28.1.5 Reflect.get ( _target_, _propertyKey_ \[, _receiver_ \] )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_propertyKey_).
3.  If _receiver_ is not present, then
    1.  Set _receiver_ to _target_.
4.  Return ? _target_._\[\[Get\]\]_(_key_, _receiver_).


# 28.1.6 Reflect.getOwnPropertyDescriptor ( _target_, _propertyKey_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_propertyKey_).
3.  Let _desc_ be ? _target_._\[\[GetOwnProperty\]\]_(_key_).
4.  Return [FromPropertyDescriptor](#sec-frompropertydescriptor)(_desc_).


# 28.1.7 Reflect.getPrototypeOf ( _target_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Return ? _target_._\[\[GetPrototypeOf\]\]_().


# 28.1.8 Reflect.has ( _target_, _propertyKey_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_propertyKey_).
3.  Return ? _target_._\[\[HasProperty\]\]_(_key_).


# 28.1.9 Reflect.isExtensible ( _target_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Return ? _target_._\[\[IsExtensible\]\]_().


# 28.1.10 Reflect.ownKeys ( _target_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _keys_ be ? _target_._\[\[OwnPropertyKeys\]\]_().
3.  Return [CreateArrayFromList](#sec-createarrayfromlist)(_keys_).


# 28.1.11 Reflect.preventExtensions ( _target_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Return ? _target_._\[\[PreventExtensions\]\]_().


# 28.1.12 Reflect.set ( _target_, _propertyKey_, _V_ \[, _receiver_ \] )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  Let _key_ be ? [ToPropertyKey](#sec-topropertykey)(_propertyKey_).
3.  If _receiver_ is not present, then
    1.  Set _receiver_ to _target_.
4.  Return ? _target_._\[\[Set\]\]_(_key_, _V_, _receiver_).


# 28.1.13 Reflect.setPrototypeOf ( _target_, _proto_ )

This function performs the following steps when called:

1.  If _target_ [is not an Object](#sec-object-type), throw a TypeError exception.
2.  If _proto_ [is not an Object](#sec-object-type) and _proto_ is not null, throw a TypeError exception.
3.  Return ? _target_._\[\[SetPrototypeOf\]\]_(_proto_).


# 28.1.14 Reflect \[%Symbol.toStringTag% \]

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Reflect".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: true }.


# 28.2 Proxy Objects


# 28.2.1 The Proxy Constructor

The Proxy [constructor](#constructor):

-   is %Proxy%.
-   is the initial value of the "Proxy" property of the [global object](#sec-global-object).
-   creates and initializes a new Proxy object when called as a [constructor](#constructor).
-   is not intended to be called as a function and will throw an exception when called in that manner.


# 28.2.1.1 Proxy ( _target_, _handler_ )

This function performs the following steps when called:

1.  If NewTarget is undefined, throw a TypeError exception.
2.  Return ? [ProxyCreate](#sec-proxycreate)(_target_, _handler_).


# 28.2.2 Properties of the Proxy Constructor

The Proxy [constructor](#constructor):

-   has a _\[\[Prototype\]\]_ internal slot whose value is [%Function.prototype%](#sec-properties-of-the-function-prototype-object).
-   does not have a "prototype" property because Proxy objects do not have a _\[\[Prototype\]\]_ internal slot that requires initialization.
-   has the following properties:


# 28.2.2.1 Proxy.revocable ( _target_, _handler_ )

This function creates a revocable Proxy object.

It performs the following steps when called:

1.  Let _proxy_ be ? [ProxyCreate](#sec-proxycreate)(_target_, _handler_).
2.  Let _revokerClosure_ be a new [Abstract Closure](#sec-abstract-closure) with no parameters that captures nothing and performs the following steps when called:
    1.  Let _F_ be the [active function object](#active-function-object).
    2.  Let _p_ be _F_._\[\[RevocableProxy\]\]_.
    3.  If _p_ is null, return [NormalCompletion](#sec-normalcompletion)(undefined).
    4.  Set _F_._\[\[RevocableProxy\]\]_ to null.
    5.  [Assert](#assert): _p_ is a [Proxy exotic object](#proxy-exotic-object).
    6.  Set _p_._\[\[ProxyTarget\]\]_ to null.
    7.  Set _p_._\[\[ProxyHandler\]\]_ to null.
    8.  Return [NormalCompletion](#sec-normalcompletion)(undefined).
3.  Let _revoker_ be [CreateBuiltinFunction](#sec-createbuiltinfunction)(_revokerClosure_, 0, "", « _\[\[RevocableProxy\]\]_ »).
4.  Set _revoker_._\[\[RevocableProxy\]\]_ to _proxy_.
5.  Let _result_ be [OrdinaryObjectCreate](#sec-ordinaryobjectcreate)([%Object.prototype%](#sec-properties-of-the-object-prototype-object)).
6.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_result_, "proxy", _proxy_).
7.  Perform ! [CreateDataPropertyOrThrow](#sec-createdatapropertyorthrow)(_result_, "revoke", _revoker_).
8.  Return _result_.


# 28.3 Module Namespace Objects

A Module Namespace Object is a [module namespace exotic object](#module-namespace-exotic-object) that provides runtime property-based access to a module's exported bindings. There is no [constructor](#constructor) function for Module Namespace Objects. Instead, such an object is created for each module that is imported by an [ImportDeclaration](#prod-ImportDeclaration) that contains a [NameSpaceImport](#prod-NameSpaceImport).

In addition to the properties specified in [10.4.6](#sec-module-namespace-exotic-objects) each Module Namespace Object has the following own property:


# 28.3.1 %Symbol.toStringTag%

The initial value of the [%Symbol.toStringTag%](#sec-well-known-symbols) property is the String value "Module".

This property has the attributes { _\[\[Writable\]\]_: false, _\[\[Enumerable\]\]_: false, _\[\[Configurable\]\]_: false }.


# 29 Memory Model

The memory consistency model, or memory model, specifies the possible orderings of [Shared Data Block events](#sec-memory-model-fundamentals), arising via accessing [TypedArray](#typedarray) instances backed by a SharedArrayBuffer and via methods on the Atomics object. When the program has no data races (defined below), the ordering of events appears as sequentially consistent, i.e., as an interleaving of actions from each [agent](#agent). When the program has data races, shared memory operations may appear sequentially inconsistent. For example, programs may exhibit causality-violating behaviour and other astonishments. These astonishments arise from compiler transforms and the design of CPUs (e.g., out-of-order execution and speculation). The memory model defines both the precise conditions under which a program exhibits sequentially consistent behaviour as well as the possible values read from data races. To wit, there is no undefined behaviour.

The memory model is defined as relational constraints on [Memory events](#sec-memory-model-fundamentals) introduced by [abstract operations](#sec-algorithm-conventions-abstract-operations) on SharedArrayBuffer or by methods on the Atomics object during an evaluation.

Note

This section provides an axiomatic model on [Memory events](#sec-memory-model-fundamentals) introduced by the [abstract operations](#sec-algorithm-conventions-abstract-operations) on SharedArrayBuffers. It bears stressing that the model is not expressible algorithmically, unlike the rest of this specification. The nondeterministic introduction of events by [abstract operations](#sec-algorithm-conventions-abstract-operations) is the interface between the operational semantics of ECMAScript evaluation and the axiomatic semantics of the memory model. The semantics of these events is defined by considering graphs of all events in an evaluation. These are neither Static Semantics nor Runtime Semantics. There is no demonstrated algorithmic implementation, but instead a set of constraints that determine if a particular event graph is allowed or disallowed.


# 29.1 Memory Model Fundamentals

Shared memory accesses (reads and writes) are divided into two groups, atomic accesses and data accesses, defined below. Atomic accesses are sequentially consistent, i.e., there is a strict total ordering of events agreed upon by all [agents](#agent) in an [agent cluster](#sec-agent-clusters). Non-atomic accesses do not have a strict total ordering agreed upon by all [agents](#agent), i.e., unordered.

Note 1

No orderings weaker than sequentially consistent and stronger than unordered, such as release-acquire, are supported.

A Shared Data Block event is either a ReadSharedMemory, WriteSharedMemory, or ReadModifyWriteSharedMemory [Record](#sec-list-and-record-specification-type). A read event is either a ReadSharedMemory or a ReadModifyWriteSharedMemory. A write event is either a WriteSharedMemory or a ReadModifyWriteSharedMemory.

Table 94: [ReadSharedMemory](#sec-memory-model-fundamentals) Event Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Order]]</var></td><td><emu-const>seq-cst</emu-const> or <emu-const>unordered</emu-const></td><td>The weakest ordering guaranteed by the <emu-xref href="#sec-memory-model" id="_ref_16597"><a href="#sec-memory-model">memory model</a></emu-xref> for the event.</td></tr><tr><td><var class="field">[[NoTear]]</var></td><td>a Boolean</td><td>Whether this event is allowed to read from multiple <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16598"><a href="#sec-memory-model-fundamentals">write events</a></emu-xref> with equal <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16599"><a href="#sec-memory-model-fundamentals">memory range</a></emu-xref> as this event.</td></tr><tr><td><var class="field">[[Block]]</var></td><td>a <emu-xref href="#sec-data-blocks" id="_ref_16600"><a href="#sec-data-blocks">Shared Data Block</a></emu-xref></td><td>The block the event operates on.</td></tr><tr><td><var class="field">[[ByteIndex]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_16601"><a href="#integer">integer</a></emu-xref></td><td>The byte address of the read in <var class="field">[[Block]]</var>.</td></tr><tr><td><var class="field">[[ElementSize]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_16602"><a href="#integer">integer</a></emu-xref></td><td>The size of the read.</td></tr></tbody></table>

Table 95: [WriteSharedMemory](#sec-memory-model-fundamentals) Event Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Order]]</var></td><td><emu-const>seq-cst</emu-const>, <emu-const>unordered</emu-const>, or <emu-const>init</emu-const></td><td>The weakest ordering guaranteed by the <emu-xref href="#sec-memory-model" id="_ref_16604"><a href="#sec-memory-model">memory model</a></emu-xref> for the event.</td></tr><tr><td><var class="field">[[NoTear]]</var></td><td>a Boolean</td><td>Whether this event is allowed to be read from multiple <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16605"><a href="#sec-memory-model-fundamentals">read events</a></emu-xref> with equal <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16606"><a href="#sec-memory-model-fundamentals">memory range</a></emu-xref> as this event.</td></tr><tr><td><var class="field">[[Block]]</var></td><td>a <emu-xref href="#sec-data-blocks" id="_ref_16607"><a href="#sec-data-blocks">Shared Data Block</a></emu-xref></td><td>The block the event operates on.</td></tr><tr><td><var class="field">[[ByteIndex]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_16608"><a href="#integer">integer</a></emu-xref></td><td>The byte address of the write in <var class="field">[[Block]]</var>.</td></tr><tr><td><var class="field">[[ElementSize]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_16609"><a href="#integer">integer</a></emu-xref></td><td>The size of the write.</td></tr><tr><td><var class="field">[[Payload]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16610"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16611"><a href="#sec-data-blocks">byte values</a></emu-xref></td><td>The <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16612"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16613"><a href="#sec-data-blocks">byte values</a></emu-xref> to be read by other events.</td></tr></tbody></table>

Table 96: [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) Event Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Order]]</var></td><td><emu-const>seq-cst</emu-const></td><td>Read-modify-<emu-xref href="#sec-memory-model-fundamentals" id="_ref_16615"><a href="#sec-memory-model-fundamentals">write events</a></emu-xref> are always sequentially consistent.</td></tr><tr><td><var class="field">[[NoTear]]</var></td><td><emu-val>true</emu-val></td><td>Read-modify-<emu-xref href="#sec-memory-model-fundamentals" id="_ref_16616"><a href="#sec-memory-model-fundamentals">write events</a></emu-xref> cannot tear.</td></tr><tr><td><var class="field">[[Block]]</var></td><td>a <emu-xref href="#sec-data-blocks" id="_ref_16617"><a href="#sec-data-blocks">Shared Data Block</a></emu-xref></td><td>The block the event operates on.</td></tr><tr><td><var class="field">[[ByteIndex]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_16618"><a href="#integer">integer</a></emu-xref></td><td>The byte address of the read-modify-write in <var class="field">[[Block]]</var>.</td></tr><tr><td><var class="field">[[ElementSize]]</var></td><td>a non-negative <emu-xref href="#integer" id="_ref_16619"><a href="#integer">integer</a></emu-xref></td><td>The size of the read-modify-write.</td></tr><tr><td><var class="field">[[Payload]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16620"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16621"><a href="#sec-data-blocks">byte values</a></emu-xref></td><td>The <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16622"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16623"><a href="#sec-data-blocks">byte values</a></emu-xref> to be passed to <var class="field">[[ModifyOp]]</var>.</td></tr><tr><td><var class="field">[[ModifyOp]]</var></td><td>a <emu-xref href="#sec-arraybuffer-notation" id="_ref_16624"><a href="#sec-arraybuffer-notation">read-modify-write modification function</a></emu-xref></td><td>An abstract closure that returns a modified <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16625"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16626"><a href="#sec-data-blocks">byte values</a></emu-xref> from a read <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16627"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16628"><a href="#sec-data-blocks">byte values</a></emu-xref> and <var class="field">[[Payload]]</var>.</td></tr></tbody></table>

Shared Data Block events are introduced to [candidate execution](#sec-candidate-executions) [Agent Events Records](#sec-agent-event-records) by [abstract operations](#sec-algorithm-conventions-abstract-operations) or by methods on the Atomics object. Some operations also introduce Synchronize events, which have no fields and exist purely to directly constrain the permitted orderings of other events. And finally, there are [host](#host)\-specific events. A Memory event is either a Shared Data Block event, Synchronize event, or such a [host](#host)\-specific event.

Let the memory range of a Shared Data Block event _e_ be the Set of all [integers](#integer) in the [interval](#interval) from _e_._\[\[ByteIndex\]\]_ (inclusive) to _e_._\[\[ByteIndex\]\]_ + _e_._\[\[ElementSize\]\]_ (exclusive). Two events' memory ranges are equal when the events have the same _\[\[Block\]\]_, _\[\[ByteIndex\]\]_, and _\[\[ElementSize\]\]_. Two events' memory ranges are overlapping when the events have the same _\[\[Block\]\]_, the ranges are not equal, and their intersection is non-empty. Two events' memory ranges are disjoint when the events do not have the same _\[\[Block\]\]_ or their ranges are neither equal nor overlapping.

Note 2

Examples of [host](#host)\-specific synchronizing events that should be accounted for are: sending a SharedArrayBuffer from one [agent](#agent) to another (e.g., by `postMessage` in a browser), starting and stopping [agents](#agent), and communicating within the [agent cluster](#sec-agent-clusters) via channels other than shared memory. For a particular execution _execution_, those events are provided by the [host](#host) via the [host-synchronizes-with](#sec-host-synchronizes-with) [strict partial order](#sec-set-and-relation-specification-type). Additionally, [hosts](#host) can add [host](#host)\-specific synchronizing events to _execution_._\[\[EventList\]\]_ so as to participate in the [is-agent-order-before](#sec-agent-order) [Relation](#sec-set-and-relation-specification-type).

Events are ordered within [candidate executions](#sec-candidate-executions) by the relations defined below.


# 29.2 Agent Events Records

An Agent Events Record is a [Record](#sec-list-and-record-specification-type) with the following fields.

Table 97: [Agent Events Record](#sec-agent-event-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[AgentSignifier]]</var></td><td>an <emu-xref href="#sec-agents" id="_ref_16650"><a href="#sec-agents">agent signifier</a></emu-xref></td><td>The <emu-xref href="#agent" id="_ref_16651"><a href="#agent">agent</a></emu-xref> whose evaluation resulted in this ordering.</td></tr><tr><td><var class="field">[[EventList]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16652"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16653"><a href="#sec-memory-model-fundamentals">Memory events</a></emu-xref></td><td>Events are appended to the list during evaluation.</td></tr><tr><td><var class="field">[[AgentSynchronizesWith]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16654"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of pairs of <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16655"><a href="#sec-memory-model-fundamentals">Synchronize events</a></emu-xref></td><td><emu-xref href="#sec-memory-model-fundamentals" id="_ref_16656"><a href="#sec-memory-model-fundamentals">Synchronize</a></emu-xref> relationships introduced by the operational semantics.</td></tr></tbody></table>


# 29.3 Chosen Value Records

A Chosen Value Record is a [Record](#sec-list-and-record-specification-type) with the following fields.

Table 98: [Chosen Value Record](#sec-chosen-value-records) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[Event]]</var></td><td>a <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16659"><a href="#sec-memory-model-fundamentals">Shared Data Block event</a></emu-xref></td><td>The <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16660"><a href="#sec-memory-model-fundamentals">ReadSharedMemory</a></emu-xref> or <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16661"><a href="#sec-memory-model-fundamentals">ReadModifyWriteSharedMemory</a></emu-xref> event that was introduced for this chosen value.</td></tr><tr><td><var class="field">[[ChosenValue]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16662"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16663"><a href="#sec-data-blocks">byte values</a></emu-xref></td><td>The bytes that were nondeterministically chosen during evaluation.</td></tr></tbody></table>


# 29.4 Candidate Executions

A candidate execution of the evaluation of an [agent cluster](#sec-agent-clusters) is a [Record](#sec-list-and-record-specification-type) with the following fields.

Table 99: Candidate Execution [Record](#sec-list-and-record-specification-type) Fields

<table><thead><tr><th>Field Name</th><th>Value</th><th>Meaning</th></tr></thead><tbody><tr><td><var class="field">[[EventsRecords]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16667"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-agent-event-records" id="_ref_16668"><a href="#sec-agent-event-records">Agent Events Records</a></emu-xref></td><td>Maps an <emu-xref href="#agent" id="_ref_16669"><a href="#agent">agent</a></emu-xref> to <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16670"><a href="#sec-list-and-record-specification-type">Lists</a></emu-xref> of <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16671"><a href="#sec-memory-model-fundamentals">Memory events</a></emu-xref> appended during the evaluation.</td></tr><tr><td><var class="field">[[ChosenValues]]</var></td><td>a <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16672"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-chosen-value-records" id="_ref_16673"><a href="#sec-chosen-value-records">Chosen Value Records</a></emu-xref></td><td>Maps <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16674"><a href="#sec-memory-model-fundamentals">ReadSharedMemory</a></emu-xref> or <emu-xref href="#sec-memory-model-fundamentals" id="_ref_16675"><a href="#sec-memory-model-fundamentals">ReadModifyWriteSharedMemory</a></emu-xref> events to the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_16676"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> of <emu-xref href="#sec-data-blocks" id="_ref_16677"><a href="#sec-data-blocks">byte values</a></emu-xref> chosen during the evaluation.</td></tr></tbody></table>

An empty candidate execution is a candidate execution [Record](#sec-list-and-record-specification-type) whose fields are empty [Lists](#sec-list-and-record-specification-type).


# 29.5 Abstract Operations for the Memory Model


# 29.5.1 EventSet ( _execution_ )

The abstract operation EventSet takes argument _execution_ (a [candidate execution](#sec-candidate-executions)) and returns a Set of [Memory events](#sec-memory-model-fundamentals). It performs the following steps when called:

1.  Let _events_ be an empty Set.
2.  For each [Agent Events Record](#sec-agent-event-records) _aer_ of _execution_._\[\[EventsRecords\]\]_, do
    1.  For each [Memory event](#sec-memory-model-fundamentals) _E_ of _aer_._\[\[EventList\]\]_, do
        1.  Add _E_ to _events_.
3.  Return _events_.


# 29.5.2 SharedDataBlockEventSet ( _execution_ )

The abstract operation SharedDataBlockEventSet takes argument _execution_ (a [candidate execution](#sec-candidate-executions)) and returns a Set of [Shared Data Block events](#sec-memory-model-fundamentals). It performs the following steps when called:

1.  Let _events_ be an empty Set.
2.  For each [Memory event](#sec-memory-model-fundamentals) _E_ of [EventSet](#sec-event-set)(_execution_), do
    1.  If _E_ is a [Shared Data Block event](#sec-memory-model-fundamentals), add _E_ to _events_.
3.  Return _events_.


# 29.5.3 HostEventSet ( _execution_ )

The abstract operation HostEventSet takes argument _execution_ (a [candidate execution](#sec-candidate-executions)) and returns a Set of [Memory events](#sec-memory-model-fundamentals). It performs the following steps when called:

1.  Return a new Set containing all elements of [EventSet](#sec-event-set)(_execution_) that are not in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_).


# 29.5.4 ComposeWriteEventBytes ( _execution_, _byteIndex_, _Ws_ )

The abstract operation ComposeWriteEventBytes takes arguments _execution_ (a [candidate execution](#sec-candidate-executions)), _byteIndex_ (a non-negative [integer](#integer)), and _Ws_ (a [List](#sec-list-and-record-specification-type) of either [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) events) and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). It performs the following steps when called:

1.  Let _byteLocation_ be _byteIndex_.
2.  Let _bytesRead_ be a new empty [List](#sec-list-and-record-specification-type).
3.  For each element _W_ of _Ws_, do
    1.  [Assert](#assert): _W_ has _byteLocation_ in its [memory range](#sec-memory-model-fundamentals).
    2.  Let _payloadIndex_ be _byteLocation_ - _W_._\[\[ByteIndex\]\]_.
    3.  If _W_ is a [WriteSharedMemory](#sec-memory-model-fundamentals) event, then
        1.  Let _byte_ be _W_._\[\[Payload\]\]_\[_payloadIndex_\].
    4.  Else,
        1.  [Assert](#assert): _W_ is a [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event.
        2.  Let _bytes_ be [ValueOfReadEvent](#sec-valueofreadevent)(_execution_, _W_).
        3.  Let _bytesModified_ be _W_._\[\[ModifyOp\]\]_(_bytes_, _W_._\[\[Payload\]\]_).
        4.  Let _byte_ be _bytesModified_\[_payloadIndex_\].
    5.  Append _byte_ to _bytesRead_.
    6.  Set _byteLocation_ to _byteLocation_ + 1.
4.  Return _bytesRead_.

Note 1

The read-modify-write modification _\[\[ModifyOp\]\]_ is given by the function properties on the Atomics object that introduce [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) events.

Note 2

This abstract operation composes a [List](#sec-list-and-record-specification-type) of [write events](#sec-memory-model-fundamentals) into a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). It is used in the event semantics of [ReadSharedMemory](#sec-memory-model-fundamentals) and [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) events.


# 29.5.5 ValueOfReadEvent ( _execution_, _R_ )

The abstract operation ValueOfReadEvent takes arguments _execution_ (a [candidate execution](#sec-candidate-executions)) and _R_ (a [ReadSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event) and returns a [List](#sec-list-and-record-specification-type) of [byte values](#sec-data-blocks). It performs the following steps when called:

1.  Let _Ws_ be [reads-bytes-from](#sec-reads-bytes-from)(_R_) in _execution_.
2.  [Assert](#assert): _Ws_ is a [List](#sec-list-and-record-specification-type) of [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) events with length equal to _R_._\[\[ElementSize\]\]_.
3.  Return [ComposeWriteEventBytes](#sec-composewriteeventbytes)(_execution_, _R_._\[\[ByteIndex\]\]_, _Ws_).


# 29.6 Relations of Candidate Executions

The following relations and mathematical functions are parameterized over a particular [candidate execution](#sec-candidate-executions) and order its [Memory events](#sec-memory-model-fundamentals).


# 29.6.1 is-agent-order-before

For a [candidate execution](#sec-candidate-executions) _execution_, its is-agent-order-before [Relation](#sec-set-and-relation-specification-type) is the [least Relation](#least-relation) on [Memory events](#sec-memory-model-fundamentals) that satisfies the following.

-   For events _E_ and _D_, _E_ is-agent-order-before _D_ in _execution_ if there is some [Agent Events Record](#sec-agent-event-records) _aer_ in _execution_._\[\[EventsRecords\]\]_ such that _aer_._\[\[EventList\]\]_ contains both _E_ and _D_ and _E_ is before _D_ in [List](#sec-list-and-record-specification-type) order of _aer_._\[\[EventList\]\]_.

Note

Each [agent](#agent) introduces events in a per-[agent](#agent) [strict total order](#sec-set-and-relation-specification-type) during the evaluation. This is the union of those [strict total orders](#sec-set-and-relation-specification-type).


# 29.6.2 reads-bytes-from

For a [candidate execution](#sec-candidate-executions) _execution_, its *reads-bytes-from* function is a mathematical function mapping [Memory events](#sec-memory-model-fundamentals) in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_) to [Lists](#sec-list-and-record-specification-type) of events in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_) that satisfies the following conditions.

-   For each [ReadSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event _R_ in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_), reads-bytes-from(_R_) in _execution_ is a [List](#sec-list-and-record-specification-type) of length _R_._\[\[ElementSize\]\]_ whose elements are [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) events _Ws_ such that all of the following are true.
    
    -   Each event _W_ with index _i_ in _Ws_ has _R_._\[\[ByteIndex\]\]_ + _i_ in its [memory range](#sec-memory-model-fundamentals).
    -   _R_ is not in _Ws_.

A [candidate execution](#sec-candidate-executions) always admits a reads-bytes-from function.


# 29.6.3 reads-from

For a [candidate execution](#sec-candidate-executions) _execution_, its reads-from [Relation](#sec-set-and-relation-specification-type) is the [least Relation](#least-relation) on [Memory events](#sec-memory-model-fundamentals) that satisfies the following.

-   For events _R_ and _W_, _R_ reads-from _W_ in _execution_ if [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_) contains both _R_ and _W_, and [reads-bytes-from](#sec-reads-bytes-from)(_R_) in _execution_ contains _W_.


# 29.6.4 host-synchronizes-with

For a [candidate execution](#sec-candidate-executions) _execution_, its host-synchronizes-with [Relation](#sec-set-and-relation-specification-type) is a [host](#host)\-provided [strict partial order](#sec-set-and-relation-specification-type) on [host](#host)\-specific [Memory events](#sec-memory-model-fundamentals) that satisfies at least the following.

-   If _E_ host-synchronizes-with _D_ in _execution_, [HostEventSet](#sec-hosteventset)(_execution_) contains _E_ and _D_.
-   There is no cycle in the union of host-synchronizes-with and [is-agent-order-before](#sec-agent-order) in _execution_.

Note 1

For two [host](#host)\-specific events _E_ and _D_ in a [candidate execution](#sec-candidate-executions) _execution_, _E_ host-synchronizes-with _D_ in _execution_ implies _E_ [happens-before](#sec-happens-before) _D_ in _execution_.

Note 2

This [Relation](#sec-set-and-relation-specification-type) allows the [host](#host) to provide additional synchronization mechanisms, such as `postMessage` between HTML workers.


# 29.6.5 synchronizes-with

For a [candidate execution](#sec-candidate-executions) _execution_, its synchronizes-with [Relation](#sec-set-and-relation-specification-type) is the [least Relation](#least-relation) on [Memory events](#sec-memory-model-fundamentals) that satisfies the following.

-   For events _R_ and _W_, _W_ synchronizes-with _R_ in _execution_ if _R_ [reads-from](#sec-reads-from) _W_ in _execution_, _R_._\[\[Order\]\]_ is seq-cst, _W_._\[\[Order\]\]_ is seq-cst, and _R_ and _W_ have equal [memory ranges](#sec-memory-model-fundamentals).
-   For each element _eventsRecord_ of _execution_._\[\[EventsRecords\]\]_, the following is true.
    -   For events _S_ and _Sw_, _S_ synchronizes-with _Sw_ in _execution_ if _eventsRecord_._\[\[AgentSynchronizesWith\]\]_ contains (_S_, _Sw_).
-   For events _E_ and _D_, _E_ synchronizes-with _D_ in _execution_ if _execution_._\[\[HostSynchronizesWith\]\]_ contains (_E_, _D_).

Note 1

Owing to convention in [memory model](#sec-memory-model) literature, in a [candidate execution](#sec-candidate-executions) _execution_, [write events](#sec-memory-model-fundamentals) synchronizes-with [read events](#sec-memory-model-fundamentals), instead of [read events](#sec-memory-model-fundamentals) synchronizes-with [write events](#sec-memory-model-fundamentals).

Note 2

In a [candidate execution](#sec-candidate-executions) _execution_, init events do not participate in this [Relation](#sec-set-and-relation-specification-type) and are instead constrained directly by [happens-before](#sec-happens-before).

Note 3

In a [candidate execution](#sec-candidate-executions) _execution_, not all seq-cst events related by [reads-from](#sec-reads-from) are related by synchronizes-with. Only events that also have equal [memory ranges](#sec-memory-model-fundamentals) are related by synchronizes-with.

Note 4

For [Shared Data Block events](#sec-memory-model-fundamentals) _R_ and _W_ in a [candidate execution](#sec-candidate-executions) _execution_ such that _W_ synchronizes-with _R_, _R_ may [reads-from](#sec-reads-from) other writes than _W_.


# 29.6.6 happens-before

For a [candidate execution](#sec-candidate-executions) _execution_, its happens-before [Relation](#sec-set-and-relation-specification-type) is the [least Relation](#least-relation) on [Memory events](#sec-memory-model-fundamentals) that satisfies the following.

-   For events _E_ and _D_, _E_ happens-before _D_ in _execution_ if any of the following conditions are true.
    
    -   _E_ [is-agent-order-before](#sec-agent-order) _D_ in _execution_.
    -   _E_ [synchronizes-with](#sec-synchronizes-with) _D_ in _execution_.
    -   [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_) contains both _E_ and _D_, _E_._\[\[Order\]\]_ is init, and _E_ and _D_ have overlapping [memory ranges](#sec-memory-model-fundamentals).
    -   There is an event _F_ such that _E_ happens-before _F_ and _F_ happens-before _D_ in _execution_.

Note

Because happens-before is a superset of [agent](#agent)\-order, a [candidate execution](#sec-candidate-executions) is consistent with the single-thread evaluation semantics of ECMAScript.


# 29.7 Properties of Valid Executions


# 29.7.1 Valid Chosen Reads

A [candidate execution](#sec-candidate-executions) _execution_ has valid chosen reads if the following algorithm returns true.

1.  For each [ReadSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event _R_ of [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_), do
    1.  Let _chosenValueRecord_ be the element of _execution_._\[\[ChosenValues\]\]_ whose _\[\[Event\]\]_ field is _R_.
    2.  Let _chosenValue_ be _chosenValueRecord_._\[\[ChosenValue\]\]_.
    3.  Let _readValue_ be [ValueOfReadEvent](#sec-valueofreadevent)(_execution_, _R_).
    4.  Let _chosenLen_ be the number of elements in _chosenValue_.
    5.  Let _readLen_ be the number of elements in _readValue_.
    6.  If _chosenLen_ ≠ _readLen_, then
        1.  Return false.
    7.  If _chosenValue_\[_i_\] ≠ _readValue_\[_i_\] for some [integer](#integer) _i_ in the [interval](#interval) from 0 (inclusive) to _chosenLen_ (exclusive), then
        1.  Return false.
2.  Return true.


# 29.7.2 Coherent Reads

A [candidate execution](#sec-candidate-executions) _execution_ has coherent reads if the following algorithm returns true.

1.  For each [ReadSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event _R_ of [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_), do
    1.  Let _Ws_ be [reads-bytes-from](#sec-reads-bytes-from)(_R_) in _execution_.
    2.  Let _byteLocation_ be _R_._\[\[ByteIndex\]\]_.
    3.  For each element _W_ of _Ws_, do
        1.  If _R_ [happens-before](#sec-happens-before) _W_ in _execution_, then
            1.  Return false.
        2.  If there exists a [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event _V_ that has _byteLocation_ in its [memory range](#sec-memory-model-fundamentals) such that _W_ [happens-before](#sec-happens-before) _V_ in _execution_ and _V_ [happens-before](#sec-happens-before) _R_ in _execution_, then
            1.  Return false.
        3.  Set _byteLocation_ to _byteLocation_ + 1.
2.  Return true.


# 29.7.3 Tear Free Reads

A [candidate execution](#sec-candidate-executions) _execution_ has tear free reads if the following algorithm returns true.

1.  For each [ReadSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event _R_ of [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_), do
    1.  If _R_._\[\[NoTear\]\]_ is true, then
        1.  [Assert](#assert): The remainder of dividing _R_._\[\[ByteIndex\]\]_ by _R_._\[\[ElementSize\]\]_ is 0.
        2.  For each [Memory event](#sec-memory-model-fundamentals) _W_ such that _R_ [reads-from](#sec-reads-from) _W_ in _execution_ and _W_._\[\[NoTear\]\]_ is true, do
            1.  If _R_ and _W_ have equal [memory ranges](#sec-memory-model-fundamentals) and there exists a [Memory event](#sec-memory-model-fundamentals) _V_ such that _V_ and _W_ have equal [memory ranges](#sec-memory-model-fundamentals), _V_._\[\[NoTear\]\]_ is true, _W_ and _V_ are not the same [Shared Data Block event](#sec-memory-model-fundamentals), and _R_ [reads-from](#sec-reads-from) _V_ in _execution_, then
                1.  Return false.
2.  Return true.

Note

A [Shared Data Block event](#sec-memory-model-fundamentals)'s _\[\[NoTear\]\]_ field is true when that event was introduced via accessing an [integer](#integer) [TypedArray](#typedarray), and false when introduced via accessing a floating point [TypedArray](#typedarray) or DataView.

Intuitively, this requirement says when a [memory range](#sec-memory-model-fundamentals) is accessed in an aligned fashion via an [integer](#integer) [TypedArray](#typedarray), a single [write event](#sec-memory-model-fundamentals) on that range must "win" when in a [data race](#sec-data-races) with other [write events](#sec-memory-model-fundamentals) with equal ranges. More precisely, this requirement says an aligned [read event](#sec-memory-model-fundamentals) cannot read a value composed of bytes from multiple, different [write events](#sec-memory-model-fundamentals) all with equal ranges. It is possible, however, for an aligned [read event](#sec-memory-model-fundamentals) to read from multiple [write events](#sec-memory-model-fundamentals) with overlapping ranges.


# 29.7.4 Sequentially Consistent Atomics

For a [candidate execution](#sec-candidate-executions) _execution_, is-memory-order-before is a [strict total order](#sec-set-and-relation-specification-type) of all [Memory events](#sec-memory-model-fundamentals) in [EventSet](#sec-event-set)(_execution_) that satisfies the following.

-   For events _E_ and _D_, _E_ is-memory-order-before _D_ in _execution_ if _E_ [happens-before](#sec-happens-before) _D_ in _execution_.
-   For events _R_ and _W_ such that _R_ [reads-from](#sec-reads-from) _W_ in _execution_, there is no [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event _V_ in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_) such that _V_._\[\[Order\]\]_ is seq-cst, _W_ is-memory-order-before _V_ in _execution_, _V_ is-memory-order-before _R_ in _execution_, and any of the following conditions are true.
    
    -   _W_ [synchronizes-with](#sec-synchronizes-with) _R_ in _execution_, and _V_ and _R_ have equal [memory ranges](#sec-memory-model-fundamentals).
    -   _W_ [happens-before](#sec-happens-before) _R_ and _V_ [happens-before](#sec-happens-before) _R_ in _execution_, _W_._\[\[Order\]\]_ is seq-cst, and _W_ and _V_ have equal [memory ranges](#sec-memory-model-fundamentals).
    -   _W_ [happens-before](#sec-happens-before) _R_ and _W_ [happens-before](#sec-happens-before) _V_ in _execution_, _R_._\[\[Order\]\]_ is seq-cst, and _V_ and _R_ have equal [memory ranges](#sec-memory-model-fundamentals).
    
    Note 1
    
    This clause additionally constrains seq-cst events on equal [memory ranges](#sec-memory-model-fundamentals).
    
-   For each [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) event _W_ in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_), if _W_._\[\[Order\]\]_ is seq-cst, then it is not the case that there is an infinite number of [ReadSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) events in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_) with equal [memory range](#sec-memory-model-fundamentals) that is memory-order before _W_.
    
    Note 2
    
    This clause together with the forward progress guarantee on [agents](#agent) ensure the liveness condition that seq-cst [writes](#sec-memory-model-fundamentals) become visible to seq-cst [reads](#sec-memory-model-fundamentals) with equal [memory range](#sec-memory-model-fundamentals) in [finite](#finite) time.
    

A [candidate execution](#sec-candidate-executions) has sequentially consistent atomics if it admits an is-memory-order-before [Relation](#sec-set-and-relation-specification-type).

Note 3

While is-memory-order-before includes all events in [EventSet](#sec-event-set)(_execution_), those that are not constrained by [happens-before](#sec-happens-before) or [synchronizes-with](#sec-synchronizes-with) in _execution_ are allowed to occur anywhere in the order.


# 29.7.5 Valid Executions

A [candidate execution](#sec-candidate-executions) _execution_ is a valid execution (or simply an execution) if all of the following are true.

-   The [host](#host) provides a [host-synchronizes-with](#sec-host-synchronizes-with) [Relation](#sec-set-and-relation-specification-type) for _execution_.
-   _execution_ admits a [happens-before](#sec-happens-before) [Relation](#sec-set-and-relation-specification-type) that is a [strict partial order](#sec-set-and-relation-specification-type).
-   _execution_ has valid chosen reads.
-   _execution_ has coherent reads.
-   _execution_ has tear free reads.
-   _execution_ has sequentially consistent atomics.

All programs have at least one valid execution.


# 29.8 Races

For an execution _execution_ and events _E_ and _D_ that are contained in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_), _E_ and _D_ are in a *race* if the following algorithm returns true.

1.  If _E_ and _D_ are not the same [Shared Data Block event](#sec-memory-model-fundamentals), then
    1.  If it is not the case that both _E_ [happens-before](#sec-happens-before) _D_ in _execution_ and _D_ [happens-before](#sec-happens-before) _E_ in _execution_, then
        1.  If _E_ and _D_ are both [WriteSharedMemory](#sec-memory-model-fundamentals) or [ReadModifyWriteSharedMemory](#sec-memory-model-fundamentals) events and _E_ and _D_ do not have disjoint [memory ranges](#sec-memory-model-fundamentals), then
            1.  Return true.
        2.  If _E_ [reads-from](#sec-reads-from) _D_ in _execution_ or _D_ [reads-from](#sec-reads-from) _E_ in _execution_, then
            1.  Return true.
2.  Return false.


# 29.9 Data Races

For an execution _execution_ and events _E_ and _D_ that are contained in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_), _E_ and _D_ are in a data race if the following algorithm returns true.

1.  If _E_ and _D_ are in a [race](#sec-races) in _execution_, then
    1.  If _E_._\[\[Order\]\]_ is not seq-cst or _D_._\[\[Order\]\]_ is not seq-cst, then
        1.  Return true.
    2.  If _E_ and _D_ have overlapping [memory ranges](#sec-memory-model-fundamentals), then
        1.  Return true.
2.  Return false.


# 29.10 Data Race Freedom

An execution _execution_ is data race free if there are no two events in [SharedDataBlockEventSet](#sec-sharedatablockeventset)(_execution_) that are in a [data race](#sec-data-races).

A program is data race free if all its executions are data race free.

The [memory model](#sec-memory-model) guarantees sequential consistency of all events for data race free programs.


# 29.11 Shared Memory Guidelines

Note 1

The following are guidelines for ECMAScript programmers working with shared memory.

We recommend programs be kept [data race free](#sec-data-race-freedom), i.e., make it so that it is impossible for there to be concurrent non-atomic operations on the same memory location. [Data race free](#sec-data-race-freedom) programs have interleaving semantics where each step in the evaluation semantics of each [agent](#agent) are interleaved with each other. For [data race free](#sec-data-race-freedom) programs, it is not necessary to understand the details of the [memory model](#sec-memory-model). The details are unlikely to build intuition that will help one to better write ECMAScript.

More generally, even if a program is not [data race free](#sec-data-race-freedom) it may have predictable behaviour, so long as atomic operations are not involved in any data races and the operations that race all have the same access size. The simplest way to arrange for atomics not to be involved in races is to ensure that different memory cells are used by atomic and non-atomic operations and that atomic accesses of different sizes are not used to access the same cells at the same time. Effectively, the program should treat shared memory as strongly typed as much as possible. One still cannot depend on the ordering and timing of non-atomic accesses that race, but if memory is treated as strongly typed the racing accesses will not "tear" (bits of their values will not be mixed).

Note 2

The following are guidelines for ECMAScript implementers writing compiler transformations for programs using shared memory.

It is desirable to allow most program transformations that are valid in a single-[agent](#agent) setting in a multi-[agent](#agent) setting, to ensure that the performance of each [agent](#agent) in a multi-[agent](#agent) program is as good as it would be in a single-[agent](#agent) setting. Frequently these transformations are hard to judge. We outline some rules about program transformations that are intended to be taken as normative (in that they are implied by the [memory model](#sec-memory-model) or stronger than what the [memory model](#sec-memory-model) implies) but which are likely not exhaustive. These rules are intended to apply to program transformations that precede the introductions of the [Memory events](#sec-memory-model-fundamentals) that make up the [is-agent-order-before](#sec-agent-order) [Relation](#sec-set-and-relation-specification-type).

Let an agent-order slice be the subset of the [is-agent-order-before](#sec-agent-order) [Relation](#sec-set-and-relation-specification-type) pertaining to a single [agent](#agent).

Let possible read values of a [read event](#sec-memory-model-fundamentals) be the set of all values of [ValueOfReadEvent](#sec-valueofreadevent) for that event across all valid executions.

Any transformation of an agent-order slice that is valid in the absence of shared memory is valid in the presence of shared memory, with the following exceptions.

-   *Atomics are carved in stone*: Program transformations must not cause any [Shared Data Block events](#sec-memory-model-fundamentals) whose _\[\[Order\]\]_ is seq-cst to be removed from the [is-agent-order-before](#sec-agent-order) [Relation](#sec-set-and-relation-specification-type), nor to be reordered with respect to each other, nor to be reordered inside an agent-order slice with respect to events whose _\[\[Order\]\]_ is unordered.
    
    (In practice, the prohibition on reorderings forces a compiler to assume that every seq-cst operation is a synchronization and included in the final [is-memory-order-before](#sec-memory-order) [Relation](#sec-set-and-relation-specification-type), which it would usually have to assume anyway in the absence of inter-[agent](#agent) program analysis. It also forces the compiler to assume that every call where the callee's effects on the memory-order are unknown may contain seq-cst operations.)
    
-   *Reads must be stable*: Any given shared memory read must only observe a single value in an execution.
    
    (For example, if what is semantically a single read in the program is executed multiple times then the program is subsequently allowed to observe only one of the values read. A transformation known as rematerialization can violate this rule.)
    
-   *Writes must be stable*: All observable writes to shared memory must follow from program semantics in an execution.
    
    (For example, a transformation may not introduce certain observable writes, such as by using read-modify-write operations on a larger location to write a smaller datum, writing a value to memory that the program could not have written, or writing a just-read value back to the location it was read from, if that location could have been overwritten by another [agent](#agent) after the read.)
    
-   *Possible read values must be non-empty*: Program transformations cannot cause the possible read values of a shared memory read to become empty.
    
    (Counterintuitively, this rule in effect restricts transformations on writes, because writes have force in [memory model](#sec-memory-model) insofar as to be read by [read events](#sec-memory-model-fundamentals). For example, writes may be moved and coalesced and sometimes reordered between two seq-cst operations, but the transformation may not remove every write that updates a location; some write must be preserved.)
    

Examples of transformations that remain valid are: merging multiple non-atomic reads from the same location, reordering non-atomic reads, introducing speculative non-atomic reads, merging multiple non-atomic writes to the same location, reordering non-atomic writes to different locations, and hoisting non-atomic reads out of loops even if that affects termination. Note in general that aliased [TypedArrays](#typedarray) make it hard to prove that locations are different.

Note 3

The following are guidelines for ECMAScript implementers generating machine code for shared memory accesses.

For architectures with memory models no weaker than those of ARM or Power, non-atomic stores and loads may be compiled to bare stores and loads on the target architecture. Atomic stores and loads may be compiled down to instructions that guarantee sequential consistency. If no such instructions exist, memory barriers are to be employed, such as placing barriers on both sides of a bare store or load. Read-modify-write operations may be compiled to read-modify-write instructions on the target architecture, such as `LOCK`\-prefixed instructions on x86, load-exclusive/store-exclusive instructions on ARM, and load-link/store-conditional instructions on Power.

Specifically, the [memory model](#sec-memory-model) is intended to allow code generation as follows.

-   Every atomic operation in the program is assumed to be necessary.
-   Atomic operations are never rearranged with each other or with non-atomic operations.
-   Functions are always assumed to perform atomic operations.
-   Atomic operations are never implemented as read-modify-write operations on larger data, but as non-lock-free atomics if the platform does not have atomic operations of the appropriate size. (We already assume that every platform has normal memory access operations of every interesting size.)

Naive code generation uses these patterns:

-   Regular loads and stores compile to single load and store instructions.
-   Lock-free atomic loads and stores compile to a full (sequentially consistent) fence, a regular load or store, and a full fence.
-   Lock-free atomic read-modify-write accesses compile to a full fence, an atomic read-modify-write instruction sequence, and a full fence.
-   Non-lock-free atomics compile to a spinlock acquire, a full fence, a series of non-atomic load and store instructions, a full fence, and a spinlock release.

That mapping is correct so long as an atomic operation on a [memory range](#sec-memory-model-fundamentals) does not race with a non-atomic write or with an atomic operation of different size. However, that is all we need: the [memory model](#sec-memory-model) effectively demotes the atomic operations involved in a race to non-atomic status. On the other hand, the naive mapping is quite strong: it allows atomic operations to be used as sequentially consistent fences, which the [memory model](#sec-memory-model) does not actually guarantee.

Local improvements to those basic patterns are also allowed, subject to the constraints of the [memory model](#sec-memory-model). For example:

-   There are obvious platform-dependent improvements that remove redundant fences. For example, on x86 the fences around lock-free atomic loads and stores can always be omitted except for the fence following a store, and no fence is needed for lock-free read-modify-write instructions, as these all use `LOCK`\-prefixed instructions. On many platforms there are fences of several strengths, and weaker fences can be used in certain contexts without destroying sequential consistency.
-   Most modern platforms support lock-free atomics for all the data sizes required by ECMAScript atomics. Should non-lock-free atomics be needed, the fences surrounding the body of the atomic operation can usually be folded into the lock and unlock steps. The simplest solution for non-lock-free atomics is to have a single lock word per SharedArrayBuffer.
-   There are also more complicated platform-dependent local improvements, requiring some code analysis. For example, two back-to-back fences often have the same effect as a single fence, so if code is generated for two atomic operations in sequence, only a single fence need separate them. On x86, even a single fence separating atomic stores can be omitted, as the fence following a store is only needed to separate the store from a subsequent load.


# Annex A (informative) Grammar Summary


# A.1 Lexical Grammar

[SourceCharacter](#prod-SourceCharacter) :: any Unicode code point [InputElementDiv](#prod-InputElementDiv) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [DivPunctuator](#prod-DivPunctuator) [RightBracePunctuator](#prod-RightBracePunctuator) [InputElementRegExp](#prod-InputElementRegExp) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [RightBracePunctuator](#prod-RightBracePunctuator) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [InputElementRegExpOrTemplateTail](#prod-InputElementRegExpOrTemplateTail) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) [InputElementTemplateTail](#prod-InputElementTemplateTail) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [DivPunctuator](#prod-DivPunctuator) [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) [InputElementHashbangOrRegExp](#prod-InputElementHashbangOrRegExp) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-Comment) [CommonToken](#prod-CommonToken) [HashbangComment](#prod-HashbangComment) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [WhiteSpace](#prod-WhiteSpace) :: <TAB> <VT> <FF> <ZWNBSP> <USP> [LineTerminator](#prod-LineTerminator) :: <LF> <CR> <LS> <PS> [LineTerminatorSequence](#prod-LineTerminatorSequence) :: <LF> <CR> \[lookahead ≠ <LF>\] <LS> <PS> <CR> <LF> [Comment](#prod-Comment) :: [MultiLineComment](#prod-MultiLineComment) [SingleLineComment](#prod-SingleLineComment) [MultiLineComment](#prod-MultiLineComment) :: /\* [MultiLineCommentChars](#prod-MultiLineCommentChars)opt \*/ [MultiLineCommentChars](#prod-MultiLineCommentChars) :: [MultiLineNotAsteriskChar](#prod-MultiLineNotAsteriskChar) [MultiLineCommentChars](#prod-MultiLineCommentChars)opt \* [PostAsteriskCommentChars](#prod-PostAsteriskCommentChars)opt [PostAsteriskCommentChars](#prod-PostAsteriskCommentChars) :: [MultiLineNotForwardSlashOrAsteriskChar](#prod-MultiLineNotForwardSlashOrAsteriskChar) [MultiLineCommentChars](#prod-MultiLineCommentChars)opt \* [PostAsteriskCommentChars](#prod-PostAsteriskCommentChars)opt [MultiLineNotAsteriskChar](#prod-MultiLineNotAsteriskChar) :: [SourceCharacter](#prod-SourceCharacter) but not \* [MultiLineNotForwardSlashOrAsteriskChar](#prod-MultiLineNotForwardSlashOrAsteriskChar) :: [SourceCharacter](#prod-SourceCharacter) but not one of / or \* [SingleLineComment](#prod-SingleLineComment) :: // [SingleLineCommentChars](#prod-SingleLineCommentChars)opt [SingleLineCommentChars](#prod-SingleLineCommentChars) :: [SingleLineCommentChar](#prod-SingleLineCommentChar) [SingleLineCommentChars](#prod-SingleLineCommentChars)opt [SingleLineCommentChar](#prod-SingleLineCommentChar) :: [SourceCharacter](#prod-SourceCharacter) but not [LineTerminator](#prod-LineTerminator) [HashbangComment](#prod-HashbangComment) :: #! [SingleLineCommentChars](#prod-SingleLineCommentChars)opt [CommonToken](#prod-CommonToken) :: [IdentifierName](#prod-IdentifierName) [PrivateIdentifier](#prod-PrivateIdentifier) [Punctuator](#prod-Punctuator) [NumericLiteral](#prod-NumericLiteral) [StringLiteral](#prod-StringLiteral) [Template](#prod-Template) [PrivateIdentifier](#prod-PrivateIdentifier) :: # [IdentifierName](#prod-IdentifierName) [IdentifierName](#prod-IdentifierName) :: [IdentifierStart](#prod-IdentifierStart) [IdentifierName](#prod-IdentifierName) [IdentifierPart](#prod-IdentifierPart) [IdentifierStart](#prod-IdentifierStart) :: [IdentifierStartChar](#prod-IdentifierStartChar) \\ [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [IdentifierPart](#prod-IdentifierPart) :: [IdentifierPartChar](#prod-IdentifierPartChar) \\ [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [IdentifierStartChar](#prod-IdentifierStartChar) :: [UnicodeIDStart](#prod-UnicodeIDStart) $ \_ [IdentifierPartChar](#prod-IdentifierPartChar) :: [UnicodeIDContinue](#prod-UnicodeIDContinue) $ [AsciiLetter](#prod-AsciiLetter) :: one of a b c d e f g h i j k l m n o p q r s t u v w x y z A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [UnicodeIDStart](#prod-UnicodeIDStart) :: any Unicode code point with the Unicode property “ID\_Start” [UnicodeIDContinue](#prod-UnicodeIDContinue) :: any Unicode code point with the Unicode property “ID\_Continue” [ReservedWord](#prod-ReservedWord) :: one of await break case catch class const continue debugger default delete do else enum export extends false finally for function if import in instanceof new null return super switch this throw true try typeof var void while with yield [Punctuator](#prod-Punctuator) :: [OptionalChainingPunctuator](#prod-OptionalChainingPunctuator) [OtherPunctuator](#prod-OtherPunctuator) [OptionalChainingPunctuator](#prod-OptionalChainingPunctuator) :: ?. \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [OtherPunctuator](#prod-OtherPunctuator) :: one of { ( ) \[\] . ... ; , < \> <= \>= \== != \=== !== + \- \* % \*\* ++ \-- << \>> \>>> & | ^ ! ~ && || ?? ? : \= += \-= \*= %= \*\*= <<= \>>= \>>>= &= |= ^= &&= ||= ??= \=> [DivPunctuator](#prod-DivPunctuator) :: / /= [RightBracePunctuator](#prod-RightBracePunctuator) :: } [NullLiteral](#prod-NullLiteral) :: null [BooleanLiteral](#prod-BooleanLiteral) :: true false [NumericLiteralSeparator](#prod-NumericLiteralSeparator) :: \_ [NumericLiteral](#prod-NumericLiteral) :: [DecimalLiteral](#prod-DecimalLiteral) [DecimalBigIntegerLiteral](#prod-DecimalBigIntegerLiteral) [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[+Sep\] [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[+Sep\] [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) [DecimalBigIntegerLiteral](#prod-DecimalBigIntegerLiteral) :: 0 [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [NonZeroDigit](#prod-NonZeroDigit) [DecimalDigits](#prod-DecimalDigits)\[+Sep\]opt [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [NonZeroDigit](#prod-NonZeroDigit) [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[Sep\] :: [BinaryIntegerLiteral](#prod-BinaryIntegerLiteral)\[?Sep\] [OctalIntegerLiteral](#prod-OctalIntegerLiteral)\[?Sep\] [HexIntegerLiteral](#prod-HexIntegerLiteral)\[?Sep\] [BigIntLiteralSuffix](#prod-BigIntLiteralSuffix) :: n [DecimalLiteral](#prod-DecimalLiteral) :: [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) . [DecimalDigits](#prod-DecimalDigits)\[+Sep\]opt [ExponentPart](#prod-ExponentPart)\[+Sep\]opt . [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [ExponentPart](#prod-ExponentPart)\[+Sep\]opt [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) [ExponentPart](#prod-ExponentPart)\[+Sep\]opt [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) :: 0 [NonZeroDigit](#prod-NonZeroDigit) [NonZeroDigit](#prod-NonZeroDigit) [NumericLiteralSeparator](#prod-NumericLiteralSeparator)opt [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) [DecimalDigits](#prod-DecimalDigits)\[Sep\] :: [DecimalDigit](#prod-DecimalDigit) [DecimalDigits](#prod-DecimalDigits)\[?Sep\] [DecimalDigit](#prod-DecimalDigit) \[+Sep\] [DecimalDigits](#prod-DecimalDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) :: one of 0 1 2 3 4 5 6 7 8 9 [NonZeroDigit](#prod-NonZeroDigit) :: one of 1 2 3 4 5 6 7 8 9 [ExponentPart](#prod-ExponentPart)\[Sep\] :: [ExponentIndicator](#prod-ExponentIndicator) [SignedInteger](#prod-SignedInteger)\[?Sep\] [ExponentIndicator](#prod-ExponentIndicator) :: one of e E [SignedInteger](#prod-SignedInteger)\[Sep\] :: [DecimalDigits](#prod-DecimalDigits)\[?Sep\] + [DecimalDigits](#prod-DecimalDigits)\[?Sep\] \- [DecimalDigits](#prod-DecimalDigits)\[?Sep\] [BinaryIntegerLiteral](#prod-BinaryIntegerLiteral)\[Sep\] :: 0b [BinaryDigits](#prod-BinaryDigits)\[?Sep\] 0B [BinaryDigits](#prod-BinaryDigits)\[?Sep\] [BinaryDigits](#prod-BinaryDigits)\[Sep\] :: [BinaryDigit](#prod-BinaryDigit) [BinaryDigits](#prod-BinaryDigits)\[?Sep\] [BinaryDigit](#prod-BinaryDigit) \[+Sep\] [BinaryDigits](#prod-BinaryDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [BinaryDigit](#prod-BinaryDigit) [BinaryDigit](#prod-BinaryDigit) :: one of 0 1 [OctalIntegerLiteral](#prod-OctalIntegerLiteral)\[Sep\] :: 0o [OctalDigits](#prod-OctalDigits)\[?Sep\] 0O [OctalDigits](#prod-OctalDigits)\[?Sep\] [OctalDigits](#prod-OctalDigits)\[Sep\] :: [OctalDigit](#prod-OctalDigit) [OctalDigits](#prod-OctalDigits)\[?Sep\] [OctalDigit](#prod-OctalDigit) \[+Sep\] [OctalDigits](#prod-OctalDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [OctalDigit](#prod-OctalDigit) [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) :: 0 [OctalDigit](#prod-OctalDigit) [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) [OctalDigit](#prod-OctalDigit) [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) :: 0 [NonOctalDigit](#prod-NonOctalDigit) [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) [NonOctalDigit](#prod-NonOctalDigit) [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) [DecimalDigit](#prod-DecimalDigit) [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) :: 0 [OctalDigit](#prod-OctalDigit) [LegacyOctalLikeDecimalIntegerLiteral](#prod-LegacyOctalLikeDecimalIntegerLiteral) [OctalDigit](#prod-OctalDigit) [OctalDigit](#prod-OctalDigit) :: one of 0 1 2 3 4 5 6 7 [NonOctalDigit](#prod-NonOctalDigit) :: one of 8 9 [HexIntegerLiteral](#prod-HexIntegerLiteral)\[Sep\] :: 0x [HexDigits](#prod-HexDigits)\[?Sep\] 0X [HexDigits](#prod-HexDigits)\[?Sep\] [HexDigits](#prod-HexDigits)\[Sep\] :: [HexDigit](#prod-HexDigit) [HexDigits](#prod-HexDigits)\[?Sep\] [HexDigit](#prod-HexDigit) \[+Sep\] [HexDigits](#prod-HexDigits)\[+Sep\] [NumericLiteralSeparator](#prod-NumericLiteralSeparator) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) :: one of 0 1 2 3 4 5 6 7 8 9 a b c d e f A B C D E F [StringLiteral](#prod-StringLiteral) :: " [DoubleStringCharacters](#prod-DoubleStringCharacters)opt " ' [SingleStringCharacters](#prod-SingleStringCharacters)opt ' [DoubleStringCharacters](#prod-DoubleStringCharacters) :: [DoubleStringCharacter](#prod-DoubleStringCharacter) [DoubleStringCharacters](#prod-DoubleStringCharacters)opt [SingleStringCharacters](#prod-SingleStringCharacters) :: [SingleStringCharacter](#prod-SingleStringCharacter) [SingleStringCharacters](#prod-SingleStringCharacters)opt [DoubleStringCharacter](#prod-DoubleStringCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of " or \\ or [LineTerminator](#prod-LineTerminator) <LS> <PS> \\ [EscapeSequence](#prod-EscapeSequence) [LineContinuation](#prod-LineContinuation) [SingleStringCharacter](#prod-SingleStringCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of ' or \\ or [LineTerminator](#prod-LineTerminator) <LS> <PS> \\ [EscapeSequence](#prod-EscapeSequence) [LineContinuation](#prod-LineContinuation) [LineContinuation](#prod-LineContinuation) :: \\ [LineTerminatorSequence](#prod-LineTerminatorSequence) [EscapeSequence](#prod-EscapeSequence) :: [CharacterEscapeSequence](#prod-CharacterEscapeSequence) 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) [HexEscapeSequence](#prod-HexEscapeSequence) [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [CharacterEscapeSequence](#prod-CharacterEscapeSequence) :: [SingleEscapeCharacter](#prod-SingleEscapeCharacter) [NonEscapeCharacter](#prod-NonEscapeCharacter) [SingleEscapeCharacter](#prod-SingleEscapeCharacter) :: one of ' " \\ b f n r t v [NonEscapeCharacter](#prod-NonEscapeCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of [EscapeCharacter](#prod-EscapeCharacter) or [LineTerminator](#prod-LineTerminator) [EscapeCharacter](#prod-EscapeCharacter) :: [SingleEscapeCharacter](#prod-SingleEscapeCharacter) [DecimalDigit](#prod-DecimalDigit) x u [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) :: 0 \[lookahead ∈ { 8, 9 }\] [NonZeroOctalDigit](#prod-NonZeroOctalDigit) \[lookahead ∉ [OctalDigit](#prod-OctalDigit)\] [ZeroToThree](#prod-ZeroToThree) [OctalDigit](#prod-OctalDigit) \[lookahead ∉ [OctalDigit](#prod-OctalDigit)\] [FourToSeven](#prod-FourToSeven) [OctalDigit](#prod-OctalDigit) [ZeroToThree](#prod-ZeroToThree) [OctalDigit](#prod-OctalDigit) [OctalDigit](#prod-OctalDigit) [NonZeroOctalDigit](#prod-NonZeroOctalDigit) :: [OctalDigit](#prod-OctalDigit) but not 0 [ZeroToThree](#prod-ZeroToThree) :: one of 0 1 2 3 [FourToSeven](#prod-FourToSeven) :: one of 4 5 6 7 [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) :: one of 8 9 [HexEscapeSequence](#prod-HexEscapeSequence) :: x [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) :: u [Hex4Digits](#prod-Hex4Digits) u{ [CodePoint](#prod-CodePoint) } [Hex4Digits](#prod-Hex4Digits) :: [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) :: / [RegularExpressionBody](#prod-RegularExpressionBody) / [RegularExpressionFlags](#prod-RegularExpressionFlags) [RegularExpressionBody](#prod-RegularExpressionBody) :: [RegularExpressionFirstChar](#prod-RegularExpressionFirstChar) [RegularExpressionChars](#prod-RegularExpressionChars) [RegularExpressionChars](#prod-RegularExpressionChars) :: \[empty\] [RegularExpressionChars](#prod-RegularExpressionChars) [RegularExpressionChar](#prod-RegularExpressionChar) [RegularExpressionFirstChar](#prod-RegularExpressionFirstChar) :: [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) but not one of \* or \\ or / or \[[RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) [RegularExpressionClass](#prod-RegularExpressionClass) [RegularExpressionChar](#prod-RegularExpressionChar) :: [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) but not one of \\ or / or \[[RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) [RegularExpressionClass](#prod-RegularExpressionClass) [RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) :: \\ [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) :: [SourceCharacter](#prod-SourceCharacter) but not [LineTerminator](#prod-LineTerminator) [RegularExpressionClass](#prod-RegularExpressionClass) :: \[[RegularExpressionClassChars](#prod-RegularExpressionClassChars) \] [RegularExpressionClassChars](#prod-RegularExpressionClassChars) :: \[empty\] [RegularExpressionClassChars](#prod-RegularExpressionClassChars) [RegularExpressionClassChar](#prod-RegularExpressionClassChar) [RegularExpressionClassChar](#prod-RegularExpressionClassChar) :: [RegularExpressionNonTerminator](#prod-RegularExpressionNonTerminator) but not one of \] or \\ [RegularExpressionBackslashSequence](#prod-RegularExpressionBackslashSequence) [RegularExpressionFlags](#prod-RegularExpressionFlags) :: \[empty\] [RegularExpressionFlags](#prod-RegularExpressionFlags) [IdentifierPartChar](#prod-IdentifierPartChar) [Template](#prod-Template) :: [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) [TemplateHead](#prod-TemplateHead) [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) :: \` [TemplateCharacters](#prod-TemplateCharacters)opt \` [TemplateHead](#prod-TemplateHead) :: \` [TemplateCharacters](#prod-TemplateCharacters)opt ${ [TemplateSubstitutionTail](#prod-TemplateSubstitutionTail) :: [TemplateMiddle](#prod-TemplateMiddle) [TemplateTail](#prod-TemplateTail) [TemplateMiddle](#prod-TemplateMiddle) :: } [TemplateCharacters](#prod-TemplateCharacters)opt ${ [TemplateTail](#prod-TemplateTail) :: } [TemplateCharacters](#prod-TemplateCharacters)opt \` [TemplateCharacters](#prod-TemplateCharacters) :: [TemplateCharacter](#prod-TemplateCharacter) [TemplateCharacters](#prod-TemplateCharacters)opt [TemplateCharacter](#prod-TemplateCharacter) :: $ \[lookahead ≠ {\] \\ [TemplateEscapeSequence](#prod-TemplateEscapeSequence) \\ [NotEscapeSequence](#prod-NotEscapeSequence) [LineContinuation](#prod-LineContinuation) [LineTerminatorSequence](#prod-LineTerminatorSequence) [SourceCharacter](#prod-SourceCharacter) but not one of \` or \\ or $ or [LineTerminator](#prod-LineTerminator) [TemplateEscapeSequence](#prod-TemplateEscapeSequence) :: [CharacterEscapeSequence](#prod-CharacterEscapeSequence) 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [HexEscapeSequence](#prod-HexEscapeSequence) [UnicodeEscapeSequence](#prod-UnicodeEscapeSequence) [NotEscapeSequence](#prod-NotEscapeSequence) :: 0 [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) but not 0 x \[lookahead ∉ [HexDigit](#prod-HexDigit)\] x [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u \[lookahead ∉ [HexDigit](#prod-HexDigit)\] \[lookahead ≠ {\] u [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) [HexDigit](#prod-HexDigit) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u { \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u { [NotCodePoint](#prod-NotCodePoint) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] u { [CodePoint](#prod-CodePoint) \[lookahead ∉ [HexDigit](#prod-HexDigit)\] \[lookahead ≠ }\] [NotCodePoint](#prod-NotCodePoint) :: [HexDigits](#prod-HexDigits)\[~Sep\] but only if the MV of [HexDigits](#prod-HexDigits) > 0x10FFFF [CodePoint](#prod-CodePoint) :: [HexDigits](#prod-HexDigits)\[~Sep\] but only if the MV of [HexDigits](#prod-HexDigits) ≤ 0x10FFFF


# A.2 Expressions

[IdentifierReference](#prod-IdentifierReference)\[Yield, Await\] : [Identifier](#prod-Identifier) \[~Yield\] yield \[~Await\] await [BindingIdentifier](#prod-BindingIdentifier)\[Yield, Await\] : [Identifier](#prod-Identifier) yield await [LabelIdentifier](#prod-LabelIdentifier)\[Yield, Await\] : [Identifier](#prod-Identifier) \[~Yield\] yield \[~Await\] await [Identifier](#prod-Identifier) : [IdentifierName](#prod-IdentifierName) but not [ReservedWord](#prod-ReservedWord) [PrimaryExpression](#prod-PrimaryExpression)\[Yield, Await\] : this [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [Literal](#prod-Literal) [ArrayLiteral](#prod-ArrayLiteral)\[?Yield, ?Await\] [ObjectLiteral](#prod-ObjectLiteral)\[?Yield, ?Await\] [FunctionExpression](#prod-FunctionExpression) [ClassExpression](#prod-ClassExpression)\[?Yield, ?Await\] [GeneratorExpression](#prod-GeneratorExpression) [AsyncFunctionExpression](#prod-AsyncFunctionExpression) [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, ~Tagged\] [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\] [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[Yield, Await\] : ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] , ) ( ) ( ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ) ( ... [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] ) ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] , ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ) ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] , ... [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] )

When processing an instance of the production  
[PrimaryExpression](#prod-PrimaryExpression)\[Yield, Await\] : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\]  
the interpretation of [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) is refined using the following grammar:

[ParenthesizedExpression](#prod-ParenthesizedExpression)\[Yield, Await\] : ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] )

[Literal](#prod-Literal) : [NullLiteral](#prod-NullLiteral) [BooleanLiteral](#prod-BooleanLiteral) [NumericLiteral](#prod-NumericLiteral) [StringLiteral](#prod-StringLiteral) [ArrayLiteral](#prod-ArrayLiteral)\[Yield, Await\] : \[[Elision](#prod-Elision)opt \] \[[ElementList](#prod-ElementList)\[?Yield, ?Await\] \] \[[ElementList](#prod-ElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt \] [ElementList](#prod-ElementList)\[Yield, Await\] : [Elision](#prod-Elision)opt [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [Elision](#prod-Elision)opt [SpreadElement](#prod-SpreadElement)\[?Yield, ?Await\] [ElementList](#prod-ElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [ElementList](#prod-ElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [SpreadElement](#prod-SpreadElement)\[?Yield, ?Await\] [Elision](#prod-Elision) : , [Elision](#prod-Elision) , [SpreadElement](#prod-SpreadElement)\[Yield, Await\] : ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [ObjectLiteral](#prod-ObjectLiteral)\[Yield, Await\] : { } { [PropertyDefinitionList](#prod-PropertyDefinitionList)\[?Yield, ?Await\] } { [PropertyDefinitionList](#prod-PropertyDefinitionList)\[?Yield, ?Await\] , } [PropertyDefinitionList](#prod-PropertyDefinitionList)\[Yield, Await\] : [PropertyDefinition](#prod-PropertyDefinition)\[?Yield, ?Await\] [PropertyDefinitionList](#prod-PropertyDefinitionList)\[?Yield, ?Await\] , [PropertyDefinition](#prod-PropertyDefinition)\[?Yield, ?Await\] [PropertyDefinition](#prod-PropertyDefinition)\[Yield, Await\] : [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [CoverInitializedName](#prod-CoverInitializedName)\[?Yield, ?Await\] [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [MethodDefinition](#prod-MethodDefinition)\[?Yield, ?Await\] ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [PropertyName](#prod-PropertyName)\[Yield, Await\] : [LiteralPropertyName](#prod-LiteralPropertyName) [ComputedPropertyName](#prod-ComputedPropertyName)\[?Yield, ?Await\] [LiteralPropertyName](#prod-LiteralPropertyName) : [IdentifierName](#prod-IdentifierName) [StringLiteral](#prod-StringLiteral) [NumericLiteral](#prod-NumericLiteral) [ComputedPropertyName](#prod-ComputedPropertyName)\[Yield, Await\] : \[[AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] \] [CoverInitializedName](#prod-CoverInitializedName)\[Yield, Await\] : [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\] [Initializer](#prod-Initializer)\[In, Yield, Await\] : \= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [TemplateLiteral](#prod-TemplateLiteral)\[Yield, Await, Tagged\] : [NoSubstitutionTemplate](#prod-NoSubstitutionTemplate) [SubstitutionTemplate](#prod-SubstitutionTemplate)\[?Yield, ?Await, ?Tagged\] [SubstitutionTemplate](#prod-SubstitutionTemplate)\[Yield, Await, Tagged\] : [TemplateHead](#prod-TemplateHead) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] [TemplateSpans](#prod-TemplateSpans)\[?Yield, ?Await, ?Tagged\] [TemplateSpans](#prod-TemplateSpans)\[Yield, Await, Tagged\] : [TemplateTail](#prod-TemplateTail) [TemplateMiddleList](#prod-TemplateMiddleList)\[?Yield, ?Await, ?Tagged\] [TemplateTail](#prod-TemplateTail) [TemplateMiddleList](#prod-TemplateMiddleList)\[Yield, Await, Tagged\] : [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] [TemplateMiddleList](#prod-TemplateMiddleList)\[?Yield, ?Await, ?Tagged\] [TemplateMiddle](#prod-TemplateMiddle) [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] [MemberExpression](#prod-MemberExpression)\[Yield, Await\] : [PrimaryExpression](#prod-PrimaryExpression)\[?Yield, ?Await\] [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] . [IdentifierName](#prod-IdentifierName) [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] [SuperProperty](#prod-SuperProperty)\[?Yield, ?Await\] [MetaProperty](#prod-MetaProperty) new [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\] [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] . [PrivateIdentifier](#prod-PrivateIdentifier) [SuperProperty](#prod-SuperProperty)\[Yield, Await\] : super \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] super . [IdentifierName](#prod-IdentifierName) [MetaProperty](#prod-MetaProperty) : [NewTarget](#prod-NewTarget) [ImportMeta](#prod-ImportMeta) [NewTarget](#prod-NewTarget) : new . target [ImportMeta](#prod-ImportMeta) : import . meta [NewExpression](#prod-NewExpression)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] new [NewExpression](#prod-NewExpression)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[Yield, Await\] : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[?Yield, ?Await\] [SuperCall](#prod-SuperCall)\[?Yield, ?Await\] [ImportCall](#prod-ImportCall)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] . [IdentifierName](#prod-IdentifierName) [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] . [PrivateIdentifier](#prod-PrivateIdentifier)

When processing an instance of the production  
[CallExpression](#prod-CallExpression)\[Yield, Await\] : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[?Yield, ?Await\]  
the interpretation of [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) is refined using the following grammar:

[CallMemberExpression](#prod-CallMemberExpression)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\]

[SuperCall](#prod-SuperCall)\[Yield, Await\] : super [Arguments](#prod-Arguments)\[?Yield, ?Await\] [ImportCall](#prod-ImportCall)\[Yield, Await\] : import ( [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ,opt ) import ( [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] , [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ,opt ) [Arguments](#prod-Arguments)\[Yield, Await\] : ( ) ( [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] ) ( [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] , ) [ArgumentList](#prod-ArgumentList)\[Yield, Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] , [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [ArgumentList](#prod-ArgumentList)\[?Yield, ?Await\] , ... [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] [OptionalExpression](#prod-OptionalExpression)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [OptionalExpression](#prod-OptionalExpression)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[Yield, Await\] : ?. [Arguments](#prod-Arguments)\[?Yield, ?Await\] ?. \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] ?. [IdentifierName](#prod-IdentifierName) ?. [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] ?. [PrivateIdentifier](#prod-PrivateIdentifier) [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] \[[Expression](#prod-Expression)\[+In, ?Yield, ?Await\] \] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] . [IdentifierName](#prod-IdentifierName) [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] [TemplateLiteral](#prod-TemplateLiteral)\[?Yield, ?Await, +Tagged\] [OptionalChain](#prod-OptionalChain)\[?Yield, ?Await\] . [PrivateIdentifier](#prod-PrivateIdentifier) [LeftHandSideExpression](#prod-LeftHandSideExpression)\[Yield, Await\] : [NewExpression](#prod-NewExpression)\[?Yield, ?Await\] [CallExpression](#prod-CallExpression)\[?Yield, ?Await\] [OptionalExpression](#prod-OptionalExpression)\[?Yield, ?Await\] [UpdateExpression](#prod-UpdateExpression)\[Yield, Await\] : [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] ++ [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \-- ++ [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] \-- [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] [UnaryExpression](#prod-UnaryExpression)\[Yield, Await\] : [UpdateExpression](#prod-UpdateExpression)\[?Yield, ?Await\] delete [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] void [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] typeof [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] + [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] \- [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] ~ [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] ! [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] \[+Await\] [AwaitExpression](#prod-AwaitExpression)\[?Yield\] [ExponentiationExpression](#prod-ExponentiationExpression)\[Yield, Await\] : [UnaryExpression](#prod-UnaryExpression)\[?Yield, ?Await\] [UpdateExpression](#prod-UpdateExpression)\[?Yield, ?Await\] \*\* [ExponentiationExpression](#prod-ExponentiationExpression)\[?Yield, ?Await\] [MultiplicativeExpression](#prod-MultiplicativeExpression)\[Yield, Await\] : [ExponentiationExpression](#prod-ExponentiationExpression)\[?Yield, ?Await\] [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\] [MultiplicativeOperator](#prod-MultiplicativeOperator) [ExponentiationExpression](#prod-ExponentiationExpression)\[?Yield, ?Await\] [MultiplicativeOperator](#prod-MultiplicativeOperator) : one of \* / % [AdditiveExpression](#prod-AdditiveExpression)\[Yield, Await\] : [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\] [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] + [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\] [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] \- [MultiplicativeExpression](#prod-MultiplicativeExpression)\[?Yield, ?Await\] [ShiftExpression](#prod-ShiftExpression)\[Yield, Await\] : [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] << [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \>> [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \>>> [AdditiveExpression](#prod-AdditiveExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[In, Yield, Await\] : [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] < [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] \> [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] <= [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] \>= [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] instanceof [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \[+In\] [RelationalExpression](#prod-RelationalExpression)\[+In, ?Yield, ?Await\] in [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] \[+In\] [PrivateIdentifier](#prod-PrivateIdentifier) in [ShiftExpression](#prod-ShiftExpression)\[?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[In, Yield, Await\] : [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] \== [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] != [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] \=== [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] !== [RelationalExpression](#prod-RelationalExpression)\[?In, ?Yield, ?Await\] [BitwiseANDExpression](#prod-BitwiseANDExpression)\[In, Yield, Await\] : [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] [BitwiseANDExpression](#prod-BitwiseANDExpression)\[?In, ?Yield, ?Await\] & [EqualityExpression](#prod-EqualityExpression)\[?In, ?Yield, ?Await\] [BitwiseXORExpression](#prod-BitwiseXORExpression)\[In, Yield, Await\] : [BitwiseANDExpression](#prod-BitwiseANDExpression)\[?In, ?Yield, ?Await\] [BitwiseXORExpression](#prod-BitwiseXORExpression)\[?In, ?Yield, ?Await\] ^ [BitwiseANDExpression](#prod-BitwiseANDExpression)\[?In, ?Yield, ?Await\] [BitwiseORExpression](#prod-BitwiseORExpression)\[In, Yield, Await\] : [BitwiseXORExpression](#prod-BitwiseXORExpression)\[?In, ?Yield, ?Await\] [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] | [BitwiseXORExpression](#prod-BitwiseXORExpression)\[?In, ?Yield, ?Await\] [LogicalANDExpression](#prod-LogicalANDExpression)\[In, Yield, Await\] : [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [LogicalANDExpression](#prod-LogicalANDExpression)\[?In, ?Yield, ?Await\] && [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [LogicalORExpression](#prod-LogicalORExpression)\[In, Yield, Await\] : [LogicalANDExpression](#prod-LogicalANDExpression)\[?In, ?Yield, ?Await\] [LogicalORExpression](#prod-LogicalORExpression)\[?In, ?Yield, ?Await\] || [LogicalANDExpression](#prod-LogicalANDExpression)\[?In, ?Yield, ?Await\] [CoalesceExpression](#prod-CoalesceExpression)\[In, Yield, Await\] : [CoalesceExpressionHead](#prod-CoalesceExpressionHead)\[?In, ?Yield, ?Await\] ?? [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [CoalesceExpressionHead](#prod-CoalesceExpressionHead)\[In, Yield, Await\] : [CoalesceExpression](#prod-CoalesceExpression)\[?In, ?Yield, ?Await\] [BitwiseORExpression](#prod-BitwiseORExpression)\[?In, ?Yield, ?Await\] [ShortCircuitExpression](#prod-ShortCircuitExpression)\[In, Yield, Await\] : [LogicalORExpression](#prod-LogicalORExpression)\[?In, ?Yield, ?Await\] [CoalesceExpression](#prod-CoalesceExpression)\[?In, ?Yield, ?Await\] [ConditionalExpression](#prod-ConditionalExpression)\[In, Yield, Await\] : [ShortCircuitExpression](#prod-ShortCircuitExpression)\[?In, ?Yield, ?Await\] [ShortCircuitExpression](#prod-ShortCircuitExpression)\[?In, ?Yield, ?Await\] ? [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [AssignmentExpression](#prod-AssignmentExpression)\[In, Yield, Await\] : [ConditionalExpression](#prod-ConditionalExpression)\[?In, ?Yield, ?Await\] \[+Yield\] [YieldExpression](#prod-YieldExpression)\[?In, ?Await\] [ArrowFunction](#prod-ArrowFunction)\[?In, ?Yield, ?Await\] [AsyncArrowFunction](#prod-AsyncArrowFunction)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] [AssignmentOperator](#prod-AssignmentOperator) [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] &&= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] ||= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] ??= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [AssignmentOperator](#prod-AssignmentOperator) : one of \*= /= %= += \-= <<= \>>= \>>>= &= ^= |= \*\*=

In certain circumstances when processing an instance of the production  
[AssignmentExpression](#prod-AssignmentExpression)\[In, Yield, Await\] : [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] \= [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\]  
the interpretation of [LeftHandSideExpression](#prod-LeftHandSideExpression) is refined using the following grammar:

[AssignmentPattern](#prod-AssignmentPattern)\[Yield, Await\] : [ObjectAssignmentPattern](#prod-ObjectAssignmentPattern)\[?Yield, ?Await\] [ArrayAssignmentPattern](#prod-ArrayAssignmentPattern)\[?Yield, ?Await\] [ObjectAssignmentPattern](#prod-ObjectAssignmentPattern)\[Yield, Await\] : { } { [AssignmentRestProperty](#prod-AssignmentRestProperty)\[?Yield, ?Await\] } { [AssignmentPropertyList](#prod-AssignmentPropertyList)\[?Yield, ?Await\] } { [AssignmentPropertyList](#prod-AssignmentPropertyList)\[?Yield, ?Await\] , [AssignmentRestProperty](#prod-AssignmentRestProperty)\[?Yield, ?Await\]opt } [ArrayAssignmentPattern](#prod-ArrayAssignmentPattern)\[Yield, Await\] : \[[Elision](#prod-Elision)opt [AssignmentRestElement](#prod-AssignmentRestElement)\[?Yield, ?Await\]opt \] \[[AssignmentElementList](#prod-AssignmentElementList)\[?Yield, ?Await\] \] \[[AssignmentElementList](#prod-AssignmentElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [AssignmentRestElement](#prod-AssignmentRestElement)\[?Yield, ?Await\]opt \] [AssignmentRestProperty](#prod-AssignmentRestProperty)\[Yield, Await\] : ... [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[?Yield, ?Await\] [AssignmentPropertyList](#prod-AssignmentPropertyList)\[Yield, Await\] : [AssignmentProperty](#prod-AssignmentProperty)\[?Yield, ?Await\] [AssignmentPropertyList](#prod-AssignmentPropertyList)\[?Yield, ?Await\] , [AssignmentProperty](#prod-AssignmentProperty)\[?Yield, ?Await\] [AssignmentElementList](#prod-AssignmentElementList)\[Yield, Await\] : [AssignmentElisionElement](#prod-AssignmentElisionElement)\[?Yield, ?Await\] [AssignmentElementList](#prod-AssignmentElementList)\[?Yield, ?Await\] , [AssignmentElisionElement](#prod-AssignmentElisionElement)\[?Yield, ?Await\] [AssignmentElisionElement](#prod-AssignmentElisionElement)\[Yield, Await\] : [Elision](#prod-Elision)opt [AssignmentElement](#prod-AssignmentElement)\[?Yield, ?Await\] [AssignmentProperty](#prod-AssignmentProperty)\[Yield, Await\] : [IdentifierReference](#prod-IdentifierReference)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] : [AssignmentElement](#prod-AssignmentElement)\[?Yield, ?Await\] [AssignmentElement](#prod-AssignmentElement)\[Yield, Await\] : [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [AssignmentRestElement](#prod-AssignmentRestElement)\[Yield, Await\] : ... [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[?Yield, ?Await\] [DestructuringAssignmentTarget](#prod-DestructuringAssignmentTarget)\[Yield, Await\] : [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\]

[Expression](#prod-Expression)\[In, Yield, Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\] [Expression](#prod-Expression)\[?In, ?Yield, ?Await\] , [AssignmentExpression](#prod-AssignmentExpression)\[?In, ?Yield, ?Await\]


# A.3 Statements

[Statement](#prod-Statement)\[Yield, Await, Return\] : [BlockStatement](#prod-BlockStatement)\[?Yield, ?Await, ?Return\] [VariableStatement](#prod-VariableStatement)\[?Yield, ?Await\] [EmptyStatement](#prod-EmptyStatement) [ExpressionStatement](#prod-ExpressionStatement)\[?Yield, ?Await\] [IfStatement](#prod-IfStatement)\[?Yield, ?Await, ?Return\] [BreakableStatement](#prod-BreakableStatement)\[?Yield, ?Await, ?Return\] [ContinueStatement](#prod-ContinueStatement)\[?Yield, ?Await\] [BreakStatement](#prod-BreakStatement)\[?Yield, ?Await\] \[+Return\] [ReturnStatement](#prod-ReturnStatement)\[?Yield, ?Await\] [WithStatement](#prod-WithStatement)\[?Yield, ?Await, ?Return\] [LabelledStatement](#prod-LabelledStatement)\[?Yield, ?Await, ?Return\] [ThrowStatement](#prod-ThrowStatement)\[?Yield, ?Await\] [TryStatement](#prod-TryStatement)\[?Yield, ?Await, ?Return\] [DebuggerStatement](#prod-DebuggerStatement) [Declaration](#prod-Declaration)\[Yield, Await\] : [HoistableDeclaration](#prod-HoistableDeclaration)\[?Yield, ?Await, ~Default\] [ClassDeclaration](#prod-ClassDeclaration)\[?Yield, ?Await, ~Default\] [LexicalDeclaration](#prod-LexicalDeclaration)\[+In, ?Yield, ?Await\] [HoistableDeclaration](#prod-HoistableDeclaration)\[Yield, Await, Default\] : [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ?Default\] [GeneratorDeclaration](#prod-GeneratorDeclaration)\[?Yield, ?Await, ?Default\] [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration)\[?Yield, ?Await, ?Default\] [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration)\[?Yield, ?Await, ?Default\] [BreakableStatement](#prod-BreakableStatement)\[Yield, Await, Return\] : [IterationStatement](#prod-IterationStatement)\[?Yield, ?Await, ?Return\] [SwitchStatement](#prod-SwitchStatement)\[?Yield, ?Await, ?Return\] [BlockStatement](#prod-BlockStatement)\[Yield, Await, Return\] : [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Block](#prod-Block)\[Yield, Await, Return\] : { [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\]opt } [StatementList](#prod-StatementList)\[Yield, Await, Return\] : [StatementListItem](#prod-StatementListItem)\[?Yield, ?Await, ?Return\] [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\] [StatementListItem](#prod-StatementListItem)\[?Yield, ?Await, ?Return\] [StatementListItem](#prod-StatementListItem)\[Yield, Await, Return\] : [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [Declaration](#prod-Declaration)\[?Yield, ?Await\] [LexicalDeclaration](#prod-LexicalDeclaration)\[In, Yield, Await\] : [LetOrConst](#prod-LetOrConst) [BindingList](#prod-BindingList)\[?In, ?Yield, ?Await\] ; [LetOrConst](#prod-LetOrConst) : let const [BindingList](#prod-BindingList)\[In, Yield, Await\] : [LexicalBinding](#prod-LexicalBinding)\[?In, ?Yield, ?Await\] [BindingList](#prod-BindingList)\[?In, ?Yield, ?Await\] , [LexicalBinding](#prod-LexicalBinding)\[?In, ?Yield, ?Await\] [LexicalBinding](#prod-LexicalBinding)\[In, Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\]opt [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\] [VariableStatement](#prod-VariableStatement)\[Yield, Await\] : var [VariableDeclarationList](#prod-VariableDeclarationList)\[+In, ?Yield, ?Await\] ; [VariableDeclarationList](#prod-VariableDeclarationList)\[In, Yield, Await\] : [VariableDeclaration](#prod-VariableDeclaration)\[?In, ?Yield, ?Await\] [VariableDeclarationList](#prod-VariableDeclarationList)\[?In, ?Yield, ?Await\] , [VariableDeclaration](#prod-VariableDeclaration)\[?In, ?Yield, ?Await\] [VariableDeclaration](#prod-VariableDeclaration)\[In, Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\]opt [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[?In, ?Yield, ?Await\] [BindingPattern](#prod-BindingPattern)\[Yield, Await\] : [ObjectBindingPattern](#prod-ObjectBindingPattern)\[?Yield, ?Await\] [ArrayBindingPattern](#prod-ArrayBindingPattern)\[?Yield, ?Await\] [ObjectBindingPattern](#prod-ObjectBindingPattern)\[Yield, Await\] : { } { [BindingRestProperty](#prod-BindingRestProperty)\[?Yield, ?Await\] } { [BindingPropertyList](#prod-BindingPropertyList)\[?Yield, ?Await\] } { [BindingPropertyList](#prod-BindingPropertyList)\[?Yield, ?Await\] , [BindingRestProperty](#prod-BindingRestProperty)\[?Yield, ?Await\]opt } [ArrayBindingPattern](#prod-ArrayBindingPattern)\[Yield, Await\] : \[[Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement)\[?Yield, ?Await\]opt \] \[[BindingElementList](#prod-BindingElementList)\[?Yield, ?Await\] \] \[[BindingElementList](#prod-BindingElementList)\[?Yield, ?Await\] , [Elision](#prod-Elision)opt [BindingRestElement](#prod-BindingRestElement)\[?Yield, ?Await\]opt \] [BindingRestProperty](#prod-BindingRestProperty)\[Yield, Await\] : ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [BindingPropertyList](#prod-BindingPropertyList)\[Yield, Await\] : [BindingProperty](#prod-BindingProperty)\[?Yield, ?Await\] [BindingPropertyList](#prod-BindingPropertyList)\[?Yield, ?Await\] , [BindingProperty](#prod-BindingProperty)\[?Yield, ?Await\] [BindingElementList](#prod-BindingElementList)\[Yield, Await\] : [BindingElisionElement](#prod-BindingElisionElement)\[?Yield, ?Await\] [BindingElementList](#prod-BindingElementList)\[?Yield, ?Await\] , [BindingElisionElement](#prod-BindingElisionElement)\[?Yield, ?Await\] [BindingElisionElement](#prod-BindingElisionElement)\[Yield, Await\] : [Elision](#prod-Elision)opt [BindingElement](#prod-BindingElement)\[?Yield, ?Await\] [BindingProperty](#prod-BindingProperty)\[Yield, Await\] : [SingleNameBinding](#prod-SingleNameBinding)\[?Yield, ?Await\] [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] : [BindingElement](#prod-BindingElement)\[?Yield, ?Await\] [BindingElement](#prod-BindingElement)\[Yield, Await\] : [SingleNameBinding](#prod-SingleNameBinding)\[?Yield, ?Await\] [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [SingleNameBinding](#prod-SingleNameBinding)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [BindingRestElement](#prod-BindingRestElement)\[Yield, Await\] : ... [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ... [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [EmptyStatement](#prod-EmptyStatement) : ; [ExpressionStatement](#prod-ExpressionStatement)\[Yield, Await\] : \[lookahead ∉ { {, function, async \[no [LineTerminator](#prod-LineTerminator) here\] function, class, let \[}\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ; [IfStatement](#prod-IfStatement)\[Yield, Await, Return\] : if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] else [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[lookahead ≠ else\] [IterationStatement](#prod-IterationStatement)\[Yield, Await, Return\] : [DoWhileStatement](#prod-DoWhileStatement)\[?Yield, ?Await, ?Return\] [WhileStatement](#prod-WhileStatement)\[?Yield, ?Await, ?Return\] [ForStatement](#prod-ForStatement)\[?Yield, ?Await, ?Return\] [ForInOfStatement](#prod-ForInOfStatement)\[?Yield, ?Await, ?Return\] [DoWhileStatement](#prod-DoWhileStatement)\[Yield, Await, Return\] : do [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] while ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) ; [WhileStatement](#prod-WhileStatement)\[Yield, Await, Return\] : while ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [ForStatement](#prod-ForStatement)\[Yield, Await, Return\] : for ( \[lookahead ≠ let \[\] [Expression](#prod-Expression)\[~In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( var [VariableDeclarationList](#prod-VariableDeclarationList)\[~In, ?Yield, ?Await\] ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( [LexicalDeclaration](#prod-LexicalDeclaration)\[~In, ?Yield, ?Await\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ; [Expression](#prod-Expression)\[+In, ?Yield, ?Await\]opt ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [ForInOfStatement](#prod-ForInOfStatement)\[Yield, Await, Return\] : for ( \[lookahead ≠ let \[\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] in [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( var [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] in [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( [ForDeclaration](#prod-ForDeclaration)\[?Yield, ?Await\] in [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( \[lookahead ∉ { let, async of }\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( var [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] for ( [ForDeclaration](#prod-ForDeclaration)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[+Await\] for await ( \[lookahead ≠ let\] [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[+Await\] for await ( var [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] \[+Await\] for await ( [ForDeclaration](#prod-ForDeclaration)\[?Yield, ?Await\] of [AssignmentExpression](#prod-AssignmentExpression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [ForDeclaration](#prod-ForDeclaration)\[Yield, Await\] : [LetOrConst](#prod-LetOrConst) [ForBinding](#prod-ForBinding)\[?Yield, ?Await\] [ForBinding](#prod-ForBinding)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [ContinueStatement](#prod-ContinueStatement)\[Yield, Await\] : continue ; continue \[no [LineTerminator](#prod-LineTerminator) here\] [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] ; [BreakStatement](#prod-BreakStatement)\[Yield, Await\] : break ; break \[no [LineTerminator](#prod-LineTerminator) here\] [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] ; [ReturnStatement](#prod-ReturnStatement)\[Yield, Await\] : return ; return \[no [LineTerminator](#prod-LineTerminator) here\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ; [WithStatement](#prod-WithStatement)\[Yield, Await, Return\] : with ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [SwitchStatement](#prod-SwitchStatement)\[Yield, Await, Return\] : switch ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [CaseBlock](#prod-CaseBlock)\[?Yield, ?Await, ?Return\] [CaseBlock](#prod-CaseBlock)\[Yield, Await, Return\] : { [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\]opt } { [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\]opt [DefaultClause](#prod-DefaultClause)\[?Yield, ?Await, ?Return\] [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\]opt } [CaseClauses](#prod-CaseClauses)\[Yield, Await, Return\] : [CaseClause](#prod-CaseClause)\[?Yield, ?Await, ?Return\] [CaseClauses](#prod-CaseClauses)\[?Yield, ?Await, ?Return\] [CaseClause](#prod-CaseClause)\[?Yield, ?Await, ?Return\] [CaseClause](#prod-CaseClause)\[Yield, Await, Return\] : case [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] : [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\]opt [DefaultClause](#prod-DefaultClause)\[Yield, Await, Return\] : default : [StatementList](#prod-StatementList)\[?Yield, ?Await, ?Return\]opt [LabelledStatement](#prod-LabelledStatement)\[Yield, Await, Return\] : [LabelIdentifier](#prod-LabelIdentifier)\[?Yield, ?Await\] : [LabelledItem](#prod-LabelledItem)\[?Yield, ?Await, ?Return\] [LabelledItem](#prod-LabelledItem)\[Yield, Await, Return\] : [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] [ThrowStatement](#prod-ThrowStatement)\[Yield, Await\] : throw \[no [LineTerminator](#prod-LineTerminator) here\] [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ; [TryStatement](#prod-TryStatement)\[Yield, Await, Return\] : try [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Catch](#prod-Catch)\[?Yield, ?Await, ?Return\] try [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Finally](#prod-Finally)\[?Yield, ?Await, ?Return\] try [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Catch](#prod-Catch)\[?Yield, ?Await, ?Return\] [Finally](#prod-Finally)\[?Yield, ?Await, ?Return\] [Catch](#prod-Catch)\[Yield, Await, Return\] : catch ( [CatchParameter](#prod-CatchParameter)\[?Yield, ?Await\] ) [Block](#prod-Block)\[?Yield, ?Await, ?Return\] catch [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [Finally](#prod-Finally)\[Yield, Await, Return\] : finally [Block](#prod-Block)\[?Yield, ?Await, ?Return\] [CatchParameter](#prod-CatchParameter)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [BindingPattern](#prod-BindingPattern)\[?Yield, ?Await\] [DebuggerStatement](#prod-DebuggerStatement) : debugger ;


# A.4 Functions and Classes

[UniqueFormalParameters](#prod-UniqueFormalParameters)\[Yield, Await\] : [FormalParameters](#prod-FormalParameters)\[?Yield, ?Await\] [FormalParameters](#prod-FormalParameters)\[Yield, Await\] : \[empty\] [FunctionRestParameter](#prod-FunctionRestParameter)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] , [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] , [FunctionRestParameter](#prod-FunctionRestParameter)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[Yield, Await\] : [FormalParameter](#prod-FormalParameter)\[?Yield, ?Await\] [FormalParameterList](#prod-FormalParameterList)\[?Yield, ?Await\] , [FormalParameter](#prod-FormalParameter)\[?Yield, ?Await\] [FunctionRestParameter](#prod-FunctionRestParameter)\[Yield, Await\] : [BindingRestElement](#prod-BindingRestElement)\[?Yield, ?Await\] [FormalParameter](#prod-FormalParameter)\[Yield, Await\] : [BindingElement](#prod-BindingElement)\[?Yield, ?Await\] [FunctionDeclaration](#prod-FunctionDeclaration)\[Yield, Await, Default\] : function [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } \[+Default\] function ( [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [FunctionExpression](#prod-FunctionExpression) : function [BindingIdentifier](#prod-BindingIdentifier)\[~Yield, ~Await\]opt ( [FormalParameters](#prod-FormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [FunctionBody](#prod-FunctionBody)\[Yield, Await\] : [FunctionStatementList](#prod-FunctionStatementList)\[?Yield, ?Await\] [FunctionStatementList](#prod-FunctionStatementList)\[Yield, Await\] : [StatementList](#prod-StatementList)\[?Yield, ?Await, +Return\]opt [ArrowFunction](#prod-ArrowFunction)\[In, Yield, Await\] : [ArrowParameters](#prod-ArrowParameters)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [ConciseBody](#prod-ConciseBody)\[?In\] [ArrowParameters](#prod-ArrowParameters)\[Yield, Await\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\] [ConciseBody](#prod-ConciseBody)\[In\] : \[lookahead ≠ {\] [ExpressionBody](#prod-ExpressionBody)\[?In, ~Await\] { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [ExpressionBody](#prod-ExpressionBody)\[In, Await\] : [AssignmentExpression](#prod-AssignmentExpression)\[?In, ~Yield, ?Await\]

When processing an instance of the production  
[ArrowParameters](#prod-ArrowParameters)\[Yield, Await\] : [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList)\[?Yield, ?Await\]  
the interpretation of [CoverParenthesizedExpressionAndArrowParameterList](#prod-CoverParenthesizedExpressionAndArrowParameterList) is refined using the following grammar:

[ArrowFormalParameters](#prod-ArrowFormalParameters)\[Yield, Await\] : ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[?Yield, ?Await\] )

[AsyncArrowFunction](#prod-AsyncArrowFunction)\[In, Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier)\[?Yield\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [AsyncConciseBody](#prod-AsyncConciseBody)\[?In\] [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [AsyncConciseBody](#prod-AsyncConciseBody)\[?In\] [AsyncConciseBody](#prod-AsyncConciseBody)\[In\] : \[lookahead ≠ {\] [ExpressionBody](#prod-ExpressionBody)\[?In, +Await\] { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncArrowBindingIdentifier](#prod-AsyncArrowBindingIdentifier)\[Yield\] : [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, +Await\] [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[Yield, Await\] : [MemberExpression](#prod-MemberExpression)\[?Yield, ?Await\] [Arguments](#prod-Arguments)\[?Yield, ?Await\]

When processing an instance of the production  
[AsyncArrowFunction](#prod-AsyncArrowFunction)\[In, Yield, Await\] : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead)\[?Yield, ?Await\] \[no [LineTerminator](#prod-LineTerminator) here\] \=> [AsyncConciseBody](#prod-AsyncConciseBody)\[?In\]  
the interpretation of [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) is refined using the following grammar:

[AsyncArrowHead](#prod-AsyncArrowHead) : async \[no [LineTerminator](#prod-LineTerminator) here\] [ArrowFormalParameters](#prod-ArrowFormalParameters)\[~Yield, +Await\]

[MethodDefinition](#prod-MethodDefinition)\[Yield, Await\] : [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[~Yield, ~Await\] ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [GeneratorMethod](#prod-GeneratorMethod)\[?Yield, ?Await\] [AsyncMethod](#prod-AsyncMethod)\[?Yield, ?Await\] [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod)\[?Yield, ?Await\] get [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } set [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [PropertySetParameterList](#prod-PropertySetParameterList) ) { [FunctionBody](#prod-FunctionBody)\[~Yield, ~Await\] } [PropertySetParameterList](#prod-PropertySetParameterList) : [FormalParameter](#prod-FormalParameter)\[~Yield, ~Await\] [GeneratorDeclaration](#prod-GeneratorDeclaration)\[Yield, Await, Default\] : function \* [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } \[+Default\] function \* ( [FormalParameters](#prod-FormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorExpression](#prod-GeneratorExpression) : function \* [BindingIdentifier](#prod-BindingIdentifier)\[+Yield, ~Await\]opt ( [FormalParameters](#prod-FormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorMethod](#prod-GeneratorMethod)\[Yield, Await\] : \* [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[+Yield, ~Await\] ) { [GeneratorBody](#prod-GeneratorBody) } [GeneratorBody](#prod-GeneratorBody) : [FunctionBody](#prod-FunctionBody)\[+Yield, ~Await\] [YieldExpression](#prod-YieldExpression)\[In, Await\] : yield yield \[no [LineTerminator](#prod-LineTerminator) here\] [AssignmentExpression](#prod-AssignmentExpression)\[?In, +Yield, ?Await\] yield \[no [LineTerminator](#prod-LineTerminator) here\] \* [AssignmentExpression](#prod-AssignmentExpression)\[?In, +Yield, ?Await\] [AsyncGeneratorDeclaration](#prod-AsyncGeneratorDeclaration)\[Yield, Await, Default\] : async \[no [LineTerminator](#prod-LineTerminator) here\] function \* [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } \[+Default\] async \[no [LineTerminator](#prod-LineTerminator) here\] function \* ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorExpression](#prod-AsyncGeneratorExpression) : async \[no [LineTerminator](#prod-LineTerminator) here\] function \* [BindingIdentifier](#prod-BindingIdentifier)\[+Yield, +Await\]opt ( [FormalParameters](#prod-FormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorMethod](#prod-AsyncGeneratorMethod)\[Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] \* [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[+Yield, +Await\] ) { [AsyncGeneratorBody](#prod-AsyncGeneratorBody) } [AsyncGeneratorBody](#prod-AsyncGeneratorBody) : [FunctionBody](#prod-FunctionBody)\[+Yield, +Await\] [AsyncFunctionDeclaration](#prod-AsyncFunctionDeclaration)\[Yield, Await, Default\] : async \[no [LineTerminator](#prod-LineTerminator) here\] function [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } \[+Default\] async \[no [LineTerminator](#prod-LineTerminator) here\] function ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionExpression](#prod-AsyncFunctionExpression) : async \[no [LineTerminator](#prod-LineTerminator) here\] function [BindingIdentifier](#prod-BindingIdentifier)\[~Yield, +Await\]opt ( [FormalParameters](#prod-FormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncMethod](#prod-AsyncMethod)\[Yield, Await\] : async \[no [LineTerminator](#prod-LineTerminator) here\] [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] ( [UniqueFormalParameters](#prod-UniqueFormalParameters)\[~Yield, +Await\] ) { [AsyncFunctionBody](#prod-AsyncFunctionBody) } [AsyncFunctionBody](#prod-AsyncFunctionBody) : [FunctionBody](#prod-FunctionBody)\[~Yield, +Await\] [AwaitExpression](#prod-AwaitExpression)\[Yield\] : await [UnaryExpression](#prod-UnaryExpression)\[?Yield, +Await\] [ClassDeclaration](#prod-ClassDeclaration)\[Yield, Await, Default\] : class [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [ClassTail](#prod-ClassTail)\[?Yield, ?Await\] \[+Default\] class [ClassTail](#prod-ClassTail)\[?Yield, ?Await\] [ClassExpression](#prod-ClassExpression)\[Yield, Await\] : class [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\]opt [ClassTail](#prod-ClassTail)\[?Yield, ?Await\] [ClassTail](#prod-ClassTail)\[Yield, Await\] : [ClassHeritage](#prod-ClassHeritage)\[?Yield, ?Await\]opt { [ClassBody](#prod-ClassBody)\[?Yield, ?Await\]opt } [ClassHeritage](#prod-ClassHeritage)\[Yield, Await\] : extends [LeftHandSideExpression](#prod-LeftHandSideExpression)\[?Yield, ?Await\] [ClassBody](#prod-ClassBody)\[Yield, Await\] : [ClassElementList](#prod-ClassElementList)\[?Yield, ?Await\] [ClassElementList](#prod-ClassElementList)\[Yield, Await\] : [ClassElement](#prod-ClassElement)\[?Yield, ?Await\] [ClassElementList](#prod-ClassElementList)\[?Yield, ?Await\] [ClassElement](#prod-ClassElement)\[?Yield, ?Await\] [ClassElement](#prod-ClassElement)\[Yield, Await\] : [MethodDefinition](#prod-MethodDefinition)\[?Yield, ?Await\] static [MethodDefinition](#prod-MethodDefinition)\[?Yield, ?Await\] [FieldDefinition](#prod-FieldDefinition)\[?Yield, ?Await\] ; static [FieldDefinition](#prod-FieldDefinition)\[?Yield, ?Await\] ; [ClassStaticBlock](#prod-ClassStaticBlock) ; [FieldDefinition](#prod-FieldDefinition)\[Yield, Await\] : [ClassElementName](#prod-ClassElementName)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[+In, ?Yield, ?Await\]opt [ClassElementName](#prod-ClassElementName)\[Yield, Await\] : [PropertyName](#prod-PropertyName)\[?Yield, ?Await\] [PrivateIdentifier](#prod-PrivateIdentifier) [ClassStaticBlock](#prod-ClassStaticBlock) : static { [ClassStaticBlockBody](#prod-ClassStaticBlockBody) } [ClassStaticBlockBody](#prod-ClassStaticBlockBody) : [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) [ClassStaticBlockStatementList](#prod-ClassStaticBlockStatementList) : [StatementList](#prod-StatementList)\[~Yield, +Await, ~Return\]opt


# A.5 Scripts and Modules

[Script](#prod-Script) : [ScriptBody](#prod-ScriptBody)opt [ScriptBody](#prod-ScriptBody) : [StatementList](#prod-StatementList)\[~Yield, ~Await, ~Return\] [Module](#prod-Module) : [ModuleBody](#prod-ModuleBody)opt [ModuleBody](#prod-ModuleBody) : [ModuleItemList](#prod-ModuleItemList) [ModuleItemList](#prod-ModuleItemList) : [ModuleItem](#prod-ModuleItem) [ModuleItemList](#prod-ModuleItemList) [ModuleItem](#prod-ModuleItem) [ModuleItem](#prod-ModuleItem) : [ImportDeclaration](#prod-ImportDeclaration) [ExportDeclaration](#prod-ExportDeclaration) [StatementListItem](#prod-StatementListItem)\[~Yield, +Await, ~Return\] [ModuleExportName](#prod-ModuleExportName) : [IdentifierName](#prod-IdentifierName) [StringLiteral](#prod-StringLiteral) [ImportDeclaration](#prod-ImportDeclaration) : import [ImportClause](#prod-ImportClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ; import [ModuleSpecifier](#prod-ModuleSpecifier) [WithClause](#prod-WithClause)opt ; [ImportClause](#prod-ImportClause) : [ImportedDefaultBinding](#prod-ImportedDefaultBinding) [NameSpaceImport](#prod-NameSpaceImport) [NamedImports](#prod-NamedImports) [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NameSpaceImport](#prod-NameSpaceImport) [ImportedDefaultBinding](#prod-ImportedDefaultBinding) , [NamedImports](#prod-NamedImports) [ImportedDefaultBinding](#prod-ImportedDefaultBinding) : [ImportedBinding](#prod-ImportedBinding) [NameSpaceImport](#prod-NameSpaceImport) : \* as [ImportedBinding](#prod-ImportedBinding) [NamedImports](#prod-NamedImports) : { } { [ImportsList](#prod-ImportsList) } { [ImportsList](#prod-ImportsList) , } [FromClause](#prod-FromClause) : from [ModuleSpecifier](#prod-ModuleSpecifier) [ImportsList](#prod-ImportsList) : [ImportSpecifier](#prod-ImportSpecifier) [ImportsList](#prod-ImportsList) , [ImportSpecifier](#prod-ImportSpecifier) [ImportSpecifier](#prod-ImportSpecifier) : [ImportedBinding](#prod-ImportedBinding) [ModuleExportName](#prod-ModuleExportName) as [ImportedBinding](#prod-ImportedBinding) [ModuleSpecifier](#prod-ModuleSpecifier) : [StringLiteral](#prod-StringLiteral) [ImportedBinding](#prod-ImportedBinding) : [BindingIdentifier](#prod-BindingIdentifier)\[~Yield, +Await\] [WithClause](#prod-WithClause) : with { } with { [WithEntries](#prod-WithEntries) ,opt } [WithEntries](#prod-WithEntries) : [AttributeKey](#prod-AttributeKey) : [StringLiteral](#prod-StringLiteral) [AttributeKey](#prod-AttributeKey) : [StringLiteral](#prod-StringLiteral) , [WithEntries](#prod-WithEntries) [AttributeKey](#prod-AttributeKey) : [IdentifierName](#prod-IdentifierName) [StringLiteral](#prod-StringLiteral) [ExportDeclaration](#prod-ExportDeclaration) : export [ExportFromClause](#prod-ExportFromClause) [FromClause](#prod-FromClause) [WithClause](#prod-WithClause)opt ; export [NamedExports](#prod-NamedExports) ; export [VariableStatement](#prod-VariableStatement)\[~Yield, +Await\] export [Declaration](#prod-Declaration)\[~Yield, +Await\] export default [HoistableDeclaration](#prod-HoistableDeclaration)\[~Yield, +Await, +Default\] export default [ClassDeclaration](#prod-ClassDeclaration)\[~Yield, +Await, +Default\] export default \[lookahead ∉ { function, async \[no [LineTerminator](#prod-LineTerminator) here\] function, class }\] [AssignmentExpression](#prod-AssignmentExpression)\[+In, ~Yield, +Await\] ; [ExportFromClause](#prod-ExportFromClause) : \* \* as [ModuleExportName](#prod-ModuleExportName) [NamedExports](#prod-NamedExports) [NamedExports](#prod-NamedExports) : { } { [ExportsList](#prod-ExportsList) } { [ExportsList](#prod-ExportsList) , } [ExportsList](#prod-ExportsList) : [ExportSpecifier](#prod-ExportSpecifier) [ExportsList](#prod-ExportsList) , [ExportSpecifier](#prod-ExportSpecifier) [ExportSpecifier](#prod-ExportSpecifier) : [ModuleExportName](#prod-ModuleExportName) [ModuleExportName](#prod-ModuleExportName) as [ModuleExportName](#prod-ModuleExportName)


# A.6 Number Conversions

[StringNumericLiteral](#prod-StringNumericLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrNumericLiteral](#prod-StrNumericLiteral) [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpace](#prod-StrWhiteSpace) ::: [StrWhiteSpaceChar](#prod-StrWhiteSpaceChar) [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpaceChar](#prod-StrWhiteSpaceChar) ::: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [StrNumericLiteral](#prod-StrNumericLiteral) ::: [StrDecimalLiteral](#prod-StrDecimalLiteral) [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[~Sep\] [StrDecimalLiteral](#prod-StrDecimalLiteral) ::: [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) + [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) \- [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) [StrUnsignedDecimalLiteral](#prod-StrUnsignedDecimalLiteral) ::: Infinity [DecimalDigits](#prod-DecimalDigits)\[~Sep\] . [DecimalDigits](#prod-DecimalDigits)\[~Sep\]opt [ExponentPart](#prod-ExponentPart)\[~Sep\]opt . [DecimalDigits](#prod-DecimalDigits)\[~Sep\] [ExponentPart](#prod-ExponentPart)\[~Sep\]opt [DecimalDigits](#prod-DecimalDigits)\[~Sep\] [ExponentPart](#prod-ExponentPart)\[~Sep\]opt

All grammar symbols not explicitly defined by the [StringNumericLiteral](#prod-StringNumericLiteral) grammar have the definitions used in the [Lexical Grammar for numeric literals](#sec-literals-numeric-literals).

[StringIntegerLiteral](#prod-StringIntegerLiteral) ::: [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrIntegerLiteral](#prod-StrIntegerLiteral) [StrWhiteSpace](#prod-StrWhiteSpace)opt [StrIntegerLiteral](#prod-StrIntegerLiteral) ::: [SignedInteger](#prod-SignedInteger)\[~Sep\] [NonDecimalIntegerLiteral](#prod-NonDecimalIntegerLiteral)\[~Sep\]


# A.7 Time Zone Offset String Format

[UTCOffset](#prod-UTCOffset) ::: [ASCIISign](#prod-ASCIISign) [Hour](#prod-Hour) [ASCIISign](#prod-ASCIISign) [Hour](#prod-Hour) [HourSubcomponents](#prod-HourSubcomponents)\[+Extended\] [ASCIISign](#prod-ASCIISign) [Hour](#prod-Hour) [HourSubcomponents](#prod-HourSubcomponents)\[~Extended\] [ASCIISign](#prod-ASCIISign) ::: one of + \- [Hour](#prod-Hour) ::: 0 [DecimalDigit](#prod-DecimalDigit) 1 [DecimalDigit](#prod-DecimalDigit) 20 21 22 23 [HourSubcomponents](#prod-HourSubcomponents)\[Extended\] ::: [TimeSeparator](#prod-TimeSeparator)\[?Extended\] [MinuteSecond](#prod-MinuteSecond) [TimeSeparator](#prod-TimeSeparator)\[?Extended\] [MinuteSecond](#prod-MinuteSecond) [TimeSeparator](#prod-TimeSeparator)\[?Extended\] [MinuteSecond](#prod-MinuteSecond) [TemporalDecimalFraction](#prod-TemporalDecimalFraction)opt [TimeSeparator](#prod-TimeSeparator)\[Extended\] ::: \[+Extended\] : \[~Extended\] \[empty\] [MinuteSecond](#prod-MinuteSecond) ::: 0 [DecimalDigit](#prod-DecimalDigit) 1 [DecimalDigit](#prod-DecimalDigit) 2 [DecimalDigit](#prod-DecimalDigit) 3 [DecimalDigit](#prod-DecimalDigit) 4 [DecimalDigit](#prod-DecimalDigit) 5 [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalFraction](#prod-TemporalDecimalFraction) ::: [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [DecimalDigit](#prod-DecimalDigit) [TemporalDecimalSeparator](#prod-TemporalDecimalSeparator) ::: one of . ,


# A.8 Regular Expressions

[Pattern](#prod-Pattern)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Disjunction](#prod-Disjunction)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [Alternative](#prod-Alternative)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Alternative](#prod-Alternative)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] | [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Alternative](#prod-Alternative)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: \[empty\] [Alternative](#prod-Alternative)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Term](#prod-Term)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Term](#prod-Term)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [Assertion](#prod-Assertion)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Atom](#prod-Atom)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Atom](#prod-Atom)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Quantifier](#prod-Quantifier) [Assertion](#prod-Assertion)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: ^ $ \\b \\B (?= [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (?! [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (?<= [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (?<! [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) [Quantifier](#prod-Quantifier) :: [QuantifierPrefix](#prod-QuantifierPrefix) [QuantifierPrefix](#prod-QuantifierPrefix) ? [QuantifierPrefix](#prod-QuantifierPrefix) :: \* + ? { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] } { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] ,} { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] , [DecimalDigits](#prod-DecimalDigits)\[~Sep\] } [Atom](#prod-Atom)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: [PatternCharacter](#prod-PatternCharacter) . \\ [AtomEscape](#prod-AtomEscape)\[?UnicodeMode, ?NamedCaptureGroups\] [CharacterClass](#prod-CharacterClass)\[?UnicodeMode, ?UnicodeSetsMode\] ( [GroupSpecifier](#prod-GroupSpecifier)\[?UnicodeMode\]opt [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) \- [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) [RegularExpressionModifiers](#prod-RegularExpressionModifiers) :: \[empty\] [RegularExpressionModifiers](#prod-RegularExpressionModifiers) [RegularExpressionModifier](#prod-RegularExpressionModifier) [RegularExpressionModifier](#prod-RegularExpressionModifier) :: one of i m s [SyntaxCharacter](#prod-SyntaxCharacter) :: one of ^ $ \\ . \* + ? ( ) \[\] { } | [PatternCharacter](#prod-PatternCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not [SyntaxCharacter](#prod-SyntaxCharacter) [AtomEscape](#prod-AtomEscape)\[UnicodeMode, NamedCaptureGroups\] :: [DecimalEscape](#prod-DecimalEscape) [CharacterClassEscape](#prod-CharacterClassEscape)\[?UnicodeMode\] [CharacterEscape](#prod-CharacterEscape)\[?UnicodeMode\] \[+NamedCaptureGroups\] k [GroupName](#prod-GroupName)\[?UnicodeMode\] [CharacterEscape](#prod-CharacterEscape)\[UnicodeMode\] :: [ControlEscape](#prod-ControlEscape) c [AsciiLetter](#prod-AsciiLetter) 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [HexEscapeSequence](#prod-HexEscapeSequence) [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[?UnicodeMode\] [IdentityEscape](#prod-IdentityEscape)\[?UnicodeMode\] [ControlEscape](#prod-ControlEscape) :: one of f n r t v [GroupSpecifier](#prod-GroupSpecifier)\[UnicodeMode\] :: ? [GroupName](#prod-GroupName)\[?UnicodeMode\] [GroupName](#prod-GroupName)\[UnicodeMode\] :: < [RegExpIdentifierName](#prod-RegExpIdentifierName)\[?UnicodeMode\] \> [RegExpIdentifierName](#prod-RegExpIdentifierName)\[UnicodeMode\] :: [RegExpIdentifierStart](#prod-RegExpIdentifierStart)\[?UnicodeMode\] [RegExpIdentifierName](#prod-RegExpIdentifierName)\[?UnicodeMode\] [RegExpIdentifierPart](#prod-RegExpIdentifierPart)\[?UnicodeMode\] [RegExpIdentifierStart](#prod-RegExpIdentifierStart)\[UnicodeMode\] :: [IdentifierStartChar](#prod-IdentifierStartChar) \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[+UnicodeMode\] \[~UnicodeMode\] [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate) [RegExpIdentifierPart](#prod-RegExpIdentifierPart)\[UnicodeMode\] :: [IdentifierPartChar](#prod-IdentifierPartChar) \\ [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[+UnicodeMode\] \[~UnicodeMode\] [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate) [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[UnicodeMode\] :: \[+UnicodeMode\] u [HexLeadSurrogate](#prod-HexLeadSurrogate) \\u [HexTrailSurrogate](#prod-HexTrailSurrogate) \[+UnicodeMode\] u [HexLeadSurrogate](#prod-HexLeadSurrogate) \[+UnicodeMode\] u [HexTrailSurrogate](#prod-HexTrailSurrogate) \[+UnicodeMode\] u [HexNonSurrogate](#prod-HexNonSurrogate) \[~UnicodeMode\] u [Hex4Digits](#prod-Hex4Digits) \[+UnicodeMode\] u{ [CodePoint](#prod-CodePoint) } [UnicodeLeadSurrogate](#prod-UnicodeLeadSurrogate) :: any Unicode code point in the inclusive interval from U+D800 to U+DBFF [UnicodeTrailSurrogate](#prod-UnicodeTrailSurrogate) :: any Unicode code point in the inclusive interval from U+DC00 to U+DFFF

Each `\u` [HexTrailSurrogate](#prod-HexTrailSurrogate) for which the choice of associated `u` [HexLeadSurrogate](#prod-HexLeadSurrogate) is ambiguous shall be associated with the nearest possible `u` [HexLeadSurrogate](#prod-HexLeadSurrogate) that would otherwise have no corresponding `\u` [HexTrailSurrogate](#prod-HexTrailSurrogate).

[HexLeadSurrogate](#prod-HexLeadSurrogate) :: [Hex4Digits](#prod-Hex4Digits) but only if the MV of [Hex4Digits](#prod-Hex4Digits) is in the [inclusive interval](#inclusive-interval) from 0xD800 to 0xDBFF [HexTrailSurrogate](#prod-HexTrailSurrogate) :: [Hex4Digits](#prod-Hex4Digits) but only if the MV of [Hex4Digits](#prod-Hex4Digits) is in the [inclusive interval](#inclusive-interval) from 0xDC00 to 0xDFFF [HexNonSurrogate](#prod-HexNonSurrogate) :: [Hex4Digits](#prod-Hex4Digits) but only if the MV of [Hex4Digits](#prod-Hex4Digits) is not in the [inclusive interval](#inclusive-interval) from 0xD800 to 0xDFFF [IdentityEscape](#prod-IdentityEscape)\[UnicodeMode\] :: \[+UnicodeMode\] [SyntaxCharacter](#prod-SyntaxCharacter) \[+UnicodeMode\] / \[~UnicodeMode\] [SourceCharacter](#prod-SourceCharacter) but not [UnicodeIDContinue](#prod-UnicodeIDContinue) [DecimalEscape](#prod-DecimalEscape) :: [NonZeroDigit](#prod-NonZeroDigit) [DecimalDigits](#prod-DecimalDigits)\[~Sep\]opt \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [CharacterClassEscape](#prod-CharacterClassEscape)\[UnicodeMode\] :: d D s S w W \[+UnicodeMode\] p{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) } \[+UnicodeMode\] P{ [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) } [UnicodePropertyValueExpression](#prod-UnicodePropertyValueExpression) :: [UnicodePropertyName](#prod-UnicodePropertyName) \= [UnicodePropertyValue](#prod-UnicodePropertyValue) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue) [UnicodePropertyName](#prod-UnicodePropertyName) :: [UnicodePropertyNameCharacters](#prod-UnicodePropertyNameCharacters) [UnicodePropertyNameCharacters](#prod-UnicodePropertyNameCharacters) :: [UnicodePropertyNameCharacter](#prod-UnicodePropertyNameCharacter) [UnicodePropertyNameCharacters](#prod-UnicodePropertyNameCharacters)opt [UnicodePropertyValue](#prod-UnicodePropertyValue) :: [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters) [LoneUnicodePropertyNameOrValue](#prod-LoneUnicodePropertyNameOrValue) :: [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters) [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters) :: [UnicodePropertyValueCharacter](#prod-UnicodePropertyValueCharacter) [UnicodePropertyValueCharacters](#prod-UnicodePropertyValueCharacters)opt [UnicodePropertyValueCharacter](#prod-UnicodePropertyValueCharacter) :: [UnicodePropertyNameCharacter](#prod-UnicodePropertyNameCharacter) [DecimalDigit](#prod-DecimalDigit) [UnicodePropertyNameCharacter](#prod-UnicodePropertyNameCharacter) :: [AsciiLetter](#prod-AsciiLetter) \_ [CharacterClass](#prod-CharacterClass)\[UnicodeMode, UnicodeSetsMode\] :: \[\[lookahead ≠ ^\] [ClassContents](#prod-ClassContents)\[?UnicodeMode, ?UnicodeSetsMode\] \] \[^ [ClassContents](#prod-ClassContents)\[?UnicodeMode, ?UnicodeSetsMode\] \] [ClassContents](#prod-ClassContents)\[UnicodeMode, UnicodeSetsMode\] :: \[empty\] \[~UnicodeSetsMode\] [NonemptyClassRanges](#prod-NonemptyClassRanges)\[?UnicodeMode\] \[+UnicodeSetsMode\] [ClassSetExpression](#prod-ClassSetExpression) [NonemptyClassRanges](#prod-NonemptyClassRanges)\[UnicodeMode\] :: [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)\[?UnicodeMode\] [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] \- [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassContents](#prod-ClassContents)\[?UnicodeMode, ~UnicodeSetsMode\] [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)\[UnicodeMode\] :: [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassAtomNoDash](#prod-ClassAtomNoDash)\[?UnicodeMode\] [NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash)\[?UnicodeMode\] [ClassAtomNoDash](#prod-ClassAtomNoDash)\[?UnicodeMode\] \- [ClassAtom](#prod-ClassAtom)\[?UnicodeMode\] [ClassContents](#prod-ClassContents)\[?UnicodeMode, ~UnicodeSetsMode\] [ClassAtom](#prod-ClassAtom)\[UnicodeMode\] :: \- [ClassAtomNoDash](#prod-ClassAtomNoDash)\[?UnicodeMode\] [ClassAtomNoDash](#prod-ClassAtomNoDash)\[UnicodeMode\] :: [SourceCharacter](#prod-SourceCharacter) but not one of \\ or \] or \- \\ [ClassEscape](#prod-ClassEscape)\[?UnicodeMode\] [ClassEscape](#prod-ClassEscape)\[UnicodeMode\] :: b \[+UnicodeMode\] \- [CharacterClassEscape](#prod-CharacterClassEscape)\[?UnicodeMode\] [CharacterEscape](#prod-CharacterEscape)\[?UnicodeMode\] [ClassSetExpression](#prod-ClassSetExpression) :: [ClassUnion](#prod-ClassUnion) [ClassIntersection](#prod-ClassIntersection) [ClassSubtraction](#prod-ClassSubtraction) [ClassUnion](#prod-ClassUnion) :: [ClassSetRange](#prod-ClassSetRange) [ClassUnion](#prod-ClassUnion)opt [ClassSetOperand](#prod-ClassSetOperand) [ClassUnion](#prod-ClassUnion)opt [ClassIntersection](#prod-ClassIntersection) :: [ClassSetOperand](#prod-ClassSetOperand) && \[lookahead ≠ &\] [ClassSetOperand](#prod-ClassSetOperand) [ClassIntersection](#prod-ClassIntersection) && \[lookahead ≠ &\] [ClassSetOperand](#prod-ClassSetOperand) [ClassSubtraction](#prod-ClassSubtraction) :: [ClassSetOperand](#prod-ClassSetOperand) \-- [ClassSetOperand](#prod-ClassSetOperand) [ClassSubtraction](#prod-ClassSubtraction) \-- [ClassSetOperand](#prod-ClassSetOperand) [ClassSetRange](#prod-ClassSetRange) :: [ClassSetCharacter](#prod-ClassSetCharacter) \- [ClassSetCharacter](#prod-ClassSetCharacter) [ClassSetOperand](#prod-ClassSetOperand) :: [NestedClass](#prod-NestedClass) [ClassStringDisjunction](#prod-ClassStringDisjunction) [ClassSetCharacter](#prod-ClassSetCharacter) [NestedClass](#prod-NestedClass) :: \[\[lookahead ≠ ^\] [ClassContents](#prod-ClassContents)\[+UnicodeMode, +UnicodeSetsMode\] \] \[^ [ClassContents](#prod-ClassContents)\[+UnicodeMode, +UnicodeSetsMode\] \] \\ [CharacterClassEscape](#prod-CharacterClassEscape)\[+UnicodeMode\] [ClassStringDisjunction](#prod-ClassStringDisjunction) :: \\q{ [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) } [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) :: [ClassString](#prod-ClassString) [ClassString](#prod-ClassString) | [ClassStringDisjunctionContents](#prod-ClassStringDisjunctionContents) [ClassString](#prod-ClassString) :: \[empty\] [NonEmptyClassString](#prod-NonEmptyClassString) [NonEmptyClassString](#prod-NonEmptyClassString) :: [ClassSetCharacter](#prod-ClassSetCharacter) [NonEmptyClassString](#prod-NonEmptyClassString)opt [ClassSetCharacter](#prod-ClassSetCharacter) :: \[lookahead ∉ [ClassSetReservedDoublePunctuator](#prod-ClassSetReservedDoublePunctuator)\] [SourceCharacter](#prod-SourceCharacter) but not [ClassSetSyntaxCharacter](#prod-ClassSetSyntaxCharacter) \\ [CharacterEscape](#prod-CharacterEscape)\[+UnicodeMode\] \\ [ClassSetReservedPunctuator](#prod-ClassSetReservedPunctuator) \\b [ClassSetReservedDoublePunctuator](#prod-ClassSetReservedDoublePunctuator) :: one of && !! ## $$ %% \*\* ++ ,, .. :: ;; << \== \>> ?? @@ ^^ \`\` ~~ [ClassSetSyntaxCharacter](#prod-ClassSetSyntaxCharacter) :: one of ( ) \[\] { } / \- \\ | [ClassSetReservedPunctuator](#prod-ClassSetReservedPunctuator) :: one of & \- ! # % , : ; < \= \> @ \` ~


# Annex B (normative) Additional ECMAScript Features for Web Browsers

The ECMAScript language syntax and semantics defined in this annex are required when the ECMAScript [host](#host) is a web browser. The content of this annex is normative but optional if the ECMAScript [host](#host) is not a web browser.

Some features defined in this annex are specified in this annex, and some are specified in the main body of this document.

When a feature is specified in the main body, each point where it affects the document is marked with the words "[Normative Optional](#sec-conformance)" in a coloured box. Moreover, where the feature involves particular wording in an algorithm or [early error](#early-error) rule, this is guarded by the condition that “the host supports” the relevant feature. Web browsers are required to support all such features.

Note

This annex describes various legacy features and other characteristics of web browser ECMAScript [hosts](#host). All of the language features and behaviours specified in this annex have one or more undesirable characteristics and in the absence of legacy usage would be removed from this specification. However, the usage of these features by large numbers of existing web pages means that web browsers must continue to support them. The specifications in this annex define the requirements for interoperable implementations of these legacy features.

These features are not considered part of the core ECMAScript language. Programmers should not use or assume the existence of these features and behaviours when writing new ECMAScript code. ECMAScript implementations are discouraged from implementing these features unless the implementation is part of a web browser or is required to run the same legacy ECMAScript code that web browsers encounter.


# B.1 Additional Syntax


# B.1.1 HTML-like Comments

The syntax and semantics of [12.4](#sec-comments) is extended as follows except that this extension is not allowed when parsing source text using the [goal symbol](#sec-context-free-grammars) [Module](#prod-Module):


## Syntax

[InputElementHashbangOrRegExp](#prod-annexB-InputElementHashbangOrRegExp) :: [WhiteSpace](#prod-WhiteSpace) [LineTerminator](#prod-LineTerminator) [Comment](#prod-annexB-Comment) [CommonToken](#prod-CommonToken) [HashbangComment](#prod-HashbangComment) [RegularExpressionLiteral](#prod-RegularExpressionLiteral) [HTMLCloseComment](#prod-annexB-HTMLCloseComment) [Comment](#prod-annexB-Comment) :: [MultiLineComment](#prod-annexB-MultiLineComment) [SingleLineComment](#prod-SingleLineComment) [SingleLineHTMLOpenComment](#prod-annexB-SingleLineHTMLOpenComment) [SingleLineHTMLCloseComment](#prod-annexB-SingleLineHTMLCloseComment) [SingleLineDelimitedComment](#prod-annexB-SingleLineDelimitedComment) [MultiLineComment](#prod-annexB-MultiLineComment) :: /\* [FirstCommentLine](#prod-annexB-FirstCommentLine)opt [LineTerminator](#prod-LineTerminator) [MultiLineCommentChars](#prod-MultiLineCommentChars)opt \*/ [HTMLCloseComment](#prod-annexB-HTMLCloseComment)opt [FirstCommentLine](#prod-annexB-FirstCommentLine) :: [SingleLineDelimitedCommentChars](#prod-annexB-SingleLineDelimitedCommentChars) [SingleLineHTMLOpenComment](#prod-annexB-SingleLineHTMLOpenComment) :: <!-- [SingleLineCommentChars](#prod-SingleLineCommentChars)opt [SingleLineHTMLCloseComment](#prod-annexB-SingleLineHTMLCloseComment) :: [LineTerminatorSequence](#prod-LineTerminatorSequence) [HTMLCloseComment](#prod-annexB-HTMLCloseComment) [SingleLineDelimitedComment](#prod-annexB-SingleLineDelimitedComment) :: /\* [SingleLineDelimitedCommentChars](#prod-annexB-SingleLineDelimitedCommentChars)opt \*/ [HTMLCloseComment](#prod-annexB-HTMLCloseComment) :: [WhiteSpaceSequence](#prod-annexB-WhiteSpaceSequence)opt [SingleLineDelimitedCommentSequence](#prod-annexB-SingleLineDelimitedCommentSequence)opt \--> [SingleLineCommentChars](#prod-SingleLineCommentChars)opt [SingleLineDelimitedCommentChars](#prod-annexB-SingleLineDelimitedCommentChars) :: [SingleLineNotAsteriskChar](#prod-annexB-SingleLineNotAsteriskChar) [SingleLineDelimitedCommentChars](#prod-annexB-SingleLineDelimitedCommentChars)opt \* [SingleLinePostAsteriskCommentChars](#prod-annexB-SingleLinePostAsteriskCommentChars)opt [SingleLineNotAsteriskChar](#prod-annexB-SingleLineNotAsteriskChar) :: [SourceCharacter](#prod-SourceCharacter) but not one of \* or [LineTerminator](#prod-LineTerminator) [SingleLinePostAsteriskCommentChars](#prod-annexB-SingleLinePostAsteriskCommentChars) :: [SingleLineNotForwardSlashOrAsteriskChar](#prod-annexB-SingleLineNotForwardSlashOrAsteriskChar) [SingleLineDelimitedCommentChars](#prod-annexB-SingleLineDelimitedCommentChars)opt \* [SingleLinePostAsteriskCommentChars](#prod-annexB-SingleLinePostAsteriskCommentChars)opt [SingleLineNotForwardSlashOrAsteriskChar](#prod-annexB-SingleLineNotForwardSlashOrAsteriskChar) :: [SourceCharacter](#prod-SourceCharacter) but not one of / or \* or [LineTerminator](#prod-LineTerminator) [WhiteSpaceSequence](#prod-annexB-WhiteSpaceSequence) :: [WhiteSpace](#prod-WhiteSpace) [WhiteSpaceSequence](#prod-annexB-WhiteSpaceSequence)opt [SingleLineDelimitedCommentSequence](#prod-annexB-SingleLineDelimitedCommentSequence) :: [SingleLineDelimitedComment](#prod-annexB-SingleLineDelimitedComment) [WhiteSpaceSequence](#prod-annexB-WhiteSpaceSequence)opt [SingleLineDelimitedCommentSequence](#prod-annexB-SingleLineDelimitedCommentSequence)opt

Similar to a [MultiLineComment](#prod-annexB-MultiLineComment) that contains a line terminator code point, a [SingleLineHTMLCloseComment](#prod-annexB-SingleLineHTMLCloseComment) is considered to be a [LineTerminator](#prod-LineTerminator) for purposes of parsing by the syntactic grammar.


# B.1.2 Regular Expressions Patterns

The syntax of [22.2.1](#sec-patterns) is modified and extended as follows. These changes introduce ambiguities that are broken by the ordering of grammar productions and by contextual information. When parsing using the following grammar, each alternative is considered only if previous production alternatives do not match.

This alternative pattern grammar and semantics only changes the syntax and semantics of BMP patterns. The following grammar extensions include productions parameterized with the \[UnicodeMode\] parameter. However, none of these extensions change the syntax of Unicode patterns recognized when parsing with the \[UnicodeMode\] parameter present on the [goal symbol](#sec-context-free-grammars).


## Syntax

[Term](#prod-annexB-Term)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: \[+UnicodeMode\] [Assertion](#prod-annexB-Assertion)\[+UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] \[+UnicodeMode\] [Atom](#prod-Atom)\[+UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] [Quantifier](#prod-Quantifier) \[+UnicodeMode\] [Atom](#prod-Atom)\[+UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] \[~UnicodeMode\] [QuantifiableAssertion](#prod-annexB-QuantifiableAssertion)\[?NamedCaptureGroups\] [Quantifier](#prod-Quantifier) \[~UnicodeMode\] [Assertion](#prod-annexB-Assertion)\[~UnicodeMode, ~UnicodeSetsMode, ?NamedCaptureGroups\] \[~UnicodeMode\] [ExtendedAtom](#prod-annexB-ExtendedAtom)\[?NamedCaptureGroups\] [Quantifier](#prod-Quantifier) \[~UnicodeMode\] [ExtendedAtom](#prod-annexB-ExtendedAtom)\[?NamedCaptureGroups\] [Assertion](#prod-annexB-Assertion)\[UnicodeMode, UnicodeSetsMode, NamedCaptureGroups\] :: ^ $ \\b \\B \[+UnicodeMode\] (?= [Disjunction](#prod-Disjunction)\[+UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) \[+UnicodeMode\] (?! [Disjunction](#prod-Disjunction)\[+UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) \[~UnicodeMode\] [QuantifiableAssertion](#prod-annexB-QuantifiableAssertion)\[?NamedCaptureGroups\] (?<= [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) (?<! [Disjunction](#prod-Disjunction)\[?UnicodeMode, ?UnicodeSetsMode, ?NamedCaptureGroups\] ) [QuantifiableAssertion](#prod-annexB-QuantifiableAssertion)\[NamedCaptureGroups\] :: (?= [Disjunction](#prod-Disjunction)\[~UnicodeMode, ~UnicodeSetsMode, ?NamedCaptureGroups\] ) (?! [Disjunction](#prod-Disjunction)\[~UnicodeMode, ~UnicodeSetsMode, ?NamedCaptureGroups\] ) [ExtendedAtom](#prod-annexB-ExtendedAtom)\[NamedCaptureGroups\] :: . \\ [AtomEscape](#prod-annexB-AtomEscape)\[~UnicodeMode, ?NamedCaptureGroups\] \\ \[lookahead = c\] [CharacterClass](#prod-CharacterClass)\[~UnicodeMode, ~UnicodeSetsMode\] ( [GroupSpecifier](#prod-GroupSpecifier)\[~UnicodeMode\]opt [Disjunction](#prod-Disjunction)\[~UnicodeMode, ~UnicodeSetsMode, ?NamedCaptureGroups\] ) (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction)\[~UnicodeMode, ~UnicodeSetsMode, ?NamedCaptureGroups\] ) (? [RegularExpressionModifiers](#prod-RegularExpressionModifiers) \- [RegularExpressionModifiers](#prod-RegularExpressionModifiers) : [Disjunction](#prod-Disjunction)\[~UnicodeMode, ~UnicodeSetsMode, ?NamedCaptureGroups\] ) [InvalidBracedQuantifier](#prod-annexB-InvalidBracedQuantifier) [ExtendedPatternCharacter](#prod-annexB-ExtendedPatternCharacter) [InvalidBracedQuantifier](#prod-annexB-InvalidBracedQuantifier) :: { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] } { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] ,} { [DecimalDigits](#prod-DecimalDigits)\[~Sep\] , [DecimalDigits](#prod-DecimalDigits)\[~Sep\] } [ExtendedPatternCharacter](#prod-annexB-ExtendedPatternCharacter) :: [SourceCharacter](#prod-SourceCharacter) but not one of ^ $ \\ . \* + ? ( ) \[| [AtomEscape](#prod-annexB-AtomEscape)\[UnicodeMode, NamedCaptureGroups\] :: \[+UnicodeMode\] [DecimalEscape](#prod-DecimalEscape) \[~UnicodeMode\] [DecimalEscape](#prod-DecimalEscape) but only if the [CapturingGroupNumber](#sec-patterns-static-semantics-capturing-group-number) of [DecimalEscape](#prod-DecimalEscape) is ≤ [CountLeftCapturingParensWithin](#sec-countleftcapturingparenswithin)(the [Pattern](#prod-Pattern) containing [DecimalEscape](#prod-DecimalEscape)) [CharacterClassEscape](#prod-CharacterClassEscape)\[?UnicodeMode\] [CharacterEscape](#prod-annexB-CharacterEscape)\[?UnicodeMode, ?NamedCaptureGroups\] \[+NamedCaptureGroups\] k [GroupName](#prod-GroupName)\[?UnicodeMode\] [CharacterEscape](#prod-annexB-CharacterEscape)\[UnicodeMode, NamedCaptureGroups\] :: [ControlEscape](#prod-ControlEscape) c [AsciiLetter](#prod-AsciiLetter) 0 \[lookahead ∉ [DecimalDigit](#prod-DecimalDigit)\] [HexEscapeSequence](#prod-HexEscapeSequence) [RegExpUnicodeEscapeSequence](#prod-RegExpUnicodeEscapeSequence)\[?UnicodeMode\] \[~UnicodeMode\] [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) [IdentityEscape](#prod-annexB-IdentityEscape)\[?UnicodeMode, ?NamedCaptureGroups\] [IdentityEscape](#prod-annexB-IdentityEscape)\[UnicodeMode, NamedCaptureGroups\] :: \[+UnicodeMode\] [SyntaxCharacter](#prod-SyntaxCharacter) \[+UnicodeMode\] / \[~UnicodeMode\] [SourceCharacterIdentityEscape](#prod-annexB-SourceCharacterIdentityEscape)\[?NamedCaptureGroups\] [SourceCharacterIdentityEscape](#prod-annexB-SourceCharacterIdentityEscape)\[NamedCaptureGroups\] :: \[~NamedCaptureGroups\] [SourceCharacter](#prod-SourceCharacter) but not c \[+NamedCaptureGroups\] [SourceCharacter](#prod-SourceCharacter) but not one of c or k [ClassAtomNoDash](#prod-annexB-ClassAtomNoDash)\[UnicodeMode, NamedCaptureGroups\] :: [SourceCharacter](#prod-SourceCharacter) but not one of \\ or \] or \- \\ [ClassEscape](#prod-annexB-ClassEscape)\[?UnicodeMode, ?NamedCaptureGroups\] \\ \[lookahead = c\] [ClassEscape](#prod-annexB-ClassEscape)\[UnicodeMode, NamedCaptureGroups\] :: b \[+UnicodeMode\] \- \[~UnicodeMode\] c [ClassControlLetter](#prod-annexB-ClassControlLetter) [CharacterClassEscape](#prod-CharacterClassEscape)\[?UnicodeMode\] [CharacterEscape](#prod-annexB-CharacterEscape)\[?UnicodeMode, ?NamedCaptureGroups\] [ClassControlLetter](#prod-annexB-ClassControlLetter) :: [DecimalDigit](#prod-DecimalDigit) \_ Note

When the same left-hand sides occurs with both \[+UnicodeMode\] and \[~UnicodeMode\] guards it is to control the disambiguation priority.


# B.1.2.1 Static Semantics: Early Errors

The semantics of [22.2.1.1](#sec-patterns-static-semantics-early-errors) is extended as follows:

[ExtendedAtom](#prod-annexB-ExtendedAtom) :: [InvalidBracedQuantifier](#prod-annexB-InvalidBracedQuantifier)

-   It is a Syntax Error if any source text is matched by this production.

Additionally, the rules for the following productions are modified with the addition of the highlighted text:

[NonemptyClassRanges](#prod-NonemptyClassRanges) :: [ClassAtom](#prod-ClassAtom) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the first [ClassAtom](#prod-ClassAtom) is true or [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the second [ClassAtom](#prod-ClassAtom) is true and this production has a <sub>\[UnicodeMode\]</sub> parameter.
-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the first [ClassAtom](#prod-ClassAtom) is false, [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of the second [ClassAtom](#prod-ClassAtom) is false, and the [CharacterValue](#sec-patterns-static-semantics-character-value) of the first [ClassAtom](#prod-ClassAtom) is strictly greater than the [CharacterValue](#sec-patterns-static-semantics-character-value) of the second [ClassAtom](#prod-ClassAtom).

[NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash) :: [ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) is true or [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtom](#prod-ClassAtom) is true and this production has a <sub>\[UnicodeMode\]</sub> parameter.
-   It is a Syntax Error if [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) is false, [IsCharacterClass](#sec-patterns-static-semantics-is-character-class) of [ClassAtom](#prod-ClassAtom) is false, and the [CharacterValue](#sec-patterns-static-semantics-character-value) of [ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) is strictly greater than the [CharacterValue](#sec-patterns-static-semantics-character-value) of [ClassAtom](#prod-ClassAtom).


# B.1.2.2 Static Semantics: CountLeftCapturingParensWithin and CountLeftCapturingParensBefore

In the definitions of [CountLeftCapturingParensWithin](#sec-countleftcapturingparenswithin) and [CountLeftCapturingParensBefore](#sec-countleftcapturingparensbefore), references to “ [Atom](#prod-Atom) :: ( [GroupSpecifier](#prod-GroupSpecifier)opt [Disjunction](#prod-Disjunction) ) ” are to be interpreted as meaning “ [Atom](#prod-Atom) :: ( [GroupSpecifier](#prod-GroupSpecifier)opt [Disjunction](#prod-Disjunction) ) ” or “ [ExtendedAtom](#prod-annexB-ExtendedAtom) :: ( [GroupSpecifier](#prod-GroupSpecifier)opt [Disjunction](#prod-Disjunction) ) ”.


# B.1.2.3 Static Semantics: IsCharacterClass

The semantics of [22.2.1.6](#sec-patterns-static-semantics-is-character-class) is extended as follows:

[ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) :: \\ \[lookahead = c\]

1.  Return false.


# B.1.2.4 Static Semantics: CharacterValue

The semantics of [22.2.1.7](#sec-patterns-static-semantics-character-value) is extended as follows:

[ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) :: \\ \[lookahead = c\]

1.  Return the numeric value of U+005C (REVERSE SOLIDUS).

[ClassEscape](#prod-annexB-ClassEscape) :: c [ClassControlLetter](#prod-annexB-ClassControlLetter)

1.  Let _ch_ be the code point matched by [ClassControlLetter](#prod-annexB-ClassControlLetter).
2.  Let _i_ be the numeric value of _ch_.
3.  Return the remainder of dividing _i_ by 32.

[CharacterEscape](#prod-annexB-CharacterEscape) :: [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence)

1.  Return the MV of [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) (see [12.9.4.3](#sec-string-literals-static-semantics-mv)).


# B.1.2.5 Runtime Semantics: CompileSubpattern

The semantics of [CompileSubpattern](#sec-compilesubpattern) is extended as follows:

The rule for [Term](#prod-annexB-Term) :: [QuantifiableAssertion](#prod-annexB-QuantifiableAssertion) [Quantifier](#prod-Quantifier) is the same as for [Term](#prod-annexB-Term) :: [Atom](#prod-Atom) [Quantifier](#prod-Quantifier) but with [QuantifiableAssertion](#prod-annexB-QuantifiableAssertion) substituted for [Atom](#prod-Atom).

The rule for [Term](#prod-annexB-Term) :: [ExtendedAtom](#prod-annexB-ExtendedAtom) [Quantifier](#prod-Quantifier) is the same as for [Term](#prod-annexB-Term) :: [Atom](#prod-Atom) [Quantifier](#prod-Quantifier) but with [ExtendedAtom](#prod-annexB-ExtendedAtom) substituted for [Atom](#prod-Atom).

The rule for [Term](#prod-annexB-Term) :: [ExtendedAtom](#prod-annexB-ExtendedAtom) is the same as for [Term](#prod-annexB-Term) :: [Atom](#prod-Atom) but with [ExtendedAtom](#prod-annexB-ExtendedAtom) substituted for [Atom](#prod-Atom).


# B.1.2.6 Runtime Semantics: CompileAssertion

[CompileAssertion](#sec-compileassertion) rules for the [Assertion](#prod-annexB-Assertion) :: (?= [Disjunction](#prod-Disjunction) ) and [Assertion](#prod-annexB-Assertion) :: (?! [Disjunction](#prod-Disjunction) ) productions are also used for the [QuantifiableAssertion](#prod-annexB-QuantifiableAssertion) productions, but with [QuantifiableAssertion](#prod-annexB-QuantifiableAssertion) substituted for [Assertion](#prod-annexB-Assertion).


# B.1.2.7 Runtime Semantics: CompileAtom

[CompileAtom](#sec-compileatom) rules for the [Atom](#prod-Atom) productions except for [Atom](#prod-Atom) :: [PatternCharacter](#prod-PatternCharacter) are also used for the [ExtendedAtom](#prod-annexB-ExtendedAtom) productions, but with [ExtendedAtom](#prod-annexB-ExtendedAtom) substituted for [Atom](#prod-Atom). The following rules, with parameter _direction_, are also added:

[ExtendedAtom](#prod-annexB-ExtendedAtom) :: \\ \[lookahead = c\]

1.  Let _A_ be the [CharSet](#pattern-charset) containing the single character `\` U+005C (REVERSE SOLIDUS).
2.  Return [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _A_, false, _direction_).

[ExtendedAtom](#prod-annexB-ExtendedAtom) :: [ExtendedPatternCharacter](#prod-annexB-ExtendedPatternCharacter)

1.  Let _ch_ be the character represented by [ExtendedPatternCharacter](#prod-annexB-ExtendedPatternCharacter).
2.  Let _A_ be a one-element [CharSet](#pattern-charset) containing the character _ch_.
3.  Return [CharacterSetMatcher](#sec-runtime-semantics-charactersetmatcher-abstract-operation)(_rer_, _A_, false, _direction_).


# B.1.2.8 Runtime Semantics: CompileToCharSet

The semantics of [22.2.2.9](#sec-compiletocharset) is extended as follows:

The following two rules replace the corresponding rules of [CompileToCharSet](#sec-compiletocharset).

[NonemptyClassRanges](#prod-NonemptyClassRanges) :: [ClassAtom](#prod-ClassAtom) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of the first [ClassAtom](#prod-ClassAtom) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of the second [ClassAtom](#prod-ClassAtom) with argument _rer_.
3.  Let _C_ be [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.
4.  Let _D_ be [CharacterRangeOrUnion](#sec-runtime-semantics-characterrangeorunion-abstract-operation)(_rer_, _A_, _B_).
5.  Return the union of _D_ and _C_.

[NonemptyClassRangesNoDash](#prod-NonemptyClassRangesNoDash) :: [ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) \- [ClassAtom](#prod-ClassAtom) [ClassContents](#prod-ClassContents)

1.  Let _A_ be [CompileToCharSet](#sec-compiletocharset) of [ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) with argument _rer_.
2.  Let _B_ be [CompileToCharSet](#sec-compiletocharset) of [ClassAtom](#prod-ClassAtom) with argument _rer_.
3.  Let _C_ be [CompileToCharSet](#sec-compiletocharset) of [ClassContents](#prod-ClassContents) with argument _rer_.
4.  Let _D_ be [CharacterRangeOrUnion](#sec-runtime-semantics-characterrangeorunion-abstract-operation)(_rer_, _A_, _B_).
5.  Return the union of _D_ and _C_.

In addition, the following rules are added to [CompileToCharSet](#sec-compiletocharset).

[ClassEscape](#prod-annexB-ClassEscape) :: c [ClassControlLetter](#prod-annexB-ClassControlLetter)

1.  Let _cv_ be the [CharacterValue](#sec-patterns-static-semantics-character-value) of this [ClassEscape](#prod-annexB-ClassEscape).
2.  Let _c_ be the character whose character value is _cv_.
3.  Return the [CharSet](#pattern-charset) containing the single character _c_.

[ClassAtomNoDash](#prod-annexB-ClassAtomNoDash) :: \\ \[lookahead = c\]

1.  Return the [CharSet](#pattern-charset) containing the single character `\` U+005C (REVERSE SOLIDUS).

Note

This production can only be reached from the sequence `\c` within a character class where it is not followed by an acceptable control character.


# B.1.2.8.1 CharacterRangeOrUnion ( _rer_, _A_, _B_ )

The abstract operation CharacterRangeOrUnion takes arguments _rer_ (a [RegExp Record](#sec-regexp-records)), _A_ (a [CharSet](#pattern-charset)), and _B_ (a [CharSet](#pattern-charset)) and returns a [CharSet](#pattern-charset). It performs the following steps when called:

1.  If [HasEitherUnicodeFlag](#sec-runtime-semantics-haseitherunicodeflag-abstract-operation)(_rer_) is false, then
    1.  If _A_ does not contain exactly one character or _B_ does not contain exactly one character, then
        1.  Let _C_ be the [CharSet](#pattern-charset) containing the single character `-` U+002D (HYPHEN-MINUS).
        2.  Return the union of [CharSets](#pattern-charset) _A_, _B_ and _C_.
2.  Return [CharacterRange](#sec-runtime-semantics-characterrange-abstract-operation)(_A_, _B_).


# B.1.2.9 Static Semantics: ParsePattern ( _patternText_, _u_, _v_ )

The semantics of [22.2.3.4](#sec-parsepattern) is extended as follows:

The abstract operation [ParsePattern](#sec-parsepattern) takes arguments _patternText_ (a sequence of Unicode code points), _u_ (a Boolean), and _v_ (a Boolean). It performs the following steps when called:

1.  If _v_ is true and _u_ is true, then
    1.  Let _parseResult_ be a [List](#sec-list-and-record-specification-type) containing one or more SyntaxError objects.
2.  Else if _v_ is true, then
    1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_patternText_, [Pattern](#prod-Pattern)\[+UnicodeMode, +UnicodeSetsMode, +NamedCaptureGroups\]).
3.  Else if _u_ is true, then
    1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_patternText_, [Pattern](#prod-Pattern)\[+UnicodeMode, ~UnicodeSetsMode, +NamedCaptureGroups\]).
4.  Else,
    1.  Let _parseResult_ be [ParseText](#sec-parsetext)(_patternText_, [Pattern](#prod-Pattern)\[~UnicodeMode, ~UnicodeSetsMode, ~NamedCaptureGroups\]).
    2.  If _parseResult_ is a [Parse Node](#sec-syntactic-grammar) and _parseResult_ contains a [GroupName](#prod-GroupName), then
        1.  Set _parseResult_ to [ParseText](#sec-parsetext)(_patternText_, [Pattern](#prod-Pattern)\[~UnicodeMode, ~UnicodeSetsMode, +NamedCaptureGroups\]).
5.  Return _parseResult_.


# B.2 Additional Built-in Properties

When the ECMAScript [host](#host) is a web browser the following additional properties of the standard built-in objects are defined.


# B.2.1 Additional Properties of the Global Object

The entries in [Table 100](#table-additional-well-known-intrinsic-objects) are added to [Table 6](#table-well-known-intrinsic-objects).

Table 100: Additional Well-known Intrinsic Objects

<table><thead><tr><th>Intrinsic Name</th><th>Global Name</th><th>ECMAScript Language Association</th></tr></thead><tbody><tr><td><emu-xref href="#sec-escape-string" id="_ref_17108"><a href="#sec-escape-string">%escape%</a></emu-xref></td><td><code>escape</code></td><td>The <code>escape</code> function (<emu-xref href="#sec-escape-string" id="_ref_864"><a href="#sec-escape-string">B.2.1.1</a></emu-xref>)</td></tr><tr><td><emu-xref href="#sec-unescape-string" id="_ref_17109"><a href="#sec-unescape-string">%unescape%</a></emu-xref></td><td><code>unescape</code></td><td>The <code>unescape</code> function (<emu-xref href="#sec-unescape-string" id="_ref_865"><a href="#sec-unescape-string">B.2.1.2</a></emu-xref>)</td></tr></tbody></table>


# B.2.1.1 escape ( _string_ )

This function is a property of the [global object](#sec-global-object). It computes a new version of a String value in which certain code units have been replaced by a hexadecimal escape sequence.

When replacing a code unit of numeric value less than or equal to 0x00FF, a two-digit escape sequence of the form `%_xx_` is used. When replacing a code unit of numeric value strictly greater than 0x00FF, a four-digit escape sequence of the form `%u_xxxx_` is used.

It is the %escape% intrinsic object.

It performs the following steps when called:

1.  Set _string_ to ? [ToString](#sec-tostring)(_string_).
2.  Let _len_ be the length of _string_.
3.  Let _R_ be the empty String.
4.  Let _unescapedSet_ be the [string-concatenation](#string-concatenation) of [the ASCII word characters](#ASCII-word-characters) and "@\*+-./".
5.  Let _k_ be 0.
6.  Repeat, while _k_ < _len_,
    1.  Let _C_ be the code unit at index _k_ within _string_.
    2.  If _unescapedSet_ contains _C_, then
        1.  Let _S_ be _C_.
    3.  Else,
        1.  Let _n_ be the numeric value of _C_.
        2.  If _n_ < 256, then
            1.  Let _hex_ be the String representation of _n_, formatted as an uppercase hexadecimal number.
            2.  Let _S_ be the [string-concatenation](#string-concatenation) of "%" and [StringPad](#sec-stringpad)(_hex_, 2, "0", start).
        3.  Else,
            1.  Let _hex_ be the String representation of _n_, formatted as an uppercase hexadecimal number.
            2.  Let _S_ be the [string-concatenation](#string-concatenation) of "%u" and [StringPad](#sec-stringpad)(_hex_, 4, "0", start).
    4.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _S_.
    5.  Set _k_ to _k_ + 1.
7.  Return _R_.

Note

The encoding is partly based on the encoding described in RFC 1738, but the entire encoding specified in this standard is described above without regard to the contents of RFC 1738. This encoding does not reflect changes to RFC 1738 made by RFC 3986.


# B.2.1.2 unescape ( _string_ )

This function is a property of the [global object](#sec-global-object). It computes a new version of a String value in which each escape sequence of the sort that might be introduced by the `escape` function is replaced with the code unit that it represents.

It is the %unescape% intrinsic object.

It performs the following steps when called:

1.  Set _string_ to ? [ToString](#sec-tostring)(_string_).
2.  Let _len_ be the length of _string_.
3.  Let _R_ be the empty String.
4.  Let _k_ be 0.
5.  Repeat, while _k_ < _len_,
    1.  Let _C_ be the code unit at index _k_ within _string_.
    2.  If _C_ is the code unit 0x0025 (PERCENT SIGN), then
        1.  Let _hexDigits_ be the empty String.
        2.  Let _optionalAdvance_ be 0.
        3.  If _k_ + 5 < _len_ and the code unit at index _k_ + 1 within _string_ is the code unit 0x0075 (LATIN SMALL LETTER U), then
            1.  Set _hexDigits_ to the [substring](#substring) of _string_ from _k_ + 2 to _k_ + 6.
            2.  Set _optionalAdvance_ to 5.
        4.  Else if _k_ + 3 ≤ _len_, then
            1.  Set _hexDigits_ to the [substring](#substring) of _string_ from _k_ + 1 to _k_ + 3.
            2.  Set _optionalAdvance_ to 2.
        5.  Let _parseResult_ be [ParseText](#sec-parsetext)(_hexDigits_, [HexDigits](#prod-HexDigits)\[~Sep\]).
        6.  If _parseResult_ is a [Parse Node](#sec-syntactic-grammar), then
            1.  Let _n_ be the MV of _parseResult_.
            2.  Set _C_ to the code unit whose numeric value is _n_.
            3.  Set _k_ to _k_ + _optionalAdvance_.
    3.  Set _R_ to the [string-concatenation](#string-concatenation) of _R_ and _C_.
    4.  Set _k_ to _k_ + 1.
6.  Return _R_.


# B.2.2 Additional Properties of the String.prototype Object


# B.2.2.1 String.prototype.substr ( _start_, _length_ )

This method returns a substring of the result of converting the this value to a String, starting from index _start_ and running for _length_ code units (or through the end of the String if _length_ is undefined). If _start_ is negative, it is treated as _sourceLength_ + _start_ where _sourceLength_ is the length of the String. The result [is a String](#sec-ecmascript-language-types-string-type) value, not a String object.

It performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_O_).
3.  Let _S_ be ? [ToString](#sec-tostring)(_O_).
4.  Let _size_ be the length of _S_.
5.  Let _intStart_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_start_).
6.  If _intStart_ = -∞, set _intStart_ to 0.
7.  Else if _intStart_ < 0, set _intStart_ to [max](#eqn-max)(_size_ + _intStart_, 0).
8.  Else, set _intStart_ to [min](#eqn-min)(_intStart_, _size_).
9.  If _length_ is undefined, let _intLength_ be _size_; otherwise let _intLength_ be ? [ToIntegerOrInfinity](#sec-tointegerorinfinity)(_length_).
10.  Set _intLength_ to the result of [clamping](#clamping) _intLength_ between 0 and _size_.
11.  Let _intEnd_ be [min](#eqn-min)(_intStart_ + _intLength_, _size_).
12.  Return the [substring](#substring) of _S_ from _intStart_ to _intEnd_.

Note

This method is intentionally generic; it does not require that its this value be a String object. Therefore it can be transferred to other kinds of objects for use as a method.


# B.2.2.2 String.prototype.anchor ( _name_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "a", "name", _name_).


# B.2.2.2.1 CreateHTML ( _string_, _tag_, _attribute_, _value_ )

The abstract operation CreateHTML takes arguments _string_ (an [ECMAScript language value](#sec-ecmascript-language-types)), _tag_ (a String), _attribute_ (a String), and _value_ (an [ECMAScript language value](#sec-ecmascript-language-types)) and returns either a [normal completion containing](#sec-completion-record-specification-type) a String or a [throw completion](#sec-completion-record-specification-type). It performs the following steps when called:

1.  Perform ? [RequireObjectCoercible](#sec-requireobjectcoercible)(_string_).
2.  Let _S_ be ? [ToString](#sec-tostring)(_string_).
3.  Let _p1_ be the [string-concatenation](#string-concatenation) of "<" and _tag_.
4.  If _attribute_ is not the empty String, then
    1.  Let _V_ be ? [ToString](#sec-tostring)(_value_).
    2.  Let _escapedV_ be the String value that is the same as _V_ except that each occurrence of the code unit 0x0022 (QUOTATION MARK) in _V_ has been replaced with the six code unit sequence "&quot;".
    3.  Set _p1_ to the [string-concatenation](#string-concatenation) of:
        -   _p1_
        -   the code unit 0x0020 (SPACE)
        -   _attribute_
        -   the code unit 0x003D (EQUALS SIGN)
        -   the code unit 0x0022 (QUOTATION MARK)
        -   _escapedV_
        -   the code unit 0x0022 (QUOTATION MARK)
5.  Let _p2_ be the [string-concatenation](#string-concatenation) of _p1_ and ">".
6.  Let _p3_ be the [string-concatenation](#string-concatenation) of _p2_ and _S_.
7.  Let _p4_ be the [string-concatenation](#string-concatenation) of _p3_, "</", _tag_, and ">".
8.  Return _p4_.


# B.2.2.3 String.prototype.big ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "big", "", "").


# B.2.2.4 String.prototype.blink ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "blink", "", "").


# B.2.2.5 String.prototype.bold ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "b", "", "").


# B.2.2.6 String.prototype.fixed ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "tt", "", "").


# B.2.2.7 String.prototype.fontcolor ( _colour_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "font", "color", _colour_).


# B.2.2.8 String.prototype.fontsize ( _size_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "font", "size", _size_).


# B.2.2.9 String.prototype.italics ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "i", "", "").


# B.2.2.10 String.prototype.link ( _url_ )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "a", "href", _url_).


# B.2.2.11 String.prototype.small ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "small", "", "").


# B.2.2.12 String.prototype.strike ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "strike", "", "").


# B.2.2.13 String.prototype.sub ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "sub", "", "").


# B.2.2.14 String.prototype.sup ( )

This method performs the following steps when called:

1.  Let _S_ be the this value.
2.  Return ? [CreateHTML](#sec-createhtml)(_S_, "sup", "", "").


# B.2.2.15 String.prototype.trimLeft ( )

Note

The property "trimStart" is preferred. The "trimLeft" property is provided principally for compatibility with old code. It is recommended that the "trimStart" property be used in new ECMAScript code.

The initial value of the "trimLeft" property is %String.prototype.trimStart%, defined in [22.1.3.34](#sec-string.prototype.trimstart).


# B.2.2.16 String.prototype.trimRight ( )

Note

The property "trimEnd" is preferred. The "trimRight" property is provided principally for compatibility with old code. It is recommended that the "trimEnd" property be used in new ECMAScript code.

The initial value of the "trimRight" property is %String.prototype.trimEnd%, defined in [22.1.3.33](#sec-string.prototype.trimend).


# B.2.3 Additional Properties of the Date.prototype Object


# B.2.3.1 Date.prototype.getYear ( )

Note

The `getFullYear` method is preferred for nearly all purposes, because it avoids the “year 2000 problem.”

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  If _t_ is NaN, return NaN.
5.  Return [YearFromTime](#sec-yearfromtime)([LocalTime](#sec-localtime)(_t_)) - 1900<sub>𝔽</sub>.


# B.2.3.2 Date.prototype.setYear ( _year_ )

Note

The `setFullYear` method is preferred for nearly all purposes, because it avoids the “year 2000 problem.”

This method performs the following steps when called:

1.  Let _dateObject_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_dateObject_, _\[\[DateValue\]\]_).
3.  Let _t_ be _dateObject_._\[\[DateValue\]\]_.
4.  Let _y_ be ? [ToNumber](#sec-tonumber)(_year_).
5.  If _t_ is NaN, set _t_ to +0<sub>𝔽</sub>; otherwise set _t_ to [LocalTime](#sec-localtime)(_t_).
6.  Let _yyyy_ be [MakeFullYear](#sec-makefullyear)(_y_).
7.  Let _d_ be [MakeDay](#sec-makeday)(_yyyy_, [MonthFromTime](#sec-monthfromtime)(_t_), [DateFromTime](#sec-datefromtime)(_t_)).
8.  Let _date_ be [MakeDate](#sec-makedate)(_d_, [TimeWithinDay](#sec-timewithinday)(_t_)).
9.  Let _u_ be [TimeClip](#sec-timeclip)([UTC](#sec-utc-t)(_date_)).
10.  Set _dateObject_._\[\[DateValue\]\]_ to _u_.
11.  Return _u_.


# B.2.3.3 Date.prototype.toGMTString ( )

Note

The `toUTCString` method is preferred. This method is provided principally for compatibility with old code.

The initial value of the "toGMTString" property is %Date.prototype.toUTCString%, defined in [21.4.4.43](#sec-date.prototype.toutcstring).


# B.2.4 Additional Properties of the RegExp.prototype Object


# B.2.4.1 RegExp.prototype.compile ( _pattern_, _flags_ )

This method performs the following steps when called:

1.  Let _O_ be the this value.
2.  Perform ? [RequireInternalSlot](#sec-requireinternalslot)(_O_, _\[\[RegExpMatcher\]\]_).
3.  If _pattern_ [is an Object](#sec-object-type) and _pattern_ has a _\[\[RegExpMatcher\]\]_ internal slot, then
    1.  If _flags_ is not undefined, throw a TypeError exception.
    2.  Let _P_ be _pattern_._\[\[OriginalSource\]\]_.
    3.  Let _F_ be _pattern_._\[\[OriginalFlags\]\]_.
4.  Else,
    1.  Let _P_ be _pattern_.
    2.  Let _F_ be _flags_.
5.  Return ? [RegExpInitialize](#sec-regexpinitialize)(_O_, _P_, _F_).

Note

This method completely reinitializes the this value RegExp with a new pattern and flags. An implementation may interpret use of this method as an assertion that the resulting RegExp object will be used multiple times and hence is a candidate for extra optimization.


# B.3 Other Additional Features


# B.3.1 Labelled Function Declarations

Prior to ECMAScript 2015, the specification of [LabelledStatement](#prod-LabelledStatement) did not allow for the association of a statement label with a [FunctionDeclaration](#prod-FunctionDeclaration). However, a labelled [FunctionDeclaration](#prod-FunctionDeclaration) was an allowable extension for [non-strict code](#non-strict-code) and most browser-hosted ECMAScript implementations supported that extension. In ECMAScript 2015 and later, the grammar production for [LabelledStatement](#prod-LabelledStatement) permits use of [FunctionDeclaration](#prod-FunctionDeclaration) as a [LabelledItem](#prod-LabelledItem) but [14.13.1](#sec-labelled-statements-static-semantics-early-errors) includes an Early Error rule that produces a Syntax Error if that occurs. That rule is then modified to suppress the Syntax Error in [non-strict code](#non-strict-code) if [the host supports](#sec-additional-ecmascript-features-for-web-browsers) this feature.

Note

The [early error](#early-error) rules for [WithStatement](#prod-WithStatement), [IfStatement](#prod-annexB-IfStatement), and [IterationStatement](#prod-IterationStatement) prevent these statements from containing a labelled [FunctionDeclaration](#prod-FunctionDeclaration) in [non-strict code](#non-strict-code).


# B.3.2 Block-Level Function Declarations Web Legacy Compatibility Semantics

Prior to ECMAScript 2015, the ECMAScript specification did not define the occurrence of a [FunctionDeclaration](#prod-FunctionDeclaration) as an element of a [Block](#prod-Block) statement's [StatementList](#prod-StatementList). However, support for that form of [FunctionDeclaration](#prod-FunctionDeclaration) was an allowable extension and most browser-hosted ECMAScript implementations permitted them. Unfortunately, the semantics of such declarations differ among those implementations. Because of these semantic differences, existing web [ECMAScript source text](#sec-source-text) that uses [Block](#prod-Block) level function declarations is only portable among browser implementations if the usage only depends upon the semantic intersection of all of the browser implementations for such declarations. The following are the use cases that fall within that intersection semantics:

1.  A function is declared and only referenced within a single block.
    
    -   One or more [FunctionDeclaration](#prod-FunctionDeclaration)s whose [BindingIdentifier](#prod-BindingIdentifier) is the name _f_ occur within the function code of an enclosing function _g_ and that declaration is nested within a [Block](#prod-Block).
    -   No other declaration of _f_ that is not a `var` declaration occurs within the function code of _g_.
    -   All occurrences of _f_ as an [IdentifierReference](#prod-IdentifierReference) are within the [StatementList](#prod-StatementList) of the [Block](#prod-Block) containing the declaration of _f_.
2.  A function is declared and possibly used within a single [Block](#prod-Block) but also referenced by an inner function definition that is not contained within that same [Block](#prod-Block).
    
    -   One or more [FunctionDeclaration](#prod-FunctionDeclaration)s whose [BindingIdentifier](#prod-BindingIdentifier) is the name _f_ occur within the function code of an enclosing function _g_ and that declaration is nested within a [Block](#prod-Block).
    -   No other declaration of _f_ that is not a `var` declaration occurs within the function code of _g_.
    -   There may be occurrences of _f_ as an [IdentifierReference](#prod-IdentifierReference) within the [StatementList](#prod-StatementList) of the [Block](#prod-Block) containing the declaration of _f_.
    -   There is at least one occurrence of _f_ as an [IdentifierReference](#prod-IdentifierReference) within another function _h_ that is nested within _g_ and no other declaration of _f_ shadows the references to _f_ from within _h_.
    -   All invocations of _h_ occur after the declaration of _f_ has been evaluated.
3.  A function is declared and possibly used within a single block but also referenced within subsequent blocks.
    
    -   One or more [FunctionDeclaration](#prod-FunctionDeclaration) whose [BindingIdentifier](#prod-BindingIdentifier) is the name _f_ occur within the function code of an enclosing function _g_ and that declaration is nested within a [Block](#prod-Block).
    -   No other declaration of _f_ that is not a `var` declaration occurs within the function code of _g_.
    -   There may be occurrences of _f_ as an [IdentifierReference](#prod-IdentifierReference) within the [StatementList](#prod-StatementList) of the [Block](#prod-Block) containing the declaration of _f_.
    -   There is at least one occurrence of _f_ as an [IdentifierReference](#prod-IdentifierReference) within the function code of _g_ that lexically follows the [Block](#prod-Block) containing the declaration of _f_.

The first use case is interoperable with the semantics of [Block](#prod-Block) level function declarations provided by ECMAScript 2015. Any pre-existing [ECMAScript source text](#sec-source-text) that employs that use case will operate using the Block level function declarations semantics defined by clauses [10](#sec-ordinary-and-exotic-objects-behaviours), [14](#sec-ecmascript-language-statements-and-declarations), and [15](#sec-ecmascript-language-functions-and-classes).

ECMAScript 2015 interoperability for the second and third use cases requires the following extensions to the clause [10](#sec-ordinary-and-exotic-objects-behaviours), clause [15](#sec-ecmascript-language-functions-and-classes), clause [19.2.1](#sec-eval-x) and clause [16.1.7](#sec-globaldeclarationinstantiation) semantics.

If an ECMAScript implementation has a mechanism for reporting diagnostic warning messages, a warning should be produced when code contains a [FunctionDeclaration](#prod-FunctionDeclaration) for which these compatibility semantics are applied and introduce observable differences from non-compatibility semantics. For example, if a var binding is not introduced because its introduction would create an [early error](#early-error), a warning message should not be produced.

This feature involves special semantics at the following points:

-   one of the [early error](#early-error) rules for [Block](#prod-Block) : { [StatementList](#prod-StatementList) } in [14.2.1](#sec-block-static-semantics-early-errors)
-   one of the [early error](#early-error) rules for [SwitchStatement](#prod-SwitchStatement) : switch ( [Expression](#prod-Expression) ) [CaseBlock](#prod-CaseBlock) in [14.12.1](#sec-switch-statement-static-semantics-early-errors)
-   step [32.a](#step-functiondeclarationinstantiation-web-compat-insertion-point) in [FunctionDeclarationInstantiation](#sec-functiondeclarationinstantiation)
-   step [3.a.ii.1](#step-blockdeclarationinstantiation-createmutablebinding) in [BlockDeclarationInstantiation](#sec-blockdeclarationinstantiation)
-   step [3.b.iii](#step-blockdeclarationinstantiation-initializebinding) in [BlockDeclarationInstantiation](#sec-blockdeclarationinstantiation)
-   step [12](#step-globaldeclarationinstantiation-web-compat-insertion-point) in [GlobalDeclarationInstantiation](#sec-globaldeclarationinstantiation)
-   step [13](#step-evaldeclarationinstantiation-web-compat-insertion-point) in [EvalDeclarationInstantiation](#sec-evaldeclarationinstantiation)


# B.3.3 FunctionDeclarations in IfStatement Statement Clauses

The following augments the [IfStatement](#prod-annexB-IfStatement) production in [14.6](#sec-if-statement):

[IfStatement](#prod-annexB-IfStatement)\[Yield, Await, Return\] : if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] else [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\] else [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] else [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] if ( [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] \[lookahead ≠ else\]

This production only applies when parsing [non-strict code](#non-strict-code). [Source text matched by](#sec-algorithm-conventions-syntax-directed-operations) this production is processed as if each matching occurrence of [FunctionDeclaration](#prod-FunctionDeclaration)\[?Yield, ?Await, ~Default\] was the sole [StatementListItem](#prod-StatementListItem) of a [BlockStatement](#prod-BlockStatement) occupying that position in the source text. The semantics of such a synthetic [BlockStatement](#prod-BlockStatement) includes the web legacy compatibility semantics specified in [B.3.2](#sec-block-level-function-declarations-web-legacy-compatibility-semantics).


# B.3.4 VariableStatements in Catch Blocks

In this feature, the [Block](#prod-Block) of a [Catch](#prod-Catch) clause may contain `var` declarations that bind a name that is also bound by the [CatchParameter](#prod-CatchParameter). This is accomplished by modifying an [early error](#early-error) rule for [Catch](#prod-Catch) : catch ( [CatchParameter](#prod-CatchParameter) ) [Block](#prod-Block) in [14.15.1](#sec-try-statement-static-semantics-early-errors).

Note

At runtime, such bindings are instantiated in the VariableDeclarationEnvironment. They do not shadow the same-named bindings introduced by the [CatchParameter](#prod-CatchParameter) and hence the [Initializer](#prod-Initializer) for such `var` declarations will assign to the corresponding catch parameter rather than the `var` binding.

This modified behaviour also applies to `var` and `function` declarations introduced by [direct eval](#sec-function-calls-runtime-semantics-evaluation) calls contained within the [Block](#prod-Block) of a [Catch](#prod-Catch) clause. This change is accomplished by modifying steps [3.d.i.2.a.i](#step-evaldeclarationinstantiation-throw-duplicate-binding) and [13.b.ii.4.a.i.i](#step-evaldeclarationinstantiation-web-compat-bindingexists) in [EvalDeclarationInstantiation](#sec-evaldeclarationinstantiation).


# B.3.5 Initializers in ForIn Statement Heads

The following augments the [ForInOfStatement](#prod-annexB-ForInOfStatement) production in [14.7.5](#sec-for-in-and-for-of-statements):

[ForInOfStatement](#prod-annexB-ForInOfStatement)\[Yield, Await, Return\] : for ( var [BindingIdentifier](#prod-BindingIdentifier)\[?Yield, ?Await\] [Initializer](#prod-Initializer)\[~In, ?Yield, ?Await\] in [Expression](#prod-Expression)\[+In, ?Yield, ?Await\] ) [Statement](#prod-Statement)\[?Yield, ?Await, ?Return\]

This production only applies when parsing [non-strict code](#non-strict-code).

The [static semantics](#sec-static-semantic-rules) of [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) in [8.3.1](#sec-static-semantics-containsduplicatelabels) are augmented with the following:

[ForInOfStatement](#prod-annexB-ForInOfStatement) : for ( var [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsDuplicateLabels](#sec-static-semantics-containsduplicatelabels) of [Statement](#prod-Statement) with argument _labelSet_.

The [static semantics](#sec-static-semantic-rules) of [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) in [8.3.2](#sec-static-semantics-containsundefinedbreaktarget) are augmented with the following:

[ForInOfStatement](#prod-annexB-ForInOfStatement) : for ( var [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedBreakTarget](#sec-static-semantics-containsundefinedbreaktarget) of [Statement](#prod-Statement) with argument _labelSet_.

The [static semantics](#sec-static-semantic-rules) of [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) in [8.3.3](#sec-static-semantics-containsundefinedcontinuetarget) are augmented with the following:

[ForInOfStatement](#prod-annexB-ForInOfStatement) : for ( var [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Return [ContainsUndefinedContinueTarget](#sec-static-semantics-containsundefinedcontinuetarget) of [Statement](#prod-Statement) with arguments _iterationSet_ and « ».

The [static semantics](#sec-static-semantic-rules) of [IsDestructuring](#sec-static-semantics-isdestructuring) in [14.7.5.2](#sec-static-semantics-isdestructuring) are augmented with the following:

[BindingIdentifier](#prod-BindingIdentifier) : [Identifier](#prod-Identifier) yield await

1.  Return false.

The [static semantics](#sec-static-semantic-rules) of [VarDeclaredNames](#sec-static-semantics-vardeclarednames) in [8.2.6](#sec-static-semantics-vardeclarednames) are augmented with the following:

[ForInOfStatement](#prod-annexB-ForInOfStatement) : for ( var [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _names1_ be the [BoundNames](#sec-static-semantics-boundnames) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _names2_ be the [VarDeclaredNames](#sec-static-semantics-vardeclarednames) of [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _names1_ and _names2_.

The [static semantics](#sec-static-semantic-rules) of [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) in [8.2.7](#sec-static-semantics-varscopeddeclarations) are augmented with the following:

[ForInOfStatement](#prod-annexB-ForInOfStatement) : for ( var [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _declarations1_ be « [BindingIdentifier](#prod-BindingIdentifier) ».
2.  Let _declarations2_ be the [VarScopedDeclarations](#sec-static-semantics-varscopeddeclarations) of [Statement](#prod-Statement).
3.  Return the [list-concatenation](#list-concatenation) of _declarations1_ and _declarations2_.

The [runtime semantics](#sec-runtime-semantics) of [ForInOfLoopEvaluation](#sec-runtime-semantics-forinofloopevaluation) in [14.7.5.5](#sec-runtime-semantics-forinofloopevaluation) are augmented with the following:

[ForInOfStatement](#prod-annexB-ForInOfStatement) : for ( var [BindingIdentifier](#prod-BindingIdentifier) [Initializer](#prod-Initializer) in [Expression](#prod-Expression) ) [Statement](#prod-Statement)

1.  Let _bindingId_ be the [StringValue](#sec-static-semantics-stringvalue) of [BindingIdentifier](#prod-BindingIdentifier).
2.  Let _lhs_ be ? [ResolveBinding](#sec-resolvebinding)(_bindingId_).
3.  If [IsAnonymousFunctionDefinition](#sec-isanonymousfunctiondefinition)([Initializer](#prod-Initializer)) is true, then
    1.  Let _value_ be ? [NamedEvaluation](#sec-runtime-semantics-namedevaluation) of [Initializer](#prod-Initializer) with argument _bindingId_.
4.  Else,
    1.  Let _rhs_ be ? [Evaluation](#sec-evaluation) of [Initializer](#prod-Initializer).
    2.  Let _value_ be ? [GetValue](#sec-getvalue)(_rhs_).
5.  Perform ? [PutValue](#sec-putvalue)(_lhs_, _value_).
6.  Let _keyResult_ be ? [ForIn/OfHeadEvaluation](#sec-runtime-semantics-forinofheadevaluation)(« », [Expression](#prod-Expression), enumerate).
7.  Return ? [ForIn/OfBodyEvaluation](#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset)([BindingIdentifier](#prod-BindingIdentifier), [Statement](#prod-Statement), _keyResult_, enumerate, var-binding, _labelSet_).


# B.3.6 The _\[\[IsHTMLDDA\]\]_ Internal Slot

An _\[\[IsHTMLDDA\]\]_ internal slot may exist on [host-defined](#host-defined) objects. Objects with an _\[\[IsHTMLDDA\]\]_ internal slot behave like undefined in the [ToBoolean](#sec-toboolean) and [IsLooselyEqual](#sec-islooselyequal) [abstract operations](#sec-algorithm-conventions-abstract-operations) and when used as an operand for the [`typeof` operator](#sec-typeof-operator).

Note

Objects with an _\[\[IsHTMLDDA\]\]_ internal slot are never created by this specification. However, the [`document.all` object](https://html.spec.whatwg.org/multipage/obsolete.html#dom-document-all) in web browsers is a [host-defined](#host-defined) [exotic object](#exotic-object) with this slot that exists for web compatibility purposes. There are no other known examples of this type of object and implementations should not create any with the exception of `document.all`.

This feature involves special semantics at the following points:

-   step [3](#step-to-boolean-web-compat-insertion-point) in [ToBoolean](#sec-toboolean)
-   step [4](#step-abstract-equality-comparison-web-compat-insertion-point) in [IsLooselyEqual](#sec-islooselyequal)
-   step [12](#step-typeof-web-compat-insertion-point) in the evaluation semantics for `typeof`


# B.3.7 Non-default behaviour in HostMakeJobCallback

The [HostMakeJobCallback](#sec-hostmakejobcallback) abstract operation allows [hosts](#host) which are web browsers to specify non-default behaviour.


# B.3.8 Non-default behaviour in HostEnsureCanAddPrivateElement

The [HostEnsureCanAddPrivateElement](#sec-hostensurecanaddprivateelement) abstract operation allows [hosts](#host) which are web browsers to specify non-default behaviour.


# B.3.9 Runtime Errors for Function Call Assignment Targets

When a function call ([13.3.6](#sec-function-calls)) is used as an assignment target in [non-strict code](#non-strict-code), instead of producing an [early error](#early-error), a ReferenceError exception is thrown during evaluation of the assignment.

Note

When the assignment target is the [LeftHandSideExpression](#prod-LeftHandSideExpression) of an [AssignmentExpression](#prod-AssignmentExpression), the assignment operator must be `=` or an [AssignmentOperator](#prod-AssignmentOperator); in particular, the allowance here does not apply to the logical assignment operators (`??=`, `&&=`, `||=`).

See step [1](#step-assignmenttargettype-web-compat) of [AssignmentTargetType](#sec-static-semantics-assignmenttargettype) for [CallExpression](#prod-CallExpression) : [CoverCallExpressionAndAsyncArrowHead](#prod-CoverCallExpressionAndAsyncArrowHead) and [CallExpression](#prod-CallExpression) : [CallExpression](#prod-CallExpression) [Arguments](#prod-Arguments) .


# Annex C (informative) The Strict Mode of ECMAScript

**The strict mode restriction and exceptions**

-   `implements`, `interface`, `let`, `package`, `private`, `protected`, `public`, `static`, and `yield` are [reserved words](#sec-keywords-and-reserved-words) within [strict mode code](#sec-strict-mode-code). ([12.7.2](#sec-keywords-and-reserved-words)).
-   A conforming implementation, when processing [strict mode code](#sec-strict-mode-code), must disallow instances of the productions [NumericLiteral](#prod-NumericLiteral) :: [LegacyOctalIntegerLiteral](#prod-LegacyOctalIntegerLiteral) and [DecimalIntegerLiteral](#prod-DecimalIntegerLiteral) :: [NonOctalDecimalIntegerLiteral](#prod-NonOctalDecimalIntegerLiteral) .
-   A conforming implementation, when processing [strict mode code](#sec-strict-mode-code), must disallow instances of the productions [EscapeSequence](#prod-EscapeSequence) :: [LegacyOctalEscapeSequence](#prod-LegacyOctalEscapeSequence) and [EscapeSequence](#prod-EscapeSequence) :: [NonOctalDecimalEscapeSequence](#prod-NonOctalDecimalEscapeSequence) .
-   Assignment to an undeclared identifier or otherwise unresolvable reference does not create a property in the [global object](#sec-global-object). When a simple assignment occurs within [strict mode code](#sec-strict-mode-code), its [LeftHandSideExpression](#prod-LeftHandSideExpression) must not evaluate to an unresolvable Reference. If it does a ReferenceError exception is thrown ([6.2.5.6](#sec-putvalue)). The [LeftHandSideExpression](#prod-LeftHandSideExpression) also may not be a reference to a [data property](#sec-object-type) with the attribute value { _\[\[Writable\]\]_: false }, to an [accessor property](#sec-object-type) with the attribute value { _\[\[Set\]\]_: undefined }, nor to a non-existent property of an object whose _\[\[Extensible\]\]_ internal slot is false. In these cases a `TypeError` exception is thrown ([13.15](#sec-assignment-operators)).
-   An [IdentifierReference](#prod-IdentifierReference) with the [StringValue](#sec-static-semantics-stringvalue) "eval" or "arguments" may not appear as the [LeftHandSideExpression](#prod-LeftHandSideExpression) of an Assignment operator ([13.15](#sec-assignment-operators)) or of an [UpdateExpression](#prod-UpdateExpression) ([13.4](#sec-update-expressions)) or as the [UnaryExpression](#prod-UnaryExpression) operated upon by a Prefix Increment ([13.4.4](#sec-prefix-increment-operator)) or a Prefix Decrement ([13.4.5](#sec-prefix-decrement-operator)) operator.
-   Arguments objects for [strict functions](#strict-function) define a non-configurable [accessor property](#sec-object-type) "callee" which throws a TypeError exception on access ([10.4.4.6](#sec-createunmappedargumentsobject)).
-   Arguments objects for [strict functions](#strict-function) do not dynamically share their [array-indexed](#array-index) property values with the corresponding formal parameter bindings of their functions. ([10.4.4](#sec-arguments-exotic-objects)).
-   For [strict functions](#strict-function), if an arguments object is created the binding of the local identifier `arguments` to the arguments object is immutable and hence may not be the target of an assignment expression. ([10.2.11](#sec-functiondeclarationinstantiation)).
-   It is a SyntaxError if the [StringValue](#sec-static-semantics-stringvalue) of a [BindingIdentifier](#prod-BindingIdentifier) is either "eval" or "arguments" within [strict mode code](#sec-strict-mode-code) ([13.1.1](#sec-identifiers-static-semantics-early-errors)).
-   Strict mode eval code cannot instantiate variables or functions in the variable environment of the caller to eval. Instead, a new variable environment is created and that environment is used for declaration binding instantiation for the eval code ([19.2.1](#sec-eval-x)).
-   If this is evaluated within [strict mode code](#sec-strict-mode-code), then the this value is not coerced to an object. A this value of either undefined or null is not converted to the [global object](#sec-global-object) and primitive values are not converted to wrapper objects. The this value passed via a function call (including calls made using `Function.prototype.apply` and `Function.prototype.call`) do not coerce the passed this value to an object ([10.2.1.2](#sec-ordinarycallbindthis), [20.2.3.1](#sec-function.prototype.apply), [20.2.3.3](#sec-function.prototype.call)).
-   When a `delete` operator occurs within [strict mode code](#sec-strict-mode-code), a SyntaxError is thrown if its [UnaryExpression](#prod-UnaryExpression) is a direct reference to a variable, function argument, or function name ([13.5.1.1](#sec-delete-operator-static-semantics-early-errors)).
-   When a `delete` operator occurs within [strict mode code](#sec-strict-mode-code), a TypeError is thrown if the property to be deleted has the attribute { _\[\[Configurable\]\]_: false } or otherwise cannot be deleted ([13.5.1.2](#sec-delete-operator-runtime-semantics-evaluation)).
-   [Strict mode code](#sec-strict-mode-code) may not include a [WithStatement](#prod-WithStatement). The occurrence of a [WithStatement](#prod-WithStatement) in such a context is a SyntaxError ([14.11.1](#sec-with-statement-static-semantics-early-errors)).
-   It is a SyntaxError if a [CatchParameter](#prod-CatchParameter) occurs within [strict mode code](#sec-strict-mode-code) and the [BoundNames](#sec-static-semantics-boundnames) of [CatchParameter](#prod-CatchParameter) contains either `eval` or `arguments` ([14.15.1](#sec-try-statement-static-semantics-early-errors)).
-   It is a SyntaxError if the same [BindingIdentifier](#prod-BindingIdentifier) appears more than once in the [FormalParameters](#prod-FormalParameters) of a [strict function](#strict-function). An attempt to create such a function using a Function, Generator, or AsyncFunction [constructor](#constructor) is a SyntaxError ([15.2.1](#sec-function-definitions-static-semantics-early-errors), [20.2.1.1.1](#sec-createdynamicfunction)).
-   An implementation may not extend, beyond that defined in this specification, the meanings within [strict functions](#strict-function) of properties named "caller" or "arguments" of function instances.


# Annex D (informative) Host Layering Points

See [4.2](#sec-hosts-and-implementations) for the definition of [host](#host).


# D.1 Host Hooks

**[HostCallJobCallback](#sec-hostcalljobcallback)(...)**

**[HostEnqueueFinalizationRegistryCleanupJob](#sec-host-cleanup-finalization-registry)(...)**

**[HostEnqueueGenericJob](#sec-hostenqueuegenericjob)(...)**

**[HostEnqueuePromiseJob](#sec-hostenqueuepromisejob)(...)**

**[HostEnqueueTimeoutJob](#sec-hostenqueuetimeoutjob)(...)**

**[HostEnsureCanCompileStrings](#sec-hostensurecancompilestrings)(...)**

**[HostFinalizeImportMeta](#sec-hostfinalizeimportmeta)(...)**

**[HostGetImportMetaProperties](#sec-hostgetimportmetaproperties)(...)**

**[HostGrowSharedArrayBuffer](#sec-hostgrowsharedarraybuffer)(...)**

**[HostHasSourceTextAvailable](#sec-hosthassourcetextavailable)(...)**

**[HostLoadImportedModule](#sec-HostLoadImportedModule)(...)**

**[HostGetSupportedImportAttributes](#sec-hostgetsupportedimportattributes)(...)**

**[HostMakeJobCallback](#sec-hostmakejobcallback)(...)**

**[HostPromiseRejectionTracker](#sec-host-promise-rejection-tracker)(...)**

**[HostResizeArrayBuffer](#sec-hostresizearraybuffer)(...)**

**[InitializeHostDefinedRealm](#sec-initializehostdefinedrealm)(...)**


# D.2 Host-defined Fields

_\[\[HostDefined\]\]_ on [Realm Records](#realm-record): See [Table 22](#table-realm-record-fields).

_\[\[HostDefined\]\]_ on [Script Records](#script-record): See [Table 37](#table-script-records).

_\[\[HostDefined\]\]_ on [Module Records](#sec-abstract-module-records): See [Table 41](#table-module-record-fields).

_\[\[HostDefined\]\]_ on [JobCallback Records](#sec-jobcallback-records): See [Table 26](#table-jobcallback-records).

_\[\[HostSynchronizesWith\]\]_ on Candidate Executions: See [Table 99](#table-candidate-execution-records).

_\[\[IsHTMLDDA\]\]_: See [B.3.6](#sec-IsHTMLDDA-internal-slot).


# D.3 Host-defined Objects

The [global object](#sec-global-object): See clause [19](#sec-global-object).


# D.4 Running Jobs

Preparation steps before, and cleanup steps after, invocation of [Job](#job) [Abstract Closures](#sec-abstract-closure). See [9.5](#sec-jobs).


# D.5 Internal Methods of Exotic Objects

Any of the essential internal methods in [Table 4](#table-essential-internal-methods) for any [exotic object](#exotic-object) not specified within this specification.


# D.6 Built-in Objects and Methods

Any built-in objects and methods not defined within this specification, except as restricted in [17.1](#sec-forbidden-extensions).


# Annex E (informative) Corrections and Clarifications in ECMAScript 2015 with Possible Compatibility Impact

[9.1.1.4.14](#sec-candeclareglobalvar)\-[9.1.1.4.17](#sec-createglobalfunctionbinding) Edition 5 and 5.1 used a property existence test to determine whether a [global object](#sec-global-object) property corresponding to a new global declaration already existed. ECMAScript 2015 uses an own property existence test. This corresponds to what has been most commonly implemented by web browsers.

[10.4.2.1](#sec-array-exotic-objects-defineownproperty-p-desc): The 5<sup>th</sup> Edition moved the capture of the current array length prior to the [integer](#integer) conversion of the [array index](#array-index) or new length value. However, the captured length value could become invalid if the conversion process has the side-effect of changing the array length. ECMAScript 2015 specifies that the current array length must be captured after the possible occurrence of such side-effects.

[21.4.1.31](#sec-timeclip): Previous editions permitted the [TimeClip](#sec-timeclip) abstract operation to return either +0<sub>𝔽</sub> or \-0<sub>𝔽</sub> as the representation of a 0 [time value](#sec-time-values-and-time-range). ECMAScript 2015 specifies that +0<sub>𝔽</sub> always returned. This means that for ECMAScript 2015 the [time value](#sec-time-values-and-time-range) of a Date is never observably \-0<sub>𝔽</sub> and methods that return [time values](#sec-time-values-and-time-range) never return \-0<sub>𝔽</sub>.

[21.4.1.32](#sec-date-time-string-format): If a UTC offset representation is not present, the local time zone is used. Edition 5.1 incorrectly stated that a missing time zone should be interpreted as "z".

[21.4.4.36](#sec-date.prototype.toisostring): If the year cannot be represented using the Date Time String Format specified in [21.4.1.32](#sec-date-time-string-format) a RangeError exception is thrown. Previous editions did not specify the behaviour for that case.

[21.4.4.41](#sec-date.prototype.tostring): Previous editions did not specify the value returned by `Date.prototype.toString` when the [time value](#sec-time-values-and-time-range) is NaN. ECMAScript 2015 specifies the result to be the String value "Invalid Date".

[22.2.4.1](#sec-regexp-pattern-flags), [22.2.6.13.1](#sec-escaperegexppattern): Any LineTerminator code points in the value of the "source" property of a RegExp instance must be expressed using an escape sequence. Edition 5.1 only required the escaping of `/`.

[22.2.6.8](#sec-regexp.prototype-%symbol.match%), [22.2.6.11](#sec-regexp.prototype-%symbol.replace%): In previous editions, the specifications for `String.prototype.match` and `String.prototype.replace` was incorrect for cases where the pattern argument was a RegExp value whose `global` flag is set. The previous specifications stated that for each attempt to match the pattern, if `lastIndex` did not change, it should be incremented by 1. The correct behaviour is that `lastIndex` should be incremented by 1 only if the pattern matched the empty String.

[23.1.3.30](#sec-array.prototype.sort): Previous editions did not specify how a NaN value returned by a _comparator_ was interpreted by `Array.prototype.sort`. ECMAScript 2015 specifies that such as value is treated as if +0<sub>𝔽</sub> was returned from the _comparator_. ECMAScript 2015 also specifies that [ToNumber](#sec-tonumber) is applied to the result returned by a _comparator_. In previous editions, the effect of a _comparator_ result that [is not a Number](#sec-ecmascript-language-types-number-type) value was [implementation-defined](#implementation-defined). In practice, implementations call [ToNumber](#sec-tonumber).


# Annex F (informative) Additions and Changes That Introduce Incompatibilities with Prior Editions

[6.2.5](#sec-reference-record-specification-type): In ECMAScript 2015, Function calls are not allowed to return a [Reference Record](#sec-reference-record-specification-type).

[7.1.4.1](#sec-tonumber-applied-to-the-string-type): In ECMAScript 2015, [ToNumber](#sec-tonumber) applied to a String value now recognizes and converts [BinaryIntegerLiteral](#prod-BinaryIntegerLiteral) and [OctalIntegerLiteral](#prod-OctalIntegerLiteral) numeric strings. In previous editions such strings were converted to NaN.

[9.3](#sec-code-realms): In ECMAScript 2018, Template objects are canonicalized based on [Parse Node](#sec-syntactic-grammar) (source location), instead of across all occurrences of that template literal or tagged template in a [Realm](#realm) in previous editions.

[12.2](#sec-white-space): In ECMAScript 2016, Unicode 8.0.0 or higher is mandated, as opposed to ECMAScript 2015 which mandated Unicode 5.1. In particular, this caused U+180E MONGOLIAN VOWEL SEPARATOR, which was in the `Space_Separator` (`Zs`) category and thus treated as whitespace in ECMAScript 2015, to be moved to the `Format` (`Cf`) category (as of Unicode 6.3.0). This causes whitespace-sensitive methods to behave differently. For example, `"\u180E".trim().length` was `0` in previous editions, but `1` in ECMAScript 2016 and later. Additionally, ECMAScript 2017 mandated always using the latest version of the Unicode Standard.

[12.7](#sec-names-and-keywords): In ECMAScript 2015, the valid code points for an [IdentifierName](#prod-IdentifierName) are specified in terms of the Unicode properties “ID\_Start” and “ID\_Continue”. In previous editions, the valid [IdentifierName](#prod-IdentifierName) or [Identifier](#prod-Identifier) code points were specified by enumerating various Unicode code point categories.

[12.10.1](#sec-rules-of-automatic-semicolon-insertion): In ECMAScript 2015, Automatic Semicolon Insertion adds a semicolon at the end of a do-while statement if the semicolon is missing. This change aligns the specification with the actual behaviour of most existing implementations.

[13.2.5.1](#sec-object-initializer-static-semantics-early-errors): In ECMAScript 2015, it is no longer an [early error](#early-error) to have duplicate [property names](#property-name) in Object Initializers.

[13.15.1](#sec-assignment-operators-static-semantics-early-errors): In ECMAScript 2015, [strict mode code](#sec-strict-mode-code) containing an assignment to an immutable binding such as the function name of a [FunctionExpression](#prod-FunctionExpression) does not produce an [early error](#early-error). Instead it produces a runtime error.

[14.2](#sec-block): In ECMAScript 2015, a [StatementList](#prod-StatementList) beginning with the token let followed by the input elements [LineTerminator](#prod-LineTerminator) then [Identifier](#prod-Identifier) is the start of a [LexicalDeclaration](#prod-LexicalDeclaration). In previous editions, automatic semicolon insertion would always insert a semicolon before the [Identifier](#prod-Identifier) input element.

[14.5](#sec-expression-statement): In ECMAScript 2015, a [StatementListItem](#prod-StatementListItem) beginning with the token `let` followed by the token `[` is the start of a [LexicalDeclaration](#prod-LexicalDeclaration). In previous editions such a sequence would be the start of an [ExpressionStatement](#prod-ExpressionStatement).

[14.6.2](#sec-if-statement-runtime-semantics-evaluation): In ECMAScript 2015, the normal result of an [IfStatement](#prod-IfStatement) is never the value empty. If no [Statement](#prod-Statement) part is evaluated or if the evaluated [Statement](#prod-Statement) part produces a [normal completion containing](#sec-completion-record-specification-type) empty, the result of the [IfStatement](#prod-IfStatement) is undefined.

[14.7](#sec-iteration-statements): In ECMAScript 2015, if the `(` token of a for statement is immediately followed by the token sequence `let [` then the `let` is treated as the start of a [LexicalDeclaration](#prod-LexicalDeclaration). In previous editions such a token sequence would be the start of an [Expression](#prod-Expression).

[14.7](#sec-iteration-statements): In ECMAScript 2015, if the ( token of a for-in statement is immediately followed by the token sequence `let [` then the `let` is treated as the start of a [ForDeclaration](#prod-ForDeclaration). In previous editions such a token sequence would be the start of an [LeftHandSideExpression](#prod-LeftHandSideExpression).

[14.7](#sec-iteration-statements): Prior to ECMAScript 2015, an initialization expression could appear as part of the [VariableDeclaration](#prod-VariableDeclaration) that precedes the `in` [keyword](#sec-keywords-and-reserved-words). In ECMAScript 2015, the [ForBinding](#prod-ForBinding) in that same position does not allow the occurrence of such an initializer. In ECMAScript 2017, such an initializer is permitted only in [non-strict code](#non-strict-code).

[14.7](#sec-iteration-statements): In ECMAScript 2015, the result of evaluating an [IterationStatement](#prod-IterationStatement) is never a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is empty. If the [Statement](#prod-Statement) part of an [IterationStatement](#prod-IterationStatement) is not evaluated or if the final evaluation of the [Statement](#prod-Statement) part produces a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is empty, the result of evaluating the [IterationStatement](#prod-IterationStatement) is a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is undefined.

[14.11.2](#sec-with-statement-runtime-semantics-evaluation): In ECMAScript 2015, the result of evaluating a [WithStatement](#prod-WithStatement) is never a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is empty. If evaluation of the [Statement](#prod-Statement) part of a [WithStatement](#prod-WithStatement) produces a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is empty, the result of evaluating the [WithStatement](#prod-WithStatement) is a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is undefined.

[14.12.4](#sec-switch-statement-runtime-semantics-evaluation): In ECMAScript 2015, the result of evaluating a [SwitchStatement](#prod-SwitchStatement) is never a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is empty. If evaluation of the [CaseBlock](#prod-CaseBlock) part of a [SwitchStatement](#prod-SwitchStatement) produces a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is empty, the result of evaluating the [SwitchStatement](#prod-SwitchStatement) is a [normal completion](#sec-completion-record-specification-type) whose _\[\[Value\]\]_ is undefined.

[14.15](#sec-try-statement): In ECMAScript 2015, it is an [early error](#early-error) for a [Catch](#prod-Catch) clause to contain a `var` declaration for the same [Identifier](#prod-Identifier) that appears as the [Catch](#prod-Catch) clause parameter. In previous editions, such a variable declaration would be instantiated in the enclosing variable environment but the declaration's [Initializer](#prod-Initializer) value would be assigned to the [Catch](#prod-Catch) parameter.

[14.15](#sec-try-statement), [19.2.1.3](#sec-evaldeclarationinstantiation): In ECMAScript 2015, a runtime SyntaxError is thrown if a [Catch](#prod-Catch) clause evaluates a non-strict direct `eval` whose eval code includes a `var` or `FunctionDeclaration` declaration that binds the same [Identifier](#prod-Identifier) that appears as the [Catch](#prod-Catch) clause parameter.

[14.15.3](#sec-try-statement-runtime-semantics-evaluation): In ECMAScript 2015, the result of a [TryStatement](#prod-TryStatement) is never the value empty. If the [Block](#prod-Block) part of a [TryStatement](#prod-TryStatement) evaluates to a [normal completion containing](#sec-completion-record-specification-type) empty, the result of the [TryStatement](#prod-TryStatement) is undefined. If the [Block](#prod-Block) part of a [TryStatement](#prod-TryStatement) evaluates to a [throw completion](#sec-completion-record-specification-type) and it has a [Catch](#prod-Catch) part that evaluates to a [normal completion containing](#sec-completion-record-specification-type) empty, the result of the [TryStatement](#prod-TryStatement) is undefined if there is no [Finally](#prod-Finally) clause or if its [Finally](#prod-Finally) clause evaluates to an empty [normal completion](#sec-completion-record-specification-type).

[15.4.5](#sec-runtime-semantics-methoddefinitionevaluation) In ECMAScript 2015, the [function objects](#function-object) that are created as the values of the _\[\[Get\]\]_ or _\[\[Set\]\]_ attribute of [accessor properties](#sec-object-type) in an [ObjectLiteral](#prod-ObjectLiteral) are not [constructor](#constructor) functions and they do not have a "prototype" own property. In the previous edition, they were [constructors](#constructor) and had a "prototype" property.

[20.1.2.6](#sec-object.freeze): In ECMAScript 2015, if the argument to `Object.freeze` is not an object it is treated as if it was a non-extensible [ordinary object](#ordinary-object) with no own properties. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.8](#sec-object.getownpropertydescriptor): In ECMAScript 2015, if the argument to `Object.getOwnPropertyDescriptor` is not an object an attempt is made to coerce the argument using [ToObject](#sec-toobject). If the coercion is successful the result is used in place of the original argument value. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.10](#sec-object.getownpropertynames): In ECMAScript 2015, if the argument to `Object.getOwnPropertyNames` is not an object an attempt is made to coerce the argument using [ToObject](#sec-toobject). If the coercion is successful the result is used in place of the original argument value. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.12](#sec-object.getprototypeof): In ECMAScript 2015, if the argument to `Object.getPrototypeOf` is not an object an attempt is made to coerce the argument using [ToObject](#sec-toobject). If the coercion is successful the result is used in place of the original argument value. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.16](#sec-object.isextensible): In ECMAScript 2015, if the argument to `Object.isExtensible` is not an object it is treated as if it was a non-extensible [ordinary object](#ordinary-object) with no own properties. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.17](#sec-object.isfrozen): In ECMAScript 2015, if the argument to `Object.isFrozen` is not an object it is treated as if it was a non-extensible [ordinary object](#ordinary-object) with no own properties. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.18](#sec-object.issealed): In ECMAScript 2015, if the argument to `Object.isSealed` is not an object it is treated as if it was a non-extensible [ordinary object](#ordinary-object) with no own properties. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.19](#sec-object.keys): In ECMAScript 2015, if the argument to `Object.keys` is not an object an attempt is made to coerce the argument using [ToObject](#sec-toobject). If the coercion is successful the result is used in place of the original argument value. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.20](#sec-object.preventextensions): In ECMAScript 2015, if the argument to `Object.preventExtensions` is not an object it is treated as if it was a non-extensible [ordinary object](#ordinary-object) with no own properties. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.1.2.22](#sec-object.seal): In ECMAScript 2015, if the argument to `Object.seal` is not an object it is treated as if it was a non-extensible [ordinary object](#ordinary-object) with no own properties. In the previous edition, a non-object argument always causes a TypeError to be thrown.

[20.2.3.2](#sec-function.prototype.bind): In ECMAScript 2015, the _\[\[Prototype\]\]_ internal slot of a bound function is set to the _\[\[GetPrototypeOf\]\]_ value of its target function. In the previous edition, _\[\[Prototype\]\]_ was always set to [%Function.prototype%](#sec-properties-of-the-function-prototype-object).

[20.2.4.1](#sec-function-instances-length): In ECMAScript 2015, the "length" property of function instances is configurable. In previous editions it was non-configurable.

[20.5.6.2](#sec-properties-of-the-nativeerror-constructors): In ECMAScript 2015, the _\[\[Prototype\]\]_ internal slot of a _NativeError_ [constructor](#constructor) is the Error [constructor](#constructor). In previous editions it was the [Function prototype object](#sec-properties-of-the-function-prototype-object).

[21.4.4](#sec-properties-of-the-date-prototype-object) In ECMAScript 2015, the [Date prototype object](#sec-properties-of-the-date-prototype-object) is not a Date instance. In previous editions it was a Date instance whose TimeValue was NaN.

[22.1.3.12](#sec-string.prototype.localecompare) In ECMAScript 2015, the `String.prototype.localeCompare` function must treat Strings that are canonically equivalent according to the Unicode Standard as being identical. In previous editions implementations were permitted to ignore canonical equivalence and could instead use a bit-wise comparison.

[22.1.3.28](#sec-string.prototype.tolowercase) and [22.1.3.30](#sec-string.prototype.touppercase) In ECMAScript 2015, lowercase/upper conversion processing operates on code points. In previous editions such the conversion processing was only applied to individual code units. The only affected code points are those in the Deseret block of Unicode.

[22.1.3.32](#sec-string.prototype.trim) In ECMAScript 2015, the `String.prototype.trim` method is defined to recognize white space code points that may exist outside of the Unicode BMP. However, as of Unicode 7 no such code points are defined. In previous editions such code points would not have been recognized as white space.

[22.2.4.1](#sec-regexp-pattern-flags) In ECMAScript 2015, If the _pattern_ argument is a RegExp instance and the _flags_ argument is not undefined, a new RegExp instance is created just like _pattern_ except that _pattern_'s flags are replaced by the argument _flags_. In previous editions a TypeError exception was thrown when _pattern_ was a RegExp instance and _flags_ was not undefined.

[22.2.6](#sec-properties-of-the-regexp-prototype-object) In ECMAScript 2015, the [RegExp prototype object](#sec-properties-of-the-regexp-prototype-object) is not a RegExp instance. In previous editions it was a RegExp instance whose pattern is the empty String.

[22.2.6](#sec-properties-of-the-regexp-prototype-object) In ECMAScript 2015, "source", "global", "ignoreCase", and "multiline" are [accessor properties](#sec-object-type) defined on the [RegExp prototype object](#sec-properties-of-the-regexp-prototype-object). In previous editions they were [data properties](#sec-object-type) defined on RegExp instances.

[25.4.15](#sec-atomics.notify): In ECMAScript 2019, `Atomics.wake` has been renamed to `Atomics.notify` to prevent confusion with `Atomics.wait`.

[27.1.5.4](#sec-asyncfromsynciteratorcontinuation), [27.6.3.6](#sec-asyncgeneratorresume): In ECMAScript 2019, the number of [Jobs](#job) enqueued by `await` was reduced, which could create an observable difference in resolution order between a `then()` call and an `await` expression.


# Bibliography

1.  IEEE 754-2019: *IEEE Standard for Floating-Point Arithmetic*. Institute of Electrical and Electronic Engineers, New York (2019) Note
    
    There are no normative changes between IEEE 754-2008 and IEEE 754-2019 that affect the ECMA-262 specification.
    
2.  *The Unicode Standard*, available at <[https://unicode.org/versions/latest](https://unicode.org/versions/latest)\>
3.  *Unicode Technical Note #5: Canonical Equivalence in Applications*, available at <[https://unicode.org/notes/tn5/](https://unicode.org/notes/tn5/)\>
4.  *Unicode Technical Standard #10: Unicode Collation Algorithm*, available at <[https://unicode.org/reports/tr10/](https://unicode.org/reports/tr10/)\>
5.  *Unicode Standard Annex #15, Unicode Normalization Forms*, available at <[https://unicode.org/reports/tr15/](https://unicode.org/reports/tr15/)\>
6.  *Unicode Standard Annex #18: Unicode Regular Expressions*, available at <[https://unicode.org/reports/tr18/](https://unicode.org/reports/tr18/)\>
7.  *Unicode Standard Annex #24: Unicode `Script` Property*, available at <[https://unicode.org/reports/tr24/](https://unicode.org/reports/tr24/)\>
8.  *Unicode Standard Annex #31, Unicode Identifiers and Pattern Syntax*, available at <[https://unicode.org/reports/tr31/](https://unicode.org/reports/tr31/)\>
9.  *Unicode Standard Annex #44: Unicode Character Database*, available at <[https://unicode.org/reports/tr44/](https://unicode.org/reports/tr44/)\>
10.  *Unicode Technical Standard #51: Unicode Emoji*, available at <[https://unicode.org/reports/tr51/](https://unicode.org/reports/tr51/)\>
11.  *IANA Time Zone Database*, available at <[https://www.iana.org/time-zones](https://www.iana.org/time-zones)\>
12.  ISO 8601:2004(E) *Data elements and interchange formats — Information interchange — Representation of dates and times*
13.  *RFC 1738 “Uniform Resource Locators (URL)”*, available at <[https://tools.ietf.org/html/rfc1738](https://tools.ietf.org/html/rfc1738)\>
14.  *RFC 2396 “Uniform Resource Identifiers (URI): Generic Syntax”*, available at <[https://tools.ietf.org/html/rfc2396](https://tools.ietf.org/html/rfc2396)\>
15.  *RFC 3629 “UTF-8, a transformation format of ISO 10646”*, available at <[https://tools.ietf.org/html/rfc3629](https://tools.ietf.org/html/rfc3629)\>
16.  *RFC 7231 “Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content”*, available at <[https://tools.ietf.org/html/rfc7231](https://tools.ietf.org/html/rfc7231)\>


# Colophon

This specification is authored on [GitHub](https://github.com/tc39/ecma262) in a plaintext source format called [Ecmarkup](https://github.com/bterlson/ecmarkup). Ecmarkup is an HTML and Markdown dialect that provides a framework and toolset for authoring Ecma specifications in plaintext and processing the specification into a full-featured HTML rendering that follows the editorial conventions for this document. Ecmarkup builds on and integrates a number of other formats and technologies including [Grammarkdown](https://github.com/rbuckton/grammarkdown) for defining syntax and [Ecmarkdown](https://github.com/domenic/ecmarkdown) for authoring algorithm steps. PDF renderings of this specification are produced using a print stylesheet which takes advantage of the CSS Paged Media specification and is converted using [PrinceXML](https://www.princexml.com/).

Prior editions of this specification were authored using Word—the Ecmarkup source text that formed the basis of this edition was produced by converting the ECMAScript 2015 Word document to Ecmarkup using an automated conversion tool.


# Copyright & Software License

Ecma International

Rue du Rhone 114

CH-1204 Geneva

Tel: +41 22 849 6000

Fax: +41 22 849 6001

Web: [https://ecma-international.org/](https://ecma-international.org/)


## Copyright Notice

ALTERNATIVE COPYRIGHT NOTICE AND COPYRIGHT LICENSE

© 2025 Ecma International

By obtaining and/or copying this work, you (the licensee) agree that you have read, understood, and will comply with the following terms and conditions.

Permission under Ecma’s copyright to copy, modify, prepare derivative works of, and distribute this work, with or without modification, for any purpose and without fee or royalty is hereby granted, provided that you include the following on ALL copies of the work or portions thereof, including modifications:

(i) The full text of this COPYRIGHT NOTICE AND COPYRIGHT LICENSE in a location viewable to users of the redistributed or derivative work.

(ii) Any pre-existing intellectual property disclaimers, notices, or terms and conditions. If none exist, the Ecma alternative copyright notice should be included.

(iii) Notice of any changes or modifications, through a copyright statement on the document such as “This document includes material copied from or derived from ECMAScript® 2026 Language Specification https://tc39.es/ecma262/.  
Copyright © Ecma International.”

**Disclaimers**

THIS WORK IS PROVIDED “AS IS,” AND COPYRIGHT HOLDERS MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY OR FITNESS FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF THE DOCUMENT WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.

COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE DOCUMENT.

The name and trademarks of copyright holders may NOT be used in advertising or publicity pertaining to the work without specific, written prior permission. Title to copyright in this work will at all times remain with copyright holders.


## Software License

All Software contained in this document ("Software") is protected by copyright and is being made available under the "BSD License", included below. This Software may be subject to third party rights (rights from parties other than Ecma International), including patent rights, and no licenses under such third party rights are granted under this license even if the third party concerned is a member of Ecma International. SEE THE ECMA CODE OF CONDUCT IN PATENT MATTERS AVAILABLE AT [https://ecma-international.org/memento/codeofconduct.htm](https://ecma-international.org/memento/codeofconduct.htm) FOR INFORMATION REGARDING THE LICENSING OF PATENT CLAIMS THAT ARE REQUIRED TO IMPLEMENT ECMA INTERNATIONAL STANDARDS.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

1.  Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
2.  Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
3.  Neither the name of the authors nor Ecma International may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE ECMA INTERNATIONAL "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL ECMA INTERNATIONAL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
